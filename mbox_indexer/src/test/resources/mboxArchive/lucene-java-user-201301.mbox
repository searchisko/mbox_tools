From java-user-return-54546-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Jan  1 21:25:12 2013
Return-Path: <java-user-return-54546-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id E6D54E644
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue,  1 Jan 2013 21:25:11 +0000 (UTC)
Received: (qmail 84161 invoked by uid 500); 1 Jan 2013 21:25:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84081 invoked by uid 500); 1 Jan 2013 21:25:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84073 invoked by uid 99); 1 Jan 2013 21:25:09 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Jan 2013 21:25:09 +0000
X-ASF-Spam-Status: No, hits=3.0 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,HTML_MESSAGE,MISSING_HEADERS,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of pelegitai17@gmail.com designates 209.85.212.49 as permitted sender)
Received: from [209.85.212.49] (HELO mail-vb0-f49.google.com) (209.85.212.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Jan 2013 21:25:02 +0000
Received: by mail-vb0-f49.google.com with SMTP id r6so13528045vbi.22
        for <java-user@lucene.apache.org>; Tue, 01 Jan 2013 13:24:41 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:cc
         :content-type;
        bh=I834cLSDDmxKRnorOJQQkN71qVhM5FUZZGnt4r8nwcg=;
        b=N7G51rLQmCqT8uOz2dP27nKlbyyukeF05IdwmQAoM/TEOTQ3i6SxZxQY156YqKxn3e
         KcP9MZ92lr/gL69u6PxYmHx5Rkm0ay14i7vYtN1r5UiTWN9GaK2HHZSnCIFibSaJ8pth
         A4IN5SfWQnHuu7H+232tpJFMan6aeZ2Y92nJn+sPOlQVrUcUairXtTYnfBUq6oFISb7D
         1p9Ce/0KBqyUGevFk0ISAwVtB0aNUFeOD0ped56PCNFJ6NP88qZz4CdkD62+KASkoG2y
         9u1jQAxHtkXUg/eGTQq7ZhckD0fYfknMEdZ1q7iK3fdWUEZQvl1SwC+/vUo1t/bHmb8k
         GK/Q==
MIME-Version: 1.0
Received: by 10.52.92.148 with SMTP id cm20mr60682570vdb.12.1357075481577;
 Tue, 01 Jan 2013 13:24:41 -0800 (PST)
Received: by 10.220.24.74 with HTTP; Tue, 1 Jan 2013 13:24:41 -0800 (PST)
In-Reply-To: <50E1FC44.8020304@ifactory.com>
References: <CALvBDEhgbTMLrn0TLyXQ_pq898dfXms7jXoKLVPFV6u1oqCTvw@mail.gmail.com>
	<50E1FC44.8020304@ifactory.com>
Date: Tue, 1 Jan 2013 23:24:41 +0200
Message-ID: <CALvBDEgz4iisRvpV-9UXT2LCFRHnqQcfaoLDmx+1E29JAFhiNA@mail.gmail.com>
Subject: Re: adding attributes to TokenStream
From: Itai Peleg <pelegitai17@gmail.com>
Cc: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=20cf3071c6b20349f704d240c287
X-Virus-Checked: Checked by ClamAV on apache.org

--20cf3071c6b20349f704d240c287
Content-Type: text/plain; charset=ISO-8859-1

That worked great :) thanks a lot for the quick reply!

I have another question - after I "flagged" all my special tokens (in my
case, the ones that are entities) is there an elegant way of counting how
many of them I have in a document? I found an ugly way to do that, but I'm
sure there's a better one.

Thanks in advance,
Itai


2012/12/31 Michael Sokolov <sokolov@ifactory.com>

> On 12/31/2012 11:39 AM, Itai Peleg wrote:
>
>> Hi all,
>>
>> Can someone please post a simple example showing how to add additional
>> attributes to token in a TokenStream (inside IncrementToken for example?).
>>
>> I'm working on entity extraction and want to flag specific tokens an
>> entities, but I'm having problems.
>>
>> Thanks in advance,
>> Itai
>>
>>  Here's a simple example of a filter that adds an atytribute saying
> whether a token is "the"
>
> class YourTokenStream extends TokenFilter {
>   private final YourAttribute att;
>   private final CharTermAttribute term;
>   private final TokenStream source;
>
>   public YourTokenStream (TokenStream upstream) {
>      att = addAttribute (YourAttribute.class);
>      term = addAttribute (CharTermAttribute.class);
>      source = upstream;
>   }
>
>   public boolean incrementToken () {
>     if (source.incrementToken()) ?? {
>       if ("the".equals (new String(term.buffer())) {
>         att.setIsAnEnglishArticle(**true);
>         return true;
>     }
>     return false;
>   }
>
> }
>
>
>

--20cf3071c6b20349f704d240c287--

From java-user-return-54547-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Jan  1 23:48:53 2013
Return-Path: <java-user-return-54547-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 4A825E64C
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue,  1 Jan 2013 23:48:53 +0000 (UTC)
Received: (qmail 45148 invoked by uid 500); 1 Jan 2013 23:48:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45089 invoked by uid 500); 1 Jan 2013 23:48:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45079 invoked by uid 99); 1 Jan 2013 23:48:51 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Jan 2013 23:48:51 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of sokolov@ifactory.com designates 65.223.181.132 as permitted sender)
Received: from [65.223.181.132] (HELO camelot.ifactory.com) (65.223.181.132)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Jan 2013 23:48:45 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by camelot.ifactory.com (Postfix) with ESMTP id EF11B3671DC6;
	Tue,  1 Jan 2013 18:48:23 -0500 (EST)
X-Virus-Scanned: amavisd-new at camelot.ifactory.com
Received: from camelot.ifactory.com ([127.0.0.1])
	by localhost (camelot.ifactory.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id oqEuBp+g+DwE; Tue,  1 Jan 2013 18:48:22 -0500 (EST)
Received: from [192.168.1.4] (pool-173-76-135-186.bstnma.fios.verizon.net [173.76.135.186])
	by camelot.ifactory.com (Postfix) with ESMTPSA id 519663671DC1;
	Tue,  1 Jan 2013 18:48:22 -0500 (EST)
Message-ID: <50E375C6.5070800@ifactory.com>
Date: Tue, 01 Jan 2013 18:48:22 -0500
From: Michael Sokolov <sokolov@ifactory.com>
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:17.0) Gecko/17.0 Thunderbird/17.0
MIME-Version: 1.0
To: java-user@lucene.apache.org
CC: Itai Peleg <pelegitai17@gmail.com>
Subject: Re: adding attributes to TokenStream
References: <CALvBDEhgbTMLrn0TLyXQ_pq898dfXms7jXoKLVPFV6u1oqCTvw@mail.gmail.com> <50E1FC44.8020304@ifactory.com> <CALvBDEgz4iisRvpV-9UXT2LCFRHnqQcfaoLDmx+1E29JAFhiNA@mail.gmail.com>
In-Reply-To: <CALvBDEgz4iisRvpV-9UXT2LCFRHnqQcfaoLDmx+1E29JAFhiNA@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Sure ... The frequency count is maintained in the index to enable 
relevance scoring.  You can pull it out using a TermDocs, which 
enumerates this sort of information.  Sorry, I don't have example code 
handy for this.

-Mike


On 1/1/2013 4:24 PM, Itai Peleg wrote:
> That worked great :) thanks a lot for the quick reply!
>
> I have another question - after I "flagged" all my special tokens (in my
> case, the ones that are entities) is there an elegant way of counting how
> many of them I have in a document? I found an ugly way to do that, but I'm
> sure there's a better one.
>
> Thanks in advance,
> Itai
>
>
> 2012/12/31 Michael Sokolov <sokolov@ifactory.com>
>
>> On 12/31/2012 11:39 AM, Itai Peleg wrote:
>>
>>> Hi all,
>>>
>>> Can someone please post a simple example showing how to add additional
>>> attributes to token in a TokenStream (inside IncrementToken for example?).
>>>
>>> I'm working on entity extraction and want to flag specific tokens an
>>> entities, but I'm having problems.
>>>
>>> Thanks in advance,
>>> Itai
>>>
>>>   Here's a simple example of a filter that adds an atytribute saying
>> whether a token is "the"
>>
>> class YourTokenStream extends TokenFilter {
>>    private final YourAttribute att;
>>    private final CharTermAttribute term;
>>    private final TokenStream source;
>>
>>    public YourTokenStream (TokenStream upstream) {
>>       att = addAttribute (YourAttribute.class);
>>       term = addAttribute (CharTermAttribute.class);
>>       source = upstream;
>>    }
>>
>>    public boolean incrementToken () {
>>      if (source.incrementToken()) ?? {
>>        if ("the".equals (new String(term.buffer())) {
>>          att.setIsAnEnglishArticle(**true);
>>          return true;
>>      }
>>      return false;
>>    }
>>
>> }
>>
>>
>>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54548-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jan  2 09:57:53 2013
Return-Path: <java-user-return-54548-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 2228FECF1
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed,  2 Jan 2013 09:57:53 +0000 (UTC)
Received: (qmail 25163 invoked by uid 500); 2 Jan 2013 09:57:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24995 invoked by uid 500); 2 Jan 2013 09:57:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24974 invoked by uid 99); 2 Jan 2013 09:57:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Jan 2013 09:57:48 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of youngestachiever@gmail.com designates 209.85.215.41 as permitted sender)
Received: from [209.85.215.41] (HELO mail-la0-f41.google.com) (209.85.215.41)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Jan 2013 09:57:41 +0000
Received: by mail-la0-f41.google.com with SMTP id em20so5787372lab.28
        for <java-user@lucene.apache.org>; Wed, 02 Jan 2013 01:57:20 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:date:message-id:subject:from:to:content-type;
        bh=k/QnE1D3Rikm20HRUXekYcGBhe85ODDjcV4IWtH139M=;
        b=Qb6rlhFgI2v0V5tBFafR+5mRuFgkhxmo5j0I3NUi9aWIIuiYfhXoyvD6UQu7xZZZo3
         5hyrwdnKF6MmuyaDr2dfiVbkyoEwEgP3KcKm96aMu7lcYM5J1txZjepjHn62wgJkpP7v
         jhHHP7LrKPAhdUx6FNjwczUqwQhiPkiY9kxQWGfnbT8ZHYR0bu4PetYpuIJAdgcS2isZ
         aY+CntuY7rgSgtLENAEpt8VLl9w8Sujvb5/cUc1aa+q60/F2WZAOCvu3vK83uc5/wygx
         DmPFr2/2eek4pJanZmW/JQYYAODjizC553vIxPTT9hmZFDN7tjU9W+YRH5vAhWMfp0wC
         Ogzw==
MIME-Version: 1.0
Received: by 10.152.125.7 with SMTP id mm7mr43777421lab.2.1357120640245; Wed,
 02 Jan 2013 01:57:20 -0800 (PST)
Received: by 10.114.4.39 with HTTP; Wed, 2 Jan 2013 01:57:20 -0800 (PST)
Date: Wed, 2 Jan 2013 15:27:20 +0530
Message-ID: <CAPzrt-3P4shaovicEHK6-y=Q6z8JYrx+U47pN8ye5vY3VRQw5w@mail.gmail.com>
Subject: Pulling lucene 4.1
From: Ramprakash Ramamoorthy <youngestachiever@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=f46d043743efaddfb404d24b4507
X-Virus-Checked: Checked by ClamAV on apache.org

--f46d043743efaddfb404d24b4507
Content-Type: text/plain; charset=ISO-8859-1

Dear all,

           Would be glad to know on which branch of lucene is the
development happening on version 4.1. Would be glad if you can share the
repo URL, we are testing out certain features of 4.1 including
CompressingStoredFieldsFormat.

           Currently we are pulling from trunk, which I guess is 5.x
branch. Very particular about 4.1 because, we need backward compatibility
with 3.x. Thanks in advance.

-- 
With Thanks and Regards,
Ramprakash Ramamoorthy,
India.

--f46d043743efaddfb404d24b4507--

From java-user-return-54549-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jan  2 12:39:19 2013
Return-Path: <java-user-return-54549-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id AEF9BDF64
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed,  2 Jan 2013 12:39:19 +0000 (UTC)
Received: (qmail 56101 invoked by uid 500); 2 Jan 2013 12:39:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55934 invoked by uid 500); 2 Jan 2013 12:39:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55918 invoked by uid 99); 2 Jan 2013 12:39:15 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Jan 2013 12:39:15 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of serera@gmail.com designates 74.125.82.172 as permitted sender)
Received: from [74.125.82.172] (HELO mail-we0-f172.google.com) (74.125.82.172)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Jan 2013 12:39:08 +0000
Received: by mail-we0-f172.google.com with SMTP id r3so6750549wey.17
        for <java-user@lucene.apache.org>; Wed, 02 Jan 2013 04:38:47 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=BxDnM+SdIwrXjNuSUuN7UFIenkD0/98GJ5C2tg7ldBc=;
        b=JWIJBoosJXCMmFnXOHESP0SpuiURfrt/vnBhzvBxQpev1fSSOqjGgYLDsB5E9YGDmg
         6WBmcRVKyBdu7svYCFByei9w2qAxXcLoEfjiVPUPbxHVMrD6K1NsmsUUjylfvuVxrh85
         eLcxhZxPEWk+i0kpDtxEdDtK7rYvmo6kiaf3IOGBJ1NQhCHk7b+yxNl7bzMJGuUY23mC
         XPMa5pMErcLeA8Iqwm0aVTaAs+cBcL707VNPTfLze0X0daLG8N9vOXp8w0iOKI5L0dol
         RDWZMaevlG3dlPpGAV3HJnXPMDoIZ8Elmv1+GYJ823IqBazQuOy/wEmcVAbGRnIMzjC7
         OB4w==
MIME-Version: 1.0
Received: by 10.194.238.226 with SMTP id vn2mr72165886wjc.23.1357130327837;
 Wed, 02 Jan 2013 04:38:47 -0800 (PST)
Received: by 10.194.85.229 with HTTP; Wed, 2 Jan 2013 04:38:47 -0800 (PST)
In-Reply-To: <CAPzrt-3P4shaovicEHK6-y=Q6z8JYrx+U47pN8ye5vY3VRQw5w@mail.gmail.com>
References: <CAPzrt-3P4shaovicEHK6-y=Q6z8JYrx+U47pN8ye5vY3VRQw5w@mail.gmail.com>
Date: Wed, 2 Jan 2013 14:38:47 +0200
Message-ID: <CALfq-2S0vbqMXb0QhA4a=JP+POM-u7O46p73ag-n9cpcHf5K6A@mail.gmail.com>
Subject: Re: Pulling lucene 4.1
From: Shai Erera <serera@gmail.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Content-Type: multipart/alternative; boundary=089e01493c981acae004d24d87e8
X-Virus-Checked: Checked by ClamAV on apache.org

--089e01493c981acae004d24d87e8
Content-Type: text/plain; charset=ISO-8859-1

There's no specific branch for 4.1 yet. All development still happens on
the 4x branch (
http://svn.apache.org/repos/asf/lucene/dev/branches/branch_4x/).

Note that Lucene maintains two active branches for development: 'trunk'
(currently to be 5.0) and '4x' off of which all Lucene 4.x releases are
created.

Shai


On Wed, Jan 2, 2013 at 11:57 AM, Ramprakash Ramamoorthy <
youngestachiever@gmail.com> wrote:

> Dear all,
>
>            Would be glad to know on which branch of lucene is the
> development happening on version 4.1. Would be glad if you can share the
> repo URL, we are testing out certain features of 4.1 including
> CompressingStoredFieldsFormat.
>
>            Currently we are pulling from trunk, which I guess is 5.x
> branch. Very particular about 4.1 because, we need backward compatibility
> with 3.x. Thanks in advance.
>
> --
> With Thanks and Regards,
> Ramprakash Ramamoorthy,
> India.
>

--089e01493c981acae004d24d87e8--

From java-user-return-54550-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jan  2 13:26:53 2013
Return-Path: <java-user-return-54550-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 90B7FEDE7
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed,  2 Jan 2013 13:26:53 +0000 (UTC)
Received: (qmail 50012 invoked by uid 500); 2 Jan 2013 13:26:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49832 invoked by uid 500); 2 Jan 2013 13:26:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49798 invoked by uid 99); 2 Jan 2013 13:26:50 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Jan 2013 13:26:50 +0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.220.170] (HELO mail-vc0-f170.google.com) (209.85.220.170)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Jan 2013 13:26:43 +0000
Received: by mail-vc0-f170.google.com with SMTP id fl11so14278061vcb.15
        for <java-user@lucene.apache.org>; Wed, 02 Jan 2013 05:26:23 -0800 (PST)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=mime-version:date:message-id:subject:from:to:content-type
         :x-gm-message-state;
        bh=AEKVCpiawguWiCxm8gRsBKZUdN0PpTk16kFS3ltHpBo=;
        b=RbOKrnoeGm43Q1kIN6Pto/vOr5e4g9LyByzCInZeOo/UmOHKJLfzsIDkCpmUIbbtwJ
         yZn13cl2P+3Gv1sZ7hImRpAG0uH12/6UQ0OUrr0ud1gd+f3ODlEraNuPftisk7531rYg
         YcrfVtEMT7g1D8oF1l7PcidYEUhu6Ffhv+ZSg+7eHma6nO6bdtB9w/bkJDq+d5fby0Ps
         ULEqo6wlvp5CfE25ydmDvrBw5V7mZCbFHOcZRR5NoT57BucayLeh6JfdSDhhkLBppoOc
         DbiAfy3srRu61uLGDvpXu4XxcnI6m7RkOpTzwZWDa3T66esewpMwA/aHBbHL3IPIk3JB
         O59A==
MIME-Version: 1.0
Received: by 10.221.0.79 with SMTP id nl15mr70845688vcb.41.1357133182976; Wed,
 02 Jan 2013 05:26:22 -0800 (PST)
Received: by 10.58.234.138 with HTTP; Wed, 2 Jan 2013 05:26:22 -0800 (PST)
Date: Wed, 2 Jan 2013 15:26:22 +0200
Message-ID: <CA+Ltc5JtTTkH4V1NkZg8xt7tdyFHuQ7mpuU6AYh8_DqBdo21ZQ@mail.gmail.com>
Subject: potential memory leak when using RAMDirectory ,CloseableThreadLocal
 and a thread pool .
From: Alon Muchnick <alon@datonics.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=bcaec54ee37048c1c504d24e3107
X-Gm-Message-State: ALoCoQltuyDXjjy98CNd0MVQ0NWMut0fNATXUQtNQvn9B/u8CainMZnCcO9yoo21phopPzUhMGdy
X-Virus-Checked: Checked by ClamAV on apache.org

--bcaec54ee37048c1c504d24e3107
Content-Type: text/plain; charset=ISO-8859-1

Hello All ,
we are using Lucune 3.6.2 in our web application on tomcat 5.5 and recently
we started testing our application on tomcat 7, unfortunately we seem to
encounter a memory link in Lucune's  CloseableThreadLocal class , any help
with solving the below issue would be much appreciated.


we are using RAMDirectory for our Indexes , while testing the application
on tomcat 7 we noticed that there is a memory leak in our application ,
after taking a heap dump we can see the memory leak is in the:



Type |Name                |Value
------------------------------------------------------------
ref |   index                   |  org.apache.lucene.store.RAMDirectory --->
------------------------------------------------------------

------------------------------------------------------------------------
ref |   core                    |
org.apache.lucene.index.SegmentReader$CoreReaders   --->
------------------------------------------------------------------------

--------------------------------------------------------------
ref |   tis                       |
org.apache.lucene.index.TermInfosReader  --->
--------------------------------------------------------------


-----------------------------------------------------------------------------
ref |   threadResources   |  org.apache.lucene.util.CloseableThreadLocal
--->
-----------------------------------------------------------------------------


--------------------------------------------
ref  |   hardRefs              |  java.util.HashMap @ 0x9d566938
--------------------------------------------

i guess the HashMap is used for caching purposes and it hold entries where
the key is a thread name and the value is a
org.apache.lucene.index.TermInfosReader$ThreadResources object .

*even when i stop new incoming connection to the application , tomcat
closes all the active threads and a GC is run the above map size is not
reduced and GC cannot reclaim the heap space .
*
the problem looks  some what similar to LUCENE-3841
https://issues.apache.org/jira/browse/LUCENE-3841
but we are no using SnowballAnalyzer .

( i checked the code and made sure the hardRefs map is a WeakHashMap )


our JVM is :

OpenJDK 64-Bit Server VM ,
java.runtime.version1.6.0_20-b20


one again any help would be much appreciated.

thanks

Alon

--bcaec54ee37048c1c504d24e3107--

From java-user-return-54551-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jan  2 16:42:15 2013
Return-Path: <java-user-return-54551-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id CCA23D3EA
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed,  2 Jan 2013 16:42:15 +0000 (UTC)
Received: (qmail 52052 invoked by uid 500); 2 Jan 2013 16:42:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51923 invoked by uid 500); 2 Jan 2013 16:42:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51749 invoked by uid 99); 2 Jan 2013 16:42:12 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Jan 2013 16:42:12 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of goksron@gmail.com designates 209.85.210.49 as permitted sender)
Received: from [209.85.210.49] (HELO mail-da0-f49.google.com) (209.85.210.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Jan 2013 16:42:04 +0000
Received: by mail-da0-f49.google.com with SMTP id v40so6573919dad.36
        for <java-user@lucene.apache.org>; Wed, 02 Jan 2013 08:41:44 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=x-received:message-id:date:from:user-agent:mime-version:to:subject
         :references:in-reply-to:content-type:content-transfer-encoding;
        bh=RVFT29Kax4fshAMZcNL9QBL1hpoFkhQT0qWP7hovLvw=;
        b=MRvQdAI/tfMZrZSIWfnruns42oVYODzoz5oQMbPEWOXYqpXorjqb4Rh2bQuDT8/Rii
         lYdf4qccdisOY+WKcxKBiqz8Bqik2Fciy7UY3CASMw1GsLaaRQxECmr7OlGRsF202eyO
         B6xxiyoMH7I0nuNr9YXZzAzUVuQdOUOC7dw3NWXDxhl6Rpi+KcWG/YbTvui60e5iYi3d
         FOrLtgWydfFMKHIBoPi4rCTohKFoMN2a54GpsCdlGuEFQUqsvZwRBNLsUfDFPY2W+GGR
         oRdJEv+wpmMWkBB5q0YVfu6Y4UxTyMHzxzaaWRUDsGmH3NgyakvEfEdTQxDaTOBtwsHw
         Cy/A==
X-Received: by 10.68.238.106 with SMTP id vj10mr147700131pbc.40.1357144904184;
        Wed, 02 Jan 2013 08:41:44 -0800 (PST)
Received: from [192.168.0.100] (c-67-180-166-59.hsd1.ca.comcast.net. [67.180.166.59])
        by mx.google.com with ESMTPS id gv9sm28688020pbc.21.2013.01.02.08.41.41
        (version=SSLv3 cipher=OTHER);
        Wed, 02 Jan 2013 08:41:42 -0800 (PST)
Message-ID: <50E46344.6050102@gmail.com>
Date: Wed, 02 Jan 2013 08:41:40 -0800
From: Lance Norskog <goksron@gmail.com>
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:17.0) Gecko/17.0 Thunderbird/17.0
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: potential memory leak when using RAMDirectory ,CloseableThreadLocal
 and a thread pool .
References: <CA+Ltc5JtTTkH4V1NkZg8xt7tdyFHuQ7mpuU6AYh8_DqBdo21ZQ@mail.gmail.com>
In-Reply-To: <CA+Ltc5JtTTkH4V1NkZg8xt7tdyFHuQ7mpuU6AYh8_DqBdo21ZQ@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

There were memory leak problems with earlier versions of Java. You 
should upgrade to Java 6_30.

Lance

On 01/02/2013 05:26 AM, Alon Muchnick wrote:
> Hello All ,
> we are using Lucune 3.6.2 in our web application on tomcat 5.5 and recently
> we started testing our application on tomcat 7, unfortunately we seem to
> encounter a memory link in Lucune's  CloseableThreadLocal class , any help
> with solving the below issue would be much appreciated.
>
>
> we are using RAMDirectory for our Indexes , while testing the application
> on tomcat 7 we noticed that there is a memory leak in our application ,
> after taking a heap dump we can see the memory leak is in the:
>
>
>
> Type |Name                |Value
> ------------------------------------------------------------
> ref |   index                   |  org.apache.lucene.store.RAMDirectory --->
> ------------------------------------------------------------
>
> ------------------------------------------------------------------------
> ref |   core                    |
> org.apache.lucene.index.SegmentReader$CoreReaders   --->
> ------------------------------------------------------------------------
>
> --------------------------------------------------------------
> ref |   tis                       |
> org.apache.lucene.index.TermInfosReader  --->
> --------------------------------------------------------------
>
>
> -----------------------------------------------------------------------------
> ref |   threadResources   |  org.apache.lucene.util.CloseableThreadLocal
> --->
> -----------------------------------------------------------------------------
>
>
> --------------------------------------------
> ref  |   hardRefs              |  java.util.HashMap @ 0x9d566938
> --------------------------------------------
>
> i guess the HashMap is used for caching purposes and it hold entries where
> the key is a thread name and the value is a
> org.apache.lucene.index.TermInfosReader$ThreadResources object .
>
> *even when i stop new incoming connection to the application , tomcat
> closes all the active threads and a GC is run the above map size is not
> reduced and GC cannot reclaim the heap space .
> *
> the problem looks  some what similar to LUCENE-3841
> https://issues.apache.org/jira/browse/LUCENE-3841
> but we are no using SnowballAnalyzer .
>
> ( i checked the code and made sure the hardRefs map is a WeakHashMap )
>
>
> our JVM is :
>
> OpenJDK 64-Bit Server VM ,
> java.runtime.version1.6.0_20-b20
>
>
> one again any help would be much appreciated.
>
> thanks
>
> Alon
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54552-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jan  2 18:06:38 2013
Return-Path: <java-user-return-54552-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 4B2BAE530
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed,  2 Jan 2013 18:06:38 +0000 (UTC)
Received: (qmail 6980 invoked by uid 500); 2 Jan 2013 18:06:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6933 invoked by uid 500); 2 Jan 2013 18:06:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6914 invoked by uid 99); 2 Jan 2013 18:06:36 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Jan 2013 18:06:36 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of goksron@gmail.com designates 209.85.220.50 as permitted sender)
Received: from [209.85.220.50] (HELO mail-pa0-f50.google.com) (209.85.220.50)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Jan 2013 18:06:27 +0000
Received: by mail-pa0-f50.google.com with SMTP id hz10so8142016pad.9
        for <java-user@lucene.apache.org>; Wed, 02 Jan 2013 10:06:07 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=x-received:message-id:date:from:user-agent:mime-version:to:subject
         :references:in-reply-to:content-type:content-transfer-encoding;
        bh=n0Wz5O3yE8VmDHUfcbc4wwfMMByM5mZAakjPbRuM1YA=;
        b=eqs0lWtMKMLc2irCq0Bovbjay4J8GebNuchXyQcKhsjusoUfNM5amEEEV0YC4V/Jle
         KU1lyb7m3ZwVezhrV60JHgkvxm/tCjNWAQs46bS9s5Rrj67gu9967dAUv5d5yQ6rpnwj
         hcRwkLygz666qNLk61DaBsepnoYZqOZq9hVRe/2bLSXA3zmyY5UcWQPmowYlkKDMy3eu
         /P62jiYWg7EzfDAOCDmphNqTDO57HvW3kb8QC7QxzUpbaHVhckY4+t2+JdIecxe7ImLE
         tMKP4G08avrhJWqZ9LBkR5whue1BNoaV2uGqFHOzDMpTKLlfVPd+OU/FzwGWwHZJQrZN
         4h6A==
X-Received: by 10.68.226.71 with SMTP id rq7mr145687485pbc.60.1357149967598;
        Wed, 02 Jan 2013 10:06:07 -0800 (PST)
Received: from [10.19.220.101] (64-71-21-34.static.wiline.com. [64.71.21.34])
        by mx.google.com with ESMTPS id nw9sm28784070pbb.42.2013.01.02.10.06.05
        (version=SSLv3 cipher=OTHER);
        Wed, 02 Jan 2013 10:06:06 -0800 (PST)
Message-ID: <50E4770C.4000103@gmail.com>
Date: Wed, 02 Jan 2013 10:06:04 -0800
From: Lance Norskog <goksron@gmail.com>
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:17.0) Gecko/17.0 Thunderbird/17.0
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Pulling lucene 4.1
References: <CAPzrt-3P4shaovicEHK6-y=Q6z8JYrx+U47pN8ye5vY3VRQw5w@mail.gmail.com> <CALfq-2S0vbqMXb0QhA4a=JP+POM-u7O46p73ag-n9cpcHf5K6A@mail.gmail.com>
In-Reply-To: <CALfq-2S0vbqMXb0QhA4a=JP+POM-u7O46p73ag-n9cpcHf5K6A@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

4.x does not promise backwards compatibility with 3.x. Have you made 
your own extensions?

On 01/02/2013 04:38 AM, Shai Erera wrote:
> There's no specific branch for 4.1 yet. All development still happens on
> the 4x branch (
> http://svn.apache.org/repos/asf/lucene/dev/branches/branch_4x/).
>
> Note that Lucene maintains two active branches for development: 'trunk'
> (currently to be 5.0) and '4x' off of which all Lucene 4.x releases are
> created.
>
> Shai
>
>
> On Wed, Jan 2, 2013 at 11:57 AM, Ramprakash Ramamoorthy <
> youngestachiever@gmail.com> wrote:
>
>> Dear all,
>>
>>             Would be glad to know on which branch of lucene is the
>> development happening on version 4.1. Would be glad if you can share the
>> repo URL, we are testing out certain features of 4.1 including
>> CompressingStoredFieldsFormat.
>>
>>             Currently we are pulling from trunk, which I guess is 5.x
>> branch. Very particular about 4.1 because, we need backward compatibility
>> with 3.x. Thanks in advance.
>>
>> --
>> With Thanks and Regards,
>> Ramprakash Ramamoorthy,
>> India.
>>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54553-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jan  2 19:01:51 2013
Return-Path: <java-user-return-54553-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 7C0D6D6F0
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed,  2 Jan 2013 19:01:51 +0000 (UTC)
Received: (qmail 75859 invoked by uid 500); 2 Jan 2013 19:01:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75794 invoked by uid 500); 2 Jan 2013 19:01:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75786 invoked by uid 99); 2 Jan 2013 19:01:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Jan 2013 19:01:48 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of serera@gmail.com designates 74.125.82.47 as permitted sender)
Received: from [74.125.82.47] (HELO mail-wg0-f47.google.com) (74.125.82.47)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Jan 2013 19:01:42 +0000
Received: by mail-wg0-f47.google.com with SMTP id dq11so6813500wgb.14
        for <java-user@lucene.apache.org>; Wed, 02 Jan 2013 11:01:21 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=QjTtURyUFiVNkDHBN9wtEQoBMwSe0YdGQTwJQiogeug=;
        b=urt7Y1kJzP33mJkWYY0VoLcVIi6yvdwGlopTc9T/EpCJCSVRylL+S7P1/ITQC10MJO
         Ypnd/DglH2g2n+hbUmZd8mLPuXrtorAhTza/ccaJ5IQGp535oYm6nKCc/DgBlewS9LZc
         M1fe0/qeTlCIf6IwZ7xDk8H+dNtlVjXWao8n5Sv55ZKl8d4uoKb15tgP5z6OMEH/cSCH
         qt+iNzTxfGe0fvtNk+tShVmsoUIyUE7iKGbemG7rXw4nse20mZd9hU2B8NtRLnfEBSed
         EKopSjYwMiRnI83hntv37PkMSRw0WmrIlXk5LZCGrJf0qHod9MoYnHtcUWmUwbZU2qpv
         IHHw==
MIME-Version: 1.0
Received: by 10.194.238.226 with SMTP id vn2mr73879762wjc.23.1357153280964;
 Wed, 02 Jan 2013 11:01:20 -0800 (PST)
Received: by 10.194.85.229 with HTTP; Wed, 2 Jan 2013 11:01:20 -0800 (PST)
In-Reply-To: <50E4770C.4000103@gmail.com>
References: <CAPzrt-3P4shaovicEHK6-y=Q6z8JYrx+U47pN8ye5vY3VRQw5w@mail.gmail.com>
	<CALfq-2S0vbqMXb0QhA4a=JP+POM-u7O46p73ag-n9cpcHf5K6A@mail.gmail.com>
	<50E4770C.4000103@gmail.com>
Date: Wed, 2 Jan 2013 21:01:20 +0200
Message-ID: <CALfq-2SZJ9mF30OYmGK+=8Nv_YcyM1i4JPgUrZGOdzEFhB1_Fw@mail.gmail.com>
Subject: Re: Pulling lucene 4.1
From: Shai Erera <serera@gmail.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Content-Type: multipart/alternative; boundary=089e01493c9837b80304d252df78
X-Virus-Checked: Checked by ClamAV on apache.org

--089e01493c9837b80304d252df78
Content-Type: text/plain; charset=ISO-8859-1

I was under the impression that you already migrated to 4.0 and are asking
for 4.1.

4.x promises backwards compatibility as far as index format goes.
Regarding API, you should consult the CHANGES as well as MIGRATE files in
order to successfully migrate a 3x Lucene app to 4.0.

Shai


On Wed, Jan 2, 2013 at 8:06 PM, Lance Norskog <goksron@gmail.com> wrote:

> 4.x does not promise backwards compatibility with 3.x. Have you made your
> own extensions?
>
> On 01/02/2013 04:38 AM, Shai Erera wrote:
>
>> There's no specific branch for 4.1 yet. All development still happens on
>> the 4x branch (
>> http://svn.apache.org/repos/**asf/lucene/dev/branches/**branch_4x/<http://svn.apache.org/repos/asf/lucene/dev/branches/branch_4x/>
>> ).
>>
>> Note that Lucene maintains two active branches for development: 'trunk'
>> (currently to be 5.0) and '4x' off of which all Lucene 4.x releases are
>> created.
>>
>> Shai
>>
>>
>> On Wed, Jan 2, 2013 at 11:57 AM, Ramprakash Ramamoorthy <
>> youngestachiever@gmail.com> wrote:
>>
>>  Dear all,
>>>
>>>             Would be glad to know on which branch of lucene is the
>>> development happening on version 4.1. Would be glad if you can share the
>>> repo URL, we are testing out certain features of 4.1 including
>>> CompressingStoredFieldsFormat.
>>>
>>>             Currently we are pulling from trunk, which I guess is 5.x
>>> branch. Very particular about 4.1 because, we need backward compatibility
>>> with 3.x. Thanks in advance.
>>>
>>> --
>>> With Thanks and Regards,
>>> Ramprakash Ramamoorthy,
>>> India.
>>>
>>>
>
> ------------------------------**------------------------------**---------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.**apache.org<java-user-unsubscribe@lucene.apache.org>
> For additional commands, e-mail: java-user-help@lucene.apache.**org<java-user-help@lucene.apache.org>
>
>

--089e01493c9837b80304d252df78--

From java-user-return-54554-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jan  2 20:47:08 2013
Return-Path: <java-user-return-54554-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 41CDDE506
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed,  2 Jan 2013 20:47:08 +0000 (UTC)
Received: (qmail 19474 invoked by uid 500); 2 Jan 2013 20:47:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19372 invoked by uid 500); 2 Jan 2013 20:47:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19364 invoked by uid 99); 2 Jan 2013 20:47:05 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Jan 2013 20:47:05 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.160.48] (HELO mail-pb0-f48.google.com) (209.85.160.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Jan 2013 20:46:59 +0000
Received: by mail-pb0-f48.google.com with SMTP id rq13so8159295pbb.7
        for <java-user@lucene.apache.org>; Wed, 02 Jan 2013 12:46:37 -0800 (PST)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:x-gm-message-state;
        bh=o22oeHHoivLXhOErK38gmZsc0T4uW2ftXS5HRokvhQg=;
        b=neVUqJMi0WCAMhb3YBpKsnBWL2aFNHcqAUiyL1HqQrijdquPdriyaHsILJ2W3IvLgm
         7gCeXagCbo4KZUAqNKeC824qFlsvGAoot9EfVHkDa0DCjFT6bb+GT4c8kmrMpUe3D5gs
         bEOLeDx851rRf8QKcN+/80+JOffJTujhQLmo9bBtxLI4dsRK6GMguMPO3wTvx/h0YjRl
         puthVZUUWy/pJ5zZ8h5Zk15GI+PzEJvinFkt6nNs+IejCHpTIcwMITmOPZ8Drp55ywsU
         sqy/LuUfBDjNcYBWSVXT5vQdfQWG5hq86ZtyaL+E+1wsUmUgngsUs9rMD2c/jqjT+zqh
         RSNg==
Received: by 10.68.219.67 with SMTP id pm3mr148059920pbc.150.1357159597539;
 Wed, 02 Jan 2013 12:46:37 -0800 (PST)
MIME-Version: 1.0
Received: by 10.68.36.36 with HTTP; Wed, 2 Jan 2013 12:46:17 -0800 (PST)
In-Reply-To: <CA+Ltc5JtTTkH4V1NkZg8xt7tdyFHuQ7mpuU6AYh8_DqBdo21ZQ@mail.gmail.com>
References: <CA+Ltc5JtTTkH4V1NkZg8xt7tdyFHuQ7mpuU6AYh8_DqBdo21ZQ@mail.gmail.com>
From: Michael McCandless <lucene@mikemccandless.com>
Date: Wed, 2 Jan 2013 15:46:17 -0500
Message-ID: <CAL8PwkYEFPR94dK+7=zmmxUOhvNOhdq8n2OadgX5A4tnO_OcOA@mail.gmail.com>
Subject: Re: potential memory leak when using RAMDirectory ,CloseableThreadLocal
 and a thread pool .
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Gm-Message-State: ALoCoQkvDfAU7YLRwxD5IUxm72xHu3i9jpB5xQokylGRroMTefEgMh3MT5485dZXd+rABhfKJm+c
X-Virus-Checked: Checked by ClamAV on apache.org

If CloseableThreadLocal.hardRefs is still a live reference then it
means the SegmentReader hasn't been closed yet, ie I think the chain
you show below is from a still-open SegmentReader?

Is it possible on upgrade to Tomcat 7 that more threads are doing
searches (which will require more RAM since Lucene stores per-thread
state in the CloseableThreadLocals...)?

Mike McCandless

http://blog.mikemccandless.com

On Wed, Jan 2, 2013 at 8:26 AM, Alon Muchnick <alon@datonics.com> wrote:
> Hello All ,
> we are using Lucune 3.6.2 in our web application on tomcat 5.5 and recently
> we started testing our application on tomcat 7, unfortunately we seem to
> encounter a memory link in Lucune's  CloseableThreadLocal class , any help
> with solving the below issue would be much appreciated.
>
>
> we are using RAMDirectory for our Indexes , while testing the application
> on tomcat 7 we noticed that there is a memory leak in our application ,
> after taking a heap dump we can see the memory leak is in the:
>
>
>
> Type |Name                |Value
> ------------------------------------------------------------
> ref |   index                   |  org.apache.lucene.store.RAMDirectory --->
> ------------------------------------------------------------
>
> ------------------------------------------------------------------------
> ref |   core                    |
> org.apache.lucene.index.SegmentReader$CoreReaders   --->
> ------------------------------------------------------------------------
>
> --------------------------------------------------------------
> ref |   tis                       |
> org.apache.lucene.index.TermInfosReader  --->
> --------------------------------------------------------------
>
>
> -----------------------------------------------------------------------------
> ref |   threadResources   |  org.apache.lucene.util.CloseableThreadLocal
> --->
> -----------------------------------------------------------------------------
>
>
> --------------------------------------------
> ref  |   hardRefs              |  java.util.HashMap @ 0x9d566938
> --------------------------------------------
>
> i guess the HashMap is used for caching purposes and it hold entries where
> the key is a thread name and the value is a
> org.apache.lucene.index.TermInfosReader$ThreadResources object .
>
> *even when i stop new incoming connection to the application , tomcat
> closes all the active threads and a GC is run the above map size is not
> reduced and GC cannot reclaim the heap space .
> *
> the problem looks  some what similar to LUCENE-3841
> https://issues.apache.org/jira/browse/LUCENE-3841
> but we are no using SnowballAnalyzer .
>
> ( i checked the code and made sure the hardRefs map is a WeakHashMap )
>
>
> our JVM is :
>
> OpenJDK 64-Bit Server VM ,
> java.runtime.version1.6.0_20-b20
>
>
> one again any help would be much appreciated.
>
> thanks
>
> Alon

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54555-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jan  3 00:29:31 2013
Return-Path: <java-user-return-54555-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 95A4C9848
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu,  3 Jan 2013 00:29:31 +0000 (UTC)
Received: (qmail 13917 invoked by uid 500); 3 Jan 2013 00:29:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13861 invoked by uid 500); 3 Jan 2013 00:29:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13851 invoked by uid 99); 3 Jan 2013 00:29:29 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Jan 2013 00:29:29 +0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.220.179] (HELO mail-vc0-f179.google.com) (209.85.220.179)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Jan 2013 00:29:24 +0000
Received: by mail-vc0-f179.google.com with SMTP id p1so14713787vcq.38
        for <java-user@lucene.apache.org>; Wed, 02 Jan 2013 16:29:03 -0800 (PST)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:x-gm-message-state;
        bh=x497YoiLXF2O8q7+bBMFFTqCv/Kz4K0mdF2pW3+sHsM=;
        b=GCIQoWA5KMb0Q1MDySwlvbLBFZ1UdYaIX5sFpOSIUxhoec62cuSLVKkqlEe2lrOmJp
         mQ3TzDqD2woueXPus4cPjS7nyOslcfI6UNUYAhzBGhytfJJJjHDy5JDSl/PNiNvUic73
         oxKhpFsHKG4Zb8esFbJqo0Qug49XnAbpDJvfPUKEP3KeyRt067gms998mhX44hf11f/T
         +0OZEm6qm2jFkBVSr73mYd6SqPyTLmjITGPi5Wc5J4Ry5ziNfgyvJ7lVulGBjVaI2s4A
         oraLMX338eQEupd9qUGnVkDtznO8vvWYiCx/Vb94NJP01gSN0hGtDvZVnBtX+CbKZhGc
         J9OA==
MIME-Version: 1.0
Received: by 10.52.180.200 with SMTP id dq8mr62604449vdc.71.1357172943207;
 Wed, 02 Jan 2013 16:29:03 -0800 (PST)
Received: by 10.58.234.138 with HTTP; Wed, 2 Jan 2013 16:29:02 -0800 (PST)
In-Reply-To: <CAL8PwkYEFPR94dK+7=zmmxUOhvNOhdq8n2OadgX5A4tnO_OcOA@mail.gmail.com>
References: <CA+Ltc5JtTTkH4V1NkZg8xt7tdyFHuQ7mpuU6AYh8_DqBdo21ZQ@mail.gmail.com>
	<CAL8PwkYEFPR94dK+7=zmmxUOhvNOhdq8n2OadgX5A4tnO_OcOA@mail.gmail.com>
Date: Thu, 3 Jan 2013 02:29:02 +0200
Message-ID: <CA+Ltc5JbJnEFbV89LB2WkPA_uRjz4S277vMLNs3HpRvMq8GxZA@mail.gmail.com>
Subject: potential memory leak when using RAMDirectory ,CloseableThreadLocal
 and a thread pool .
From: Alon Muchnick <alon@datonics.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Content-Type: multipart/alternative; boundary=bcaec517ab262dbe7a04d25773a3
X-Gm-Message-State: ALoCoQmBKhjWzu4xzbgZwTL0hV0Y6S8HOkmqs5AU57R3N3QKjgCDkOM74SvGQs3gzuSnlIfhPwgJ
X-Virus-Checked: Checked by ClamAV on apache.org

--bcaec517ab262dbe7a04d25773a3
Content-Type: text/plain; charset=ISO-8859-1

hi MIke,
thank you very much for replying .

i am not sure when the doClose() method of the SegementReader will be
called  ,
but i think you are correct regarding the SegmentReader still being live ,
we have an singleton object with a hash map of several RamDirectory indexes
and their IndexReader, IndexSearcher and IndexWriter objects ,
this object is initialized when the system starts and only closed when the
system shuts down .

the upgrade to tomcat 7 did increase the amount of live threads (due to
changes in tomcat's thread pool behavior ) and could explain more RAM being
used , but the scenario i am seeing is that even after the application had
stopped receiving new connection ,the thread pool is reduced to minimum
size and GC had been run , the are still references to the closed threads
as the keys in the weak hash map.

am i wrong to assume that under the above scenario the weakhash map should
have been truncated to hold only keys for the remaining live threads in the
the thread pool ? or will this never happen because there will be no more
additonal search requests thus the countUntilPurge in CloseableThreadLocal
will never reach 0 and the purge method will be never called?


Just to be clear regarding the sevirity of this , when the system comes up
the 6 RAMDirectory Lucune indexes are about 30 MG , after a few hours
,when we sample it after the thread pool returned to minimum size and a GC
had been run the Lucune indexes take 500MG .

i guess its not clear to me when will the memory in  CloseableThreadLocals
object will be release when working with a thread pool  ?


Thanks in advanced

Alon


On Wed, Jan 2, 2013 at 10:46 PM, Michael McCandless <
lucene@mikemccandless.com <javascript:_e({}, 'cvml',
'lucene@mikemccandless.com');>> wrote:

> CloseableThreadLocal.hardRefs is still a live reference then it
> means the SegmentReader hasn't been closed yet, ie I think the chain
> you show below is from a still-open SegmentReader?
>

--bcaec517ab262dbe7a04d25773a3--

From java-user-return-54556-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jan  3 00:59:10 2013
Return-Path: <java-user-return-54556-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id C3C369948
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu,  3 Jan 2013 00:59:10 +0000 (UTC)
Received: (qmail 19660 invoked by uid 500); 3 Jan 2013 00:59:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19621 invoked by uid 500); 3 Jan 2013 00:59:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19608 invoked by uid 99); 3 Jan 2013 00:59:08 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Jan 2013 00:59:08 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.160.52] (HELO mail-pb0-f52.google.com) (209.85.160.52)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Jan 2013 00:59:02 +0000
Received: by mail-pb0-f52.google.com with SMTP id ro2so8154094pbb.25
        for <java-user@lucene.apache.org>; Wed, 02 Jan 2013 16:58:40 -0800 (PST)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:x-gm-message-state;
        bh=1LRc9aEqvstphz0ZVEKD708xnN4yTjqZu4r24e/cjV0=;
        b=dKIjd3AJ9qKRNW2GsfpNss63ipkpyRMnfSXB7vf8Ok16G1zfQOoUm7uPUn5qJt/IeC
         bKEiTLH1yR7RPE+eMT84hPdQOQkjGGlpKapwrvlb4xbGoMGCnGjH0oe9mc4Lf68AExoP
         HeuY1NMx5/es1rwL3rzSaySHz9x8EXAxPjBjbuBdfpUBd/rE6PstlUPuGwaL+AvKUx5Q
         aCUPq1vR+EF2htDjwVef5vmRc5asmTB9st16/SRn6M8rZf0uNZwScgMnEuISsfJV+2Mz
         6gMP54/NA6wQAXxxlSFxaY7PKzwAeR6cJ+fo5j2sFz88zvZZHBb+zPBOT9SF21Y+zWRM
         V+zA==
Received: by 10.68.220.198 with SMTP id py6mr149400367pbc.119.1357174720630;
 Wed, 02 Jan 2013 16:58:40 -0800 (PST)
MIME-Version: 1.0
Received: by 10.68.36.36 with HTTP; Wed, 2 Jan 2013 16:58:20 -0800 (PST)
In-Reply-To: <CA+Ltc5JbJnEFbV89LB2WkPA_uRjz4S277vMLNs3HpRvMq8GxZA@mail.gmail.com>
References: <CA+Ltc5JtTTkH4V1NkZg8xt7tdyFHuQ7mpuU6AYh8_DqBdo21ZQ@mail.gmail.com>
 <CAL8PwkYEFPR94dK+7=zmmxUOhvNOhdq8n2OadgX5A4tnO_OcOA@mail.gmail.com> <CA+Ltc5JbJnEFbV89LB2WkPA_uRjz4S277vMLNs3HpRvMq8GxZA@mail.gmail.com>
From: Michael McCandless <lucene@mikemccandless.com>
Date: Wed, 2 Jan 2013 19:58:20 -0500
Message-ID: <CAL8PwkYVuRfS1kqg-JAVichQci-KkuGgsb5AsV3+V=3OxVXGKg@mail.gmail.com>
Subject: Re: potential memory leak when using RAMDirectory ,CloseableThreadLocal
 and a thread pool .
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Gm-Message-State: ALoCoQlWZBwAJ9h8nE1Wj0XVaTjrdKca+RBpvg812l4/HPCZ/OxG00Wvjn+4Ua6qe5RINyLu6DXZ
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Alon,

CloseableThreadLocal has logic that tries to purge dead threads
periodically (the countUntilPurge that you described) ... but it's
only "best effort" / heuristic, and, indeed, if lots of threads have
come through, and then suddenly all is quiet and the threads die off,
then CTL will still hold those instances, until new searches arrive
and purge() is eventually called.

But for this to account for 470 MB of heap seems absurdly high ... how
many threads come through Lucene at the peak?

Which Directory impl are you using?

To be sure we have the right issue, can you limit that max thread
count to something very low (eg, 1 thread), run the same test, and
then see if RAM doesn't grow much beyond that initial 30 MB?

Mike McCandless

http://blog.mikemccandless.com

On Wed, Jan 2, 2013 at 7:29 PM, Alon Muchnick <alon@datonics.com> wrote:
> hi MIke,
> thank you very much for replying .
>
> i am not sure when the doClose() method of the SegementReader will be
> called  ,
> but i think you are correct regarding the SegmentReader still being live ,
> we have an singleton object with a hash map of several RamDirectory indexes
> and their IndexReader, IndexSearcher and IndexWriter objects ,
> this object is initialized when the system starts and only closed when the
> system shuts down .
>
> the upgrade to tomcat 7 did increase the amount of live threads (due to
> changes in tomcat's thread pool behavior ) and could explain more RAM being
> used , but the scenario i am seeing is that even after the application had
> stopped receiving new connection ,the thread pool is reduced to minimum
> size and GC had been run , the are still references to the closed threads
> as the keys in the weak hash map.
>
> am i wrong to assume that under the above scenario the weakhash map should
> have been truncated to hold only keys for the remaining live threads in the
> the thread pool ? or will this never happen because there will be no more
> additonal search requests thus the countUntilPurge in CloseableThreadLocal
> will never reach 0 and the purge method will be never called?
>
>
> Just to be clear regarding the sevirity of this , when the system comes up
> the 6 RAMDirectory Lucune indexes are about 30 MG , after a few hours
> ,when we sample it after the thread pool returned to minimum size and a GC
> had been run the Lucune indexes take 500MG .
>
> i guess its not clear to me when will the memory in  CloseableThreadLocals
> object will be release when working with a thread pool  ?
>
>
> Thanks in advanced
>
> Alon
>
>
> On Wed, Jan 2, 2013 at 10:46 PM, Michael McCandless <
> lucene@mikemccandless.com <javascript:_e({}, 'cvml',
> 'lucene@mikemccandless.com');>> wrote:
>
>> CloseableThreadLocal.hardRefs is still a live reference then it
>> means the SegmentReader hasn't been closed yet, ie I think the chain
>> you show below is from a still-open SegmentReader?
>>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54557-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jan  3 17:16:38 2013
Return-Path: <java-user-return-54557-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 3CDBBE117
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu,  3 Jan 2013 17:16:38 +0000 (UTC)
Received: (qmail 44066 invoked by uid 500); 3 Jan 2013 17:16:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43985 invoked by uid 500); 3 Jan 2013 17:16:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43976 invoked by uid 99); 3 Jan 2013 17:16:35 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Jan 2013 17:16:35 +0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.220.175] (HELO mail-vc0-f175.google.com) (209.85.220.175)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Jan 2013 17:16:30 +0000
Received: by mail-vc0-f175.google.com with SMTP id fy7so15682898vcb.34
        for <java-user@lucene.apache.org>; Thu, 03 Jan 2013 09:16:09 -0800 (PST)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:x-gm-message-state;
        bh=d8y/zzV6ZID9SduhqJa9Q8grVrrK2OkwZhrAmc/eZ/A=;
        b=Ky9WKZgegIXAgD121EMNbUzn8C8suI8h2DDUGknHJe2YeiPdvzfdnej6oJOfiK10Fr
         B1eTghAEeaawj7BZzvR9FE96DqO2eTtfk+7gc2dfBgqEe79rAJvOQhC0DydK3DuVAIit
         6JuR2apRT2G5G5DG9EnileL8KE1vpspvc6g24LsM7pSF2gGh3ebd5aohTEXm1MdrXwVe
         muJpXckTXLg4JoEH96+Z69c90W2qS8+KmxbKHH5yCgmbr8ao1cM05qlJTimm2cmZiKBl
         fVoEijvxxhvb6fsk6JXa3LE+tb36P8XaQ8Fv32DzajJ7MLQTCkYtR4rfr2hpBZ8RPHmh
         mOuw==
MIME-Version: 1.0
Received: by 10.221.0.79 with SMTP id nl15mr74570805vcb.41.1357233369134; Thu,
 03 Jan 2013 09:16:09 -0800 (PST)
Received: by 10.58.234.138 with HTTP; Thu, 3 Jan 2013 09:16:08 -0800 (PST)
In-Reply-To: <CAL8PwkYVuRfS1kqg-JAVichQci-KkuGgsb5AsV3+V=3OxVXGKg@mail.gmail.com>
References: <CA+Ltc5JtTTkH4V1NkZg8xt7tdyFHuQ7mpuU6AYh8_DqBdo21ZQ@mail.gmail.com>
	<CAL8PwkYEFPR94dK+7=zmmxUOhvNOhdq8n2OadgX5A4tnO_OcOA@mail.gmail.com>
	<CA+Ltc5JbJnEFbV89LB2WkPA_uRjz4S277vMLNs3HpRvMq8GxZA@mail.gmail.com>
	<CAL8PwkYVuRfS1kqg-JAVichQci-KkuGgsb5AsV3+V=3OxVXGKg@mail.gmail.com>
Date: Thu, 3 Jan 2013 19:16:08 +0200
Message-ID: <CA+Ltc5J9sERM+BwFZvMDdm7eGqOOQMQkuj2F5D5YvVk1O2je5g@mail.gmail.com>
Subject: Re: potential memory leak when using RAMDirectory ,CloseableThreadLocal
 and a thread pool .
From: Alon Muchnick <alon@datonics.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Content-Type: multipart/alternative; boundary=bcaec54ee370d836b804d2658410
X-Gm-Message-State: ALoCoQloqt5lhUQE3uQq8JSbo19XyGTY8mM5tmfr+1DtPvUt2C4F/tw8zVYs2OsVn5SZwEJG4pz5
X-Virus-Checked: Checked by ClamAV on apache.org

--bcaec54ee370d836b804d2658410
Content-Type: text/plain; charset=ISO-8859-1

hi Mike ,

at the peak there are 500 live threads  going through Lucune (not all of
them at the same time , tomcat thread pool  uses round robin ) ,regarding
the Directory impl we are using RAMDirectory.
the object that takes most of the heap  is the "hardRefs" WeakHashMap class
member in the CloseableThreadLocal class . the size of the map is 500 ,
with one entry for each thread that went through Lucune.

when in run the test with only one thread the initial RAM did not grow much
beyond the initial 30MB .

when looking at the code i can see that the references to the hardRefs map
will be cleared when :

1.a thread which searched Lucune is no longer alive , so its corresponding
record in the map will be cleared either by the GC or by the purge() method
.

2.the close() method is called which "should only be called when all
threads are done using the instance" .

what happens to threads that go through Lucune and stay alive for a very
long times ?
will they always be a reference key in the hardRefs map for them ?

if so does the value for the corresponding record in the map will be
overwritten each time this thread makes a new search ? or will it be some
how accumulated ? :

value ---- org.apache.lucene.index.TermInfosReader$ThreadResources --->

termInfoCache  |org.apache.lucene.util.cache.SimpleLRUCache
termEnum       |org.apache.lucene.index.SegmentTermEnum

i have reduced the size of the thread pool , and changed to a more
aggressive thread closing policy ,threads are now reduced when they are not
needed (before that the thread pool would reach its max size and stayed
there),
this should kick in the the purge method and reclaim memory from the closed
threads .

ill give the system a few hours to run and update on the results .

Alon

















On Thu, Jan 3, 2013 at 2:58 AM, Michael McCandless <
lucene@mikemccandless.com> wrote:

> then see if RAM doesn't grow much beyond that initial 30 MB?

--bcaec54ee370d836b804d2658410--

From java-user-return-54558-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jan  3 21:29:31 2013
Return-Path: <java-user-return-54558-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id D4F4EE467
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu,  3 Jan 2013 21:29:31 +0000 (UTC)
Received: (qmail 20475 invoked by uid 500); 3 Jan 2013 21:29:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20434 invoked by uid 500); 3 Jan 2013 21:29:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20426 invoked by uid 99); 3 Jan 2013 21:29:29 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Jan 2013 21:29:29 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.220.50] (HELO mail-pa0-f50.google.com) (209.85.220.50)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Jan 2013 21:29:24 +0000
Received: by mail-pa0-f50.google.com with SMTP id hz10so8885314pad.9
        for <java-user@lucene.apache.org>; Thu, 03 Jan 2013 13:29:04 -0800 (PST)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:x-gm-message-state;
        bh=0pj8EP++W1L6DUmMvXt3y5JhYw27LhpBmm8B4d9paJ0=;
        b=YM2r/Eow+anC2+UmA//rZu42wmKCDC02Blkh7poGnNJyTFuLDmE7jhFeSy4hBFuhGe
         Gnw0WSU83jJ2SKvvPMWPb3D4o2qK4RdJFUKtaeNfGupCrWnqmGD9vmwb2xvZzHCCdJT1
         WLaJbD6118yU2pKWUd97qxp5FUUuW5IFMkmiaCP9mYY1rAfTTtS464dCKSMTf3zCU7nh
         IKkcyg057NbbVHM5u/4IxDc/j+vzsX0ozM/EUEb6HA8eETpFww3tIGe83uIwBhP9dc2g
         yP7JYOHFHAf1QuG+kWenVxVKTCsQSLEHbQILYeXTMQdrestQ2eJ6sEYr1uc/1WoCL9jk
         /eWA==
Received: by 10.66.88.37 with SMTP id bd5mr148786239pab.75.1357248544187; Thu,
 03 Jan 2013 13:29:04 -0800 (PST)
MIME-Version: 1.0
Received: by 10.68.36.36 with HTTP; Thu, 3 Jan 2013 13:28:44 -0800 (PST)
In-Reply-To: <CA+Ltc5J9sERM+BwFZvMDdm7eGqOOQMQkuj2F5D5YvVk1O2je5g@mail.gmail.com>
References: <CA+Ltc5JtTTkH4V1NkZg8xt7tdyFHuQ7mpuU6AYh8_DqBdo21ZQ@mail.gmail.com>
 <CAL8PwkYEFPR94dK+7=zmmxUOhvNOhdq8n2OadgX5A4tnO_OcOA@mail.gmail.com>
 <CA+Ltc5JbJnEFbV89LB2WkPA_uRjz4S277vMLNs3HpRvMq8GxZA@mail.gmail.com>
 <CAL8PwkYVuRfS1kqg-JAVichQci-KkuGgsb5AsV3+V=3OxVXGKg@mail.gmail.com> <CA+Ltc5J9sERM+BwFZvMDdm7eGqOOQMQkuj2F5D5YvVk1O2je5g@mail.gmail.com>
From: Michael McCandless <lucene@mikemccandless.com>
Date: Thu, 3 Jan 2013 16:28:44 -0500
Message-ID: <CAL8PwkbVieWiUpv2xAU7iz5bntJDH=oYNwUYTeL6bL42pwseFA@mail.gmail.com>
Subject: Re: potential memory leak when using RAMDirectory ,CloseableThreadLocal
 and a thread pool .
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Gm-Message-State: ALoCoQkp5qKkT+nqQ2A2NlhR/GmYcTrjMWTWOTz7W5jrXKZIjg3RKTQYQyOHzsakrDBW9LEBgIS8
X-Virus-Checked: Checked by ClamAV on apache.org

On Thu, Jan 3, 2013 at 12:16 PM, Alon Muchnick <alon@datonics.com> wrote:
> hi Mike ,
>
> at the peak there are 500 live threads  going through Lucune (not all of
> them at the same time , tomcat thread pool  uses round robin ) ,regarding
> the Directory impl we are using RAMDirectory.
> the object that takes most of the heap  is the "hardRefs" WeakHashMap class
> member in the CloseableThreadLocal class . the size of the map is 500 ,
> with one entry for each thread that went through Lucune.

Hmm ... I'm curious what's actually using up all the RAM here.

A buffered Directory impl (eg NIOFSDirectory) would have IndexInput
clones that have 1 KB buffers, but RAMDirectory doesn't do that.

> when in run the test with only one thread the initial RAM did not grow much
> beyond the initial 30MB .

OK that's good.  So somehow each thread ties up ~ 1 MB RAM.

> when looking at the code i can see that the references to the hardRefs map
> will be cleared when :
>
> 1.a thread which searched Lucune is no longer alive , so its corresponding
> record in the map will be cleared either by the GC or by the purge() method
> .
>
> 2.the close() method is called which "should only be called when all
> threads are done using the instance" .

Right.

> what happens to threads that go through Lucune and stay alive for a very
> long times ?
> will they always be a reference key in the hardRefs map for them ?

Yes ... we never prune live threads.

> if so does the value for the corresponding record in the map will be
> overwritten each time this thread makes a new search ? or will it be some
> how accumulated ? :

Well, we set the value once when we first see the thread, and then use
that value from then on.

> value ---- org.apache.lucene.index.TermInfosReader$ThreadResources --->
>
> termInfoCache  |org.apache.lucene.util.cache.SimpleLRUCache
> termEnum       |org.apache.lucene.index.SegmentTermEnum
>
> i have reduced the size of the thread pool , and changed to a more
> aggressive thread closing policy ,threads are now reduced when they are not
> needed (before that the thread pool would reach its max size and stayed
> there),
> this should kick in the the purge method and reclaim memory from the closed
> threads .
>
> ill give the system a few hours to run and update on the results .

OK thanks.

Really anything more then 2 * number-of-cores threads coming through
Lucene is overkill ...

Mike McCandless

http://blog.mikemccandless.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54559-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jan  3 21:37:32 2013
Return-Path: <java-user-return-54559-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 0A91FE7B0
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu,  3 Jan 2013 21:37:32 +0000 (UTC)
Received: (qmail 41234 invoked by uid 500); 3 Jan 2013 21:37:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41188 invoked by uid 500); 3 Jan 2013 21:37:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41179 invoked by uid 99); 3 Jan 2013 21:37:29 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Jan 2013 21:37:29 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of rcmuir@gmail.com designates 209.85.216.43 as permitted sender)
Received: from [209.85.216.43] (HELO mail-qa0-f43.google.com) (209.85.216.43)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Jan 2013 21:37:24 +0000
Received: by mail-qa0-f43.google.com with SMTP id cr7so12818832qab.16
        for <java-user@lucene.apache.org>; Thu, 03 Jan 2013 13:37:03 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        bh=ha/vHn+fGy68hggreHYn/e0mBfEx1vwiGil6Th7gstw=;
        b=U9LxfcJ1mA+2u2erZjgfMItSUAKYuOZVvF2VNRoubx/REMHQW4zygUxj9jEKLpcSdx
         HfFGkPAUHRBRAEUxlETYcfFZrGiLXv1MzM2ceQAEvHOQFMfwxT9Fv3KAc8wzyqPGHkOE
         GI1DUAx8vRAZHQmdLAUQUhpD9VRDUtEvKOCLy9VIQ1jH6VFOhc1Pb+nykj7+u/0ooLWk
         dgjjR/XuwdFnwJ8Vnpy+vbffZBCm6IWohcp8A5ZGSdmlWiJo0NsKAOcePY1ctVJu2Ou/
         Lcg1JPsGYGQGsoO225fM3rwNsb0P3YWbctPYPBTbIzFaICeTK52hOnM01q/jJiokJXoM
         puLw==
Received: by 10.229.115.25 with SMTP id g25mr6883239qcq.117.1357249023774;
 Thu, 03 Jan 2013 13:37:03 -0800 (PST)
MIME-Version: 1.0
Received: by 10.49.12.193 with HTTP; Thu, 3 Jan 2013 13:36:43 -0800 (PST)
In-Reply-To: <CA+Ltc5J9sERM+BwFZvMDdm7eGqOOQMQkuj2F5D5YvVk1O2je5g@mail.gmail.com>
References: <CA+Ltc5JtTTkH4V1NkZg8xt7tdyFHuQ7mpuU6AYh8_DqBdo21ZQ@mail.gmail.com>
 <CAL8PwkYEFPR94dK+7=zmmxUOhvNOhdq8n2OadgX5A4tnO_OcOA@mail.gmail.com>
 <CA+Ltc5JbJnEFbV89LB2WkPA_uRjz4S277vMLNs3HpRvMq8GxZA@mail.gmail.com>
 <CAL8PwkYVuRfS1kqg-JAVichQci-KkuGgsb5AsV3+V=3OxVXGKg@mail.gmail.com> <CA+Ltc5J9sERM+BwFZvMDdm7eGqOOQMQkuj2F5D5YvVk1O2je5g@mail.gmail.com>
From: Robert Muir <rcmuir@gmail.com>
Date: Thu, 3 Jan 2013 16:36:43 -0500
Message-ID: <CAOdYfZXjVjPT3Jj_T-WR9T5wPz5Dm3GYfPaKJbvjgNjKcnHfFw@mail.gmail.com>
Subject: Re: potential memory leak when using RAMDirectory ,CloseableThreadLocal
 and a thread pool .
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
X-Virus-Checked: Checked by ClamAV on apache.org

On Thu, Jan 3, 2013 at 12:16 PM, Alon Muchnick <alon@datonics.com> wrote:

> value ---- org.apache.lucene.index.TermInfosReader$ThreadResources --->
>
> termInfoCache  |org.apache.lucene.util.cache.SimpleLRUCache
> termEnum       |org.apache.lucene.index.SegmentTermEnum
>

You aren't using lucene 3.6.2 if you have these.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54560-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jan  3 23:16:41 2013
Return-Path: <java-user-return-54560-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 673D2E718
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu,  3 Jan 2013 23:16:41 +0000 (UTC)
Received: (qmail 79379 invoked by uid 500); 3 Jan 2013 23:16:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79326 invoked by uid 500); 3 Jan 2013 23:16:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79317 invoked by uid 99); 3 Jan 2013 23:16:39 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Jan 2013 23:16:39 +0000
X-ASF-Spam-Status: No, hits=-2.3 required=5.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [129.176.212.47] (HELO mail10.mayo.edu) (129.176.212.47)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Jan 2013 23:16:31 +0000
Received: from roedlp005a.mayo.edu (HELO mail10.mayo.edu) ([129.176.158.0])
  by ironport10-dlp.mayo.edu with ESMTP; 03 Jan 2013 17:16:11 -0600
X-IronPort-Anti-Spam-Filtered: true
X-IronPort-Anti-Spam-Result: Av8EANsQ5lCBsNQ1/2dsb2JhbABFvVEWc4IeAQEBAwE6FDANASAKFEEBJQIECAcEAQcVBIdsBphFmAOGF4xXG4NHYQOXKI8sgnSBcTU
Received: from mhro1a.mayo.edu ([129.176.212.53])
  by ironport10.mayo.edu with ESMTP; 03 Jan 2013 17:16:08 -0600
Received: from MSGPEXCHA07A.mfad.mfroot.org (msgpexcha07a.mayo.edu [129.176.249.223]) by mhro1a.mayo.edu with ESMTP id BT-MMP-4976121 for java-user@lucene.apache.org; Thu, 3 Jan 2013 17:16:07 -0600
Received: from MSGPEXCEI32B.mfad.mfroot.org (129.176.249.212) by
 MSGPEXCHA07A.mfad.mfroot.org (129.176.249.223) with Microsoft SMTP Server
 (TLS) id 14.2.309.2; Thu, 3 Jan 2013 17:16:07 -0600
Received: from MSGPEXCHA28B.mfad.mfroot.org ([169.254.11.224]) by
 MSGPEXCEI32B.mfad.mfroot.org ([169.254.7.108]) with mapi id 14.02.0309.002;
 Thu, 3 Jan 2013 17:16:07 -0600
From: "Wu, Stephen T., Ph.D." <Wu.Stephen@mayo.edu>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Subject: More about storing NLP-type stuff in the index
Thread-Topic: More about storing NLP-type stuff in the index
Thread-Index: AQHN6ghOR+lQPW/ONEisoQ6siScg9A==
Date: Thu, 3 Jan 2013 23:16:06 +0000
Message-ID: <5E12F7FD7D58D54DA5542ECC8B1451983F68A1@MSGPEXCHA28B.mfad.mfroot.org>
In-Reply-To: <CAL8PwkZW02-2e_A5hD0o-idLk0cqbDViwqamb5beH+qt4ZF__Q@mail.gmail.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
user-agent: Microsoft-Entourage/13.13.0.120411
x-originating-ip: [10.128.209.12]
Content-Type: text/plain; charset="us-ascii"
Content-ID: <D85B023609A5754D80A158AAE2F98921@exchange.mayo.edu>
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-CFilter-Loop: Reflected
X-Virus-Checked: Checked by ClamAV on apache.org

I think we've been saying that if we put something in a Payload, it will be
indexed.  From what I understand of the indexing format, that means that
what you put in the Payload will be stored in the Lucene index... But it
won't *itself* be indexed & optimized for search.

That's good, but can we build inverted indices on the contents of the
Payloads (or the Attributes) as well?
 Ex1: Say I put semantic role labels like ARG0 into my index. Say my search
is looking for all instances of ARG0.
 Ex2: Say I add payloads to terms indicating that they're named entities
belonging to a semantic group.  Then say my query looks for all instances o=
f
the "Medications" semantic group.

It's almost like just putting these things in different fields, with the
exception that the things in different fields need to be linked so you know
what the original text was.  Maybe the linking can be done via Payloads
(offsets in the original text)?  If I want to store multiple things at the
same startOffset then I just use something like SynonymFilter?

stephen


On 12/21/12 6:45 AM, "Michael McCandless" <lucene@mikemccandless.com> wrote=
:

> On Thu, Dec 20, 2012 at 3:54 PM, Wu, Stephen T., Ph.D.
> <Wu.Stephen@mayo.edu> wrote:
>>> If you stuff the end of the span into the payload you'd have to create
>>> a custom variant of PhraseQuery to properly match based on the end
>>> span.
>>=20
>> How different is this from the functionality already avaialable through
>> SpanQuery?
>=20
> Good question!
>=20
> I think the difference would be index-time (payload encoding span-end
> + new Query) vs search time (SpanQuery)?
>=20
> Ie, with the former (index-time) you'd have a TokenFilter spotting the
> spans and encoding them into the index, and with the latter all
> spotting happens at search time?
>=20
> So net/net I guess (?) the results would be the same, but performance
> should be faster if you do it index-time?
>=20
> Mike McCandless
>=20
> http://blog.mikemccandless.com
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54561-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Jan  4 01:59:04 2013
Return-Path: <java-user-return-54561-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id A6F1BE493
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri,  4 Jan 2013 01:59:04 +0000 (UTC)
Received: (qmail 8085 invoked by uid 500); 4 Jan 2013 01:59:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8029 invoked by uid 500); 4 Jan 2013 01:59:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8021 invoked by uid 99); 4 Jan 2013 01:59:02 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Jan 2013 01:59:02 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of sokolov@ifactory.com designates 65.223.181.132 as permitted sender)
Received: from [65.223.181.132] (HELO camelot.ifactory.com) (65.223.181.132)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Jan 2013 01:58:53 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by camelot.ifactory.com (Postfix) with ESMTP id 9A5953671E8B;
	Thu,  3 Jan 2013 20:58:31 -0500 (EST)
X-Virus-Scanned: amavisd-new at camelot.ifactory.com
Received: from camelot.ifactory.com ([127.0.0.1])
	by localhost (camelot.ifactory.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id Yg+8K-6NVAYh; Thu,  3 Jan 2013 20:58:30 -0500 (EST)
Received: from [192.168.1.4] (pool-173-76-135-186.bstnma.fios.verizon.net [173.76.135.186])
	by camelot.ifactory.com (Postfix) with ESMTPSA id 551413671E7E;
	Thu,  3 Jan 2013 20:58:30 -0500 (EST)
Message-ID: <50E63742.2010804@ifactory.com>
Date: Thu, 03 Jan 2013 20:58:26 -0500
From: Michael Sokolov <sokolov@ifactory.com>
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:17.0) Gecko/17.0 Thunderbird/17.0
MIME-Version: 1.0
To: java-user@lucene.apache.org
CC: "Wu, Stephen T., Ph.D." <Wu.Stephen@mayo.edu>
Subject: Re: More about storing NLP-type stuff in the index
References: <5E12F7FD7D58D54DA5542ECC8B1451983F68A1@MSGPEXCHA28B.mfad.mfroot.org>
In-Reply-To: <5E12F7FD7D58D54DA5542ECC8B1451983F68A1@MSGPEXCHA28B.mfad.mfroot.org>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

On 1/3/2013 6:16 PM, Wu, Stephen T., Ph.D. wrote:
> I think we've been saying that if we put something in a Payload, it will be
> indexed.  From what I understand of the indexing format, that means that
> what you put in the Payload will be stored in the Lucene index... But it
> won't *itself* be indexed & optimized for search.
>
> That's good, but can we build inverted indices on the contents of the
> Payloads (or the Attributes) as well?
>   Ex1: Say I put semantic role labels like ARG0 into my index. Say my search
> is looking for all instances of ARG0.
>   Ex2: Say I add payloads to terms indicating that they're named entities
> belonging to a semantic group.  Then say my query looks for all instances of
> the "Medications" semantic group.
>
> It's almost like just putting these things in different fields, with the
> exception that the things in different fields need to be linked so you know
> what the original text was.  Maybe the linking can be done via Payloads
> (offsets in the original text)?  If I want to store multiple things at the
> same startOffset then I just use something like SynonymFilter?
>
I've been working on a different but (in a way) related problem: 
indexing text in XML documents.  In that case, we want to associate the 
names of enclosing elements with each term so that it's possible to 
search for (say) "ermine" in the context /doc/title as distinct from 
"ermine" in the context of //paragraph, or something like that.  Anyway 
what I've done doesn't use payloads.  I index two fields that are 
relevant to this: a full text field, which is just the usual text index 
(per document), and then an element-text field which indexes each term 
as a concatenation of the element name and the term value, so: 
title:ermine, doc:ermine, and paragraph:ermine would be typical terms.  
I index all of the enclosing element names for each word at the same 
position (like synonym filter does). This relies on a magical character 
(":") that isn't allowed to appear in any tokens, which is too bad, but 
not terribly restrictive.

Something like this might work for you.  The prefixing also has the nice 
feature that when you enumerate terms, they are ordered first by prefix: 
of course you could flip the order if it were more interesting to list 
all "contexts" for a word rather than all words in a context (or with 
some POS tag).

-Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54562-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Jan  4 07:39:41 2013
Return-Path: <java-user-return-54562-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id D6ECDED60
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri,  4 Jan 2013 07:39:41 +0000 (UTC)
Received: (qmail 38166 invoked by uid 500); 4 Jan 2013 07:39:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37887 invoked by uid 500); 4 Jan 2013 07:39:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37862 invoked by uid 99); 4 Jan 2013 07:39:38 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Jan 2013 07:39:38 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of need4spd@gmail.com designates 209.85.220.176 as permitted sender)
Received: from [209.85.220.176] (HELO mail-vc0-f176.google.com) (209.85.220.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Jan 2013 07:39:31 +0000
Received: by mail-vc0-f176.google.com with SMTP id fo13so16006338vcb.7
        for <java-user@lucene.apache.org>; Thu, 03 Jan 2013 23:39:11 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:date:message-id:subject:from:to:content-type;
        bh=X2NDcin6O7QVYAedQhKGvPRnk7RoiRpzNQ9/nRi69Sg=;
        b=tsoMYA39HYI5YGKhZC91j1b4M8MeepYUadyN3xqrkl9Ukks/cio8Vv9R3oGQYI2tVj
         r4dt0P78dQziSD38NJHPAmQT7H3UBRPIvlZQiR2YCSBfM9Lstf15BFii4JNO4BzlkQoi
         QRol43D8pco0In6c8A55ytB8gPViYve4lppd+EOs1aUcl5FxftuA/NqF1Y/AY3ypGoVO
         Ls36H16fDrHMVFIPYj46bUGAo7xBKZt6+iYsyI2tNb56RPdkbkJ0dZAWMald7nTIgG8h
         OWS8kYU8lGxt0Oj9n50IMh8uRX/XxSnWOvhzXVLlvL2jZlM8uyCc8bO8vmI71k8dCVz8
         PMJA==
MIME-Version: 1.0
Received: by 10.52.21.179 with SMTP id w19mr66796104vde.55.1357285151051; Thu,
 03 Jan 2013 23:39:11 -0800 (PST)
Received: by 10.52.90.210 with HTTP; Thu, 3 Jan 2013 23:39:11 -0800 (PST)
Date: Fri, 4 Jan 2013 16:39:11 +0900
Message-ID: <CAHibZ_4=LygLoXiezdrdeer-pwCr02JDqLbLV2dXXKZr05OJSg@mail.gmail.com>
Subject: Terms.getSumTotalTermFreq() in Lucene 4.0
From: =?EUC-KR?B?wOW/67yu?= <need4spd@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=20cf307d067849912a04d271933a
X-Virus-Checked: Checked by ClamAV on apache.org

--20cf307d067849912a04d271933a
Content-Type: text/plain; charset=EUC-KR
Content-Transfer-Encoding: quoted-printable

Hello.
I have some questions.

Document 1 : "learning perl learning java learning ruby"
Document 2 : "perl test"

I have indexed this documents, with StoreTermVectors(true) and
IndexOptions.DOCS_AND_FREQS.
Field name is "f".

And I executed this code.

IndexReader ir =3D IndexReader.open(dir);
Terms terms =3D ir.getTermVector(0, "f");

System.out.println(terms.getDocCount()); -> 1
System.out.println(terms.getSumDocFreq()); -> 4
System.out.println(terms.getSumTotalTermFreq()); -> -1

I think this terms instance acts like a single-document inverted index.

So getDocCount is 1 (single document), and getSumDocFreq is 4. (because
each term's docFreq is 1)
Is this right?

But I can't understand why getSumTotalTermFreq method return -1.
In javadoc getSumTotalTermFreq is sum of
TermsEnum.totalTermFreq<eclipse-javadoc:%E2%98%82=3DaboutLucene4/lib%5C/luc=
ene-core-4.0.0.jar%3Corg.apache.lucene.index(Terms.class%E2%98%83Terms~getS=
umTotalTermFreq%E2%98%82TermsEnum%E2%98%82totalTermFreq>
.

I think in Document1, each term's totalTermFreqs are [learning, 3], [java,
1], [perl, 1], [ruby, 1].
So getSumTotalTermFreq method's result is 6 not -1.

Why temrs.getSumTotalTermFreq() method return -1?


Thanks in advance.
--=20
DEV=BF=EB=BD=C4
http://devyongsik.tistory.com

--20cf307d067849912a04d271933a--

From java-user-return-54563-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Jan  4 12:48:39 2013
Return-Path: <java-user-return-54563-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 753B1D716
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri,  4 Jan 2013 12:48:39 +0000 (UTC)
Received: (qmail 74202 invoked by uid 500); 4 Jan 2013 12:48:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73988 invoked by uid 500); 4 Jan 2013 12:48:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73959 invoked by uid 99); 4 Jan 2013 12:48:34 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Jan 2013 12:48:34 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of sokolov@ifactory.com designates 65.223.181.132 as permitted sender)
Received: from [65.223.181.132] (HELO camelot.ifactory.com) (65.223.181.132)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Jan 2013 12:48:25 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by camelot.ifactory.com (Postfix) with ESMTP id 196623671E96
	for <java-user@lucene.apache.org>; Fri,  4 Jan 2013 07:48:04 -0500 (EST)
X-Virus-Scanned: amavisd-new at camelot.ifactory.com
Received: from camelot.ifactory.com ([127.0.0.1])
	by localhost (camelot.ifactory.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id Zsr-mm7F9eEy for <java-user@lucene.apache.org>;
	Fri,  4 Jan 2013 07:48:03 -0500 (EST)
Received: from [192.168.1.4] (pool-173-76-135-186.bstnma.fios.verizon.net [173.76.135.186])
	by camelot.ifactory.com (Postfix) with ESMTPSA id E98213671E93
	for <java-user@lucene.apache.org>; Fri,  4 Jan 2013 07:48:02 -0500 (EST)
Message-ID: <50E6CF7E.3070703@ifactory.com>
Date: Fri, 04 Jan 2013 07:47:58 -0500
From: Michael Sokolov <sokolov@ifactory.com>
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:17.0) Gecko/17.0 Thunderbird/17.0
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: adding field values with count
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

I have an indexer that already collapses field values into a Map of 
(value, count) before indexing, and I would like to specify an increment 
to frequency (docFreq?) when adding a field value to a Lucene Document.  
Should I just add the same value multiple times?

-Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54564-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Jan  4 12:58:28 2013
Return-Path: <java-user-return-54564-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 7CE48D77E
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri,  4 Jan 2013 12:58:28 +0000 (UTC)
Received: (qmail 11696 invoked by uid 500); 4 Jan 2013 12:58:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11609 invoked by uid 500); 4 Jan 2013 12:58:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11598 invoked by uid 99); 4 Jan 2013 12:58:26 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Jan 2013 12:58:26 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.216.50 as permitted sender)
Received: from [209.85.216.50] (HELO mail-qa0-f50.google.com) (209.85.216.50)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Jan 2013 12:58:20 +0000
Received: by mail-qa0-f50.google.com with SMTP id cr7so10529529qab.16
        for <java-user@lucene.apache.org>; Fri, 04 Jan 2013 04:57:59 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=EAEPivsfqmGnU2v889ki0RqS8neggKwFswA9sbCE1Ew=;
        b=U34UqRnkh6yS/aDB3zLNRjUbGQDDuf45U5LEEGLoJ1ssxXIa2iRHCXk6K6hk/j8g6i
         WAyuOFXjTZ8p4+5aUJ/xQk+bErXW9fM8QirJCT0+rwQsxvbCsg7KCZN7COw8Y6902xgG
         0BaIVR2AMNAvOJkKHfXJidJnTXOx9RS9iGId8JQjFC/zWSk2wuMEnVrO7OfF34VazZkL
         7E0OEdRgFkZgR0uagnfG2ezNzBzIk/W/XIQCfsmC3Xy7g6OFEWLku0Vh7yi3iY7bUHEP
         Nh7SgZ2DdSPe3Ty0gdnnzDhAsnC8tb0cR8CV8NgB2MBCUJQ1NpaQR7xU1ASwXChqV5cr
         utDg==
MIME-Version: 1.0
Received: by 10.229.178.232 with SMTP id bn40mr7568048qcb.27.1357304279559;
 Fri, 04 Jan 2013 04:57:59 -0800 (PST)
Received: by 10.49.12.240 with HTTP; Fri, 4 Jan 2013 04:57:59 -0800 (PST)
In-Reply-To: <CALfq-2SZJ9mF30OYmGK+=8Nv_YcyM1i4JPgUrZGOdzEFhB1_Fw@mail.gmail.com>
References: <CAPzrt-3P4shaovicEHK6-y=Q6z8JYrx+U47pN8ye5vY3VRQw5w@mail.gmail.com>
	<CALfq-2S0vbqMXb0QhA4a=JP+POM-u7O46p73ag-n9cpcHf5K6A@mail.gmail.com>
	<50E4770C.4000103@gmail.com>
	<CALfq-2SZJ9mF30OYmGK+=8Nv_YcyM1i4JPgUrZGOdzEFhB1_Fw@mail.gmail.com>
Date: Fri, 4 Jan 2013 07:57:59 -0500
Message-ID: <CAN4YXvfYBGnzRm=oggatyOTWosuWjZKZV60deHMBKopsgHpEfw@mail.gmail.com>
Subject: Re: Pulling lucene 4.1
From: Erick Erickson <erickerickson@gmail.com>
To: java-user <java-user@lucene.apache.org>
Content-Type: multipart/alternative; boundary=005045015a426f6fb404d27607a7
X-Virus-Checked: Checked by ClamAV on apache.org

--005045015a426f6fb404d27607a7
Content-Type: text/plain; charset=ISO-8859-1

BTW, if all you're interested in is the compiled code, you can always get
the latest build from:
http://wiki.apache.org/solr/NightlyBuilds(4x-SNAPSHOT). That code will
be compiled from the link Shai pointed out
except for any commits since the build...

FWIW,
Erick


On Wed, Jan 2, 2013 at 2:01 PM, Shai Erera <serera@gmail.com> wrote:

> I was under the impression that you already migrated to 4.0 and are asking
> for 4.1.
>
> 4.x promises backwards compatibility as far as index format goes.
> Regarding API, you should consult the CHANGES as well as MIGRATE files in
> order to successfully migrate a 3x Lucene app to 4.0.
>
> Shai
>
>
> On Wed, Jan 2, 2013 at 8:06 PM, Lance Norskog <goksron@gmail.com> wrote:
>
> > 4.x does not promise backwards compatibility with 3.x. Have you made your
> > own extensions?
> >
> > On 01/02/2013 04:38 AM, Shai Erera wrote:
> >
> >> There's no specific branch for 4.1 yet. All development still happens on
> >> the 4x branch (
> >> http://svn.apache.org/repos/**asf/lucene/dev/branches/**branch_4x/<
> http://svn.apache.org/repos/asf/lucene/dev/branches/branch_4x/>
> >> ).
> >>
> >> Note that Lucene maintains two active branches for development: 'trunk'
> >> (currently to be 5.0) and '4x' off of which all Lucene 4.x releases are
> >> created.
> >>
> >> Shai
> >>
> >>
> >> On Wed, Jan 2, 2013 at 11:57 AM, Ramprakash Ramamoorthy <
> >> youngestachiever@gmail.com> wrote:
> >>
> >>  Dear all,
> >>>
> >>>             Would be glad to know on which branch of lucene is the
> >>> development happening on version 4.1. Would be glad if you can share
> the
> >>> repo URL, we are testing out certain features of 4.1 including
> >>> CompressingStoredFieldsFormat.
> >>>
> >>>             Currently we are pulling from trunk, which I guess is 5.x
> >>> branch. Very particular about 4.1 because, we need backward
> compatibility
> >>> with 3.x. Thanks in advance.
> >>>
> >>> --
> >>> With Thanks and Regards,
> >>> Ramprakash Ramamoorthy,
> >>> India.
> >>>
> >>>
> >
> > ------------------------------**------------------------------**---------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.**apache.org<
> java-user-unsubscribe@lucene.apache.org>
> > For additional commands, e-mail: java-user-help@lucene.apache.**org<
> java-user-help@lucene.apache.org>
> >
> >
>

--005045015a426f6fb404d27607a7--

From java-user-return-54565-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Jan  4 13:30:25 2013
Return-Path: <java-user-return-54565-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 6BC16E5FA
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri,  4 Jan 2013 13:30:25 +0000 (UTC)
Received: (qmail 95628 invoked by uid 500); 4 Jan 2013 13:30:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95436 invoked by uid 500); 4 Jan 2013 13:30:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95409 invoked by uid 99); 4 Jan 2013 13:30:21 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Jan 2013 13:30:21 +0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.220.175] (HELO mail-vc0-f175.google.com) (209.85.220.175)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Jan 2013 13:30:16 +0000
Received: by mail-vc0-f175.google.com with SMTP id fy7so16571689vcb.34
        for <java-user@lucene.apache.org>; Fri, 04 Jan 2013 05:29:54 -0800 (PST)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:x-gm-message-state;
        bh=zHMZIc2AVb632bYVJMyugdXKKp0urKKvOTD6jnFsSwY=;
        b=lrJjnHxvw+xmhV+oYgv80jpDnMkF6uWZmIF7x1b546mbOKc6Wxp/Gs29z0083pGqGB
         Sbug2hGEkpr/NfbAT4LCP9tX+f7x6c91t0DBhTUKm0aTnLh9TRZiu3i15bDL7eyEyW+V
         qDH0l1UQ3PfqD4cWLpFj0rPOqCwnGY+bV7qNiHtmvvN1Nc2h/zU9sCd3ZxB00lcOHW9O
         DKFNsy4o2QtfeacC0lVk8t5Hs73UdcV0yTm5IEhBtrvXSNu8HfwTareU075vQbS04TFt
         HahizPuve2OF199lqa8g1f7VZUFmJcBuTIpMcTmSO81OWc08LnydiwCVKXTl4bezSnBD
         hRYQ==
MIME-Version: 1.0
Received: by 10.221.1.139 with SMTP id nq11mr14937787vcb.44.1357306194217;
 Fri, 04 Jan 2013 05:29:54 -0800 (PST)
Received: by 10.58.234.138 with HTTP; Fri, 4 Jan 2013 05:29:53 -0800 (PST)
In-Reply-To: <CAOdYfZXjVjPT3Jj_T-WR9T5wPz5Dm3GYfPaKJbvjgNjKcnHfFw@mail.gmail.com>
References: <CA+Ltc5JtTTkH4V1NkZg8xt7tdyFHuQ7mpuU6AYh8_DqBdo21ZQ@mail.gmail.com>
	<CAL8PwkYEFPR94dK+7=zmmxUOhvNOhdq8n2OadgX5A4tnO_OcOA@mail.gmail.com>
	<CA+Ltc5JbJnEFbV89LB2WkPA_uRjz4S277vMLNs3HpRvMq8GxZA@mail.gmail.com>
	<CAL8PwkYVuRfS1kqg-JAVichQci-KkuGgsb5AsV3+V=3OxVXGKg@mail.gmail.com>
	<CA+Ltc5J9sERM+BwFZvMDdm7eGqOOQMQkuj2F5D5YvVk1O2je5g@mail.gmail.com>
	<CAOdYfZXjVjPT3Jj_T-WR9T5wPz5Dm3GYfPaKJbvjgNjKcnHfFw@mail.gmail.com>
Date: Fri, 4 Jan 2013 15:29:53 +0200
Message-ID: <CA+Ltc5JPi4R-9Fhn_FS_AQ=EseXVcBQ6ucxObe+E6dybQTenHQ@mail.gmail.com>
Subject: Re: potential memory leak when using RAMDirectory ,CloseableThreadLocal
 and a thread pool .
From: Alon Muchnick <alon@datonics.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Content-Type: multipart/mixed; boundary=bcaec517a6728ecda004d27679b9
X-Gm-Message-State: ALoCoQn1yVAsm8ALMspHOodydcWfYIks7VGnrjxHhlshiqIpaQhaqHrta8o8urx09f0HPFC6bscg
X-Virus-Checked: Checked by ClamAV on apache.org

--bcaec517a6728ecda004d27679b9
Content-Type: multipart/alternative; boundary=bcaec517a6728ecd9904d27679b7

--bcaec517a6728ecd9904d27679b7
Content-Type: text/plain; charset=ISO-8859-1

Robert you were absolutely right , we had a problem with our deployment
script and the Lucune Jars were not updated to 3.6.2 , they remained 3.0.3
...

after deploying the application again with the updated jars , the memory
leak is gone !
 (although i do see a lot more gc activity on the YoungGen after the
upgrade,i will need to investigate it further )

Mike thank you very much for the help as well , if you are still interested
on finding out what took the RAM in 3.0.3 version,
it looks like all the "org.apache.lucene.util.cache.SimpleLRUCache$1"
values in the weak hash map (also attached a screen shot).
if you like i can upload the full heap dump to some FTP.

thanks again .

Alon



On Thu, Jan 3, 2013 at 11:36 PM, Robert Muir <rcmuir@gmail.com> wrote:

> On Thu, Jan 3, 2013 at 12:16 PM, Alon Muchnick <alon@datonics.com> wrote:
>
> > value ---- org.apache.lucene.index.TermInfosReader$ThreadResources --->
> >
> > termInfoCache  |org.apache.lucene.util.cache.SimpleLRUCache
> > termEnum       |org.apache.lucene.index.SegmentTermEnum
> >
>
> You aren't using lucene 3.6.2 if you have these.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--bcaec517a6728ecd9904d27679b7
Content-Type: text/html; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

<div dir=3D"ltr">Robert you were absolutely right , we had a problem with o=
ur deployment script and the Lucune Jars were not updated to 3.6.2 , they r=
emained 3.0.3 ...<br><br>after deploying the application again with the upd=
ated jars , the memory leak is gone !<br>
=A0(although i do see a lot more gc activity on the YoungGen after the upgr=
ade,i will need to investigate it further )<br><br>Mike thank you very much=
 for the help as well , if you are still interested on finding out what too=
k the RAM in 3.0.3 version,<br>
it looks like all the &quot;org.apache.lucene.util.cache.SimpleLRUCache$1&q=
uot; values in the weak hash map (also attached a screen shot).<br>if you l=
ike i can upload the full heap dump to some FTP.<br><br>thanks again .<br>
<br>Alon <br><br></div><div class=3D"gmail_extra"><br><br><div class=3D"gma=
il_quote">On Thu, Jan 3, 2013 at 11:36 PM, Robert Muir <span dir=3D"ltr">&l=
t;<a href=3D"mailto:rcmuir@gmail.com" target=3D"_blank">rcmuir@gmail.com</a=
>&gt;</span> wrote:<br>
<blockquote class=3D"gmail_quote" style=3D"margin:0 0 0 .8ex;border-left:1p=
x #ccc solid;padding-left:1ex"><div class=3D"im">On Thu, Jan 3, <a href=3D"=
tel:2013" value=3D"+9722013">2013</a> at 12:16 PM, Alon Muchnick &lt;<a hre=
f=3D"mailto:alon@datonics.com">alon@datonics.com</a>&gt; wrote:<br>

<br>
&gt; value ---- org.apache.lucene.index.TermInfosReader$ThreadResources ---=
&gt;<br>
&gt;<br>
&gt; termInfoCache =A0|org.apache.lucene.util.cache.SimpleLRUCache<br>
&gt; termEnum =A0 =A0 =A0 |org.apache.lucene.index.SegmentTermEnum<br>
&gt;<br>
<br>
</div>You aren&#39;t using lucene 3.6.2 if you have these.<br>
<div class=3D"HOEnZb"><div class=3D"h5"><br>
---------------------------------------------------------------------<br>
To unsubscribe, e-mail: <a href=3D"mailto:java-user-unsubscribe@lucene.apac=
he.org">java-user-unsubscribe@lucene.apache.org</a><br>
For additional commands, e-mail: <a href=3D"mailto:java-user-help@lucene.ap=
ache.org">java-user-help@lucene.apache.org</a><br>
<br>
</div></div></blockquote></div><br></div>

--bcaec517a6728ecd9904d27679b7--

--bcaec517a6728ecda004d27679b9
Content-Type: text/plain; charset=us-ascii


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
--bcaec517a6728ecda004d27679b9--

From java-user-return-54566-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Jan  4 13:51:42 2013
Return-Path: <java-user-return-54566-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 46D89E66E
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri,  4 Jan 2013 13:51:42 +0000 (UTC)
Received: (qmail 42838 invoked by uid 500); 4 Jan 2013 13:51:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42698 invoked by uid 500); 4 Jan 2013 13:51:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42681 invoked by uid 99); 4 Jan 2013 13:51:39 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Jan 2013 13:51:39 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.210.48] (HELO mail-da0-f48.google.com) (209.85.210.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Jan 2013 13:51:33 +0000
Received: by mail-da0-f48.google.com with SMTP id k18so7533099dae.21
        for <java-user@lucene.apache.org>; Fri, 04 Jan 2013 05:51:11 -0800 (PST)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:x-gm-message-state;
        bh=P3AjJa/bBiSVyinT4FlcxG6PfO+TzeBSy5Ytv4YFFwk=;
        b=pq4NlwGpQkLZEuzUqog8YVNWd7Sp0XxYQEIYCehXu2ZIHmhObFclrhINCAd1npKhKI
         0SJPX+GpNCRz6Y/LMNR+UbnFzMjLhPrDpWh1jgU2pkkbtMpVnIKYzM1BNHXkkgHH2YI6
         aVhTzb6KYSrtcMP/AdzgOjGg09DGWXdkJT/hI/tr7SH2IK360KHuZsfiH6/DZ7iuj2q8
         FgPGMyp6Tmb3HQ+bd9tD1IeAQdjzjs6b8oV2qj2Ib2GiPdQQLArCxSXxyXxLh0GPDQKq
         1+lL9HKjE8p1Hx6Gg5bBHf1xpXxHmNyt0/uwD+lvBSvntn64TZ1Fr3WQCQyVzCtOgdu0
         0DcA==
Received: by 10.68.209.230 with SMTP id mp6mr161234835pbc.8.1357307471648;
 Fri, 04 Jan 2013 05:51:11 -0800 (PST)
MIME-Version: 1.0
Received: by 10.68.34.106 with HTTP; Fri, 4 Jan 2013 05:50:51 -0800 (PST)
In-Reply-To: <CA+Ltc5JPi4R-9Fhn_FS_AQ=EseXVcBQ6ucxObe+E6dybQTenHQ@mail.gmail.com>
References: <CA+Ltc5JtTTkH4V1NkZg8xt7tdyFHuQ7mpuU6AYh8_DqBdo21ZQ@mail.gmail.com>
 <CAL8PwkYEFPR94dK+7=zmmxUOhvNOhdq8n2OadgX5A4tnO_OcOA@mail.gmail.com>
 <CA+Ltc5JbJnEFbV89LB2WkPA_uRjz4S277vMLNs3HpRvMq8GxZA@mail.gmail.com>
 <CAL8PwkYVuRfS1kqg-JAVichQci-KkuGgsb5AsV3+V=3OxVXGKg@mail.gmail.com>
 <CA+Ltc5J9sERM+BwFZvMDdm7eGqOOQMQkuj2F5D5YvVk1O2je5g@mail.gmail.com>
 <CAOdYfZXjVjPT3Jj_T-WR9T5wPz5Dm3GYfPaKJbvjgNjKcnHfFw@mail.gmail.com> <CA+Ltc5JPi4R-9Fhn_FS_AQ=EseXVcBQ6ucxObe+E6dybQTenHQ@mail.gmail.com>
From: Michael McCandless <lucene@mikemccandless.com>
Date: Fri, 4 Jan 2013 08:50:51 -0500
Message-ID: <CAL8PwkaspcQTZa7PVuMBAtqLiGZ2f-Nkz26HdrTp1modzhcQJg@mail.gmail.com>
Subject: Re: potential memory leak when using RAMDirectory ,CloseableThreadLocal
 and a thread pool .
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Gm-Message-State: ALoCoQmRW9hNAiWI9VVvMCdAshuo0sKo7tp0bV5AxSjQSO4DVkrxV9yG8HePWqFdqgXZjjdoQXFS
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks for bringing closure Alon.

In 3.0.3 each thread had a private terms dict cache, so that explains
the high per-thread RAM usage.  This was fixed at some 3.x release ...
so we won't be fixing 3.0.3 at this point.

Mike McCandless

http://blog.mikemccandless.com

On Fri, Jan 4, 2013 at 8:29 AM, Alon Muchnick <alon@datonics.com> wrote:
> Robert you were absolutely right , we had a problem with our deployment
> script and the Lucune Jars were not updated to 3.6.2 , they remained 3.0.3
> ...
>
> after deploying the application again with the updated jars , the memory
> leak is gone !
>  (although i do see a lot more gc activity on the YoungGen after the
> upgrade,i will need to investigate it further )
>
> Mike thank you very much for the help as well , if you are still interested
> on finding out what took the RAM in 3.0.3 version,
> it looks like all the "org.apache.lucene.util.cache.SimpleLRUCache$1" values
> in the weak hash map (also attached a screen shot).
> if you like i can upload the full heap dump to some FTP.
>
> thanks again .
>
> Alon
>
>
>
> On Thu, Jan 3, 2013 at 11:36 PM, Robert Muir <rcmuir@gmail.com> wrote:
>>
>> On Thu, Jan 3, 2013 at 12:16 PM, Alon Muchnick <alon@datonics.com> wrote:
>>
>> > value ---- org.apache.lucene.index.TermInfosReader$ThreadResources --->
>> >
>> > termInfoCache  |org.apache.lucene.util.cache.SimpleLRUCache
>> > termEnum       |org.apache.lucene.index.SegmentTermEnum
>> >
>>
>> You aren't using lucene 3.6.2 if you have these.
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54567-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Jan  4 14:03:08 2013
Return-Path: <java-user-return-54567-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 7C5A9E6DC
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri,  4 Jan 2013 14:03:08 +0000 (UTC)
Received: (qmail 82173 invoked by uid 500); 4 Jan 2013 14:03:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82134 invoked by uid 500); 4 Jan 2013 14:03:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82118 invoked by uid 99); 4 Jan 2013 14:03:05 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Jan 2013 14:03:05 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.160.52] (HELO mail-pb0-f52.google.com) (209.85.160.52)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Jan 2013 14:03:01 +0000
Received: by mail-pb0-f52.google.com with SMTP id ro2so9139522pbb.11
        for <java-user@lucene.apache.org>; Fri, 04 Jan 2013 06:02:40 -0800 (PST)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding:x-gm-message-state;
        bh=NB+XA/9OsXecRIJ79Q9dUUpUtjAmDlMRbvO4ydg8tTY=;
        b=aRzIyFZYrWeOP/Yy32QsbWfHYwcqlzPAw6WJcmkFkejm5Ja6ZlPemOz/H4n/qO8Kch
         7ILMv3rs6Ve6KQiYXqJkjwq7XUacfc23tRKSA9+VsXfRHKvFt1buP+Snn95NevCJmpp9
         23DIVMCt8Mc+opQwJHbrUdvEPT/mGKSqPAILCL/7Vr6lqc2sVAxD/SHW2L68BZ9RO5jZ
         jBUqZw+c+j67xaJ4Zt882FdC/TSgpqc/HKJKl+zNqrUhegmAdXUadR1UazGc3N+vtIqS
         PB1n/xdBBQ4AUHF0/azF8OS+2m8xjaR4KWnqo43amQYc0D6wdXEj9yQMUrpYAeL8IFf8
         obSA==
Received: by 10.68.209.230 with SMTP id mp6mr161315252pbc.8.1357308160393;
 Fri, 04 Jan 2013 06:02:40 -0800 (PST)
MIME-Version: 1.0
Received: by 10.68.34.106 with HTTP; Fri, 4 Jan 2013 06:02:20 -0800 (PST)
In-Reply-To: <CAHibZ_4=LygLoXiezdrdeer-pwCr02JDqLbLV2dXXKZr05OJSg@mail.gmail.com>
References: <CAHibZ_4=LygLoXiezdrdeer-pwCr02JDqLbLV2dXXKZr05OJSg@mail.gmail.com>
From: Michael McCandless <lucene@mikemccandless.com>
Date: Fri, 4 Jan 2013 09:02:20 -0500
Message-ID: <CAL8PwkbmuW3XgW0fWSq0qwChdzLPeR9E3Y=04eLFbnUW1CGzsw@mail.gmail.com>
Subject: Re: Terms.getSumTotalTermFreq() in Lucene 4.0
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Gm-Message-State: ALoCoQlAni0uAZ83VEcxnGbyW2qmvtvjfVTYICaNQ6HfBX0/oN/Qy0eZU6jOps+2m2Rbeh0xLKXI
X-Virus-Checked: Checked by ClamAV on apache.org

The problem is that the TermVectorsFormat for the default codec
(Lucene40TermVectorsFormat) does not store this statistic
per-document, currently.  We could in theory fix this ... maybe open
an issue / make a patch if it's important?

-1 return value is actually "valid": it means this statistic is not availab=
le.

Mike McCandless

http://blog.mikemccandless.com

On Fri, Jan 4, 2013 at 2:39 AM, =EC=9E=A5=EC=9A=A9=EC=84=9D <need4spd@gmail=
.com> wrote:
> Hello.
> I have some questions.
>
> Document 1 : "learning perl learning java learning ruby"
> Document 2 : "perl test"
>
> I have indexed this documents, with StoreTermVectors(true) and
> IndexOptions.DOCS_AND_FREQS.
> Field name is "f".
>
> And I executed this code.
>
> IndexReader ir =3D IndexReader.open(dir);
> Terms terms =3D ir.getTermVector(0, "f");
>
> System.out.println(terms.getDocCount()); -> 1
> System.out.println(terms.getSumDocFreq()); -> 4
> System.out.println(terms.getSumTotalTermFreq()); -> -1
>
> I think this terms instance acts like a single-document inverted index.
>
> So getDocCount is 1 (single document), and getSumDocFreq is 4. (because
> each term's docFreq is 1)
> Is this right?
>
> But I can't understand why getSumTotalTermFreq method return -1.
> In javadoc getSumTotalTermFreq is sum of
> TermsEnum.totalTermFreq<eclipse-javadoc:%E2%98%82=3DaboutLucene4/lib%5C/l=
ucene-core-4.0.0.jar%3Corg.apache.lucene.index(Terms.class%E2%98%83Terms~ge=
tSumTotalTermFreq%E2%98%82TermsEnum%E2%98%82totalTermFreq>
> .
>
> I think in Document1, each term's totalTermFreqs are [learning, 3], [java=
,
> 1], [perl, 1], [ruby, 1].
> So getSumTotalTermFreq method's result is 6 not -1.
>
> Why temrs.getSumTotalTermFreq() method return -1?
>
>
> Thanks in advance.
> --
> DEV=EC=9A=A9=EC=8B=9D
> http://devyongsik.tistory.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54568-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Jan  4 17:09:38 2013
Return-Path: <java-user-return-54568-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 9D4A5D9C8
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri,  4 Jan 2013 17:09:38 +0000 (UTC)
Received: (qmail 34191 invoked by uid 500); 4 Jan 2013 17:09:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34021 invoked by uid 500); 4 Jan 2013 17:09:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 26541 invoked by uid 99); 4 Jan 2013 17:06:46 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of llg-5d@gmx.de designates 212.227.17.20 as permitted sender)
Content-Type: text/plain; charset="utf-8"
Date: Fri, 04 Jan 2013 18:06:18 +0100
From: "Klaus Nesbigall" <LLG-5d@gmx.de>
Message-ID: <20130104170618.300020@gmx.net>
MIME-Version: 1.0
Subject: AW: RE: Stemming and Wildcard - or fire and water
To: java-user@lucene.apache.org
X-Authenticated: #60127978
X-Flags: 0001
X-Mailer: WWW-Mail 6100 (Global Message Exchange)
X-Priority: 3
X-Provags-ID: V01U2FsdGVkX18ZyHgc8QIZaPOjc/sOaW0/VdINGhthEEZzIFmH+J
 N6U7t7eXdJerakg9l65BSVZBQNoefMVzhaJA== 
Content-Transfer-Encoding: 8bit
X-GMX-UID: XWmVcFYUeSEqbYsZ/nch6KN+IGRvb4DT
X-Virus-Checked: Checked by ClamAV on apache.org

I've encountered the same problem and tried to use your workaround. But overwriting the parser hasn't done the job.

I do not understand why the stemming is done anyway.
Uwe wrote 
> This is a well-known problem: Wildcards cannot be analyzed by the query 
> parser, because the analysis would destroy the wildcard characters; 
> also stemming of parts of terms will never work. 
> ...

The actual behavior doesn't work either.
The english word families will not be found in case the user types the query familie*
So why solve the problem by postulate one oppinion as right and another as wrong?
A simple flag which allows or suppresses the stemming would solve everyones problem. All who have no need of change can use the old form, everyone else can set the appropriate flag.
If this problem is so well known, there seems to be the need for a clean solution to this.


> A possible workaround could be to modify search terms with wildcard 
> tokens by stemming them manually and creating a new search string.
> Searches for hersen* would be modified to hers* and return what you 
> expect.
> Con is of course that you search for more than you specified.
> 
> Lars-Erik
> 
> -----Original Message-----
> From: Bayer Dennis [mailto:Dennis.Bayer@cursor.de]
> Sent: Tuesday, December 11, 2012 10:50 AM
> To: java-user@lucene.apache.org
> Subject: Stemming and Wildcard - or fire and water
> 
> Hello there,
> my colleague and I ran into an example which didn't return the result 
> size which we were expecting. We discovered that there is a mismatch 
> in handling terms while indexing and searching. This issue is already 
> discussed several times in the internet as we found out later on, but 
> in our point of view it's a buggy behavior if, at least, using a German stemmer.
> 
> Tl;dr: a Junit testcase is available (http://pastebin.com/AdeFdW1k)
> 
> Setup:
> * Lucene 4.0.0
> * Use the GermanAnalyzer which internally uses a GermanStemmer
> 
> Issue:
> * Create an index for "Hersener" which has a common ending in German 
> -> the string is shortend to "hers"
> * Search for "Hers" -> a result is found
> * Search for "Hersen" -> a result is found because the input token is 
> also stemmed to "hers"
> * Search for "Hers*" -> a result is found
> * Search for "Hersen*" -> nothing is found because the analyzer does 
> not run
> 
> Similiar examples can be constructed easily if umlauts are involved.
> 
> Conclusion:
> The search query which contains a wildcard should also be run through 
> the analyzer, because there are a lot of queries which would return 
> nothing. The lucene FAQ already as a topic related to this issue:
> http://wiki.apache.org/lucene-
> java/LuceneFAQ#Are_Wildcard.2C_Prefix.2C_and_Fuzzy_queries_case_sen
> sitive.3F
> 
> The example with "dog" and "dogs" works as long as only one character 
> is stemmed - which could be true in English for the majority. But if 
> more characters are involved lucene does not return anything instead 
> of returning a few additional items. Just consider "families" which is stemmed to "famili".
> Searching for "familie*" wouldn't return no item.
> 
> To find an ending for this initial post ;) :
> Could this behavior made configurable in the standard? If not:
> a) Why are the stemmers used by default if they can led to wrong results?
> b) What can be done manually to stem queries containing wildcards, e.g.
> overriding some parser.
> 
> Best regards
> Dennis
> 
> 
> 



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54569-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Jan  4 21:30:48 2013
Return-Path: <java-user-return-54569-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 4CF05E586
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri,  4 Jan 2013 21:30:48 +0000 (UTC)
Received: (qmail 75174 invoked by uid 500); 4 Jan 2013 21:30:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75108 invoked by uid 500); 4 Jan 2013 21:30:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75100 invoked by uid 99); 4 Jan 2013 21:30:46 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Jan 2013 21:30:46 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cbmanica@gmail.com designates 209.85.212.42 as permitted sender)
Received: from [209.85.212.42] (HELO mail-vb0-f42.google.com) (209.85.212.42)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Jan 2013 21:30:39 +0000
Received: by mail-vb0-f42.google.com with SMTP id fa15so17287567vbb.29
        for <java-user@lucene.apache.org>; Fri, 04 Jan 2013 13:30:18 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:date:message-id:subject:from:to:content-type;
        bh=OCclG/JVsxRmxicypYVDuA+R/xVG78aw+2z+ORTEE2I=;
        b=bTGDyh61mjpk5kECagt7iHcbN6wFrNz93rILvoOJe+oTOyMpgsioz2hgybB0lZTend
         H8gZhxyFoEJMjBjvoM2/pI+wF/z2g/EI2JUu1H0R66oB16F/M/xDRNXUhJAc+ULvo0WT
         4yAT5mbwYVaQQFa601RpntHcT418tQQhMLnbT6GI0CrZBTJQaK7zmQVIYzVK2ecgUYW7
         3G51bFE4bxGfH4lfJy/R2VLjQ6sP0tBYzeTLbKpG1wkojJ4SRsvr+LVtrSdFzRc0uKaM
         uYA4mFVhCvCmFBPEoRrnYHl7jc2594HdkAnL/cfYKIQ3o2fI+344DyxpRo+0bM1u3O08
         UBTQ==
MIME-Version: 1.0
Received: by 10.221.2.69 with SMTP id nt5mr77693991vcb.68.1357335018804; Fri,
 04 Jan 2013 13:30:18 -0800 (PST)
Received: by 10.58.234.129 with HTTP; Fri, 4 Jan 2013 13:30:18 -0800 (PST)
Date: Fri, 4 Jan 2013 13:30:18 -0800
Message-ID: <CA+kozemzVrqzLJWRMrb=FKvs4TpN+TPh=wd25P0xENjP9F5DFg@mail.gmail.com>
Subject: Configuration for edge ngram typeahead
From: "C. Benson Manica" <cbmanica@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=90e6ba211fbfa3157504d27d2fa4
X-Virus-Checked: Checked by ClamAV on apache.org

--90e6ba211fbfa3157504d27d2fa4
Content-Type: text/plain; charset=ISO-8859-1

I have been Googling for an hour with no success whatsoever about how to
configure Lucene (Elasticsearch, actually, but presumably the same deal) to
index edge ngrams for typeahead.  I don't really know how filters,
analyzers, and tokenizers work together - documentation isn't helpful on
that count either - but I managed to cobble together the following
configuration that I thought would work.  It doesn't, though - when I index
documents into the collection with that setting, they still only match
whole words instead of ngrams.  What am I missing?  *Should* this work?
How do I debug this to see if the documents are having these settings
applied to them?

{
    "settings":{
        "index":{
            "analysis":{
                "analyzer":{
                    "typeahead_analyzer":{
                        "type":"custom",
                        "tokenizer":"edgeNGram",
                        "filter":["typeahead_ngram"]
                    }
                },
                "filter":{
                    "typeahead_ngram":{
                        "type":"edgeNGram",
                        "min_gram":1,
                        "max_gram":8,
                        "side":"front"
                    }
                }
            }
        }
    },
    "mappings": {
        "name": {
            "properties": {
                "name": {
                    "type": "string",
                    "analyzer": "typeahead_analyzer"
                }
            }
        }
    }
}

-- 
C. Benson Manica
cbmanica@gmail.com

--90e6ba211fbfa3157504d27d2fa4--

From java-user-return-54570-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Jan  4 22:02:26 2013
Return-Path: <java-user-return-54570-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id C663DE686
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri,  4 Jan 2013 22:02:26 +0000 (UTC)
Received: (qmail 78344 invoked by uid 500); 4 Jan 2013 22:02:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78287 invoked by uid 500); 4 Jan 2013 22:02:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78276 invoked by uid 99); 4 Jan 2013 22:02:24 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Jan 2013 22:02:24 +0000
X-ASF-Spam-Status: No, hits=2.9 required=5.0
	tests=HTML_MESSAGE,MIME_QP_LONG_LINE,RCVD_IN_DNSWL_NONE,SPF_HELO_PASS,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [212.227.17.10] (HELO moutng.kundenserver.de) (212.227.17.10)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Jan 2013 22:02:16 +0000
Received: from [192.168.0.21] (haz95-1-82-229-80-187.fbx.proxad.net [82.229.80.187])
	by mrelayeu.kundenserver.de (node=mreu1) with ESMTP (Nemesis)
	id 0LyyMm-1Sw8Vn2dtI-014Yf7; Fri, 04 Jan 2013 23:01:55 +0100
Subject: Re: Configuration for edge ngram typeahead
References: <CA+kozemzVrqzLJWRMrb=FKvs4TpN+TPh=wd25P0xENjP9F5DFg@mail.gmail.com>
From: David Pilato <david@pilato.fr>
Content-Type: multipart/alternative;
	boundary=Apple-Mail-7AB9F53F-52A8-4E8A-9567-1360C8D84DB6
X-Mailer: iPad Mail (10A523)
In-Reply-To: <CA+kozemzVrqzLJWRMrb=FKvs4TpN+TPh=wd25P0xENjP9F5DFg@mail.gmail.com>
Message-Id: <36FF2F43-ED7B-45F9-8ECB-514D750B9BAE@pilato.fr>
Date: Fri, 4 Jan 2013 23:01:54 +0100
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (1.0)
X-Provags-ID: V02:K0:qwN4it8f5/++WNkCchhHsWSt7qzF8yeu90VTvJ+7hko
 rNqQvgi9agiLu4cHNJkLak2HMjgXBin6szK1WAc7lYwU/NZyCE
 ovv+2Pz6v1slAu10RT44FCKzwZSD0rd9CWeGGV6t9/5YUnSGMt
 rl+NOx1Ys3jm08TUMfJ/gvH19bgX1vGu4pWv6Kmy2+ixKAco/A
 zbuqKyMHNZdVTF4cVdQvaJ5d6MPgyo8p9r3QYIY2ctXBSi79Se
 jWtp4OZPiDdJ3vBGfcjiY3Z14eh4MKgkeqOY53c7gzO3rcWPIK
 33oSNGYBhaHeB7ooqy3rCz2GaOHdQkIm+ypKx2Ecnz3oQoh45i
 thQDna4f1wuTjJYT9cihgE4Bw0mY1DHRep2kx+DRR
X-Virus-Checked: Checked by ClamAV on apache.org

--Apple-Mail-7AB9F53F-52A8-4E8A-9567-1360C8D84DB6
Content-Type: text/plain;
	charset=utf-8
Content-Transfer-Encoding: quoted-printable

Did you define mappings for your docs and fields to use that analyzer?
See: http://www.elasticsearch.org/guide/reference/api/admin-indices-put-mapp=
ing.html

--
David ;-)
Twitter : @dadoonet / @elasticsearchfr / @scrutmydocs


Le 4 janv. 2013 =C3=A0 22:30, "C. Benson Manica" <cbmanica@gmail.com> a =C3=A9=
crit :

I have been Googling for an hour with no success whatsoever about how to
configure Lucene (Elasticsearch, actually, but presumably the same deal) to
index edge ngrams for typeahead.  I don't really know how filters,
analyzers, and tokenizers work together - documentation isn't helpful on
that count either - but I managed to cobble together the following
configuration that I thought would work.  It doesn't, though - when I index
documents into the collection with that setting, they still only match
whole words instead of ngrams.  What am I missing?  *Should* this work?
How do I debug this to see if the documents are having these settings
applied to them?

{
   "settings":{
       "index":{
           "analysis":{
               "analyzer":{
                   "typeahead_analyzer":{
                       "type":"custom",
                       "tokenizer":"edgeNGram",
                       "filter":["typeahead_ngram"]
                   }
               },
               "filter":{
                   "typeahead_ngram":{
                       "type":"edgeNGram",
                       "min_gram":1,
                       "max_gram":8,
                       "side":"front"
                   }
               }
           }
       }
   },
   "mappings": {
       "name": {
           "properties": {
               "name": {
                   "type": "string",
                   "analyzer": "typeahead_analyzer"
               }
           }
       }
   }
}

--=20
C. Benson Manica
cbmanica@gmail.com

--Apple-Mail-7AB9F53F-52A8-4E8A-9567-1360C8D84DB6--

From java-user-return-54571-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Jan  4 22:18:15 2013
Return-Path: <java-user-return-54571-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id BFA44E6F1
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri,  4 Jan 2013 22:18:15 +0000 (UTC)
Received: (qmail 31344 invoked by uid 500); 4 Jan 2013 22:18:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31270 invoked by uid 500); 4 Jan 2013 22:18:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31262 invoked by uid 99); 4 Jan 2013 22:18:13 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Jan 2013 22:18:13 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of trejkaz@trypticon.org designates 209.85.220.181 as permitted sender)
Received: from [209.85.220.181] (HELO mail-vc0-f181.google.com) (209.85.220.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Jan 2013 22:18:07 +0000
Received: by mail-vc0-f181.google.com with SMTP id gb30so16705011vcb.26
        for <java-user@lucene.apache.org>; Fri, 04 Jan 2013 14:17:46 -0800 (PST)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=x-received:mime-version:in-reply-to:references:date:message-id
         :subject:from:to:content-type:x-gm-message-state;
        bh=LCR0IWlG+KSunYLQYkxUUbuxL0BWW+rX1bp6V33zjKQ=;
        b=JtEdNFZV64bh2TfuSwaw/h/EkqgCVDF65idWg73KQYAModwKoMdv50JbxIDo+NEiAe
         qHauRHOvRgF8NCwf44ZtaUewj9J3kdl6amAQ3Xm9QChvzfb/abWuMTfIu3zdkF0d/lVB
         CO5Aubf7BAL5IH9ol4tGPH9/u6bD0TYEUqNoUy9lfDCnho8WtXepDsbHu/brFs5siLEd
         JviClPo1/hJ+1zLze8BhwryNk+GYYjBlGW/4KJ2p1fn8oPSfFUw0YGukxXX4kWIQHJPD
         iPv9mfubsco7OuTQlyBFvke7k4xYHH4GrSHX6/MDi4+3L0A8/xdwivnYBR7irgCNVGuN
         X6AQ==
X-Received: by 10.220.157.9 with SMTP id z9mr78159978vcw.45.1357337866331;
        Fri, 04 Jan 2013 14:17:46 -0800 (PST)
Received: from mail-vb0-f51.google.com (mail-vb0-f51.google.com [209.85.212.51])
        by mx.google.com with ESMTPS id f13sm44606562vep.12.2013.01.04.14.17.44
        (version=SSLv3 cipher=OTHER);
        Fri, 04 Jan 2013 14:17:45 -0800 (PST)
Received: by mail-vb0-f51.google.com with SMTP id fq11so16662508vbb.24
        for <java-user@lucene.apache.org>; Fri, 04 Jan 2013 14:17:44 -0800 (PST)
MIME-Version: 1.0
Received: by 10.52.22.207 with SMTP id g15mr67287060vdf.61.1357337864044; Fri,
 04 Jan 2013 14:17:44 -0800 (PST)
Received: by 10.58.249.198 with HTTP; Fri, 4 Jan 2013 14:17:43 -0800 (PST)
In-Reply-To: <20130104170618.300020@gmx.net>
References: <20130104170618.300020@gmx.net>
Date: Sat, 5 Jan 2013 09:17:43 +1100
Message-ID: <CADuAvzfnLc_nCiYrNhUt+VFGpgYpGvssWD5ebpkuZYcixdSMxQ@mail.gmail.com>
Subject: Re: RE: Stemming and Wildcard - or fire and water
From: Trejkaz <trejkaz@trypticon.org>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
X-Gm-Message-State: ALoCoQkLTSnyCuytRNBlKKOmCdruAMRgWKaC33yrDDi55W+S+hjqEpIC1hzC4X9wg7Owf6WkeOmi
X-Virus-Checked: Checked by ClamAV on apache.org

On Sat, Jan 5, 2013 at 4:06 AM, Klaus Nesbigall <LLG-5d@gmx.de> wrote:
> The actual behavior doesn't work either.
> The english word families will not be found in case the user types the query familie*
> So why solve the problem by postulate one oppinion as right and another as wrong?
> A simple flag which allows or suppresses the stemming would solve everyones problem.

Stemming isn't done by default, so... problem already solved then?

TX

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54572-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Jan  4 22:22:01 2013
Return-Path: <java-user-return-54572-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 42C0EE701
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri,  4 Jan 2013 22:22:01 +0000 (UTC)
Received: (qmail 44354 invoked by uid 500); 4 Jan 2013 22:21:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44302 invoked by uid 500); 4 Jan 2013 22:21:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44290 invoked by uid 99); 4 Jan 2013 22:21:59 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Jan 2013 22:21:59 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of cbmanica@gmail.com designates 209.85.212.46 as permitted sender)
Received: from [209.85.212.46] (HELO mail-vb0-f46.google.com) (209.85.212.46)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Jan 2013 22:21:52 +0000
Received: by mail-vb0-f46.google.com with SMTP id b13so17056202vby.33
        for <java-user@lucene.apache.org>; Fri, 04 Jan 2013 14:21:31 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=hk/jMIUVbiH4Bwyo3Rx75C3h1eZ9HwPixy/RJJ3+fSo=;
        b=Xxj2UBp2LJRbom7imnc3A73uZdhjY2zab0GSapHSY5Nl+rvYD/mk4NvZfKzjV/4iPH
         5KbixYFACYX76XnnsB1IzNA8iXNz9eux/Enskxk1kQu3MLRFjvYwuP2ssP/HTvaxh4td
         LEuuYjxpFL898R9UY2jUawAIjNYcwrnfYloF++Wk4FdEv01LZsgg4OHT06hmYjhx13Rf
         fMHnqGojZog1BV3Q1mfQ4GLwtsP2D5JbLB/0F2t3PDwbhIIS9RRPtjZyFLCXFL63CL4q
         mz8J9gGNhH1MIitG9w5hsfTpvCt8XYPS00DTaPSRUSI0HJrba6GsPZrWgvPH961nneQ3
         6eiw==
MIME-Version: 1.0
Received: by 10.220.156.15 with SMTP id u15mr76630926vcw.51.1357338091873;
 Fri, 04 Jan 2013 14:21:31 -0800 (PST)
Received: by 10.58.234.129 with HTTP; Fri, 4 Jan 2013 14:21:31 -0800 (PST)
In-Reply-To: <36FF2F43-ED7B-45F9-8ECB-514D750B9BAE@pilato.fr>
References: <CA+kozemzVrqzLJWRMrb=FKvs4TpN+TPh=wd25P0xENjP9F5DFg@mail.gmail.com>
	<36FF2F43-ED7B-45F9-8ECB-514D750B9BAE@pilato.fr>
Date: Fri, 4 Jan 2013 14:21:31 -0800
Message-ID: <CA+koze=FvJFQKhRz+zx3x_8zgMUZjxz+zBpUXD4B9oXxMAeHTg@mail.gmail.com>
Subject: Re: Configuration for edge ngram typeahead
From: "C. Benson Manica" <cbmanica@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=f46d043be19ece647004d27de6e7
X-Virus-Checked: Checked by ClamAV on apache.org

--f46d043be19ece647004d27de6e7
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Do I have to do it that way, i.e. POST a separate settings payload to that
url?  You can see that I attempted - per various bits of documentation - to
do it in the mappings section above.


On Fri, Jan 4, 2013 at 2:01 PM, David Pilato <david@pilato.fr> wrote:

> Did you define mappings for your docs and fields to use that analyzer?
> See:
> http://www.elasticsearch.org/guide/reference/api/admin-indices-put-mappin=
g.html
>
> --
> David ;-)
> Twitter : @dadoonet / @elasticsearchfr / @scrutmydocs
>
>
> Le 4 janv. 2013 =E0 22:30, "C. Benson Manica" <cbmanica@gmail.com> a =E9c=
rit :
>
> I have been Googling for an hour with no success whatsoever about how to
> configure Lucene (Elasticsearch, actually, but presumably the same deal) =
to
> index edge ngrams for typeahead.  I don't really know how filters,
> analyzers, and tokenizers work together - documentation isn't helpful on
> that count either - but I managed to cobble together the following
> configuration that I thought would work.  It doesn't, though - when I ind=
ex
> documents into the collection with that setting, they still only match
> whole words instead of ngrams.  What am I missing?  *Should* this work?
> How do I debug this to see if the documents are having these settings
> applied to them?
>
> {
>    "settings":{
>        "index":{
>            "analysis":{
>                "analyzer":{
>                    "typeahead_analyzer":{
>                        "type":"custom",
>                        "tokenizer":"edgeNGram",
>                        "filter":["typeahead_ngram"]
>                    }
>                },
>                "filter":{
>                    "typeahead_ngram":{
>                        "type":"edgeNGram",
>                        "min_gram":1,
>                        "max_gram":8,
>                        "side":"front"
>                    }
>                }
>            }
>        }
>    },
>    "mappings": {
>        "name": {
>            "properties": {
>                "name": {
>                    "type": "string",
>                    "analyzer": "typeahead_analyzer"
>                }
>            }
>        }
>    }
> }
>
> --
> C. Benson Manica
> cbmanica@gmail.com
>



--=20
C. Benson Manica
cbmanica@gmail.com

--f46d043be19ece647004d27de6e7--

From java-user-return-54573-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Sat Jan  5 00:59:30 2013
Return-Path: <java-user-return-54573-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 0D0F3DACE
	for <apmail-lucene-java-user-archive@www.apache.org>; Sat,  5 Jan 2013 00:59:30 +0000 (UTC)
Received: (qmail 13559 invoked by uid 500); 5 Jan 2013 00:59:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13505 invoked by uid 500); 5 Jan 2013 00:59:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13496 invoked by uid 99); 5 Jan 2013 00:59:27 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 05 Jan 2013 00:59:27 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of need4spd@gmail.com designates 209.85.212.44 as permitted sender)
Received: from [209.85.212.44] (HELO mail-vb0-f44.google.com) (209.85.212.44)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 05 Jan 2013 00:59:21 +0000
Received: by mail-vb0-f44.google.com with SMTP id fc26so17062195vbb.17
        for <java-user@lucene.apache.org>; Fri, 04 Jan 2013 16:59:00 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=aOIPa+xlfPtn3Gl2Ci7oDqAhm2AWmGcredzAdXpAqx0=;
        b=nfOWCTPj3hKxAsRXmR3dv+KDsFfUThX55+eqs316vXycI3B+o1JY3mVaJHSjmuwkmL
         PMyrJrCfXexv70S2glxZ0SDHbnpW69qnkA2ioq5zvc+SUgGPvl8UndwCN1JVFNak5EKJ
         OQT73LMvZQ7YZECDpa1oQr9oyyHcr2Pxp2GXHwkHfywQ+7qbPTDbjQ3HfIIU+tJr67Db
         JT6wKOweNl5EcfvPSrIXeuVUJKky4C9LRln86Y+5Rqg6iABXChlAKZocFxZVsHqJeexz
         MqzBczj7Q/VGvWi1T8Ad4tLc3Y15KPXtx2VKbABoz7YV7WZB9C+XhbxDYqnAWFoAnIOj
         cx/A==
MIME-Version: 1.0
Received: by 10.52.67.133 with SMTP id n5mr67590365vdt.24.1357347540614; Fri,
 04 Jan 2013 16:59:00 -0800 (PST)
Received: by 10.52.90.210 with HTTP; Fri, 4 Jan 2013 16:59:00 -0800 (PST)
In-Reply-To: <CAL8PwkbmuW3XgW0fWSq0qwChdzLPeR9E3Y=04eLFbnUW1CGzsw@mail.gmail.com>
References: <CAHibZ_4=LygLoXiezdrdeer-pwCr02JDqLbLV2dXXKZr05OJSg@mail.gmail.com>
	<CAL8PwkbmuW3XgW0fWSq0qwChdzLPeR9E3Y=04eLFbnUW1CGzsw@mail.gmail.com>
Date: Sat, 5 Jan 2013 09:59:00 +0900
Message-ID: <CAHibZ_6Wp7rcrcSOtNErGLfZzgFP__omjL9HSJOJ2MKpqWCGzg@mail.gmail.com>
Subject: Re: Terms.getSumTotalTermFreq() in Lucene 4.0
From: =?EUC-KR?B?wOW/67yu?= <need4spd@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=20cf307f397cfebe4104d2801975
X-Virus-Checked: Checked by ClamAV on apache.org

--20cf307f397cfebe4104d2801975
Content-Type: text/plain; charset=EUC-KR
Content-Transfer-Encoding: quoted-printable

Hello Mike.
Thanks for your reply.

It's not an important issue.
I'll waiting for next release version including this patch.

Thanks.

2013/1/4 Michael McCandless <lucene@mikemccandless.com>

> The problem is that the TermVectorsFormat for the default codec
> (Lucene40TermVectorsFormat) does not store this statistic
> per-document, currently.  We could in theory fix this ... maybe open
> an issue / make a patch if it's important?
>
> -1 return value is actually "valid": it means this statistic is not
> available.
>
> Mike McCandless
>
> http://blog.mikemccandless.com
>
> On Fri, Jan 4, 2013 at 2:39 AM, =C0=E5=BF=EB=BC=AE <need4spd@gmail.com> w=
rote:
> > Hello.
> > I have some questions.
> >
> > Document 1 : "learning perl learning java learning ruby"
> > Document 2 : "perl test"
> >
> > I have indexed this documents, with StoreTermVectors(true) and
> > IndexOptions.DOCS_AND_FREQS.
> > Field name is "f".
> >
> > And I executed this code.
> >
> > IndexReader ir =3D IndexReader.open(dir);
> > Terms terms =3D ir.getTermVector(0, "f");
> >
> > System.out.println(terms.getDocCount()); -> 1
> > System.out.println(terms.getSumDocFreq()); -> 4
> > System.out.println(terms.getSumTotalTermFreq()); -> -1
> >
> > I think this terms instance acts like a single-document inverted index.
> >
> > So getDocCount is 1 (single document), and getSumDocFreq is 4. (because
> > each term's docFreq is 1)
> > Is this right?
> >
> > But I can't understand why getSumTotalTermFreq method return -1.
> > In javadoc getSumTotalTermFreq is sum of
> >
> TermsEnum.totalTermFreq<eclipse-javadoc:%E2%98%82=3DaboutLucene4/lib%5C/l=
ucene-core-4.0.0.jar%3Corg.apache.lucene.index(Terms.class%E2%98%83Terms~ge=
tSumTotalTermFreq%E2%98%82TermsEnum%E2%98%82totalTermFreq>
> > .
> >
> > I think in Document1, each term's totalTermFreqs are [learning, 3],
> [java,
> > 1], [perl, 1], [ruby, 1].
> > So getSumTotalTermFreq method's result is 6 not -1.
> >
> > Why temrs.getSumTotalTermFreq() method return -1?
> >
> >
> > Thanks in advance.
> > --
> > DEV=BF=EB=BD=C4
> > http://devyongsik.tistory.com
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


--=20
DEV=BF=EB=BD=C4
http://devyongsik.tistory.com

--20cf307f397cfebe4104d2801975--

From java-user-return-54574-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Sat Jan  5 06:26:33 2013
Return-Path: <java-user-return-54574-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 5CAFFD656
	for <apmail-lucene-java-user-archive@www.apache.org>; Sat,  5 Jan 2013 06:26:33 +0000 (UTC)
Received: (qmail 89640 invoked by uid 500); 5 Jan 2013 06:26:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89384 invoked by uid 500); 5 Jan 2013 06:26:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89369 invoked by uid 99); 5 Jan 2013 06:26:30 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 05 Jan 2013 06:26:30 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=MIME_QP_LONG_LINE,RCVD_IN_DNSWL_NONE,SPF_HELO_PASS,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [212.227.17.10] (HELO moutng.kundenserver.de) (212.227.17.10)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 05 Jan 2013 06:26:23 +0000
Received: from [192.168.0.21] (haz95-1-82-229-80-187.fbx.proxad.net [82.229.80.187])
	by mrelayeu.kundenserver.de (node=mrbap0) with ESMTP (Nemesis)
	id 0MUTUB-1TQ70O32d1-00RTAb; Sat, 05 Jan 2013 07:25:59 +0100
Subject: Re: Configuration for edge ngram typeahead
References: <CA+kozemzVrqzLJWRMrb=FKvs4TpN+TPh=wd25P0xENjP9F5DFg@mail.gmail.com> <36FF2F43-ED7B-45F9-8ECB-514D750B9BAE@pilato.fr> <CA+koze=FvJFQKhRz+zx3x_8zgMUZjxz+zBpUXD4B9oXxMAeHTg@mail.gmail.com>
From: David Pilato <david@pilato.fr>
Content-Type: text/plain;
	charset=utf-8
X-Mailer: iPad Mail (10A523)
In-Reply-To: <CA+koze=FvJFQKhRz+zx3x_8zgMUZjxz+zBpUXD4B9oXxMAeHTg@mail.gmail.com>
Message-Id: <84A57C79-A45B-4277-97BC-09A185A65CC5@pilato.fr>
Date: Sat, 5 Jan 2013 07:25:57 +0100
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Content-Transfer-Encoding: quoted-printable
Mime-Version: 1.0 (1.0)
X-Provags-ID: V02:K0:lOWHs/MFJIGS+62CN6EstrsakUlHK0q3vWuekVh9hDs
 QtdB5BqLMPVA41Gxw1tBzKhCp4aZLfD1xJJYpY4c8OkbytklKr
 LjNkkr+gcIIa1g7PHyvsB42aa6ZTHgjFIPfom9J//T76lHOvat
 TlmYRKE5C7MBCd/C6tOd9qxGPukGEY7mx8pXhfhrSkaHjvmJAv
 6mY8YMX/8xCeVCoC1otEsZ2CnFjDMvLWMNbLH9gG/QiC0dGgkR
 3/85ZIKOeDO7r7vqurCCwV14dAQJaFNtJQCyETaWJR4+Y9/urm
 cP3tfnhvVbI8HB7KiOUujTP5WtIZqDkAgWPzHsMoK4+bs+EJog
 jWzu1Pcd1h0yV01HhTrpfh4iQ6pD9KANyczoXK/1/
X-Virus-Checked: Checked by ClamAV on apache.org

Oh. My bad! Sorry. I misread your JSON.
BTW I see that you solve yourself your problem on StackOverFlow.

--
David ;-)
Twitter : @dadoonet / @elasticsearchfr / @scrutmydocs


Le 4 janv. 2013 =C3=A0 23:21, "C. Benson Manica" <cbmanica@gmail.com> a =C3=A9=
crit :

Do I have to do it that way, i.e. POST a separate settings payload to that
url?  You can see that I attempted - per various bits of documentation - to
do it in the mappings section above.


On Fri, Jan 4, 2013 at 2:01 PM, David Pilato <david@pilato.fr> wrote:

> Did you define mappings for your docs and fields to use that analyzer?
> See:
> http://www.elasticsearch.org/guide/reference/api/admin-indices-put-mapping=
.html
>=20
> --
> David ;-)
> Twitter : @dadoonet / @elasticsearchfr / @scrutmydocs
>=20
>=20
> Le 4 janv. 2013 =C3=A0 22:30, "C. Benson Manica" <cbmanica@gmail.com> a =C3=
=A9crit :
>=20
> I have been Googling for an hour with no success whatsoever about how to
> configure Lucene (Elasticsearch, actually, but presumably the same deal) t=
o
> index edge ngrams for typeahead.  I don't really know how filters,
> analyzers, and tokenizers work together - documentation isn't helpful on
> that count either - but I managed to cobble together the following
> configuration that I thought would work.  It doesn't, though - when I inde=
x
> documents into the collection with that setting, they still only match
> whole words instead of ngrams.  What am I missing?  *Should* this work?
> How do I debug this to see if the documents are having these settings
> applied to them?
>=20
> {
>   "settings":{
>       "index":{
>           "analysis":{
>               "analyzer":{
>                   "typeahead_analyzer":{
>                       "type":"custom",
>                       "tokenizer":"edgeNGram",
>                       "filter":["typeahead_ngram"]
>                   }
>               },
>               "filter":{
>                   "typeahead_ngram":{
>                       "type":"edgeNGram",
>                       "min_gram":1,
>                       "max_gram":8,
>                       "side":"front"
>                   }
>               }
>           }
>       }
>   },
>   "mappings": {
>       "name": {
>           "properties": {
>               "name": {
>                   "type": "string",
>                   "analyzer": "typeahead_analyzer"
>               }
>           }
>       }
>   }
> }
>=20
> --
> C. Benson Manica
> cbmanica@gmail.com



--=20
C. Benson Manica
cbmanica@gmail.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54575-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Sat Jan  5 07:15:33 2013
Return-Path: <java-user-return-54575-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 650D8DBDC
	for <apmail-lucene-java-user-archive@www.apache.org>; Sat,  5 Jan 2013 07:15:33 +0000 (UTC)
Received: (qmail 83677 invoked by uid 500); 5 Jan 2013 07:15:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83357 invoked by uid 500); 5 Jan 2013 07:15:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83330 invoked by uid 99); 5 Jan 2013 07:15:30 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 05 Jan 2013 07:15:30 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of youngestachiever@gmail.com designates 209.85.215.52 as permitted sender)
Received: from [209.85.215.52] (HELO mail-la0-f52.google.com) (209.85.215.52)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 05 Jan 2013 07:15:22 +0000
Received: by mail-la0-f52.google.com with SMTP id fq12so10728471lab.25
        for <java-user@lucene.apache.org>; Fri, 04 Jan 2013 23:15:01 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=KeYqjxkCVUr1X+FAnSQ8jZPQ6sFu42n/FyTFoCmO/bU=;
        b=iyBaH6+jpwSq0UnauaQTARbtuGBYGVlktYj8E0M286ci2u8mPEBQWT9R/YsGW9NDH2
         4Bm8Ko05UgehdQbDHW9ZMnRSUj/MCPp7BxliNJBuqYUSkwLjtBaNbQCKkCDOzTknxL6U
         N3lFZkLjMcj+mj1P+Yz8Ic6z7phB+6d5FAt2DeRUdyQeKK2IcUgy87CqW5IEmYMkT0uh
         ekk1XGTdL6J5ImdvajjwRyiv4szzqN/Nd404crBl44FL+/2dSMvY+/QtYDgB/11HnBG3
         zSpK3pjHBlmc8392LXVs7gjqSFAwxMrVq2LHmr3IAUHB6LTP8ISgYeZHJ8OIe3oIsH8w
         TlyA==
MIME-Version: 1.0
Received: by 10.152.134.243 with SMTP id pn19mr51851766lab.11.1357370100940;
 Fri, 04 Jan 2013 23:15:00 -0800 (PST)
Received: by 10.114.4.39 with HTTP; Fri, 4 Jan 2013 23:15:00 -0800 (PST)
In-Reply-To: <CAN4YXvfYBGnzRm=oggatyOTWosuWjZKZV60deHMBKopsgHpEfw@mail.gmail.com>
References: <CAPzrt-3P4shaovicEHK6-y=Q6z8JYrx+U47pN8ye5vY3VRQw5w@mail.gmail.com>
	<CALfq-2S0vbqMXb0QhA4a=JP+POM-u7O46p73ag-n9cpcHf5K6A@mail.gmail.com>
	<50E4770C.4000103@gmail.com>
	<CALfq-2SZJ9mF30OYmGK+=8Nv_YcyM1i4JPgUrZGOdzEFhB1_Fw@mail.gmail.com>
	<CAN4YXvfYBGnzRm=oggatyOTWosuWjZKZV60deHMBKopsgHpEfw@mail.gmail.com>
Date: Sat, 5 Jan 2013 12:45:00 +0530
Message-ID: <CAPzrt-3nPefe189Lbk4k=rWvmz+GUvbhV3rQOCWEuhJnmfJELA@mail.gmail.com>
Subject: Re: Pulling lucene 4.1
From: Ramprakash Ramamoorthy <youngestachiever@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=f46d04427248b1ff5a04d2855abc
X-Virus-Checked: Checked by ClamAV on apache.org

--f46d04427248b1ff5a04d2855abc
Content-Type: text/plain; charset=ISO-8859-1

On Fri, Jan 4, 2013 at 6:27 PM, Erick Erickson <erickerickson@gmail.com>wrote:

> BTW, if all you're interested in is the compiled code, you can always get
> the latest build from:
> http://wiki.apache.org/solr/NightlyBuilds(4x-SNAPSHOT). That code will
> be compiled from the link Shai pointed out
> except for any commits since the build...
>

Thank you Erick and et al for the response. 4X branch is my way to go!

>
> FWIW,
> Erick
>
>
> On Wed, Jan 2, 2013 at 2:01 PM, Shai Erera <serera@gmail.com> wrote:
>
> > I was under the impression that you already migrated to 4.0 and are
> asking
> > for 4.1.
> >
> > 4.x promises backwards compatibility as far as index format goes.
> > Regarding API, you should consult the CHANGES as well as MIGRATE files in
> > order to successfully migrate a 3x Lucene app to 4.0.
> >
> > Shai
> >
> >
> > On Wed, Jan 2, 2013 at 8:06 PM, Lance Norskog <goksron@gmail.com> wrote:
> >
> > > 4.x does not promise backwards compatibility with 3.x. Have you made
> your
> > > own extensions?
> > >
> > > On 01/02/2013 04:38 AM, Shai Erera wrote:
> > >
> > >> There's no specific branch for 4.1 yet. All development still happens
> on
> > >> the 4x branch (
> > >> http://svn.apache.org/repos/**asf/lucene/dev/branches/**branch_4x/<
> > http://svn.apache.org/repos/asf/lucene/dev/branches/branch_4x/>
> > >> ).
> > >>
> > >> Note that Lucene maintains two active branches for development:
> 'trunk'
> > >> (currently to be 5.0) and '4x' off of which all Lucene 4.x releases
> are
> > >> created.
> > >>
> > >> Shai
> > >>
> > >>
> > >> On Wed, Jan 2, 2013 at 11:57 AM, Ramprakash Ramamoorthy <
> > >> youngestachiever@gmail.com> wrote:
> > >>
> > >>  Dear all,
> > >>>
> > >>>             Would be glad to know on which branch of lucene is the
> > >>> development happening on version 4.1. Would be glad if you can share
> > the
> > >>> repo URL, we are testing out certain features of 4.1 including
> > >>> CompressingStoredFieldsFormat.
> > >>>
> > >>>             Currently we are pulling from trunk, which I guess is 5.x
> > >>> branch. Very particular about 4.1 because, we need backward
> > compatibility
> > >>> with 3.x. Thanks in advance.
> > >>>
> > >>> --
> > >>> With Thanks and Regards,
> > >>> Ramprakash Ramamoorthy,
> > >>> India.
> > >>>
> > >>>
> > >
> > >
> ------------------------------**------------------------------**---------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.**apache.org<
> > java-user-unsubscribe@lucene.apache.org>
> > > For additional commands, e-mail: java-user-help@lucene.apache.**org<
> > java-user-help@lucene.apache.org>
> > >
> > >
> >
>



-- 
With Thanks and Regards,
Ramprakash Ramamoorthy,
Engineer Trainee,
Zoho Corporation.
+91 9626975420

--f46d04427248b1ff5a04d2855abc--

From java-user-return-54576-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Sat Jan  5 12:37:30 2013
Return-Path: <java-user-return-54576-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id E7E37DB31
	for <apmail-lucene-java-user-archive@www.apache.org>; Sat,  5 Jan 2013 12:37:30 +0000 (UTC)
Received: (qmail 11153 invoked by uid 500); 5 Jan 2013 12:37:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10801 invoked by uid 500); 5 Jan 2013 12:37:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10775 invoked by uid 99); 5 Jan 2013 12:37:24 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 05 Jan 2013 12:37:24 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ishalyminov@yandex-team.ru designates 95.108.253.143 as permitted sender)
Received: from [95.108.253.143] (HELO forward18.mail.yandex.net) (95.108.253.143)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 05 Jan 2013 12:37:16 +0000
Received: from webcorp2g.yandex-team.ru (webcorp2g.yandex-team.ru [95.108.252.6])
	by forward18.mail.yandex.net (Yandex) with ESMTP id 4D8B01780F3A
	for <java-user@lucene.apache.org>; Sat,  5 Jan 2013 16:36:55 +0400 (MSK)
Received: from 127.0.0.1 (localhost.localdomain [127.0.0.1])
	by webcorp2g.yandex-team.ru (Yandex) with ESMTP id 31F3080FA;
	Sat,  5 Jan 2013 16:36:55 +0400 (MSK)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yandex-team.ru;
	s=default; t=1357389415;
	bh=CrZMlqraqUqNMQ5XA2TntFH7CUgRT/NncoYEE24MbfA=;
	h=From:To:Subject:Date;
	b=Z5StnCMD3u32X+2bXsKyNxVTNkXjx287N3mLlJMB/d6tdUkLryArJYFP5JHNvEPO/
	 ME0HM199ys0SvXghdkCnwKSfoAUPyYW1MAQf38zF1uALOTbc+wfeBXJ5BWwxXljIbY
	 aeNBngrxfm4aOqCx+Vyt7R0g67TK3tdwe2Vj/IqI=
Received: from v3-150-97.yandex.net (v3-150-97.yandex.net [84.201.150.97]) by webcorp2g.yandex-team.ru with HTTP;
	Sat, 05 Jan 2013 16:36:55 +0400
From: Igor Shalyminov <ishalyminov@yandex-team.ru>
To: java-user@lucene.apache.org
Subject: Lucene for a linguistic corpus
MIME-Version: 1.0
Message-Id: <115121357389415@webcorp2g.yandex-team.ru>
X-Mailer: Yamail [ http://yandex.ru ] 5.0
Date: Sat, 05 Jan 2013 16:36:55 +0400
Content-Transfer-Encoding: 7bit
Content-Type: text/plain
X-Virus-Checked: Checked by ClamAV on apache.org

Hello!

I'm considering Lucene as an engine for linguistic corpus search.

There's a feature in this search: each word is treated as ambiguuos - i.e., it has got multiple sets of grammatical annotations (there's a fixed maximum of these sets number - a word can have at most 8 parses).
For an example, in the phrase "A man saw a elephant" "saw" has annotations as follows (we also say that its position in index is 1234):

{lemma: see, pos: verb, tense: past}, {lemma: saw, pos: noun, number: singular}

Normally, we index each annotation as an independent feature (i.e., there will be posting lists for "lemma", "pos", "number", etc.). And the problem is, for the query "pos = Verb AND number = Singular" we DON'T want to find the position 1234 because they appeared in different parses.

As a solution one may consider indexing all annotation subsets (this would increase index size and queries complicatedness), searching for regexps (but the search will be dead slow), or indexing parses, not words (but queries with given distance between words will break up) - these solutions are not acceptable.

I think, it would be more effective to insert parse index in each attribute's posting list entry as a payload and use it at the intersectiion stage. E.g., we have a posting list for 'pos = Verb' like ...|...|1.1234|...|..., and a posting list for 'number = Singular': ...|...|2.1234|...|... While processing a query like 'pos = Verb AND number = singular' at all stages of posting list processing 'x.1234' will be accepted until the intersection stage at which they will be rejected because of non-corresponding parse indexes.

I am also new to Lucene, so could you please tell me if this idea is implementable in Lucene, and how much effort does the implementation take?


-- 
Best Regards,
Igor Shalyminov

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54577-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Sat Jan  5 13:24:27 2013
Return-Path: <java-user-return-54577-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 0285EDF95
	for <apmail-lucene-java-user-archive@www.apache.org>; Sat,  5 Jan 2013 13:24:27 +0000 (UTC)
Received: (qmail 774 invoked by uid 500); 5 Jan 2013 13:24:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 713 invoked by uid 500); 5 Jan 2013 13:24:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 357 invoked by uid 99); 5 Jan 2013 13:24:22 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 05 Jan 2013 13:24:22 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.210.53] (HELO mail-da0-f53.google.com) (209.85.210.53)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 05 Jan 2013 13:24:13 +0000
Received: by mail-da0-f53.google.com with SMTP id x6so7917741dac.40
        for <java-user@lucene.apache.org>; Sat, 05 Jan 2013 05:23:52 -0800 (PST)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding:x-gm-message-state;
        bh=eA2AZOBo6SfjZXRlWMIdVvhuRtZUdhi1Z09itZlU9og=;
        b=f4T/IPrqdHWReAGz5xHYZvOoCMVglBW8+z5u8pNGj6IXnrjCDBCwJz5XsSR8/UHJ/h
         hvY4fEMxgI7cx+YAwsKkkra1JtrMd5lU5ytP6LX/bu0rr2bKOnXi2hok0qOvI8YWYAJt
         HL16fGT3Lj6/Bwtvt2tYT+s9qNkkDKn8FOFRBB1kynhgvQvE11F+bcB6b3cbjGJ3Ouwe
         vnltggK/H8Wbb/FebWWw6j/XU7pIqxvUlroLB+u2JIOH5ZV+E7KVG6NfSTMkd0vPm3jk
         Jsw30IXa5dygHZv9EUpaxVt64ctOp984UVHIpKgUhYm6oUH4eEl9Z769IYA7klrR3/CB
         RKEA==
Received: by 10.68.135.98 with SMTP id pr2mr5079687pbb.101.1357392231929; Sat,
 05 Jan 2013 05:23:51 -0800 (PST)
MIME-Version: 1.0
Received: by 10.68.34.106 with HTTP; Sat, 5 Jan 2013 05:23:31 -0800 (PST)
In-Reply-To: <CAHibZ_6Wp7rcrcSOtNErGLfZzgFP__omjL9HSJOJ2MKpqWCGzg@mail.gmail.com>
References: <CAHibZ_4=LygLoXiezdrdeer-pwCr02JDqLbLV2dXXKZr05OJSg@mail.gmail.com>
 <CAL8PwkbmuW3XgW0fWSq0qwChdzLPeR9E3Y=04eLFbnUW1CGzsw@mail.gmail.com> <CAHibZ_6Wp7rcrcSOtNErGLfZzgFP__omjL9HSJOJ2MKpqWCGzg@mail.gmail.com>
From: Michael McCandless <lucene@mikemccandless.com>
Date: Sat, 5 Jan 2013 08:23:31 -0500
Message-ID: <CAL8PwkYYnL2U0YeDmfGQLAjeRMgHTfA6y3Cu9E12v9xDRdE9XA@mail.gmail.com>
Subject: Re: Terms.getSumTotalTermFreq() in Lucene 4.0
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=EUC-KR
Content-Transfer-Encoding: quoted-printable
X-Gm-Message-State: ALoCoQk1yEn3kIJUMUNGcEEJPE7LeUHgfrqxnCmud6TPoHj1HsxAivtWPyVceZJpT/tskW5ekeDW
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

The next version won't have a fix for this unless someone opens an
issue / posts a patch.

Mike McCandless

http://blog.mikemccandless.com

On Fri, Jan 4, 2013 at 7:59 PM, =C0=E5=BF=EB=BC=AE <need4spd@gmail.com> wro=
te:
> Hello Mike.
> Thanks for your reply.
>
> It's not an important issue.
> I'll waiting for next release version including this patch.
>
> Thanks.
>
> 2013/1/4 Michael McCandless <lucene@mikemccandless.com>
>
>> The problem is that the TermVectorsFormat for the default codec
>> (Lucene40TermVectorsFormat) does not store this statistic
>> per-document, currently.  We could in theory fix this ... maybe open
>> an issue / make a patch if it's important?
>>
>> -1 return value is actually "valid": it means this statistic is not
>> available.
>>
>> Mike McCandless
>>
>> http://blog.mikemccandless.com
>>
>> On Fri, Jan 4, 2013 at 2:39 AM, =C0=E5=BF=EB=BC=AE <need4spd@gmail.com> =
wrote:
>> > Hello.
>> > I have some questions.
>> >
>> > Document 1 : "learning perl learning java learning ruby"
>> > Document 2 : "perl test"
>> >
>> > I have indexed this documents, with StoreTermVectors(true) and
>> > IndexOptions.DOCS_AND_FREQS.
>> > Field name is "f".
>> >
>> > And I executed this code.
>> >
>> > IndexReader ir =3D IndexReader.open(dir);
>> > Terms terms =3D ir.getTermVector(0, "f");
>> >
>> > System.out.println(terms.getDocCount()); -> 1
>> > System.out.println(terms.getSumDocFreq()); -> 4
>> > System.out.println(terms.getSumTotalTermFreq()); -> -1
>> >
>> > I think this terms instance acts like a single-document inverted index=
.
>> >
>> > So getDocCount is 1 (single document), and getSumDocFreq is 4. (becaus=
e
>> > each term's docFreq is 1)
>> > Is this right?
>> >
>> > But I can't understand why getSumTotalTermFreq method return -1.
>> > In javadoc getSumTotalTermFreq is sum of
>> >
>> TermsEnum.totalTermFreq<eclipse-javadoc:%E2%98%82=3DaboutLucene4/lib%5C/=
lucene-core-4.0.0.jar%3Corg.apache.lucene.index(Terms.class%E2%98%83Terms~g=
etSumTotalTermFreq%E2%98%82TermsEnum%E2%98%82totalTermFreq>
>> > .
>> >
>> > I think in Document1, each term's totalTermFreqs are [learning, 3],
>> [java,
>> > 1], [perl, 1], [ruby, 1].
>> > So getSumTotalTermFreq method's result is 6 not -1.
>> >
>> > Why temrs.getSumTotalTermFreq() method return -1?
>> >
>> >
>> > Thanks in advance.
>> > --
>> > DEV=BF=EB=BD=C4
>> > http://devyongsik.tistory.com
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
>
> --
> DEV=BF=EB=BD=C4
> http://devyongsik.tistory.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54578-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Sat Jan  5 14:35:42 2013
Return-Path: <java-user-return-54578-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 82AC0DBA4
	for <apmail-lucene-java-user-archive@www.apache.org>; Sat,  5 Jan 2013 14:35:42 +0000 (UTC)
Received: (qmail 52900 invoked by uid 500); 5 Jan 2013 14:35:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52841 invoked by uid 500); 5 Jan 2013 14:35:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52831 invoked by uid 99); 5 Jan 2013 14:35:40 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 05 Jan 2013 14:35:40 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ukouryou@gmail.com designates 209.85.212.45 as permitted sender)
Received: from [209.85.212.45] (HELO mail-vb0-f45.google.com) (209.85.212.45)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 05 Jan 2013 14:35:35 +0000
Received: by mail-vb0-f45.google.com with SMTP id p1so17469206vbi.18
        for <java-user@lucene.apache.org>; Sat, 05 Jan 2013 06:35:14 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:date:message-id:subject:from:to:cc:content-type;
        bh=lTu4YpaHplxRB3nq9LlrHk+NO/nT+v31ZgDreCePFUQ=;
        b=r/4QdnrJ1Ob6oIe0bOkNPZyRdnb6R/hm6INJ+SokMAzXQiWSc9lsv3dr9S6zdyeIDx
         CD3YgOGiHubFP7Ynz6Pgn9QQbBg2qCvxUP2jtMYx8iQHNFg1uqDLePCgVZkp6btqB+F+
         p2dIxVUZ1CnOhHLxxGiwSPeXtYIr8JclNvC5WWmErYFs+vIajMS+GpFZBsWz9iQw4qBH
         NoJ22wS3ZYoMsA6goUMD8gES7eEM1t6B9B2LHfoZerLAvqMPvikizcnwo7JGQ6FmCbbj
         bQTktpOUjmAUMNtlrgObktcopVBNIu9qvYc9g3L21pop1CMu1rUh/NypjMNTOOF6U7Lm
         IRjA==
MIME-Version: 1.0
Received: by 10.52.94.113 with SMTP id db17mr70090764vdb.27.1357396514100;
 Sat, 05 Jan 2013 06:35:14 -0800 (PST)
Received: by 10.220.108.76 with HTTP; Sat, 5 Jan 2013 06:35:13 -0800 (PST)
Date: Sat, 5 Jan 2013 22:35:13 +0800
Message-ID: <CAE9rNz99sSELNaKU7FgcY7EAu0EX+i70Ysw+AcYQfoN8R09pWA@mail.gmail.com>
Subject: custom solr sort problem
From: Andy Yu <ukouryou@gmail.com>
To: java-user@lucene.apache.org
Cc: Ian Lea <ian.lea@gmail.com>
Content-Type: multipart/alternative; boundary=20cf307ca3200ad6db04d28b8140
X-Virus-Checked: Checked by ClamAV on apache.org

--20cf307ca3200ad6db04d28b8140
Content-Type: text/plain; charset=ISO-8859-1

Hi,

Maybe this is an old thread or maybe it's different with previous one.

I want to custom solr sort and  pass solr param from client to solr server,
so I  implemented SearchComponent which named MySortComponent in my code,
and also implemented FieldComparatorSource and FieldComparator. when I use *
"mysearch" *requesthandler(see following codes),* I found that custom sort
just effect on the current page when I got multiple page results, but the
sort is expected when I sets the rows which contains  all the
results.*Does anybody know how to solve it or the reason?

Thanks very much.

code snippet:

public class MySortComponent extends SearchComponent implements
        SolrCoreAware {

    public void inform(SolrCore arg0) {
    }

    @Override
    public void prepare(ResponseBuilder rb) throws IOException {
        SolrParams params = rb.req.getParams();
String uid = params.get("uid")
private RestTemplate restTemplate = new RestTemplate();
        MyComparatorSource comparator = new MyComparatorSource(uid);
        SortSpec sortSpec = rb.getSortSpec();
        if (sortSpec.getSort() == null) {
            sortSpec.setSort(new Sort(new SortField[] {
                    new SortField("relation",
comparator),SortField.FIELD_SCORE }));

        } else {

            SortField[] current = sortSpec.getSort().getSort();
            ArrayList<SortField> sorts = new ArrayList<SortField>(
                    current.length + 1);
            sorts.add(new SortField("relation", comparator));
            for (SortField sf : current) {
                sorts.add(sf);
            }
            sortSpec.setSort(new Sort(sorts.toArray(new
SortField[sorts.size()])));

        }

    }

    @Override
    public void process(ResponseBuilder rb) throws IOException {

    }

    //
---------------------------------------------------------------------------------
    // SolrInfoMBean
    //
---------------------------------------------------------------------------------

    @Override
    public String getDescription() {
        return "Custom Sorting";
    }

    @Override
    public String getSource() {
        return "";
    }

    @Override
    public URL[] getDocs() {
        try {
            return new URL[] { new URL(
                    "http://wiki.apache.org/solr/QueryComponent") };
        } catch (MalformedURLException e) {
            throw new RuntimeException(e);
        }
    }

    public class MyComparatorSource extends FieldComparatorSource {
        private BitSet dg1;
        private BitSet dg2;
        private BitSet dg3;

        public MyComparatorSource(String uid) throws IOException {

            SearchResponse responseBody = restTemplate.postForObject(
                    "http://search.test.com/userid/search/" + uid, null,
SearchResponse.class);

            String d1 = responseBody.getOneDe();
            String d2 = responseBody.getTwoDe();
            String d3 = responseBody.getThreeDe();

            if (StringUtils.hasLength(d1)) {
                byte[] bytes = Base64.decodeBase64(d1);
                dg1 = BitSetHelper.loadFromBzip2ByteArray(bytes);
            }

            if (StringUtils.hasLength(d2)) {
                byte[] bytes = Base64.decodeBase64(d2);
                dg2 = BitSetHelper.loadFromBzip2ByteArray(bytes);
            }

            if (StringUtils.hasLength(d3)) {
                byte[] bytes = Base64.decodeBase64(d3);
                dg3 = BitSetHelper.loadFromBzip2ByteArray(bytes);
            }

        }

        @Override
        public FieldComparator newComparator(String fieldname,
                final int numHits, int sortPos, boolean reversed)
                throws IOException {
            return new RelationComparator(fieldname, numHits);
        }

        class RelationComparator extends FieldComparator {
            private int[] uidDoc;
            private float[] values;
            private float bottom;
            String fieldName;

            public RelationComparator(String fieldName, int numHits)
                    throws IOException {
                values = new float[numHits];
                this.fieldName = fieldName;
            }

            @Override
            public int compare(int slot1, int slot2) {
                if (values[slot1] > values[slot2])
                    return -1;
                if (values[slot1] < values[slot2])
                    return 1;
                return 0;
            }

            @Override
            public int compareBottom(int doc) throws IOException {
                float docDistance = getRelation(doc);
                if (bottom < docDistance)
                    return -1;
                if (bottom > docDistance)
                    return 1;
                return 0;
            }

            @Override
            public void copy(int slot, int doc) throws IOException {
                values[slot] = getRelation(doc);

            }

            @Override
            public void setBottom(int slot) {
                bottom = values[slot];
            }

            @Override
            public FieldComparator<Integer> setNextReader(
                    AtomicReaderContext ctx) throws IOException {
                uidDoc = FieldCache.DEFAULT.getInts(ctx.reader(), "userID",
true);
                return this;
            }

            @Override
            public Float value(int slot) {
                return new Float(values[slot]);
            }

            private float getRelation(int doc) throws IOException {
                if (dg3.get(uidDoc[doc])) {
                    return 3.0f;
                } else if (dg2.get(uidDoc[doc])) {
                    return 4.0f;
                } else if (dg1.get(uidDoc[doc])) {
                    return 5.0f;
                } else {
                    return 1.0f;
                }
            }

            @Override
            public int compareDocToValue(int arg0, Object arg1)
                    throws IOException {
                // TODO Auto-generated method stub
                return 0;
            }
        }

    }
}


and solrconfig.xml configuration is

<searchComponent name="mySortComponent"
class="com.tianji.solr.handler.component.MySortComponent"/>

<requestHandler name="/mysearch" class="solr.SearchHandler">
   <arr name="last-components">
    <str>mySortComponent</str>
  </arr>
</requestHandler>


Andy

--20cf307ca3200ad6db04d28b8140--

From java-user-return-54579-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Sat Jan  5 16:29:23 2013
Return-Path: <java-user-return-54579-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id B1AA5E8B0
	for <apmail-lucene-java-user-archive@www.apache.org>; Sat,  5 Jan 2013 16:29:23 +0000 (UTC)
Received: (qmail 74753 invoked by uid 500); 5 Jan 2013 16:29:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74705 invoked by uid 500); 5 Jan 2013 16:29:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74695 invoked by uid 99); 5 Jan 2013 16:29:21 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 05 Jan 2013 16:29:21 +0000
X-ASF-Spam-Status: No, hits=1.7 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of pelegitai17@gmail.com designates 209.85.220.181 as permitted sender)
Received: from [209.85.220.181] (HELO mail-vc0-f181.google.com) (209.85.220.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 05 Jan 2013 16:29:14 +0000
Received: by mail-vc0-f181.google.com with SMTP id gb30so17755804vcb.12
        for <java-user@lucene.apache.org>; Sat, 05 Jan 2013 08:28:52 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:date:message-id:subject:from:to:content-type;
        bh=c4bFAiv8PsNx3YOEtcMqfWp8m8hpDJnZVsLZcAR0azA=;
        b=VjogXm2lrvLvlX5S4XZAFuHTlQxnDoMaCXrDNUuUO4ws4slBsdhbCKQDAh49wCpdTC
         uzp2rGjMrauX46eWqTpQXZYbZr9pxu6mW7Ms/TpNpzouBtTkMSqadBpIj2yl4RWiheo0
         X6kCAiM6v3U5u4iiE5sFYAFlxzQnG+OBlDAWKfSD+s0NvDMagXUgezoy1awl5bHeQy4g
         5X3L6BoAyuoaZkswJYP/vyG4LDyA7Y/dex+fYbvhjc8Vy9bNEiv1Yu6pnEK8pDBaNNEQ
         abe+p5JAeEfuX5nWypulj6f3n/kFk+XmIkISOrqV9mg9SQYIdvprbdWFf8PDpVDJDq9T
         kAFA==
MIME-Version: 1.0
Received: by 10.220.115.72 with SMTP id h8mr78299993vcq.43.1357403332754; Sat,
 05 Jan 2013 08:28:52 -0800 (PST)
Received: by 10.220.24.74 with HTTP; Sat, 5 Jan 2013 08:28:52 -0800 (PST)
Date: Sat, 5 Jan 2013 18:28:52 +0200
Message-ID: <CALvBDEiKWP_Vm=So8x87_d0iiZqpyrkAOouRMAq2ge4QrsYUeg@mail.gmail.com>
Subject: Querying on specific token attributes
From: Itai Peleg <pelegitai17@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=f46d04389455773f2e04d28d1741
X-Virus-Checked: Checked by ClamAV on apache.org

--f46d04389455773f2e04d28d1741
Content-Type: text/plain; charset=ISO-8859-1

Hi everyone,

I'm working on entity extraction with Lucene, and I have (with a little
help from this forum) added attributes to specific tokens which denote the
entities.

My question is this: how can I retrieve documents with specific tokens that
have specific attributes? Querying by fields is very easy, but I have not
been able to find an example for a query that seeks specific attributes. If
someone could post a small code sample it would be extremely helpful.

Thanks in advance,
Itai

--f46d04389455773f2e04d28d1741--

From java-user-return-54580-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Sun Jan  6 07:18:53 2013
Return-Path: <java-user-return-54580-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id D9691E710
	for <apmail-lucene-java-user-archive@www.apache.org>; Sun,  6 Jan 2013 07:18:53 +0000 (UTC)
Received: (qmail 50441 invoked by uid 500); 6 Jan 2013 07:18:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50097 invoked by uid 500); 6 Jan 2013 07:18:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50059 invoked by uid 99); 6 Jan 2013 07:18:49 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 06 Jan 2013 07:18:49 +0000
X-ASF-Spam-Status: No, hits=2.3 required=5.0
	tests=SPF_SOFTFAIL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: softfail (nike.apache.org: transitioning domain of wuqiu.main@qq.com does not designate 216.139.236.26 as permitted sender)
Received: from [216.139.236.26] (HELO sam.nabble.com) (216.139.236.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 06 Jan 2013 07:18:44 +0000
Received: from ben.nabble.com ([192.168.236.152])
	by sam.nabble.com with esmtp (Exim 4.72)
	(envelope-from <wuqiu.main@qq.com>)
	id 1TrkUx-0005KE-K7
	for java-user@lucene.apache.org; Sat, 05 Jan 2013 23:18:23 -0800
Date: Sat, 5 Jan 2013 23:18:23 -0800 (PST)
From: wgggfiy <wuqiu.main@qq.com>
To: java-user@lucene.apache.org
Message-ID: <1357456703597-4031045.post@n3.nabble.com>
Subject: how to add attributes to a field just like term's payload ?
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

hello, as we know, we can add payload to a term, 
but whether can we add extra custom info into a field ?
such the description of the field, which is the property shared by thd field
of all documents.
how to make it ? thx



-----
--------------------------
Email: wuqiu.main@qq.com
--------------------------
--
View this message in context: http://lucene.472066.n3.nabble.com/how-to-add-attributes-to-a-field-just-like-term-s-payload-tp4031045.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54581-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Sun Jan  6 17:24:03 2013
Return-Path: <java-user-return-54581-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 4845DD0FD
	for <apmail-lucene-java-user-archive@www.apache.org>; Sun,  6 Jan 2013 17:24:03 +0000 (UTC)
Received: (qmail 31075 invoked by uid 500); 6 Jan 2013 17:24:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30912 invoked by uid 500); 6 Jan 2013 17:24:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30901 invoked by uid 99); 6 Jan 2013 17:24:01 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 06 Jan 2013 17:24:00 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of sarowe@gmail.com designates 209.85.210.180 as permitted sender)
Received: from [209.85.210.180] (HELO mail-ia0-f180.google.com) (209.85.210.180)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 06 Jan 2013 17:23:55 +0000
Received: by mail-ia0-f180.google.com with SMTP id t4so15216596iag.39
        for <java-user@lucene.apache.org>; Sun, 06 Jan 2013 09:23:34 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=nbE8Qikncx78AIFbP04/4Zz5L7Nfr/e6V2I8xGMwZRY=;
        b=uAa17lqF5fP0s96mBt+pZeVk2240DbZ4qTffO2ua8UYsaC9n2OzalFKL17QZDUfwYs
         ZmbuVtoo5Q+RqMq5tM8g5h0J5o5mbW/HY1OQBL+crceknOKcrDAsHnS21zEFeBtq07lG
         de+MzjtwNYPozDk50vLLIs5VNqTcqRrAkdOLyhDMVkSfvYOZKbx4cY1xaA7wqhUmEL37
         Kik5x3oVyGi4X49jNibYu5N5f8jvxlw0k8WF96YKNewujal+iXTPR9zIPeuD7wIxKgpB
         OJsPHirkAg1Zc268+eQambP0XW5/k/cXq24RhVUBVlL5ScX1YKv0hp/ElR0mLSgjxvW0
         JPSQ==
MIME-Version: 1.0
Received: by 10.50.0.176 with SMTP id 16mr3719814igf.70.1357493014245; Sun, 06
 Jan 2013 09:23:34 -0800 (PST)
Received: by 10.64.48.8 with HTTP; Sun, 6 Jan 2013 09:23:34 -0800 (PST)
In-Reply-To: <1357456703597-4031045.post@n3.nabble.com>
References: <1357456703597-4031045.post@n3.nabble.com>
Date: Sun, 6 Jan 2013 12:23:34 -0500
Message-ID: <CALvfXiLFkcXDpNg5nqFTfCN-DmjrXC+FqJa_7b-qts1_stRPLA@mail.gmail.com>
Subject: Re: how to add attributes to a field just like term's payload ?
From: Steve Rowe <sarowe@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=e89a8f5030eee6315804d2a1f86f
X-Virus-Checked: Checked by ClamAV on apache.org

--e89a8f5030eee6315804d2a1f86f
Content-Type: text/plain; charset=UTF-8

Hi wiggify,

Lucene doesn't have direct support for what you want.

However, you can store a custom map in the index when you commit: <
https://lucene.apache.org/core/4_0_0/core/org/apache/lucene/index/IndexWriter.html#commit%28java.util.Map%29
>.

It will be your responsibility to associate that information with each
field, e.g. by using field names as keys in the map.

Steve

On Sun, Jan 6, 2013 at 2:18 AM, wgggfiy <wuqiu.main@qq.com> wrote:

> hello, as we know, we can add payload to a term,
> but whether can we add extra custom info into a field ?
> such the description of the field, which is the property shared by thd
> field
> of all documents.
> how to make it ? thx
>

--e89a8f5030eee6315804d2a1f86f--

From java-user-return-54582-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Sun Jan  6 18:29:36 2013
Return-Path: <java-user-return-54582-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 53043ECF8
	for <apmail-lucene-java-user-archive@www.apache.org>; Sun,  6 Jan 2013 18:29:36 +0000 (UTC)
Received: (qmail 54190 invoked by uid 500); 6 Jan 2013 18:29:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54140 invoked by uid 500); 6 Jan 2013 18:29:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54123 invoked by uid 99); 6 Jan 2013 18:29:34 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 06 Jan 2013 18:29:34 +0000
X-ASF-Spam-Status: No, hits=2.3 required=5.0
	tests=SPF_SOFTFAIL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: softfail (nike.apache.org: transitioning domain of wuqiu.main@qq.com does not designate 216.139.236.26 as permitted sender)
Received: from [216.139.236.26] (HELO sam.nabble.com) (216.139.236.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 06 Jan 2013 18:29:28 +0000
Received: from ben.nabble.com ([192.168.236.152])
	by sam.nabble.com with esmtp (Exim 4.72)
	(envelope-from <wuqiu.main@qq.com>)
	id 1Truy3-0001F2-OD
	for java-user@lucene.apache.org; Sun, 06 Jan 2013 10:29:07 -0800
Date: Sun, 6 Jan 2013 10:29:07 -0800 (PST)
From: wgggfiy <wuqiu.main@qq.com>
To: java-user@lucene.apache.org
Message-ID: <1357496947741-4031122.post@n3.nabble.com>
In-Reply-To: <CALvfXiLFkcXDpNg5nqFTfCN-DmjrXC+FqJa_7b-qts1_stRPLA@mail.gmail.com>
References: <1357456703597-4031045.post@n3.nabble.com> <CALvfXiLFkcXDpNg5nqFTfCN-DmjrXC+FqJa_7b-qts1_stRPLA@mail.gmail.com>
Subject: Re: how to add attributes to a field just like term's payload ?
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

en ha, sounds good, and perhaps already satisfied my need.
thx so much.




-----
--------------------------
Email: wuqiu.main@qq.com
--------------------------
--
View this message in context: http://lucene.472066.n3.nabble.com/how-to-add-attributes-to-a-field-just-like-term-s-payload-tp4031045p4031122.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54583-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Jan  7 14:23:17 2013
Return-Path: <java-user-return-54583-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 06D6CE69D
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon,  7 Jan 2013 14:23:17 +0000 (UTC)
Received: (qmail 85537 invoked by uid 500); 7 Jan 2013 14:23:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84930 invoked by uid 500); 7 Jan 2013 14:23:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84893 invoked by uid 99); 7 Jan 2013 14:23:12 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Jan 2013 14:23:12 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of need4spd@gmail.com designates 209.85.212.52 as permitted sender)
Received: from [209.85.212.52] (HELO mail-vb0-f52.google.com) (209.85.212.52)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Jan 2013 14:23:08 +0000
Received: by mail-vb0-f52.google.com with SMTP id ez10so19470364vbb.11
        for <java-user@lucene.apache.org>; Mon, 07 Jan 2013 06:22:47 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=87uDY4g0QupEqmCsOBtGAiTFK4X8Q5zCpjkUr8cBnKk=;
        b=REU7qAJjfkk3c+z2+KrrLYMI8TSkWuoJiykv5ZEBx6uTPsfeTy0tqLp4bpSbBXTncP
         w6ja57/mlQ52HWfOyd5PUP3dREpQtXR5cxr6+5ku9Jyr0V2IENWZk7UcR6wqmXS6iBu5
         S8fKyo+oRzyRvJd2CILXL2T93DwLceiQNAS3MnWU5HEaJnkXfxhfT8bRR7PSuFQN2tG9
         76JTm8bg6IlF9B3B+dv8Y2jLM6bWV4/UMfx9gsv47c3gLv3PAxadvzvPSEMLf7FM0fg/
         6+F3v6SlRE+Sb7Efz+k7njJAr29jwvtc+CYJ6sFGk3qBbcNdw/ThSYIhC6qPfrvmf+Zv
         zq6w==
MIME-Version: 1.0
Received: by 10.220.154.148 with SMTP id o20mr82895607vcw.54.1357568567359;
 Mon, 07 Jan 2013 06:22:47 -0800 (PST)
Received: by 10.52.90.210 with HTTP; Mon, 7 Jan 2013 06:22:47 -0800 (PST)
In-Reply-To: <CAL8PwkYYnL2U0YeDmfGQLAjeRMgHTfA6y3Cu9E12v9xDRdE9XA@mail.gmail.com>
References: <CAHibZ_4=LygLoXiezdrdeer-pwCr02JDqLbLV2dXXKZr05OJSg@mail.gmail.com>
	<CAL8PwkbmuW3XgW0fWSq0qwChdzLPeR9E3Y=04eLFbnUW1CGzsw@mail.gmail.com>
	<CAHibZ_6Wp7rcrcSOtNErGLfZzgFP__omjL9HSJOJ2MKpqWCGzg@mail.gmail.com>
	<CAL8PwkYYnL2U0YeDmfGQLAjeRMgHTfA6y3Cu9E12v9xDRdE9XA@mail.gmail.com>
Date: Mon, 7 Jan 2013 23:22:47 +0900
Message-ID: <CAHibZ_7TQD+R6-9gDjeSJQodpHFBgaTQUY1CoCajqkExng=sZw@mail.gmail.com>
Subject: Re: Terms.getSumTotalTermFreq() in Lucene 4.0
From: =?EUC-KR?B?wOW/67yu?= <need4spd@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=f46d0438936f37396904d2b390b1
X-Virus-Checked: Checked by ClamAV on apache.org

--f46d0438936f37396904d2b390b1
Content-Type: text/plain; charset=EUC-KR
Content-Transfer-Encoding: quoted-printable

Hi,
Ah.. I understand.
If I need this, I'll open an issue.

Thank you very much.

2013/1/5 Michael McCandless <lucene@mikemccandless.com>

> Hi,
>
> The next version won't have a fix for this unless someone opens an
> issue / posts a patch.
>
> Mike McCandless
>
> http://blog.mikemccandless.com
>
> On Fri, Jan 4, 2013 at 7:59 PM, =C0=E5=BF=EB=BC=AE <need4spd@gmail.com> w=
rote:
> > Hello Mike.
> > Thanks for your reply.
> >
> > It's not an important issue.
> > I'll waiting for next release version including this patch.
> >
> > Thanks.
> >
> > 2013/1/4 Michael McCandless <lucene@mikemccandless.com>
> >
> >> The problem is that the TermVectorsFormat for the default codec
> >> (Lucene40TermVectorsFormat) does not store this statistic
> >> per-document, currently.  We could in theory fix this ... maybe open
> >> an issue / make a patch if it's important?
> >>
> >> -1 return value is actually "valid": it means this statistic is not
> >> available.
> >>
> >> Mike McCandless
> >>
> >> http://blog.mikemccandless.com
> >>
> >> On Fri, Jan 4, 2013 at 2:39 AM, =C0=E5=BF=EB=BC=AE <need4spd@gmail.com=
> wrote:
> >> > Hello.
> >> > I have some questions.
> >> >
> >> > Document 1 : "learning perl learning java learning ruby"
> >> > Document 2 : "perl test"
> >> >
> >> > I have indexed this documents, with StoreTermVectors(true) and
> >> > IndexOptions.DOCS_AND_FREQS.
> >> > Field name is "f".
> >> >
> >> > And I executed this code.
> >> >
> >> > IndexReader ir =3D IndexReader.open(dir);
> >> > Terms terms =3D ir.getTermVector(0, "f");
> >> >
> >> > System.out.println(terms.getDocCount()); -> 1
> >> > System.out.println(terms.getSumDocFreq()); -> 4
> >> > System.out.println(terms.getSumTotalTermFreq()); -> -1
> >> >
> >> > I think this terms instance acts like a single-document inverted
> index.
> >> >
> >> > So getDocCount is 1 (single document), and getSumDocFreq is 4.
> (because
> >> > each term's docFreq is 1)
> >> > Is this right?
> >> >
> >> > But I can't understand why getSumTotalTermFreq method return -1.
> >> > In javadoc getSumTotalTermFreq is sum of
> >> >
> >>
> TermsEnum.totalTermFreq<eclipse-javadoc:%E2%98%82=3DaboutLucene4/lib%5C/l=
ucene-core-4.0.0.jar%3Corg.apache.lucene.index(Terms.class%E2%98%83Terms~ge=
tSumTotalTermFreq%E2%98%82TermsEnum%E2%98%82totalTermFreq>
> >> > .
> >> >
> >> > I think in Document1, each term's totalTermFreqs are [learning, 3],
> >> [java,
> >> > 1], [perl, 1], [ruby, 1].
> >> > So getSumTotalTermFreq method's result is 6 not -1.
> >> >
> >> > Why temrs.getSumTotalTermFreq() method return -1?
> >> >
> >> >
> >> > Thanks in advance.
> >> > --
> >> > DEV=BF=EB=BD=C4
> >> > http://devyongsik.tistory.com
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >
> >
> > --
> > DEV=BF=EB=BD=C4
> > http://devyongsik.tistory.com
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


--=20
DEV=BF=EB=BD=C4
http://devyongsik.tistory.com

--f46d0438936f37396904d2b390b1--

From java-user-return-54584-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Jan  7 20:03:02 2013
Return-Path: <java-user-return-54584-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 6BCD9E46A
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon,  7 Jan 2013 20:03:02 +0000 (UTC)
Received: (qmail 46029 invoked by uid 500); 7 Jan 2013 20:03:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45840 invoked by uid 500); 7 Jan 2013 20:03:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45829 invoked by uid 99); 7 Jan 2013 20:03:00 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Jan 2013 20:03:00 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of s.h.m.riyaaz@gmail.com designates 209.85.160.41 as permitted sender)
Received: from [209.85.160.41] (HELO mail-pb0-f41.google.com) (209.85.160.41)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Jan 2013 20:02:53 +0000
Received: by mail-pb0-f41.google.com with SMTP id xa7so10885397pbc.28
        for <java-user@lucene.apache.org>; Mon, 07 Jan 2013 12:02:33 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:reply-to:date:message-id:subject:from:to:content-type;
        bh=bsEAN9xnNHEbGJiDm5o8q3r0mQMLKSj6VlBP5Eil96A=;
        b=JftfatLiGqN7O5enPQsypC/fv1FEhX7CMJYZmAue3uvCsp2eNqHbtoMO+bSXr99BPc
         yLCD7GbFIAPa9qyMix10ks7J6rRFYBgXT47FaT0uvPIU3tN6I9e5yLNYe3DKyoOUqJ7E
         Lpb5WjdsWk2CeEL1KmHl3yn9VaL/IwAWCairJdMFpRckgHoL7mLaWcDlf4mlVIjvVKO7
         u7U5RHksYOuIwNZ6JwQtXdmb+h/5lyAbkU0cvjpvT2Dq63G5MsThYH82si/tzCdwp4qk
         LVlZ9JWZ+IXlXnYQz2CrRb8TtRWknLQ3tMtlXqeCCCCvBhKQJsb/45ZFWa9t8MUcHXIO
         /+Ag==
MIME-Version: 1.0
Received: by 10.66.74.197 with SMTP id w5mr167377477pav.60.1357588953485; Mon,
 07 Jan 2013 12:02:33 -0800 (PST)
Received: by 10.68.222.166 with HTTP; Mon, 7 Jan 2013 12:02:33 -0800 (PST)
Reply-To: s.h.m.riyaaz@gmail.com
Date: Mon, 7 Jan 2013 12:02:33 -0800
Message-ID: <CAHVT_dVQzBfq3Wyfqos7hpfTD+_VsT6JEadD5B_O2JKnrS4rhw@mail.gmail.com>
Subject: suggested linux distribution for best performance of lucene
From: riyaaz shaik <s.h.m.riyaaz@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=f46d042f949e52d22804d2b84f53
X-Virus-Checked: Checked by ClamAV on apache.org

--f46d042f949e52d22804d2b84f53
Content-Type: text/plain; charset=ISO-8859-1

Hi,

Is there any suggested linux OS distribution for running lucene to get best
performance? I found some benchmarks on fedora at
http://people.apache.org/~mikemccand/lucenebench/. But could not find
benchmarks that compared between different distributions like RHEL, ubuntu..

Does the difference in linux distributions matter for lucene's performance?

Thanks,
Riyaaz

--f46d042f949e52d22804d2b84f53--

From java-user-return-54585-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Jan  7 22:40:31 2013
Return-Path: <java-user-return-54585-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id B53ABE5EA
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon,  7 Jan 2013 22:40:31 +0000 (UTC)
Received: (qmail 54016 invoked by uid 500); 7 Jan 2013 22:40:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53851 invoked by uid 500); 7 Jan 2013 22:40:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53837 invoked by uid 99); 7 Jan 2013 22:40:29 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Jan 2013 22:40:29 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of jamalshasha@gmail.com designates 209.85.216.176 as permitted sender)
Received: from [209.85.216.176] (HELO mail-qc0-f176.google.com) (209.85.216.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Jan 2013 22:40:21 +0000
Received: by mail-qc0-f176.google.com with SMTP id n41so13139423qco.21
        for <java-user@lucene.apache.org>; Mon, 07 Jan 2013 14:40:00 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:date:message-id:subject:from:to:content-type;
        bh=aRUcqOBU5AJvhZtdOVWL9sys7Ue+8DX6H2euw++p9FQ=;
        b=T6azGqce5+WUN7f/Rm86SaGQ1OMetaUzD+gucNGlMqxgUG6UpqI9GYQ3Z00Wqcg2YY
         s+hCi2Q19ZDMCmQOu+zlc++nx5Vs+5xSpv2jZ+6uchkHWM2N8OgTlo909rD8YkpAFwdW
         TwZWQPOMNFzA3FKECbvWyvhes15jfqYDAPGW04SXgUWFpaWDOwbaDz/1j31FmBiCLRt+
         ZbnsYyjelFvgWzyV1KQNTon60z1AvjleYt/Vi0RhuhxPpyaeDhGnsvQgdVTleD5FaplN
         LHXDNd8UDrB84tkG4++LuiLNPHXURxTdhdQDkHF0NFg+4Mip3FYh36z72busJDnecuXm
         Lggg==
MIME-Version: 1.0
Received: by 10.224.196.196 with SMTP id eh4mr18030766qab.68.1357598400825;
 Mon, 07 Jan 2013 14:40:00 -0800 (PST)
Received: by 10.229.77.74 with HTTP; Mon, 7 Jan 2013 14:40:00 -0800 (PST)
Date: Mon, 7 Jan 2013 14:40:00 -0800
Message-ID: <CACb0Fn7kSMMAy2MVYJo60WNYDUC1r5rxdmmoy6m42Hg+TOq39g@mail.gmail.com>
Subject: newbie question
From: jamal sasha <jamalshasha@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=20cf300fb4456dc86204d2ba8228
X-Virus-Checked: Checked by ClamAV on apache.org

--20cf300fb4456dc86204d2ba8228
Content-Type: text/plain; charset=ISO-8859-1

Hi,
 I have a quick question.
I ran a map reduce code to process text and get the output in the json
format which is like:
{key: [value1,value2....]}

All of the above are ids and not text anymore.
There is offcourse a mapping from word:key space
Now, I want to do the following lookup.

Given a new document.. it will have words.. some new some old word.

If its an old word then offcourse there will be a an existing mapping and
then used that key to this word.
After that, calculate some new values and then go back to earlier processed
json output and modify the values with new values
else add new key:[values pair] if it is a new word.

Will lucene be able to help me here?
Jamal

--20cf300fb4456dc86204d2ba8228--

From java-user-return-54586-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Jan  8 17:49:35 2013
Return-Path: <java-user-return-54586-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 14809E223
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue,  8 Jan 2013 17:49:35 +0000 (UTC)
Received: (qmail 29088 invoked by uid 500); 8 Jan 2013 17:49:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29007 invoked by uid 500); 8 Jan 2013 17:49:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28999 invoked by uid 99); 8 Jan 2013 17:49:32 -0000
Received: from minotaur.apache.org (HELO minotaur.apache.org) (140.211.11.9)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Jan 2013 17:49:32 +0000
Received: from localhost (HELO [192.168.1.73]) (127.0.0.1)
  (smtp-auth username gsingers, mechanism plain)
  by minotaur.apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Jan 2013 17:49:32 +0000
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Apple Message framework v1283)
Subject: Re: Lucene for a linguistic corpus
From: Grant Ingersoll <gsingers@apache.org>
In-Reply-To: <115121357389415@webcorp2g.yandex-team.ru>
Date: Tue, 8 Jan 2013 12:49:28 -0500
Content-Transfer-Encoding: quoted-printable
Message-Id: <5E420646-FE07-4588-A927-A4E006A0CBCA@apache.org>
References: <115121357389415@webcorp2g.yandex-team.ru>
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.1283)

Hi Igor,

On Jan 5, 2013, at 7:36 AM, Igor Shalyminov wrote:

> Hello!
>=20
> I'm considering Lucene as an engine for linguistic corpus search.
>=20
> There's a feature in this search: each word is treated as ambiguuos - =
i.e., it has got multiple sets of grammatical annotations (there's a =
fixed maximum of these sets number - a word can have at most 8 parses).
> For an example, in the phrase "A man saw a elephant" "saw" has =
annotations as follows (we also say that its position in index is 1234):
>=20
> {lemma: see, pos: verb, tense: past}, {lemma: saw, pos: noun, number: =
singular}
>=20
> Normally, we index each annotation as an independent feature (i.e., =
there will be posting lists for "lemma", "pos", "number", etc.). And the =
problem is, for the query "pos =3D Verb AND number =3D Singular" we =
DON'T want to find the position 1234 because they appeared in different =
parses.
>=20
> As a solution one may consider indexing all annotation subsets (this =
would increase index size and queries complicatedness), searching for =
regexps (but the search will be dead slow)

Might be worth trying, esp. in Lucene 4 with some of the new automaton =
stuff.  At least you will have a baseline.

> , or indexing parses, not words (but queries with given distance =
between words will break up) - these solutions are not acceptable.
>=20
> I think, it would be more effective to insert parse index in each =
attribute's posting list entry as a payload and use it at the =
intersectiion stage. E.g., we have a posting list for 'pos =3D Verb' =
like ...|...|1.1234|...|..., and a posting list for 'number =3D =
Singular': ...|...|2.1234|...|... While processing a query like 'pos =3D =
Verb AND number =3D singular' at all stages of posting list processing =
'x.1234' will be accepted until the intersection stage at which they =
will be rejected because of non-corresponding parse indexes.
>=20
> I am also new to Lucene, so could you please tell me if this idea is =
implementable in Lucene, and how much effort does the implementation =
take?

You might be able to insert your parses as payloads on a term and then =
implement a scorer extension (override computePayloadFactor) to handle =
your join cases for a given word.  You may also need to extend =
PayloadQuery or PayloadTermQuery.  Note, I don't know how well this will =
perform.

So, "saw" would have the two lemmas above and then your logic for the =
new Query class would be able to distinguish, via the two payloads that =
neither satisfies the Verb, singular option and would then return a =
score of 0.  There is likely other work involved to make sure it all =
works appropriately, but that is where I would start.  Others might have =
different approaches.

I'd have to play around w/ the code a bit more to make this work, but I =
think it is doable in Lucene.  I can't say how long it would take you, =
b/c I have no clue as to what you know about Lucene.  For someone who =
knows Lucene, it's probably anywhere from a few days to a week or two. =20=


-Grant=

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54587-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Jan  8 18:26:16 2013
Return-Path: <java-user-return-54587-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 6BC11D109
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue,  8 Jan 2013 18:26:16 +0000 (UTC)
Received: (qmail 49172 invoked by uid 500); 8 Jan 2013 18:26:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49093 invoked by uid 500); 8 Jan 2013 18:26:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 30708 invoked by uid 99); 8 Jan 2013 18:20:26 -0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,SPF_NEUTRAL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: 216.139.236.26 is neither permitted nor denied by domain of saisantoshi76@gmail.com)
Date: Tue, 8 Jan 2013 10:20:00 -0800 (PST)
From: saisantoshi <saisantoshi76@gmail.com>
To: java-user@lucene.apache.org
Message-ID: <1357669200878-4031654.post@n3.nabble.com>
Subject: Lucene support for multi byte characters : 2.4.0 (version).
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

We are using Lucene (2.4.0 libraries) for implementing search in our
application. We are using Standard Analyzer for Analyzer part.  

Our application has a documents upload feature which lets you upload the
documents and be able to put in some keywords (while uploading it). When we
search (using the keywords), the search will retrieve the documents based on
the keywords.

The problem that we are facing is the search works fine if the keywords are
in English or Simplified Chinese but is not supporting Japanese. 

I am not sure if its the problem with the Analyzer that we are using or is
not being supported in 2.4.0 version (Japanese Characters). I did find the
following below doing  a Google search.

  https://issues.apache.org/jira/browse/LUCENE-2847 ( support all of the
unicode)
 
http://lucene.472066.n3.nabble.com/which-unicode-version-is-supported-with-lucene-td2574222.html

We are not tokenizing the document, we are only tokenizing the keywords
added while uploading the document.

document.add(new Field(field.getKeyword(), value, Field.Store.NO,
Field.Index.ANALYZED));

Do you think upgrading to the latest version of the Lucene would solve the
issue? or do we need to use special analyzers for each specific language?
Does the Standard Analyzer does not support Unicode characters?

Any thoughts on this is much appreciated?

Thanks,
Sai



--
View this message in context: http://lucene.472066.n3.nabble.com/Lucene-support-for-multi-byte-characters-2-4-0-version-tp4031654.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54588-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Jan  8 18:47:31 2013
Return-Path: <java-user-return-54588-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 74E34D57A
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue,  8 Jan 2013 18:47:31 +0000 (UTC)
Received: (qmail 27705 invoked by uid 500); 8 Jan 2013 18:47:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27632 invoked by uid 500); 8 Jan 2013 18:47:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27622 invoked by uid 99); 8 Jan 2013 18:47:29 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Jan 2013 18:47:29 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [134.226.56.6] (HELO mercury.scss.tcd.ie) (134.226.56.6)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Jan 2013 18:47:21 +0000
Received: from localhost (localhost [127.0.0.1])
	by mercury.scss.tcd.ie (Postfix) with ESMTP id E5B80BE1C
	for <java-user@lucene.apache.org>; Tue,  8 Jan 2013 18:46:59 +0000 (GMT)
X-Virus-Scanned: Debian amavisd-new at scss.tcd.ie
Received: from mercury.scss.tcd.ie ([127.0.0.1])
	by localhost (mercury.scss.tcd.ie [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id UZtifrtS8jjC for <java-user@lucene.apache.org>;
	Tue,  8 Jan 2013 18:46:59 +0000 (GMT)
Received: from shiraz.cs.tcd.ie (unknown [IPv6:2001:770:10:200:21d:9ff:fe28:378e])
	by mercury.scss.tcd.ie (Postfix) with ESMTPSA id 6840CBDDC
	for <java-user@lucene.apache.org>; Tue,  8 Jan 2013 18:46:59 +0000 (GMT)
Message-ID: <50EC69A2.6090807@cs.tcd.ie>
Date: Tue, 08 Jan 2013 18:46:58 +0000
From: Peter Lavin <lavinp@cs.tcd.ie>
Reply-To: lavinp@cs.tcd.ie
Organization: School of Computer Science and Statistics, Trinity College Dublin
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:10.0.11) Gecko/20121120 Thunderbird/10.0.11
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Differences in MLT Query Terms Question
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org


Dear Users,

I am running some simple experiments with Lucene and am seeing something 
I don't understand.

I have 16 text files on 4 different topics, ranging in size from 50-900 
KB.  When I index all 16 of these and run an MLT query based on one of 
the indexed documents, I get an expected result (i.e. similar topics are 
found).

When I reduce the number of text files to 4 and index them (having taken 
care to overwriting the previous index files), and then run the same MLT 
query (based on the same document from the index), I get slightly 
different scores. I'm assuming this is because the IDF is now different 
because there is less documents.

For each run, I have set the max number of terms as...
mlt.setMaxQueryTerms(100)

However, when I compare the terms which get used for the MLT query on 
the 16 document index and the 4 document index, they are slightly 
different. I've printed, parsed and sorted them into two columns of a 
CSV file. I've pasted a small part of it at the end of this email.

My Question(s)...
1) Can anybody explain why the set of terms used for the MLT query is 
different when a file from an index of 16 documents versus 4 documents 
is used?

2) Am I right in assuming that the reason for slightly different scores 
in the IDF, or could it be this slight difference in the sets of terms 
used (or possibly both)?

regards,
Peter


-- 
with best regards,
Peter Lavin,
PhD Candidate,
CAG - Computer Architecture & Grid Research Group,
Lloyd Institute, 005,
Trinity College Dublin, Ireland.
+353 1 8961536



"about","about"
"affordable","affordable"
"agents","agents"
"aids","aids"
"architecture","architecture"
"arv","based"
"based","blog"
"blog","board"
"board","business"
"business","care"
"care","commemorates"
"commemorates","contacts"
"contacts","contributions"
"contributions","coordinating"
"coordinating","core"
"core","countries"
"countries","country"
"country","data"
"data","decisions"
"decisions","details"
"details","disbursements"
"disbursements","documents"
"documents","donors"

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54589-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Jan  8 19:30:55 2013
Return-Path: <java-user-return-54589-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 500DAE5D4
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue,  8 Jan 2013 19:30:55 +0000 (UTC)
Received: (qmail 72574 invoked by uid 500); 8 Jan 2013 19:30:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72504 invoked by uid 500); 8 Jan 2013 19:30:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72460 invoked by uid 99); 8 Jan 2013 19:30:53 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Jan 2013 19:30:53 +0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,SPF_NEUTRAL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: 216.139.236.26 is neither permitted nor denied by domain of saisantoshi76@gmail.com)
Received: from [216.139.236.26] (HELO sam.nabble.com) (216.139.236.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Jan 2013 19:30:46 +0000
Received: from ben.nabble.com ([192.168.236.152])
	by sam.nabble.com with esmtp (Exim 4.72)
	(envelope-from <saisantoshi76@gmail.com>)
	id 1TsesT-0005St-R0
	for java-user@lucene.apache.org; Tue, 08 Jan 2013 11:30:25 -0800
Date: Tue, 8 Jan 2013 11:30:25 -0800 (PST)
From: saisantoshi <saisantoshi76@gmail.com>
To: java-user@lucene.apache.org
Message-ID: <1357673425803-4031660.post@n3.nabble.com>
Subject: Is StandardAnalyzer good enough for multi languages...
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

DoesLucene StandardAnalyzer work for all the languagues for tokenizing before
indexing (since we are using java, I think the content is converted to UTF-8
before tokenizing/indeing)? or do we need to use special analyzers for each
of the language.  In this case, if a document has a mixed case ( english +
Japanese), what analyzer should we use and how can we figure it out
dynamically before indexing?

Also, while searching if the query text contains (both english and
Japanese), how does this work? Any criteria in choosing the analyzers?

Thanks,
Sai



--
View this message in context: http://lucene.472066.n3.nabble.com/Is-StandardAnalyzer-good-enough-for-multi-languages-tp4031660.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54590-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Jan  8 23:35:53 2013
Return-Path: <java-user-return-54590-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id B59D7DBC1
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue,  8 Jan 2013 23:35:53 +0000 (UTC)
Received: (qmail 39298 invoked by uid 500); 8 Jan 2013 23:35:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39174 invoked by uid 500); 8 Jan 2013 23:35:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39163 invoked by uid 99); 8 Jan 2013 23:35:48 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Jan 2013 23:35:48 +0000
X-ASF-Spam-Status: No, hits=2.1 required=5.0
	tests=AXB_XMAILER_MIMEOLE_OL_B054A,RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of SRS0=d06t2a=LB=basetechnology.com=jack@yourhostingaccount.com designates 65.254.253.133 as permitted sender)
Received: from [65.254.253.133] (HELO mailout16.yourhostingaccount.com) (65.254.253.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Jan 2013 23:35:39 +0000
Received: from mailscan17.yourhostingaccount.com ([10.1.15.17] helo=mailscan17.yourhostingaccount.com)
	by mailout16.yourhostingaccount.com with esmtp (Exim)
	id 1TsihR-0008WB-D1
	for java-user@lucene.apache.org; Tue, 08 Jan 2013 18:35:17 -0500
Received: from impout02.yourhostingaccount.com ([10.1.55.2] helo=impout02.yourhostingaccount.com)
	by mailscan17.yourhostingaccount.com with esmtp (Exim)
	id 1TsihQ-0004E7-VC
	for java-user@lucene.apache.org; Tue, 08 Jan 2013 18:35:16 -0500
Received: from authsmtp03.yourhostingaccount.com ([10.1.18.3])
	by impout02.yourhostingaccount.com with NO UCE
	id lbbH1k00203yUm201bbHay; Tue, 08 Jan 2013 18:35:17 -0500
X-Authority-Analysis: v=2.0 cv=HIVB5/Rv c=1 sm=1
 a=yH02RjTyxywMAIqhn74x1Q==:17 a=aQzbgH187woA:10 a=0SNBOX-QYhAA:10
 a=3jZET7lWBKwA:10 a=8nJEP1OIZ-IA:10 a=jvYhGVW7AAAA:8 a=kszv6zbPfrQA:10
 a=mV9VRH-2AAAA:8 a=mrPWvSw5qky04ldxABYA:9 a=wPNLvfGTeEIA:10
 a=rPPIOp_hnv7j-PFr:21 a=f52PJeOsamsnTCL6:21 a=maIvl2Yd+fJND/e85XqkCw==:117
X-EN-OrigOutIP: 10.1.18.3
X-EN-IMPSID: lbbH1k00203yUm201bbHay
Received: from 207-237-113-14.c3-0.nyr-ubr1.nyr.ny.cable.rcn.com ([207.237.113.14] helo=JackKrupansky)
	by authsmtp03.yourhostingaccount.com with esmtpa (Exim)
	id 1TsihN-0001ag-Tj
	for java-user@lucene.apache.org; Tue, 08 Jan 2013 18:35:14 -0500
Message-ID: <FB2B86F6A67C41A291748DFDDAA05B7E@JackKrupansky>
From: "Jack Krupansky" <jack@basetechnology.com>
To: <java-user@lucene.apache.org>
References: <50EC69A2.6090807@cs.tcd.ie>
In-Reply-To: <50EC69A2.6090807@cs.tcd.ie>
Subject: Re: Differences in MLT Query Terms Question
Date: Tue, 8 Jan 2013 18:34:53 -0500
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=response
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
Importance: Normal
X-Mailer: Microsoft Windows Live Mail 15.4.3555.308
X-MimeOLE: Produced By Microsoft MimeOLE V15.4.3555.308
X-EN-UserInfo: e0a4b55451ed9f27313ebf02e3d4348d:fc4a93e1349e680c52bdd723c0ab3ef6
X-EN-AuthUser: jack@basetechnology.com
Sender:  "Jack Krupansky" <jack@basetechnology.com>
X-EN-OrigIP: 207.237.113.14
X-EN-OrigHost: 207-237-113-14.c3-0.nyr-ubr1.nyr.ny.cable.rcn.com
X-Virus-Checked: Checked by ClamAV on apache.org

The term "arv" is on the first list, but not the second. Maybe it's document 
frequency fell below the setting for minimum document frequency on the 
second run.

Or, maybe the minimum word length was set to 4 or more on the second run.

Are you using MoreLikeThisQuery or directly using MoreLikeThis?

Or, possibly "arv" appears later in a document on the second run, after the 
number of tokens specified by maxNumTokensParsed.

-- Jack Krupansky

-----Original Message----- 
From: Peter Lavin
Sent: Tuesday, January 08, 2013 1:46 PM
To: java-user@lucene.apache.org
Subject: Differences in MLT Query Terms Question


Dear Users,

I am running some simple experiments with Lucene and am seeing something
I don't understand.

I have 16 text files on 4 different topics, ranging in size from 50-900
KB.  When I index all 16 of these and run an MLT query based on one of
the indexed documents, I get an expected result (i.e. similar topics are
found).

When I reduce the number of text files to 4 and index them (having taken
care to overwriting the previous index files), and then run the same MLT
query (based on the same document from the index), I get slightly
different scores. I'm assuming this is because the IDF is now different
because there is less documents.

For each run, I have set the max number of terms as...
mlt.setMaxQueryTerms(100)

However, when I compare the terms which get used for the MLT query on
the 16 document index and the 4 document index, they are slightly
different. I've printed, parsed and sorted them into two columns of a
CSV file. I've pasted a small part of it at the end of this email.

My Question(s)...
1) Can anybody explain why the set of terms used for the MLT query is
different when a file from an index of 16 documents versus 4 documents
is used?

2) Am I right in assuming that the reason for slightly different scores
in the IDF, or could it be this slight difference in the sets of terms
used (or possibly both)?

regards,
Peter


-- 
with best regards,
Peter Lavin,
PhD Candidate,
CAG - Computer Architecture & Grid Research Group,
Lloyd Institute, 005,
Trinity College Dublin, Ireland.
+353 1 8961536



"about","about"
"affordable","affordable"
"agents","agents"
"aids","aids"
"architecture","architecture"
"arv","based"
"based","blog"
"blog","board"
"board","business"
"business","care"
"care","commemorates"
"commemorates","contacts"
"contacts","contributions"
"contributions","coordinating"
"coordinating","core"
"core","countries"
"countries","country"
"country","data"
"data","decisions"
"decisions","details"
"details","disbursements"
"disbursements","documents"
"documents","donors"

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54591-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Jan  8 23:44:10 2013
Return-Path: <java-user-return-54591-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 5BD7EDC09
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue,  8 Jan 2013 23:44:10 +0000 (UTC)
Received: (qmail 73973 invoked by uid 500); 8 Jan 2013 23:44:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73866 invoked by uid 500); 8 Jan 2013 23:44:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73848 invoked by uid 99); 8 Jan 2013 23:44:07 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Jan 2013 23:44:07 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of trejkaz@trypticon.org designates 209.85.220.172 as permitted sender)
Received: from [209.85.220.172] (HELO mail-vc0-f172.google.com) (209.85.220.172)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Jan 2013 23:43:59 +0000
Received: by mail-vc0-f172.google.com with SMTP id fw7so1015608vcb.17
        for <java-user@lucene.apache.org>; Tue, 08 Jan 2013 15:43:38 -0800 (PST)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=x-received:mime-version:in-reply-to:references:date:message-id
         :subject:from:to:content-type:x-gm-message-state;
        bh=Rhwh9hv7Ex6+UYL/BMycnZU4dtGUH3g+R2rxXzCeL0I=;
        b=MBhqFj9wXRVmDsBzjDB2J5UFWmMolSoioVDrCjPbBxCECdLtzzX4iEq8H8kH9Kcpv0
         Va/C9Gc2fvCpOZ/OJLBQVhyIXm65tepxE2EGH4gduYG632GHi1qy6k9R1OS/VmF0kQRg
         k2EKWjj7qB7GrZlCEwOcONRc5N+3Rw3hcVAYzNKYOxJ8cpED16KCgzodDsUsWX6uvdIw
         Gflj5eXGygZw5KSev/H7wWsz2WTsWCpBZ9psC17VgksTHukSLU6xs4Jn+PbscCnZCyCz
         0p+qBoZz5dmjUFwn1oIfdjgA7XVlaqwv6ljH8Gbu6T/KkFWSSNnfvj0uMFJ8CnmbGMZg
         mb9A==
X-Received: by 10.52.97.7 with SMTP id dw7mr77153327vdb.38.1357688618402;
        Tue, 08 Jan 2013 15:43:38 -0800 (PST)
Received: from mail-vc0-f182.google.com (mail-vc0-f182.google.com [209.85.220.182])
        by mx.google.com with ESMTPS id g5sm51170986vez.6.2013.01.08.15.43.36
        (version=SSLv3 cipher=OTHER);
        Tue, 08 Jan 2013 15:43:37 -0800 (PST)
Received: by mail-vc0-f182.google.com with SMTP id fy27so1011099vcb.41
        for <java-user@lucene.apache.org>; Tue, 08 Jan 2013 15:43:36 -0800 (PST)
MIME-Version: 1.0
Received: by 10.220.241.141 with SMTP id le13mr86272965vcb.26.1357688614972;
 Tue, 08 Jan 2013 15:43:34 -0800 (PST)
Received: by 10.58.249.198 with HTTP; Tue, 8 Jan 2013 15:43:34 -0800 (PST)
In-Reply-To: <1357673425803-4031660.post@n3.nabble.com>
References: <1357673425803-4031660.post@n3.nabble.com>
Date: Wed, 9 Jan 2013 10:43:34 +1100
Message-ID: <CADuAvzcu+aFQZDcyDv=waF_AygGH9yVCk0Wh-GA0fu8D1uh-9g@mail.gmail.com>
Subject: Re: Is StandardAnalyzer good enough for multi languages...
From: Trejkaz <trejkaz@trypticon.org>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
X-Gm-Message-State: ALoCoQk5SplEtoOSk+oQa29Xe4/KJdt1CgGfE1/1O8x9XMsERBP6qTSRkn+/23nTugAX6HifPcl8
X-Virus-Checked: Checked by ClamAV on apache.org

On Wed, Jan 9, 2013 at 6:30 AM, saisantoshi <saisantoshi76@gmail.com> wrote:
> DoesLucene StandardAnalyzer work for all the languagues for tokenizing before
> indexing (since we are using java, I think the content is converted to UTF-8
> before tokenizing/indeing)?

No. There are multiple cases where it chooses not to break something
which it should break. Some of these cases even result in undesirable
behaviour for English, so I would be surprised if there were even a
single language which it handles acceptably.

It does follow "Unicode standards" for how to tokenise text, but these
standards were written by people who didn't quite know what they were
doing so it's really just passing the buck. I don't think Lucene
should have chosen to follow that standard in the first place, because
it rarely (if ever) gives acceptable results.

The worst examples for English, at least for us, were that it does not
break on colon (:) or underscore (_).

Colon was explained by some languages using it like an apostrophe.
Personally I think you should break on an apostrophe as well, so I'm
not really happy with this reasoning, but OK.

Underscore was completely baffling to me so I asked someone at Unicode
about it. They explained that it was because it was "used by
programmers to separate words in identifiers". This explanation is
exactly as stupid as it sounds and I hope they will realise their
stupidity some day.

> or do we need to use special analyzers for each of the language.

I do think that StandardTokenizer at least can form a good base for an
analyser. You just have to add a ton of filters to fix each additional
case you find where people don't like it. For instance, it returns
runs of Katakana as a single token, but if you did that, people
wouldn't find what they are searching for, so you make a filter to
split that back out into multiple tokens.

It would help if there were a single, core-maintained analyser for
"StandardAnalyzer with all the things people hate fixed"... but I
don't know if anyone is interested in maintaining it.

> In this case, if a document has a mixed case ( english +
> Japanese), what analyzer should we use and how can we figure it out
> dynamically before indexing?

Some language detection libraries will give you back the fragments in
the text and tell you which language is used for each fragment, so
that is totally a viable option as well. You'd just make your own
analyser which concatenates the results.

> Also, while searching if the query text contains (both english and
> Japanese), how does this work? Any criteria in choosing the analyzers?

I guess you could either ask the user what language they're searching
in or look at what characters are in their query and decide which
language(s) it matches and build the query from there. It might match
multiple...

TX

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54592-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Jan  8 23:54:08 2013
Return-Path: <java-user-return-54592-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id D3918DC58
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue,  8 Jan 2013 23:54:08 +0000 (UTC)
Received: (qmail 10621 invoked by uid 500); 8 Jan 2013 23:54:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10577 invoked by uid 500); 8 Jan 2013 23:54:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10563 invoked by uid 99); 8 Jan 2013 23:54:06 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Jan 2013 23:54:06 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [64.78.17.17] (HELO EXHUB018-2.exch018.msoutlookonline.net) (64.78.17.17)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Jan 2013 23:54:00 +0000
Received: from EXVMBX018-1.exch018.msoutlookonline.net ([64.78.17.47]) by
 EXHUB018-2.exch018.msoutlookonline.net ([64.78.17.17]) with mapi; Tue, 8 Jan
 2013 15:53:39 -0800
From: Paul Hill <paul@metajure.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Tue, 8 Jan 2013 15:54:58 -0800
Subject: RE: Is StandardAnalyzer good enough for multi languages...
Thread-Topic: Is StandardAnalyzer good enough for multi languages...
Thread-Index: Ac3t+g6cvHn7tKLTTbKdDmJXp6oL7QAAOcHg
Message-ID: <C8508767C15DBF40A21693142739EA8D7BC7C7BE55@EXVMBX018-1.exch018.msoutlookonline.net>
References: <1357673425803-4031660.post@n3.nabble.com>
 <CADuAvzcu+aFQZDcyDv=waF_AygGH9yVCk0Wh-GA0fu8D1uh-9g@mail.gmail.com>
In-Reply-To: <CADuAvzcu+aFQZDcyDv=waF_AygGH9yVCk0Wh-GA0fu8D1uh-9g@mail.gmail.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

VGhlIElDVSBwcm9qZWN0ICggaHR0cDovL3NpdGUuaWN1LXByb2plY3Qub3JnLyApIGhhcyBBbmFs
eXplcnMgZm9yIEx1Y2VuZSBhbmQgaXQgaGFzIGJlZW4gcG9ydGVkIHRvIEVsYXN0aWNTZWFyY2gu
ICBNYXliZSB0aG9zZSBpbnRlZ3JhdGUgYmV0dGVyLg0KDQpBcyB0byBub3QgZG9pbmcgc29tZSB0
b2tlbml6YXRpb24sIEkgd291bGQgdGhpbmsgYW4gZXh0cmEgdG9rZW5pemVyIGluIHlvdSBjaGFp
biB3b3VsZCBiZSBqdXN0IHRoZSB0aGluZy4NCg0KLVBhdWwNCg0KPiAtLS0tLU9yaWdpbmFsIE1l
c3NhZ2UtLS0tLQ0KPiBGcm9tOiBUcmVqa2F6IFttYWlsdG86dHJlamthekB0cnlwdGljb24ub3Jn
XQ0KPiBTZW50OiBUdWVzZGF5LCBKYW51YXJ5IDA4LCAyMDEzIDM6NDQgUE0NCj4gVG86IGphdmEt
dXNlckBsdWNlbmUuYXBhY2hlLm9yZw0KPiBTdWJqZWN0OiBSZTogSXMgU3RhbmRhcmRBbmFseXpl
ciBnb29kIGVub3VnaCBmb3IgbXVsdGkgbGFuZ3VhZ2VzLi4uDQo+IA0KPiBPbiBXZWQsIEphbiA5
LCAyMDEzIGF0IDY6MzAgQU0sIHNhaXNhbnRvc2hpIDxzYWlzYW50b3NoaTc2QGdtYWlsLmNvbT4g
d3JvdGU6DQo+ID4gRG9lc0x1Y2VuZSBTdGFuZGFyZEFuYWx5emVyIHdvcmsgZm9yIGFsbCB0aGUg
bGFuZ3VhZ3VlcyBmb3IgdG9rZW5pemluZw0KPiA+IGJlZm9yZSBpbmRleGluZyAoc2luY2Ugd2Ug
YXJlIHVzaW5nIGphdmEsIEkgdGhpbmsgdGhlIGNvbnRlbnQgaXMNCj4gPiBjb252ZXJ0ZWQgdG8g
VVRGLTggYmVmb3JlIHRva2VuaXppbmcvaW5kZWluZyk/DQo+IA0KPiBOby4gVGhlcmUgYXJlIG11
bHRpcGxlIGNhc2VzIHdoZXJlIGl0IGNob29zZXMgbm90IHRvIGJyZWFrIHNvbWV0aGluZyB3aGlj
aCBpdCBzaG91bGQgYnJlYWsuIFNvbWUgb2YNCj4gdGhlc2UgY2FzZXMgZXZlbiByZXN1bHQgaW4g
dW5kZXNpcmFibGUgYmVoYXZpb3VyIGZvciBFbmdsaXNoLCBzbyBJIHdvdWxkIGJlIHN1cnByaXNl
ZCBpZiB0aGVyZSB3ZXJlIGV2ZW4gYQ0KPiBzaW5nbGUgbGFuZ3VhZ2Ugd2hpY2ggaXQgaGFuZGxl
cyBhY2NlcHRhYmx5Lg0K
DQotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0NClRvIHVuc3Vic2NyaWJlLCBlLW1haWw6IGphdmEtdXNlci11
bnN1YnNjcmliZUBsdWNlbmUuYXBhY2hlLm9yZw0KRm9yIGFkZGl0aW9uYWwgY29tbWFuZHMs
IGUtbWFpbDogamF2YS11c2VyLWhlbHBAbHVjZW5lLmFwYWNoZS5vcmcNCg0K

From java-user-return-54593-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Jan  8 23:57:55 2013
Return-Path: <java-user-return-54593-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id F25D9DC84
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue,  8 Jan 2013 23:57:55 +0000 (UTC)
Received: (qmail 23108 invoked by uid 500); 8 Jan 2013 23:57:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23056 invoked by uid 500); 8 Jan 2013 23:57:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23047 invoked by uid 99); 8 Jan 2013 23:57:53 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Jan 2013 23:57:53 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of sarowe@gmail.com designates 209.85.216.48 as permitted sender)
Received: from [209.85.216.48] (HELO mail-qa0-f48.google.com) (209.85.216.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Jan 2013 23:57:47 +0000
Received: by mail-qa0-f48.google.com with SMTP id l8so234796qaq.14
        for <java-user@lucene.apache.org>; Tue, 08 Jan 2013 15:57:27 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=x-received:content-type:mime-version:subject:from:in-reply-to:date
         :content-transfer-encoding:message-id:references:to:x-mailer;
        bh=WaykXs3UQw5TMJknTUVFDT4F44qCQWXoV/7MvoXYg1k=;
        b=0C3kzMcbzGACZ+FjlTmJ/PGvi7/3eriU/E2qb8DerHsPpYF5H3UjrZEsUquYBckvqH
         /mCTYdJiJgRJhqUNtFprQOAG8l+hSIq1xCwkkKO2lJ2j6MCnPELAUN516hK0+//utO+2
         y/CWuqCsOTP8WEMBsdMdpHascLws1KK4epQloNeMuJ5BclZ2tsoazaI3HolQP+3tRoEh
         gk+TJdy5Io3y0VB6cyG+u/lnshX5yBTVe+pV+jtdyQCDmNgJh5D/umGdixhfW+RmVdO2
         2iDnis79YHBWHQH4nmq34YCdpPTXC1BWTM8HL0PX9jgXxmY9MNqEK7j6qtB4m1yLo8+v
         qI8A==
X-Received: by 10.224.183.75 with SMTP id cf11mr48639902qab.82.1357689447246;
        Tue, 08 Jan 2013 15:57:27 -0800 (PST)
Received: from [192.168.1.204] (cpe-67-249-104-72.twcny.res.rr.com. [67.249.104.72])
        by mx.google.com with ESMTPS id x4sm17900162qeu.7.2013.01.08.15.57.26
        (version=SSLv3 cipher=OTHER);
        Tue, 08 Jan 2013 15:57:26 -0800 (PST)
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Mac OS X Mail 6.2 \(1499\))
Subject: Re: Is StandardAnalyzer good enough for multi languages...
From: Steve Rowe <sarowe@gmail.com>
In-Reply-To: <CADuAvzcu+aFQZDcyDv=waF_AygGH9yVCk0Wh-GA0fu8D1uh-9g@mail.gmail.com>
Date: Tue, 8 Jan 2013 18:57:25 -0500
Content-Transfer-Encoding: quoted-printable
Message-Id: <3F8A3702-DC59-4FE4-935E-BA71B1ECD22D@gmail.com>
References: <1357673425803-4031660.post@n3.nabble.com> <CADuAvzcu+aFQZDcyDv=waF_AygGH9yVCk0Wh-GA0fu8D1uh-9g@mail.gmail.com>
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.1499)
X-Virus-Checked: Checked by ClamAV on apache.org

Trejkaz (and maybe Sai too): ICUTokenizer in Lucene's icu module may be =
be of interest to you, along with the token filters in that same module. =
- Steve
=20
On Jan 8, 2013, at 6:43 PM, Trejkaz <trejkaz@trypticon.org> wrote:

> On Wed, Jan 9, 2013 at 6:30 AM, saisantoshi <saisantoshi76@gmail.com> =
wrote:
>> DoesLucene StandardAnalyzer work for all the languagues for =
tokenizing before
>> indexing (since we are using java, I think the content is converted =
to UTF-8
>> before tokenizing/indeing)?
>=20
> No. There are multiple cases where it chooses not to break something
> which it should break. Some of these cases even result in undesirable
> behaviour for English, so I would be surprised if there were even a
> single language which it handles acceptably.
>=20
> It does follow "Unicode standards" for how to tokenise text, but these
> standards were written by people who didn't quite know what they were
> doing so it's really just passing the buck. I don't think Lucene
> should have chosen to follow that standard in the first place, because
> it rarely (if ever) gives acceptable results.
>=20
> The worst examples for English, at least for us, were that it does not
> break on colon (:) or underscore (_).
>=20
> Colon was explained by some languages using it like an apostrophe.
> Personally I think you should break on an apostrophe as well, so I'm
> not really happy with this reasoning, but OK.
>=20
> Underscore was completely baffling to me so I asked someone at Unicode
> about it. They explained that it was because it was "used by
> programmers to separate words in identifiers". This explanation is
> exactly as stupid as it sounds and I hope they will realise their
> stupidity some day.
>=20
>> or do we need to use special analyzers for each of the language.
>=20
> I do think that StandardTokenizer at least can form a good base for an
> analyser. You just have to add a ton of filters to fix each additional
> case you find where people don't like it. For instance, it returns
> runs of Katakana as a single token, but if you did that, people
> wouldn't find what they are searching for, so you make a filter to
> split that back out into multiple tokens.
>=20
> It would help if there were a single, core-maintained analyser for
> "StandardAnalyzer with all the things people hate fixed"... but I
> don't know if anyone is interested in maintaining it.
>=20
>> In this case, if a document has a mixed case ( english +
>> Japanese), what analyzer should we use and how can we figure it out
>> dynamically before indexing?
>=20
> Some language detection libraries will give you back the fragments in
> the text and tell you which language is used for each fragment, so
> that is totally a viable option as well. You'd just make your own
> analyser which concatenates the results.
>=20
>> Also, while searching if the query text contains (both english and
>> Japanese), how does this work? Any criteria in choosing the =
analyzers?
>=20
> I guess you could either ask the user what language they're searching
> in or look at what characters are in their query and decide which
> language(s) it matches and build the query from there. It might match
> multiple...
>=20
> TX
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54594-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jan  9 03:54:03 2013
Return-Path: <java-user-return-54594-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 47C3FE548
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed,  9 Jan 2013 03:54:03 +0000 (UTC)
Received: (qmail 38275 invoked by uid 500); 9 Jan 2013 03:54:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37926 invoked by uid 500); 9 Jan 2013 03:54:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37872 invoked by uid 99); 9 Jan 2013 03:53:58 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jan 2013 03:53:58 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.210.48] (HELO mail-da0-f48.google.com) (209.85.210.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jan 2013 03:53:48 +0000
Received: by mail-da0-f48.google.com with SMTP id k18so522074dae.35
        for <java-user@lucene.apache.org>; Tue, 08 Jan 2013 19:53:27 -0800 (PST)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=x-received:message-id:date:from:user-agent:mime-version:to:subject
         :content-type:content-transfer-encoding:x-gm-message-state;
        bh=RvLbQhaGO7PvvHF+odavc67T7HjtvrwDX9X2NZjZLjM=;
        b=VZJ6IsfZ0WsN/xoPwwicqcP91BCCqG35L7nNVG9BttJcOOB1oHVcmwrINxDNYgI2o9
         H+5btZ63Y3oHJ+LUejLgTtJmZmdiuqdC41uHz13BCCmMcGgFQHDuQImi8QIBeGTQtznM
         c41SYml02XRCEvQUxp0GADMokfrGcO4qp7abX5q/OqnGeU2XxLiE0tpl6yq2jBUDlWa2
         30pMrVRdMjoqx3JORQKTXWOdw43WPiMfym0gLdelMcuETxo7OIrLjfWZOKnmakTD/iRW
         mR2CFUoOx7IQGK18CZqCn3PazdqHQ73shkVcwqW6b/sFv5VDdAtMQ9emmRaPcAThmnh7
         LWHw==
X-Received: by 10.68.217.42 with SMTP id ov10mr15193243pbc.51.1357703606140;
        Tue, 08 Jan 2013 19:53:26 -0800 (PST)
Received: from [192.168.0.11] (cpe-98-145-203-109.socal.res.rr.com. [98.145.203.109])
        by mx.google.com with ESMTPS id o6sm41929987paw.37.2013.01.08.19.53.24
        (version=SSLv3 cipher=OTHER);
        Tue, 08 Jan 2013 19:53:25 -0800 (PST)
Message-ID: <50ECE9A8.9030502@getrailo.org>
Date: Tue, 08 Jan 2013 19:53:12 -0800
From: "Igal @ getRailo.org" <igal@getrailo.org>
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:17.0) Gecko/17.0 Thunderbird/17.0
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Cannot instantiate SPI class
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Gm-Message-State: ALoCoQkq2P5l3vRAfTCdWmQ/VWJsyuh3U/4+p/5oWS9jdWEVxBpFrXlgcfN4F8sRbc8N5ijbAWtx
X-Virus-Checked: Checked by ClamAV on apache.org

I'm trying to access Lucene4 from Railo (an open-source application server)

when I try to create an IndexWriterConfig I get the error:  Cannot 
instantiate SPI class: org.apache.lucene.codecs.appending.AppendingCodec

any ideas?

TIA

stacktrace below:

Cannot instantiate SPI class: 
org.apache.lucene.codecs.appending.AppendingCodec at 
org.apache.lucene.util.NamedSPILoader.lookup(NamedSPILoader.java:104):104 at 
org.apache.lucene.codecs.PostingsFormat.forName(PostingsFormat.java:100):100 
at 
org.apache.lucene.codecs.lucene40.Lucene40Codec.<init>(Lucene40Codec.java:114):114 
at 
org.apache.lucene.codecs.appending.AppendingCodec.<init>(AppendingCodec.java:34):34 
at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native 
Method):-2 at 
sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source):-1 
at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown 
Source):-1 at java.lang.reflect.Constructor.newInstance(Unknown 
Source):-1 at java.lang.Class.newInstance0(Unknown Source):-1 at 
java.lang.Class.newInstance(Unknown Source):-1 at 
org.apache.lucene.util.NamedSPILoader.reload(NamedSPILoader.java:62):62 
at 
org.apache.lucene.util.NamedSPILoader.<init>(NamedSPILoader.java:42):42 
at 
org.apache.lucene.util.NamedSPILoader.<init>(NamedSPILoader.java:37):37 
at org.apache.lucene.codecs.Codec.<clinit>(Codec.java:41):41 at 
org.apache.lucene.index.LiveIndexWriterConfig.<init>(LiveIndexWriterConfig.java:118):118 
at 
org.apache.lucene.index.IndexWriterConfig.<init>(IndexWriterConfig.java:145):145 
at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native 
Method):-2 at 
sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source):-1 
at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown 
Source):-1 at java.lang.reflect.Constructor.newInstance(Unknown 
Source):-1 at 
railo.runtime.reflection.pairs.ConstructorInstance.invoke(ConstructorInstance.java:34):34 
at 
railo.runtime.reflection.Reflector.callConstructor(Reflector.java:653):653 
at railo.runtime.java.JavaObject.init(JavaObject.java:311):311 at 
railo.runtime.java.JavaObject.call(JavaObject.java:235):235 at 
railo.runtime.java.JavaObject.call(JavaObject.java:272):272 at 
railo.runtime.util.VariableUtilImpl.callFunctionWithoutNamedValues(VariableUtilImpl.java:723):723 
at 
railo.runtime.PageContextImpl.getFunction(PageContextImpl.java:1506):1506 at 
s21.search.lucene4search_cfc$cf._1(E:\Websites\_S21WAF\CFC\s21\search\Lucene4Search.cfc:92):92 
at 
s21.search.lucene4search_cfc$cf.udfCall(E:\Websites\_S21WAF\CFC\s21\search\Lucene4Search.cfc):-1 
at railo.runtime.type.UDFImpl.implementation(UDFImpl.java:103):103 at 
railo.runtime.type.UDFImpl._call(UDFImpl.java:371):371 at 
railo.runtime.type.UDFImpl.call(UDFImpl.java:284):284 at 
railo.runtime.type.scope.UndefinedImpl.call(UndefinedImpl.java:775):775 
at 
railo.runtime.util.VariableUtilImpl.callFunctionWithoutNamedValues(VariableUtilImpl.java:723):723 
at 
railo.runtime.PageContextImpl.getFunction(PageContextImpl.java:1506):1506 at 
s21.search.lucene4search_cfc$cf._1(E:\Websites\_S21WAF\CFC\s21\search\Lucene4Search.cfc:142):142 
at 
s21.search.lucene4search_cfc$cf.udfCall(E:\Websites\_S21WAF\CFC\s21\search\Lucene4Search.cfc):-1 
at railo.runtime.type.UDFImpl.implementation(UDFImpl.java:103):103 at 
railo.runtime.type.UDFImpl._call(UDFImpl.java:371):371 at 
railo.runtime.type.UDFImpl.call(UDFImpl.java:284):284 at 
railo.runtime.ComponentImpl._call(ComponentImpl.java:572):572 at 
railo.runtime.ComponentImpl._call(ComponentImpl.java:490):490 at 
railo.runtime.ComponentImpl.call(ComponentImpl.java:1781):1781 at 
railo.runtime.util.VariableUtilImpl.callFunctionWithoutNamedValues(VariableUtilImpl.java:723):723 
at 
railo.runtime.PageContextImpl.getFunction(PageContextImpl.java:1506):1506 at 
_test.lucene4_cfm$cf.call(E:\Websites\21solutions\_test\lucene4.cfm:14):14 
at railo.runtime.PageContextImpl.doInclude(PageContextImpl.java:772):772 
at railo.runtime.PageContextImpl.doInclude(PageContextImpl.java:753):753 
at 
railo.runtime.listener.ModernAppListener._onRequest(ModernAppListener.java:183):183 
at 
railo.runtime.listener.MixedAppListener.onRequest(MixedAppListener.java:18):18 
at railo.runtime.PageContextImpl.execute(PageContextImpl.java:2255):2255 
at railo.runtime.PageContextImpl.execute(PageContextImpl.java:2222):2222 
at 
railo.runtime.engine.CFMLEngineImpl.serviceCFML(CFMLEngineImpl.java:315):315 
at railo.loader.servlet.CFMLServlet.service(CFMLServlet.java:29):29 at 
javax.servlet.http.HttpServlet.service(HttpServlet.java:722):722 at 
org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305):305 
at 
org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210):210 
at 
net.twentyonesolutions.servlet.filters.RequestThreadsMonitor.doFilter(RequestThreadsMonitor.java:152):152 
at 
org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243):243 
at 
org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210):210 
at 
net.twentyonesolutions.servlet.filters.BlockedIpFilter.doFilter(BlockedIpFilter.java:90):90 
at 
org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243):243 
at 
org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210):210 
at 
org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222):222 
at 
org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123):123 
at 
org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168):168 
at 
org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99):99 
at 
org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118):118 
at 
org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407):407 
at 
org.apache.coyote.ajp.AjpAprProcessor.process(AjpAprProcessor.java:197):197 
at 
org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:585):585 
at 
org.apache.tomcat.util.net.AprEndpoint$SocketProcessor.run(AprEndpoint.java:1813):1813 
at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source):-1 
at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source):-1 
at java.lang.Thread.run(Unknown Source):-1

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54595-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jan  9 05:13:20 2013
Return-Path: <java-user-return-54595-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 4FB7CE3BE
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed,  9 Jan 2013 05:13:20 +0000 (UTC)
Received: (qmail 24012 invoked by uid 500); 9 Jan 2013 05:13:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23598 invoked by uid 500); 9 Jan 2013 05:13:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23574 invoked by uid 99); 9 Jan 2013 05:13:17 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jan 2013 05:13:17 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of trejkaz@trypticon.org designates 209.85.220.175 as permitted sender)
Received: from [209.85.220.175] (HELO mail-vc0-f175.google.com) (209.85.220.175)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jan 2013 05:13:07 +0000
Received: by mail-vc0-f175.google.com with SMTP id fy7so1202879vcb.34
        for <java-user@lucene.apache.org>; Tue, 08 Jan 2013 21:12:47 -0800 (PST)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=x-received:mime-version:in-reply-to:references:date:message-id
         :subject:from:to:content-type:x-gm-message-state;
        bh=IMswKjzsQGuGUTWhPRjs8q9LfCtZNbicDGJJEc+5UWc=;
        b=fFBgatBqMB4Rn3EotSNeSJLzMS4gCPdGjAUGGUBC4Gqt8CYdzlu4DV1alqS9BYFXXe
         c/dYodyQ2xb3l1xzVS/skAFFrWQ6osdpdLeJYA4Z2HSIxQosTWZf1lvxvGCKkuiwUe6V
         IPwU8qFHZPhSC7wyd9q3FH6y6OUD0xBQGlMH8head3RXvC761YQAXpyahwYMgnk5mEVo
         MZ8GqCzyi7zTbjzQWPKWi7aBNTnxXWM/U1/yzpyTFNf+SH2Bs2Cy2v0jjHwGCu0Fw5Lo
         pA90+8jzAhS4sDKPmHZlnvwtYNCcelccI/d1DeodScwQyK2QN8XFA1FNgQ/1a48M/cZf
         57dA==
X-Received: by 10.220.219.204 with SMTP id hv12mr86682512vcb.71.1357708366859;
        Tue, 08 Jan 2013 21:12:46 -0800 (PST)
Received: from mail-vb0-f49.google.com (mail-vb0-f49.google.com [209.85.212.49])
        by mx.google.com with ESMTPS id sk8sm54795945vdb.13.2013.01.08.21.12.44
        (version=SSLv3 cipher=OTHER);
        Tue, 08 Jan 2013 21:12:45 -0800 (PST)
Received: by mail-vb0-f49.google.com with SMTP id r6so1181181vbi.22
        for <java-user@lucene.apache.org>; Tue, 08 Jan 2013 21:12:44 -0800 (PST)
MIME-Version: 1.0
Received: by 10.220.106.147 with SMTP id x19mr88446288vco.37.1357708364066;
 Tue, 08 Jan 2013 21:12:44 -0800 (PST)
Received: by 10.58.249.198 with HTTP; Tue, 8 Jan 2013 21:12:43 -0800 (PST)
In-Reply-To: <3F8A3702-DC59-4FE4-935E-BA71B1ECD22D@gmail.com>
References: <1357673425803-4031660.post@n3.nabble.com>
	<CADuAvzcu+aFQZDcyDv=waF_AygGH9yVCk0Wh-GA0fu8D1uh-9g@mail.gmail.com>
	<3F8A3702-DC59-4FE4-935E-BA71B1ECD22D@gmail.com>
Date: Wed, 9 Jan 2013 16:12:43 +1100
Message-ID: <CADuAvzeDmokX1w5rrwbfGr-yuCrvPbMUP+2BcaoxHg7ZLivz2A@mail.gmail.com>
Subject: Re: Is StandardAnalyzer good enough for multi languages...
From: Trejkaz <trejkaz@trypticon.org>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
X-Gm-Message-State: ALoCoQlMJ56fwFV/G8fzDmxnfi+52uu5gRjLWhazVbnYlfrmsy9uQhe0agEPtyVwwkzUFQ/1+WT0
X-Virus-Checked: Checked by ClamAV on apache.org

On Wed, Jan 9, 2013 at 10:57 AM, Steve Rowe <sarowe@gmail.com> wrote:
> Trejkaz (and maybe Sai too): ICUTokenizer in Lucene's icu module may be be of interest to you, along with the token filters in that same module. - Steve

ICUTokenizer sounds like it's implementing UAX #29, which is exactly
the standard filled with all the issues I was describing. Unless it
does more than that, I would recommend against using that also.

TX

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54596-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jan  9 05:48:53 2013
Return-Path: <java-user-return-54596-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 24E6DE0B8
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed,  9 Jan 2013 05:48:53 +0000 (UTC)
Received: (qmail 8774 invoked by uid 500); 9 Jan 2013 05:48:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8477 invoked by uid 500); 9 Jan 2013 05:48:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8461 invoked by uid 99); 9 Jan 2013 05:48:50 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jan 2013 05:48:50 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of sarowe@gmail.com designates 209.85.216.54 as permitted sender)
Received: from [209.85.216.54] (HELO mail-qa0-f54.google.com) (209.85.216.54)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jan 2013 05:48:42 +0000
Received: by mail-qa0-f54.google.com with SMTP id j15so406351qaq.20
        for <java-user@lucene.apache.org>; Tue, 08 Jan 2013 21:48:21 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=x-received:content-type:mime-version:subject:from:in-reply-to:date
         :content-transfer-encoding:message-id:references:to:x-mailer;
        bh=g3v4me77ZXVQGGSE6pq+TPj9y7V3QQXYpVZX+PThX84=;
        b=n8uxkSKXW+Teuw+JJKFg19joRNrHhEnrr1FhEvDbwzoLY9kFaJvWYutHoTttEX5Koi
         KkGYlkZFtMmxCmql4s6f11wsSlHU4Sv85lQYr9HjEoxm7IcxPDlQwmwQXZStT7LGtnwq
         Nl5T3UghS+K8gKfh19Dr0LYJENcLW+mjSCnpe6/+ICsEPkB/46MYe4ovUDX3vlpuRGCs
         ++S1aKonqD09+9ZRkDr/9ZzJnZrj0KUQ5+JRj8yhpnp40yDxvrW6rmVjr/rT2U8zlpaO
         2JjZH+yZ8T/rtOLWY8jmv7Al3pDsHNexQ0S6rrOzKBpJKDUUdV2YA4li6BVTQIPuRHHC
         AP2g==
X-Received: by 10.49.14.202 with SMTP id r10mr58680409qec.10.1357710501563;
        Tue, 08 Jan 2013 21:48:21 -0800 (PST)
Received: from [192.168.1.202] (cpe-67-249-104-72.twcny.res.rr.com. [67.249.104.72])
        by mx.google.com with ESMTPS id v10sm23285383qaa.15.2013.01.08.21.48.20
        (version=SSLv3 cipher=OTHER);
        Tue, 08 Jan 2013 21:48:21 -0800 (PST)
Content-Type: text/plain; charset=iso-8859-1
Mime-Version: 1.0 (Mac OS X Mail 6.2 \(1499\))
Subject: Re: Cannot instantiate SPI class
From: Steve Rowe <sarowe@gmail.com>
In-Reply-To: <50ECE9A8.9030502@getrailo.org>
Date: Wed, 9 Jan 2013 00:48:19 -0500
Content-Transfer-Encoding: quoted-printable
Message-Id: <69D33B3B-20E3-4DCB-B82A-5E2717DC0647@gmail.com>
References: <50ECE9A8.9030502@getrailo.org>
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.1499)
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Igal,=20

Sounds like you don't have lucene-codecs-4.0.0.jar in Railo's classpath.

Steve

On Jan 8, 2013, at 10:53 PM, Igal @ getRailo.org <igal@getrailo.org> =
wrote:

> I'm trying to access Lucene4 from Railo (an open-source application =
server)
>=20
> when I try to create an IndexWriterConfig I get the error:  Cannot =
instantiate SPI class: org.apache.lucene.codecs.appending.AppendingCodec
>=20
> any ideas?
>=20
> TIA
>=20
> stacktrace below:
>=20
> Cannot instantiate SPI class: =
org.apache.lucene.codecs.appending.AppendingCodec at =
org.apache.lucene.util.NamedSPILoader.lookup(NamedSPILoader.java:104):104 =
at =
org.apache.lucene.codecs.PostingsFormat.forName(PostingsFormat.java:100):1=
00 at =
org.apache.lucene.codecs.lucene40.Lucene40Codec.<init>(Lucene40Codec.java:=
114):114 at =
org.apache.lucene.codecs.appending.AppendingCodec.<init>(AppendingCodec.ja=
va:34):34 at =
sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method):-2 =
at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown =
Source):-1 at =
sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown =
Source):-1 at java.lang.reflect.Constructor.newInstance(Unknown =
Source):-1 at java.lang.Class.newInstance0(Unknown Source):-1 at =
java.lang.Class.newInstance(Unknown Source):-1 at =
org.apache.lucene.util.NamedSPILoader.reload(NamedSPILoader.java:62):62 =
at =
org.apache.lucene.util.NamedSPILoader.<init>(NamedSPILoader.java:42):42 =
at =
org.apache.lucene.util.NamedSPILoader.<init>(NamedSPILoader.java:37):37 =
at org.apache.lucene.codecs.Codec.<clinit>(Codec.java:41):41 at =
org.apache.lucene.index.LiveIndexWriterConfig.<init>(LiveIndexWriterConfig=
.java:118):118 at =
org.apache.lucene.index.IndexWriterConfig.<init>(IndexWriterConfig.java:14=
5):145 at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native =
Method):-2 at =
sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source):-1 =
at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown =
Source):-1 at java.lang.reflect.Constructor.newInstance(Unknown =
Source):-1 at =
railo.runtime.reflection.pairs.ConstructorInstance.invoke(ConstructorInsta=
nce.java:34):34 at =
railo.runtime.reflection.Reflector.callConstructor(Reflector.java:653):653=
 at railo.runtime.java.JavaObject.init(JavaObject.java:311):311 at =
railo.runtime.java.JavaObject.call(JavaObject.java:235):235 at =
railo.runtime.java.JavaObject.call(JavaObject.java:272):272 at =
railo.runtime.util.VariableUtilImpl.callFunctionWithoutNamedValues(Variabl=
eUtilImpl.java:723):723 at =
railo.runtime.PageContextImpl.getFunction(PageContextImpl.java:1506):1506 =
at =
s21.search.lucene4search_cfc$cf._1(E:\Websites\_S21WAF\CFC\s21\search\Luce=
ne4Search.cfc:92):92 at =
s21.search.lucene4search_cfc$cf.udfCall(E:\Websites\_S21WAF\CFC\s21\search=
\Lucene4Search.cfc):-1 at =
railo.runtime.type.UDFImpl.implementation(UDFImpl.java:103):103 at =
railo.runtime.type.UDFImpl._call(UDFImpl.java:371):371 at =
railo.runtime.type.UDFImpl.call(UDFImpl.java:284):284 at =
railo.runtime.type.scope.UndefinedImpl.call(UndefinedImpl.java:775):775 =
at =
railo.runtime.util.VariableUtilImpl.callFunctionWithoutNamedValues(Variabl=
eUtilImpl.java:723):723 at =
railo.runtime.PageContextImpl.getFunction(PageContextImpl.java:1506):1506 =
at =
s21.search.lucene4search_cfc$cf._1(E:\Websites\_S21WAF\CFC\s21\search\Luce=
ne4Search.cfc:142):142 at =
s21.search.lucene4search_cfc$cf.udfCall(E:\Websites\_S21WAF\CFC\s21\search=
\Lucene4Search.cfc):-1 at =
railo.runtime.type.UDFImpl.implementation(UDFImpl.java:103):103 at =
railo.runtime.type.UDFImpl._call(UDFImpl.java:371):371 at =
railo.runtime.type.UDFImpl.call(UDFImpl.java:284):284 at =
railo.runtime.ComponentImpl._call(ComponentImpl.java:572):572 at =
railo.runtime.ComponentImpl._call(ComponentImpl.java:490):490 at =
railo.runtime.ComponentImpl.call(ComponentImpl.java:1781):1781 at =
railo.runtime.util.VariableUtilImpl.callFunctionWithoutNamedValues(Variabl=
eUtilImpl.java:723):723 at =
railo.runtime.PageContextImpl.getFunction(PageContextImpl.java:1506):1506 =
at =
_test.lucene4_cfm$cf.call(E:\Websites\21solutions\_test\lucene4.cfm:14):14=
 at =
railo.runtime.PageContextImpl.doInclude(PageContextImpl.java:772):772 at =
railo.runtime.PageContextImpl.doInclude(PageContextImpl.java:753):753 at =
railo.runtime.listener.ModernAppListener._onRequest(ModernAppListener.java=
:183):183 at =
railo.runtime.listener.MixedAppListener.onRequest(MixedAppListener.java:18=
):18 at =
railo.runtime.PageContextImpl.execute(PageContextImpl.java:2255):2255 at =
railo.runtime.PageContextImpl.execute(PageContextImpl.java:2222):2222 at =
railo.runtime.engine.CFMLEngineImpl.serviceCFML(CFMLEngineImpl.java:315):3=
15 at railo.loader.servlet.CFMLServlet.service(CFMLServlet.java:29):29 =
at javax.servlet.http.HttpServlet.service(HttpServlet.java:722):722 at =
org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Applicati=
onFilterChain.java:305):305 at =
org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilter=
Chain.java:210):210 at =
net.twentyonesolutions.servlet.filters.RequestThreadsMonitor.doFilter(Requ=
estThreadsMonitor.java:152):152 at =
org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Applicati=
onFilterChain.java:243):243 at =
org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilter=
Chain.java:210):210 at =
net.twentyonesolutions.servlet.filters.BlockedIpFilter.doFilter(BlockedIpF=
ilter.java:90):90 at =
org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Applicati=
onFilterChain.java:243):243 at =
org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilter=
Chain.java:210):210 at =
org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.=
java:222):222 at =
org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.=
java:123):123 at =
org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:1=
68):168 at =
org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:9=
9):99 at =
org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.ja=
va:118):118 at =
org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407=
):407 at =
org.apache.coyote.ajp.AjpAprProcessor.process(AjpAprProcessor.java:197):19=
7 at =
org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(Abstr=
actProtocol.java:585):585 at =
org.apache.tomcat.util.net.AprEndpoint$SocketProcessor.run(AprEndpoint.jav=
a:1813):1813 at =
java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source):-1 at =
java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source):-1 at =
java.lang.Thread.run(Unknown Source):-1
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54597-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jan  9 06:02:59 2013
Return-Path: <java-user-return-54597-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id ACE1BE110
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed,  9 Jan 2013 06:02:59 +0000 (UTC)
Received: (qmail 44917 invoked by uid 500); 9 Jan 2013 06:02:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44778 invoked by uid 500); 9 Jan 2013 06:02:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44755 invoked by uid 99); 9 Jan 2013 06:02:56 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jan 2013 06:02:56 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.210.44] (HELO mail-da0-f44.google.com) (209.85.210.44)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jan 2013 06:02:48 +0000
Received: by mail-da0-f44.google.com with SMTP id z20so571736dae.3
        for <java-user@lucene.apache.org>; Tue, 08 Jan 2013 22:02:27 -0800 (PST)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=x-received:message-id:date:from:user-agent:mime-version:to:subject
         :references:in-reply-to:content-type:content-transfer-encoding
         :x-gm-message-state;
        bh=jz1IPdD0uQU3BGKJRIDoMxCQTmPI/Cek+Db6nPQwC7I=;
        b=eZJRPqId+ZrxGpqSQAYAbGUTjdzh28QzpW6Z19hbfATh8gkwJjwfb2Oj59NTZ80WCC
         rCU/IgivbppUeNYp3XB51zd7f76BpJTHETJrAdvNcJ3yjCMZRNIPMqT3Ilm2JWWL3+Td
         gyWMs5UGM/0Ro4I/k4gFBbl1Ei3FZURvf4s0y8rb6f1Wq0ZTgzpm8NeCwjcHBX4GFMUP
         IPN9pyjHI2iBHePydMRLhG66FDaMULnj5gyBAFI56S4uJvgJCv8lAkbQ1lEUzg6l+Ci/
         Ax+ELpeN4QCn3EHZ4aw3Zuk6HaYtnW/hsioTtFeZD7c6wTrLSKsSsWxqBBwbgMCGn7Fs
         zYFw==
X-Received: by 10.68.224.130 with SMTP id rc2mr17321614pbc.156.1357711346807;
        Tue, 08 Jan 2013 22:02:26 -0800 (PST)
Received: from [192.168.0.11] (cpe-98-145-203-109.socal.res.rr.com. [98.145.203.109])
        by mx.google.com with ESMTPS id k4sm42159480paz.26.2013.01.08.22.02.25
        (version=SSLv3 cipher=OTHER);
        Tue, 08 Jan 2013 22:02:26 -0800 (PST)
Message-ID: <50ED07E6.3000604@getrailo.org>
Date: Tue, 08 Jan 2013 22:02:14 -0800
From: "Igal @ getRailo.org" <igal@getrailo.org>
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:17.0) Gecko/17.0 Thunderbird/17.0
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Cannot instantiate SPI class
References: <50ECE9A8.9030502@getrailo.org> <69D33B3B-20E3-4DCB-B82A-5E2717DC0647@gmail.com>
In-Reply-To: <69D33B3B-20E3-4DCB-B82A-5E2717DC0647@gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: quoted-printable
X-Gm-Message-State: ALoCoQlUF8l3sn2u/HJgiCCGDt3ArFG3Fwn8ZYl22RMpY3ypVOmkNe8pjrg9G0j67gTfI3NsVXEZ
X-Virus-Checked: Checked by ClamAV on apache.org

hi Steve,

thanks for your reply.  at first I also thought that, so I added=20
lucene-codecs-4.0.0.jar which caused another error, and prompted me to=20
add commons-codec-1.7.jar as well.

this error is after I added those two jars, but now I'm thinking -- I=20
added them to Tomcat's classpath (Railo is a Servlet that's running=20
inside Apache Tomcat in my case) -- perhaps I need to add the codec jars =

to Railo's classpath instead?  it doesn't make much sense to me as they=20
both should use the same class loader.

unless of course, Lucene 4 is using a different class-loader to load=20
these classes.  (does it?)

as an aside -- Lucene 3.6 was running properly in that same environment=20
before.


Igal


On 1/8/2013 9:48 PM, Steve Rowe wrote:
> Hi Igal,
>
> Sounds like you don't have lucene-codecs-4.0.0.jar in Railo's classpath=
=2E
>
> Steve
>
> On Jan 8, 2013, at 10:53 PM, Igal @ getRailo.org <igal@getrailo.org> wr=
ote:
>
>> I'm trying to access Lucene4 from Railo (an open-source application se=
rver)
>>
>> when I try to create an IndexWriterConfig I get the error:  Cannot ins=
tantiate SPI class: org.apache.lucene.codecs.appending.AppendingCodec
>>
>> any ideas?
>>
>> TIA
>>
>> stacktrace below:
>>
>> Cannot instantiate SPI class: org.apache.lucene.codecs.appending.Appen=
dingCodec at org.apache.lucene.util.NamedSPILoader.lookup(NamedSPILoader.=
java:104):104 at org.apache.lucene.codecs.PostingsFormat.forName(Postings=
Format.java:100):100 at org.apache.lucene.codecs.lucene40.Lucene40Codec.<=
init>(Lucene40Codec.java:114):114 at org.apache.lucene.codecs.appending.A=
ppendingCodec.<init>(AppendingCodec.java:34):34 at sun.reflect.NativeCons=
tructorAccessorImpl.newInstance0(Native Method):-2 at sun.reflect.NativeC=
onstructorAccessorImpl.newInstance(Unknown Source):-1 at sun.reflect.Dele=
gatingConstructorAccessorImpl.newInstance(Unknown Source):-1 at java.lang=
=2Ereflect.Constructor.newInstance(Unknown Source):-1 at java.lang.Class.=
newInstance0(Unknown Source):-1 at java.lang.Class.newInstance(Unknown So=
urce):-1 at org.apache.lucene.util.NamedSPILoader.reload(NamedSPILoader.j=
ava:62):62 at org.apache.lucene.util.NamedSPILoader.<init>(NamedSPILoader=
=2Ejava:42):42 at org.apache.lucene.util.NamedSPILoader.<init>(NamedSPILo=
ader.java:37):37 at org.apache.lucene.codecs.Codec.<clinit>(Codec.java:41=
):41 at org.apache.lucene.index.LiveIndexWriterConfig.<init>(LiveIndexWri=
terConfig.java:118):118 at org.apache.lucene.index.IndexWriterConfig.<ini=
t>(IndexWriterConfig.java:145):145 at sun.reflect.NativeConstructorAccess=
orImpl.newInstance0(Native Method):-2 at sun.reflect.NativeConstructorAcc=
essorImpl.newInstance(Unknown Source):-1 at sun.reflect.DelegatingConstru=
ctorAccessorImpl.newInstance(Unknown Source):-1 at java.lang.reflect.Cons=
tructor.newInstance(Unknown Source):-1 at railo.runtime.reflection.pairs.=
ConstructorInstance.invoke(ConstructorInstance.java:34):34 at railo.runti=
me.reflection.Reflector.callConstructor(Reflector.java:653):653 at railo.=
runtime.java.JavaObject.init(JavaObject.java:311):311 at railo.runtime.ja=
va.JavaObject.call(JavaObject.java:235):235 at railo.runtime.java.JavaObj=
ect.call(JavaObject.java:272):272 at railo.runtime.util.VariableUtilImpl.=
callFunctionWithoutNamedValues(VariableUtilImpl.java:723):723 at railo.ru=
ntime.PageContextImpl.getFunction(PageContextImpl.java:1506):1506 at s21.=
search.lucene4search_cfc$cf._1(E:\Websites\_S21WAF\CFC\s21\search\Lucene4=
Search.cfc:92):92 at s21.search.lucene4search_cfc$cf.udfCall(E:\Websites\=
_S21WAF\CFC\s21\search\Lucene4Search.cfc):-1 at railo.runtime.type.UDFImp=
l.implementation(UDFImpl.java:103):103 at railo.runtime.type.UDFImpl._cal=
l(UDFImpl.java:371):371 at railo.runtime.type.UDFImpl.call(UDFImpl.java:2=
84):284 at railo.runtime.type.scope.UndefinedImpl.call(UndefinedImpl.java=
:775):775 at railo.runtime.util.VariableUtilImpl.callFunctionWithoutNamed=
Values(VariableUtilImpl.java:723):723 at railo.runtime.PageContextImpl.ge=
tFunction(PageContextImpl.java:1506):1506 at s21.search.lucene4search_cfc=
$cf._1(E:\Websites\_S21WAF\CFC\s21\search\Lucene4Search.cfc:142):142 at s=
21.search.lucene4search_cfc$cf.udfCall(E:\Websites\_S21WAF\CFC\s21\search=
\Lucene4Search.cfc):-1 at railo.runtime.type.UDFImpl.implementation(UDFIm=
pl.java:103):103 at railo.runtime.type.UDFImpl._call(UDFImpl.java:371):37=
1 at railo.runtime.type.UDFImpl.call(UDFImpl.java:284):284 at railo.runti=
me.ComponentImpl._call(ComponentImpl.java:572):572 at railo.runtime.Compo=
nentImpl._call(ComponentImpl.java:490):490 at railo.runtime.ComponentImpl=
=2Ecall(ComponentImpl.java:1781):1781 at railo.runtime.util.VariableUtilI=
mpl.callFunctionWithoutNamedValues(VariableUtilImpl.java:723):723 at rail=
o.runtime.PageContextImpl.getFunction(PageContextImpl.java:1506):1506 at =
_test.lucene4_cfm$cf.call(E:\Websites\21solutions\_test\lucene4.cfm:14):1=
4 at railo.runtime.PageContextImpl.doInclude(PageContextImpl.java:772):77=
2 at railo.runtime.PageContextImpl.doInclude(PageContextImpl.java:753):75=
3 at railo.runtime.listener.ModernAppListener._onRequest(ModernAppListene=
r.java:183):183 at railo.runtime.listener.MixedAppListener.onRequest(Mixe=
dAppListener.java:18):18 at railo.runtime.PageContextImpl.execute(PageCon=
textImpl.java:2255):2255 at railo.runtime.PageContextImpl.execute(PageCon=
textImpl.java:2222):2222 at railo.runtime.engine.CFMLEngineImpl.serviceCF=
ML(CFMLEngineImpl.java:315):315 at railo.loader.servlet.CFMLServlet.servi=
ce(CFMLServlet.java:29):29 at javax.servlet.http.HttpServlet.service(Http=
Servlet.java:722):722 at org.apache.catalina.core.ApplicationFilterChain.=
internalDoFilter(ApplicationFilterChain.java:305):305 at org.apache.catal=
ina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)=
:210 at net.twentyonesolutions.servlet.filters.RequestThreadsMonitor.doFi=
lter(RequestThreadsMonitor.java:152):152 at org.apache.catalina.core.Appl=
icationFilterChain.internalDoFilter(ApplicationFilterChain.java:243):243 =
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFi=
lterChain.java:210):210 at net.twentyonesolutions.servlet.filters.Blocked=
IpFilter.doFilter(BlockedIpFilter.java:90):90 at org.apache.catalina.core=
=2EApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:24=
3):243 at org.apache.catalina.core.ApplicationFilterChain.doFilter(Applic=
ationFilterChain.java:210):210 at org.apache.catalina.core.StandardWrappe=
rValve.invoke(StandardWrapperValve.java:222):222 at org.apache.catalina.c=
ore.StandardContextValve.invoke(StandardContextValve.java:123):123 at org=
=2Eapache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:1=
68):168 at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReport=
Valve.java:99):99 at org.apache.catalina.core.StandardEngineValve.invoke(=
StandardEngineValve.java:118):118 at org.apache.catalina.connector.Coyote=
Adapter.service(CoyoteAdapter.java:407):407 at org.apache.coyote.ajp.AjpA=
prProcessor.process(AjpAprProcessor.java:197):197 at org.apache.coyote.Ab=
stractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:58=
5):585 at org.apache.tomcat.util.net.AprEndpoint$SocketProcessor.run(AprE=
ndpoint.java:1813):1813 at java.util.concurrent.ThreadPoolExecutor.runWor=
ker(Unknown Source):-1 at java.util.concurrent.ThreadPoolExecutor$Worker.=
run(Unknown Source):-1 at java.lang.Thread.run(Unknown Source):-1
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54598-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jan  9 06:09:26 2013
Return-Path: <java-user-return-54598-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 02926E13B
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed,  9 Jan 2013 06:09:26 +0000 (UTC)
Received: (qmail 64808 invoked by uid 500); 9 Jan 2013 06:09:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64761 invoked by uid 500); 9 Jan 2013 06:09:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64744 invoked by uid 99); 9 Jan 2013 06:09:23 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jan 2013 06:09:23 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.160.42] (HELO mail-pb0-f42.google.com) (209.85.160.42)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jan 2013 06:09:15 +0000
Received: by mail-pb0-f42.google.com with SMTP id rp2so726645pbb.15
        for <java-user@lucene.apache.org>; Tue, 08 Jan 2013 22:08:53 -0800 (PST)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=x-received:message-id:date:from:user-agent:mime-version:to:subject
         :references:in-reply-to:content-type:content-transfer-encoding
         :x-gm-message-state;
        bh=AL38XE0WE4SEytTjUuJ4piVf3CCkXDknYsYXYgXTUec=;
        b=T7RhMlmTTDxLZLuv5F8CUnVAwAPAwyUDSsBPSXiNkj9zPBVWCBYO6VT+q2cb17pPf2
         D496mNqnWo+8/itsRGYCdpHaW9L1YHTsAcdEeSDqyDP9H8DMSQBqpHhSi9On5Yqw9jpp
         b9x0SiJ5nvL336QcQ+Omb/UXGKmfE2pNE9kRV1ccNTiH8lWzwF+cF4SZ4xU1RPkiQeOw
         omY1Q6fwIlw3jwthul2Fcei351txENPpdlm1TD1roRfnKQ0cAgcGXh1EPcfXGdKDb8lu
         gdc6NjCoP/F6V0eAtgXWmgmkwswjTgKXOwrbJIK1gs8HQB3jA75v/h6UawF3d7FbvdbP
         9D7A==
X-Received: by 10.66.79.134 with SMTP id j6mr164592033pax.11.1357711733759;
        Tue, 08 Jan 2013 22:08:53 -0800 (PST)
Received: from [192.168.0.11] (cpe-98-145-203-109.socal.res.rr.com. [98.145.203.109])
        by mx.google.com with ESMTPS id tq4sm41008744pbc.50.2013.01.08.22.08.52
        (version=SSLv3 cipher=OTHER);
        Tue, 08 Jan 2013 22:08:52 -0800 (PST)
Message-ID: <50ED0968.2020809@getrailo.org>
Date: Tue, 08 Jan 2013 22:08:40 -0800
From: "Igal @ getRailo.org" <igal@getrailo.org>
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:17.0) Gecko/17.0 Thunderbird/17.0
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Cannot instantiate SPI class
References: <50ECE9A8.9030502@getrailo.org> <69D33B3B-20E3-4DCB-B82A-5E2717DC0647@gmail.com> <50ED07E6.3000604@getrailo.org>
In-Reply-To: <50ED07E6.3000604@getrailo.org>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Gm-Message-State: ALoCoQmFH45Sz9En48HmMGm+1GobeP2XlyBYysEV7d0UUTcwDlXDj3LUTr5nih7ZanOyKsV35GGu
X-Virus-Checked: Checked by ClamAV on apache.org

nope.  that didn't work either...


On 1/8/2013 10:02 PM, Igal @ getRailo.org wrote:
> hi Steve,
>
> thanks for your reply.  at first I also thought that, so I added 
> lucene-codecs-4.0.0.jar which caused another error, and prompted me to 
> add commons-codec-1.7.jar as well.
>
> this error is after I added those two jars, but now I'm thinking -- I 
> added them to Tomcat's classpath (Railo is a Servlet that's running 
> inside Apache Tomcat in my case) -- perhaps I need to add the codec 
> jars to Railo's classpath instead?  it doesn't make much sense to me 
> as they both should use the same class loader.
>
> unless of course, Lucene 4 is using a different class-loader to load 
> these classes.  (does it?)
>
> as an aside -- Lucene 3.6 was running properly in that same 
> environment before.
>
>
> Igal
>
>
> On 1/8/2013 9:48 PM, Steve Rowe wrote:
>> Hi Igal,
>>
>> Sounds like you don't have lucene-codecs-4.0.0.jar in Railo's classpath.
>>
>> Steve
>>
>> On Jan 8, 2013, at 10:53 PM, Igal @ getRailo.org <igal@getrailo.org> 
>> wrote:
>>
>>> I'm trying to access Lucene4 from Railo (an open-source application 
>>> server)
>>>
>>> when I try to create an IndexWriterConfig I get the error: Cannot 
>>> instantiate SPI class: 
>>> org.apache.lucene.codecs.appending.AppendingCodec
>>>
>>> any ideas?
>>>
>>> TIA
>>>
>>> stacktrace below:
>>>
>>> Cannot instantiate SPI class: 
>>> org.apache.lucene.codecs.appending.AppendingCodec at 
>>> org.apache.lucene.util.NamedSPILoader.lookup(NamedSPILoader.java:104):104 
>>> at 
>>> org.apache.lucene.codecs.PostingsFormat.forName(PostingsFormat.java:100):100 
>>> at 
>>> org.apache.lucene.codecs.lucene40.Lucene40Codec.<init>(Lucene40Codec.java:114):114 
>>> at 
>>> org.apache.lucene.codecs.appending.AppendingCodec.<init>(AppendingCodec.java:34):34 
>>> at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native 
>>> Method):-2 at 
>>> sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown 
>>> Source):-1 at 
>>> sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown 
>>> Source):-1 at java.lang.reflect.Constructor.newInstance(Unknown 
>>> Source):-1 at java.lang.Class.newInstance0(Unknown Source):-1 at 
>>> java.lang.Class.newInstance(Unknown Source):-1 at 
>>> org.apache.lucene.util.NamedSPILoader.reload(NamedSPILoader.java:62):62 
>>> at 
>>> org.apache.lucene.util.NamedSPILoader.<init>(NamedSPILoader.java:42):42 
>>> at 
>>> org.apache.lucene.util.NamedSPILoader.<init>(NamedSPILoader.java:37):37 
>>> at org.apache.lucene.codecs.Codec.<clinit>(Codec.java:41):41 at 
>>> org.apache.lucene.index.LiveIndexWriterConfig.<init>(LiveIndexWriterConfig.java:118):118 
>>> at 
>>> org.apache.lucene.index.IndexWriterConfig.<init>(IndexWriterConfig.java:145):145 
>>> at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native 
>>> Method):-2 at 
>>> sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown 
>>> Source):-1 at 
>>> sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown 
>>> Source):-1 at java.lang.reflect.Constructor.newInstance(Unknown 
>>> Source):-1 at 
>>> railo.runtime.reflection.pairs.ConstructorInstance.invoke(ConstructorInstance.java:34):34 
>>> at 
>>> railo.runtime.reflection.Reflector.callConstructor(Reflector.java:653):653 
>>> at railo.runtime.java.JavaObject.init(JavaObject.java:311):311 at 
>>> railo.runtime.java.JavaObject.call(JavaObject.java:235):235 at 
>>> railo.runtime.java.JavaObject.call(JavaObject.java:272):272 at 
>>> railo.runtime.util.VariableUtilImpl.callFunctionWithoutNamedValues(VariableUtilImpl.java:723):723 
>>> at 
>>> railo.runtime.PageContextImpl.getFunction(PageContextImpl.java:1506):1506 
>>> at 
>>> s21.search.lucene4search_cfc$cf._1(E:\Websites\_S21WAF\CFC\s21\search\Lucene4Search.cfc:92):92 
>>> at 
>>> s21.search.lucene4search_cfc$cf.udfCall(E:\Websites\_S21WAF\CFC\s21\search\Lucene4Search.cfc):-1 
>>> at railo.runtime.type.UDFImpl.implementation(UDFImpl.java:103):103 
>>> at railo.runtime.type.UDFImpl._call(UDFImpl.java:371):371 at 
>>> railo.runtime.type.UDFImpl.call(UDFImpl.java:284):284 at 
>>> railo.runtime.type.scope.UndefinedImpl.call(UndefinedImpl.java:775):775 
>>> at 
>>> railo.runtime.util.VariableUtilImpl.callFunctionWithoutNamedValues(VariableUtilImpl.java:723):723 
>>> at 
>>> railo.runtime.PageContextImpl.getFunction(PageContextImpl.java:1506):1506 
>>> at 
>>> s21.search.lucene4search_cfc$cf._1(E:\Websites\_S21WAF\CFC\s21\search\Lucene4Search.cfc:142):142 
>>> at 
>>> s21.search.lucene4search_cfc$cf.udfCall(E:\Websites\_S21WAF\CFC\s21\search\Lucene4Search.cfc):-1 
>>> at railo.runtime.type.UDFImpl.implementation(UDFImpl.java:103):103 
>>> at railo.runtime.type.UDFImpl._call(UDFImpl.java:371):371 at 
>>> railo.runtime.type.UDFImpl.call(UDFImpl.java:284):284 at 
>>> railo.runtime.ComponentImpl._call(ComponentImpl.java:572):572 at 
>>> railo.runtime.ComponentImpl._call(ComponentImpl.java:490):490 at 
>>> railo.runtime.ComponentImpl.call(ComponentImpl.java:1781):1781 at 
>>> railo.runtime.util.VariableUtilImpl.callFunctionWithoutNamedValues(VariableUtilImpl.java:723):723 
>>> at 
>>> railo.runtime.PageContextImpl.getFunction(PageContextImpl.java:1506):1506 
>>> at 
>>> _test.lucene4_cfm$cf.call(E:\Websites\21solutions\_test\lucene4.cfm:14):14 
>>> at 
>>> railo.runtime.PageContextImpl.doInclude(PageContextImpl.java:772):772 at 
>>> railo.runtime.PageContextImpl.doInclude(PageContextImpl.java:753):753 at 
>>> railo.runtime.listener.ModernAppListener._onRequest(ModernAppListener.java:183):183 
>>> at 
>>> railo.runtime.listener.MixedAppListener.onRequest(MixedAppListener.java:18):18 
>>> at 
>>> railo.runtime.PageContextImpl.execute(PageContextImpl.java:2255):2255 at 
>>> railo.runtime.PageContextImpl.execute(PageContextImpl.java:2222):2222 at 
>>> railo.runtime.engine.CFMLEngineImpl.serviceCFML(CFMLEngineImpl.java:315):315 
>>> at railo.loader.servlet.CFMLServlet.service(CFMLServlet.java:29):29 
>>> at javax.servlet.http.HttpServlet.service(HttpServlet.java:722):722 
>>> at 
>>> org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305):305 
>>> at 
>>> org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210):210 
>>> at 
>>> net.twentyonesolutions.servlet.filters.RequestThreadsMonitor.doFilter(RequestThreadsMonitor.java:152):152 
>>> at 
>>> org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243):243 
>>> at 
>>> org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210):210 
>>> at 
>>> net.twentyonesolutions.servlet.filters.BlockedIpFilter.doFilter(BlockedIpFilter.java:90):90 
>>> at 
>>> org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243):243 
>>> at 
>>> org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210):210 
>>> at 
>>> org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222):222 
>>> at 
>>> org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123):123 
>>> at 
>>> org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168):168 
>>> at 
>>> org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99):99 
>>> at 
>>> org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118):118 
>>> at 
>>> org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407):407 
>>> at 
>>> org.apache.coyote.ajp.AjpAprProcessor.process(AjpAprProcessor.java:197):197 
>>> at 
>>> org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:585):585 
>>> at 
>>> org.apache.tomcat.util.net.AprEndpoint$SocketProcessor.run(AprEndpoint.java:1813):1813 
>>> at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown 
>>> Source):-1 at 
>>> java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown 
>>> Source):-1 at java.lang.Thread.run(Unknown Source):-1
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54599-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jan  9 06:20:52 2013
Return-Path: <java-user-return-54599-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 6200BE172
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed,  9 Jan 2013 06:20:52 +0000 (UTC)
Received: (qmail 95264 invoked by uid 500); 9 Jan 2013 06:20:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95004 invoked by uid 500); 9 Jan 2013 06:20:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94984 invoked by uid 99); 9 Jan 2013 06:20:47 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jan 2013 06:20:47 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of sarowe@gmail.com designates 209.85.216.44 as permitted sender)
Received: from [209.85.216.44] (HELO mail-qa0-f44.google.com) (209.85.216.44)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jan 2013 06:20:39 +0000
Received: by mail-qa0-f44.google.com with SMTP id z4so412471qan.17
        for <java-user@lucene.apache.org>; Tue, 08 Jan 2013 22:20:18 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=x-received:content-type:mime-version:subject:from:in-reply-to:date
         :content-transfer-encoding:message-id:references:to:x-mailer;
        bh=hJtkCHdRRoWVVcu87XVUAai9iJUhydNnr4I39D/oRkY=;
        b=jJBl1gEE30rFtgVGt/OZiMlllIk0MoqiaT7OeQ0Tfi/w+Eyb7XmPJNYX4c689t11ve
         LzvWTpm+SRw1uY6Vni41auPFhdmWulf7o7uTkL8A+0lgT5gbi6rDr7iW/vOEGK5x2Wlv
         miBf4q4hZWtG4YGn7VEy18b3g6Eoxto+kx/ug5pmzJ+vZDCdbqKoNqihq31C8S9pDI+q
         1EbwijjpTZpRWaMtUN4a00/p9u01R/CatsqhiQeCNaJj//s1TpPC29wA74XSSDTCMHIc
         r3abxWU6MWA1vVJ7DlmYPTNg3E0i1zbI8MUPW4opkmhWh2azQaD23nMVpHHR16rM5FZe
         6cCg==
X-Received: by 10.49.121.40 with SMTP id lh8mr58783564qeb.30.1357712418143;
        Tue, 08 Jan 2013 22:20:18 -0800 (PST)
Received: from [192.168.1.202] (cpe-67-249-104-72.twcny.res.rr.com. [67.249.104.72])
        by mx.google.com with ESMTPS id fl1sm23339030qab.14.2013.01.08.22.20.16
        (version=SSLv3 cipher=OTHER);
        Tue, 08 Jan 2013 22:20:17 -0800 (PST)
Content-Type: text/plain; charset=windows-1252
Mime-Version: 1.0 (Mac OS X Mail 6.2 \(1499\))
Subject: Re: Cannot instantiate SPI class
From: Steve Rowe <sarowe@gmail.com>
In-Reply-To: <50ED07E6.3000604@getrailo.org>
Date: Wed, 9 Jan 2013 01:20:15 -0500
Content-Transfer-Encoding: quoted-printable
Message-Id: <CF35E502-F009-4537-A279-F90078E601DF@gmail.com>
References: <50ECE9A8.9030502@getrailo.org> <69D33B3B-20E3-4DCB-B82A-5E2717DC0647@gmail.com> <50ED07E6.3000604@getrailo.org>
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.1499)
X-Virus-Checked: Checked by ClamAV on apache.org

Hmm, I don't know.

Are you actually using AppendingCodec?

For anybody else looking at this: the same exception is listed on =
<https://issues.apache.org/jira/browse/LUCENE-4391> - see also linked =
issue <https://issues.apache.org/jira/browse/LUCENE-4440>.  Both of =
these are marked as fixed in Lucene 4.0 though=85

Steve

On Jan 9, 2013, at 1:02 AM, "Igal @ getRailo.org" <igal@getrailo.org> =
wrote:

> hi Steve,
>=20
> thanks for your reply.  at first I also thought that, so I added =
lucene-codecs-4.0.0.jar which caused another error, and prompted me to =
add commons-codec-1.7.jar as well.
>=20
> this error is after I added those two jars, but now I'm thinking -- I =
added them to Tomcat's classpath (Railo is a Servlet that's running =
inside Apache Tomcat in my case) -- perhaps I need to add the codec jars =
to Railo's classpath instead?  it doesn't make much sense to me as they =
both should use the same class loader.
>=20
> unless of course, Lucene 4 is using a different class-loader to load =
these classes.  (does it?)
>=20
> as an aside -- Lucene 3.6 was running properly in that same =
environment before.
>=20
>=20
> Igal
>=20
>=20
> On 1/8/2013 9:48 PM, Steve Rowe wrote:
>> Hi Igal,
>>=20
>> Sounds like you don't have lucene-codecs-4.0.0.jar in Railo's =
classpath.
>>=20
>> Steve
>>=20
>> On Jan 8, 2013, at 10:53 PM, Igal @ getRailo.org <igal@getrailo.org> =
wrote:
>>=20
>>> I'm trying to access Lucene4 from Railo (an open-source application =
server)
>>>=20
>>> when I try to create an IndexWriterConfig I get the error:  Cannot =
instantiate SPI class: org.apache.lucene.codecs.appending.AppendingCodec
>>>=20
>>> any ideas?
>>>=20
>>> TIA
>>>=20
>>> stacktrace below:
>>>=20
>>> Cannot instantiate SPI class: =
org.apache.lucene.codecs.appending.AppendingCodec at =
org.apache.lucene.util.NamedSPILoader.lookup(NamedSPILoader.java:104):104 =
at =
org.apache.lucene.codecs.PostingsFormat.forName(PostingsFormat.java:100):1=
00 at =
org.apache.lucene.codecs.lucene40.Lucene40Codec.<init>(Lucene40Codec.java:=
114):114 at =
org.apache.lucene.codecs.appending.AppendingCodec.<init>(AppendingCodec.ja=
va:34):34 at =
sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method):-2 =
at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown =
Source):-1 at =
sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown =
Source):-1 at java.lang.reflect.Constructor.newInstance(Unknown =
Source):-1 at java.lang.Class.newInstance0(Unknown Source):-1 at =
java.lang.Class.newInstance(Unknown Source):-1 at =
org.apache.lucene.util.NamedSPILoader.reload(NamedSPILoader.java:62):62 =
at =
org.apache.lucene.util.NamedSPILoader.<init>(NamedSPILoader.java:42):42 =
at =
org.apache.lucene.util.NamedSPILoader.<init>(NamedSPILoader.java:37):37 =
at org.apache.lucene.codecs.Codec.<clinit>(Codec.java:41):41 at =
org.apache.lucene.index.LiveIndexWriterConfig.<init>(LiveIndexWriterConfig=
.java:118):118 at =
org.apache.lucene.index.IndexWriterConfig.<init>(IndexWriterConfig.java:14=
5):145 at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native =
Method):-2 at =
sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source):-1 =
at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown =
Source):-1 at java.lang.reflect.Constructor.newInstance(Unknown =
Source):-1 at =
railo.runtime.reflection.pairs.ConstructorInstance.invoke(ConstructorInsta=
nce.java:34):34 at =
railo.runtime.reflection.Reflector.callConstructor(Reflector.java:653):653=
 at railo.runtime.java.JavaObject.init(JavaObject.java:311):311 at =
railo.runtime.java.JavaObject.call(JavaObject.java:235):235 at =
railo.runtime.java.JavaObject.call(JavaObject.java:272):272 at =
railo.runtime.util.VariableUtilImpl.callFunctionWithoutNamedValues(Variabl=
eUtilImpl.java:723):723 at =
railo.runtime.PageContextImpl.getFunction(PageContextImpl.java:1506):1506 =
at =
s21.search.lucene4search_cfc$cf._1(E:\Websites\_S21WAF\CFC\s21\search\Luce=
ne4Search.cfc:92):92 at =
s21.search.lucene4search_cfc$cf.udfCall(E:\Websites\_S21WAF\CFC\s21\search=
\Lucene4Search.cfc):-1 at =
railo.runtime.type.UDFImpl.implementation(UDFImpl.java:103):103 at =
railo.runtime.type.UDFImpl._call(UDFImpl.java:371):371 at =
railo.runtime.type.UDFImpl.call(UDFImpl.java:284):284 at =
railo.runtime.type.scope.UndefinedImpl.call(UndefinedImpl.java:775):775 =
at =
railo.runtime.util.VariableUtilImpl.callFunctionWithoutNamedValues(Variabl=
eUtilImpl.java:723):723 at =
railo.runtime.PageContextImpl.getFunction(PageContextImpl.java:1506):1506 =
at =
s21.search.lucene4search_cfc$cf._1(E:\Websites\_S21WAF\CFC\s21\search\Luce=
ne4Search.cfc:142):142 at =
s21.search.lucene4search_cfc$cf.udfCall(E:\Websites\_S21WAF\CFC\s21\search=
\Lucene4Search.cfc):-1 at =
railo.runtime.type.UDFImpl.implementation(UDFImpl.java:103):103 at =
railo.runtime.type.UDFImpl._call(UDFImpl.java:371):371 at =
railo.runtime.type.UDFImpl.call(UDFImpl.java:284):284 at =
railo.runtime.ComponentImpl._call(ComponentImpl.java:572):572 at =
railo.runtime.ComponentImpl._call(ComponentImpl.java:490):490 at =
railo.runtime.ComponentImpl.call(ComponentImpl.java:1781):1781 at =
railo.runtime.util.VariableUtilImpl.callFunctionWithoutNamedValues(Variabl=
eUtilImpl.java:723):723 at =
railo.runtime.PageContextImpl.getFunction(PageContextImpl.java:1506):1506 =
at =
_test.lucene4_cfm$cf.call(E:\Websites\21solutions\_test\lucene4.cfm:14):14=
 at =
railo.runtime.PageContextImpl.doInclude(PageContextImpl.java:772):772 at =
railo.runtime.PageContextImpl.doInclude(PageContextImpl.java:753):753 at =
railo.runtime.listener.ModernAppListener._onRequest(ModernAppListener.java=
:183):183 at =
railo.runtime.listener.MixedAppListener.onRequest(MixedAppListener.java:18=
):18 at =
railo.runtime.PageContextImpl.execute(PageContextImpl.java:2255):2255 at =
railo.runtime.PageContextImpl.execute(PageContextImpl.java:2222):2222 at =
railo.runtime.engine.CFMLEngineImpl.serviceCFML(CFMLEngineImpl.java:315):3=
15 at railo.loader.servlet.CFMLServlet.service(CFMLServlet.java:29):29 =
at javax.servlet.http.HttpServlet.service(HttpServlet.java:722):722 at =
org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Applicati=
onFilterChain.java:305):305 at =
org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilter=
Chain.java:210):210 at =
net.twentyonesolutions.servlet.filters.RequestThreadsMonitor.doFilter(Requ=
estThreadsMonitor.java:152):152 at =
org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Applicati=
onFilterChain.java:243):243 at =
org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilter=
Chain.java:210):210 at =
net.twentyonesolutions.servlet.filters.BlockedIpFilter.doFilter(BlockedIpF=
ilter.java:90):90 at =
org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Applicati=
onFilterChain.java:243):243 at =
org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilter=
Chain.java:210):210 at =
org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.=
java:222):222 at =
org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.=
java:123):123 at =
org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:1=
68):168 at =
org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:9=
9):99 at =
org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.ja=
va:118):118 at =
org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407=
):407 at =
org.apache.coyote.ajp.AjpAprProcessor.process(AjpAprProcessor.java:197):19=
7 at =
org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(Abstr=
actProtocol.java:585):585 at =
org.apache.tomcat.util.net.AprEndpoint$SocketProcessor.run(AprEndpoint.jav=
a:1813):1813 at =
java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source):-1 at =
java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source):-1 at =
java.lang.Thread.run(Unknown Source):-1
>>>=20
>>> =
---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>=20
>>=20
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>=20
>=20
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54600-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jan  9 06:26:15 2013
Return-Path: <java-user-return-54600-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id CD536EC12
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed,  9 Jan 2013 06:26:15 +0000 (UTC)
Received: (qmail 8073 invoked by uid 500); 9 Jan 2013 06:26:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8022 invoked by uid 500); 9 Jan 2013 06:26:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7997 invoked by uid 99); 9 Jan 2013 06:26:13 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jan 2013 06:26:13 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of sarowe@gmail.com designates 209.85.216.51 as permitted sender)
Received: from [209.85.216.51] (HELO mail-qa0-f51.google.com) (209.85.216.51)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jan 2013 06:26:07 +0000
Received: by mail-qa0-f51.google.com with SMTP id i20so425905qad.10
        for <java-user@lucene.apache.org>; Tue, 08 Jan 2013 22:25:46 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=x-received:content-type:mime-version:subject:from:in-reply-to:date
         :content-transfer-encoding:message-id:references:to:x-mailer;
        bh=uwrDwFmAHTwYU3aXFIbQewoTevmisMMFG4gynd4VaZ0=;
        b=syytKs3kbm2xDq9QD9evilft2XnBkCDUtOQCCRd6bdJgey50d/0Aopv7jh8rn7c9wp
         XMZQNnOHbuMdlTO0SAkQcEAQWLqGdvIcOyUS9sw9oFEzi9U+1taqj4nWIs8Y86DvTzgE
         OeoO+jkfwKpojhfXSSFbqXt5RmuUc6m4HayrQoKVIoO6lxpV3467+QcBii6jd5sB1AgF
         KeRJYuoTAXYEcJQE31/Pn4XhWgSLu8bVL8lQ2u3Co1uTz8lXLjEiTkj3VVulTT4N04/a
         wCe3oAr4lNuWvIPqxkwT3U+OSI0TRtF4bDN0pPY5+Bo8aDm5N2+z6DCOe/FYWudHh9W1
         FLVA==
X-Received: by 10.49.127.145 with SMTP id ng17mr57276754qeb.25.1357712746604;
        Tue, 08 Jan 2013 22:25:46 -0800 (PST)
Received: from [192.168.1.202] (cpe-67-249-104-72.twcny.res.rr.com. [67.249.104.72])
        by mx.google.com with ESMTPS id gm4sm22138582qab.12.2013.01.08.22.25.45
        (version=SSLv3 cipher=OTHER);
        Tue, 08 Jan 2013 22:25:46 -0800 (PST)
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Mac OS X Mail 6.2 \(1499\))
Subject: Re: Is StandardAnalyzer good enough for multi languages...
From: Steve Rowe <sarowe@gmail.com>
In-Reply-To: <CADuAvzeDmokX1w5rrwbfGr-yuCrvPbMUP+2BcaoxHg7ZLivz2A@mail.gmail.com>
Date: Wed, 9 Jan 2013 01:25:44 -0500
Content-Transfer-Encoding: quoted-printable
Message-Id: <8C9A9E15-4E29-4152-BD4C-2916E72B1103@gmail.com>
References: <1357673425803-4031660.post@n3.nabble.com> <CADuAvzcu+aFQZDcyDv=waF_AygGH9yVCk0Wh-GA0fu8D1uh-9g@mail.gmail.com> <3F8A3702-DC59-4FE4-935E-BA71B1ECD22D@gmail.com> <CADuAvzeDmokX1w5rrwbfGr-yuCrvPbMUP+2BcaoxHg7ZLivz2A@mail.gmail.com>
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.1499)
X-Virus-Checked: Checked by ClamAV on apache.org

Dude.  Go look.  It allows for per-script specialization, with =
(non-UAX#29) specializations by default for Thai, Lao, Myanmar and =
Hewbrew.  See DefaultICUTokenizerConfig.  It's filled with exactly the =
opposite of what you were describing.=20

ICUTokenizerFactory's customizability has been enhanced in =
to-be-released Lucene/Solr 4.1: =
<https://issues.apache.org/jira/browse/SOLR-4123> - you can provide =
per-script RuleBasedBreakIterator specification files at runtime.=20

On Jan 9, 2013, at 12:12 AM, Trejkaz <trejkaz@trypticon.org> wrote:

> On Wed, Jan 9, 2013 at 10:57 AM, Steve Rowe <sarowe@gmail.com> wrote:
>> Trejkaz (and maybe Sai too): ICUTokenizer in Lucene's icu module may =
be be of interest to you, along with the token filters in that same =
module. - Steve
>=20
> ICUTokenizer sounds like it's implementing UAX #29, which is exactly
> the standard filled with all the issues I was describing. Unless it
> does more than that, I would recommend against using that also.
>=20


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54601-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jan  9 07:52:35 2013
Return-Path: <java-user-return-54601-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id D0EE1EBFD
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed,  9 Jan 2013 07:52:35 +0000 (UTC)
Received: (qmail 21252 invoked by uid 500); 9 Jan 2013 07:52:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21009 invoked by uid 500); 9 Jan 2013 07:52:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20986 invoked by uid 99); 9 Jan 2013 07:52:32 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jan 2013 07:52:32 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of uwe@thetaphi.de designates 188.138.97.18 as permitted sender)
Received: from [188.138.97.18] (HELO mail.sd-datasolutions.de) (188.138.97.18)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jan 2013 07:52:25 +0000
Received: from VEGA (port-92-196-61-239.dynamic.qsc.de [92.196.61.239])
	by mail.sd-datasolutions.de (Postfix) with ESMTPSA id 8534314AA06D
	for <java-user@lucene.apache.org>; Wed,  9 Jan 2013 07:52:03 +0000 (UTC)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <50ECE9A8.9030502@getrailo.org>
In-Reply-To: <50ECE9A8.9030502@getrailo.org>
Subject: RE: Cannot instantiate SPI class
Date: Wed, 9 Jan 2013 08:52:04 +0100
Message-ID: <009e01cdee3e$373055b0$a5910110$@thetaphi.de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="utf-8"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Outlook 14.0
Thread-Index: AQKpIa5Iu4ydFXBzaHCl/pvjG6KIoZaKNjRQ
Content-Language: de
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

can you give the *full* stack trace including nested Exceptions (root =
causes)? There is also the problem, that the line numbers are not =
matching the ones from Lucene 4.0 - so maybe you are using different JAR =
versions in your webapp? This could be caused e.g. by an older lucene =
4.0 JAR file together with codecs.jar of a different version. Please =
make sure that all JAR files are next to each other in the same =
classloader.

The problem here is *not* that the lucene-codecs.jar file is missing or =
the class was not found. Ignoring the line numbers and looking at the =
"message" text, the problem here is that the code was not able to create =
an instance of that class, but it already found and loaded it. The =
problem here is that you did not post the nested Exception so there is =
no chance to say, why calling the constructor failed. One reason may be =
a security manager in your application server, preventing to init the =
class, but this cannot be checked unless I have the full stack trace.

Does it work if you use standard codec? Why do you use appending? What =
happens when yu use only lucene-core.jar and use the default codec only? =
If you don't use appending codec then there is something really crazy =
with your setup and we need, in any case, the full stack trace.

Uwe

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de


> -----Original Message-----
> From: Igal @ getRailo.org [mailto:igal@getrailo.org]
> Sent: Wednesday, January 09, 2013 4:53 AM
> To: java-user@lucene.apache.org
> Subject: Cannot instantiate SPI class
>=20
> I'm trying to access Lucene4 from Railo (an open-source application =
server)
>=20
> when I try to create an IndexWriterConfig I get the error:  Cannot
> instantiate SPI class: =
org.apache.lucene.codecs.appending.AppendingCodec
>=20
> any ideas?
>=20
> TIA
>=20
> stacktrace below:
>=20
> Cannot instantiate SPI class:
> org.apache.lucene.codecs.appending.AppendingCodec at
> org.apache.lucene.util.NamedSPILoader.lookup(NamedSPILoader.java:104):
> 104 at
> org.apache.lucene.codecs.PostingsFormat.forName(PostingsFormat.java:10
> 0):100
> at
> org.apache.lucene.codecs.lucene40.Lucene40Codec.<init>(Lucene40Codec.j
> ava:114):114
> at
> org.apache.lucene.codecs.appending.AppendingCodec.<init>(AppendingCo
> dec.java:34):34
> at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native
> Method):-2 at
> sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown =
Source):-
> 1
> at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown
> Source):-1 at java.lang.reflect.Constructor.newInstance(Unknown
> Source):-1 at java.lang.Class.newInstance0(Unknown Source):-1 at
> java.lang.Class.newInstance(Unknown Source):-1 at
> =
org.apache.lucene.util.NamedSPILoader.reload(NamedSPILoader.java:62):62
> at
> =
org.apache.lucene.util.NamedSPILoader.<init>(NamedSPILoader.java:42):42
> at
> =
org.apache.lucene.util.NamedSPILoader.<init>(NamedSPILoader.java:37):37
> at org.apache.lucene.codecs.Codec.<clinit>(Codec.java:41):41 at
> =
org.apache.lucene.index.LiveIndexWriterConfig.<init>(LiveIndexWriterConfi=

> g.java:118):118
> at
> =
org.apache.lucene.index.IndexWriterConfig.<init>(IndexWriterConfig.java:1=

> 45):145
> at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native
> Method):-2 at
> sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown =
Source):-
> 1
> at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown
> Source):-1 at java.lang.reflect.Constructor.newInstance(Unknown
> Source):-1 at
> =
railo.runtime.reflection.pairs.ConstructorInstance.invoke(ConstructorInst=
anc
> e.java:34):34
> at
> =
railo.runtime.reflection.Reflector.callConstructor(Reflector.java:653):65=
3
> at railo.runtime.java.JavaObject.init(JavaObject.java:311):311 at
> railo.runtime.java.JavaObject.call(JavaObject.java:235):235 at
> railo.runtime.java.JavaObject.call(JavaObject.java:272):272 at
> =
railo.runtime.util.VariableUtilImpl.callFunctionWithoutNamedValues(Variab=
l
> eUtilImpl.java:723):723
> at
> =
railo.runtime.PageContextImpl.getFunction(PageContextImpl.java:1506):150
> 6 at
> s21.search.lucene4search_cfc$cf._1(E:\Websites\_S21WAF\CFC\s21\search\
> Lucene4Search.cfc:92):92
> at
> =
s21.search.lucene4search_cfc$cf.udfCall(E:\Websites\_S21WAF\CFC\s21\sea
> rch\Lucene4Search.cfc):-1
> at railo.runtime.type.UDFImpl.implementation(UDFImpl.java:103):103 at
> railo.runtime.type.UDFImpl._call(UDFImpl.java:371):371 at
> railo.runtime.type.UDFImpl.call(UDFImpl.java:284):284 at
> =
railo.runtime.type.scope.UndefinedImpl.call(UndefinedImpl.java:775):775
> at
> =
railo.runtime.util.VariableUtilImpl.callFunctionWithoutNamedValues(Variab=
l
> eUtilImpl.java:723):723
> at
> =
railo.runtime.PageContextImpl.getFunction(PageContextImpl.java:1506):150
> 6 at
> s21.search.lucene4search_cfc$cf._1(E:\Websites\_S21WAF\CFC\s21\search\
> Lucene4Search.cfc:142):142
> at
> =
s21.search.lucene4search_cfc$cf.udfCall(E:\Websites\_S21WAF\CFC\s21\sea
> rch\Lucene4Search.cfc):-1
> at railo.runtime.type.UDFImpl.implementation(UDFImpl.java:103):103 at
> railo.runtime.type.UDFImpl._call(UDFImpl.java:371):371 at
> railo.runtime.type.UDFImpl.call(UDFImpl.java:284):284 at
> railo.runtime.ComponentImpl._call(ComponentImpl.java:572):572 at
> railo.runtime.ComponentImpl._call(ComponentImpl.java:490):490 at
> railo.runtime.ComponentImpl.call(ComponentImpl.java:1781):1781 at
> =
railo.runtime.util.VariableUtilImpl.callFunctionWithoutNamedValues(Variab=
l
> eUtilImpl.java:723):723
> at
> =
railo.runtime.PageContextImpl.getFunction(PageContextImpl.java:1506):150
> 6 at
> =
_test.lucene4_cfm$cf.call(E:\Websites\21solutions\_test\lucene4.cfm:14):1=
4
> at =
railo.runtime.PageContextImpl.doInclude(PageContextImpl.java:772):772
> at =
railo.runtime.PageContextImpl.doInclude(PageContextImpl.java:753):753
> at
> railo.runtime.listener.ModernAppListener._onRequest(ModernAppListener.
> java:183):183
> at
> =
railo.runtime.listener.MixedAppListener.onRequest(MixedAppListener.java:
> 18):18
> at =
railo.runtime.PageContextImpl.execute(PageContextImpl.java:2255):2255
> at =
railo.runtime.PageContextImpl.execute(PageContextImpl.java:2222):2222
> at
> railo.runtime.engine.CFMLEngineImpl.serviceCFML(CFMLEngineImpl.java:31
> 5):315
> at railo.loader.servlet.CFMLServlet.service(CFMLServlet.java:29):29 at
> javax.servlet.http.HttpServlet.service(HttpServlet.java:722):722 at
> =
org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Applicat=
ionFi
> lterChain.java:305):305
> at
> =
org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilte=
rChai
> n.java:210):210
> at
> =
net.twentyonesolutions.servlet.filters.RequestThreadsMonitor.doFilter(Req=

> uestThreadsMonitor.java:152):152
> at
> =
org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Applicat=
ionFi
> lterChain.java:243):243
> at
> =
org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilte=
rChai
> n.java:210):210
> at
> =
net.twentyonesolutions.servlet.filters.BlockedIpFilter.doFilter(BlockedIp=
Filte
> r.java:90):90
> at
> =
org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Applicat=
ionFi
> lterChain.java:243):243
> at
> =
org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilte=
rChai
> n.java:210):210
> at
> org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperV
> alve.java:222):222
> at
> =
org.apache.catalina.core.StandardContextValve.invoke(StandardContextVal
> ve.java:123):123
> at
> =
org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:=

> 168):168
> at
> =
org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:=
9
> 9):99
> at
> =
org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.
> java:118):118
> at
> =
org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:4
> 07):407
> at
> =
org.apache.coyote.ajp.AjpAprProcessor.process(AjpAprProcessor.java:197):
> 197
> at
> =
org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(Ab
> stractProtocol.java:585):585
> at
> =
org.apache.tomcat.util.net.AprEndpoint$SocketProcessor.run(AprEndpoint.j
> ava:1813):1813
> at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown =
Source):-1
> at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown =
Source):-
> 1
> at java.lang.Thread.run(Unknown Source):-1
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54602-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jan  9 08:11:08 2013
Return-Path: <java-user-return-54602-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id E7C48EC99
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed,  9 Jan 2013 08:11:08 +0000 (UTC)
Received: (qmail 73411 invoked by uid 500); 9 Jan 2013 08:11:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73040 invoked by uid 500); 9 Jan 2013 08:11:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73017 invoked by uid 99); 9 Jan 2013 08:11:05 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jan 2013 08:11:05 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.160.49] (HELO mail-pb0-f49.google.com) (209.85.160.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jan 2013 08:10:59 +0000
Received: by mail-pb0-f49.google.com with SMTP id un15so790596pbc.36
        for <java-user@lucene.apache.org>; Wed, 09 Jan 2013 00:10:30 -0800 (PST)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=x-received:message-id:date:from:user-agent:mime-version:to:subject
         :references:in-reply-to:content-type:content-transfer-encoding
         :x-gm-message-state;
        bh=aniDRVHk+6Aw8oCdqEkF+kEbjFCpUfDSPTWa+BQ1Qtc=;
        b=m92M4Y5AOki0A82Pr7jHZuDEAOvQs0nmRe6DnZc1Ym0NkO/+Kdj4IYGyLPWQEPxUlI
         Ssqqmc5p3qjFdUqWYIhDRe9mH4HkEyxjPs6yB1ApZBmzlEJG7YuXiTOtXRXPaWD4hnL7
         Y7G5F1z+NcUN6jA883ewZUHqcroKqHhFIizO5K3vc63ivt3dmcPT+EC0KEHiWhcGPAbZ
         yT6Ox5/gnmg/K/yH+TpnbpjfDPrbR9f1e84uAx7+c1at6IFGWEbGdWk1C0v9h5qfOZpc
         wqg//bM5f2FzpD2LvCteYlNJkoW2Bvwd4ezcHc1JMLsDFBYq91YLhCSOOEqLeXOLp5u5
         LroQ==
X-Received: by 10.66.82.67 with SMTP id g3mr186356099pay.58.1357719030029;
        Wed, 09 Jan 2013 00:10:30 -0800 (PST)
Received: from [192.168.0.11] (cpe-98-145-203-109.socal.res.rr.com. [98.145.203.109])
        by mx.google.com with ESMTPS id nw9sm41202508pbb.42.2013.01.09.00.10.28
        (version=SSLv3 cipher=OTHER);
        Wed, 09 Jan 2013 00:10:29 -0800 (PST)
Message-ID: <50ED25E8.9030503@getrailo.org>
Date: Wed, 09 Jan 2013 00:10:16 -0800
From: "Igal @ getRailo.org" <igal@getrailo.org>
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:17.0) Gecko/17.0 Thunderbird/17.0
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Cannot instantiate SPI class
References: <50ECE9A8.9030502@getrailo.org> <009e01cdee3e$373055b0$a5910110$@thetaphi.de>
In-Reply-To: <009e01cdee3e$373055b0$a5910110$@thetaphi.de>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Gm-Message-State: ALoCoQkdKlLgE7aWT3oYDNWo7tGFbcUoUHayMxBO8zM7ANsCPD066kp3iGg3wM47xttSgVX9PAsy
X-Virus-Checked: Checked by ClamAV on apache.org

hi Uwe,

thank you for answering.  I believe that this is the complete stack 
trace, no (pasted again below)?

I'm actually not trying to do anything fancy with codecs etc.  I'm 
trying to do something very basic:  create an object of type 
indexWriterConfig.  the CFML (Railo) code is as follows:

     indexWriterConfig = createObject( "java", 
"org.apache.lucene.index.IndexWriterConfig" ).init( Lucene.Version, 
this.indexAnalyzer );

where Lucene.Version is an object of Lucene.VERSION_40 and 
this.indexAnalyzer is an Analyzer object that I create before.  one 
possible problem is that Railo ships with a very old version of Lucene, 
so I had to disable some of the jars that ship with Railo but I believe 
that I removed all of them.  I also had to disable a jar of 
apache-commons-codec that ships with Railo to avoid version conflicts.

stacktrace below:

Cannot instantiate SPI class: 
org.apache.lucene.codecs.appending.AppendingCodec at 
org.apache.lucene.util.NamedSPILoader.lookup(NamedSPILoader.java:104):104 at 
org.apache.lucene.codecs.PostingsFormat.forName(PostingsFormat.java:100):100 
at 
org.apache.lucene.codecs.lucene40.Lucene40Codec.<init>(Lucene40Codec.java:114):114 
at 
org.apache.lucene.codecs.appending.AppendingCodec.<init>(AppendingCodec.java:34):34 
at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native 
Method):-2 at 
sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source):-1 
at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown 
Source):-1 at java.lang.reflect.Constructor.newInstance(Unknown 
Source):-1 at java.lang.Class.newInstance0(Unknown Source):-1 at 
java.lang.Class.newInstance(Unknown Source):-1 at 
org.apache.lucene.util.NamedSPILoader.reload(NamedSPILoader.java:62):62 
at 
org.apache.lucene.util.NamedSPILoader.<init>(NamedSPILoader.java:42):42 
at 
org.apache.lucene.util.NamedSPILoader.<init>(NamedSPILoader.java:37):37 
at org.apache.lucene.codecs.Codec.<clinit>(Codec.java:41):41 at 
org.apache.lucene.index.LiveIndexWriterConfig.<init>(LiveIndexWriterConfig.java:118):118 
at 
org.apache.lucene.index.IndexWriterConfig.<init>(IndexWriterConfig.java:145):145 
at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native 
Method):-2 at 
sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source):-1 
at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown 
Source):-1 at java.lang.reflect.Constructor.newInstance(Unknown 
Source):-1 at 
railo.runtime.reflection.pairs.ConstructorInstance.invoke(ConstructorInstance.java:34):34 
at 
railo.runtime.reflection.Reflector.callConstructor(Reflector.java:653):653 
at railo.runtime.java.JavaObject.init(JavaObject.java:311):311 at 
railo.runtime.java.JavaObject.call(JavaObject.java:235):235 at 
railo.runtime.java.JavaObject.call(JavaObject.java:272):272 at 
railo.runtime.util.VariableUtilImpl.callFunctionWithoutNamedValues(VariableUtilImpl.java:723):723 
at 
railo.runtime.PageContextImpl.getFunction(PageContextImpl.java:1506):1506 at 
s21.search.lucene4search_cfc$cf._1(E:\Websites\_S21WAF\CFC\s21\search\Lucene4Search.cfc:92):92 
at 
s21.search.lucene4search_cfc$cf.udfCall(E:\Websites\_S21WAF\CFC\s21\search\Lucene4Search.cfc):-1 
at railo.runtime.type.UDFImpl.implementation(UDFImpl.java:103):103 at 
railo.runtime.type.UDFImpl._call(UDFImpl.java:371):371 at 
railo.runtime.type.UDFImpl.call(UDFImpl.java:284):284 at 
railo.runtime.type.scope.UndefinedImpl.call(UndefinedImpl.java:775):775 
at 
railo.runtime.util.VariableUtilImpl.callFunctionWithoutNamedValues(VariableUtilImpl.java:723):723 
at 
railo.runtime.PageContextImpl.getFunction(PageContextImpl.java:1506):1506 at 
s21.search.lucene4search_cfc$cf._1(E:\Websites\_S21WAF\CFC\s21\search\Lucene4Search.cfc:142):142 
at 
s21.search.lucene4search_cfc$cf.udfCall(E:\Websites\_S21WAF\CFC\s21\search\Lucene4Search.cfc):-1 
at railo.runtime.type.UDFImpl.implementation(UDFImpl.java:103):103 at 
railo.runtime.type.UDFImpl._call(UDFImpl.java:371):371 at 
railo.runtime.type.UDFImpl.call(UDFImpl.java:284):284 at 
railo.runtime.ComponentImpl._call(ComponentImpl.java:572):572 at 
railo.runtime.ComponentImpl._call(ComponentImpl.java:490):490 at 
railo.runtime.ComponentImpl.call(ComponentImpl.java:1781):1781 at 
railo.runtime.util.VariableUtilImpl.callFunctionWithoutNamedValues(VariableUtilImpl.java:723):723 
at 
railo.runtime.PageContextImpl.getFunction(PageContextImpl.java:1506):1506 at 
_test.lucene4_cfm$cf.call(E:\Websites\21solutions\_test\lucene4.cfm:14):14 
at railo.runtime.PageContextImpl.doInclude(PageContextImpl.java:772):772 
at railo.runtime.PageContextImpl.doInclude(PageContextImpl.java:753):753 
at 
railo.runtime.listener.ModernAppListener._onRequest(ModernAppListener.java:183):183 
at 
railo.runtime.listener.MixedAppListener.onRequest(MixedAppListener.java:18):18 
at railo.runtime.PageContextImpl.execute(PageContextImpl.java:2255):2255 
at railo.runtime.PageContextImpl.execute(PageContextImpl.java:2222):2222 
at 
railo.runtime.engine.CFMLEngineImpl.serviceCFML(CFMLEngineImpl.java:315):315 
at railo.loader.servlet.CFMLServlet.service(CFMLServlet.java:29):29 at 
javax.servlet.http.HttpServlet.service(HttpServlet.java:722):722 at 
org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305):305 
at 
org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210):210 
at 
net.twentyonesolutions.servlet.filters.RequestThreadsMonitor.doFilter(RequestThreadsMonitor.java:152):152 
at 
org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243):243 
at 
org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210):210 
at 
net.twentyonesolutions.servlet.filters.BlockedIpFilter.doFilter(BlockedIpFilter.java:90):90 
at 
org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243):243 
at 
org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210):210 
at 
org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222):222 
at 
org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123):123 
at 
org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168):168 
at 
org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99):99 
at 
org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118):118 
at 
org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407):407 
at 
org.apache.coyote.ajp.AjpAprProcessor.process(AjpAprProcessor.java:197):197 
at 
org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:585):585 
at 
org.apache.tomcat.util.net.AprEndpoint$SocketProcessor.run(AprEndpoint.java:1813):1813 
at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source):-1 
at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source):-1 
at java.lang.Thread.run(Unknown Source):-1

thanks,


Igal


On 1/8/2013 11:52 PM, Uwe Schindler wrote:
> Hi,
>
> can you give the *full* stack trace including nested Exceptions (root causes)? There is also the problem, that the line numbers are not matching the ones from Lucene 4.0 - so maybe you are using different JAR versions in your webapp? This could be caused e.g. by an older lucene 4.0 JAR file together with codecs.jar of a different version. Please make sure that all JAR files are next to each other in the same classloader.
>
> The problem here is *not* that the lucene-codecs.jar file is missing or the class was not found. Ignoring the line numbers and looking at the "message" text, the problem here is that the code was not able to create an instance of that class, but it already found and loaded it. The problem here is that you did not post the nested Exception so there is no chance to say, why calling the constructor failed. One reason may be a security manager in your application server, preventing to init the class, but this cannot be checked unless I have the full stack trace.
>
> Does it work if you use standard codec? Why do you use appending? What happens when yu use only lucene-core.jar and use the default codec only? If you don't use appending codec then there is something really crazy with your setup and we need, in any case, the full stack trace.
>
> Uwe
>
> -----
> Uwe Schindler
> H.-H.-Meier-Allee 63, D-28213 Bremen
> http://www.thetaphi.de
> eMail: uwe@thetaphi.de
>
>
>> -----Original Message-----
>> From: Igal @ getRailo.org [mailto:igal@getrailo.org]
>> Sent: Wednesday, January 09, 2013 4:53 AM
>> To: java-user@lucene.apache.org
>> Subject: Cannot instantiate SPI class
>>
>> I'm trying to access Lucene4 from Railo (an open-source application server)
>>
>> when I try to create an IndexWriterConfig I get the error:  Cannot
>> instantiate SPI class: org.apache.lucene.codecs.appending.AppendingCodec
>>
>> any ideas?
>>
>> TIA
>>
>> stacktrace below:
>>
>> Cannot instantiate SPI class:
>> org.apache.lucene.codecs.appending.AppendingCodec at
>> org.apache.lucene.util.NamedSPILoader.lookup(NamedSPILoader.java:104):
>> 104 at
>> org.apache.lucene.codecs.PostingsFormat.forName(PostingsFormat.java:10
>> 0):100
>> at
>> org.apache.lucene.codecs.lucene40.Lucene40Codec.<init>(Lucene40Codec.j
>> ava:114):114
>> at
>> org.apache.lucene.codecs.appending.AppendingCodec.<init>(AppendingCo
>> dec.java:34):34
>> at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native
>> Method):-2 at
>> sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source):-
>> 1
>> at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown
>> Source):-1 at java.lang.reflect.Constructor.newInstance(Unknown
>> Source):-1 at java.lang.Class.newInstance0(Unknown Source):-1 at
>> java.lang.Class.newInstance(Unknown Source):-1 at
>> org.apache.lucene.util.NamedSPILoader.reload(NamedSPILoader.java:62):62
>> at
>> org.apache.lucene.util.NamedSPILoader.<init>(NamedSPILoader.java:42):42
>> at
>> org.apache.lucene.util.NamedSPILoader.<init>(NamedSPILoader.java:37):37
>> at org.apache.lucene.codecs.Codec.<clinit>(Codec.java:41):41 at
>> org.apache.lucene.index.LiveIndexWriterConfig.<init>(LiveIndexWriterConfi
>> g.java:118):118
>> at
>> org.apache.lucene.index.IndexWriterConfig.<init>(IndexWriterConfig.java:1
>> 45):145
>> at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native
>> Method):-2 at
>> sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source):-
>> 1
>> at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown
>> Source):-1 at java.lang.reflect.Constructor.newInstance(Unknown
>> Source):-1 at
>> railo.runtime.reflection.pairs.ConstructorInstance.invoke(ConstructorInstanc
>> e.java:34):34
>> at
>> railo.runtime.reflection.Reflector.callConstructor(Reflector.java:653):653
>> at railo.runtime.java.JavaObject.init(JavaObject.java:311):311 at
>> railo.runtime.java.JavaObject.call(JavaObject.java:235):235 at
>> railo.runtime.java.JavaObject.call(JavaObject.java:272):272 at
>> railo.runtime.util.VariableUtilImpl.callFunctionWithoutNamedValues(Variabl
>> eUtilImpl.java:723):723
>> at
>> railo.runtime.PageContextImpl.getFunction(PageContextImpl.java:1506):150
>> 6 at
>> s21.search.lucene4search_cfc$cf._1(E:\Websites\_S21WAF\CFC\s21\search\
>> Lucene4Search.cfc:92):92
>> at
>> s21.search.lucene4search_cfc$cf.udfCall(E:\Websites\_S21WAF\CFC\s21\sea
>> rch\Lucene4Search.cfc):-1
>> at railo.runtime.type.UDFImpl.implementation(UDFImpl.java:103):103 at
>> railo.runtime.type.UDFImpl._call(UDFImpl.java:371):371 at
>> railo.runtime.type.UDFImpl.call(UDFImpl.java:284):284 at
>> railo.runtime.type.scope.UndefinedImpl.call(UndefinedImpl.java:775):775
>> at
>> railo.runtime.util.VariableUtilImpl.callFunctionWithoutNamedValues(Variabl
>> eUtilImpl.java:723):723
>> at
>> railo.runtime.PageContextImpl.getFunction(PageContextImpl.java:1506):150
>> 6 at
>> s21.search.lucene4search_cfc$cf._1(E:\Websites\_S21WAF\CFC\s21\search\
>> Lucene4Search.cfc:142):142
>> at
>> s21.search.lucene4search_cfc$cf.udfCall(E:\Websites\_S21WAF\CFC\s21\sea
>> rch\Lucene4Search.cfc):-1
>> at railo.runtime.type.UDFImpl.implementation(UDFImpl.java:103):103 at
>> railo.runtime.type.UDFImpl._call(UDFImpl.java:371):371 at
>> railo.runtime.type.UDFImpl.call(UDFImpl.java:284):284 at
>> railo.runtime.ComponentImpl._call(ComponentImpl.java:572):572 at
>> railo.runtime.ComponentImpl._call(ComponentImpl.java:490):490 at
>> railo.runtime.ComponentImpl.call(ComponentImpl.java:1781):1781 at
>> railo.runtime.util.VariableUtilImpl.callFunctionWithoutNamedValues(Variabl
>> eUtilImpl.java:723):723
>> at
>> railo.runtime.PageContextImpl.getFunction(PageContextImpl.java:1506):150
>> 6 at
>> _test.lucene4_cfm$cf.call(E:\Websites\21solutions\_test\lucene4.cfm:14):14
>> at railo.runtime.PageContextImpl.doInclude(PageContextImpl.java:772):772
>> at railo.runtime.PageContextImpl.doInclude(PageContextImpl.java:753):753
>> at
>> railo.runtime.listener.ModernAppListener._onRequest(ModernAppListener.
>> java:183):183
>> at
>> railo.runtime.listener.MixedAppListener.onRequest(MixedAppListener.java:
>> 18):18
>> at railo.runtime.PageContextImpl.execute(PageContextImpl.java:2255):2255
>> at railo.runtime.PageContextImpl.execute(PageContextImpl.java:2222):2222
>> at
>> railo.runtime.engine.CFMLEngineImpl.serviceCFML(CFMLEngineImpl.java:31
>> 5):315
>> at railo.loader.servlet.CFMLServlet.service(CFMLServlet.java:29):29 at
>> javax.servlet.http.HttpServlet.service(HttpServlet.java:722):722 at
>> org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFi
>> lterChain.java:305):305
>> at
>> org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChai
>> n.java:210):210
>> at
>> net.twentyonesolutions.servlet.filters.RequestThreadsMonitor.doFilter(Req
>> uestThreadsMonitor.java:152):152
>> at
>> org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFi
>> lterChain.java:243):243
>> at
>> org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChai
>> n.java:210):210
>> at
>> net.twentyonesolutions.servlet.filters.BlockedIpFilter.doFilter(BlockedIpFilte
>> r.java:90):90
>> at
>> org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFi
>> lterChain.java:243):243
>> at
>> org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChai
>> n.java:210):210
>> at
>> org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperV
>> alve.java:222):222
>> at
>> org.apache.catalina.core.StandardContextValve.invoke(StandardContextVal
>> ve.java:123):123
>> at
>> org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:
>> 168):168
>> at
>> org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:9
>> 9):99
>> at
>> org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.
>> java:118):118
>> at
>> org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:4
>> 07):407
>> at
>> org.apache.coyote.ajp.AjpAprProcessor.process(AjpAprProcessor.java:197):
>> 197
>> at
>> org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(Ab
>> stractProtocol.java:585):585
>> at
>> org.apache.tomcat.util.net.AprEndpoint$SocketProcessor.run(AprEndpoint.j
>> ava:1813):1813
>> at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source):-1
>> at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source):-
>> 1
>> at java.lang.Thread.run(Unknown Source):-1
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54603-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jan  9 08:28:24 2013
Return-Path: <java-user-return-54603-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id EB8CCE400
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed,  9 Jan 2013 08:28:24 +0000 (UTC)
Received: (qmail 23947 invoked by uid 500); 9 Jan 2013 08:28:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23331 invoked by uid 500); 9 Jan 2013 08:28:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23307 invoked by uid 99); 9 Jan 2013 08:28:21 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jan 2013 08:28:21 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of uwe@thetaphi.de designates 188.138.97.18 as permitted sender)
Received: from [188.138.97.18] (HELO mail.sd-datasolutions.de) (188.138.97.18)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jan 2013 08:28:14 +0000
Received: from VEGA (port-92-196-61-239.dynamic.qsc.de [92.196.61.239])
	by mail.sd-datasolutions.de (Postfix) with ESMTPSA id 26FB114AA06D
	for <java-user@lucene.apache.org>; Wed,  9 Jan 2013 08:27:53 +0000 (UTC)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <50ECE9A8.9030502@getrailo.org> <009e01cdee3e$373055b0$a5910110$@thetaphi.de> <50ED25E8.9030503@getrailo.org>
In-Reply-To: <50ED25E8.9030503@getrailo.org>
Subject: RE: Cannot instantiate SPI class
Date: Wed, 9 Jan 2013 09:27:53 +0100
Message-ID: <00a801cdee43$3880b130$a9821390$@thetaphi.de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="utf-8"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Outlook 14.0
Thread-Index: AQKpIa5Iu4ydFXBzaHCl/pvjG6KIoQMVy2R/AnKO3bKWXf3/oA==
Content-Language: de
X-Virus-Checked: Checked by ClamAV on apache.org

>      indexWriterConfig =3D createObject( "java",
> "org.apache.lucene.index.IndexWriterConfig" ).init( Lucene.Version,
> this.indexAnalyzer );

What syntax is that, I have never seen that before!

> where Lucene.Version is an object of Lucene.VERSION_40 and
> this.indexAnalyzer is an Analyzer object that I create before.  one =
possible
> problem is that Railo ships with a very old version of Lucene, so I =
had to
> disable some of the jars that ship with Railo but I believe that I =
removed all of
> them.  I also had to disable a jar of apache-commons-codec that ships =
with
> Railo to avoid version conflicts.
> stacktrace below:
>=20

Which still does not contain the root cause (this comes *after* the =
stack trace), printed like:

Cannot instantiate SPI class:=20
org.apache.lucene.codecs.appending.AppendingCodec at=20
org.apache.lucene.util.NamedSPILoader.lookup(NamedSPILoader.java:104):104=
 at
....<lots of stack trace, mostly uninteresting>...
Caused by: other Exception stack trace

I need everything behind Caused By.

I must tell you: The line numbers in this stack trace don't correspond =
to the ones officially released Lucene 4.0, so it looks like you have a =
version mismatch, maybe involving alpha/beta/snapshot versions of =
Lucene, and one of these old versions is causing the bug, that was =
already mentioned by Steven. Line 104 in NamedSPILoader of Lucene 4.0 =
has different code, so I think your lucene-core.jar file is outdated.

2nd: If you don't have lucene-codecs.jar, then this error *cannot* =
happen! If it happens, you have some lucene-codecs.jar file with a =
different Lucene version on your classpath. What's the error *without* =
lucene codecs.jar? (you don=E2=80=99t need that file!)

Uwe

> Cannot instantiate SPI class:
> org.apache.lucene.codecs.appending.AppendingCodec at
> org.apache.lucene.util.NamedSPILoader.lookup(NamedSPILoader.java:104):
> 104 at
> org.apache.lucene.codecs.PostingsFormat.forName(PostingsFormat.java:10
> 0):100
> at
> org.apache.lucene.codecs.lucene40.Lucene40Codec.<init>(Lucene40Codec.j
> ava:114):114
> at
> org.apache.lucene.codecs.appending.AppendingCodec.<init>(AppendingCo
> dec.java:34):34
> at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native
> Method):-2 at
> sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown =
Source):-
> 1 at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown
> Source):-1 at java.lang.reflect.Constructor.newInstance(Unknown
> Source):-1 at java.lang.Class.newInstance0(Unknown Source):-1 at
> java.lang.Class.newInstance(Unknown Source):-1 at
> =
org.apache.lucene.util.NamedSPILoader.reload(NamedSPILoader.java:62):62
> at
> =
org.apache.lucene.util.NamedSPILoader.<init>(NamedSPILoader.java:42):42
> at
> =
org.apache.lucene.util.NamedSPILoader.<init>(NamedSPILoader.java:37):37
> at org.apache.lucene.codecs.Codec.<clinit>(Codec.java:41):41 at
> =
org.apache.lucene.index.LiveIndexWriterConfig.<init>(LiveIndexWriterConfi=

> g.java:118):118
> at
> =
org.apache.lucene.index.IndexWriterConfig.<init>(IndexWriterConfig.java:1=

> 45):145
> at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native
> Method):-2 at
> sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown =
Source):-
> 1 at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown
> Source):-1 at java.lang.reflect.Constructor.newInstance(Unknown
> Source):-1 at
> =
railo.runtime.reflection.pairs.ConstructorInstance.invoke(ConstructorInst=
anc
> e.java:34):34
> at
> =
railo.runtime.reflection.Reflector.callConstructor(Reflector.java:653):65=
3
> at railo.runtime.java.JavaObject.init(JavaObject.java:311):311 at
> railo.runtime.java.JavaObject.call(JavaObject.java:235):235 at
> railo.runtime.java.JavaObject.call(JavaObject.java:272):272 at
> =
railo.runtime.util.VariableUtilImpl.callFunctionWithoutNamedValues(Variab=
l
> eUtilImpl.java:723):723
> at
> =
railo.runtime.PageContextImpl.getFunction(PageContextImpl.java:1506):150
> 6 at
> s21.search.lucene4search_cfc$cf._1(E:\Websites\_S21WAF\CFC\s21\search\
> Lucene4Search.cfc:92):92
> at
> =
s21.search.lucene4search_cfc$cf.udfCall(E:\Websites\_S21WAF\CFC\s21\sea
> rch\Lucene4Search.cfc):-1
> at railo.runtime.type.UDFImpl.implementation(UDFImpl.java:103):103 at
> railo.runtime.type.UDFImpl._call(UDFImpl.java:371):371 at
> railo.runtime.type.UDFImpl.call(UDFImpl.java:284):284 at
> =
railo.runtime.type.scope.UndefinedImpl.call(UndefinedImpl.java:775):775
> at
> =
railo.runtime.util.VariableUtilImpl.callFunctionWithoutNamedValues(Variab=
l
> eUtilImpl.java:723):723
> at
> =
railo.runtime.PageContextImpl.getFunction(PageContextImpl.java:1506):150
> 6 at
> s21.search.lucene4search_cfc$cf._1(E:\Websites\_S21WAF\CFC\s21\search\
> Lucene4Search.cfc:142):142
> at
> =
s21.search.lucene4search_cfc$cf.udfCall(E:\Websites\_S21WAF\CFC\s21\sea
> rch\Lucene4Search.cfc):-1
> at railo.runtime.type.UDFImpl.implementation(UDFImpl.java:103):103 at
> railo.runtime.type.UDFImpl._call(UDFImpl.java:371):371 at
> railo.runtime.type.UDFImpl.call(UDFImpl.java:284):284 at
> railo.runtime.ComponentImpl._call(ComponentImpl.java:572):572 at
> railo.runtime.ComponentImpl._call(ComponentImpl.java:490):490 at
> railo.runtime.ComponentImpl.call(ComponentImpl.java:1781):1781 at
> =
railo.runtime.util.VariableUtilImpl.callFunctionWithoutNamedValues(Variab=
l
> eUtilImpl.java:723):723
> at
> =
railo.runtime.PageContextImpl.getFunction(PageContextImpl.java:1506):150
> 6 at
> =
_test.lucene4_cfm$cf.call(E:\Websites\21solutions\_test\lucene4.cfm:14):1=
4
> at =
railo.runtime.PageContextImpl.doInclude(PageContextImpl.java:772):772
> at =
railo.runtime.PageContextImpl.doInclude(PageContextImpl.java:753):753
> at
> railo.runtime.listener.ModernAppListener._onRequest(ModernAppListener.
> java:183):183
> at
> =
railo.runtime.listener.MixedAppListener.onRequest(MixedAppListener.java:
> 18):18
> at =
railo.runtime.PageContextImpl.execute(PageContextImpl.java:2255):2255
> at =
railo.runtime.PageContextImpl.execute(PageContextImpl.java:2222):2222
> at
> railo.runtime.engine.CFMLEngineImpl.serviceCFML(CFMLEngineImpl.java:31
> 5):315
> at railo.loader.servlet.CFMLServlet.service(CFMLServlet.java:29):29 at
> javax.servlet.http.HttpServlet.service(HttpServlet.java:722):722 at
> =
org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Applicat=
ionFi
> lterChain.java:305):305
> at
> =
org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilte=
rChai
> n.java:210):210
> at
> =
net.twentyonesolutions.servlet.filters.RequestThreadsMonitor.doFilter(Req=

> uestThreadsMonitor.java:152):152
> at
> =
org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Applicat=
ionFi
> lterChain.java:243):243
> at
> =
org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilte=
rChai
> n.java:210):210
> at
> =
net.twentyonesolutions.servlet.filters.BlockedIpFilter.doFilter(BlockedIp=
Filte
> r.java:90):90
> at
> =
org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Applicat=
ionFi
> lterChain.java:243):243
> at
> =
org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilte=
rChai
> n.java:210):210
> at
> org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperV
> alve.java:222):222
> at
> =
org.apache.catalina.core.StandardContextValve.invoke(StandardContextVal
> ve.java:123):123
> at
> =
org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:=

> 168):168
> at
> =
org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:=
9
> 9):99
> at
> =
org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.
> java:118):118
> at
> =
org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:4
> 07):407
> at
> =
org.apache.coyote.ajp.AjpAprProcessor.process(AjpAprProcessor.java:197):
> 197
> at
> =
org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(Ab
> stractProtocol.java:585):585
> at
> =
org.apache.tomcat.util.net.AprEndpoint$SocketProcessor.run(AprEndpoint.j
> ava:1813):1813
> at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown =
Source):-1
> at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown =
Source):-
> 1 at java.lang.Thread.run(Unknown Source):-1
>=20
> thanks,
>=20
>=20
> Igal
>=20
>=20
> On 1/8/2013 11:52 PM, Uwe Schindler wrote:
> > Hi,
> >
> > can you give the *full* stack trace including nested Exceptions =
(root
> causes)? There is also the problem, that the line numbers are not =
matching
> the ones from Lucene 4.0 - so maybe you are using different JAR =
versions in
> your webapp? This could be caused e.g. by an older lucene 4.0 JAR file
> together with codecs.jar of a different version. Please make sure that =
all JAR
> files are next to each other in the same classloader.
> >
> > The problem here is *not* that the lucene-codecs.jar file is missing =
or the
> class was not found. Ignoring the line numbers and looking at the =
"message"
> text, the problem here is that the code was not able to create an =
instance of
> that class, but it already found and loaded it. The problem here is =
that you did
> not post the nested Exception so there is no chance to say, why =
calling the
> constructor failed. One reason may be a security manager in your =
application
> server, preventing to init the class, but this cannot be checked =
unless I have
> the full stack trace.
> >
> > Does it work if you use standard codec? Why do you use appending? =
What
> happens when yu use only lucene-core.jar and use the default codec =
only? If
> you don't use appending codec then there is something really crazy =
with your
> setup and we need, in any case, the full stack trace.
> >
> > Uwe
> >
> > -----
> > Uwe Schindler
> > H.-H.-Meier-Allee 63, D-28213 Bremen
> > http://www.thetaphi.de
> > eMail: uwe@thetaphi.de
> >
> >
> >> -----Original Message-----
> >> From: Igal @ getRailo.org [mailto:igal@getrailo.org]
> >> Sent: Wednesday, January 09, 2013 4:53 AM
> >> To: java-user@lucene.apache.org
> >> Subject: Cannot instantiate SPI class
> >>
> >> I'm trying to access Lucene4 from Railo (an open-source application
> >> server)
> >>
> >> when I try to create an IndexWriterConfig I get the error:  Cannot
> >> instantiate SPI class:
> >> org.apache.lucene.codecs.appending.AppendingCodec
> >>
> >> any ideas?
> >>
> >> TIA
> >>
> >> stacktrace below:
> >>
> >> Cannot instantiate SPI class:
> >> org.apache.lucene.codecs.appending.AppendingCodec at
> >>
> org.apache.lucene.util.NamedSPILoader.lookup(NamedSPILoader.java:104):
> >> 104 at
> >>
> org.apache.lucene.codecs.PostingsFormat.forName(PostingsFormat.java:1
> >> 0
> >> 0):100
> >> at
> >>
> org.apache.lucene.codecs.lucene40.Lucene40Codec.<init>(Lucene40Codec.
> >> j
> >> ava:114):114
> >> at
> >>
> org.apache.lucene.codecs.appending.AppendingCodec.<init>(AppendingCo
> >> dec.java:34):34
> >> at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native
> >> Method):-2 at
> >> sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown
> >> Source):-
> >> 1
> >> at =
sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown
> >> Source):-1 at java.lang.reflect.Constructor.newInstance(Unknown
> >> Source):-1 at java.lang.Class.newInstance0(Unknown Source):-1 at
> >> java.lang.Class.newInstance(Unknown Source):-1 at
> >>
> org.apache.lucene.util.NamedSPILoader.reload(NamedSPILoader.java:62):
> >> 62
> >> at
> >>
> org.apache.lucene.util.NamedSPILoader.<init>(NamedSPILoader.java:42):
> >> 42
> >> at
> >>
> org.apache.lucene.util.NamedSPILoader.<init>(NamedSPILoader.java:37):
> >> 37 at org.apache.lucene.codecs.Codec.<clinit>(Codec.java:41):41 at
> >> =
org.apache.lucene.index.LiveIndexWriterConfig.<init>(LiveIndexWriterC
> >> onfi
> >> g.java:118):118
> >> at
> >> =
org.apache.lucene.index.IndexWriterConfig.<init>(IndexWriterConfig.ja
> >> va:1
> >> 45):145
> >> at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native
> >> Method):-2 at
> >> sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown
> >> Source):-
> >> 1
> >> at =
sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown
> >> Source):-1 at java.lang.reflect.Constructor.newInstance(Unknown
> >> Source):-1 at
> >> =
railo.runtime.reflection.pairs.ConstructorInstance.invoke(Constructor
> >> Instanc
> >> e.java:34):34
> >> at
> >> =
railo.runtime.reflection.Reflector.callConstructor(Reflector.java:653
> >> ):653 at =
railo.runtime.java.JavaObject.init(JavaObject.java:311):311
> >> at
> >> railo.runtime.java.JavaObject.call(JavaObject.java:235):235 at
> >> railo.runtime.java.JavaObject.call(JavaObject.java:272):272 at
> >> =
railo.runtime.util.VariableUtilImpl.callFunctionWithoutNamedValues(Va
> >> riabl
> >> eUtilImpl.java:723):723
> >> at
> >> =
railo.runtime.PageContextImpl.getFunction(PageContextImpl.java:1506):
> >> 150
> >> 6 at
> >>
> s21.search.lucene4search_cfc$cf._1(E:\Websites\_S21WAF\CFC\s21\search
> >> \
> >> Lucene4Search.cfc:92):92
> >> at
> >>
> s21.search.lucene4search_cfc$cf.udfCall(E:\Websites\_S21WAF\CFC\s21\s
> >> ea
> >> rch\Lucene4Search.cfc):-1
> >> at railo.runtime.type.UDFImpl.implementation(UDFImpl.java:103):103 =
at
> >> railo.runtime.type.UDFImpl._call(UDFImpl.java:371):371 at
> >> railo.runtime.type.UDFImpl.call(UDFImpl.java:284):284 at
> >> =
railo.runtime.type.scope.UndefinedImpl.call(UndefinedImpl.java:775):7
> >> 75
> >> at
> >> =
railo.runtime.util.VariableUtilImpl.callFunctionWithoutNamedValues(Va
> >> riabl
> >> eUtilImpl.java:723):723
> >> at
> >> =
railo.runtime.PageContextImpl.getFunction(PageContextImpl.java:1506):
> >> 150
> >> 6 at
> >>
> s21.search.lucene4search_cfc$cf._1(E:\Websites\_S21WAF\CFC\s21\search
> >> \
> >> Lucene4Search.cfc:142):142
> >> at
> >>
> s21.search.lucene4search_cfc$cf.udfCall(E:\Websites\_S21WAF\CFC\s21\s
> >> ea
> >> rch\Lucene4Search.cfc):-1
> >> at railo.runtime.type.UDFImpl.implementation(UDFImpl.java:103):103 =
at
> >> railo.runtime.type.UDFImpl._call(UDFImpl.java:371):371 at
> >> railo.runtime.type.UDFImpl.call(UDFImpl.java:284):284 at
> >> railo.runtime.ComponentImpl._call(ComponentImpl.java:572):572 at
> >> railo.runtime.ComponentImpl._call(ComponentImpl.java:490):490 at
> >> railo.runtime.ComponentImpl.call(ComponentImpl.java:1781):1781 at
> >> =
railo.runtime.util.VariableUtilImpl.callFunctionWithoutNamedValues(Va
> >> riabl
> >> eUtilImpl.java:723):723
> >> at
> >> =
railo.runtime.PageContextImpl.getFunction(PageContextImpl.java:1506):
> >> 150
> >> 6 at
> >> =
_test.lucene4_cfm$cf.call(E:\Websites\21solutions\_test\lucene4.cfm:1
> >> 4):14 at
> >> =
railo.runtime.PageContextImpl.doInclude(PageContextImpl.java:772):772
> >> at
> >> =
railo.runtime.PageContextImpl.doInclude(PageContextImpl.java:753):753
> >> at
> >>
> railo.runtime.listener.ModernAppListener._onRequest(ModernAppListener.
> >> java:183):183
> >> at
> >>
> =
railo.runtime.listener.MixedAppListener.onRequest(MixedAppListener.java:
> >> 18):18
> >> at
> >>
> railo.runtime.PageContextImpl.execute(PageContextImpl.java:2255):2255
> >> at
> >>
> railo.runtime.PageContextImpl.execute(PageContextImpl.java:2222):2222
> >> at
> >>
> railo.runtime.engine.CFMLEngineImpl.serviceCFML(CFMLEngineImpl.java:3
> >> 1
> >> 5):315
> >> at railo.loader.servlet.CFMLServlet.service(CFMLServlet.java:29):29
> >> at
> >> javax.servlet.http.HttpServlet.service(HttpServlet.java:722):722 at
> >> =
org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Appl
> >> icationFi
> >> lterChain.java:305):305
> >> at
> >> =
org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationF
> >> ilterChai
> >> n.java:210):210
> >> at
> >> =
net.twentyonesolutions.servlet.filters.RequestThreadsMonitor.doFilter
> >> (Req
> >> uestThreadsMonitor.java:152):152
> >> at
> >> =
org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Appl
> >> icationFi
> >> lterChain.java:243):243
> >> at
> >> =
org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationF
> >> ilterChai
> >> n.java:210):210
> >> at
> >> =
net.twentyonesolutions.servlet.filters.BlockedIpFilter.doFilter(Block
> >> edIpFilte
> >> r.java:90):90
> >> at
> >> =
org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Appl
> >> icationFi
> >> lterChain.java:243):243
> >> at
> >> =
org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationF
> >> ilterChai
> >> n.java:210):210
> >> at
> >>
> org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperV
> >> alve.java:222):222
> >> at
> >>
> org.apache.catalina.core.StandardContextValve.invoke(StandardContextV
> >> al
> >> ve.java:123):123
> >> at
> >>
> =
org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:=

> >> 168):168
> >> at
> >> =
org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.j
> >> ava:9
> >> 9):99
> >> at
> >>
> =
org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.
> >> java:118):118
> >> at
> >> =
org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.jav
> >> a:4
> >> 07):407
> >> at
> >>
> =
org.apache.coyote.ajp.AjpAprProcessor.process(AjpAprProcessor.java:197):
> >> 197
> >> at
> >>
> org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(
> >> Ab
> >> stractProtocol.java:585):585
> >> at
> >>
> org.apache.tomcat.util.net.AprEndpoint$SocketProcessor.run(AprEndpoin
> >> t.j
> >> ava:1813):1813
> >> at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown
> >> Source):-1 at
> >> java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown =
Source):-
> >> 1
> >> at java.lang.Thread.run(Unknown Source):-1
> >>
> >> =
---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> > =
---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54604-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jan  9 08:51:40 2013
Return-Path: <java-user-return-54604-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 02105E9AC
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed,  9 Jan 2013 08:51:40 +0000 (UTC)
Received: (qmail 82333 invoked by uid 500); 9 Jan 2013 08:51:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82259 invoked by uid 500); 9 Jan 2013 08:51:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82231 invoked by uid 99); 9 Jan 2013 08:51:36 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jan 2013 08:51:36 +0000
X-ASF-Spam-Status: No, hits=2.0 required=5.0
	tests=SPF_NEUTRAL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: 216.139.236.26 is neither permitted nor denied by domain of huj.nju@gmail.com)
Received: from [216.139.236.26] (HELO sam.nabble.com) (216.139.236.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jan 2013 08:51:30 +0000
Received: from ben.nabble.com ([192.168.236.152])
	by sam.nabble.com with esmtp (Exim 4.72)
	(envelope-from <huj.nju@gmail.com>)
	id 1TsrNN-0000pK-6s
	for java-user@lucene.apache.org; Wed, 09 Jan 2013 00:51:09 -0800
Date: Wed, 9 Jan 2013 00:51:09 -0800 (PST)
From: seacathello <huj.nju@gmail.com>
To: java-user@lucene.apache.org
Message-ID: <1357721469207-4031796.post@n3.nabble.com>
Subject: how much blocksize is set in lucene.
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

now i index very many email file, aboule 50m and every email file size about
4-50k.
the index lib size is aboule 1TB, segment size is only.

In this index lib, which blocksize should i shoose?
4k or 512k, which choice is better?
Thanks very much?



--
View this message in context: http://lucene.472066.n3.nabble.com/how-much-blocksize-is-set-in-lucene-tp4031796.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54605-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jan  9 08:52:23 2013
Return-Path: <java-user-return-54605-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id D23DFE9B9
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed,  9 Jan 2013 08:52:23 +0000 (UTC)
Received: (qmail 87410 invoked by uid 500); 9 Jan 2013 08:52:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87347 invoked by uid 500); 9 Jan 2013 08:52:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87338 invoked by uid 99); 9 Jan 2013 08:52:21 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jan 2013 08:52:21 +0000
X-ASF-Spam-Status: No, hits=2.0 required=5.0
	tests=SPF_NEUTRAL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: 216.139.236.26 is neither permitted nor denied by domain of huj.nju@gmail.com)
Received: from [216.139.236.26] (HELO sam.nabble.com) (216.139.236.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jan 2013 08:52:14 +0000
Received: from ben.nabble.com ([192.168.236.152])
	by sam.nabble.com with esmtp (Exim 4.72)
	(envelope-from <huj.nju@gmail.com>)
	id 1TsrO6-0000rS-Cq
	for java-user@lucene.apache.org; Wed, 09 Jan 2013 00:51:54 -0800
Date: Wed, 9 Jan 2013 00:51:54 -0800 (PST)
From: seacathello <huj.nju@gmail.com>
To: java-user@lucene.apache.org
Message-ID: <1357721514393-4031797.post@n3.nabble.com>
In-Reply-To: <1357721469207-4031796.post@n3.nabble.com>
References: <1357721469207-4031796.post@n3.nabble.com>
Subject: Re: how much blocksize is set in lucene.
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

the index lib size is aboule 1TB and have only one segment.



--
View this message in context: http://lucene.472066.n3.nabble.com/how-much-blocksize-is-set-in-lucene-tp4031796p4031797.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54606-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jan  9 10:01:23 2013
Return-Path: <java-user-return-54606-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 8A007E88C
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed,  9 Jan 2013 10:01:23 +0000 (UTC)
Received: (qmail 84266 invoked by uid 500); 9 Jan 2013 10:01:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83779 invoked by uid 500); 9 Jan 2013 10:01:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83746 invoked by uid 99); 9 Jan 2013 10:01:20 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jan 2013 10:01:20 +0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.223.172] (HELO mail-ie0-f172.google.com) (209.85.223.172)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jan 2013 10:01:11 +0000
Received: by mail-ie0-f172.google.com with SMTP id c13so1820670ieb.31
        for <java-user@lucene.apache.org>; Wed, 09 Jan 2013 02:00:50 -0800 (PST)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=mime-version:x-received:x-originating-ip:in-reply-to:references
         :date:message-id:subject:from:to:content-type:x-gm-message-state;
        bh=/UEDEslHW+0A5hJPaAUSZoFFqQ9hVkO2rlu44QRDY4M=;
        b=hUn3AKgbnPRlEP5qmtuDiIVA1j1x6GhfKDYgZYb3g4km23s8y6zLmviTs9pW/SIwjs
         93/6pTtrOAzJ2orV62LCUySY3Ayqk04kV9QHneY8k05pwbi/oupBHE9PL9c/sJ19xy3K
         f4n/nsbsS7v+baULhhk++7rrr2r/SuSglNVcM6q8ClMYD60F/ciaPR8yEzCSJpLddnkg
         ntWceFGyIMmpczyatYQF+lEeBoGgb2VVeRX0sLFhxllwFUxX/OsspyxjocuhuNQs4ZrS
         +yZ75MXkh9jRp/A3n6evCkrOJm/K4Rjj5nNKfYXOUgxFC/e2TLhzcbmSkn9NPTq6Q42V
         1SEQ==
MIME-Version: 1.0
X-Received: by 10.50.91.195 with SMTP id cg3mr939260igb.57.1357725649937; Wed,
 09 Jan 2013 02:00:49 -0800 (PST)
Received: by 10.231.204.195 with HTTP; Wed, 9 Jan 2013 02:00:49 -0800 (PST)
X-Originating-IP: [98.145.203.109]
Received: by 10.231.204.195 with HTTP; Wed, 9 Jan 2013 02:00:49 -0800 (PST)
In-Reply-To: <00a801cdee43$3880b130$a9821390$@thetaphi.de>
References: <50ECE9A8.9030502@getrailo.org>
	<009e01cdee3e$373055b0$a5910110$@thetaphi.de>
	<50ED25E8.9030503@getrailo.org>
	<00a801cdee43$3880b130$a9821390$@thetaphi.de>
Date: Wed, 9 Jan 2013 02:00:49 -0800
Message-ID: <CAF1=UQyQcV4BhV01echJbEdYvUhuO4gmgdvEDKxjaZ4jttQHfQ@mail.gmail.com>
Subject: RE: Cannot instantiate SPI class
From: Igal Sapir <igal@getrailo.org>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=e89a8f23532911241704d2d8232b
X-Gm-Message-State: ALoCoQl6a+gQhs4bPzXFMF0jZJSMQZkxT1weoS83cQN8x5GropcExfoaAoNX1gGqrTfD+I0SYbaG
X-Virus-Checked: Checked by ClamAV on apache.org

--e89a8f23532911241704d2d8232b
Content-Type: text/plain; charset=windows-1252
Content-Transfer-Encoding: quoted-printable

The syntax is CFML / CFScript (ColdFusion Script).  Railo is an open
source, high performance, ColdFusion server.  http://getrailo.arg/

I will re-download the Lucene jars and try again.  I'll let you know what I
find.

Thanks,

Igal

--
typos, misspels, and other weird words brought to you courtesy of my mobile
device.
On Jan 9, 2013 12:28 AM, "Uwe Schindler" <uwe@thetaphi.de> wrote:

> >      indexWriterConfig =3D createObject( "java",
> > "org.apache.lucene.index.IndexWriterConfig" ).init( Lucene.Version,
> > this.indexAnalyzer );
>
> What syntax is that, I have never seen that before!
>
> > where Lucene.Version is an object of Lucene.VERSION_40 and
> > this.indexAnalyzer is an Analyzer object that I create before.  one
> possible
> > problem is that Railo ships with a very old version of Lucene, so I had
> to
> > disable some of the jars that ship with Railo but I believe that I
> removed all of
> > them.  I also had to disable a jar of apache-commons-codec that ships
> with
> > Railo to avoid version conflicts.
> > stacktrace below:
> >
>
> Which still does not contain the root cause (this comes *after* the stack
> trace), printed like:
>
> Cannot instantiate SPI class:
> org.apache.lucene.codecs.appending.AppendingCodec at
> org.apache.lucene.util.NamedSPILoader.lookup(NamedSPILoader.java:104):104
> at
> ....<lots of stack trace, mostly uninteresting>...
> Caused by: other Exception stack trace
>
> I need everything behind Caused By.
>
> I must tell you: The line numbers in this stack trace don't correspond to
> the ones officially released Lucene 4.0, so it looks like you have a
> version mismatch, maybe involving alpha/beta/snapshot versions of Lucene,
> and one of these old versions is causing the bug, that was already
> mentioned by Steven. Line 104 in NamedSPILoader of Lucene 4.0 has differe=
nt
> code, so I think your lucene-core.jar file is outdated.
>
> 2nd: If you don't have lucene-codecs.jar, then this error *cannot* happen=
!
> If it happens, you have some lucene-codecs.jar file with a different Luce=
ne
> version on your classpath. What's the error *without* lucene codecs.jar?
> (you don=92t need that file!)
>
> Uwe
>
> > Cannot instantiate SPI class:
> > org.apache.lucene.codecs.appending.AppendingCodec at
> > org.apache.lucene.util.NamedSPILoader.lookup(NamedSPILoader.java:104):
> > 104 at
> > org.apache.lucene.codecs.PostingsFormat.forName(PostingsFormat.java:10
> > 0):100
> > at
> > org.apache.lucene.codecs.lucene40.Lucene40Codec.<init>(Lucene40Codec.j
> > ava:114):114
> > at
> > org.apache.lucene.codecs.appending.AppendingCodec.<init>(AppendingCo
> > dec.java:34):34
> > at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native
> > Method):-2 at
> > sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source):-
> > 1 at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown
> > Source):-1 at java.lang.reflect.Constructor.newInstance(Unknown
> > Source):-1 at java.lang.Class.newInstance0(Unknown Source):-1 at
> > java.lang.Class.newInstance(Unknown Source):-1 at
> > org.apache.lucene.util.NamedSPILoader.reload(NamedSPILoader.java:62):62
> > at
> > org.apache.lucene.util.NamedSPILoader.<init>(NamedSPILoader.java:42):42
> > at
> > org.apache.lucene.util.NamedSPILoader.<init>(NamedSPILoader.java:37):37
> > at org.apache.lucene.codecs.Codec.<clinit>(Codec.java:41):41 at
> > org.apache.lucene.index.LiveIndexWriterConfig.<init>(LiveIndexWriterCon=
fi
> > g.java:118):118
> > at
> > org.apache.lucene.index.IndexWriterConfig.<init>(IndexWriterConfig.java=
:1
> > 45):145
> > at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native
> > Method):-2 at
> > sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source):-
> > 1 at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown
> > Source):-1 at java.lang.reflect.Constructor.newInstance(Unknown
> > Source):-1 at
> >
> railo.runtime.reflection.pairs.ConstructorInstance.invoke(ConstructorInst=
anc
> > e.java:34):34
> > at
> >
> railo.runtime.reflection.Reflector.callConstructor(Reflector.java:653):65=
3
> > at railo.runtime.java.JavaObject.init(JavaObject.java:311):311 at
> > railo.runtime.java.JavaObject.call(JavaObject.java:235):235 at
> > railo.runtime.java.JavaObject.call(JavaObject.java:272):272 at
> >
> railo.runtime.util.VariableUtilImpl.callFunctionWithoutNamedValues(Variab=
l
> > eUtilImpl.java:723):723
> > at
> > railo.runtime.PageContextImpl.getFunction(PageContextImpl.java:1506):15=
0
> > 6 at
> > s21.search.lucene4search_cfc$cf._1(E:\Websites\_S21WAF\CFC\s21\search\
> > Lucene4Search.cfc:92):92
> > at
> > s21.search.lucene4search_cfc$cf.udfCall(E:\Websites\_S21WAF\CFC\s21\sea
> > rch\Lucene4Search.cfc):-1
> > at railo.runtime.type.UDFImpl.implementation(UDFImpl.java:103):103 at
> > railo.runtime.type.UDFImpl._call(UDFImpl.java:371):371 at
> > railo.runtime.type.UDFImpl.call(UDFImpl.java:284):284 at
> > railo.runtime.type.scope.UndefinedImpl.call(UndefinedImpl.java:775):775
> > at
> >
> railo.runtime.util.VariableUtilImpl.callFunctionWithoutNamedValues(Variab=
l
> > eUtilImpl.java:723):723
> > at
> > railo.runtime.PageContextImpl.getFunction(PageContextImpl.java:1506):15=
0
> > 6 at
> > s21.search.lucene4search_cfc$cf._1(E:\Websites\_S21WAF\CFC\s21\search\
> > Lucene4Search.cfc:142):142
> > at
> > s21.search.lucene4search_cfc$cf.udfCall(E:\Websites\_S21WAF\CFC\s21\sea
> > rch\Lucene4Search.cfc):-1
> > at railo.runtime.type.UDFImpl.implementation(UDFImpl.java:103):103 at
> > railo.runtime.type.UDFImpl._call(UDFImpl.java:371):371 at
> > railo.runtime.type.UDFImpl.call(UDFImpl.java:284):284 at
> > railo.runtime.ComponentImpl._call(ComponentImpl.java:572):572 at
> > railo.runtime.ComponentImpl._call(ComponentImpl.java:490):490 at
> > railo.runtime.ComponentImpl.call(ComponentImpl.java:1781):1781 at
> >
> railo.runtime.util.VariableUtilImpl.callFunctionWithoutNamedValues(Variab=
l
> > eUtilImpl.java:723):723
> > at
> > railo.runtime.PageContextImpl.getFunction(PageContextImpl.java:1506):15=
0
> > 6 at
> >
> _test.lucene4_cfm$cf.call(E:\Websites\21solutions\_test\lucene4.cfm:14):1=
4
> > at railo.runtime.PageContextImpl.doInclude(PageContextImpl.java:772):77=
2
> > at railo.runtime.PageContextImpl.doInclude(PageContextImpl.java:753):75=
3
> > at
> > railo.runtime.listener.ModernAppListener._onRequest(ModernAppListener.
> > java:183):183
> > at
> > railo.runtime.listener.MixedAppListener.onRequest(MixedAppListener.java=
:
> > 18):18
> > at railo.runtime.PageContextImpl.execute(PageContextImpl.java:2255):225=
5
> > at railo.runtime.PageContextImpl.execute(PageContextImpl.java:2222):222=
2
> > at
> > railo.runtime.engine.CFMLEngineImpl.serviceCFML(CFMLEngineImpl.java:31
> > 5):315
> > at railo.loader.servlet.CFMLServlet.service(CFMLServlet.java:29):29 at
> > javax.servlet.http.HttpServlet.service(HttpServlet.java:722):722 at
> >
> org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Applicat=
ionFi
> > lterChain.java:305):305
> > at
> >
> org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilte=
rChai
> > n.java:210):210
> > at
> > net.twentyonesolutions.servlet.filters.RequestThreadsMonitor.doFilter(R=
eq
> > uestThreadsMonitor.java:152):152
> > at
> >
> org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Applicat=
ionFi
> > lterChain.java:243):243
> > at
> >
> org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilte=
rChai
> > n.java:210):210
> > at
> >
> net.twentyonesolutions.servlet.filters.BlockedIpFilter.doFilter(BlockedIp=
Filte
> > r.java:90):90
> > at
> >
> org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Applicat=
ionFi
> > lterChain.java:243):243
> > at
> >
> org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilte=
rChai
> > n.java:210):210
> > at
> > org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperV
> > alve.java:222):222
> > at
> > org.apache.catalina.core.StandardContextValve.invoke(StandardContextVal
> > ve.java:123):123
> > at
> > org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.jav=
a:
> > 168):168
> > at
> >
> org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:=
9
> > 9):99
> > at
> > org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve=
.
> > java:118):118
> > at
> > org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:=
4
> > 07):407
> > at
> > org.apache.coyote.ajp.AjpAprProcessor.process(AjpAprProcessor.java:197)=
:
> > 197
> > at
> > org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(Ab
> > stractProtocol.java:585):585
> > at
> > org.apache.tomcat.util.net.AprEndpoint$SocketProcessor.run(AprEndpoint.=
j
> > ava:1813):1813
> > at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source):-1
> > at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source):-
> > 1 at java.lang.Thread.run(Unknown Source):-1
> >
> > thanks,
> >
> >
> > Igal
> >
> >
> > On 1/8/2013 11:52 PM, Uwe Schindler wrote:
> > > Hi,
> > >
> > > can you give the *full* stack trace including nested Exceptions (root
> > causes)? There is also the problem, that the line numbers are not
> matching
> > the ones from Lucene 4.0 - so maybe you are using different JAR version=
s
> in
> > your webapp? This could be caused e.g. by an older lucene 4.0 JAR file
> > together with codecs.jar of a different version. Please make sure that
> all JAR
> > files are next to each other in the same classloader.
> > >
> > > The problem here is *not* that the lucene-codecs.jar file is missing
> or the
> > class was not found. Ignoring the line numbers and looking at the
> "message"
> > text, the problem here is that the code was not able to create an
> instance of
> > that class, but it already found and loaded it. The problem here is tha=
t
> you did
> > not post the nested Exception so there is no chance to say, why calling
> the
> > constructor failed. One reason may be a security manager in your
> application
> > server, preventing to init the class, but this cannot be checked unless
> I have
> > the full stack trace.
> > >
> > > Does it work if you use standard codec? Why do you use appending? Wha=
t
> > happens when yu use only lucene-core.jar and use the default codec only=
?
> If
> > you don't use appending codec then there is something really crazy with
> your
> > setup and we need, in any case, the full stack trace.
> > >
> > > Uwe
> > >
> > > -----
> > > Uwe Schindler
> > > H.-H.-Meier-Allee 63, D-28213 Bremen
> > > http://www.thetaphi.de
> > > eMail: uwe@thetaphi.de
> > >
> > >
> > >> -----Original Message-----
> > >> From: Igal @ getRailo.org [mailto:igal@getrailo.org]
> > >> Sent: Wednesday, January 09, 2013 4:53 AM
> > >> To: java-user@lucene.apache.org
> > >> Subject: Cannot instantiate SPI class
> > >>
> > >> I'm trying to access Lucene4 from Railo (an open-source application
> > >> server)
> > >>
> > >> when I try to create an IndexWriterConfig I get the error:  Cannot
> > >> instantiate SPI class:
> > >> org.apache.lucene.codecs.appending.AppendingCodec
> > >>
> > >> any ideas?
> > >>
> > >> TIA
> > >>
> > >> stacktrace below:
> > >>
> > >> Cannot instantiate SPI class:
> > >> org.apache.lucene.codecs.appending.AppendingCodec at
> > >>
> > org.apache.lucene.util.NamedSPILoader.lookup(NamedSPILoader.java:104):
> > >> 104 at
> > >>
> > org.apache.lucene.codecs.PostingsFormat.forName(PostingsFormat.java:1
> > >> 0
> > >> 0):100
> > >> at
> > >>
> > org.apache.lucene.codecs.lucene40.Lucene40Codec.<init>(Lucene40Codec.
> > >> j
> > >> ava:114):114
> > >> at
> > >>
> > org.apache.lucene.codecs.appending.AppendingCodec.<init>(AppendingCo
> > >> dec.java:34):34
> > >> at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native
> > >> Method):-2 at
> > >> sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown
> > >> Source):-
> > >> 1
> > >> at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown
> > >> Source):-1 at java.lang.reflect.Constructor.newInstance(Unknown
> > >> Source):-1 at java.lang.Class.newInstance0(Unknown Source):-1 at
> > >> java.lang.Class.newInstance(Unknown Source):-1 at
> > >>
> > org.apache.lucene.util.NamedSPILoader.reload(NamedSPILoader.java:62):
> > >> 62
> > >> at
> > >>
> > org.apache.lucene.util.NamedSPILoader.<init>(NamedSPILoader.java:42):
> > >> 42
> > >> at
> > >>
> > org.apache.lucene.util.NamedSPILoader.<init>(NamedSPILoader.java:37):
> > >> 37 at org.apache.lucene.codecs.Codec.<clinit>(Codec.java:41):41 at
> > >> org.apache.lucene.index.LiveIndexWriterConfig.<init>(LiveIndexWriter=
C
> > >> onfi
> > >> g.java:118):118
> > >> at
> > >> org.apache.lucene.index.IndexWriterConfig.<init>(IndexWriterConfig.j=
a
> > >> va:1
> > >> 45):145
> > >> at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native
> > >> Method):-2 at
> > >> sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown
> > >> Source):-
> > >> 1
> > >> at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown
> > >> Source):-1 at java.lang.reflect.Constructor.newInstance(Unknown
> > >> Source):-1 at
> > >> railo.runtime.reflection.pairs.ConstructorInstance.invoke(Constructo=
r
> > >> Instanc
> > >> e.java:34):34
> > >> at
> > >> railo.runtime.reflection.Reflector.callConstructor(Reflector.java:65=
3
> > >> ):653 at railo.runtime.java.JavaObject.init(JavaObject.java:311):311
> > >> at
> > >> railo.runtime.java.JavaObject.call(JavaObject.java:235):235 at
> > >> railo.runtime.java.JavaObject.call(JavaObject.java:272):272 at
> > >> railo.runtime.util.VariableUtilImpl.callFunctionWithoutNamedValues(V=
a
> > >> riabl
> > >> eUtilImpl.java:723):723
> > >> at
> > >> railo.runtime.PageContextImpl.getFunction(PageContextImpl.java:1506)=
:
> > >> 150
> > >> 6 at
> > >>
> > s21.search.lucene4search_cfc$cf._1(E:\Websites\_S21WAF\CFC\s21\search
> > >> \
> > >> Lucene4Search.cfc:92):92
> > >> at
> > >>
> > s21.search.lucene4search_cfc$cf.udfCall(E:\Websites\_S21WAF\CFC\s21\s
> > >> ea
> > >> rch\Lucene4Search.cfc):-1
> > >> at railo.runtime.type.UDFImpl.implementation(UDFImpl.java:103):103 a=
t
> > >> railo.runtime.type.UDFImpl._call(UDFImpl.java:371):371 at
> > >> railo.runtime.type.UDFImpl.call(UDFImpl.java:284):284 at
> > >> railo.runtime.type.scope.UndefinedImpl.call(UndefinedImpl.java:775):=
7
> > >> 75
> > >> at
> > >> railo.runtime.util.VariableUtilImpl.callFunctionWithoutNamedValues(V=
a
> > >> riabl
> > >> eUtilImpl.java:723):723
> > >> at
> > >> railo.runtime.PageContextImpl.getFunction(PageContextImpl.java:1506)=
:
> > >> 150
> > >> 6 at
> > >>
> > s21.search.lucene4search_cfc$cf._1(E:\Websites\_S21WAF\CFC\s21\search
> > >> \
> > >> Lucene4Search.cfc:142):142
> > >> at
> > >>
> > s21.search.lucene4search_cfc$cf.udfCall(E:\Websites\_S21WAF\CFC\s21\s
> > >> ea
> > >> rch\Lucene4Search.cfc):-1
> > >> at railo.runtime.type.UDFImpl.implementation(UDFImpl.java:103):103 a=
t
> > >> railo.runtime.type.UDFImpl._call(UDFImpl.java:371):371 at
> > >> railo.runtime.type.UDFImpl.call(UDFImpl.java:284):284 at
> > >> railo.runtime.ComponentImpl._call(ComponentImpl.java:572):572 at
> > >> railo.runtime.ComponentImpl._call(ComponentImpl.java:490):490 at
> > >> railo.runtime.ComponentImpl.call(ComponentImpl.java:1781):1781 at
> > >> railo.runtime.util.VariableUtilImpl.callFunctionWithoutNamedValues(V=
a
> > >> riabl
> > >> eUtilImpl.java:723):723
> > >> at
> > >> railo.runtime.PageContextImpl.getFunction(PageContextImpl.java:1506)=
:
> > >> 150
> > >> 6 at
> > >> _test.lucene4_cfm$cf.call(E:\Websites\21solutions\_test\lucene4.cfm:=
1
> > >> 4):14 at
> > >> railo.runtime.PageContextImpl.doInclude(PageContextImpl.java:772):77=
2
> > >> at
> > >> railo.runtime.PageContextImpl.doInclude(PageContextImpl.java:753):75=
3
> > >> at
> > >>
> > railo.runtime.listener.ModernAppListener._onRequest(ModernAppListener.
> > >> java:183):183
> > >> at
> > >>
> > railo.runtime.listener.MixedAppListener.onRequest(MixedAppListener.java=
:
> > >> 18):18
> > >> at
> > >>
> > railo.runtime.PageContextImpl.execute(PageContextImpl.java:2255):2255
> > >> at
> > >>
> > railo.runtime.PageContextImpl.execute(PageContextImpl.java:2222):2222
> > >> at
> > >>
> > railo.runtime.engine.CFMLEngineImpl.serviceCFML(CFMLEngineImpl.java:3
> > >> 1
> > >> 5):315
> > >> at railo.loader.servlet.CFMLServlet.service(CFMLServlet.java:29):29
> > >> at
> > >> javax.servlet.http.HttpServlet.service(HttpServlet.java:722):722 at
> > >> org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(App=
l
> > >> icationFi
> > >> lterChain.java:305):305
> > >> at
> > >> org.apache.catalina.core.ApplicationFilterChain.doFilter(Application=
F
> > >> ilterChai
> > >> n.java:210):210
> > >> at
> > >> net.twentyonesolutions.servlet.filters.RequestThreadsMonitor.doFilte=
r
> > >> (Req
> > >> uestThreadsMonitor.java:152):152
> > >> at
> > >> org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(App=
l
> > >> icationFi
> > >> lterChain.java:243):243
> > >> at
> > >> org.apache.catalina.core.ApplicationFilterChain.doFilter(Application=
F
> > >> ilterChai
> > >> n.java:210):210
> > >> at
> > >> net.twentyonesolutions.servlet.filters.BlockedIpFilter.doFilter(Bloc=
k
> > >> edIpFilte
> > >> r.java:90):90
> > >> at
> > >> org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(App=
l
> > >> icationFi
> > >> lterChain.java:243):243
> > >> at
> > >> org.apache.catalina.core.ApplicationFilterChain.doFilter(Application=
F
> > >> ilterChai
> > >> n.java:210):210
> > >> at
> > >>
> > org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperV
> > >> alve.java:222):222
> > >> at
> > >>
> > org.apache.catalina.core.StandardContextValve.invoke(StandardContextV
> > >> al
> > >> ve.java:123):123
> > >> at
> > >>
> > org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.jav=
a:
> > >> 168):168
> > >> at
> > >> org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.=
j
> > >> ava:9
> > >> 9):99
> > >> at
> > >>
> > org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve=
.
> > >> java:118):118
> > >> at
> > >> org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.ja=
v
> > >> a:4
> > >> 07):407
> > >> at
> > >>
> > org.apache.coyote.ajp.AjpAprProcessor.process(AjpAprProcessor.java:197)=
:
> > >> 197
> > >> at
> > >>
> > org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(
> > >> Ab
> > >> stractProtocol.java:585):585
> > >> at
> > >>
> > org.apache.tomcat.util.net.AprEndpoint$SocketProcessor.run(AprEndpoin
> > >> t.j
> > >> ava:1813):1813
> > >> at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown
> > >> Source):-1 at
> > >> java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source):-
> > >> 1
> > >> at java.lang.Thread.run(Unknown Source):-1
> > >>
> > >> --------------------------------------------------------------------=
-
> > >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > >> For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--e89a8f23532911241704d2d8232b--

From java-user-return-54607-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jan  9 10:09:01 2013
Return-Path: <java-user-return-54607-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id B1116E8E7
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed,  9 Jan 2013 10:09:01 +0000 (UTC)
Received: (qmail 14393 invoked by uid 500); 9 Jan 2013 10:08:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14210 invoked by uid 500); 9 Jan 2013 10:08:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14192 invoked by uid 99); 9 Jan 2013 10:08:58 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jan 2013 10:08:58 +0000
X-ASF-Spam-Status: No, hits=-2.3 required=5.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [212.13.204.73] (HELO urchin.earth.li) (212.13.204.73)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jan 2013 10:08:51 +0000
Received: from nick (helo=localhost)
	by urchin.earth.li with local-esmtp (Exim 4.72)
	(envelope-from <apache@gagravarr.org>)
	id 1TssaD-0008EL-Ku
	for java-user@lucene.apache.org; Wed, 09 Jan 2013 10:08:29 +0000
Date: Wed, 9 Jan 2013 10:08:29 +0000 (GMT)
From: Nick Burch <apache@gagravarr.org>
X-X-Sender: nick@urchin.earth.li
To: java-user@lucene.apache.org
Subject: RE: Cannot instantiate SPI class
In-Reply-To: <CAF1=UQyQcV4BhV01echJbEdYvUhuO4gmgdvEDKxjaZ4jttQHfQ@mail.gmail.com>
Message-ID: <alpine.DEB.2.00.1301091003460.20839@urchin.earth.li>
References: <50ECE9A8.9030502@getrailo.org> <009e01cdee3e$373055b0$a5910110$@thetaphi.de> <50ED25E8.9030503@getrailo.org> <00a801cdee43$3880b130$a9821390$@thetaphi.de> <CAF1=UQyQcV4BhV01echJbEdYvUhuO4gmgdvEDKxjaZ4jttQHfQ@mail.gmail.com>
User-Agent: Alpine 2.00 (DEB 1167 2008-08-23)
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII; format=flowed
X-Virus-Checked: Checked by ClamAV on apache.org

On Wed, 9 Jan 2013, Igal Sapir wrote:
> The syntax is CFML / CFScript (ColdFusion Script).  Railo is an open
> source, high performance, ColdFusion server.  http://getrailo.arg/
>
> I will re-download the Lucene jars and try again.  I'll let you know 
> what I find.

It may be worth double-checking that you don't have any older lucene jars 
kicking around your classpath confusing things. I've not used CF in a 
while, but when I last did we'd often get caught out by an old version of 
a jar we were introducing already being shipped with CF. You can fairly 
easily (via the classloader + getresource) work out which jar a given 
class file is coming from, you should use that to verify it's the jar you 
were expecting!

Nick

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54608-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jan  9 10:10:29 2013
Return-Path: <java-user-return-54608-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 69DD8E8FA
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed,  9 Jan 2013 10:10:29 +0000 (UTC)
Received: (qmail 22193 invoked by uid 500); 9 Jan 2013 10:10:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21976 invoked by uid 500); 9 Jan 2013 10:10:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21963 invoked by uid 99); 9 Jan 2013 10:10:26 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jan 2013 10:10:26 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of trejkaz@trypticon.org designates 209.85.223.174 as permitted sender)
Received: from [209.85.223.174] (HELO mail-ie0-f174.google.com) (209.85.223.174)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jan 2013 10:10:18 +0000
Received: by mail-ie0-f174.google.com with SMTP id c11so1779549ieb.5
        for <java-user@lucene.apache.org>; Wed, 09 Jan 2013 02:09:58 -0800 (PST)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=x-received:mime-version:in-reply-to:references:date:message-id
         :subject:from:to:content-type:x-gm-message-state;
        bh=YY/a0SP8EWzcjNvgUIrN1Qcj2nAA1SwgiSi79RilrJA=;
        b=UWixL05cxs5Syr5yfCBUaRt/wCjq3Ni3R8f3G9N4tHA1tCxvx4NgJVjLFYwJlUppsR
         VyZvchR/KDds4Ja9Zwm2eDaYcBrTIX29hmq5P0qOZJ1BvuXOHIv0aFrRZLVWPTV3EMmI
         /iGy89Qso+vrsrdF4ActMajCx04k/aL4rOjtto+XwTKt1jvFhinOCIlnNVKPuTxkQiLj
         Ic2g0BspjQM1pUpUq74NLtksyzUDDIo1c1yL3cNe4kPX1HQS/Tm/NccrZBvztRZ4d3Hh
         RlJKRUGS8+CW0bvBCmj/PipTm4QmUCFsPVifN6Ou8SS0BqBF+IPNSXJ0ceptXqPv59oe
         YFVw==
X-Received: by 10.50.37.168 with SMTP id z8mr999246igj.1.1357726198126;
        Wed, 09 Jan 2013 02:09:58 -0800 (PST)
Received: from mail-ia0-f176.google.com (mail-ia0-f176.google.com [209.85.210.176])
        by mx.google.com with ESMTPS id c3sm2018649igj.1.2013.01.09.02.09.57
        (version=TLSv1 cipher=ECDHE-RSA-RC4-SHA bits=128/128);
        Wed, 09 Jan 2013 02:09:57 -0800 (PST)
Received: by mail-ia0-f176.google.com with SMTP id y26so1305635iab.21
        for <java-user@lucene.apache.org>; Wed, 09 Jan 2013 02:09:56 -0800 (PST)
MIME-Version: 1.0
Received: by 10.50.236.104 with SMTP id ut8mr992847igc.20.1357726196655; Wed,
 09 Jan 2013 02:09:56 -0800 (PST)
Received: by 10.64.24.243 with HTTP; Wed, 9 Jan 2013 02:09:56 -0800 (PST)
In-Reply-To: <8C9A9E15-4E29-4152-BD4C-2916E72B1103@gmail.com>
References: <1357673425803-4031660.post@n3.nabble.com>
	<CADuAvzcu+aFQZDcyDv=waF_AygGH9yVCk0Wh-GA0fu8D1uh-9g@mail.gmail.com>
	<3F8A3702-DC59-4FE4-935E-BA71B1ECD22D@gmail.com>
	<CADuAvzeDmokX1w5rrwbfGr-yuCrvPbMUP+2BcaoxHg7ZLivz2A@mail.gmail.com>
	<8C9A9E15-4E29-4152-BD4C-2916E72B1103@gmail.com>
Date: Wed, 9 Jan 2013 21:09:56 +1100
Message-ID: <CADuAvzcYoNH-Vno6zbDJkx9c-XSkmYHDh1-miSd-krZ18UGgpQ@mail.gmail.com>
Subject: Re: Is StandardAnalyzer good enough for multi languages...
From: Trejkaz <trejkaz@trypticon.org>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
X-Gm-Message-State: ALoCoQk0dR2R25oQDHCg99HIJ+sj3BAgGy0SAnVI6yNJnT7QE8KXqIaYR9qlM0H2c6tkRxL8ssD1
X-Virus-Checked: Checked by ClamAV on apache.org

On Wed, Jan 9, 2013 at 5:25 PM, Steve Rowe <sarowe@gmail.com> wrote:
> Dude.  Go look.  It allows for per-script specialization, with (non-UAX#29) specializations by default for Thai, Lao, Myanmar and Hewbrew.  See DefaultICUTokenizerConfig.  It's filled with exactly the opposite of what you were describing.

I guess that's a reasonable start. Still has no specialisation for
straight Roman script, but I guess it could always be added.

TX

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54609-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jan  9 10:12:49 2013
Return-Path: <java-user-return-54609-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id DA3B8E90B
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed,  9 Jan 2013 10:12:49 +0000 (UTC)
Received: (qmail 29548 invoked by uid 500); 9 Jan 2013 10:12:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29313 invoked by uid 500); 9 Jan 2013 10:12:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29250 invoked by uid 99); 9 Jan 2013 10:12:47 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jan 2013 10:12:47 +0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.210.180] (HELO mail-ia0-f180.google.com) (209.85.210.180)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jan 2013 10:12:41 +0000
Received: by mail-ia0-f180.google.com with SMTP id t4so1334768iag.11
        for <java-user@lucene.apache.org>; Wed, 09 Jan 2013 02:12:20 -0800 (PST)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=mime-version:x-originating-ip:in-reply-to:references:date
         :message-id:subject:from:to:content-type:x-gm-message-state;
        bh=psWKRmDDumqL4MnGBYmX0uDg+Y7M7zBrG5ylyB04K1c=;
        b=OeYWNCVWpfFGsXU08bnjteoMNVPZBiWUk63pCzRZwm12tGK4okHrxa5qVaVy0BWtGI
         kyH778/0335t/vYIX9a8zeNnXK3DUuczNgPbjTTTPcbKU+R8OWcgvtS33zsc7p4+1+Gc
         ZKTJE5YbSeD1Kp8NUlxIRL7pWhe6PU4jL+F3I+S8bVxJQfWmwcf+KgrbmMD69mwEzDbd
         WEiVrrod9A6wobSnXu5xobkuZtsTKObi2A1Zjun+C4Mi5tIud12n+/M32LWacfdopMBI
         HjOw/b0JWK6LT0DYhJt2jphYFih5I0dWLRVGBeUfZUcvHfHDPJC4q1I/mdKFrw8E4BON
         wLGg==
MIME-Version: 1.0
Received: by 10.50.13.162 with SMTP id i2mr1004078igc.38.1357726339907; Wed,
 09 Jan 2013 02:12:19 -0800 (PST)
Received: by 10.231.204.195 with HTTP; Wed, 9 Jan 2013 02:12:19 -0800 (PST)
X-Originating-IP: [98.145.203.109]
Received: by 10.231.204.195 with HTTP; Wed, 9 Jan 2013 02:12:19 -0800 (PST)
In-Reply-To: <alpine.DEB.2.00.1301091003460.20839@urchin.earth.li>
References: <50ECE9A8.9030502@getrailo.org>
	<009e01cdee3e$373055b0$a5910110$@thetaphi.de>
	<50ED25E8.9030503@getrailo.org>
	<00a801cdee43$3880b130$a9821390$@thetaphi.de>
	<CAF1=UQyQcV4BhV01echJbEdYvUhuO4gmgdvEDKxjaZ4jttQHfQ@mail.gmail.com>
	<alpine.DEB.2.00.1301091003460.20839@urchin.earth.li>
Date: Wed, 9 Jan 2013 02:12:19 -0800
Message-ID: <CAF1=UQyug7Gxy+wqMSxcoORiTrJeNsMUnzPPqHSVjZ--sNX7cw@mail.gmail.com>
Subject: RE: Cannot instantiate SPI class
From: Igal Sapir <igal@getrailo.org>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=f46d044469ef31416304d2d84c0d
X-Gm-Message-State: ALoCoQns8pQc/+psIqsn7AeG7bLzRAAHjAFX/+wVtIy48arRxwroe9v8Hvno82vrZFG69MfPAByP
X-Virus-Checked: Checked by ClamAV on apache.org

--f46d044469ef31416304d2d84c0d
Content-Type: text/plain; charset=ISO-8859-1

Thanks, I'll do that.

p.s. -- that was http://getrailo.org -- 'auto-correct' messed it up ;-)

--
typos, misspels, and other weird words brought to you courtesy of my mobile
device.
On Jan 9, 2013 2:08 AM, "Nick Burch" <apache@gagravarr.org> wrote:

> On Wed, 9 Jan 2013, Igal Sapir wrote:
>
>> The syntax is CFML / CFScript (ColdFusion Script).  Railo is an open
>> source, high performance, ColdFusion server.  http://getrailo.arg/
>>
>> I will re-download the Lucene jars and try again.  I'll let you know what
>> I find.
>>
>
> It may be worth double-checking that you don't have any older lucene jars
> kicking around your classpath confusing things. I've not used CF in a
> while, but when I last did we'd often get caught out by an old version of a
> jar we were introducing already being shipped with CF. You can fairly
> easily (via the classloader + getresource) work out which jar a given class
> file is coming from, you should use that to verify it's the jar you were
> expecting!
>
> Nick
>
> ------------------------------**------------------------------**---------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.**apache.org<java-user-unsubscribe@lucene.apache.org>
> For additional commands, e-mail: java-user-help@lucene.apache.**org<java-user-help@lucene.apache.org>
>
>

--f46d044469ef31416304d2d84c0d--

From java-user-return-54610-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jan  9 10:46:48 2013
Return-Path: <java-user-return-54610-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id AF04CEB60
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed,  9 Jan 2013 10:46:48 +0000 (UTC)
Received: (qmail 42775 invoked by uid 500); 9 Jan 2013 10:46:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41916 invoked by uid 500); 9 Jan 2013 10:46:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41892 invoked by uid 99); 9 Jan 2013 10:46:45 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jan 2013 10:46:45 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of vigneshklncit@gmail.com designates 209.85.216.173 as permitted sender)
Received: from [209.85.216.173] (HELO mail-qc0-f173.google.com) (209.85.216.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jan 2013 10:46:38 +0000
Received: by mail-qc0-f173.google.com with SMTP id b12so1453538qca.4
        for <java-user@lucene.apache.org>; Wed, 09 Jan 2013 02:46:17 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:date:message-id:subject:from:to:content-type;
        bh=hdMcItmgwANOByH3JEWwhcJYIVgeY/mUb61OmUK0ifU=;
        b=He/evJQcYIN6/HcCSMwhA64LbNWvQkupF7QGy+jMJQyGeokT35Hx83UKGC06bL21bj
         iznScrnqseIIYhu4NrNACMajDjuSzb9+qhc1MhyHpqI+v/Dl16LedIYaN5KVEl8zU27Z
         2VXC6qpoCWBEneBsKReK26m4xy4Hc0RmsxROInDOVM5ELHTABsuScHv1sW9OUT4tvBV3
         ZSgfRG7otMXBkAe721VrRsRHmXi4NzEeyG2PabFlA1UvERMSPiB7j4WprTJvaUDINjgU
         ekjPqRirdt9bdNVQgcEyuMxVJwn/w5kG2EFGhDKbOb8d1ilZYvK6Rma25s5QdWXop+ax
         o2xA==
MIME-Version: 1.0
Received: by 10.49.49.226 with SMTP id x2mr58335712qen.45.1357728377351; Wed,
 09 Jan 2013 02:46:17 -0800 (PST)
Received: by 10.49.71.143 with HTTP; Wed, 9 Jan 2013 02:46:17 -0800 (PST)
Date: Wed, 9 Jan 2013 16:16:17 +0530
Message-ID: <CAMMjTZzp7UV7iudLRCm_5f_PE+o0wOhkU7njYPvOzbzy9orP9g@mail.gmail.com>
Subject: Help needed Regarding classification of Text Data using Lucene..
From: VIGNESH S <vigneshklncit@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

can anyone suggest me how can i use lucene for text classification.

-- 
Thanks and Regards
Vignesh Srinivasan

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54611-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jan  9 10:53:28 2013
Return-Path: <java-user-return-54611-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id C8CE1EBAF
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed,  9 Jan 2013 10:53:28 +0000 (UTC)
Received: (qmail 65358 invoked by uid 500); 9 Jan 2013 10:53:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65167 invoked by uid 500); 9 Jan 2013 10:53:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65153 invoked by uid 99); 9 Jan 2013 10:53:26 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jan 2013 10:53:26 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of shashi.mit@gmail.com designates 209.85.210.52 as permitted sender)
Received: from [209.85.210.52] (HELO mail-da0-f52.google.com) (209.85.210.52)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jan 2013 10:53:20 +0000
Received: by mail-da0-f52.google.com with SMTP id f10so688026dak.11
        for <java-user@lucene.apache.org>; Wed, 09 Jan 2013 02:52:59 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:sender:in-reply-to:references:from:date
         :x-google-sender-auth:message-id:subject:to:content-type;
        bh=0bImL0WC3ySvXkDku5ky772/TVHxkcWoyahZa0ac7TM=;
        b=jAvQJ3vAM0rIwnuq4CfAxWneltnrMQ9iKsWp/7q2XFAWy8OMKMVlE0r7wR+zjDEC8B
         WTJx/wc5mXWZSl+zr38cX1JQdIUVPc/59HhpFQYG4Sv+BKeWippEkV3ui+GmG4YQ+Svw
         A1fIAE/kVxWiLv3xmpD0FcLngdYX60hsCnqaDfN73ntkxeFU3ctna/eVYQn0iK/siKa7
         fyM0ZHs7A5cvlsvLznZVMNZQroFHrl3dDvpurdxmR0bbQJIwp8Rya+pIgtYadK24yHw7
         TSIDBqpfZuEsdkZ+YSKkYFT6hxXbjFvC9wuMr1BkG7nL2HXslV0CGkRYEdiS0L6R9iAq
         AP4g==
Received: by 10.66.88.99 with SMTP id bf3mr188548749pab.62.1357728779071; Wed,
 09 Jan 2013 02:52:59 -0800 (PST)
MIME-Version: 1.0
Sender: shashi.mit@gmail.com
Received: by 10.68.244.7 with HTTP; Wed, 9 Jan 2013 02:52:28 -0800 (PST)
In-Reply-To: <CAMMjTZzp7UV7iudLRCm_5f_PE+o0wOhkU7njYPvOzbzy9orP9g@mail.gmail.com>
References: <CAMMjTZzp7UV7iudLRCm_5f_PE+o0wOhkU7njYPvOzbzy9orP9g@mail.gmail.com>
From: Shashi Kant <skant@sloan.mit.edu>
Date: Wed, 9 Jan 2013 05:52:28 -0500
X-Google-Sender-Auth: YXG0bCQFDoLfcsunL-eSFA_fPMc
Message-ID: <CAE5+pVr4ZRoL8PpwaPJH2MsTOoi3RZHn0V8uPrtSGFON=HTozQ@mail.gmail.com>
Subject: Re: Help needed Regarding classification of Text Data using Lucene..
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

http://www.slideshare.net/teofili/text-categorization-with-lucene-and-solr


On Wed, Jan 9, 2013 at 5:46 AM, VIGNESH S <vigneshklncit@gmail.com> wrote:
> Hi,
>
> can anyone suggest me how can i use lucene for text classification.
>
> --
> Thanks and Regards
> Vignesh Srinivasan
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54612-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jan  9 10:53:41 2013
Return-Path: <java-user-return-54612-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id E0970EBB0
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed,  9 Jan 2013 10:53:40 +0000 (UTC)
Received: (qmail 67471 invoked by uid 500); 9 Jan 2013 10:53:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67421 invoked by uid 500); 9 Jan 2013 10:53:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67411 invoked by uid 99); 9 Jan 2013 10:53:38 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jan 2013 10:53:38 +0000
X-ASF-Spam-Status: No, hits=0.6 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 209.85.223.181 as permitted sender)
Received: from [209.85.223.181] (HELO mail-ie0-f181.google.com) (209.85.223.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jan 2013 10:53:33 +0000
Received: by mail-ie0-f181.google.com with SMTP id 16so1863854iea.12
        for <java-user@lucene.apache.org>; Wed, 09 Jan 2013 02:53:13 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        bh=h+I9ihE2CihtgbLBACeyTwTo1r1SWtpG+RO+q8aAnHA=;
        b=flFqMq8bJht4Qx0cTFZE46Mq4oQjvHLxaWGgmosFz56qDOagme2P3THVIh1aSQrzRM
         tbz6ClzLGKYF3oZzno5twn0yo5PUiIc1zUZGX/fottop8bBmHj6Uiy9gyjrjjZVDGcoU
         SJNnvJUHKsayD1VrHhZk9K5UboKlp+us4zbZkpzqvNcvIMXXjDL+MIvxePyUNjHJ3fIo
         KwgmffSbaWbFSa9vwOi6k1Am5Lqt/6+spGngCv/ZETCpVBfTrETNH2ZnRHRlCmkeohzw
         E6zF3eByKrhPVyeKvgmgL++iuO9LXUYZwIPWtZrboBx309K1VR8x3K8zVRgBr2H5dNWh
         JfKQ==
Received: by 10.50.17.161 with SMTP id p1mr1076135igd.104.1357728793078; Wed,
 09 Jan 2013 02:53:13 -0800 (PST)
MIME-Version: 1.0
Received: by 10.50.184.232 with HTTP; Wed, 9 Jan 2013 02:52:52 -0800 (PST)
In-Reply-To: <1357721469207-4031796.post@n3.nabble.com>
References: <1357721469207-4031796.post@n3.nabble.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Wed, 9 Jan 2013 10:52:52 +0000
Message-ID: <CAEY5pxW0AE=x3Cs--F=AW1vD5RPDnm4roZgd-wOwJ8ZWJfvhyA@mail.gmail.com>
Subject: Re: how much blocksize is set in lucene.
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

What do you mean by lucene blocksize?  What version of lucene are you using?

A good general principle is to start with the defaults and only worry
if there is a problem.


--
Ian.


On Wed, Jan 9, 2013 at 8:51 AM, seacathello <huj.nju@gmail.com> wrote:
> now i index very many email file, aboule 50m and every email file size about
> 4-50k.
> the index lib size is aboule 1TB, segment size is only.
>
> In this index lib, which blocksize should i shoose?
> 4k or 512k, which choice is better?
> Thanks very much?
>
>
>
> --
> View this message in context: http://lucene.472066.n3.nabble.com/how-much-blocksize-is-set-in-lucene-tp4031796.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54613-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jan  9 10:54:54 2013
Return-Path: <java-user-return-54613-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 8CED9EBBD
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed,  9 Jan 2013 10:54:54 +0000 (UTC)
Received: (qmail 72644 invoked by uid 500); 9 Jan 2013 10:54:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72577 invoked by uid 500); 9 Jan 2013 10:54:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72566 invoked by uid 99); 9 Jan 2013 10:54:52 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jan 2013 10:54:52 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of tommaso.teofili@gmail.com designates 209.85.210.54 as permitted sender)
Received: from [209.85.210.54] (HELO mail-da0-f54.google.com) (209.85.210.54)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jan 2013 10:54:45 +0000
Received: by mail-da0-f54.google.com with SMTP id n2so689020dad.27
        for <java-user@lucene.apache.org>; Wed, 09 Jan 2013 02:54:24 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        bh=g7SqSvJNsdjKsg98L4E526X0hllWqIGAcI34A1XX5lo=;
        b=DaV0C6fVC2ptDiYI2PIUDmRRwWqb8tOI+lI0X8Fsw3Lr2/JrEYDlK8BoZGL6gT2pHI
         ppG8eS8/iRBRWvxypK8AVQba8ZsYkXuO2mnZ+mTr+bgmKAcDjOpRXJwV4UYy4rxR2Z7q
         iyyGSC88umF6STMI5sZWkTEQfvQ+fS2H1kNSQcdJuECkhF3V2TRSd9uiSA/cRVZVtQ9P
         LI8QxIyNIvBe4jN9Mg4XOkvlNSMJxUJTR9QK39ECJlaR1Lz/CW/25iBcj9OSz/w4zAig
         6XpX/cE1WkQTpYuFVARKIzsw24A7kWoB5zFy2fhYFgFpy+EcVopOKOhQ4WSaSHZPuuHC
         GaXA==
Received: by 10.66.88.197 with SMTP id bi5mr187989413pab.36.1357728864773;
 Wed, 09 Jan 2013 02:54:24 -0800 (PST)
MIME-Version: 1.0
Received: by 10.68.24.136 with HTTP; Wed, 9 Jan 2013 02:53:44 -0800 (PST)
In-Reply-To: <CAMMjTZzp7UV7iudLRCm_5f_PE+o0wOhkU7njYPvOzbzy9orP9g@mail.gmail.com>
References: <CAMMjTZzp7UV7iudLRCm_5f_PE+o0wOhkU7njYPvOzbzy9orP9g@mail.gmail.com>
From: Tommaso Teofili <tommaso.teofili@gmail.com>
Date: Wed, 9 Jan 2013 11:53:44 +0100
Message-ID: <CAGnSx06id7VEMSv=SHE90RS6RTmfjsVr_PG-HzX=3S=dt12hnA@mail.gmail.com>
Subject: Re: Help needed Regarding classification of Text Data using Lucene..
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=f46d042f9f78afa4a304d2d8e291
X-Virus-Checked: Checked by ClamAV on apache.org

--f46d042f9f78afa4a304d2d8e291
Content-Type: text/plain; charset=ISO-8859-1

Hi,

you can have a look at the (early stage) Lucene classification module on
trunk [1], see also a brief introduction given at last ApacheCon EU [2].

Hope this helps,
Tommaso

[1] :
http://svn.apache.org/repos/asf/lucene/dev/trunk/lucene/classification/
[2] :
http://www.slideshare.net/teofili/text-categorization-with-lucene-and-solr


2013/1/9 VIGNESH S <vigneshklncit@gmail.com>

> Hi,
>
> can anyone suggest me how can i use lucene for text classification.
>
> --
> Thanks and Regards
> Vignesh Srinivasan
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--f46d042f9f78afa4a304d2d8e291--

From java-user-return-54614-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jan  9 12:07:14 2013
Return-Path: <java-user-return-54614-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 84271ED3F
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed,  9 Jan 2013 12:07:14 +0000 (UTC)
Received: (qmail 82216 invoked by uid 500); 9 Jan 2013 12:07:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82022 invoked by uid 500); 9 Jan 2013 12:07:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81992 invoked by uid 99); 9 Jan 2013 12:07:11 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jan 2013 12:07:10 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [134.226.56.6] (HELO mercury.scss.tcd.ie) (134.226.56.6)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jan 2013 12:07:03 +0000
Received: from localhost (localhost [127.0.0.1])
	by mercury.scss.tcd.ie (Postfix) with ESMTP id C0974BE33;
	Wed,  9 Jan 2013 12:06:41 +0000 (GMT)
X-Virus-Scanned: Debian amavisd-new at scss.tcd.ie
Received: from mercury.scss.tcd.ie ([127.0.0.1])
	by localhost (mercury.scss.tcd.ie [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 8OM6w60oT3Gv; Wed,  9 Jan 2013 12:06:41 +0000 (GMT)
Received: from shiraz.cs.tcd.ie (unknown [IPv6:2001:770:10:200:21d:9ff:fe28:378e])
	by mercury.scss.tcd.ie (Postfix) with ESMTPSA id 12FCABE2F;
	Wed,  9 Jan 2013 12:06:41 +0000 (GMT)
Message-ID: <50ED5D50.4040403@cs.tcd.ie>
Date: Wed, 09 Jan 2013 12:06:40 +0000
From: Peter Lavin <lavinp@cs.tcd.ie>
Reply-To: lavinp@cs.tcd.ie
Organization: School of Computer Science and Statistics, Trinity College Dublin
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:10.0.11) Gecko/20121120 Thunderbird/10.0.11
MIME-Version: 1.0
To: java-user@lucene.apache.org, jack@basetechnology.com
Subject: Re: Differences in MLT Query Terms Question
References: <50EC69A2.6090807@cs.tcd.ie> <FB2B86F6A67C41A291748DFDDAA05B7E@JackKrupansky>
In-Reply-To: <FB2B86F6A67C41A291748DFDDAA05B7E@JackKrupansky>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org


Hi Jack, thanks for your ideas, I've added some comments to your 
questions, maybe you can throw some more light on this...



On 01/08/2013 11:34 PM, Jack Krupansky wrote:
> The term "arv" is on the first list, but not the second. Maybe it's
> document frequency fell below the setting for minimum document frequency
> on the second run.
>
> Or, maybe the minimum word length was set to 4 or more on the second run.
The same parameters are used (same code) for each run, all that changes 
is that I change the path to a different folder, one containing 16, the 
other 4 files. The smaller folder was made by simply deleting the 
unwanted 12 files.

>
> Are you using MoreLikeThisQuery or directly using MoreLikeThis?
I'm using MoreLikeThis directly, does this make a difference?

>
> Or, possibly "arv" appears later in a document on the second run, after
> the number of tokens specified by maxNumTokensParsed.
The files used in the second run are identical, and each file is read 
from disk and indexed individually (as is common I'm sure). I look at 
this, and when all 16 files are indexed together, the results are 
repeatedly identical, and the same for the 4 files runs. I.e. the 
outcomes for both 16 and 4 files can be reproduced.

The reason for my question (and for doing these runs) is that I'm using 
Lucene in an application where I want to use the similarity measurements 
between documents as a metric in another area. If the similarity score 
changes when the size of the index changes, I need to understand.

thanks again,
Peter


>
> -- Jack Krupansky
>
> -----Original Message----- From: Peter Lavin
> Sent: Tuesday, January 08, 2013 1:46 PM
> To: java-user@lucene.apache.org
> Subject: Differences in MLT Query Terms Question
>
>
> Dear Users,
>
> I am running some simple experiments with Lucene and am seeing something
> I don't understand.
>
> I have 16 text files on 4 different topics, ranging in size from 50-900
> KB. When I index all 16 of these and run an MLT query based on one of
> the indexed documents, I get an expected result (i.e. similar topics are
> found).
>
> When I reduce the number of text files to 4 and index them (having taken
> care to overwriting the previous index files), and then run the same MLT
> query (based on the same document from the index), I get slightly
> different scores. I'm assuming this is because the IDF is now different
> because there is less documents.
>
> For each run, I have set the max number of terms as...
> mlt.setMaxQueryTerms(100)
>
> However, when I compare the terms which get used for the MLT query on
> the 16 document index and the 4 document index, they are slightly
> different. I've printed, parsed and sorted them into two columns of a
> CSV file. I've pasted a small part of it at the end of this email.
>
> My Question(s)...
> 1) Can anybody explain why the set of terms used for the MLT query is
> different when a file from an index of 16 documents versus 4 documents
> is used?
>
> 2) Am I right in assuming that the reason for slightly different scores
> in the IDF, or could it be this slight difference in the sets of terms
> used (or possibly both)?
>
> regards,
> Peter
>
>

-- 
with best regards,
Peter Lavin,
PhD Candidate,
CAG - Computer Architecture & Grid Research Group,
Lloyd Institute, 005,
Trinity College Dublin, Ireland.
+353 1 8961536

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54615-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jan  9 12:29:40 2013
Return-Path: <java-user-return-54615-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id EC21F9FBE
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed,  9 Jan 2013 12:29:39 +0000 (UTC)
Received: (qmail 44383 invoked by uid 500); 9 Jan 2013 12:29:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44227 invoked by uid 500); 9 Jan 2013 12:29:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44176 invoked by uid 99); 9 Jan 2013 12:29:36 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jan 2013 12:29:36 +0000
X-ASF-Spam-Status: No, hits=0.6 required=5.0
	tests=MIME_BASE64_BLANKS,RCVD_IN_DNSWL_LOW,SPF_PASS,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of huj.nju@gmail.com designates 209.85.210.42 as permitted sender)
Received: from [209.85.210.42] (HELO mail-da0-f42.google.com) (209.85.210.42)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jan 2013 12:29:28 +0000
Received: by mail-da0-f42.google.com with SMTP id z17so732735dal.1
        for <java-user@lucene.apache.org>; Wed, 09 Jan 2013 04:29:06 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=x-received:date:subject:message-id:from:to:mime-version
         :content-type:content-transfer-encoding;
        bh=r1uDiQPnXLe8NjE5a0IfqY1DuvRhLxz1knBbe1v9lgc=;
        b=NMpzqBqh4pLG8BbD7VnGTFCRFExEfxtmb9Gtjl3hi5e/WUPhoHOSNixr96qI7+hDvE
         EJeMBrFYsHeVeeWZYuSdxY0AusomdysMefA8wCbtbGi1C+F+j1IL2UVaaVz+UmBLzYja
         Cr2aOnj4CmojEXpZJ/EJFM8bBEu9Y2RnaPnJfFa/SSh0xOICOGyX7nNeXThW1XDEhKnc
         89fg4NyzRu8aI9cq4+Gd5ZJgf1+NzNAB43nLHjbrOUWJ/RhE7Zg12QckWffOHJQHt9Nd
         Qw/LszWWoGhloLQpo8RlweoOOkpHHxjNI7FKO6zWieBLdzKbzlLQIjIQBv4oRYf6lsfa
         f/xQ==
X-Received: by 10.68.236.100 with SMTP id ut4mr212392675pbc.92.1357734546667;
        Wed, 09 Jan 2013 04:29:06 -0800 (PST)
Received: from [10.170.37.193] ([180.98.116.75])
        by mx.google.com with ESMTPS id qt3sm41564542pbb.32.2013.01.09.04.29.02
        (version=SSLv3 cipher=OTHER);
        Wed, 09 Jan 2013 04:29:05 -0800 (PST)
Date: Wed, 09 Jan 2013 20:29:13 +0800
Subject: Re: how much blocksize is set in lucene.
Message-ID: <0bw9djrwwb778m35t4b7net4.1357734553072@email.android.com>
From: hujing <huj.nju@gmail.com>
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: base64
X-Virus-Checked: Checked by ClamAV on apache.org

VGhlICBpbmRleCBsaWIgbXVzdCBiZSBzYXZlZCBpbiB0aGUgaGFyZGRpc2suICB3aGVuIGhhcmRk
aXNrIGNhbiBub3Qgc2F2ZSBhIGxhcmdlIHNpemUgaW5kZXggbGliLCB3ZSB3aWxsIHVzZSAgZGlz
ayBhcnJheS4gICB0aGUgZGlzayBhcnJheSBtdXN0IHNldCBzdHJpcGUgc2l6ZS4gIHNvICAgaSB3
YW50IHRvIGtub3fvvIx3aGVuIGluZGV4IGxpYiBzYXZlZCBpbiB0aGUgZGlzayBhcnJheSDvvIx3
aGljaCBzdHJpcGUgc2l6ZSB3aWxsIGJlIHNldC4gIHdoZW4gICBpbmRleCBzYXZlZCBpbiB0aGUg
ZmlsZSBzeXRlbe+8jCAgaG93IG11Y2ggYmxvY2sgc2l6ZSB3aWxsIGJlIHNldO+8nwpTZW50IGZy
b20gSHVhd2VpIE1vYmlsZQoKSWFuIExlYSA8aWFuLmxlYUBnbWFpbC5jb20+57yW5YaZ77yaCgo+
V2hhdCBkbyB5b3UgbWVhbiBieSBsdWNlbmUgYmxvY2tzaXplPyAgV2hhdCB2ZXJzaW9uIG9mIGx1
Y2VuZSBhcmUgeW91IHVzaW5nPwo+Cj5BIGdvb2QgZ2VuZXJhbCBwcmluY2lwbGUgaXMgdG8gc3Rh
cnQgd2l0aCB0aGUgZGVmYXVsdHMgYW5kIG9ubHkgd29ycnkKPmlmIHRoZXJlIGlzIGEgcHJvYmxl
bS4KPgo+Cj4tLQo+SWFuLgo+Cj4KPk9uIFdlZCwgSmFuIDksIDIwMTMgYXQgODo1MSBBTSwgc2Vh
Y2F0aGVsbG8gPGh1ai5uanVAZ21haWwuY29tPiB3cm90ZToKPj4gbm93IGkgaW5kZXggdmVyeSBt
YW55IGVtYWlsIGZpbGUsIGFib3VsZSA1MG0gYW5kIGV2ZXJ5IGVtYWlsIGZpbGUgc2l6ZSBhYm91
dAo+PiA0LTUway4KPj4gdGhlIGluZGV4IGxpYiBzaXplIGlzIGFib3VsZSAxVEIsIHNlZ21lbnQg
c2l6ZSBpcyBvbmx5Lgo+Pgo+PiBJbiB0aGlzIGluZGV4IGxpYiwgd2hpY2ggYmxvY2tzaXplIHNo
b3VsZCBpIHNob29zZT8KPj4gNGsgb3IgNTEyaywgd2hpY2ggY2hvaWNlIGlzIGJldHRlcj8KPj4g
VGhhbmtzIHZlcnkgbXVjaD8KPj4KPj4KPj4KPj4gLS0KPj4gVmlldyB0aGlzIG1lc3NhZ2UgaW4g
Y29udGV4dDogaHR0cDovL2x1Y2VuZS40NzIwNjYubjMubmFiYmxlLmNvbS9ob3ctbXVjaC1ibG9j
a3NpemUtaXMtc2V0LWluLWx1Y2VuZS10cDQwMzE3OTYuaHRtbAo+PiBTZW50IGZyb20gdGhlIEx1
Y2VuZSAtIEphdmEgVXNlcnMgbWFpbGluZyBsaXN0IGFyY2hpdmUgYXQgTmFiYmxlLmNvbS4KPj4K
Pj4gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tCj4+IFRvIHVuc3Vic2NyaWJlLCBlLW1haWw6IGphdmEtdXNlci11bnN1
YnNjcmliZUBsdWNlbmUuYXBhY2hlLm9yZwo+PiBGb3IgYWRkaXRpb25hbCBjb21tYW5kcywgZS1t
YWlsOiBqYXZhLXVzZXItaGVscEBsdWNlbmUuYXBhY2hlLm9yZwo+Pgo+Cj4tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0K
PlRvIHVuc3Vic2NyaWJlLCBlLW1haWw6IGphdmEtdXNlci11bnN1YnNjcmliZUBsdWNlbmUuYXBh
Y2hlLm9yZwo+Rm9yIGFkZGl0aW9uYWwgY29tbWFuZHMsIGUtbWFpbDogamF2YS11c2VyLWhlbHBA
bHVjZW5lLmFwYWNoZS5vcmcKPgo=

DQotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0NClRvIHVuc3Vic2NyaWJlLCBlLW1haWw6IGphdmEtdXNlci11
bnN1YnNjcmliZUBsdWNlbmUuYXBhY2hlLm9yZw0KRm9yIGFkZGl0aW9uYWwgY29tbWFuZHMs
IGUtbWFpbDogamF2YS11c2VyLWhlbHBAbHVjZW5lLmFwYWNoZS5vcmcNCg0K

From java-user-return-54616-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jan  9 12:30:10 2013
Return-Path: <java-user-return-54616-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 801C09FC0
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed,  9 Jan 2013 12:30:10 +0000 (UTC)
Received: (qmail 47046 invoked by uid 500); 9 Jan 2013 12:30:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46998 invoked by uid 500); 9 Jan 2013 12:30:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46980 invoked by uid 99); 9 Jan 2013 12:30:07 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jan 2013 12:30:07 +0000
X-ASF-Spam-Status: No, hits=0.6 required=5.0
	tests=MIME_BASE64_BLANKS,RCVD_IN_DNSWL_LOW,SPF_PASS,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of huj.nju@gmail.com designates 209.85.160.53 as permitted sender)
Received: from [209.85.160.53] (HELO mail-pb0-f53.google.com) (209.85.160.53)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jan 2013 12:30:00 +0000
Received: by mail-pb0-f53.google.com with SMTP id jt11so922300pbb.12
        for <java-user@lucene.apache.org>; Wed, 09 Jan 2013 04:29:38 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=x-received:date:subject:message-id:from:to:mime-version
         :content-type:content-transfer-encoding;
        bh=5GZ3zNCToO0H5g2xSI28eHV9zYP2POzez1PASXQOSLI=;
        b=Vrwt7NgyMjP60JYKnem5k71XwU83okj3GNIzQyBGGQA7NyVGz4jhmS1xliyVFflR+P
         vaDdrEhKdluRnk+oK1kNQyDwYQ1YyDkeBO9xMMZbgf5u2Q/06iKWfYeY4w6pYBP7RjtQ
         cna/LakDTyywvND5ig3BMsL5WoveJpAFmsJdsbePBrvzPEErgS4mIyP7W+r3V84ptCn8
         X6mADuPGrYAZNDc6sWO7kP88cmXULZUJGzYWKFhKlUJswmgd/00ERronlune1WWCRGQE
         7qqJcUbyFVnfLf8Xs7lOW/5Za6TPGRPHKFuZ4ClwGjYFbaCAEiOfs49VEfa7/YrRgqjg
         OKXQ==
X-Received: by 10.68.137.167 with SMTP id qj7mr206918016pbb.148.1357734578895;
        Wed, 09 Jan 2013 04:29:38 -0800 (PST)
Received: from [10.170.37.193] ([180.98.116.75])
        by mx.google.com with ESMTPS id sy1sm41556771pbc.66.2013.01.09.04.29.34
        (version=SSLv3 cipher=OTHER);
        Wed, 09 Jan 2013 04:29:38 -0800 (PST)
Date: Wed, 09 Jan 2013 20:29:35 +0800
Subject: Re: how much blocksize is set in lucene.
Message-ID: <gyy1qm4vt7f0u7l9iuim92ny.1357734155913@email.android.com>
From: hujing <huj.nju@gmail.com>
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: base64
X-Virus-Checked: Checked by ClamAV on apache.org

dGhlIGluZGV4IGxpYiBtdXN0IGJlIHNhdmVkIGludG8gaGFyZGRpc2suICAKU2VudCBmcm9tIEh1
YXdlaSBNb2JpbGUKCklhbiBMZWEgPGlhbi5sZWFAZ21haWwuY29tPue8luWGme+8mgoKPldoYXQg
ZG8geW91IG1lYW4gYnkgbHVjZW5lIGJsb2Nrc2l6ZT8gIFdoYXQgdmVyc2lvbiBvZiBsdWNlbmUg
YXJlIHlvdSB1c2luZz8KPgo+QSBnb29kIGdlbmVyYWwgcHJpbmNpcGxlIGlzIHRvIHN0YXJ0IHdp
dGggdGhlIGRlZmF1bHRzIGFuZCBvbmx5IHdvcnJ5Cj5pZiB0aGVyZSBpcyBhIHByb2JsZW0uCj4K
Pgo+LS0KPklhbi4KPgo+Cj5PbiBXZWQsIEphbiA5LCAyMDEzIGF0IDg6NTEgQU0sIHNlYWNhdGhl
bGxvIDxodWoubmp1QGdtYWlsLmNvbT4gd3JvdGU6Cj4+IG5vdyBpIGluZGV4IHZlcnkgbWFueSBl
bWFpbCBmaWxlLCBhYm91bGUgNTBtIGFuZCBldmVyeSBlbWFpbCBmaWxlIHNpemUgYWJvdXQKPj4g
NC01MGsuCj4+IHRoZSBpbmRleCBsaWIgc2l6ZSBpcyBhYm91bGUgMVRCLCBzZWdtZW50IHNpemUg
aXMgb25seS4KPj4KPj4gSW4gdGhpcyBpbmRleCBsaWIsIHdoaWNoIGJsb2Nrc2l6ZSBzaG91bGQg
aSBzaG9vc2U/Cj4+IDRrIG9yIDUxMmssIHdoaWNoIGNob2ljZSBpcyBiZXR0ZXI/Cj4+IFRoYW5r
cyB2ZXJ5IG11Y2g/Cj4+Cj4+Cj4+Cj4+IC0tCj4+IFZpZXcgdGhpcyBtZXNzYWdlIGluIGNvbnRl
eHQ6IGh0dHA6Ly9sdWNlbmUuNDcyMDY2Lm4zLm5hYmJsZS5jb20vaG93LW11Y2gtYmxvY2tzaXpl
LWlzLXNldC1pbi1sdWNlbmUtdHA0MDMxNzk2Lmh0bWwKPj4gU2VudCBmcm9tIHRoZSBMdWNlbmUg
LSBKYXZhIFVzZXJzIG1haWxpbmcgbGlzdCBhcmNoaXZlIGF0IE5hYmJsZS5jb20uCj4+Cj4+IC0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLQo+PiBUbyB1bnN1YnNjcmliZSwgZS1tYWlsOiBqYXZhLXVzZXItdW5zdWJzY3Jp
YmVAbHVjZW5lLmFwYWNoZS5vcmcKPj4gRm9yIGFkZGl0aW9uYWwgY29tbWFuZHMsIGUtbWFpbDog
amF2YS11c2VyLWhlbHBAbHVjZW5lLmFwYWNoZS5vcmcKPj4KPgo+LS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCj5UbyB1
bnN1YnNjcmliZSwgZS1tYWlsOiBqYXZhLXVzZXItdW5zdWJzY3JpYmVAbHVjZW5lLmFwYWNoZS5v
cmcKPkZvciBhZGRpdGlvbmFsIGNvbW1hbmRzLCBlLW1haWw6IGphdmEtdXNlci1oZWxwQGx1Y2Vu
ZS5hcGFjaGUub3JnCj4K

DQotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0NClRvIHVuc3Vic2NyaWJlLCBlLW1haWw6IGphdmEtdXNlci11
bnN1YnNjcmliZUBsdWNlbmUuYXBhY2hlLm9yZw0KRm9yIGFkZGl0aW9uYWwgY29tbWFuZHMs
IGUtbWFpbDogamF2YS11c2VyLWhlbHBAbHVjZW5lLmFwYWNoZS5vcmcNCg0K

From java-user-return-54617-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jan  9 12:41:59 2013
Return-Path: <java-user-return-54617-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 7804CE06D
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed,  9 Jan 2013 12:41:59 +0000 (UTC)
Received: (qmail 90431 invoked by uid 500); 9 Jan 2013 12:41:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90293 invoked by uid 500); 9 Jan 2013 12:41:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90283 invoked by uid 99); 9 Jan 2013 12:41:57 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jan 2013 12:41:57 +0000
X-ASF-Spam-Status: No, hits=1.7 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of pelegitai17@gmail.com designates 209.85.220.170 as permitted sender)
Received: from [209.85.220.170] (HELO mail-vc0-f170.google.com) (209.85.220.170)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jan 2013 12:41:49 +0000
Received: by mail-vc0-f170.google.com with SMTP id fl11so1491071vcb.1
        for <java-user@lucene.apache.org>; Wed, 09 Jan 2013 04:41:28 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:date:message-id:subject:from:to:content-type;
        bh=Q54QNqlDY3LkvjuyVkuR4i8hDyie62hSrVeiRdBrL7U=;
        b=xaBsr2TZ7uyKYaL2CVohEhx17r6a2T6lCoeUPDP8gU7v4+/j5ne4/KdUMUz9c9vorf
         nDtNS+kHEDkWyWb2iawAxl+wQncWMsFSeIGcmpJrMv1REzTUWtKfhwdfJAIDPwbwegwg
         jXc0qQWWLSmo01IIs4OPNHA4w+as8tdsYuYN27efbRl0V2JVC7q94GunCRhVj7NJnDiD
         ex0apFmbfwjUq9dO4O/jNSVJeFKuQb2d/GqXtEwvm0yXsVMN8ll2Si9YTfwcsqH/Hho1
         48ubbazpX1t2VCwSuGB7wZChH9lV73eALnvmLijTrMgViIA9kES7rsUKs0IgzSQ1FKZd
         3p6Q==
MIME-Version: 1.0
Received: by 10.58.134.16 with SMTP id pg16mr7372636veb.12.1357735288814; Wed,
 09 Jan 2013 04:41:28 -0800 (PST)
Received: by 10.220.24.74 with HTTP; Wed, 9 Jan 2013 04:41:28 -0800 (PST)
Date: Wed, 9 Jan 2013 14:41:28 +0200
Message-ID: <CALvBDEgH+q8TqNwdzZ8gq3hhYbGw6pjX-5Hxi3=cOBiWZkh-jw@mail.gmail.com>
Subject: getting the offset of hits in a search
From: Itai Peleg <pelegitai17@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=089e0129492096ba8c04d2da61f6
X-Virus-Checked: Checked by ClamAV on apache.org

--089e0129492096ba8c04d2da61f6
Content-Type: text/plain; charset=ISO-8859-1

Hi,

I'n new to Lucene, and I'm having some problems with the search. Ive been
debugging Lucene in order to find out how I can get for each document what
are its "hits" (the terms that it has that were in the query) and their
offset. Can anyone give me some pointers?

Thanks in advance,
Itai

--089e0129492096ba8c04d2da61f6--

From java-user-return-54618-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jan  9 12:56:46 2013
Return-Path: <java-user-return-54618-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id AD104E0D7
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed,  9 Jan 2013 12:56:45 +0000 (UTC)
Received: (qmail 34421 invoked by uid 500); 9 Jan 2013 12:56:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34373 invoked by uid 500); 9 Jan 2013 12:56:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34365 invoked by uid 99); 9 Jan 2013 12:56:43 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jan 2013 12:56:43 +0000
X-ASF-Spam-Status: No, hits=1.7 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of gksrb92@gmail.com designates 209.85.220.174 as permitted sender)
Received: from [209.85.220.174] (HELO mail-vc0-f174.google.com) (209.85.220.174)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jan 2013 12:56:35 +0000
Received: by mail-vc0-f174.google.com with SMTP id d16so1498258vcd.33
        for <java-user@lucene.apache.org>; Wed, 09 Jan 2013 04:56:15 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=h2Wd8BLm3Lp7zBmNySSxsEWwrtAsKqoWhR+wk6mwdcM=;
        b=tSS+EJuk9Bo6qcTqc47wB1o2Pct+GMKefiFhWzp7jD++y4IW6qh79QNeozmmR1spI1
         FrjTddxmRkVXIvrpIsnxFvA20qVNXiZdmFQ+F8OVcE5VcRZIUev69FVqZ0dzlYOUm00k
         w/CeIn3pASA0cuqbwquakAape7REa5zHXScsC9qrHV+U1wg66jmD62BrwpETpuVIsIFf
         QFGIdBz4mqh0q/BGdqe+NIIL5KpgggkxHr/YKAN/sOwZetXDZAgLXs+sJ1MryCRH17it
         xC92nH+iqoh8waUaPKNbBGN1nzIZflLEGIYR2CT3p+uyb8/BQQdi76dlgq7k/EYX2ppz
         lXhQ==
MIME-Version: 1.0
Received: by 10.58.234.234 with SMTP id uh10mr935910vec.37.1357736175155; Wed,
 09 Jan 2013 04:56:15 -0800 (PST)
Received: by 10.52.92.234 with HTTP; Wed, 9 Jan 2013 04:56:15 -0800 (PST)
In-Reply-To: <CALvBDEgH+q8TqNwdzZ8gq3hhYbGw6pjX-5Hxi3=cOBiWZkh-jw@mail.gmail.com>
References: <CALvBDEgH+q8TqNwdzZ8gq3hhYbGw6pjX-5Hxi3=cOBiWZkh-jw@mail.gmail.com>
Date: Wed, 9 Jan 2013 14:56:15 +0200
Message-ID: <CAOZ_vPbtt=s6ftY9RX2mWwGcGiw1fYOy1G6HLY3VN+n6D51EOg@mail.gmail.com>
Subject: Re: getting the offset of hits in a search
From: =?EUC-KR?B?sejH0bHU?= <gksrb92@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=047d7b6d96fc6b3b1204d2da9615
X-Virus-Checked: Checked by ClamAV on apache.org

--047d7b6d96fc6b3b1204d2da9615
Content-Type: text/plain; charset=ISO-8859-1

Try SpanTermQuery, getSpans() function. It returns Spans object which you
can iterate through to find position of every hits in every documents.
http://lucene.apache.org/core/4_0_0/core/org/apache/lucene/search/spans/SpanTermQuery.html

2013/1/9 Itai Peleg <pelegitai17@gmail.com>

> Hi,
>
> I'n new to Lucene, and I'm having some problems with the search. Ive been
> debugging Lucene in order to find out how I can get for each document what
> are its "hits" (the terms that it has that were in the query) and their
> offset. Can anyone give me some pointers?
>
> Thanks in advance,
> Itai
>

--047d7b6d96fc6b3b1204d2da9615--

From java-user-return-54619-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jan  9 12:58:26 2013
Return-Path: <java-user-return-54619-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id A1B38E0E7
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed,  9 Jan 2013 12:58:26 +0000 (UTC)
Received: (qmail 45465 invoked by uid 500); 9 Jan 2013 12:58:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45420 invoked by uid 500); 9 Jan 2013 12:58:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45412 invoked by uid 99); 9 Jan 2013 12:58:24 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jan 2013 12:58:24 +0000
X-ASF-Spam-Status: No, hits=1.7 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of pelegitai17@gmail.com designates 209.85.220.182 as permitted sender)
Received: from [209.85.220.182] (HELO mail-vc0-f182.google.com) (209.85.220.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jan 2013 12:58:16 +0000
Received: by mail-vc0-f182.google.com with SMTP id fy27so1506276vcb.27
        for <java-user@lucene.apache.org>; Wed, 09 Jan 2013 04:57:55 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=7Pw3BY8G4Lesv6dq00Cy6EQvNK9+YwlfeOXH6U7uHGg=;
        b=yOpvlNZcH/cUqh68I5VpXM6wnnme2ozmo+/krlQ3RAmaHfsF7s2UyHMAR+vcTOs59e
         pFyunDcx1p+HNVlEGykqtz2B0o/dv50Q5/X4WoqAUJUgAyrQXuuy+OJEvZeQYUxmlszP
         UvwpDMxwAlenWR/L97G774VVvUNAULotudgvZUJnInml8MPSSDK48Sl/dV1xWI8MJ5CN
         J9R+tNwAh0XMojsElMQKQtI2eGko+aPsHaiKgXEZ7KC9LldZYiFByT2YFnS8vlmhI+ES
         zgLGNiUdZde+8/1rCtLEQZvbeD7v4c3qsJ0qchO+UaozhV2rROuq211Yq7i8jTyi0W+z
         Erug==
MIME-Version: 1.0
Received: by 10.221.11.205 with SMTP id pf13mr87474695vcb.70.1357736275805;
 Wed, 09 Jan 2013 04:57:55 -0800 (PST)
Received: by 10.220.24.74 with HTTP; Wed, 9 Jan 2013 04:57:55 -0800 (PST)
In-Reply-To: <CAOZ_vPbtt=s6ftY9RX2mWwGcGiw1fYOy1G6HLY3VN+n6D51EOg@mail.gmail.com>
References: <CALvBDEgH+q8TqNwdzZ8gq3hhYbGw6pjX-5Hxi3=cOBiWZkh-jw@mail.gmail.com>
	<CAOZ_vPbtt=s6ftY9RX2mWwGcGiw1fYOy1G6HLY3VN+n6D51EOg@mail.gmail.com>
Date: Wed, 9 Jan 2013 14:57:55 +0200
Message-ID: <CALvBDEi+F50gFOiQha70_6SRxQ0g3JLmv-5ghwoe6HhqeHuR=w@mail.gmail.com>
Subject: Re: getting the offset of hits in a search
From: Itai Peleg <pelegitai17@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=bcaec54fb4166b048f04d2da9c7e
X-Virus-Checked: Checked by ClamAV on apache.org

--bcaec54fb4166b048f04d2da9c7e
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

Great! I'll look into that.

Thanks!


2013/1/9 =EA=B9=80=ED=95=9C=EA=B7=9C <gksrb92@gmail.com>

> Try SpanTermQuery, getSpans() function. It returns Spans object which you
> can iterate through to find position of every hits in every documents.
>
> http://lucene.apache.org/core/4_0_0/core/org/apache/lucene/search/spans/S=
panTermQuery.html
>
> 2013/1/9 Itai Peleg <pelegitai17@gmail.com>
>
> > Hi,
> >
> > I'n new to Lucene, and I'm having some problems with the search. Ive be=
en
> > debugging Lucene in order to find out how I can get for each document
> what
> > are its "hits" (the terms that it has that were in the query) and their
> > offset. Can anyone give me some pointers?
> >
> > Thanks in advance,
> > Itai
> >
>

--bcaec54fb4166b048f04d2da9c7e--

From java-user-return-54620-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jan  9 14:05:41 2013
Return-Path: <java-user-return-54620-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 70425EFF9
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed,  9 Jan 2013 14:05:41 +0000 (UTC)
Received: (qmail 69929 invoked by uid 500); 9 Jan 2013 14:05:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69872 invoked by uid 500); 9 Jan 2013 14:05:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 60963 invoked by uid 99); 9 Jan 2013 14:03:30 -0000
X-ASF-Spam-Status: No, hits=2.0 required=5.0
	tests=SPF_NEUTRAL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: 216.139.236.26 is neither permitted nor denied by domain of fabianocomp@gmail.com)
Date: Wed, 9 Jan 2013 06:03:03 -0800 (PST)
From: algebra <fabianocomp@gmail.com>
To: java-user@lucene.apache.org
Message-ID: <1357740183704-4031871.post@n3.nabble.com>
Subject: FuzzyQuery in lucene 4.0
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

I was using lucene 3.6 and my function worked well. After I changed the
version of lucene to 4.0 and did some adjustments and my function is not
working. Someone tell me what do you know I'm doing wrong?

 public List <String> fuzzyLuceneList(List<String> list, String s) throws
CorruptIndexException, LockObtainFailedException, IOException,
ParseException {
        List<String> listr = new ArrayList<String>();

        Analyzer analyzer = new StandardAnalyzer(Version.LUCENE_40);

        Directory directory = new RAMDirectory();

        IndexWriterConfig config = new IndexWriterConfig(Version.LUCENE_40,
analyzer);

        IndexWriter iwriter = new IndexWriter(directory, config);

        Document doc;

        for (int i = 0; i < list.size(); i++) {
            doc = new Document();
            doc.add(new Field("fieldname", list.get(i), Field.Store.YES,
Field.Index.ANALYZED));
            iwriter.addDocument(doc);
        }

        iwriter.close();

        IndexReader reader = IndexReader.open(directory);
        IndexSearcher isearcher = new IndexSearcher(reader);

        Term term = new Term("fieldname", s);


        Query query = new FuzzyQuery(term, 1,0);// 0-2

        TopScoreDocCollector collector = TopScoreDocCollector.create(10,
true);
        isearcher.search(query, collector);

        ScoreDoc[] hits = collector.topDocs().scoreDocs;
        for (int i = 0; i < hits.length; i++) {
            Document hitDoc = isearcher.doc(hits[i].doc);
            listr.add(hitDoc.get("fieldname"));
        }

        //isearcher.close();
        directory.close();

        return listr;
    }

Thanks!



--
View this message in context: http://lucene.472066.n3.nabble.com/FuzzyQuery-in-lucene-4-0-tp4031871.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54621-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jan  9 14:23:35 2013
Return-Path: <java-user-return-54621-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 0B7CD9087
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed,  9 Jan 2013 14:23:35 +0000 (UTC)
Received: (qmail 13265 invoked by uid 500); 9 Jan 2013 14:23:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13217 invoked by uid 500); 9 Jan 2013 14:23:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13209 invoked by uid 99); 9 Jan 2013 14:23:32 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jan 2013 14:23:32 +0000
X-ASF-Spam-Status: No, hits=0.6 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ian.lea@gmail.com designates 209.85.223.174 as permitted sender)
Received: from [209.85.223.174] (HELO mail-ie0-f174.google.com) (209.85.223.174)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jan 2013 14:23:26 +0000
Received: by mail-ie0-f174.google.com with SMTP id c11so2081533ieb.5
        for <java-user@lucene.apache.org>; Wed, 09 Jan 2013 06:23:05 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=x-received:mime-version:in-reply-to:references:from:date:message-id
         :subject:to:content-type;
        bh=jkHe3kIcqu8ejD64Z9FQN2ZTIQy1wQASDcy1GUimXqY=;
        b=0h1Zg3FhI0QXtbXaJgfp3Bimhj/r4411ctK339PMXWuxLkru3LVEbtpr44Q7Hgid13
         hiMnM13EP69wFwMhGZeMSxQmkpxc4wLZdw+UW5ey/5s6sUiSSQpSNllyAkMKjlpApYME
         YC1xAmy/MLcWhlKAdnTu+Ch06HEAvwe1pQlhoYTwS+SlJZTFPPngUaUSRghiBgAY1jxE
         IDT0mGWneJuiNAfoL2GOKYXmgHKviMT2rxMoNClLpcOUS9NmTeP7v43Anchlf3/wOmkt
         UCrADoCQVSEhUhIT2GlbW+OMTWaNwzGM5eZACJBNJDXsqGucsg+KEyHT0MTU/VSek4s3
         FRGA==
X-Received: by 10.50.57.225 with SMTP id l1mr1664227igq.37.1357741385405; Wed,
 09 Jan 2013 06:23:05 -0800 (PST)
MIME-Version: 1.0
Received: by 10.50.184.232 with HTTP; Wed, 9 Jan 2013 06:22:44 -0800 (PST)
In-Reply-To: <1357740183704-4031871.post@n3.nabble.com>
References: <1357740183704-4031871.post@n3.nabble.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Wed, 9 Jan 2013 14:22:44 +0000
Message-ID: <CAEY5pxW49wEcGHFxtBgs2+4qmXqkkzX0w-wOtpfL_CyP45cXuw@mail.gmail.com>
Subject: Re: FuzzyQuery in lucene 4.0
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

What adjustments did you make?  One of them might be to blame.

But at a glance the code looks fine to me.  In what way is it not
working?  Care to provide any input/output/details of what
does/doesn't work?


--
Ian.


On Wed, Jan 9, 2013 at 2:03 PM, algebra <fabianocomp@gmail.com> wrote:
> I was using lucene 3.6 and my function worked well. After I changed the
> version of lucene to 4.0 and did some adjustments and my function is not
> working. Someone tell me what do you know I'm doing wrong?
>
>  public List <String> fuzzyLuceneList(List<String> list, String s) throws
> CorruptIndexException, LockObtainFailedException, IOException,
> ParseException {
>         List<String> listr = new ArrayList<String>();
>
>         Analyzer analyzer = new StandardAnalyzer(Version.LUCENE_40);
>
>         Directory directory = new RAMDirectory();
>
>         IndexWriterConfig config = new IndexWriterConfig(Version.LUCENE_40,
> analyzer);
>
>         IndexWriter iwriter = new IndexWriter(directory, config);
>
>         Document doc;
>
>         for (int i = 0; i < list.size(); i++) {
>             doc = new Document();
>             doc.add(new Field("fieldname", list.get(i), Field.Store.YES,
> Field.Index.ANALYZED));
>             iwriter.addDocument(doc);
>         }
>
>         iwriter.close();
>
>         IndexReader reader = IndexReader.open(directory);
>         IndexSearcher isearcher = new IndexSearcher(reader);
>
>         Term term = new Term("fieldname", s);
>
>
>         Query query = new FuzzyQuery(term, 1,0);// 0-2
>
>         TopScoreDocCollector collector = TopScoreDocCollector.create(10,
> true);
>         isearcher.search(query, collector);
>
>         ScoreDoc[] hits = collector.topDocs().scoreDocs;
>         for (int i = 0; i < hits.length; i++) {
>             Document hitDoc = isearcher.doc(hits[i].doc);
>             listr.add(hitDoc.get("fieldname"));
>         }
>
>         //isearcher.close();
>         directory.close();
>
>         return listr;
>     }
>
> Thanks!
>
>
>
> --
> View this message in context: http://lucene.472066.n3.nabble.com/FuzzyQuery-in-lucene-4-0-tp4031871.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54622-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jan  9 14:35:28 2013
Return-Path: <java-user-return-54622-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 44B08EFB9
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed,  9 Jan 2013 14:35:28 +0000 (UTC)
Received: (qmail 46592 invoked by uid 500); 9 Jan 2013 14:35:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46529 invoked by uid 500); 9 Jan 2013 14:35:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46521 invoked by uid 99); 9 Jan 2013 14:35:26 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jan 2013 14:35:26 +0000
X-ASF-Spam-Status: No, hits=2.0 required=5.0
	tests=SPF_NEUTRAL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: 216.139.236.26 is neither permitted nor denied by domain of fabianocomp@gmail.com)
Received: from [216.139.236.26] (HELO sam.nabble.com) (216.139.236.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jan 2013 14:35:19 +0000
Received: from ben.nabble.com ([192.168.236.152])
	by sam.nabble.com with esmtp (Exim 4.72)
	(envelope-from <fabianocomp@gmail.com>)
	id 1Tswk7-00073p-1v
	for java-user@lucene.apache.org; Wed, 09 Jan 2013 06:34:59 -0800
Date: Wed, 9 Jan 2013 06:34:59 -0800 (PST)
From: algebra <fabianocomp@gmail.com>
To: java-user@lucene.apache.org
Message-ID: <1357742099045-4031879.post@n3.nabble.com>
In-Reply-To: <CAEY5pxW49wEcGHFxtBgs2+4qmXqkkzX0w-wOtpfL_CyP45cXuw@mail.gmail.com>
References: <1357740183704-4031871.post@n3.nabble.com> <CAEY5pxW49wEcGHFxtBgs2+4qmXqkkzX0w-wOtpfL_CyP45cXuw@mail.gmail.com>
Subject: Re: FuzzyQuery in lucene 4.0
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

is true Ian, o code is good.

The only thing that I dont understand is a line:

Query query = new FuzzyQuery(term, 2 ,0); //0-2

Whats means 0 to 2?



--
View this message in context: http://lucene.472066.n3.nabble.com/FuzzyQuery-in-lucene-4-0-tp4031871p4031879.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54623-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jan  9 14:45:22 2013
Return-Path: <java-user-return-54623-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 15014EFEF
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed,  9 Jan 2013 14:45:22 +0000 (UTC)
Received: (qmail 84538 invoked by uid 500); 9 Jan 2013 14:45:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84488 invoked by uid 500); 9 Jan 2013 14:45:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84477 invoked by uid 99); 9 Jan 2013 14:45:20 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jan 2013 14:45:20 +0000
X-ASF-Spam-Status: No, hits=0.6 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 209.85.212.181 as permitted sender)
Received: from [209.85.212.181] (HELO mail-wi0-f181.google.com) (209.85.212.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jan 2013 14:45:14 +0000
Received: by mail-wi0-f181.google.com with SMTP id hq4so564601wib.2
        for <java-user@lucene.apache.org>; Wed, 09 Jan 2013 06:44:53 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        bh=pKbAfB84nZ/PpH/DBpfCuIUfAXIE7Btqj/naNqSQ8kA=;
        b=NuknfXZOt0PwHf9qHGz+BufMOSbC6cSVQLhoYGiXJPrfn72M3s8bBkHB+0QOm9dee3
         toA5sAay7fh7qqf04QwzIhgLkJJV0lS8UO3A21DUmBQybxJIwTW7gqBsiMWvOKP4UkuL
         smGub2aaaKmk0ygeKCC+v0eirbJBcTPzh0N4HZa8YBzbZ1+B7b07NHs/rIM/puAolzy8
         XUdbI4cPHaGsV3a9HsyB9T/lXfXGYFviipYAqfl5W/OwQ+dY6x7aD7UHJIW0Ib3wkvAH
         2Z7wcJyC4oDsmTD1MdfdB1PM/+y2xhUq5+TVKsUkkbuYefBKs6CBL6foECS1Qa06MdvC
         f4ZA==
Received: by 10.180.109.195 with SMTP id hu3mr3607750wib.31.1357742693055;
 Wed, 09 Jan 2013 06:44:53 -0800 (PST)
MIME-Version: 1.0
Received: by 10.194.57.11 with HTTP; Wed, 9 Jan 2013 06:44:32 -0800 (PST)
In-Reply-To: <1357742099045-4031879.post@n3.nabble.com>
References: <1357740183704-4031871.post@n3.nabble.com> <CAEY5pxW49wEcGHFxtBgs2+4qmXqkkzX0w-wOtpfL_CyP45cXuw@mail.gmail.com>
 <1357742099045-4031879.post@n3.nabble.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Wed, 9 Jan 2013 14:44:32 +0000
Message-ID: <CAEY5pxVK_vWd6_YYpc=TUnr3M4GHVci0x=9JuKJdECE79LahUg@mail.gmail.com>
Subject: Re: FuzzyQuery in lucene 4.0
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

See the javadocs for FuzzyQuery to see what the parameters are.  I
can't tell you what the comment means.  Possible values to try maybe?


--
Ian.


On Wed, Jan 9, 2013 at 2:34 PM, algebra <fabianocomp@gmail.com> wrote:
> is true Ian, o code is good.
>
> The only thing that I dont understand is a line:
>
> Query query = new FuzzyQuery(term, 2 ,0); //0-2
>
> Whats means 0 to 2?
>
>
>
> --
> View this message in context: http://lucene.472066.n3.nabble.com/FuzzyQuery-in-lucene-4-0-tp4031871p4031879.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54624-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jan  9 15:11:10 2013
Return-Path: <java-user-return-54624-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id CD798E111
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed,  9 Jan 2013 15:11:10 +0000 (UTC)
Received: (qmail 65271 invoked by uid 500); 9 Jan 2013 15:11:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65228 invoked by uid 500); 9 Jan 2013 15:11:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65218 invoked by uid 99); 9 Jan 2013 15:11:08 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jan 2013 15:11:08 +0000
X-ASF-Spam-Status: No, hits=-2.3 required=5.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [129.176.212.47] (HELO mail10.mayo.edu) (129.176.212.47)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jan 2013 15:10:57 +0000
Received: from roedlp003a.mayo.edu (HELO mail10.mayo.edu) ([129.176.158.13])
  by ironport10-dlp.mayo.edu with ESMTP; 09 Jan 2013 09:10:35 -0600
X-IronPort-Anti-Spam-Filtered: true
X-IronPort-Anti-Spam-Result: Av8EABeG7VCBsNQ1/2dsb2JhbABEvVIWc4IeAQEBAwE6OgoNAQgiFEIlAgQbiAkGl3qYNoVziTCGf2EDplWCdIIm
Received: from mhro1a.mayo.edu ([129.176.212.53])
  by ironport10.mayo.edu with ESMTP; 09 Jan 2013 09:10:35 -0600
Received: from MSGPEXCHA07A.mfad.mfroot.org (msgpexcha07a.mayo.edu [129.176.249.223]) by mhro1a.mayo.edu with ESMTP id BT-MMP-34787 for java-user@lucene.apache.org; Wed, 9 Jan 2013 09:10:35 -0600
Received: from MSGPEXCHA08A.mfad.mfroot.org (129.176.249.238) by
 MSGPEXCHA07A.mfad.mfroot.org (129.176.249.223) with Microsoft SMTP Server
 (TLS) id 14.2.328.9; Wed, 9 Jan 2013 09:10:34 -0600
Received: from MSGPEXCHA28B.mfad.mfroot.org ([169.254.11.102]) by
 MSGPEXCHA08A.mfad.mfroot.org ([169.254.11.82]) with mapi id 14.02.0328.009;
 Wed, 9 Jan 2013 09:10:34 -0600
From: "Wu, Stephen T., Ph.D." <Wu.Stephen@mayo.edu>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Subject: Re: Lucene for a linguistic corpus
Thread-Topic: Lucene for a linguistic corpus
Thread-Index: AQHN60FtMeHoZWI4wkmtFBGjfGWDephAHxQAgAEBWYA=
Date: Wed, 9 Jan 2013 15:10:34 +0000
Message-ID: <5E12F7FD7D58D54DA5542ECC8B14519840C114@MSGPEXCHA28B.mfad.mfroot.org>
In-Reply-To: <5E420646-FE07-4588-A927-A4E006A0CBCA@apache.org>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
user-agent: Microsoft-Entourage/13.13.0.120411
x-originating-ip: [10.128.209.12]
Content-Type: text/plain; charset="us-ascii"
Content-ID: <5EBC9731C540884BA169CCDF6890C22B@exchange.mayo.edu>
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-CFilter-Loop: Reflected
X-Virus-Checked: Checked by ClamAV on apache.org

>> For an example, in the phrase "A man saw a elephant" "saw" has annotatio=
ns as
>> follows (we also say that its position in index is 1234):
>>=20
>> {lemma: see, pos: verb, tense: past}, {lemma: saw, pos: noun, number:
>> singular}
>>=20
>> I think, it would be more effective to insert parse index in each attrib=
ute's
>> posting list entry as a payload and use it at the intersectiion stage. E=
.g.,
>> we have a posting list for 'pos =3D Verb' like ...|...|1.1234|...|..., a=
nd a
>> posting list for 'number =3D Singular': ...|...|2.1234|...|... While pro=
cessing
>> a query like 'pos =3D Verb AND number =3D singular' at all stages of pos=
ting list
>> processing 'x.1234' will be accepted until the intersection stage at whi=
ch
>> they will be rejected because of non-corresponding parse indexes.
We're working on something very similar.
Are there really posting lists like this (e.g., separate lists for pos=3DVe=
rb,
number=3DSingular) for things in Payloads?  I think some previous discussio=
n
was saying this kind of posting list is not available.  I couldn't find
anything like that in the documentation about the index format. If there
are, this would be really efficient.

> You might be able to insert your parses as payloads on a term and then
> implement a scorer extension (override computePayloadFactor) to handle yo=
ur
> join cases for a given word.  You may also need to extend PayloadQuery or
> PayloadTermQuery.  Note, I don't know how well this will perform.
We've done it this way before, storing a slightly different set of
information in the Payload.  I thought making use of a Payload, though,
requires you to iterate through all the tokens, whether in the Analyzer
(i.e., in a TokenFilter) or Similarity (in an overridden scorePayload()
function).

If I'm right, then filtering this out at intersection time might not be
quite as efficient as you're talking about, but it's definitely a reasonabl=
e
way to do it.

stephen


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54625-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jan  9 17:13:34 2013
Return-Path: <java-user-return-54625-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 6DF0695CA
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed,  9 Jan 2013 17:13:34 +0000 (UTC)
Received: (qmail 16906 invoked by uid 500); 9 Jan 2013 17:13:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16851 invoked by uid 500); 9 Jan 2013 17:13:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16843 invoked by uid 99); 9 Jan 2013 17:13:32 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jan 2013 17:13:32 +0000
X-ASF-Spam-Status: No, hits=3.4 required=5.0
	tests=AXB_XMAILER_MIMEOLE_OL_B054A,RCVD_IN_DNSWL_NONE,SPF_PASS,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of SRS0=K05g8G=LC=basetechnology.com=jack@yourhostingaccount.com designates 65.254.253.133 as permitted sender)
Received: from [65.254.253.133] (HELO mailout16.yourhostingaccount.com) (65.254.253.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jan 2013 17:13:25 +0000
Received: from mailscan05.yourhostingaccount.com ([10.1.15.5] helo=mailscan05.yourhostingaccount.com)
	by mailout16.yourhostingaccount.com with esmtp (Exim)
	id 1TszD6-00059i-Fv
	for java-user@lucene.apache.org; Wed, 09 Jan 2013 12:13:04 -0500
Received: from impout01.yourhostingaccount.com ([10.1.55.1] helo=impout01.yourhostingaccount.com)
	by mailscan05.yourhostingaccount.com with esmtp (Exim)
	id 1TszD6-0004lu-4z
	for java-user@lucene.apache.org; Wed, 09 Jan 2013 12:13:04 -0500
Received: from authsmtp16.yourhostingaccount.com ([10.1.18.16])
	by impout01.yourhostingaccount.com with NO UCE
	id ltD41k0010LoD9W01tD4NK; Wed, 09 Jan 2013 12:13:04 -0500
X-Authority-Analysis: v=2.0 cv=EJGEIilC c=1 sm=1
 a=yH02RjTyxywMAIqhn74x1Q==:17 a=aQzbgH187woA:10 a=Wy3_bsKNvzgA:10
 a=3jZET7lWBKwA:10 a=8nJEP1OIZ-IA:10 a=jvYhGVW7AAAA:8 a=GL4jA_nXkzoA:10
 a=mV9VRH-2AAAA:8 a=pGLkceISAAAA:8 a=9I5xiGouAAAA:8 a=IN0NqY4HfIJGoaPRnD0A:9
 a=wPNLvfGTeEIA:10 a=km3rt5aNgTsA:10 a=2fPOlPt4dusA:10 a=MSl-tDqOz04A:10
 a=ltXMujfcukYoTVgNOHxvog==:117
X-EN-OrigOutIP: 10.1.18.16
X-EN-IMPSID: ltD41k0010LoD9W01tD4NK
Received: from 207-237-113-14.c3-0.nyr-ubr1.nyr.ny.cable.rcn.com ([207.237.113.14] helo=JackKrupansky)
	by authsmtp16.yourhostingaccount.com with esmtpa (Exim)
	id 1TszD5-0007Ay-Jb
	for java-user@lucene.apache.org; Wed, 09 Jan 2013 12:13:03 -0500
Message-ID: <8428DD777A0344DF8ACF8C4F8D9DF12B@JackKrupansky>
From: "Jack Krupansky" <jack@basetechnology.com>
To: <java-user@lucene.apache.org>
References: <1357740183704-4031871.post@n3.nabble.com> <CAEY5pxW49wEcGHFxtBgs2+4qmXqkkzX0w-wOtpfL_CyP45cXuw@mail.gmail.com> <1357742099045-4031879.post@n3.nabble.com> <CAEY5pxVK_vWd6_YYpc=TUnr3M4GHVci0x=9JuKJdECE79LahUg@mail.gmail.com>
In-Reply-To: <CAEY5pxVK_vWd6_YYpc=TUnr3M4GHVci0x=9JuKJdECE79LahUg@mail.gmail.com>
Subject: Re: FuzzyQuery in lucene 4.0
Date: Wed, 9 Jan 2013 12:13:01 -0500
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
Importance: Normal
X-Mailer: Microsoft Windows Live Mail 15.4.3555.308
X-MimeOLE: Produced By Microsoft MimeOLE V15.4.3555.308
X-EN-UserInfo: e0a4b55451ed9f27313ebf02e3d4348d:fc4a93e1349e680c52bdd723c0ab3ef6
X-EN-AuthUser: jack@basetechnology.com
Sender:  "Jack Krupansky" <jack@basetechnology.com>
X-EN-OrigIP: 207.237.113.14
X-EN-OrigHost: 207-237-113-14.c3-0.nyr-ubr1.nyr.ny.cable.rcn.com
X-Virus-Checked: Checked by ClamAV on apache.org

FWIW, new FuzzyQuery(term, 2 ,0) is the same as new FuzzyQuery(term), given 
the current values of defaultMaxEdits (2) and defaultPrefixLength (0).

-- Jack Krupansky

-----Original Message----- 
From: Ian Lea
Sent: Wednesday, January 09, 2013 9:44 AM
To: java-user@lucene.apache.org
Subject: Re: FuzzyQuery in lucene 4.0

See the javadocs for FuzzyQuery to see what the parameters are.  I
can't tell you what the comment means.  Possible values to try maybe?


--
Ian.


On Wed, Jan 9, 2013 at 2:34 PM, algebra <fabianocomp@gmail.com> wrote:
> is true Ian, o code is good.
>
> The only thing that I dont understand is a line:
>
> Query query = new FuzzyQuery(term, 2 ,0); //0-2
>
> Whats means 0 to 2?
>
>
>
> --
> View this message in context: 
> http://lucene.472066.n3.nabble.com/FuzzyQuery-in-lucene-4-0-tp4031871p4031879.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54626-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jan  9 17:35:31 2013
Return-Path: <java-user-return-54626-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 8BDBAE3A1
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed,  9 Jan 2013 17:35:31 +0000 (UTC)
Received: (qmail 87250 invoked by uid 500); 9 Jan 2013 17:35:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87194 invoked by uid 500); 9 Jan 2013 17:35:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87179 invoked by uid 99); 9 Jan 2013 17:35:29 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jan 2013 17:35:29 +0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.220.171] (HELO mail-vc0-f171.google.com) (209.85.220.171)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jan 2013 17:35:21 +0000
Received: by mail-vc0-f171.google.com with SMTP id n11so1795729vch.16
        for <java-user@lucene.apache.org>; Wed, 09 Jan 2013 09:34:59 -0800 (PST)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:x-gm-message-state;
        bh=Q4QMPN+HwO5UijyJslUl6+YLaINX7nXzVuKNTbNRelc=;
        b=MVbMuth8xC+kIlNyRHbMY/ixc00mFLv4V/X+j8xSBQa4XN1Sz1e8vKbUfIjhmI/hfk
         adpCdL+ynAYTDj/LjUrmXgdf/aU9dnWIsdbd4iHOoGoTHatnvDGkPS6USJ3gUYQMHL4b
         M8YGIKOXCeeSzrgkV4s1IYPuVyCTlMRAxncSw6NAOQb8rKAmMUWk7Gg8kVYz5AtZG8Tw
         N+AzFkei9EMIpB8zNG3R5lnYDzZEKDamFvLr4WV0F+4BqRHY7QoQb/6nS0aSRcfI7jqf
         AgWGOFjLK+St6smg4C/yFdaV1//7Ub6G4wrrBrmkXXOogpPEZST+EGYcxAFKjpG45o9f
         uTLg==
MIME-Version: 1.0
Received: by 10.220.219.204 with SMTP id hv12mr87576224vcb.71.1357752899514;
 Wed, 09 Jan 2013 09:34:59 -0800 (PST)
Received: by 10.58.234.138 with HTTP; Wed, 9 Jan 2013 09:34:59 -0800 (PST)
In-Reply-To: <CA+Ltc5+7J5MXQSagA22cWsv2bvyn_hsqLgTE1BAJSooMYF5gRA@mail.gmail.com>
References: <CA+Ltc5+7J5MXQSagA22cWsv2bvyn_hsqLgTE1BAJSooMYF5gRA@mail.gmail.com>
Date: Wed, 9 Jan 2013 19:34:59 +0200
Message-ID: <CA+Ltc5Kz3+q5GLKvVaG1XCN3Z92QdrH8+0V5kr-wb4998FByyw@mail.gmail.com>
Subject: Fwd: extensive minor garbage collection when using RAMDirectory on
 Lucune 3.6.2
From: Alon Muchnick <alon@datonics.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Content-Type: multipart/mixed; boundary=14dae9cfcea444b07104d2de7b18
X-Gm-Message-State: ALoCoQmJw/Bxvg1XtZBSX05DonBfTRxzwMsL9dBt8mOZghqZ/Mf1vDlcJAWeC2XIkdAaEZ+35yH4
X-Virus-Checked: Checked by ClamAV on apache.org

--14dae9cfcea444b07104d2de7b18
Content-Type: multipart/alternative; boundary=14dae9cfcea444b06d04d2de7b16

--14dae9cfcea444b06d04d2de7b16
Content-Type: text/plain; charset=ISO-8859-1

hi ,
after upgrading to Lucune 3.6.2 i noticed there is an extensive minor
garbage collection operations. once or twice a second , and the amount of
memory being freed is about 600 MB each time for a load of 60 searches per
second :

2013-01-09T18:57:24.350+0200: 174200.121: [GC [PSYoungGen:
630064K->544K(630336K)] 1405948K->776747K(1660992K), 0.0084250 secs]
[Times: user=0.03 sys=0.00, real=0.01 secs]
2013-01-09T18:57:24.785+0200: 174200.555: [GC [PSYoungGen:
629920K->704K(630336K)] 1406123K->777083K(1660992K), 0.0066510 secs]
[Times: user=0.04 sys=0.00, real=0.01 secs]

after some investigation , the caused seemed to be Lucune related , we are
using RAM directory (with about 70000 documents ) on top of tomcat 7.

so i took Lucune source code and integrated it to our application , then
run Jprofiler during some  load for a minute and checked the "application
call tree " for "Garbage collected objects" only .
i found that the 2 Lucune method that produce the most garbage collected
object are (*screen shot attached* ) :

(we have several indexes the below is from one of them )


   - 23.2% - 215 MB - 48,252 alloc.
   org.apache.lucene.search.ExactPhraseScorer.


   - 6.3% - 60,481 kB - 728,414 alloc.
   org.apache.lucene.search.BooleanQuery$BooleanWeight.scorer



looking at the currently live object i see the top 2 classes instance are (
a screen shot is also attached )  :

 org.apache.lucene.search.BooleanScorer$Bucket (instance count )
1311699  (size)
41974368

 org.apache.lucene.search.ScoreDoc (instance count )45846  (size)1100304

we have a system with an earlier version  (tomcat 5.5 and Lucune 3.0.3 our
all other code / jars are the same) which handles the same load and has the
same indexes and the minor gc there occurs once every 1-2 second and the
amount of memory being freed is about 60 MB.

does this behavior is normal ?
does a search should really generate so much short lived objects ( about
5MB for a search ) ?
should we try and use some other RAM bases Index ? ( i know
InstantiatedIndex is deprecated )

thanks in advance .

Alon

--14dae9cfcea444b06d04d2de7b16
Content-Type: text/html; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

<div dir=3D"ltr">hi , <br><div class=3D"gmail_quote"><div dir=3D"ltr"><div>=
<div><div><div>after upgrading to Lucune 3.6.2 i noticed there is an extens=
ive minor garbage collection operations. once or twice a second , and the a=
mount of memory being freed is about 600 MB each time for a load of 60 sear=
ches per second :<br>

<br>2013-01-09T18:57:24.350+0200: 174200.121: [GC [PSYoungGen: 630064K-&gt;=
544K(630336K)] 1405948K-&gt;776747K(1660992K), 0.0084250 secs] [Times: user=
=3D0.03 sys=3D0.00, real=3D0.01 secs]<br>2013-01-09T18:57:24.785+0200: 1742=
00.555: [GC [PSYoungGen: 629920K-&gt;704K(630336K)] 1406123K-&gt;777083K(16=
60992K), 0.0066510 secs] [Times: user=3D0.04 sys=3D0.00, real=3D0.01 secs]<=
br>

<br></div>after some investigation , the caused seemed to be Lucune related=
 , we are using RAM directory (with about 70000 documents ) on top of tomca=
t 7.<br><br></div>so i took Lucune source code and integrated it to our app=
lication , then run Jprofiler during some=A0 load for a minute and checked =
the &quot;application call tree &quot; for &quot;Garbage collected objects&=
quot; only .<br>

</div>i found that the 2 Lucune method that produce the most garbage collec=
ted object are (<u>screen shot attached</u> ) :<br></div><div><br>(we have =
several indexes the below is from one of them ) <br></div><div><br></div>



<ul><li>23.2% - 215 MB - 48,252 alloc. org.apache.lucene.search.ExactPhrase=
Scorer.
</li></ul>



<ul><li>6.3% - 60,481 kB - 728,414 alloc. org.apache.lucene.search.BooleanQ=
uery$BooleanWeight.scorer
</li></ul><p>=A0</p><p>looking at the currently live object i see the top 2=
 classes instance  are ( a screen shot is also attached )=A0 :<br></p><p>

</p><table>
<tbody><tr>
  <td>org.apache.lucene.search.BooleanScorer$Bucket</td>
  <td>(instance count ) 1311699</td>
  <td>=A0(size) 41974368</td>
</tr>
</tbody></table>

<p>

</p><table>
<tbody><tr>
  <td>org.apache.lucene.search.ScoreDoc</td>
  <td>(instance count )45846</td>
  <td>=A0(size)1100304</td>
</tr>
</tbody></table>



<div><div><div><div><div><br></div><div>we have a system with an earlier ve=
rsion=A0 (tomcat 5.5 and Lucune 3.0.3 our all other code / jars are the sam=
e) which handles the same load and has the same indexes and the minor gc th=
ere occurs once every 1-2 second and the amount of memory being freed is ab=
out 60 MB.<br>

<br></div><div>does this behavior is normal ? <br>does a search should real=
ly generate so much short lived objects ( about 5MB for a search ) ?<br></d=
iv><div>should we try and use some other RAM bases Index ? ( i know Instant=
iatedIndex is deprecated )<br>

<br></div><div>thanks in advance .<span class=3D"HOEnZb"><font color=3D"#88=
8888"><br><br>Alon <br></font></span></div><div><br></div></div></div></div=
></div></div>
</div><br></div>

--14dae9cfcea444b06d04d2de7b16--

--14dae9cfcea444b07104d2de7b18
Content-Type: text/plain; charset=us-ascii


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
--14dae9cfcea444b07104d2de7b18--

From java-user-return-54627-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jan  9 17:38:57 2013
Return-Path: <java-user-return-54627-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 21CA2E3BB
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed,  9 Jan 2013 17:38:57 +0000 (UTC)
Received: (qmail 3501 invoked by uid 500); 9 Jan 2013 17:38:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3454 invoked by uid 500); 9 Jan 2013 17:38:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3441 invoked by uid 99); 9 Jan 2013 17:38:54 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jan 2013 17:38:54 +0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.212.53] (HELO mail-vb0-f53.google.com) (209.85.212.53)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jan 2013 17:38:48 +0000
Received: by mail-vb0-f53.google.com with SMTP id b23so1793876vbz.40
        for <java-user@lucene.apache.org>; Wed, 09 Jan 2013 09:38:27 -0800 (PST)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:x-gm-message-state;
        bh=EwEzSEl4dBJb6Hl+qj7a40Zkc16AbObj3qVJVx28Vsk=;
        b=CupbrupS6pT/Z8XEfK1TY2bmComPgWY7df7DtNkL4DAl1pD/e3iQ2Q3536wxreuivk
         THr8PoqtYbbFQztb9elPrxG1B2nFE6g6/lwhiD7h4HaIcR+Tl4ZdRrArYNL22jl4UzrA
         bHSnytqZIEBFTINMNSAJKuWhMqYz8AaiqaRcdIN/fY2/AlfU04L94/oEel0qOlml/gfW
         y3iNkvzeP6pwsGirA5kH9CjVVs/LMEu7jL+0XIURbjl4iqlOnBFfHwHbVS9Iq5RBl4cq
         oWOtDsTvVT4P1l49q4NYFjpSfloiQTztCV2xl/jb+OH1xN252NKHykffXryC/twzMV/k
         B1bA==
MIME-Version: 1.0
Received: by 10.52.180.200 with SMTP id dq8mr77348133vdc.71.1357753107233;
 Wed, 09 Jan 2013 09:38:27 -0800 (PST)
Received: by 10.58.234.138 with HTTP; Wed, 9 Jan 2013 09:38:27 -0800 (PST)
In-Reply-To: <CA+Ltc5Kz3+q5GLKvVaG1XCN3Z92QdrH8+0V5kr-wb4998FByyw@mail.gmail.com>
References: <CA+Ltc5+7J5MXQSagA22cWsv2bvyn_hsqLgTE1BAJSooMYF5gRA@mail.gmail.com>
	<CA+Ltc5Kz3+q5GLKvVaG1XCN3Z92QdrH8+0V5kr-wb4998FByyw@mail.gmail.com>
Date: Wed, 9 Jan 2013 19:38:27 +0200
Message-ID: <CA+Ltc5LaeDqVcP4DvyFoaE6C47OV5JcBXsSRg87oXF8XgTyjcw@mail.gmail.com>
Subject: Re: extensive minor garbage collection when using RAMDirectory on
 Lucune 3.6.2
From: Alon Muchnick <alon@datonics.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Content-Type: multipart/mixed; boundary=bcaec517ab26a63e4104d2de876b
X-Gm-Message-State: ALoCoQlc2JXOsab2P8WRJEcyAcmH0lOLyr0lWiPFZ2aPIkDIrVKFp+qNMZlNjKNc+KmY2+eV+/y/
X-Virus-Checked: Checked by ClamAV on apache.org

--bcaec517ab26a63e4104d2de876b
Content-Type: multipart/alternative; boundary=bcaec517ab26a63e3d04d2de8769

--bcaec517ab26a63e3d04d2de8769
Content-Type: text/plain; charset=ISO-8859-1

attaching the second screen shot of live recorded objects .

thanks again

Alon


On Wed, Jan 9, 2013 at 7:34 PM, Alon Muchnick <alon@datonics.com> wrote:

> hi ,
> after upgrading to Lucune 3.6.2 i noticed there is an extensive minor
> garbage collection operations. once or twice a second , and the amount of
> memory being freed is about 600 MB each time for a load of 60 searches per
> second :
>
> 2013-01-09T18:57:24.350+0200: 174200.121: [GC [PSYoungGen:
> 630064K->544K(630336K)] 1405948K->776747K(1660992K), 0.0084250 secs]
> [Times: user=0.03 sys=0.00, real=0.01 secs]
> 2013-01-09T18:57:24.785+0200: 174200.555: [GC [PSYoungGen:
> 629920K->704K(630336K)] 1406123K->777083K(1660992K), 0.0066510 secs]
> [Times: user=0.04 sys=0.00, real=0.01 secs]
>
> after some investigation , the caused seemed to be Lucune related , we are
> using RAM directory (with about 70000 documents ) on top of tomcat 7.
>
> so i took Lucune source code and integrated it to our application , then
> run Jprofiler during some  load for a minute and checked the "application
> call tree " for "Garbage collected objects" only .
> i found that the 2 Lucune method that produce the most garbage collected
> object are (*screen shot attached* ) :
>
> (we have several indexes the below is from one of them )
>
>
>    - 23.2% - 215 MB - 48,252 alloc.
>    org.apache.lucene.search.ExactPhraseScorer.
>
>
>    - 6.3% - 60,481 kB - 728,414 alloc.
>    org.apache.lucene.search.BooleanQuery$BooleanWeight.scorer
>
>
>
> looking at the currently live object i see the top 2 classes instance are
> ( a screen shot is also attached )  :
>
>  org.apache.lucene.search.BooleanScorer$Bucket (instance count ) 1311699  (size)
> 41974368
>
>  org.apache.lucene.search.ScoreDoc (instance count )45846  (size)1100304
>
> we have a system with an earlier version  (tomcat 5.5 and Lucune 3.0.3 our
> all other code / jars are the same) which handles the same load and has the
> same indexes and the minor gc there occurs once every 1-2 second and the
> amount of memory being freed is about 60 MB.
>
> does this behavior is normal ?
> does a search should really generate so much short lived objects ( about
> 5MB for a search ) ?
> should we try and use some other RAM bases Index ? ( i know
> InstantiatedIndex is deprecated )
>
> thanks in advance .
>
> Alon
>
>
>

--bcaec517ab26a63e3d04d2de8769
Content-Type: text/html; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

<div dir=3D"ltr"><div><div>attaching the second screen shot of live recorde=
d objects .<br><br></div>thanks again <br><br></div>Alon <br></div><div cla=
ss=3D"gmail_extra"><br><br><div class=3D"gmail_quote">On Wed, Jan 9, 2013 a=
t 7:34 PM, Alon Muchnick <span dir=3D"ltr">&lt;<a href=3D"mailto:alon@daton=
ics.com" target=3D"_blank">alon@datonics.com</a>&gt;</span> wrote:<br>
<blockquote class=3D"gmail_quote" style=3D"margin:0 0 0 .8ex;border-left:1p=
x #ccc solid;padding-left:1ex"><div class=3D"HOEnZb"><div class=3D"h5"><div=
 dir=3D"ltr">hi , <br><div class=3D"gmail_quote"><div dir=3D"ltr"><div><div=
><div><div>
after upgrading to Lucune 3.6.2 i noticed there is an extensive minor garba=
ge collection operations. once or twice a second , and the amount of memory=
 being freed is about 600 MB each time for a load of 60 searches per second=
 :<br>


<br>2013-01-09T18:57:24.350+0200: 174200.121: [GC [PSYoungGen: 630064K-&gt;=
544K(630336K)] 1405948K-&gt;776747K(1660992K), 0.0084250 secs] [Times: user=
=3D0.03 sys=3D0.00, real=3D0.01 secs]<br>2013-01-09T18:57:24.785+0200: 1742=
00.555: [GC [PSYoungGen: 629920K-&gt;704K(630336K)] 1406123K-&gt;777083K(16=
60992K), 0.0066510 secs] [Times: user=3D0.04 sys=3D0.00, real=3D0.01 secs]<=
br>


<br></div>after some investigation , the caused seemed to be Lucune related=
 , we are using RAM directory (with about 70000 documents ) on top of tomca=
t 7.<br><br></div>so i took Lucune source code and integrated it to our app=
lication , then run Jprofiler during some=A0 load for a minute and checked =
the &quot;application call tree &quot; for &quot;Garbage collected objects&=
quot; only .<br>


</div>i found that the 2 Lucune method that produce the most garbage collec=
ted object are (<u>screen shot attached</u> ) :<br></div><div><br>(we have =
several indexes the below is from one of them ) <br></div><div><br></div>




<ul><li>23.2% - 215 MB - 48,252 alloc. org.apache.lucene.search.ExactPhrase=
Scorer.
</li></ul>



<ul><li>6.3% - 60,481 kB - 728,414 alloc. org.apache.lucene.search.BooleanQ=
uery$BooleanWeight.scorer
</li></ul><p>=A0</p><p>looking at the currently live object i see the top 2=
 classes instance  are ( a screen shot is also attached )=A0 :<br></p><p>

</p><table>
<tbody><tr>
  <td>org.apache.lucene.search.BooleanScorer$Bucket</td>
  <td>(instance count ) 1311699</td>
  <td>=A0(size) 41974368</td>
</tr>
</tbody></table>

<p>

</p><table>
<tbody><tr>
  <td>org.apache.lucene.search.ScoreDoc</td>
  <td>(instance count )45846</td>
  <td>=A0(size)1100304</td>
</tr>
</tbody></table>



<div><div><div><div><div><br></div><div>we have a system with an earlier ve=
rsion=A0 (tomcat 5.5 and Lucune 3.0.3 our all other code / jars are the sam=
e) which handles the same load and has the same indexes and the minor gc th=
ere occurs once every 1-2 second and the amount of memory being freed is ab=
out 60 MB.<br>


<br></div><div>does this behavior is normal ? <br>does a search should real=
ly generate so much short lived objects ( about 5MB for a search ) ?<br></d=
iv><div>should we try and use some other RAM bases Index ? ( i know Instant=
iatedIndex is deprecated )<br>


<br></div><div>thanks in advance .<span><font color=3D"#888888"><br><br>Alo=
n <br></font></span></div><div><br></div></div></div></div></div></div>
</div><br></div>
</div></div></blockquote></div><br></div>

--bcaec517ab26a63e3d04d2de8769--

--bcaec517ab26a63e4104d2de876b
Content-Type: text/plain; charset=us-ascii


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
--bcaec517ab26a63e4104d2de876b--

From java-user-return-54628-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jan  9 18:24:11 2013
Return-Path: <java-user-return-54628-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 42ECEE63E
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed,  9 Jan 2013 18:24:11 +0000 (UTC)
Received: (qmail 49911 invoked by uid 500); 9 Jan 2013 18:24:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49837 invoked by uid 500); 9 Jan 2013 18:24:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49825 invoked by uid 99); 9 Jan 2013 18:24:09 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jan 2013 18:24:09 +0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,SPF_NEUTRAL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: 216.139.236.26 is neither permitted nor denied by domain of saisantoshi76@gmail.com)
Received: from [216.139.236.26] (HELO sam.nabble.com) (216.139.236.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jan 2013 18:24:02 +0000
Received: from ben.nabble.com ([192.168.236.152])
	by sam.nabble.com with esmtp (Exim 4.72)
	(envelope-from <saisantoshi76@gmail.com>)
	id 1Tt0JR-0005ZL-Um
	for java-user@lucene.apache.org; Wed, 09 Jan 2013 10:23:41 -0800
Date: Wed, 9 Jan 2013 10:23:41 -0800 (PST)
From: saisantoshi <saisantoshi76@gmail.com>
To: java-user@lucene.apache.org
Message-ID: <1357755821943-4031942.post@n3.nabble.com>
In-Reply-To: <CADuAvzcYoNH-Vno6zbDJkx9c-XSkmYHDh1-miSd-krZ18UGgpQ@mail.gmail.com>
References: <1357673425803-4031660.post@n3.nabble.com> <CADuAvzcu+aFQZDcyDv=waF_AygGH9yVCk0Wh-GA0fu8D1uh-9g@mail.gmail.com> <3F8A3702-DC59-4FE4-935E-BA71B1ECD22D@gmail.com> <CADuAvzeDmokX1w5rrwbfGr-yuCrvPbMUP+2BcaoxHg7ZLivz2A@mail.gmail.com> <8C9A9E15-4E29-4152-BD4C-2916E72B1103@gmail.com> <CADuAvzcYoNH-Vno6zbDJkx9c-XSkmYHDh1-miSd-krZ18UGgpQ@mail.gmail.com>
Subject: Re: Is StandardAnalyzer good enough for multi languages...
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks for all the responses. From the above, it sounds that there are two
options.

1. Use ICUTokenizer ( is it in Lucene 4.0 or 4.1)? If its in 4.1, then we
cannot use at this time as it is not released out.

2. Write a custom analyzer by extending ( StandardAnalyzer) and add filters
for additional languages. 

The problem that we are facing currently is described in detail at: 

http://lucene.472066.n3.nabble.com/Lucene-support-for-multi-byte-characters-2-4-0-version-td4031654.html
<http://lucene.472066.n3.nabble.com/Lucene-support-for-multi-byte-characters-2-4-0-version-td4031654.html>  
Just to summarize it, we are facing some issues tokenizing some Japanese
keyword characters (while uploading some documents, we have some keywords
where people can type in any language) and as a result, searching using such
specific keywords words is not working with the StandardAnalyzer (2.4.0
version).

Can you suggest any filter for this to integrate in Standard Analyzer?

Thanks,
Sai.



--
View this message in context: http://lucene.472066.n3.nabble.com/Is-StandardAnalyzer-good-enough-for-multi-languages-tp4031660p4031942.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54629-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jan  9 18:25:49 2013
Return-Path: <java-user-return-54629-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 71013EEA3
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed,  9 Jan 2013 18:25:49 +0000 (UTC)
Received: (qmail 57418 invoked by uid 500); 9 Jan 2013 18:25:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57345 invoked by uid 500); 9 Jan 2013 18:25:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57336 invoked by uid 99); 9 Jan 2013 18:25:47 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jan 2013 18:25:47 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [64.78.17.18] (HELO EXHUB018-3.exch018.msoutlookonline.net) (64.78.17.18)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jan 2013 18:25:39 +0000
Received: from EXVMBX018-1.exch018.msoutlookonline.net ([64.78.17.47]) by
 EXHUB018-3.exch018.msoutlookonline.net ([64.78.17.18]) with mapi; Wed, 9 Jan
 2013 10:25:18 -0800
From: Paul Hill <paul@metajure.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Wed, 9 Jan 2013 10:27:03 -0800
Subject: RE: Is StandardAnalyzer good enough for multi languages...
Thread-Topic: Is StandardAnalyzer good enough for multi languages...
Thread-Index: Ac3uUY11ez4+nlqhQUqe/wZcpUU+TQAQw8HA
Message-ID: <C8508767C15DBF40A21693142739EA8D7BC7C7BF9F@EXVMBX018-1.exch018.msoutlookonline.net>
References: <1357673425803-4031660.post@n3.nabble.com>
	<CADuAvzcu+aFQZDcyDv=waF_AygGH9yVCk0Wh-GA0fu8D1uh-9g@mail.gmail.com>
	<3F8A3702-DC59-4FE4-935E-BA71B1ECD22D@gmail.com>
	<CADuAvzeDmokX1w5rrwbfGr-yuCrvPbMUP+2BcaoxHg7ZLivz2A@mail.gmail.com>
	<8C9A9E15-4E29-4152-BD4C-2916E72B1103@gmail.com>
 <CADuAvzcYoNH-Vno6zbDJkx9c-XSkmYHDh1-miSd-krZ18UGgpQ@mail.gmail.com>
In-Reply-To: <CADuAvzcYoNH-Vno6zbDJkx9c-XSkmYHDh1-miSd-krZ18UGgpQ@mail.gmail.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

VGhlcmUgaXMgb2Z0ZW4gdGhlIHBvc3NpYmlsaXR5IHRvIHB1dCBhbm90aGVyIHRva2VuaXplciBp
biB0aGUgY2hhaW4gdG8gY3JlYXRlIGEgdmFyaWFudCBhbmFseXplci4gIFRoaXMgTk9UIHZlcnkg
aGFyZCBhdCBhbGwgaW4gZWl0aGVyIEx1Y2VuZSBvciBFbGFzdGljU2VhcmNoLiANCkV4dHJhIHRv
a2VuaXplcnMgY2FuIG9mdGVuIGJlIHVzZWQgdG8gdHdlYWsgdGhlIG92ZXJhbGwgcHJvY2Vzc2lu
ZyB0byBhZGQgYSBsYXRlIHRva2VuaXphdGlvbiB0byBvdmVyY29tZSBhbiBvdmVybG9va2VkIHRv
a2VuaXphdGlvbiAoYnJlYWsgb24gY29sb24gd291bGQgYmUgYSBzaW1wbGUgZXhhbXBsZSkuICBB
ZGRpbmcgYSB0b2tlbml6ZXIgYmVmb3JlIG90aGVycyBjYW4gY2hhbmdlIGEgdG9rZW4gdGhhdCBz
ZWVtIGluY29ycmVjdGx5ICBwcm9jZXNzZWQgaW50byBvbmUgdGhhdCBpcyBkb25lIGhvdyB5b3Ug
bGlrZS4NCg0KVHJlamtheiwgSSBoYXZlbid0IHRyaWVkIHRvIHVzZSBJQ1UgeWV0LCBidXQgd2hh
dCBJIHVuZGVyc3RhbmQsIEkgdGhpbmsgeW91J2xsIGZpbmQgdGhhdCBJQ1UgaXMgbW9yZSBpbiBh
Z3JlZW1lbnQgd2l0aCB5b3VyIHZpZXdzIGFuZCBlbWJyYWNlcyB0aGUgaWRlYSBvZiByZWZpbmlu
ZyB0aGUgdG9rZW5pemF0aW9uIGV0Yy4gYXMgbmVlZGVkLCBub3QgcmVseWluZyBvbiB0aGUgY3Vy
aW9zIChhbmQgb2Z0ZW4gZmxhd2VkKSBjaG9pY2VzIG9mIHNvbWUgZGVzaWduIGNvbW1pdHRlZSBz
b21ld2hlcmUuICANCg0KIFtJQ1VdDQo+IC0tLS0tT3JpZ2luYWwgTWVzc2FnZS0tLS0tDQo+IC4u
LiBubyBzcGVjaWFsaXNhdGlvbiBmb3Igc3RyYWlnaHQgUm9tYW4gc2NyaXB0LCBidXQgSSBndWVz
cyBpdCBjb3VsZA0KPiBhbHdheXMgYmUgYWRkZWQuDQoNClRoYXQgd291bGQgYmUgb25lIG9mIHRo
ZSBtYWluIHBvaW50cyBvZiB0aGUgd2hvbGUgSUNVIGluZnJhc3RydWN0dXJlLg0KDQotUGF1bCAN
Cg0KDQo=
DQotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0NClRvIHVuc3Vic2NyaWJlLCBlLW1haWw6IGphdmEtdXNlci11
bnN1YnNjcmliZUBsdWNlbmUuYXBhY2hlLm9yZw0KRm9yIGFkZGl0aW9uYWwgY29tbWFuZHMs
IGUtbWFpbDogamF2YS11c2VyLWhlbHBAbHVjZW5lLmFwYWNoZS5vcmcNCg0K

From java-user-return-54630-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jan  9 19:00:37 2013
Return-Path: <java-user-return-54630-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id EE040E347
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed,  9 Jan 2013 19:00:36 +0000 (UTC)
Received: (qmail 84615 invoked by uid 500); 9 Jan 2013 19:00:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84553 invoked by uid 500); 9 Jan 2013 19:00:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84539 invoked by uid 99); 9 Jan 2013 19:00:34 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jan 2013 19:00:34 +0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.220.50] (HELO mail-pa0-f50.google.com) (209.85.220.50)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jan 2013 19:00:29 +0000
Received: by mail-pa0-f50.google.com with SMTP id hz10so1209598pad.37
        for <java-user@lucene.apache.org>; Wed, 09 Jan 2013 11:00:07 -0800 (PST)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=x-received:message-id:date:from:user-agent:mime-version:to:subject
         :references:in-reply-to:content-type:x-gm-message-state;
        bh=w0rXDMTYVjEzKG4Af5+e/nIvnk7GquJ5EbNu6YUm0lQ=;
        b=Zb781Lx0Fpr+v7t4dOfeuPYQwPAs6VILv2Up/Y7v+ej9Ya1+FiFFKKLslH13CGx0ZH
         78uaQnf+L2oo6nsvfmjh6/Mb2ZVFFjk8ew9OnnIr2Wj7QCsmscYXnMUGY35+Nu1z26hT
         u6HEVTq7sCJwzkw7nNC5xo40BRkTF5TVJigjwuTeKsTaLDtb0WwvzKPaiFudU2YEQVVz
         cNZzgF0j8sGDS0n3eHuLCZZ1J/kLaRtPJzG1wSUX4M1lH2/ZG0Dj+na6zFVNiyncRpO4
         J7gcXf19jslBUGECokvH7RdoyEmYYoTK8ziGBVcXH0Q4iiX/MybvBZC2E+NdYTiroNq2
         LBxQ==
X-Received: by 10.66.74.98 with SMTP id s2mr191250993pav.64.1357758007538;
        Wed, 09 Jan 2013 11:00:07 -0800 (PST)
Received: from [192.168.0.11] (cpe-98-145-203-109.socal.res.rr.com. [98.145.203.109])
        by mx.google.com with ESMTPS id wr4sm42058915pbc.72.2013.01.09.11.00.05
        (version=SSLv3 cipher=OTHER);
        Wed, 09 Jan 2013 11:00:06 -0800 (PST)
Message-ID: <50EDBE29.3040704@getrailo.org>
Date: Wed, 09 Jan 2013 10:59:53 -0800
From: "Igal @ getRailo.org" <igal@getrailo.org>
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:17.0) Gecko/17.0 Thunderbird/17.0
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Cannot instantiate SPI class
References: <50ECE9A8.9030502@getrailo.org> <009e01cdee3e$373055b0$a5910110$@thetaphi.de> <50ED25E8.9030503@getrailo.org> <00a801cdee43$3880b130$a9821390$@thetaphi.de> <CAF1=UQyQcV4BhV01echJbEdYvUhuO4gmgdvEDKxjaZ4jttQHfQ@mail.gmail.com> <alpine.DEB.2.00.1301091003460.20839@urchin.earth.li> <CAF1=UQyug7Gxy+wqMSxcoORiTrJeNsMUnzPPqHSVjZ--sNX7cw@mail.gmail.com>
In-Reply-To: <CAF1=UQyug7Gxy+wqMSxcoORiTrJeNsMUnzPPqHSVjZ--sNX7cw@mail.gmail.com>
Content-Type: multipart/alternative;
 boundary="------------020600040707060906000307"
X-Gm-Message-State: ALoCoQkDhTkveBdUtwCLLzqtW/KNSyM51Qo7mWmWO70s2nRYjtcE8HbrJMofho0d8HJrBeZXKJNJ
X-Virus-Checked: Checked by ClamAV on apache.org

--------------020600040707060906000307
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

hi everybody,

I figured it out.  the problem was that I was using a "custom" jar to 
deploy this along with other libs that I use in my application. so at 
the end of my build.xml I create a jar file with all the required libs.

the problem was that I was adding lucene-core.jar with a filter of 
includes="**/*.class" and I guess there are some required files there 
that I was missing. removing that filter fixed the problem

     <zipfileset src="${file.reference.lucene-core.jar}"/>

thanks everyone,


Igal


On 1/9/2013 2:12 AM, Igal Sapir wrote:
>
> Thanks, I'll do that.
>
> p.s. -- that was http://getrailo.org -- 'auto-correct' messed it up ;-)
>
> --
> typos, misspels, and other weird words brought to you courtesy of my 
> mobile device.
>
> On Jan 9, 2013 2:08 AM, "Nick Burch" <apache@gagravarr.org 
> <mailto:apache@gagravarr.org>> wrote:
>
>     On Wed, 9 Jan 2013, Igal Sapir wrote:
>
>         The syntax is CFML / CFScript (ColdFusion Script).  Railo is
>         an open
>         source, high performance, ColdFusion server. http://getrailo.arg/
>
>         I will re-download the Lucene jars and try again.  I'll let
>         you know what I find.
>
>
>     It may be worth double-checking that you don't have any older
>     lucene jars kicking around your classpath confusing things. I've
>     not used CF in a while, but when I last did we'd often get caught
>     out by an old version of a jar we were introducing already being
>     shipped with CF. You can fairly easily (via the classloader +
>     getresource) work out which jar a given class file is coming from,
>     you should use that to verify it's the jar you were expecting!
>
>     Nick
>
>     ---------------------------------------------------------------------
>     To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>     <mailto:java-user-unsubscribe@lucene.apache.org>
>     For additional commands, e-mail: java-user-help@lucene.apache.org
>     <mailto:java-user-help@lucene.apache.org>
>


--------------020600040707060906000307--

From java-user-return-54631-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jan  9 19:05:27 2013
Return-Path: <java-user-return-54631-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 0A961E385
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed,  9 Jan 2013 19:05:27 +0000 (UTC)
Received: (qmail 5346 invoked by uid 500); 9 Jan 2013 19:05:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5184 invoked by uid 500); 9 Jan 2013 19:05:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5174 invoked by uid 99); 9 Jan 2013 19:05:25 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jan 2013 19:05:25 +0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,SPF_NEUTRAL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: 216.139.236.26 is neither permitted nor denied by domain of saisantoshi76@gmail.com)
Received: from [216.139.236.26] (HELO sam.nabble.com) (216.139.236.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jan 2013 19:05:19 +0000
Received: from ben.nabble.com ([192.168.236.152])
	by sam.nabble.com with esmtp (Exim 4.72)
	(envelope-from <saisantoshi76@gmail.com>)
	id 1Tt0xP-00084G-01
	for java-user@lucene.apache.org; Wed, 09 Jan 2013 11:04:59 -0800
Date: Wed, 9 Jan 2013 11:04:58 -0800 (PST)
From: saisantoshi <saisantoshi76@gmail.com>
To: java-user@lucene.apache.org
Message-ID: <1357758298989-4031956.post@n3.nabble.com>
Subject: Upgrade Lucene to latest version (4.0) from 2.4.0
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

We have an existing application which uses Lucene 2.4.0 version. We are
thinking of upgrading it to alatest version (4.0). I am not sure the process
involved in upgrading to latest version. Is it just copying of the jars? If
yes, what are all the jars that we need to copy over. Will it be backward
compatible? Any additional measures we need to take care of?

With version 2.4.0, we have the following jars:
lucene-core-2.4.0.jar
lucene-analyzers-2.4.0.jar

With 4.0:
lucene-analyzers-common-4.0.0.jar
lucene-analyzers-icu-4.0.0.jar
lucene-core-4.0.0.jar

Any advise on this is much appreciated?

Thanks,
Sai.




--
View this message in context: http://lucene.472066.n3.nabble.com/Upgrade-Lucene-to-latest-version-4-0-from-2-4-0-tp4031956.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54632-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jan  9 19:09:35 2013
Return-Path: <java-user-return-54632-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 2FE3CE3A0
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed,  9 Jan 2013 19:09:35 +0000 (UTC)
Received: (qmail 19117 invoked by uid 500); 9 Jan 2013 19:09:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19068 invoked by uid 500); 9 Jan 2013 19:09:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19056 invoked by uid 99); 9 Jan 2013 19:09:33 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jan 2013 19:09:33 +0000
X-ASF-Spam-Status: No, hits=1.3 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.220.51] (HELO mail-pa0-f51.google.com) (209.85.220.51)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jan 2013 19:09:25 +0000
Received: by mail-pa0-f51.google.com with SMTP id fb11so1216723pad.24
        for <java-user@lucene.apache.org>; Wed, 09 Jan 2013 11:09:04 -0800 (PST)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=x-received:message-id:date:from:user-agent:mime-version:to:subject
         :references:in-reply-to:content-type:content-transfer-encoding
         :x-gm-message-state;
        bh=AMjkFp36MjzzUGvX9HE8D7wZIog471h9213dm5IdgHs=;
        b=JBoa/Fh/47RHFJAl/vtHPVlQTaenPPcQyJae19Zls4YbYZOLmnlYq/p1mgXatQlVgM
         GMigsBWZyrA1ztDBCxui0OOB9crH5dd0GxLsIrunuVU2r8RvduTzRX6/cUoMGuxMJG1c
         4y5WEVx/gu6BljvDIev+TiMN8k8YCs95sQZt3eScxmFC8FpNtJPHeHGRLanV78yEGFle
         jDavou/wwIsNK2IANnYgaOLD01OCegZ8b7g65srfa83k78/snfaS5kbaRm4H3cqSq4g0
         DEPREicSTLdzNfrmvdNL9dsudhxNyBokJnTgxifWgq2eTILgAs9biUI59R0Xe2CnoKNs
         dOkQ==
X-Received: by 10.68.233.201 with SMTP id ty9mr216162146pbc.14.1357758544121;
        Wed, 09 Jan 2013 11:09:04 -0800 (PST)
Received: from [192.168.0.11] (cpe-98-145-203-109.socal.res.rr.com. [98.145.203.109])
        by mx.google.com with ESMTPS id vo6sm2328431pbc.8.2013.01.09.11.09.02
        (version=SSLv3 cipher=OTHER);
        Wed, 09 Jan 2013 11:09:03 -0800 (PST)
Message-ID: <50EDC042.50306@getrailo.org>
Date: Wed, 09 Jan 2013 11:08:50 -0800
From: "Igal @ getRailo.org" <igal@getrailo.org>
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:17.0) Gecko/17.0 Thunderbird/17.0
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Upgrade Lucene to latest version (4.0) from 2.4.0
References: <1357758298989-4031956.post@n3.nabble.com>
In-Reply-To: <1357758298989-4031956.post@n3.nabble.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Gm-Message-State: ALoCoQmzhUoIFDnSQSOMkgw+TK8q2m38o3qi4HAyIbczS/YPqIw80JDtoObswCCabWIuCLcA7Dr5
X-Virus-Checked: Checked by ClamAV on apache.org

the API has changed much over time so I suspect that it will take more 
than replacing the jars.


On 1/9/2013 11:04 AM, saisantoshi wrote:
> We have an existing application which uses Lucene 2.4.0 version. We are
> thinking of upgrading it to alatest version (4.0). I am not sure the process
> involved in upgrading to latest version. Is it just copying of the jars? If
> yes, what are all the jars that we need to copy over. Will it be backward
> compatible? Any additional measures we need to take care of?
>
> With version 2.4.0, we have the following jars:
> lucene-core-2.4.0.jar
> lucene-analyzers-2.4.0.jar
>
> With 4.0:
> lucene-analyzers-common-4.0.0.jar
> lucene-analyzers-icu-4.0.0.jar
> lucene-core-4.0.0.jar
>
> Any advise on this is much appreciated?
>
> Thanks,
> Sai.
>
>
>
>
> --
> View this message in context: http://lucene.472066.n3.nabble.com/Upgrade-Lucene-to-latest-version-4-0-from-2-4-0-tp4031956.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54633-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jan  9 19:18:49 2013
Return-Path: <java-user-return-54633-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 05DABE3E2
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed,  9 Jan 2013 19:18:49 +0000 (UTC)
Received: (qmail 62101 invoked by uid 500); 9 Jan 2013 19:18:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61912 invoked by uid 500); 9 Jan 2013 19:18:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61904 invoked by uid 99); 9 Jan 2013 19:18:46 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jan 2013 19:18:46 +0000
X-ASF-Spam-Status: No, hits=3.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of binlan@perimeterusa.com designates 165.212.64.25 as permitted sender)
Received: from [165.212.64.25] (HELO gwo3.mbox.net) (165.212.64.25)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jan 2013 19:18:37 +0000
Received: from gwo3.mbox.net (localhost [127.0.0.1])
	by gwo3.mbox.net (Postfix) with ESMTP id 3YhKqr40yKzfjfS5
	for <java-user@lucene.apache.org>; Wed,  9 Jan 2013 19:18:16 +0000 (UTC)
X-USANET-Received: from gwsecf01.mbox.net [165.212.64.39] by gwo3.mbox.net via mtad (C8.MAIN.3.82G) 
	with ESMTP id 501RaiTso2768Mo3; Wed, 09 Jan 2013 19:18:14 -0000
Received: from localhost (gwsecf01 [127.0.0.1])
	by gwsecf01.mbox.net (Postfix) with ESMTP id E2D2D4C8071
	for <java-user@lucene.apache.org>; Wed,  9 Jan 2013 19:18:14 +0000 (GMT)
Received: by gwsecf01.mbox.net (Postfix, from userid 1272)
	id 594714C8183; Wed,  9 Jan 2013 19:18:14 +0000 (GMT)
Received: from gwo2.mbox.net (gateout02.mbox.net [165.212.64.22])
	by gwsecf01.mbox.net (Postfix) with ESMTP id 24EE54C811B
	for <java-user@lucene.apache.org>; Wed,  9 Jan 2013 19:18:14 +0000 (GMT)
X-USANET-Received: from gwo2.mbox.net [127.0.0.1] by gwo2.mbox.net via mtad (C8.MAIN.3.82G) 
	with ESMTP id 459RaiTsi4608Mo2; Wed, 09 Jan 2013 19:18:08 -0000
X-USANET-Routed: 6 gwsout-disclaimer Q:watd
X-USANET-Routed: 10 gwsout-externalarchive C:gwsarchive:625 jtx2rqdsj@incoming02.seccas.com
X-USANET-Routed: 5 gwsout-gwsd Q:gwsd
X-USANET-Routed: 21 gwsout-mailsafe R:gwsecf:25
X-USANET-Routed: 3 gwsout-vs Q:bmvirus
X-USANET-GWS2-Tenant: perimeterusa.com
X-USANET-GWS2-Tagid: CYB1
Received: from S1P5HUB1.EXCHPROD.USA.NET [165.212.120.254] by gwo2.mbox.net via smtad (C8.MAIN.3.88D) 
	with ESMTPS id XID392RaiTsi7242Xo2; Wed, 09 Jan 2013 19:18:08 -0000
X-USANET-Source: 165.212.120.254 OUT  binlan@perimeterusa.com S1P5HUB1.EXCHPROD.USA.NET
X-USANET-MsgId: XID392RaiTsi7242Xo2
Received: from mail-we0-f170.google.com (74.125.82.170) by
 exchange.postoffice.net (10.120.223.31) with Microsoft SMTP Server (TLS) id
 14.2.318.4; Wed, 9 Jan 2013 19:17:47 +0000
Received: by mail-we0-f170.google.com with SMTP id r1so1262436wey.29
        for <java-user@lucene.apache.org>; Wed, 09 Jan 2013 11:17:46 -0800
 (PST)
Received: by 10.180.24.133 with SMTP id u5mr5114529wif.17.1357759066186; Wed,
 09 Jan 2013 11:17:46 -0800 (PST)
MIME-Version: 1.0
Received: by 10.194.57.169 with HTTP; Wed, 9 Jan 2013 11:17:16 -0800 (PST)
In-Reply-To: <1357758298989-4031956.post@n3.nabble.com>
References: <1357758298989-4031956.post@n3.nabble.com>
From: Bin Lan <blan@perimeterusa.com>
Date: Wed, 9 Jan 2013 14:17:16 -0500
Message-ID: <CAGbvQbv1_TERr4m5JY_8qoxMHQQbx=83ZTUGx8VB2T+b=3X3zg@mail.gmail.com>
Subject: Re: Upgrade Lucene to latest version (4.0) from 2.4.0
To: <java-user@lucene.apache.org>
Content-Type: multipart/alternative; boundary="f46d0444e8a1d4a53104d2dfea2a"
X-Originating-IP: [74.125.82.170]
X-Virus-Checked: Checked by ClamAV on apache.org

--f46d0444e8a1d4a53104d2dfea2a
Content-Type: text/plain; charset="UTF-8"

We recently went through the same process. We upgraded our indexing service
from 1.9.1 to 3.6.1. Unfortunately, the process is not as easy as you
thought. Besides replacing the jar files. You also need to change your code
to adopt to the new API. There are many changes, the most import parts are
in IndexWriter, IndexReader, and IndexSearcher classes.


Regards
--
Bin Lan
Software Developer
Perimeter E-Security
O - (203)541-3412

Follow Us on Twitter: www.twitter.com/PerimeterNews
Read Our Blog: security.perimeterusa.com/blog





On Wed, Jan 9, 2013 at 2:04 PM, saisantoshi <saisantoshi76@gmail.com> wrote:

> We have an existing application which uses Lucene 2.4.0 version. We are
> thinking of upgrading it to alatest version (4.0). I am not sure the
> process
> involved in upgrading to latest version. Is it just copying of the jars? If
> yes, what are all the jars that we need to copy over. Will it be backward
> compatible? Any additional measures we need to take care of?
>
> With version 2.4.0, we have the following jars:
> lucene-core-2.4.0.jar
> lucene-analyzers-2.4.0.jar
>
> With 4.0:
> lucene-analyzers-common-4.0.0.jar
> lucene-analyzers-icu-4.0.0.jar
> lucene-core-4.0.0.jar
>
> Any advise on this is much appreciated?
>
> Thanks,
> Sai.
>
>
>
>
> --
> View this message in context:
> http://lucene.472066.n3.nabble.com/Upgrade-Lucene-to-latest-version-4-0-from-2-4-0-tp4031956.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>




This message is for the sole use of the intended recipient(s) and may contain confidential and/or privileged information of Perimeter Internetworking Corp.  Any unauthorized review, use, copying, disclosure, or distribution is prohibited.  If you are not the intended recipient, please immediately contact the sender by reply email and delete all copies of the original message.



--
 The sender of this email subscribes to Perimeter E-Security's email
 anti-virus service. This email has been scanned for malicious code and is
 believed to be virus free. For more information on email security please
 visit: http://www.perimeterusa.com/services/messaging
 This communication is confidential, intended only for the named recipient(s)
 above and may contain trade secrets or other information that is exempt from
 disclosure under applicable law. Any use, dissemination, distribution or
 copying of this communication by anyone other than the named recipient(s) is
 strictly prohibited. If you have received this communication in error, please
 delete the email and immediately notify our Command Center at 203-541-3444.

--f46d0444e8a1d4a53104d2dfea2a--

From java-user-return-54634-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jan  9 19:21:31 2013
Return-Path: <java-user-return-54634-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id C8A46E3FC
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed,  9 Jan 2013 19:21:31 +0000 (UTC)
Received: (qmail 78070 invoked by uid 500); 9 Jan 2013 19:21:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77937 invoked by uid 500); 9 Jan 2013 19:21:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77929 invoked by uid 99); 9 Jan 2013 19:21:29 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jan 2013 19:21:29 +0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,SPF_NEUTRAL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: 216.139.236.26 is neither permitted nor denied by domain of saisantoshi76@gmail.com)
Received: from [216.139.236.26] (HELO sam.nabble.com) (216.139.236.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jan 2013 19:21:23 +0000
Received: from ben.nabble.com ([192.168.236.152])
	by sam.nabble.com with esmtp (Exim 4.72)
	(envelope-from <saisantoshi76@gmail.com>)
	id 1Tt1Cw-0001Ex-PU
	for java-user@lucene.apache.org; Wed, 09 Jan 2013 11:21:02 -0800
Date: Wed, 9 Jan 2013 11:21:02 -0800 (PST)
From: saisantoshi <saisantoshi76@gmail.com>
To: java-user@lucene.apache.org
Message-ID: <1357759262767-4031974.post@n3.nabble.com>
In-Reply-To: <50EDC042.50306@getrailo.org>
References: <1357758298989-4031956.post@n3.nabble.com> <50EDC042.50306@getrailo.org>
Subject: Re: Upgrade Lucene to latest version (4.0) from 2.4.0
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks. Could you please elaborate on what is needed other than replacing the
jars? Are the jars listed is the only jars or any additional jars required?

Is the API not backward compatible? I mean to say whatever the API calls we
are using in 2.4.0 is not supported by 4.0? Has the signature modified in
4.x version?

Thanks,
Sai.





--
View this message in context: http://lucene.472066.n3.nabble.com/Upgrade-Lucene-to-latest-version-4-0-from-2-4-0-tp4031956p4031974.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54635-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jan  9 19:42:31 2013
Return-Path: <java-user-return-54635-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id E343FE13D
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed,  9 Jan 2013 19:42:30 +0000 (UTC)
Received: (qmail 70371 invoked by uid 500); 9 Jan 2013 19:42:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70327 invoked by uid 500); 9 Jan 2013 19:42:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70319 invoked by uid 99); 9 Jan 2013 19:42:28 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jan 2013 19:42:28 +0000
X-ASF-Spam-Status: No, hits=3.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_NEUTRAL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.220.179] (HELO mail-vc0-f179.google.com) (209.85.220.179)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jan 2013 19:42:20 +0000
Received: by mail-vc0-f179.google.com with SMTP id p1so1908690vcq.24
        for <java-user@lucene.apache.org>; Wed, 09 Jan 2013 11:41:59 -0800 (PST)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=mime-version:x-originating-ip:in-reply-to:references:date
         :message-id:subject:from:to:content-type:x-gm-message-state;
        bh=c+Or0ReV7VeC1YovYhqqJYREUI0BdrtJB6EqXXRQQ38=;
        b=Iqfkb5b4F918eK1/oE+0/iNnotJzDvOhTAU8+4XtuQjltC/BpeWPsPK1W3z8CTyg5j
         KHJgQSZJzbDh0F0+bhDfI1oXMtv+yspd5OEXQwaFv8SzH2Njl+dkpRj8u4nRJdnjrLB0
         qtLO+AA++dxvX9yhsGwBIE3p2W9ImoEByNZpCEszHu5zAS1DnARReq7NSHyiXUYgsE2j
         rLXEhd9IFs/HrhZNxpFqBFisEMz0yX2NX4PORFTQBwIgpShZja8f39wu/1H9Ty9/DEmE
         /6RSXPpAdSjJSsAI4RgJ9hgyO5oGQK9oL6kTfoqXWCXvpGS71bDn+8CL5IGMnZpX8vbZ
         CYuA==
MIME-Version: 1.0
Received: by 10.220.115.133 with SMTP id i5mr88260653vcq.42.1357760519446;
 Wed, 09 Jan 2013 11:41:59 -0800 (PST)
Received: by 10.58.59.69 with HTTP; Wed, 9 Jan 2013 11:41:59 -0800 (PST)
X-Originating-IP: [98.145.203.109]
Received: by 10.58.59.69 with HTTP; Wed, 9 Jan 2013 11:41:59 -0800 (PST)
In-Reply-To: <1357759262767-4031974.post@n3.nabble.com>
References: <1357758298989-4031956.post@n3.nabble.com>
	<50EDC042.50306@getrailo.org>
	<1357759262767-4031974.post@n3.nabble.com>
Date: Wed, 9 Jan 2013 11:41:59 -0800
Message-ID: <CAF1=UQwHR4E4eaEdFqNwJK_7VmGzz8FBNAm_tTD84T=HzHzN8g@mail.gmail.com>
Subject: Re: Upgrade Lucene to latest version (4.0) from 2.4.0
From: Igal Sapir <igal@getrailo.org>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=f46d0434c06873a15204d2e04163
X-Gm-Message-State: ALoCoQnb5a+jzWlqEQBDx3OFdXrtXualfDluRQjob6wQX1d0MAE3l+qUSZCE90/Xv2+vwbS5JH72
X-Virus-Checked: Checked by ClamAV on apache.org

--f46d0434c06873a15204d2e04163
Content-Type: text/plain; charset=ISO-8859-1

I can not elaborate much myself add there are many changes and I'm not an
expert on License.

I can tell you though that many signatures have changed as well as package
names.

There were many API changes even between 3.6 and 4.0

--
typos, misspels, and other weird words brought to you courtesy of my mobile
device.
On Jan 9, 2013 11:21 AM, "saisantoshi" <saisantoshi76@gmail.com> wrote:

> Thanks. Could you please elaborate on what is needed other than replacing
> the
> jars? Are the jars listed is the only jars or any additional jars required?
>
> Is the API not backward compatible? I mean to say whatever the API calls we
> are using in 2.4.0 is not supported by 4.0? Has the signature modified in
> 4.x version?
>
> Thanks,
> Sai.
>
>
>
>
>
> --
> View this message in context:
> http://lucene.472066.n3.nabble.com/Upgrade-Lucene-to-latest-version-4-0-from-2-4-0-tp4031956p4031974.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--f46d0434c06873a15204d2e04163--

From java-user-return-54636-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jan  9 20:03:49 2013
Return-Path: <java-user-return-54636-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 56E4BE201
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed,  9 Jan 2013 20:03:49 +0000 (UTC)
Received: (qmail 55699 invoked by uid 500); 9 Jan 2013 20:03:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55637 invoked by uid 500); 9 Jan 2013 20:03:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55627 invoked by uid 99); 9 Jan 2013 20:03:47 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jan 2013 20:03:47 +0000
X-ASF-Spam-Status: No, hits=1.3 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_PASS,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [64.78.17.17] (HELO EXHUB018-2.exch018.msoutlookonline.net) (64.78.17.17)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jan 2013 20:03:40 +0000
Received: from EXVMBX018-1.exch018.msoutlookonline.net ([64.78.17.47]) by
 EXHUB018-2.exch018.msoutlookonline.net ([64.78.17.17]) with mapi; Wed, 9 Jan
 2013 12:03:20 -0800
From: Paul Hill <paul@metajure.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Wed, 9 Jan 2013 12:05:03 -0800
Subject: RE: Upgrade Lucene to latest version (4.0) from 2.4.0
Thread-Topic: Upgrade Lucene to latest version (4.0) from 2.4.0
Thread-Index: Ac3uoXbrbPpL/stISS++MT7+dEevbwAAqw6Q
Message-ID: <C8508767C15DBF40A21693142739EA8D7BC7C7C020@EXVMBX018-1.exch018.msoutlookonline.net>
References: <1357758298989-4031956.post@n3.nabble.com>
	<50EDC042.50306@getrailo.org>	<1357759262767-4031974.post@n3.nabble.com>
 <CAF1=UQwHR4E4eaEdFqNwJK_7VmGzz8FBNAm_tTD84T=HzHzN8g@mail.gmail.com>
In-Reply-To: <CAF1=UQwHR4E4eaEdFqNwJK_7VmGzz8FBNAm_tTD84T=HzHzN8g@mail.gmail.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

My guess is that upgrading to 3.6 to cover the _mostly_ upward compatible c=
hanges to that point (Fieldable vs. Field) might make a worthwhile intermed=
iate step.

Then test that to make sure it is working using whatever have to test. Then=
 work out the "real" changes to 4.0.
That is only a thought, because I haven't upgraded to 4.0 yet.

-Paul

> -----Original Message-----
> From: Igal Sapir [mailto:igal@getrailo.org]
> Sent: Wednesday, January 09, 2013 11:42 AM
> To: java-user@lucene.apache.org
> Subject: Re: Upgrade Lucene to latest version (4.0) from 2.4.0
>=20
> I can not elaborate much myself add there are many changes and I'm not an=
 expert on License.
>=20
> I can tell you though that many signatures have changed as well as packag=
e names.
>=20
> There were many API changes even between 3.6 and 4.0
>=20
> --
> typos, misspels, and other weird words brought to you courtesy of my mobi=
le device.
> On Jan 9, 2013 11:21 AM, "saisantoshi" <saisantoshi76@gmail.com> wrote:
>=20
> > Thanks. Could you please elaborate on what is needed other than
> > replacing the jars? Are the jars listed is the only jars or any
> > additional jars required?
> >
> > Is the API not backward compatible? I mean to say whatever the API
> > calls we are using in 2.4.0 is not supported by 4.0? Has the signature
> > modified in 4.x version?
> >
> > Thanks,
> > Sai.
> >
> >
> >
> >
> >
> > --
> > View this message in context:
> > http://lucene.472066.n3.nabble.com/Upgrade-Lucene-to-latest-version-4-
> > 0-from-2-4-0-tp4031956p4031974.html
> > Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54637-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jan  9 20:24:23 2013
Return-Path: <java-user-return-54637-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 59167E44B
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed,  9 Jan 2013 20:24:23 +0000 (UTC)
Received: (qmail 38863 invoked by uid 500); 9 Jan 2013 20:24:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38783 invoked by uid 500); 9 Jan 2013 20:24:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38757 invoked by uid 99); 9 Jan 2013 20:24:20 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jan 2013 20:24:20 +0000
X-ASF-Spam-Status: No, hits=0.6 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of sarowe@gmail.com designates 209.85.216.46 as permitted sender)
Received: from [209.85.216.46] (HELO mail-qa0-f46.google.com) (209.85.216.46)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jan 2013 20:24:14 +0000
Received: by mail-qa0-f46.google.com with SMTP id r4so1013962qaq.12
        for <java-user@lucene.apache.org>; Wed, 09 Jan 2013 12:23:53 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=x-received:content-type:mime-version:subject:from:in-reply-to:date
         :content-transfer-encoding:message-id:references:to:x-mailer;
        bh=MGCiIg/j02zL88NZoAGA3oAE+QKq2VbHXVOYTzZujdE=;
        b=NQ0dBXAhWbq24mvzTYQIebilJAu3JKxdOk9IUKk3zitN4l1k1n5N7VCQZVj4AtL/rM
         cyfQdFBSquVyScuhk2bONglTIHWjBNRnMe66a8wndamxHuBu930lGgBjaSt9sHeX7Wnv
         QfOJhVkFK0+NJMwsY04oOsmhNe3hY/PGr7+A6XQFLCdiSMlNu3Sf3W+/mN/A5awXiJPG
         CetMRGrVaUsTx8Y2pMAhWMVR+m0cc+1MTCQLSQLWlwsaFLoGQ945xSyoVuThWi1lH8UV
         5GSOnpQnL3o2MkBCbmBZn4Oya+zrFxWYFeP12Xx2eXB9n/pFk4IRXLm3VcJX2RYklLeM
         ps/Q==
X-Received: by 10.224.107.5 with SMTP id z5mr53097986qao.48.1357763033546;
        Wed, 09 Jan 2013 12:23:53 -0800 (PST)
Received: from [192.168.1.204] (cpe-67-249-104-72.twcny.res.rr.com. [67.249.104.72])
        by mx.google.com with ESMTPS id r13sm20093740qeu.11.2013.01.09.12.23.51
        (version=SSLv3 cipher=OTHER);
        Wed, 09 Jan 2013 12:23:52 -0800 (PST)
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Mac OS X Mail 6.2 \(1499\))
Subject: Re: Upgrade Lucene to latest version (4.0) from 2.4.0
From: Steve Rowe <sarowe@gmail.com>
In-Reply-To: <1357759262767-4031974.post@n3.nabble.com>
Date: Wed, 9 Jan 2013 15:23:50 -0500
Content-Transfer-Encoding: quoted-printable
Message-Id: <6AEE0C09-46B5-4527-9805-D30F50D1A291@gmail.com>
References: <1357758298989-4031956.post@n3.nabble.com> <50EDC042.50306@getrailo.org> <1357759262767-4031974.post@n3.nabble.com>
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.1499)
X-Virus-Checked: Checked by ClamAV on apache.org

Sai,

For the transition from 2.X to 3.X, I recommend compiling your code =
against the latest 2.9.X version (2.9.4), looking at the deprecation =
messages, and making changes until these are all addressed and =
compilation no longer produces deprecation messages.  Once that's done, =
your code should compile against 3.0.X.

Unlike the 2.X->3.X transition, there was no "bridge" version that =
simplifies the upgrade path from 3.X->4.0.  However, MIGRATE.txt =
contains a detailed list of upgrade notes from 3.X to 4.0.  See below =
for an HTML version of this file, called the "Migration Guide".

Check out the 4.0 "Changes" and "Migration Guide" (under "Reference =
Documents"):=20

    <http://lucene.apache.org/core/4_0_0/index.html>=20

(note that the 4.0 Changes page contains release notes for *all* =
previous versions.)

Steve

On Jan 9, 2013, at 2:21 PM, saisantoshi <saisantoshi76@gmail.com> wrote:

> Thanks. Could you please elaborate on what is needed other than =
replacing the
> jars? Are the jars listed is the only jars or any additional jars =
required?
>=20
> Is the API not backward compatible? I mean to say whatever the API =
calls we
> are using in 2.4.0 is not supported by 4.0? Has the signature modified =
in
> 4.x version?
>=20
> Thanks,
> Sai.
>=20
>=20
>=20
>=20
>=20
> --
> View this message in context: =
http://lucene.472066.n3.nabble.com/Upgrade-Lucene-to-latest-version-4-0-fr=
om-2-4-0-tp4031956p4031974.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54638-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jan  9 21:09:20 2013
Return-Path: <java-user-return-54638-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 5D41FE19F
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed,  9 Jan 2013 21:09:20 +0000 (UTC)
Received: (qmail 7334 invoked by uid 500); 9 Jan 2013 21:09:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7291 invoked by uid 500); 9 Jan 2013 21:09:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7279 invoked by uid 99); 9 Jan 2013 21:09:18 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jan 2013 21:09:18 +0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,SPF_NEUTRAL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: 216.139.236.26 is neither permitted nor denied by domain of saisantoshi76@gmail.com)
Received: from [216.139.236.26] (HELO sam.nabble.com) (216.139.236.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jan 2013 21:09:11 +0000
Received: from ben.nabble.com ([192.168.236.152])
	by sam.nabble.com with esmtp (Exim 4.72)
	(envelope-from <saisantoshi76@gmail.com>)
	id 1Tt2tH-0007i7-9s
	for java-user@lucene.apache.org; Wed, 09 Jan 2013 13:08:51 -0800
Date: Wed, 9 Jan 2013 13:08:51 -0800 (PST)
From: saisantoshi <saisantoshi76@gmail.com>
To: java-user@lucene.apache.org
Message-ID: <1357765731298-4032029.post@n3.nabble.com>
In-Reply-To: <6AEE0C09-46B5-4527-9805-D30F50D1A291@gmail.com>
References: <1357758298989-4031956.post@n3.nabble.com> <50EDC042.50306@getrailo.org> <1357759262767-4031974.post@n3.nabble.com> <6AEE0C09-46B5-4527-9805-D30F50D1A291@gmail.com>
Subject: Re: Upgrade Lucene to latest version (4.0) from 2.4.0
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Is there any migration guide from 2.x to 3.x? ( as per the suggestion, i
would like to upgrade first from 2.4.0 to 2.9.0 and from 2.9.0 to 3.6) and
later we decide if we want to upgrade from 3.6 to 4.x version?



--
View this message in context: http://lucene.472066.n3.nabble.com/Upgrade-Lucene-to-latest-version-4-0-from-2-4-0-tp4031956p4032029.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54639-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jan  9 21:34:15 2013
Return-Path: <java-user-return-54639-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id CCDC7EEA7
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed,  9 Jan 2013 21:34:15 +0000 (UTC)
Received: (qmail 82711 invoked by uid 500); 9 Jan 2013 21:34:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82644 invoked by uid 500); 9 Jan 2013 21:34:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82635 invoked by uid 99); 9 Jan 2013 21:34:13 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jan 2013 21:34:13 +0000
X-ASF-Spam-Status: No, hits=0.6 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of sarowe@gmail.com designates 209.85.216.47 as permitted sender)
Received: from [209.85.216.47] (HELO mail-qa0-f47.google.com) (209.85.216.47)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jan 2013 21:34:07 +0000
Received: by mail-qa0-f47.google.com with SMTP id a19so1066154qad.6
        for <java-user@lucene.apache.org>; Wed, 09 Jan 2013 13:33:46 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=x-received:content-type:mime-version:subject:from:in-reply-to:date
         :content-transfer-encoding:message-id:references:to:x-mailer;
        bh=hDTjC+P9s+SFMuaRE0wpkszdJPBfVp63rIkD5hFChAM=;
        b=mljqPoX8COzlMdgYZsZNJiXr9jhs96W4eKoIPtHB2APNo9XlHCm7Kph0w3z5lLdNxq
         K1ucw8H70rHA6r+PgV+fPLtGicZUidFJYIlhVqM2i6TML6ePGVfawRRitW9TUpDXPDgL
         HQXHB0J6qcMALureRAXDaqGgTEq9Srgq1xhE5aCPBz90b/ZXXjE9N6H13ZoNFNOahxny
         JEY+33ozoyoe8Y6C0tlhptcEMPxjwCGRdYfJ60Ba3mwJoXBUV1rwfH81n6TYC+R9X/dw
         6OcKkspwf76na28bMNodwOIsioF7gMQTyMsYxt5BGRMUGG7t9FvC+WpQsiRgdWnhMslI
         XqiQ==
X-Received: by 10.229.137.139 with SMTP id w11mr13118592qct.81.1357767226316;
        Wed, 09 Jan 2013 13:33:46 -0800 (PST)
Received: from [192.168.1.204] (cpe-67-249-104-72.twcny.res.rr.com. [67.249.104.72])
        by mx.google.com with ESMTPS id ou3sm20239133qeb.0.2013.01.09.13.33.44
        (version=SSLv3 cipher=OTHER);
        Wed, 09 Jan 2013 13:33:45 -0800 (PST)
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Mac OS X Mail 6.2 \(1499\))
Subject: Re: Upgrade Lucene to latest version (4.0) from 2.4.0
From: Steve Rowe <sarowe@gmail.com>
In-Reply-To: <1357765731298-4032029.post@n3.nabble.com>
Date: Wed, 9 Jan 2013 16:33:43 -0500
Content-Transfer-Encoding: quoted-printable
Message-Id: <E1A50D55-5487-4574-9745-5B319A77BD91@gmail.com>
References: <1357758298989-4031956.post@n3.nabble.com> <50EDC042.50306@getrailo.org> <1357759262767-4031974.post@n3.nabble.com> <6AEE0C09-46B5-4527-9805-D30F50D1A291@gmail.com> <1357765731298-4032029.post@n3.nabble.com>
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.1499)
X-Virus-Checked: Checked by ClamAV on apache.org

I don't think there is a migration guide from 2.X to 3.X, other than the =
specific information in the release notes.

If you start reading CHANGES.txt at version 3.0.0, and then each later =
release's notes after that, especially the sections "Changes in =
backwards compatibility policy", e.g. for 3.0.0: =
<http://lucene.apache.org/core/4_0_0/changes/Changes.html#3.0.0.changes_in=
_backwards_compatibility_policy>, and "API Changes", you'll get a good =
picture of the changes you need to make to your code.

On Jan 9, 2013, at 4:08 PM, saisantoshi <saisantoshi76@gmail.com> wrote:

> Is there any migration guide from 2.x to 3.x? ( as per the suggestion, =
i
> would like to upgrade first from 2.4.0 to 2.9.0 and from 2.9.0 to 3.6) =
and
> later we decide if we want to upgrade from 3.6 to 4.x version?
>=20
>=20
>=20
> --
> View this message in context: =
http://lucene.472066.n3.nabble.com/Upgrade-Lucene-to-latest-version-4-0-fr=
om-2-4-0-tp4031956p4032029.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54640-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jan  9 21:37:36 2013
Return-Path: <java-user-return-54640-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 2A837EF39
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed,  9 Jan 2013 21:37:36 +0000 (UTC)
Received: (qmail 94097 invoked by uid 500); 9 Jan 2013 21:37:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94014 invoked by uid 500); 9 Jan 2013 21:37:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94006 invoked by uid 99); 9 Jan 2013 21:37:33 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jan 2013 21:37:33 +0000
X-ASF-Spam-Status: No, hits=1.3 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.160.45] (HELO mail-pb0-f45.google.com) (209.85.160.45)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jan 2013 21:37:27 +0000
Received: by mail-pb0-f45.google.com with SMTP id mc8so1198311pbc.4
        for <java-user@lucene.apache.org>; Wed, 09 Jan 2013 13:37:06 -0800 (PST)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=x-received:message-id:date:from:user-agent:mime-version:to:subject
         :references:in-reply-to:content-type:content-transfer-encoding
         :x-gm-message-state;
        bh=lGFwZkQkNweOLIQAhcsbT0J+hANX+0iWMuG9I7hTQGg=;
        b=bZvF+8WAvbIdESqWX7qNi+dnG06huh0wDdsOtD0yegAiWZZwOxxpB4FfcmDgoVsKYQ
         +R1ZDqIR5XkA5CE5JBMeMih9Kd4SKCwcAiIC5ARAEhUC8oDNeBZE79FoWXdKNC1SaBZe
         yNCkh1cytxKAcdcntlOfqerwHOMU8mg0aJh8lvUmXdNt+m3gm9UUQsOvzjaooP2Wc0/q
         SkSSl8M2HbLI/H8ZieqIp9px2lWGTd9bRiEb3BRmrnIs6jBG6nuYilPGLpmjksqbcdbg
         KZ6Pk+ib338Y73bBidx/uN7ZO6qgHDJKTdfwMkPDBvgRrXDgQSMgBZqUg2RyNycgGInL
         JOlg==
X-Received: by 10.68.243.33 with SMTP id wv1mr209010185pbc.143.1357767426103;
        Wed, 09 Jan 2013 13:37:06 -0800 (PST)
Received: from [192.168.0.11] (cpe-98-145-203-109.socal.res.rr.com. [98.145.203.109])
        by mx.google.com with ESMTPS id ol4sm42244842pbb.58.2013.01.09.13.37.04
        (version=SSLv3 cipher=OTHER);
        Wed, 09 Jan 2013 13:37:05 -0800 (PST)
Message-ID: <50EDE2F4.3030703@getrailo.org>
Date: Wed, 09 Jan 2013 13:36:52 -0800
From: "Igal @ getRailo.org" <igal@getrailo.org>
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:17.0) Gecko/17.0 Thunderbird/17.0
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Upgrade Lucene to latest version (4.0) from 2.4.0
References: <1357758298989-4031956.post@n3.nabble.com> <50EDC042.50306@getrailo.org> <1357759262767-4031974.post@n3.nabble.com> <6AEE0C09-46B5-4527-9805-D30F50D1A291@gmail.com> <1357765731298-4032029.post@n3.nabble.com>
In-Reply-To: <1357765731298-4032029.post@n3.nabble.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Gm-Message-State: ALoCoQmrHcQBMU6nLGB2x32uhEvRWmT9RB0vkM1PetdKMcs5SCHLqnyVoYTREG8tK3Ny9pTHNnA6
X-Virus-Checked: Checked by ClamAV on apache.org

as mentioned before -- I'm not an expert on Lucene (far from it) -- but 
it seems to me like each migration version will take almost equal amount 
of work so if I were you I'd rethink this plan and consider migration to 4.0


Igal


On 1/9/2013 1:08 PM, saisantoshi wrote:
> Is there any migration guide from 2.x to 3.x? ( as per the suggestion, i
> would like to upgrade first from 2.4.0 to 2.9.0 and from 2.9.0 to 3.6) and
> later we decide if we want to upgrade from 3.6 to 4.x version?
>
>
>
> --
> View this message in context: http://lucene.472066.n3.nabble.com/Upgrade-Lucene-to-latest-version-4-0-from-2-4-0-tp4031956p4032029.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54641-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jan  9 21:59:03 2013
Return-Path: <java-user-return-54641-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 74D34E09D
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed,  9 Jan 2013 21:59:03 +0000 (UTC)
Received: (qmail 67045 invoked by uid 500); 9 Jan 2013 21:59:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67006 invoked by uid 500); 9 Jan 2013 21:59:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66990 invoked by uid 99); 9 Jan 2013 21:59:01 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jan 2013 21:59:01 +0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,SPF_NEUTRAL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: 216.139.236.26 is neither permitted nor denied by domain of saisantoshi76@gmail.com)
Received: from [216.139.236.26] (HELO sam.nabble.com) (216.139.236.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jan 2013 21:58:56 +0000
Received: from ben.nabble.com ([192.168.236.152])
	by sam.nabble.com with esmtp (Exim 4.72)
	(envelope-from <saisantoshi76@gmail.com>)
	id 1Tt3fP-00025V-FD
	for java-user@lucene.apache.org; Wed, 09 Jan 2013 13:58:35 -0800
Date: Wed, 9 Jan 2013 13:58:35 -0800 (PST)
From: saisantoshi <saisantoshi76@gmail.com>
To: java-user@lucene.apache.org
Message-ID: <1357768715460-4032038.post@n3.nabble.com>
In-Reply-To: <50EDE2F4.3030703@getrailo.org>
References: <1357758298989-4031956.post@n3.nabble.com> <50EDC042.50306@getrailo.org> <1357759262767-4031974.post@n3.nabble.com> <6AEE0C09-46B5-4527-9805-D30F50D1A291@gmail.com> <1357765731298-4032029.post@n3.nabble.com> <50EDE2F4.3030703@getrailo.org>
Subject: Re: Upgrade Lucene to latest version (4.0) from 2.4.0
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Are there any best practices that we can follow? We want to get to the latest
version and am thinking if we can directly go from 2.4.0 to 4.x (as supposed
to 2.x - 3.x and 3.x - 4.x)? so that it will not only save time but also
testing cycle at each migration hop.

Are there any limitations in directly upgrading from 2.x - 4.x? Is this
allowed?



--
View this message in context: http://lucene.472066.n3.nabble.com/Upgrade-Lucene-to-latest-version-4-0-from-2-4-0-tp4031956p4032038.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54642-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jan  9 22:05:36 2013
Return-Path: <java-user-return-54642-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 0CEFBE0E1
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed,  9 Jan 2013 22:05:36 +0000 (UTC)
Received: (qmail 89155 invoked by uid 500); 9 Jan 2013 22:05:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89096 invoked by uid 500); 9 Jan 2013 22:05:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89088 invoked by uid 99); 9 Jan 2013 22:05:33 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jan 2013 22:05:33 +0000
X-ASF-Spam-Status: No, hits=0.6 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of glen.newton@gmail.com designates 209.85.217.175 as permitted sender)
Received: from [209.85.217.175] (HELO mail-lb0-f175.google.com) (209.85.217.175)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jan 2013 22:05:27 +0000
Received: by mail-lb0-f175.google.com with SMTP id gg13so1430665lbb.6
        for <java-user@lucene.apache.org>; Wed, 09 Jan 2013 14:05:07 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        bh=oImH0nMiXXt35cNpKSf0pUkAuxQcJyEz0idwbZGRNdI=;
        b=qeIowcerpKLaZxLplaCdVgzrAEt8eNDjIZ8rtZPM404AfpeKb5v9X5S5xbkEMOJHOW
         dGHR4bkSuU2cNZZtgchhg4Gh/Beujpj9Z+3c7u9Kh59pZLCZDlamuuwnTeojC5UOcsZt
         /3xxc7lZa9qtw+/IJkxRzZ/UhF9z8B1pJpPRbV/EbNdJ5DbfyI4n0+KLzQJjQhdWjQ1j
         WbQh5wrnx/dAkYPdKP5zEXjqeWsErX7lSU9Jx7lvvG7pvRkS6UAa8rUFp65hpz/CwqFx
         S6tSXElyhNxqBvu9mumUCXTdUP78XOoS/QvJqlGXJFXqOeA5jWpjEydwBokx3Zhqg6k1
         RWmg==
Received: by 10.152.148.129 with SMTP id ts1mr66971454lab.19.1357769107481;
 Wed, 09 Jan 2013 14:05:07 -0800 (PST)
MIME-Version: 1.0
Received: by 10.112.60.229 with HTTP; Wed, 9 Jan 2013 14:04:45 -0800 (PST)
In-Reply-To: <1357768715460-4032038.post@n3.nabble.com>
References: <1357758298989-4031956.post@n3.nabble.com> <50EDC042.50306@getrailo.org>
 <1357759262767-4031974.post@n3.nabble.com> <6AEE0C09-46B5-4527-9805-D30F50D1A291@gmail.com>
 <1357765731298-4032029.post@n3.nabble.com> <50EDE2F4.3030703@getrailo.org> <1357768715460-4032038.post@n3.nabble.com>
From: Glen Newton <glen.newton@gmail.com>
Date: Wed, 9 Jan 2013 17:04:45 -0500
Message-ID: <CANL2-4P2UdYkNn6NDvBt8tTtf1G9cA2SB8FK_mJdciwrxgcMsw@mail.gmail.com>
Subject: Re: Upgrade Lucene to latest version (4.0) from 2.4.0
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
X-Virus-Checked: Checked by ClamAV on apache.org

I am in the process of upgrading LuSql from 2.x to 4.x and I am first
going to 3.6 as the jump to 4.x was too big.
 I would suggest this to you. I think it is less work.
Of course I am also able to offer LuSql to 3.6 users, so this is
slightly different from your case.

-Glen

On Wed, Jan 9, 2013 at 4:58 PM, saisantoshi <saisantoshi76@gmail.com> wrote:
> Are there any best practices that we can follow? We want to get to the latest
> version and am thinking if we can directly go from 2.4.0 to 4.x (as supposed
> to 2.x - 3.x and 3.x - 4.x)? so that it will not only save time but also
> testing cycle at each migration hop.
>
> Are there any limitations in directly upgrading from 2.x - 4.x? Is this
> allowed?
>
>
>
> --
> View this message in context: http://lucene.472066.n3.nabble.com/Upgrade-Lucene-to-latest-version-4-0-from-2-4-0-tp4031956p4032038.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>



-- 
-
http://zzzoot.blogspot.com/
-

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54643-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jan  9 22:13:35 2013
Return-Path: <java-user-return-54643-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 6A9B4E111
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed,  9 Jan 2013 22:13:35 +0000 (UTC)
Received: (qmail 9925 invoked by uid 500); 9 Jan 2013 22:13:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9838 invoked by uid 500); 9 Jan 2013 22:13:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9826 invoked by uid 99); 9 Jan 2013 22:13:33 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jan 2013 22:13:33 +0000
X-ASF-Spam-Status: No, hits=0.6 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of sarowe@gmail.com designates 209.85.216.169 as permitted sender)
Received: from [209.85.216.169] (HELO mail-qc0-f169.google.com) (209.85.216.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jan 2013 22:13:23 +0000
Received: by mail-qc0-f169.google.com with SMTP id t2so1930871qcq.0
        for <java-user@lucene.apache.org>; Wed, 09 Jan 2013 14:13:02 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=x-received:content-type:mime-version:subject:from:in-reply-to:date
         :content-transfer-encoding:message-id:references:to:x-mailer;
        bh=VY0BcfHIs5V+nGxM2q7N2UGNzSG6MYiErovLV3B4PfI=;
        b=tfokCbHcAyBui6xEWU8z2sxfsCE9wX0YoM2uRV33Kj81NJ9ucgYWmiOfowigclWapv
         tzS2SzicFkTWVMinOd/88ORpibvtrvi0unWrm+Kk2rgMkL4Nc9cMUza4lWk3y0z+9nwL
         Ji3R85wOkuMSS7rQ4t66YC394MtF4WXgd4vqBITnyb3069DlR7saUYxVaAScvVHStx23
         i8F1l2Ya2D2GQRIloeeW9venigwDGWtlww9Bz6gXuSs0oNG8cazFMk4wEz5I6Cv9BFbm
         a/nDXWAHxLy9pmUU4maA4iiLyuXzyfQv+hUGSJslA3AJTxcianzbX6+I1IEZ0ZTObap/
         Oj5Q==
X-Received: by 10.49.62.39 with SMTP id v7mr62325406qer.15.1357769582770;
        Wed, 09 Jan 2013 14:13:02 -0800 (PST)
Received: from [192.168.1.204] (cpe-67-249-104-72.twcny.res.rr.com. [67.249.104.72])
        by mx.google.com with ESMTPS id e12sm25085837qad.1.2013.01.09.14.13.01
        (version=SSLv3 cipher=OTHER);
        Wed, 09 Jan 2013 14:13:02 -0800 (PST)
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Mac OS X Mail 6.2 \(1499\))
Subject: Re: Upgrade Lucene to latest version (4.0) from 2.4.0
From: Steve Rowe <sarowe@gmail.com>
In-Reply-To: <1357768715460-4032038.post@n3.nabble.com>
Date: Wed, 9 Jan 2013 17:13:00 -0500
Content-Transfer-Encoding: quoted-printable
Message-Id: <56C47385-FFD3-4D13-995D-3896AC46639D@gmail.com>
References: <1357758298989-4031956.post@n3.nabble.com> <50EDC042.50306@getrailo.org> <1357759262767-4031974.post@n3.nabble.com> <6AEE0C09-46B5-4527-9805-D30F50D1A291@gmail.com> <1357765731298-4032029.post@n3.nabble.com> <50EDE2F4.3030703@getrailo.org> <1357768715460-4032038.post@n3.nabble.com>
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.1499)
X-Virus-Checked: Checked by ClamAV on apache.org

Of course you're free to do as you like - who will stop you? :)

The problem is the lack of a single place to look for detailed guidance =
on handling a long-distance upgrade like that.

But it's difficult to generalize here: the possible range in the level =
of difficulty involved is vast, depending on the amount of code =
involved, what parts of the API are being used, etc. =20

On Jan 9, 2013, at 4:58 PM, saisantoshi <saisantoshi76@gmail.com> wrote:

> Are there any best practices that we can follow? We want to get to the =
latest
> version and am thinking if we can directly go from 2.4.0 to 4.x (as =
supposed
> to 2.x - 3.x and 3.x - 4.x)? so that it will not only save time but =
also
> testing cycle at each migration hop.
>=20
> Are there any limitations in directly upgrading from 2.x - 4.x? Is =
this
> allowed?
>=20
>=20
>=20
> --
> View this message in context: =
http://lucene.472066.n3.nabble.com/Upgrade-Lucene-to-latest-version-4-0-fr=
om-2-4-0-tp4031956p4032038.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54644-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jan 10 00:54:28 2013
Return-Path: <java-user-return-54644-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 7848BD0A4
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 10 Jan 2013 00:54:28 +0000 (UTC)
Received: (qmail 8675 invoked by uid 500); 10 Jan 2013 00:54:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8600 invoked by uid 500); 10 Jan 2013 00:54:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8589 invoked by uid 99); 10 Jan 2013 00:54:26 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Jan 2013 00:54:26 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.160.46] (HELO mail-pb0-f46.google.com) (209.85.160.46)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Jan 2013 00:54:18 +0000
Received: by mail-pb0-f46.google.com with SMTP id wy7so1277485pbc.19
        for <java-user@lucene.apache.org>; Wed, 09 Jan 2013 16:53:56 -0800 (PST)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=x-received:message-id:date:from:user-agent:mime-version:to:subject
         :content-type:content-transfer-encoding:x-gm-message-state;
        bh=25QYmd6kPhO1Pt6EHh0hUNDmCmmD5xYuWeu2JZX4/mk=;
        b=d094vJSzkSz3YIZMfsIoSYXYkx6KPWCrXjykEiqT5QlmKvwhjDRJYAo3tU5pHaqsdx
         0W+xR4YMUbEYR5q0uFhsaAvaQ3i8ZTr8IF4Xy0hl6HmFXFgwrGoXH8BOE9i7Fk9Y2U35
         tTZjlaf71xBRIC21/mP6q8g1QIyqkOn6GDZjOIIjQunCri5EV4O7bFcIEVCA/75WtNO2
         v6rDGxUBy25LXRBAaHVXDNy1992KhU/z0yI9IlktWpSERSo7sUmoi9P0uCBhf6L9geW7
         ASxP51lBRPtacKMQi1AcW++zEz0q7DuTlAlLq4F10nvKOe/s5XFCKBFA/GKuZ/XPYUnV
         5Sqw==
X-Received: by 10.66.73.105 with SMTP id k9mr194363626pav.37.1357779236681;
        Wed, 09 Jan 2013 16:53:56 -0800 (PST)
Received: from [192.168.0.11] (cpe-98-145-203-109.socal.res.rr.com. [98.145.203.109])
        by mx.google.com with ESMTPS id oz9sm42494527pbb.68.2013.01.09.16.53.54
        (version=SSLv3 cipher=OTHER);
        Wed, 09 Jan 2013 16:53:55 -0800 (PST)
Message-ID: <50EE1110.7010900@getrailo.org>
Date: Wed, 09 Jan 2013 16:53:36 -0800
From: "Igal @ getRailo.org" <igal@getrailo.org>
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:17.0) Gecko/17.0 Thunderbird/17.0
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: NPE when adding a Document to an IndexWriter
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Gm-Message-State: ALoCoQmDnx7GBKWbvjC4a8RjWYkmkfO/6388dna3Arl53hVV5SugqkTluSLT5y2HfU18/4LdGPoG
X-Virus-Checked: Checked by ClamAV on apache.org

I keep getting an NPE when trying to add a Doc to an IndexWriter. I've 
minimized my code to very basic code.  what am I doing wrong? pseudo-code:

Document doc = new Document();

TextField ft;

ft = new TextField( "desc1", "word1", Field.Store.YES );
doc.add( ft );

ft = new TextField( "desc2", "word2", Field.Store.YES );
doc.add( ft );            // if I comment out this line then no NPE

IndexWriter iw = new IndexWriter( luceneDirectory, config );

iw.addDocument( doc );    // <== throws NPE


Exception in thread "main" java.lang.NullPointerException
     at 
org.apache.lucene.analysis.util.CharacterUtils$Java5CharacterUtils.fill(CharacterUtils.java:191)
     at 
org.apache.lucene.analysis.util.CharTokenizer.incrementToken(CharTokenizer.java:153)
     at 
org.apache.lucene.index.DocInverterPerField.processFields(DocInverterPerField.java:102)
     at 
org.apache.lucene.index.DocFieldProcessor.processDocument(DocFieldProcessor.java:307)
     at 
org.apache.lucene.index.DocumentsWriterPerThread.updateDocument(DocumentsWriterPerThread.java:244)
     at 
org.apache.lucene.index.DocumentsWriter.updateDocument(DocumentsWriter.java:373)
     at 
org.apache.lucene.index.IndexWriter.updateDocument(IndexWriter.java:1445)
     at 
org.apache.lucene.index.IndexWriter.addDocument(IndexWriter.java:1124)
     at 
org.apache.lucene.index.IndexWriter.addDocument(IndexWriter.java:1105)
     at s21waf.text.lucene4.Test1.testIndexWriter(Test1.java:71)
     at s21waf.text.lucene4.Test1.main(Test1.java:141)


NPE with StandardTokenizer:

Exception in thread "main" java.lang.NullPointerException
     at 
org.apache.lucene.analysis.standard.StandardTokenizerImpl.zzRefill(StandardTokenizerImpl.java:921)
     at 
org.apache.lucene.analysis.standard.StandardTokenizerImpl.getNextToken(StandardTokenizerImpl.java:1128)
     at 
org.apache.lucene.analysis.standard.StandardTokenizer.incrementToken(StandardTokenizer.java:179)
     at 
org.apache.lucene.index.DocInverterPerField.processFields(DocInverterPerField.java:102)
     at 
org.apache.lucene.index.DocFieldProcessor.processDocument(DocFieldProcessor.java:307)
     at 
org.apache.lucene.index.DocumentsWriterPerThread.updateDocument(DocumentsWriterPerThread.java:244)
     at 
org.apache.lucene.index.DocumentsWriter.updateDocument(DocumentsWriter.java:373)
     at 
org.apache.lucene.index.IndexWriter.updateDocument(IndexWriter.java:1445)
     at 
org.apache.lucene.index.IndexWriter.addDocument(IndexWriter.java:1124)
     at 
org.apache.lucene.index.IndexWriter.addDocument(IndexWriter.java:1105)
     at s21waf.text.lucene4.Test1.testIndexWriter(Test1.java:75)
     at s21waf.text.lucene4.Test1.main(Test1.java:145)

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54645-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jan 10 01:23:44 2013
Return-Path: <java-user-return-54645-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 35D6BD1C8
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 10 Jan 2013 01:23:44 +0000 (UTC)
Received: (qmail 98248 invoked by uid 500); 10 Jan 2013 01:23:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98195 invoked by uid 500); 10 Jan 2013 01:23:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98186 invoked by uid 99); 10 Jan 2013 01:23:41 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Jan 2013 01:23:41 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.220.47] (HELO mail-pa0-f47.google.com) (209.85.220.47)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Jan 2013 01:23:32 +0000
Received: by mail-pa0-f47.google.com with SMTP id fa10so64106pad.20
        for <java-user@lucene.apache.org>; Wed, 09 Jan 2013 17:23:11 -0800 (PST)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=x-received:date:from:to:subject:in-reply-to:message-id:references
         :user-agent:mime-version:content-type:x-gm-message-state;
        bh=AikcS398QAn7SO+UnrIVU6uGO6f1uocLfqkhxQYY+tE=;
        b=SEXDgMw/A7/al2n2DyHbXZHBrpzMX/GF+oqXSGdFv4ntt9aCRS+rPFH5C4jt44P4j/
         rnsF1dTUFGh7HZfk2QE7QhGKBRaK3eD7UueaQyXQxT0gEbDjlXk/CDVGqR2YJxwM14ug
         KTKiXOJib6BYOgJvEMJC0AO/YzC4O7uh3+sInkc0n0FQlWu/oXGpsRJjIxA8hRkcg78M
         9LI4rgjzgZjJrT6Q4yxkvjSdJlWrmtbvLmN2D+R3uqOsRCEnx8tNuD3GywrN1o3FbK/H
         MKQuLY1KR2hWED8nWYdw/c17QcLDr00CW5AfcfEKOOuUVM4Xioz9Yk8cGY3xv8pfJ5Wk
         eIWg==
X-Received: by 10.68.130.225 with SMTP id oh1mr68929721pbb.147.1357780991674;
        Wed, 09 Jan 2013 17:23:11 -0800 (PST)
Received: from frisbee.local (250.185-62-69.ftth.swbr.surewest.net. [69.62.185.250])
        by mx.google.com with ESMTPS id pu5sm903pbb.73.2013.01.09.17.23.10
        (version=TLSv1.1 cipher=ECDHE-RSA-RC4-SHA bits=128/128);
        Wed, 09 Jan 2013 17:23:10 -0800 (PST)
Date: Wed, 9 Jan 2013 17:23:08 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: NPE when adding a Document to an IndexWriter
In-Reply-To: <50EE1110.7010900@getrailo.org>
Message-ID: <alpine.DEB.2.02.1301091717130.28372@frisbee>
References: <50EE1110.7010900@getrailo.org>
User-Agent: Alpine 2.02 (DEB 1266 2009-07-14)
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Gm-Message-State: ALoCoQnXIOzZBEMJO27RZ1Xv0Zxuk5jtHB33u2jShnGXYSiGlp5+/k0d8OCkR4GaQICGDcqza2Hd
X-Virus-Checked: Checked by ClamAV on apache.org


: I keep getting an NPE when trying to add a Doc to an IndexWriter. I've
: minimized my code to very basic code.  what am I doing wrong? pseudo-code:

can you post a full test that other people can run to try and reproduce?  

it doesn't even have to be a junit test -- just some complete javacode 
people paste into a main method and compile would be enough (right now we 
have no idea what IndexWriterConfig you are using (could easily affect 
things) or what directory you are using (less likeley, but still)


-Hoss

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54646-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jan 10 02:15:19 2013
Return-Path: <java-user-return-54646-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 3AB0FE1C4
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 10 Jan 2013 02:15:19 +0000 (UTC)
Received: (qmail 32735 invoked by uid 500); 10 Jan 2013 02:15:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32684 invoked by uid 500); 10 Jan 2013 02:15:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32675 invoked by uid 99); 10 Jan 2013 02:15:16 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Jan 2013 02:15:16 +0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.210.54] (HELO mail-da0-f54.google.com) (209.85.210.54)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Jan 2013 02:15:08 +0000
Received: by mail-da0-f54.google.com with SMTP id n2so22489dad.41
        for <java-user@lucene.apache.org>; Wed, 09 Jan 2013 18:14:47 -0800 (PST)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=x-received:message-id:date:from:user-agent:mime-version:to:subject
         :references:in-reply-to:content-type:x-gm-message-state;
        bh=azxMe0V1Y1/1FTZ4bMKBSRaL6s1jWZBrJa5DhbXhciw=;
        b=oILd1HSrRCi+O86Cj3aO01dYac9veOnDOFyksXUSjhnUHEiI47bNer4zIpRxYej0Gv
         arNmEVb4AstrxfAVysL129x1gh5aIdr7m8mXAwHxvrAtalo1Hw2MW5st1rzXE/Gcn9sp
         sCqr+BxeAXwlLIhF/QM0H/mnHAnICUCT8L7KBB94SD6C66I9+raSZ9fVA8kOgKh5MXLI
         DwIdAw7t+oTVXH2d6LrgbSOkrsGKdeBS3QV1xsRV2aEufA6fmWgflVbQhPHvJndb5l6j
         ewqkO6tMy4Q4gfSG811TepAWzaEWuNWSzfwlXJzzJEqUzYiETQl+mlgNYnbXDD1Gcj9z
         dfAg==
X-Received: by 10.68.253.42 with SMTP id zx10mr29385386pbc.56.1357784087371;
        Wed, 09 Jan 2013 18:14:47 -0800 (PST)
Received: from [192.168.0.11] (cpe-98-145-203-109.socal.res.rr.com. [98.145.203.109])
        by mx.google.com with ESMTPS id nm2sm55568pbc.43.2013.01.09.18.14.45
        (version=TLSv1 cipher=ECDHE-RSA-RC4-SHA bits=128/128);
        Wed, 09 Jan 2013 18:14:46 -0800 (PST)
Message-ID: <50EE2408.6050002@getrailo.org>
Date: Wed, 09 Jan 2013 18:14:32 -0800
From: "Igal @ getRailo.org" <igal@getrailo.org>
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:17.0) Gecko/17.0 Thunderbird/17.0
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: NPE when adding a Document to an IndexWriter
References: <50EE1110.7010900@getrailo.org> <alpine.DEB.2.02.1301091717130.28372@frisbee>
In-Reply-To: <alpine.DEB.2.02.1301091717130.28372@frisbee>
Content-Type: multipart/mixed;
 boundary="------------070409060303050309080808"
X-Gm-Message-State: ALoCoQk50/jYL7QCh0i+Ueq2+zLdqqsSNV1L6aJaCWbgP7pqFJpJn5++KO6roQQMIjl9hNxGF5kQ
X-Virus-Checked: Checked by ClamAV on apache.org

--------------070409060303050309080808
Content-Type: multipart/alternative;
 boundary="------------030406020505000104070406"


--------------030406020505000104070406
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

thanks for your reply.  please see attached.  I tried to maintain the 
structure of the code that I need to use in the library I'm building.  I 
think it should work for you as long as you remove the package 
declaration at the top.

when I run the attached file I get the following output:

debug:
Exception in thread "main" java.lang.NullPointerException
     at 
org.apache.lucene.analysis.util.CharacterUtils$Java5CharacterUtils.fill(CharacterUtils.java:191)
     at 
org.apache.lucene.analysis.util.CharTokenizer.incrementToken(CharTokenizer.java:153)
     at 
org.apache.lucene.index.DocInverterPerField.processFields(DocInverterPerField.java:102)
     at 
org.apache.lucene.index.DocFieldProcessor.processDocument(DocFieldProcessor.java:307)
     at 
org.apache.lucene.index.DocumentsWriterPerThread.updateDocument(DocumentsWriterPerThread.java:244)
     at 
org.apache.lucene.index.DocumentsWriter.updateDocument(DocumentsWriter.java:373)
     at 
org.apache.lucene.index.IndexWriter.updateDocument(IndexWriter.java:1445)
     at 
org.apache.lucene.index.IndexWriter.addDocument(IndexWriter.java:1124)
     at 
org.apache.lucene.index.IndexWriter.addDocument(IndexWriter.java:1105)
     at s21waf.text.lucene4.TestNPE.testIndexWriter(TestNPE.java:47)
     at s21waf.text.lucene4.TestNPE.main(TestNPE.java:111)
Java Result: 1
BUILD SUCCESSFUL (total time: 0 seconds)

thanks,

Igal


On 1/9/2013 5:23 PM, Chris Hostetter wrote:
> : I keep getting an NPE when trying to add a Doc to an IndexWriter. I've
> : minimized my code to very basic code.  what am I doing wrong? pseudo-code:
>
> can you post a full test that other people can run to try and reproduce?
>
> it doesn't even have to be a junit test -- just some complete javacode
> people paste into a main method and compile would be enough (right now we
> have no idea what IndexWriterConfig you are using (could easily affect
> things) or what directory you are using (less likeley, but still)
>
>
> -Hoss
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


--------------030406020505000104070406
Content-Type: text/html; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

<html>
  <head>
    <meta content="text/html; charset=ISO-8859-1"
      http-equiv="Content-Type">
  </head>
  <body text="#000000" bgcolor="#FFFFFF">
    thanks for your reply.&nbsp; please see attached.&nbsp; I tried to maintain
    the structure of the code that I need to use in the library I'm
    building.&nbsp; I think it should work for you as long as you remove the
    package declaration at the top.<br>
    <br>
    when I run the attached file I get the following output:<br>
    <font color="#6600cc"><br>
      debug:<br>
      Exception in thread "main" java.lang.NullPointerException<br>
      &nbsp;&nbsp;&nbsp; at
org.apache.lucene.analysis.util.CharacterUtils$Java5CharacterUtils.fill(CharacterUtils.java:191)<br>
      &nbsp;&nbsp;&nbsp; at
org.apache.lucene.analysis.util.CharTokenizer.incrementToken(CharTokenizer.java:153)<br>
      &nbsp;&nbsp;&nbsp; at
org.apache.lucene.index.DocInverterPerField.processFields(DocInverterPerField.java:102)<br>
      &nbsp;&nbsp;&nbsp; at
org.apache.lucene.index.DocFieldProcessor.processDocument(DocFieldProcessor.java:307)<br>
      &nbsp;&nbsp;&nbsp; at
org.apache.lucene.index.DocumentsWriterPerThread.updateDocument(DocumentsWriterPerThread.java:244)<br>
      &nbsp;&nbsp;&nbsp; at
org.apache.lucene.index.DocumentsWriter.updateDocument(DocumentsWriter.java:373)<br>
      &nbsp;&nbsp;&nbsp; at
org.apache.lucene.index.IndexWriter.updateDocument(IndexWriter.java:1445)<br>
      &nbsp;&nbsp;&nbsp; at
      org.apache.lucene.index.IndexWriter.addDocument(IndexWriter.java:1124)<br>
      &nbsp;&nbsp;&nbsp; at
      org.apache.lucene.index.IndexWriter.addDocument(IndexWriter.java:1105)<br>
      &nbsp;&nbsp;&nbsp; at
      s21waf.text.lucene4.TestNPE.testIndexWriter(TestNPE.java:47)<br>
      &nbsp;&nbsp;&nbsp; at s21waf.text.lucene4.TestNPE.main(TestNPE.java:111)<br>
      Java Result: 1<br>
      BUILD SUCCESSFUL (total time: 0 seconds)</font><br>
    <br>
    thanks,<br>
    <br>
    Igal<br>
    <br>
    <br>
    <div class="moz-cite-prefix">On 1/9/2013 5:23 PM, Chris Hostetter
      wrote:<br>
    </div>
    <blockquote cite="mid:alpine.DEB.2.02.1301091717130.28372@frisbee"
      type="cite">
      <pre wrap="">
: I keep getting an NPE when trying to add a Doc to an IndexWriter. I've
: minimized my code to very basic code.  what am I doing wrong? pseudo-code:

can you post a full test that other people can run to try and reproduce?  

it doesn't even have to be a junit test -- just some complete javacode 
people paste into a main method and compile would be enough (right now we 
have no idea what IndexWriterConfig you are using (could easily affect 
things) or what directory you are using (less likeley, but still)


-Hoss

---------------------------------------------------------------------
To unsubscribe, e-mail: <a class="moz-txt-link-abbreviated" href="mailto:java-user-unsubscribe@lucene.apache.org">java-user-unsubscribe@lucene.apache.org</a>
For additional commands, e-mail: <a class="moz-txt-link-abbreviated" href="mailto:java-user-help@lucene.apache.org">java-user-help@lucene.apache.org</a>

</pre>
    </blockquote>
    <br>
  </body>
</html>

--------------030406020505000104070406--

--------------070409060303050309080808
Content-Type: text/plain; charset=windows-1252;
 name="TestNPE.java"
Content-Transfer-Encoding: 7bit
Content-Disposition: attachment;
 filename="TestNPE.java"

package s21waf.text.lucene4;

import java.io.IOException;
import java.io.Reader;
import java.io.StringReader;
import java.util.Collections;
import java.util.List;
import java.util.Map;
import org.apache.lucene.analysis.Analyzer;
import org.apache.lucene.analysis.TokenStream;
import org.apache.lucene.analysis.Tokenizer;
import org.apache.lucene.analysis.core.WhitespaceTokenizer;
import org.apache.lucene.analysis.standard.StandardTokenizer;
import org.apache.lucene.document.Document;
import org.apache.lucene.document.Field;
import org.apache.lucene.document.TextField;
import org.apache.lucene.index.IndexWriter;
import org.apache.lucene.index.IndexWriterConfig;
import org.apache.lucene.store.Directory;
import org.apache.lucene.store.FSDirectory;
import org.apache.lucene.util.Version;


public class TestNPE {
 
    
    public static void testIndexWriter() throws IOException {
        
        Directory dir = FSDirectory.open( new java.io.File( "F:/Test/Lucene/dir1" ) );
        
        Document doc = new Document();
                
        TextField ft;
        
        ft = new TextField( "desc1", "word1", Field.Store.YES );        
        doc.add( ft );
        
        ft = new TextField( "desc2", "word2", Field.Store.YES );        
        doc.add( ft );
                
        Analyzer analyzer = createAnalyzer( TokenizerConfig.DEFAULT );
        
        IndexWriterConfig iwc = new IndexWriterConfig( Version.LUCENE_40, analyzer );
        
        IndexWriter iw = new IndexWriter( dir, iwc);
        
        iw.addDocument(doc);
        
        iw.close();
    }
    
    
    /** returns a WhitespaceTokenizerExt Tokenizer that strips html and replaces commas with comma-space */
    public static Tokenizer getCharTokenizer( Reader input ) {
        
//        Tokenizer result = new WhitespaceTokenizer( Version.LUCENE_40, getCharFilter( input ) );
        
        Tokenizer result = new WhitespaceTokenizer( Version.LUCENE_40, input );
        
//        Tokenizer result = new StandardTokenizer( Version.LUCENE_40, input );
        
        return result;
    }

    
    /** return getTokenizer( new StringReader( input ) ); */
    public static Tokenizer getCharTokenizer( String input ) {
        
        return getCharTokenizer( new StringReader( input ) );
    }
    
    
    public static Analyzer createAnalyzer( final TokenizerConfig config ) {
        
        Analyzer result = new Analyzer() {

            @Override
            protected Analyzer.TokenStreamComponents createComponents( String fieldName, Reader reader ) {

                Analyzer.TokenStreamComponents tsc = new Analyzer.TokenStreamComponents( 
                        
                          getCharTokenizer( reader )
                        , getTokenFilterChain( reader, config ) 
                );
                
                return tsc;
            }
            
        };
        
        return result;
    }
       
    
    public static TokenStream getTokenFilterChain( String input, TokenizerConfig config ) {
        
        return getTokenFilterChain( new StringReader( input ), config );
    }
    
    
    public static TokenStream getTokenFilterChain( Reader input, TokenizerConfig config ) {
        
        TokenStream result = getCharTokenizer( input );

        return result;
    }
    
    
    public static void main(String[] args) throws IOException {
    
        testIndexWriter();
        
    }
    
    
    public static class TokenizerConfig {
        
        private int shingleSize = 3;
        private Map replaceList = Collections.EMPTY_MAP;
        private Map typeList = Collections.EMPTY_MAP;
        private List synonymList = Collections.EMPTY_LIST;
        
        
        public int getShingleSize() {
            
            return this.shingleSize;
        }
        
        public void setShingleSize( int value ) {
            
            this.shingleSize = value;
        }
        
        
        public void setReplaceList( Map replaceList ) {
            
            this.replaceList = replaceList;
        }        
        
        public Map getReplaceList() {
            
            return this.replaceList;
        }
        
        
        public void setTypeList( Map typeList ) {
            
            this.typeList = typeList;
        }        
        
        public Map getTypeList() {
            
            return this.typeList;
        }
        
        
        public void setSynonyms( List<String> synonymList ) {
            
            this.synonymList = synonymList;
        }
        
        public List getSynonyms() {
            
            return synonymList;
        }
        
        public static final TokenizerConfig DEFAULT = new TokenizerConfig();
        
    }
    
}


--------------070409060303050309080808
Content-Type: text/plain; charset=us-ascii


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
--------------070409060303050309080808--

From java-user-return-54647-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jan 10 02:29:20 2013
Return-Path: <java-user-return-54647-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 735429103
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 10 Jan 2013 02:29:20 +0000 (UTC)
Received: (qmail 61339 invoked by uid 500); 10 Jan 2013 02:29:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61289 invoked by uid 500); 10 Jan 2013 02:29:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61278 invoked by uid 99); 10 Jan 2013 02:29:18 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Jan 2013 02:29:18 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.223.181] (HELO mail-ie0-f181.google.com) (209.85.223.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Jan 2013 02:29:09 +0000
Received: by mail-ie0-f181.google.com with SMTP id 16so69682iea.26
        for <java-user@lucene.apache.org>; Wed, 09 Jan 2013 18:28:48 -0800 (PST)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=x-received:date:from:to:subject:in-reply-to:message-id:references
         :user-agent:mime-version:content-type:x-gm-message-state;
        bh=8UzwnS5CxO9nK9tOjAmsaFTZTHGIHUZ3OnAJKqZ09WE=;
        b=VzWUh23f3GoHNrlY0VqpjIH5o8bkb7dVDVqVshnvX32b2USeKVCk2EntoHZVFC9Ojh
         9XzwNuIYj50GUJpbOJOOkKqsi2I3cYZwY1AJfrSXFlS9hGeVLwjfBVFx+ovJqGVLfaCA
         mxnt7DMFFPyukjwjKVb9g8Xh/L+IjkSXwAetSeR4z7yuigY/j7rQSCi8CE9ujUhB3RJj
         5a+l3cD1trg+25gHCfWsETSFrWLUtgpjgvKXUkxWZ5UsMoMseNuTwLgK1ydV0LNA1Vl0
         BxO1+0GUdhyLh/jM4Du9nyqM886gryL7Mu6k6H3/6UwrnkNhMSXqC+rnPz2jzXTyp9By
         bixg==
X-Received: by 10.50.163.33 with SMTP id yf1mr3684223igb.69.1357784928070;
        Wed, 09 Jan 2013 18:28:48 -0800 (PST)
Received: from frisbee.local (250.185-62-69.ftth.swbr.surewest.net. [69.62.185.250])
        by mx.google.com with ESMTPS id s20sm228718igs.10.2013.01.09.18.28.45
        (version=TLSv1.1 cipher=ECDHE-RSA-RC4-SHA bits=128/128);
        Wed, 09 Jan 2013 18:28:46 -0800 (PST)
Date: Wed, 9 Jan 2013 18:28:44 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: NPE when adding a Document to an IndexWriter
In-Reply-To: <50EE2408.6050002@getrailo.org>
Message-ID: <alpine.DEB.2.02.1301091822470.28372@frisbee>
References: <50EE1110.7010900@getrailo.org> <alpine.DEB.2.02.1301091717130.28372@frisbee> <50EE2408.6050002@getrailo.org>
User-Agent: Alpine 2.02 (DEB 1266 2009-07-14)
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Gm-Message-State: ALoCoQm/4MeMiw7V4bPRZ8+VIW/4mXGSArtqcfbZmNlzOsrnVEN/eqGLFi8xAA+yYhN26nwvpvDS
X-Virus-Checked: Checked by ClamAV on apache.org


: thanks for your reply.  please see attached.  I tried to maintain the
: structure of the code that I need to use in the library I'm building.  I think
: it should work for you as long as you remove the package declaration at the
: top.

I can't currently try your code, but skimming through it i'd bet money the 
problem is in your Analyzer.  Have you tried simplifying your test down 
and just using "StandardAnalyzer" to rule that out?

In particular i see this...

>>> Analyzer.TokenStreamComponents tsc = new Analyzer.TokenStreamComponents( 
>>>                       getCharTokenizer( reader )
>>>                     , getTokenFilterChain( reader, config ) 
>>>             );

...passing the same Reader to to diff methods there is almost certainly 
not what you want to do.



-Hoss

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54648-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jan 10 02:55:28 2013
Return-Path: <java-user-return-54648-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 717FE9196
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 10 Jan 2013 02:55:28 +0000 (UTC)
Received: (qmail 25357 invoked by uid 500); 10 Jan 2013 02:55:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25289 invoked by uid 500); 10 Jan 2013 02:55:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25277 invoked by uid 99); 10 Jan 2013 02:55:26 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Jan 2013 02:55:26 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.160.51] (HELO mail-pb0-f51.google.com) (209.85.160.51)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Jan 2013 02:55:17 +0000
Received: by mail-pb0-f51.google.com with SMTP id ro12so43088pbb.10
        for <java-user@lucene.apache.org>; Wed, 09 Jan 2013 18:54:55 -0800 (PST)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=x-received:message-id:date:from:user-agent:mime-version:to:subject
         :references:in-reply-to:content-type:content-transfer-encoding
         :x-gm-message-state;
        bh=A2bUaj1kzBI0azOTE8Gxhprbi4HA2kV2z5rN9loj8JM=;
        b=TidM9KhbvXwpjdwQ9GnfmRLEgE92riOSevqs4Y5+zGEny13pa0W7dtwQ1H87BChMzc
         1mB5EUO/JnZ40han3OMLQN+nRyl7i1VB6ABOA5e3Oa79RoP6txBm38GNgVjHufsTDx9J
         iyF7Nw4E2Qi/cJPfFePFo17/A7eqmXoVwws9JYwMeg+hR74t4A2UGnL6BBDiO3IBxB/6
         CEb2thvxsVFLAgYWHJCqMETp/4avQmJT8TGIrDi/T9NRLnQMFDo1e8W74rnbe14EDKIy
         PCsHe/7ByEPhmhId72VO+iyDIjGpI7TbaaNnaq9vUYEDiV1TEfp7ssamWBl7BHU7HTSn
         8fbg==
X-Received: by 10.66.77.201 with SMTP id u9mr194773865paw.80.1357786495673;
        Wed, 09 Jan 2013 18:54:55 -0800 (PST)
Received: from [192.168.0.11] (cpe-98-145-203-109.socal.res.rr.com. [98.145.203.109])
        by mx.google.com with ESMTPS id qr8sm86783pbc.64.2013.01.09.18.54.53
        (version=TLSv1 cipher=ECDHE-RSA-RC4-SHA bits=128/128);
        Wed, 09 Jan 2013 18:54:54 -0800 (PST)
Message-ID: <50EE2D71.9060108@getrailo.org>
Date: Wed, 09 Jan 2013 18:54:41 -0800
From: "Igal @ getRailo.org" <igal@getrailo.org>
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:17.0) Gecko/17.0 Thunderbird/17.0
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: NPE when adding a Document to an IndexWriter
References: <50EE1110.7010900@getrailo.org> <alpine.DEB.2.02.1301091717130.28372@frisbee> <50EE2408.6050002@getrailo.org> <alpine.DEB.2.02.1301091822470.28372@frisbee>
In-Reply-To: <alpine.DEB.2.02.1301091822470.28372@frisbee>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Gm-Message-State: ALoCoQlzkb4/8zQWB6uyXjBCgy24r4vcAJhDLYAJ+iPypnjXCi5RZBFw3aKpnZzMRhVNINfc1YUs
X-Virus-Checked: Checked by ClamAV on apache.org

hi Hoss -- thank you for your time.  it looks like you're right (and it 
makes sense if the reader is advanced in two places at the same time 
that it will cause a problem).

I'll try to figure out how to create an Analyzer out of the Tokenizer.  
that's what I was trying to do there and obviously I did it wrong.

thanks again,


Igal


On 1/9/2013 6:28 PM, Chris Hostetter wrote:
> : thanks for your reply.  please see attached.  I tried to maintain the
> : structure of the code that I need to use in the library I'm building.  I think
> : it should work for you as long as you remove the package declaration at the
> : top.
>
> I can't currently try your code, but skimming through it i'd bet money the
> problem is in your Analyzer.  Have you tried simplifying your test down
> and just using "StandardAnalyzer" to rule that out?
>
> In particular i see this...
>
>>>> Analyzer.TokenStreamComponents tsc = new Analyzer.TokenStreamComponents(
>>>>                        getCharTokenizer( reader )
>>>>                      , getTokenFilterChain( reader, config )
>>>>              );
> ...passing the same Reader to to diff methods there is almost certainly
> not what you want to do.
>
>
>
> -Hoss
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54649-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jan 10 03:15:13 2013
Return-Path: <java-user-return-54649-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 39B6A9257
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 10 Jan 2013 03:15:13 +0000 (UTC)
Received: (qmail 68465 invoked by uid 500); 10 Jan 2013 03:15:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68301 invoked by uid 500); 10 Jan 2013 03:15:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68283 invoked by uid 99); 10 Jan 2013 03:15:10 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Jan 2013 03:15:10 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.210.48] (HELO mail-da0-f48.google.com) (209.85.210.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Jan 2013 03:15:03 +0000
Received: by mail-da0-f48.google.com with SMTP id k18so40087dae.35
        for <java-user@lucene.apache.org>; Wed, 09 Jan 2013 19:14:42 -0800 (PST)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=x-received:message-id:date:from:user-agent:mime-version:to:subject
         :references:in-reply-to:content-type:content-transfer-encoding
         :x-gm-message-state;
        bh=pJBAFTvzDe2pKCu4iwzHLmXx5KYaPLhFdtbMwheZ8Tg=;
        b=krViz+qlqZXyhvC0XYi6ujh7L4FeSG3dwdf0v84bjevqd97iFJilEWRoTP5E/0JC4U
         ox6WK37daPNNtZOgYBlbpw1ALhdnSJ3jQiCTBrZHLocLvbFODLOjKd8mBPWfJmb8XUyA
         x3wYJL9Fni5sp5O0y0zV6zTVfj0qIRDnL3+eD5b7dQoE5JpnULLvdKik+K5W03N4ojDy
         BKvn6W84K7fHWR2SzhraHYXLnjE5/S6YtnDcru9tGH1gEWb4ZQHdOgW3tQDxtBxKzWyC
         hL6qXbDi0T3J1/xzOaTbw2atTsk4dd8d5G5IhOxxL/MlLE0h4lSnV5NZOnStR5I41TqP
         ObNg==
X-Received: by 10.66.88.198 with SMTP id bi6mr194867830pab.54.1357787682820;
        Wed, 09 Jan 2013 19:14:42 -0800 (PST)
Received: from [192.168.0.11] (cpe-98-145-203-109.socal.res.rr.com. [98.145.203.109])
        by mx.google.com with ESMTPS id is3sm118660pbc.6.2013.01.09.19.14.41
        (version=TLSv1 cipher=ECDHE-RSA-RC4-SHA bits=128/128);
        Wed, 09 Jan 2013 19:14:42 -0800 (PST)
Message-ID: <50EE3214.8030407@getrailo.org>
Date: Wed, 09 Jan 2013 19:14:28 -0800
From: "Igal @ getRailo.org" <igal@getrailo.org>
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:17.0) Gecko/17.0 Thunderbird/17.0
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: NPE when adding a Document to an IndexWriter
References: <50EE1110.7010900@getrailo.org> <alpine.DEB.2.02.1301091717130.28372@frisbee> <50EE2408.6050002@getrailo.org> <alpine.DEB.2.02.1301091822470.28372@frisbee> <50EE2D71.9060108@getrailo.org>
In-Reply-To: <50EE2D71.9060108@getrailo.org>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Gm-Message-State: ALoCoQlVY70zYJZJMJHrGVEwzag4zmt4f6mPzKLGFt1A7q9ENpfxYG0g7WQSAfE3nPz6B1E1Qx6w
X-Virus-Checked: Checked by ClamAV on apache.org

I think that all I needed to create the components is:


     @Override
     protected Analyzer.TokenStreamComponents createComponents( String 
fieldName, Reader reader ) {

         Analyzer.TokenStreamComponents tsc = new 
Analyzer.TokenStreamComponents(

               getTokenFilterChain( reader, config )
         );

         return tsc;
     }


I'll need to test it to know for sure though.

thanks,


Igal


On 1/9/2013 6:54 PM, Igal @ getRailo.org wrote:
> hi Hoss -- thank you for your time.  it looks like you're right (and 
> it makes sense if the reader is advanced in two places at the same 
> time that it will cause a problem).
>
> I'll try to figure out how to create an Analyzer out of the 
> Tokenizer.  that's what I was trying to do there and obviously I did 
> it wrong.
>
> thanks again,
>
>
> Igal
>
>
> On 1/9/2013 6:28 PM, Chris Hostetter wrote:
>> : thanks for your reply.  please see attached.  I tried to maintain the
>> : structure of the code that I need to use in the library I'm 
>> building.  I think
>> : it should work for you as long as you remove the package 
>> declaration at the
>> : top.
>>
>> I can't currently try your code, but skimming through it i'd bet 
>> money the
>> problem is in your Analyzer.  Have you tried simplifying your test down
>> and just using "StandardAnalyzer" to rule that out?
>>
>> In particular i see this...
>>
>>>>> Analyzer.TokenStreamComponents tsc = new 
>>>>> Analyzer.TokenStreamComponents(
>>>>>                        getCharTokenizer( reader )
>>>>>                      , getTokenFilterChain( reader, config )
>>>>>              );
>> ...passing the same Reader to to diff methods there is almost certainly
>> not what you want to do.
>>
>>
>>
>> -Hoss
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54650-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jan 10 05:16:47 2013
Return-Path: <java-user-return-54650-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 0ADC5E4EB
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 10 Jan 2013 05:16:47 +0000 (UTC)
Received: (qmail 36640 invoked by uid 500); 10 Jan 2013 05:16:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36275 invoked by uid 500); 10 Jan 2013 05:16:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36257 invoked by uid 99); 10 Jan 2013 05:16:43 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Jan 2013 05:16:43 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [98.138.91.153] (HELO nm23-vm3.bullet.mail.ne1.yahoo.com) (98.138.91.153)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Jan 2013 05:16:35 +0000
Received: from [98.138.90.51] by nm23.bullet.mail.ne1.yahoo.com with NNFMP; 10 Jan 2013 05:16:14 -0000
Received: from [98.138.89.251] by tm4.bullet.mail.ne1.yahoo.com with NNFMP; 10 Jan 2013 05:16:14 -0000
Received: from [127.0.0.1] by omp1043.mail.ne1.yahoo.com with NNFMP; 10 Jan 2013 05:16:14 -0000
X-Yahoo-Newman-Property: ymail-3
X-Yahoo-Newman-Id: 863303.98486.bm@omp1043.mail.ne1.yahoo.com
Received: (qmail 33812 invoked by uid 60001); 10 Jan 2013 05:16:14 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1357794974; bh=2zgQewBV8ktuAVVpbVIMeVyMpvcESQLSD1Jyxyuzq1E=; h=X-YMail-OSG:Received:X-Rocket-MIMEInfo:X-Mailer:Message-ID:Date:From:Subject:To:MIME-Version:Content-Type; b=vKBPrNtKY/WNsfcoiaQybrwLSVgVe0qU0qMgD/1qcmUYJTFNqiG75ujwGdH4cTDAhuOVB6HolCJHcl6CsM5JE6Yf/dAFw/HNzMGhu45npJHXzLS4BuLkJCkkQirUG3tNtfegyEtmzV6qOGk8pLc6yTpcMNo+uT6rEKmdSDqeGOM=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Rocket-MIMEInfo:X-Mailer:Message-ID:Date:From:Subject:To:MIME-Version:Content-Type;
  b=xibDh5WXseKEfUvwo1Z1Nky1qjcT9RcVf4/Hh1/HurLe7ry8C7DQUuDITbMnVY07cHykJ5mN5sG6fb5kst3v2otASKZqJWMJUTD14KpJte4BOxut8i6GLk1cigI/QULhH9eBqm19qouYA1zmBfoC4o0DM3s5fGH0VEidIeCRzuc=;
X-YMail-OSG: FMfsTpUVM1k3F5eTPXw8fV0dcvCEJgJnYDkt4MAqA3W.AOP
 VTRJMT7MCOfVDOArhHjAmGeCOlKWTqMd407Td7zk_2TeGp8SffXaYLR12O4U
 zeSVN9MUAfRbaJaZeSkaGdAeEaUtqUxPeFz1SuIator7yMqBfQTb3AgrYe1J
 4CvPPoRIIm7FlGTjFbysIpyxyCRDFY7CVQ4kD7cwVxFQ9S7EBPn1PBXJNDk6
 uh9KP2gMtdy2TvHq45BPIr41uPKV673q8P746gWtbOIS8xc9RP8U.algQgWI
 LQWBBL2S9Cr9rabXS6oGKnOeymcw7QLvG7G1.iXnNi9p0hR9_akaD4KWJb.f
 ypdeAS_LjHXPYeMjPwx.2xOtCyFt0d9bKYPqAXZ4mzqjmT7Prj8Lvx0LWRQJ
 O5qDY0ro6HWUzPA1C7sMSSot2KzqkID0uPyxMyCGDbUEBhJDmVPfyvrWNhlg
 CdHZ3XWB8_oMWs09v_Ju27Ry4bhBHZT2.2vXTPPewkZLv7DsJVw.LV5yIaoj
 4H.vF3xcHSmvC3sT8IPEGfDyKRl_x8L6SYF1slc_eiRQH9r9dveSR4aeRMEv
 yp6QyE7dpETQ8K93Qp9Dyeju68py34w--
Received: from [188.245.218.89] by web122205.mail.ne1.yahoo.com via HTTP; Wed, 09 Jan 2013 21:16:14 PST
X-Rocket-MIMEInfo: 001.001,Cmh0dHA6Ly9tYXJrZXRpbmdhb20uY29tL2Jpc2N1aXRjb29raW5nZGFuaWVseW91bmcvATABAQEB
X-Mailer: YahooMailWebService/0.8.130.494
Message-ID: <1357794974.33580.BPMail_high_noncarrier@web122205.mail.ne1.yahoo.com>
Date: Wed, 9 Jan 2013 21:16:14 -0800 (PST)
From: Maxim Terletsky <sxamt@yahoo.com>
Subject: Re:..
To: uri.landau@gmail.com, oleg.rozov@elbitsystems.com, tali@747.co.il,
  amikirshon@gmail.com, Misha@groupsecurity.net, peater@groupsecurity.net,
  java-user@lucene.apache.org, levanam@systematics.co.il, benbracha@gmail.com
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org


http://marketingaom.com/biscuitcookingdanielyoung/

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54651-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jan 10 09:48:44 2013
Return-Path: <java-user-return-54651-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id EA5B3E38C
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 10 Jan 2013 09:48:43 +0000 (UTC)
Received: (qmail 76877 invoked by uid 500); 10 Jan 2013 09:48:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76675 invoked by uid 500); 10 Jan 2013 09:48:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76643 invoked by uid 99); 10 Jan 2013 09:48:40 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Jan 2013 09:48:40 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ye.perio@gmail.com designates 209.85.214.52 as permitted sender)
Received: from [209.85.214.52] (HELO mail-bk0-f52.google.com) (209.85.214.52)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Jan 2013 09:48:33 +0000
Received: by mail-bk0-f52.google.com with SMTP id w5so161814bku.39
        for <java-user@lucene.apache.org>; Thu, 10 Jan 2013 01:48:12 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:from:date:message-id:subject:to:content-type;
        bh=CO9wt8PoL0q8UEIK7PRcjuutWHGvU8gDJD7fhT5ajFA=;
        b=WhRJRzc2Ajz1pHa2F/pBLjojPJXT1MHNC50TkpBOz7H8XI8BbUX6zQjNYaNx2QE9io
         IkLmSzOtY1gVwxico1zurURL5/2Wwc+1ebhKTernvRksrRCge9OQM9nsIemu3aUDxVyB
         DomxnEPT1NTwwn2HrM5xRs3saaZQiQLwpouRBjkHsYKdPHEiNQignnPFfb5aueZNQ/ht
         /Oq4LE4HTKN/XkkqGr5YsajyKWy3h2ISYsl6AhMqa0OdFqb+LjD6G06Dhg7HFVFN7kD6
         p6y9AfssvSBIzu/R8AQzlD8cnvTJvMU1+fooXDr/0X/98lxiadGVSvM7mccnuqa98WSr
         G6Pw==
Received: by 10.205.125.137 with SMTP id gs9mr34251453bkc.22.1357811292874;
 Thu, 10 Jan 2013 01:48:12 -0800 (PST)
MIME-Version: 1.0
Received: by 10.204.40.80 with HTTP; Thu, 10 Jan 2013 01:47:32 -0800 (PST)
From: Yann-Erwan Perio <ye.perio@gmail.com>
Date: Thu, 10 Jan 2013 10:47:32 +0100
Message-ID: <CABE9NZ56YE39MguDxue7_JD_Zu2CwegBM2iMU7UiN_QMvENFMA@mail.gmail.com>
Subject: CustomScoreQuery + Collector + Scoring
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

Hello,

I am using Lucene 4.0.0, trying to put together a CustomQuery and a
Collector, and have a problem with the calculation of scores.

My context is as follows. I have a big BooleanQuery which works fine,
but I also want to calculate some statistics during the search (i.e.
perform aggregation operations). To do so, I have tried to pass a
custom Collector to the searcher, in charge of retrieving data from
the matched documents (using FieldCache), and performing the
appropriate calculations. The whole thing works fine, the calculations
seem to be done properly (I have yet to test more accurately) :

---
IndexSearcher searcher = new IndexSearcher(reader);
searcher.search(query, collector);
---

Now, my Collector also collects a sample of the matched documents, in
order to display them. These documents are collected one after the
other, at each call of the collect() method, until the sample is
complete. What I would like is to have the documents sorted by their
score, and I also would like to calculate the score myself. In other
words, I want to make a sample of the "best" documents, while still
calculating statistics for all matched documents.

I am confused about how to do that. I have created a CustomQuery,
wrapping the source BooleanQuery, using a CustomScoreProvider.
However, when I execute the search upon this query, with the
collector, my log shows that the CustomScoreProvider is properly
instantiated, but that the customScore() method is never called.
Interestingly, if I execute the custom query without the collector,
retrieving some TopDocs object, then the customScore() is called.

What can I do? So far, my collector does not make use of the Scorer
passed to the setScorer() method - should I use it? I have tried the
simple scorer.score() call in the collector setScorer() method,
resulting in the customScore() method being called, but with no docID.

Thank you in advance for your insight.

Kind regards,
Yep.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54652-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jan 10 10:22:41 2013
Return-Path: <java-user-return-54652-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 9DA5BE4AF
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 10 Jan 2013 10:22:41 +0000 (UTC)
Received: (qmail 73066 invoked by uid 500); 10 Jan 2013 10:22:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72831 invoked by uid 500); 10 Jan 2013 10:22:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72802 invoked by uid 99); 10 Jan 2013 10:22:38 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Jan 2013 10:22:38 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of uwe@thetaphi.de designates 188.138.97.18 as permitted sender)
Received: from [188.138.97.18] (HELO mail.sd-datasolutions.de) (188.138.97.18)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Jan 2013 10:22:29 +0000
Received: from VEGA (gate1.marum.de [134.102.237.1])
	by mail.sd-datasolutions.de (Postfix) with ESMTPSA id 792FE14AA065
	for <java-user@lucene.apache.org>; Thu, 10 Jan 2013 10:22:08 +0000 (UTC)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <CABE9NZ56YE39MguDxue7_JD_Zu2CwegBM2iMU7UiN_QMvENFMA@mail.gmail.com>
In-Reply-To: <CABE9NZ56YE39MguDxue7_JD_Zu2CwegBM2iMU7UiN_QMvENFMA@mail.gmail.com>
Subject: RE: CustomScoreQuery + Collector + Scoring
Date: Thu, 10 Jan 2013 11:22:08 +0100
Message-ID: <019001cdef1c$58c8f4a0$0a5adde0$@thetaphi.de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="utf-8"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Outlook 14.0
Thread-Index: AQGPsKkWZRyG+M6bpBaTr8dT8KO1Mpi+1peQ
Content-Language: de
X-Virus-Checked: Checked by ClamAV on apache.org

> I am using Lucene 4.0.0, trying to put together a CustomQuery and a
> Collector, and have a problem with the calculation of scores.
>=20
> My context is as follows. I have a big BooleanQuery which works fine, =
but I
> also want to calculate some statistics during the search (i.e.
> perform aggregation operations). To do so, I have tried to pass a =
custom
> Collector to the searcher, in charge of retrieving data from the =
matched
> documents (using FieldCache), and performing the appropriate =
calculations.
> The whole thing works fine, the calculations seem to be done properly =
(I
> have yet to test more accurately) :
>=20
> ---
> IndexSearcher searcher =3D new IndexSearcher(reader);
> searcher.search(query, collector);
> ---
>=20
> Now, my Collector also collects a sample of the matched documents, in =
order
> to display them. These documents are collected one after the other, at =
each
> call of the collect() method, until the sample is complete. What I =
would like is
> to have the documents sorted by their score, and I also would like to
> calculate the score myself. In other words, I want to make a sample of =
the
> "best" documents, while still calculating statistics for all matched =
documents.

The best way to do this ist o wrap the standard Lucene =
TopScoreDocCollector by your own collector (passing all calls to the =
collector also down to the top-docs collector). Then you don't have to =
take care of sorting the results, you collector just does statistics.

> I am confused about how to do that. I have created a CustomQuery,
> wrapping the source BooleanQuery, using a CustomScoreProvider.
> However, when I execute the search upon this query, with the =
collector, my
> log shows that the CustomScoreProvider is properly instantiated, but =
that
> the customScore() method is never called.
> Interestingly, if I execute the custom query without the collector, =
retrieving
> some TopDocs object, then the customScore() is called.

If the collector does not use the score it is not calculated, so the =
provider is not called.

> What can I do? So far, my collector does not make use of the Scorer =
passed
> to the setScorer() method - should I use it? I have tried the simple
> scorer.score() call in the collector setScorer() method, resulting in =
the
> customScore() method being called, but with no docID.

It gets the doc id, for sure.

> Thank you in advance for your insight.
>=20
> Kind regards,
> Yep.
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54653-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jan 10 12:05:03 2013
Return-Path: <java-user-return-54653-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 6B89CE546
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 10 Jan 2013 12:05:03 +0000 (UTC)
Received: (qmail 59277 invoked by uid 500); 10 Jan 2013 12:05:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59031 invoked by uid 500); 10 Jan 2013 12:05:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59007 invoked by uid 99); 10 Jan 2013 12:05:00 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Jan 2013 12:05:00 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ye.perio@gmail.com designates 209.85.214.51 as permitted sender)
Received: from [209.85.214.51] (HELO mail-bk0-f51.google.com) (209.85.214.51)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Jan 2013 12:04:55 +0000
Received: by mail-bk0-f51.google.com with SMTP id ik5so245843bkc.38
        for <java-user@lucene.apache.org>; Thu, 10 Jan 2013 04:04:34 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        bh=nLwQREqqSl90NVgDFrYwQEUsJWZji6StxiyLE7zalG0=;
        b=FeQBUOpjBwYfSXO/R41CwSmGAXaTmeipCsUcKOZ10y3P4Jq5RwdEDdDH/e9bdh7Uj/
         kfiy7qSFyFK+Tzo5iEnXNHTuckbEaEXpkGWiBK0g9dtvEhK9k+fWt4YFvcg5NVLw70li
         wCTthcDwdUur15fKqK744sxfyY71EMkW1fiLlq9xuS5fZPmyHbr7W+SIajwmGrpiomqu
         0sSRtI79rehbwryVgY+jDpByBFD7FoI+63UogROYPeZjm1r3Tk7J22Hpsns/C1LOCDYC
         k/whu84vapbiRQOKtqdRja44Uln0NEoWKIioMkKL7m1pkVXdSTA+yeA30Gx+BbEHul/J
         Gf4A==
Received: by 10.204.149.149 with SMTP id t21mr34315065bkv.85.1357819474140;
 Thu, 10 Jan 2013 04:04:34 -0800 (PST)
MIME-Version: 1.0
Received: by 10.204.40.80 with HTTP; Thu, 10 Jan 2013 04:03:53 -0800 (PST)
In-Reply-To: <019001cdef1c$58c8f4a0$0a5adde0$@thetaphi.de>
References: <CABE9NZ56YE39MguDxue7_JD_Zu2CwegBM2iMU7UiN_QMvENFMA@mail.gmail.com>
 <019001cdef1c$58c8f4a0$0a5adde0$@thetaphi.de>
From: Yann-Erwan Perio <ye.perio@gmail.com>
Date: Thu, 10 Jan 2013 13:03:53 +0100
Message-ID: <CABE9NZ7=SJLGaE+DJSPHH3KeNui9PfkB=m+W7zCOdcdRPiP_pQ@mail.gmail.com>
Subject: Re: CustomScoreQuery + Collector + Scoring
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

On Thu, Jan 10, 2013 at 11:22 AM, Uwe Schindler <uwe@thetaphi.de> wrote:

Hi Uwe,

> The best way to do this ist o wrap the standard Lucene
> TopScoreDocCollector by your own collector (passing all
> calls to the collector also down to the top-docs collector).
> Then you don't have to take care of sorting the results, you
>  collector just does statistics.

This worked like a charm, and the resulting code is even neater - thanks a lot.

Kind regards,
Yep.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54654-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jan 10 12:09:15 2013
Return-Path: <java-user-return-54654-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 73BE4E571
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 10 Jan 2013 12:09:15 +0000 (UTC)
Received: (qmail 78475 invoked by uid 500); 10 Jan 2013 12:09:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78158 invoked by uid 500); 10 Jan 2013 12:09:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78146 invoked by uid 99); 10 Jan 2013 12:09:13 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Jan 2013 12:09:12 +0000
X-ASF-Spam-Status: No, hits=1.7 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of gksrb92@gmail.com designates 209.85.220.177 as permitted sender)
Received: from [209.85.220.177] (HELO mail-vc0-f177.google.com) (209.85.220.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Jan 2013 12:09:05 +0000
Received: by mail-vc0-f177.google.com with SMTP id m8so394366vcd.8
        for <java-user@lucene.apache.org>; Thu, 10 Jan 2013 04:08:44 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:date:message-id:subject:from:to:content-type;
        bh=EgdamAQ+c6rmPKBYQJceZuyttF6KjEIYQsBS4X7JGl8=;
        b=F02I0xUuFkratyhcSU0jizZlIBVYP7GeusaRZm7caImS3iXUEk6/fPY9eV+xNslvMJ
         3+QSK7oTabMIWb6MNck0Sf2LV9wWEWwvyjuEbH0bUt8SzNwbOV1l4vPNhf5yXO88zbdf
         LO6v5H8mVxFBq7NHmgCQrwpXWx7aPi5Ur3Wm16vM9mcx306eh+eYK6LuIsXZvNmYiBpy
         uO16S8IXtQLBBf5rGzA2DILjLIc/gbjrSKlkprC8OEJ9JCt1raA6cxEA66Yqd7xOKPwy
         lsi0uDGTIffvrDDVUQ11n8vlAp4mqbYRFiBsURyOCQV+jWHtBcgIbFiQ2Kmle79S6DVv
         uXFA==
MIME-Version: 1.0
Received: by 10.52.98.134 with SMTP id ei6mr78836467vdb.114.1357819724537;
 Thu, 10 Jan 2013 04:08:44 -0800 (PST)
Received: by 10.52.92.234 with HTTP; Thu, 10 Jan 2013 04:08:44 -0800 (PST)
Date: Thu, 10 Jan 2013 14:08:44 +0200
Message-ID: <CAOZ_vPYod8eWo0VwDtYvJoPBooOPuWp+Kv7=pRB6Vpd+o01_Xw@mail.gmail.com>
Subject: Query beginning with special characters
From: Hankyu Kim <gksrb92@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=20cf307d042659a07b04d2ee0abd
X-Virus-Checked: Checked by ClamAV on apache.org

--20cf307d042659a07b04d2ee0abd
Content-Type: text/plain; charset=ISO-8859-1

Hi.

I've created a custom analyzer that treats special characters just like any
other. The index works fine all the time even when the query includes
special characters, except when the special characters come to the begining
of the query.

I'm using spanTermQuery and wildCardQuery, and they both seem to suffer the
same issue with queries begining with special characters. Is it a
limitation of Lucene or am I missing something?

Thanks

--20cf307d042659a07b04d2ee0abd--

From java-user-return-54655-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jan 10 12:09:46 2013
Return-Path: <java-user-return-54655-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id D633FE577
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 10 Jan 2013 12:09:46 +0000 (UTC)
Received: (qmail 81812 invoked by uid 500); 10 Jan 2013 12:09:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81764 invoked by uid 500); 10 Jan 2013 12:09:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 44754 invoked by uid 99); 10 Jan 2013 11:59:03 -0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of valmirdoniku@gmail.com designates 209.85.210.170 as permitted sender)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:date:message-id:subject:from:to:content-type;
        bh=IabnRw3iR9Lx3bd99gWe1zo0RIKT8kWreyOTCmtsiqo=;
        b=poU0OqNX7CxvVgQzc2IZeEMwV3jIrVY1NwYmODWGXE5OT9ojbJ9W3jb/ElaEhGCN+6
         ttllziS2UaJkRbdEBSRsHXCVAjE0Z/WNN8310Qx3laZuk8p8Iu7+RkNaT8ikZTUvlnc9
         lFddcX/+kCiOvN0QVq1Vf4eQtUKWnOU3rWMGHefQ+jysKwAkNIMeTAmVsWeamzq9iD4C
         dWwIScKDw1YdhHE5x0ykk7mHtcSriIatRH05kbF9qUmOje4UVQ0cfasdkor02wsR7zbo
         3zMMlEGBp4Ib1KtohD8+feY6d5h1ixmGD5ovm+3Qs9MNM/un7V6UjIl5UyX+O+85iVQV
         digg==
MIME-Version: 1.0
Date: Thu, 10 Jan 2013 12:58:29 +0100
Message-ID: <CAOh8ic-8p_D1BSfLujbRonT1BGyzAo7EYEuDyGRUS_ce2nggFg@mail.gmail.com>
Subject: Indexing your documents with Lucene!
From: Valmir Doniku <valmirdoniku@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=e89a8f235a17b9106004d2ede53d
X-Virus-Checked: Checked by ClamAV on apache.org

--e89a8f235a17b9106004d2ede53d
Content-Type: text/plain; charset=ISO-8859-1

I'm a student of computer engineering and I saw that you are dealing with
lucene.I'm newer with lucene. If you can help me with lucene, for:

1. Create the index
2. Search the index
3. Update the index
4. Delete the index

I'm working with eclipse/java (lucene 4.0) and I try some examples with but
they didn't work very well.
Please if you can help I'll be very grateful!
Thank you a lot for your time!

--e89a8f235a17b9106004d2ede53d--

From java-user-return-54656-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jan 10 12:26:44 2013
Return-Path: <java-user-return-54656-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 1CB4EE2CA
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 10 Jan 2013 12:26:44 +0000 (UTC)
Received: (qmail 45005 invoked by uid 500); 10 Jan 2013 12:26:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44661 invoked by uid 500); 10 Jan 2013 12:26:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44635 invoked by uid 99); 10 Jan 2013 12:26:40 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Jan 2013 12:26:40 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 74.125.82.178 as permitted sender)
Received: from [74.125.82.178] (HELO mail-we0-f178.google.com) (74.125.82.178)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Jan 2013 12:26:35 +0000
Received: by mail-we0-f178.google.com with SMTP id x43so215885wey.23
        for <java-user@lucene.apache.org>; Thu, 10 Jan 2013 04:26:14 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=x-received:mime-version:in-reply-to:references:from:date:message-id
         :subject:to:content-type;
        bh=HCOo7Yc/QErYcm6C0U3fxhRF5+R5UkJI6EpkM3zu6oI=;
        b=ellB+gxGWC+Rt3YRr8ZzJd9tq3pHsYHWK4V0R/ngtN7aOm+yIX/z870MzCIlOoZV1m
         0GD3cq2yL/EXXGvhAmCrwwn0T9fmmI66r5+CM2BiAfWWOKcVi3rSebOv+ABUyAZfF6DD
         URAjM0wwc/JhdBgY43O+WX7cdbfLW5XKyQnz1IS2zmEyGfMNZ77fuuDJIx4LiLQeb7lX
         UORrdCL73kFBx07Xo8/5/ORZWcVSgdQ+BLe4rbDkunHWQv//TAGEjDbnPV+Ml73IHm0T
         7DIVNno2RcB8/OrQHiE2S0ZwBRXWlxgqVMgJ9mnLeC+wyKKSKeuUNNgjcKMJQqy/kpb3
         RIFA==
X-Received: by 10.180.101.104 with SMTP id ff8mr8947909wib.11.1357820774567;
 Thu, 10 Jan 2013 04:26:14 -0800 (PST)
MIME-Version: 1.0
Received: by 10.194.57.11 with HTTP; Thu, 10 Jan 2013 04:25:54 -0800 (PST)
In-Reply-To: <CAOh8ic-8p_D1BSfLujbRonT1BGyzAo7EYEuDyGRUS_ce2nggFg@mail.gmail.com>
References: <CAOh8ic-8p_D1BSfLujbRonT1BGyzAo7EYEuDyGRUS_ce2nggFg@mail.gmail.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Thu, 10 Jan 2013 12:25:54 +0000
Message-ID: <CAEY5pxVeF_z-nZ1HK9MF26TOmU_jfG21kAK=W1r1rJ7drB997Q@mail.gmail.com>
Subject: Re: Indexing your documents with Lucene!
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

rm -rf works well for number 4.  For the others use your favourite
search engine with queries like "lucene tutorial" or "lucene getting
started".  Or start with these:

http://lucene.apache.org/core/quickstart.html

http://www.lucenetutorial.com/lucene-in-5-minutes.html


Good luck.


--
Ian.


On Thu, Jan 10, 2013 at 11:58 AM, Valmir Doniku <valmirdoniku@gmail.com> wrote:
> I'm a student of computer engineering and I saw that you are dealing with
> lucene.I'm newer with lucene. If you can help me with lucene, for:
>
> 1. Create the index
> 2. Search the index
> 3. Update the index
> 4. Delete the index
>
> I'm working with eclipse/java (lucene 4.0) and I try some examples with but
> they didn't work very well.
> Please if you can help I'll be very grateful!
> Thank you a lot for your time!

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54657-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jan 10 12:35:42 2013
Return-Path: <java-user-return-54657-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 4DAEAE3C5
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 10 Jan 2013 12:35:42 +0000 (UTC)
Received: (qmail 75865 invoked by uid 500); 10 Jan 2013 12:35:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75651 invoked by uid 500); 10 Jan 2013 12:35:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75628 invoked by uid 99); 10 Jan 2013 12:35:39 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Jan 2013 12:35:39 +0000
X-ASF-Spam-Status: No, hits=0.6 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 209.85.212.171 as permitted sender)
Received: from [209.85.212.171] (HELO mail-wi0-f171.google.com) (209.85.212.171)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Jan 2013 12:35:34 +0000
Received: by mail-wi0-f171.google.com with SMTP id hn14so1187962wib.16
        for <java-user@lucene.apache.org>; Thu, 10 Jan 2013 04:35:13 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        bh=UzxB/CE0axM9kq0S5Ee5dVc0IYa/4MwX6mVPME6I+pE=;
        b=uXQwPCaRcQMIzapR1eB3/XjjHAkXgnDFi8VLdHIsxc693/aAePLTelXWUBG9zyoBox
         BMs+y7VzpBuSp3r0pScwDAfjxFIfr4Py6sBknFG26qbhhbxT0MKiu3fFVaTMBOUQpZQv
         W2tLX5A3rGCyxkLxHXAGgWCMIqLbkoZLUBlAsFcIe0YQq8mdyIaDFO8nbbHWCLjfcGoh
         Lj1yHq3FA27x/mkV1MyWFRqcHOH8WOM/GzbCpJMro7cQPAdmW3/5IgzGifLnRtFM1kc6
         iv8ZVrHuVQObxzF28pcWrbKVDGcSVi3MNGx2D9qJe12g5ajG4z2jPYP7qeWXsVW/OQcE
         dJcA==
Received: by 10.194.108.101 with SMTP id hj5mr16733404wjb.6.1357821313167;
 Thu, 10 Jan 2013 04:35:13 -0800 (PST)
MIME-Version: 1.0
Received: by 10.194.57.11 with HTTP; Thu, 10 Jan 2013 04:34:38 -0800 (PST)
In-Reply-To: <0bw9djrwwb778m35t4b7net4.1357734553072@email.android.com>
References: <0bw9djrwwb778m35t4b7net4.1357734553072@email.android.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Thu, 10 Jan 2013 12:34:38 +0000
Message-ID: <CAEY5pxWu84Ct57JrGcQ-CymPYxJFCOcYOihvzuP0YFQHvX-B+g@mail.gmail.com>
Subject: Re: how much blocksize is set in lucene.
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Not a clue and I don't recall ever seeing anything on this list about
disk block sizes etc.

General advice on disks for lucene is the faster the better.  SSDs are
reputably excellent and recommended.

Other than that I stick with my original advice: A good general
principle is to start with the defaults and only worry if there is a
problem.


--
Ian.


On Wed, Jan 9, 2013 at 12:29 PM, hujing <huj.nju@gmail.com> wrote:
> The  index lib must be saved in the harddisk.  when harddisk can not save=
 a large size index lib, we will use  disk array.   the disk array must set=
 stripe size.  so   i want to know=EF=BC=8Cwhen index lib saved in the disk=
 array =EF=BC=8Cwhich stripe size will be set.  when   index saved in the f=
ile sytem=EF=BC=8C  how much block size will be set=EF=BC=9F
> Sent from Huawei Mobile
>
> Ian Lea <ian.lea@gmail.com>=E7=BC=96=E5=86=99=EF=BC=9A
>
>>What do you mean by lucene blocksize?  What version of lucene are you usi=
ng?
>>
>>A good general principle is to start with the defaults and only worry
>>if there is a problem.
>>
>>
>>--
>>Ian.
>>
>>
>>On Wed, Jan 9, 2013 at 8:51 AM, seacathello <huj.nju@gmail.com> wrote:
>>> now i index very many email file, aboule 50m and every email file size =
about
>>> 4-50k.
>>> the index lib size is aboule 1TB, segment size is only.
>>>
>>> In this index lib, which blocksize should i shoose?
>>> 4k or 512k, which choice is better?
>>> Thanks very much?
>>>
>>>
>>>
>>> --
>>> View this message in context: http://lucene.472066.n3.nabble.com/how-mu=
ch-blocksize-is-set-in-lucene-tp4031796.html
>>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>
>>---------------------------------------------------------------------
>>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>For additional commands, e-mail: java-user-help@lucene.apache.org
>>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54658-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jan 10 13:15:30 2013
Return-Path: <java-user-return-54658-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id C9B51E52C
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 10 Jan 2013 13:15:30 +0000 (UTC)
Received: (qmail 5267 invoked by uid 500); 10 Jan 2013 13:15:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5213 invoked by uid 500); 10 Jan 2013 13:15:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5205 invoked by uid 99); 10 Jan 2013 13:15:28 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Jan 2013 13:15:28 +0000
X-ASF-Spam-Status: No, hits=2.3 required=5.0
	tests=FROM_12LTRDOM,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [80.169.233.11] (HELO mailbck.lombardodier.ch) (80.169.233.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Jan 2013 13:15:22 +0000
To: java-user@lucene.apache.org
Subject: recover corrupted index
MIME-Version: 1.0
X-KeepSent: 1042A502:B84C5CC9-C1257AEF:0048BD9E;
 type=4; flags=0; name=$KeepSent
From: v.sevel@lombardodier.com
X-SendAsMailing: 0
Message-ID: <OF1042A502.B84C5CC9-ONC1257AEF.0048BD9E-C1257AEF.0048C5D5@biz.lodh.com>
Date: Thu, 10 Jan 2013 14:14:52 +0100
Content-Type: multipart/alternative; boundary="=_alternative 0048C5D4C1257AEF_="
X-Virus-Checked: Checked by ClamAV on apache.org

--=_alternative 0048C5D4C1257AEF_=
Content-Type: text/plain; charset="US-ASCII"

Hi,

I have an index, for which I am missing at least 1 file after hitting a 
disk full situation.

is there any way I could bypass the error I get when trying to open the 
index, to salvage as many docs as I can from the other files?
thanks,
vince


java.io.FileNotFoundException: D:\_2c9kgw.cfs (The system cannot find the 
file specified)
        at java.io.RandomAccessFile.open(Native Method)
        at java.io.RandomAccessFile.<init>(RandomAccessFile.java:212)
        at 
org.apache.lucene.store.SimpleFSDirectory$SimpleFSIndexInput$Descriptor.<init>(SimpleFSDirectory.java:71)
        at 
org.apache.lucene.store.SimpleFSDirectory$SimpleFSIndexInput.<init>(SimpleFSDirectory.java:98)
        at 
org.apache.lucene.store.SimpleFSDirectory.openInput(SimpleFSDirectory.java:58)
        at 
org.apache.lucene.index.CompoundFileReader.<init>(CompoundFileReader.java:65)
        at 
org.apache.lucene.index.SegmentCoreReaders.<init>(SegmentCoreReaders.java:75)
        at 
org.apache.lucene.index.SegmentReader.get(SegmentReader.java:116)
        at 
org.apache.lucene.index.SegmentReader.get(SegmentReader.java:94)
        at 
org.apache.lucene.index.DirectoryReader.<init>(DirectoryReader.java:105)
        at 
org.apache.lucene.index.ReadOnlyDirectoryReader.<init>(ReadOnlyDirectoryReader.java:27)
        at 
org.apache.lucene.index.DirectoryReader$1.doBody(DirectoryReader.java:78)
        at 
org.apache.lucene.index.SegmentInfos$FindSegmentsFile.run(SegmentInfos.java:709)
        at 
org.apache.lucene.index.DirectoryReader.open(DirectoryReader.java:72)
        at org.apache.lucene.index.IndexReader.open(IndexReader.java:256)




************************ DISCLAIMER ************************
This message is intended only for use by the person to
whom it is addressed. It may contain information that is
privileged and confidential. Its content does not
constitute a formal commitment by Lombard Odier & Cie
or any of its branches or affiliates.
If you are not the intended recipient of this message,
kindly notify the sender immediately and destroy this
message. Thank You.
*****************************************************************

--=_alternative 0048C5D4C1257AEF_=--

From java-user-return-54659-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jan 10 13:18:05 2013
Return-Path: <java-user-return-54659-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 8F3C9E547
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 10 Jan 2013 13:18:05 +0000 (UTC)
Received: (qmail 13749 invoked by uid 500); 10 Jan 2013 13:18:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13678 invoked by uid 500); 10 Jan 2013 13:18:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13668 invoked by uid 99); 10 Jan 2013 13:18:03 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Jan 2013 13:18:03 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [89.161.223.23] (HELO v044473.home.net.pl) (89.161.223.23)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 10 Jan 2013 13:17:56 +0000
Received: from 078088007253.bialystok.vectranet.pl [78.88.7.253] (HELO [192.168.1.10])
 by alud.home.pl [89.161.223.23] with SMTP (IdeaSmtpServer v0.80)
 id e7a1b98b12815d45; Thu, 10 Jan 2013 14:17:34 +0100
Date: Thu, 10 Jan 2013 14:17:31 +0100
From: =?utf-8?Q?Rafa=C5=82_Ku=C4=87?= <r.kuc@solr.pl>
X-Priority: 3 (Normal)
Message-ID: <1432846534.20130110141731@alud.com.pl>
To: java-user@lucene.apache.org
Subject: Re: recover corrupted index
In-Reply-To: <OF1042A502.B84C5CC9-ONC1257AEF.0048BD9E-C1257AEF.0048C5D5@biz.lodh.com>
References: <OF1042A502.B84C5CC9-ONC1257AEF.0048BD9E-C1257AEF.0048C5D5@biz.lodh.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Hello!

Try using CheckIndex - http://lucene.apache.org/core/old_versioned_docs/ver=
sions/3_0_0/api/all/org/apache/lucene/index/CheckIndex.html

--=20
Regards,
 Rafa=C5=82 Ku=C4=87
 Sematext :: http://sematext.com/ :: Solr - Lucene - Nutch

> Hi,

> I have an index, for which I am missing at least 1 file after hitting a
> disk full situation.

> is there any way I could bypass the error I get when trying to open the
> index, to salvage as many docs as I can from the other files?
> thanks,
> vince


> java.io.FileNotFoundException: D:\_2c9kgw.cfs (The system cannot find the
> file specified)
>         at java.io.RandomAccessFile.open(Native Method)
>         at java.io.RandomAccessFile.<init>(RandomAccessFile.java:212)
>         at=20
> org.apache.lucene.store.SimpleFSDirectory$SimpleFSIndexInput$Descriptor.<=
init>(SimpleFSDirectory.java:71)
>         at=20
> org.apache.lucene.store.SimpleFSDirectory$SimpleFSIndexInput.<init>(Simpl=
eFSDirectory.java:98)
>         at=20
> org.apache.lucene.store.SimpleFSDirectory.openInput(SimpleFSDirectory.jav=
a:58)
>         at=20
> org.apache.lucene.index.CompoundFileReader.<init>(CompoundFileReader.java=
:65)
>         at=20
> org.apache.lucene.index.SegmentCoreReaders.<init>(SegmentCoreReaders.java=
:75)
>         at=20
> org.apache.lucene.index.SegmentReader.get(SegmentReader.java:116)
>         at=20
> org.apache.lucene.index.SegmentReader.get(SegmentReader.java:94)
>         at=20
> org.apache.lucene.index.DirectoryReader.<init>(DirectoryReader.java:105)
>         at=20
> org.apache.lucene.index.ReadOnlyDirectoryReader.<init>(ReadOnlyDirectoryR=
eader.java:27)
>         at=20
> org.apache.lucene.index.DirectoryReader$1.doBody(DirectoryReader.java:78)
>         at=20
> org.apache.lucene.index.SegmentInfos$FindSegmentsFile.run(SegmentInfos.ja=
va:709)
>         at=20
> org.apache.lucene.index.DirectoryReader.open(DirectoryReader.java:72)
>         at
> org.apache.lucene.index.IndexReader.open(IndexReader.java:256)




> ************************ DISCLAIMER ************************
> This message is intended only for use by the person to
> whom it is addressed. It may contain information that is
> privileged and confidential. Its content does not
> constitute a formal commitment by Lombard Odier & Cie
> or any of its branches or affiliates.
> If you are not the intended recipient of this message,
> kindly notify the sender immediately and destroy this
> message. Thank You.
> *****************************************************************


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54660-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jan 10 13:19:04 2013
Return-Path: <java-user-return-54660-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 82475E554
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 10 Jan 2013 13:19:04 +0000 (UTC)
Received: (qmail 19814 invoked by uid 500); 10 Jan 2013 13:19:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19763 invoked by uid 500); 10 Jan 2013 13:19:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19754 invoked by uid 99); 10 Jan 2013 13:19:02 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Jan 2013 13:19:02 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [89.161.223.23] (HELO v044473.home.net.pl) (89.161.223.23)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 10 Jan 2013 13:18:55 +0000
Received: from 078088007253.bialystok.vectranet.pl [78.88.7.253] (HELO [192.168.1.10])
 by alud.home.pl [89.161.223.23] with SMTP (IdeaSmtpServer v0.80)
 id 74825a7e52e63242; Thu, 10 Jan 2013 14:18:34 +0100
Date: Thu, 10 Jan 2013 14:18:32 +0100
From: =?utf-8?Q?Rafa=C5=82_Ku=C4=87?= <r.kuc@solr.pl>
X-Priority: 3 (Normal)
Message-ID: <10510144895.20130110141832@alud.com.pl>
To: java-user@lucene.apache.org
Subject: Re: recover corrupted index
In-Reply-To: <1432846534.20130110141731@alud.com.pl>
References: <OF1042A502.B84C5CC9-ONC1257AEF.0048BD9E-C1257AEF.0048C5D5@biz.lodh.com> <1432846534.20130110141731@alud.com.pl>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Hello!

Just one thing - backup your index first, just in case.=20

--=20
Regards,
 Rafa=C5=82 Ku=C4=87
 Sematext :: http://sematext.com/ :: Solr - Lucene - Nutch

> Hello!

> Try using CheckIndex -
> http://lucene.apache.org/core/old_versioned_docs/versions/3_0_0/api/all/o=
rg/apache/lucene/index/CheckIndex.html


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54661-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jan 10 19:20:21 2013
Return-Path: <java-user-return-54661-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 827C7EC2A
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 10 Jan 2013 19:20:21 +0000 (UTC)
Received: (qmail 11660 invoked by uid 500); 10 Jan 2013 19:20:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11587 invoked by uid 500); 10 Jan 2013 19:20:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11579 invoked by uid 99); 10 Jan 2013 19:20:19 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Jan 2013 19:20:19 +0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,SPF_NEUTRAL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: 216.139.236.26 is neither permitted nor denied by domain of saisantoshi76@gmail.com)
Received: from [216.139.236.26] (HELO sam.nabble.com) (216.139.236.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Jan 2013 19:20:14 +0000
Received: from ben.nabble.com ([192.168.236.152])
	by sam.nabble.com with esmtp (Exim 4.72)
	(envelope-from <saisantoshi76@gmail.com>)
	id 1TtNfN-0004q6-HN
	for java-user@lucene.apache.org; Thu, 10 Jan 2013 11:19:53 -0800
Date: Thu, 10 Jan 2013 11:19:53 -0800 (PST)
From: saisantoshi <saisantoshi76@gmail.com>
To: java-user@lucene.apache.org
Message-ID: <1357845593524-4032290.post@n3.nabble.com>
Subject: StandardAnalyzer: Support for Japanese
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

We are using StandardAnalyzer for indexing some Japanese Keywords. It works
fine so far but just wanted to confirm if the StandardAnalyzer can fully
support it ( I have read somewhere in Lucene In Action book, that
StandardAnalyzer does support CJK). Just want to confirm if my understanding
is correct? or do we need to use a specific analyzer for processing Japanese
Keywords.

Alternatively, is there a stop words list for Japanese Language so that we
can add an extra filter to the Standard Analyzer.

Any thoughts on this is much appreciated.

Thanks,
Sai.



--
View this message in context: http://lucene.472066.n3.nabble.com/StandardAnalyzer-Support-for-Japanese-tp4032290.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54662-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jan 10 20:15:29 2013
Return-Path: <java-user-return-54662-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id A6AC5EDE9
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 10 Jan 2013 20:15:29 +0000 (UTC)
Received: (qmail 65971 invoked by uid 500); 10 Jan 2013 20:15:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65899 invoked by uid 500); 10 Jan 2013 20:15:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65888 invoked by uid 99); 10 Jan 2013 20:15:27 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Jan 2013 20:15:27 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.160.43] (HELO mail-pb0-f43.google.com) (209.85.160.43)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Jan 2013 20:15:19 +0000
Received: by mail-pb0-f43.google.com with SMTP id um15so504536pbc.30
        for <java-user@lucene.apache.org>; Thu, 10 Jan 2013 12:14:56 -0800 (PST)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=x-received:message-id:date:from:user-agent:mime-version:to:subject
         :content-type:content-transfer-encoding:x-gm-message-state;
        bh=e5HIUopWEwl3a+poHAx3wyUsxTpDXL5Kn12+uz1R/qM=;
        b=RJ0rMiuBYcXbwvGN6X/Nx2o3DmyvFczbFMHKzIcjmSDBO75vw8mG/FicGh26mR75xr
         nHbkT9zYJ+5VLBvUbz7E6gPeLrR7n3DKE1YJNcrjqDXElb8fVa5ka3DjVcisq2EZQNGa
         fx4N7UuM/Zat/tfSRdlOVKRuhyeOSNdUKUYBpibnELGIN+8ubrcj2omsuHLGu/pYNrM2
         6arUfNvGgv7T4omgZbfQaqcnljP+IuN0OxRn0PcAsmLjzd/RFm5n6MTAj6gcXwPU3Ux2
         0G8LEzTC7u88VvDTG6ZO+GbIdl+XZ0jrwo83lY0Ds0CnZ9+9GkmhVL6buf1XrH3MawNg
         Gt+A==
X-Received: by 10.68.192.97 with SMTP id hf1mr221203562pbc.106.1357848896608;
        Thu, 10 Jan 2013 12:14:56 -0800 (PST)
Received: from [192.168.0.11] (cpe-98-145-203-109.socal.res.rr.com. [98.145.203.109])
        by mx.google.com with ESMTPS id oi3sm1334959pbb.1.2013.01.10.12.14.54
        (version=TLSv1 cipher=ECDHE-RSA-RC4-SHA bits=128/128);
        Thu, 10 Jan 2013 12:14:55 -0800 (PST)
Message-ID: <50EF2130.2@getrailo.org>
Date: Thu, 10 Jan 2013 12:14:40 -0800
From: "Igal @ getRailo.org" <igal@getrailo.org>
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:17.0) Gecko/17.0 Thunderbird/17.0
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: getting the token position
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Gm-Message-State: ALoCoQkoq6PWRgHYuekrOEKkImaTvMup8bC2ODBMflZrbyQCNodmyYyc5lKjTrMaFxG6Mm/xmdSb
X-Virus-Checked: Checked by ClamAV on apache.org

hi all,

how can I get the Token's Position from the TokenStream / Tokenizer / 
Analyzer ?  I know that there's a TokenPositionIncrement Attribute and a 
TokenPositionLength Attribute, but is there an easy way to get the token 
position or do I need to implement my own attribute by adding one of the 
attributes mentioned above?

the reason I need it is that I wrote an implementation of a 
ShingleFilter which breaks shingles at punctuations so the tokens [token 
number one, word two] will create the shingles [ "token number", "number 
one", "word two" ] -- but Not [ "one word" ] because of the comma.  I 
want it to break shingles at increment gaps as well.

thanks,


Igal


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54663-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jan 10 23:17:02 2013
Return-Path: <java-user-return-54663-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id C856EE30E
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 10 Jan 2013 23:17:01 +0000 (UTC)
Received: (qmail 60471 invoked by uid 500); 10 Jan 2013 23:16:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60385 invoked by uid 500); 10 Jan 2013 23:16:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60370 invoked by uid 99); 10 Jan 2013 23:16:59 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Jan 2013 23:16:59 +0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,SPF_NEUTRAL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: 216.139.236.26 is neither permitted nor denied by domain of saisantoshi76@gmail.com)
Received: from [216.139.236.26] (HELO sam.nabble.com) (216.139.236.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Jan 2013 23:16:53 +0000
Received: from ben.nabble.com ([192.168.236.152])
	by sam.nabble.com with esmtp (Exim 4.72)
	(envelope-from <saisantoshi76@gmail.com>)
	id 1TtRMO-0002lV-Q1
	for java-user@lucene.apache.org; Thu, 10 Jan 2013 15:16:32 -0800
Date: Thu, 10 Jan 2013 15:16:32 -0800 (PST)
From: saisantoshi <saisantoshi76@gmail.com>
To: java-user@lucene.apache.org
Message-ID: <1357859792791-4032374.post@n3.nabble.com>
Subject: Field.Store.YES vs Field.Store.NO
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

I am new to lucene and am trying to understand what is the impact on the
search in using Field.Store.NO vs Field.Store.YES. I know the earlier does
not store the value in the index and later stores it in the index.  Would
that mean that the one that uses Field.Store.NO is not searchable?

new Field("keyword", value, Field.Store.NO, Field.Index.ANALYZED)

vs

new Field("keyword", value, Field.Store.YES, Field.Index.ANALYZED)

Thanks,
Sai.



--
View this message in context: http://lucene.472066.n3.nabble.com/Field-Store-YES-vs-Field-Store-NO-tp4032374.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54664-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jan 10 23:53:45 2013
Return-Path: <java-user-return-54664-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 6F4ECD444
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 10 Jan 2013 23:53:45 +0000 (UTC)
Received: (qmail 75055 invoked by uid 500); 10 Jan 2013 23:53:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74968 invoked by uid 500); 10 Jan 2013 23:53:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74959 invoked by uid 99); 10 Jan 2013 23:53:43 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Jan 2013 23:53:43 +0000
X-ASF-Spam-Status: No, hits=1.3 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.220.47] (HELO mail-pa0-f47.google.com) (209.85.220.47)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Jan 2013 23:53:36 +0000
Received: by mail-pa0-f47.google.com with SMTP id fa10so652691pad.6
        for <java-user@lucene.apache.org>; Thu, 10 Jan 2013 15:53:14 -0800 (PST)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=x-received:message-id:date:from:user-agent:mime-version:to:subject
         :references:in-reply-to:content-type:content-transfer-encoding
         :x-gm-message-state;
        bh=++NaykhP9Ib1hC+ynPVt7hh6WNzFP/ynOFVyFCe7dtY=;
        b=Ed1uR67dy5KepvdxtcnLJFjsGdnYbFt9iQ3VtItlNjUhphlxMDykMfhE8kokGbYYy6
         AKUmBZL9wFF1Wvf0jKw84ypAOpuyIe4IUJSwSw9+um+mhkhnfxz+PZbsN1MydfIXwMrI
         eJO3p8/Pv5lTNsmZcg8vVS2QAJt7X0gcNBZytlPhKXWbP97OwQlF0fQsGX8Cj2IZrYLG
         9uSLT7Vo3HFdwfLtivKK5RbB7faQ2NNEcVjuUyaGDK6f4gMf01/qKSX243d1uJYwdtrQ
         e//IDMY+nPtUo8xsFbLa2xv8ysO5sc87R6aEey8g6iulFQSJMgOiHWiNOvOemnSimsLb
         Xwwg==
X-Received: by 10.68.222.232 with SMTP id qp8mr44271769pbc.99.1357861994919;
        Thu, 10 Jan 2013 15:53:14 -0800 (PST)
Received: from [192.168.0.11] (cpe-98-145-203-109.socal.res.rr.com. [98.145.203.109])
        by mx.google.com with ESMTPS id us7sm1595251pbc.40.2013.01.10.15.53.13
        (version=TLSv1 cipher=ECDHE-RSA-RC4-SHA bits=128/128);
        Thu, 10 Jan 2013 15:53:14 -0800 (PST)
Message-ID: <50EF545B.9080508@getrailo.org>
Date: Thu, 10 Jan 2013 15:52:59 -0800
From: "Igal @ getRailo.org" <igal@getrailo.org>
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:17.0) Gecko/17.0 Thunderbird/17.0
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Field.Store.YES vs Field.Store.NO
References: <1357859792791-4032374.post@n3.nabble.com>
In-Reply-To: <1357859792791-4032374.post@n3.nabble.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Gm-Message-State: ALoCoQkx0rPTLozjFWEMnoCxMam2401hWflEtTJhQL2YZ5v5IdqR22KEKktr5AfXAGmZDvWJixPL
X-Virus-Checked: Checked by ClamAV on apache.org

I'm no expert but my understanding is that it is Searchable, but you can 
Not retrieve the information, if for example you want to show excerpts 
etc.  the index size will be smaller, of course.


Igal


On 1/10/2013 3:16 PM, saisantoshi wrote:
> I am new to lucene and am trying to understand what is the impact on the
> search in using Field.Store.NO vs Field.Store.YES. I know the earlier does
> not store the value in the index and later stores it in the index.  Would
> that mean that the one that uses Field.Store.NO is not searchable?
>
> new Field("keyword", value, Field.Store.NO, Field.Index.ANALYZED)
>
> vs
>
> new Field("keyword", value, Field.Store.YES, Field.Index.ANALYZED)
>
> Thanks,
> Sai.
>
>
>
> --
> View this message in context: http://lucene.472066.n3.nabble.com/Field-Store-YES-vs-Field-Store-NO-tp4032374.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54665-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Jan 11 00:24:56 2013
Return-Path: <java-user-return-54665-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id A9B6CDB05
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 11 Jan 2013 00:24:56 +0000 (UTC)
Received: (qmail 77252 invoked by uid 500); 11 Jan 2013 00:24:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77198 invoked by uid 500); 11 Jan 2013 00:24:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77184 invoked by uid 99); 11 Jan 2013 00:24:54 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Jan 2013 00:24:54 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of dotsid@gmail.com designates 209.85.215.52 as permitted sender)
Received: from [209.85.215.52] (HELO mail-la0-f52.google.com) (209.85.215.52)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Jan 2013 00:24:46 +0000
Received: by mail-la0-f52.google.com with SMTP id fq12so1233022lab.39
        for <java-user@lucene.apache.org>; Thu, 10 Jan 2013 16:24:25 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=x-received:content-type:mime-version:subject:from:in-reply-to:date
         :content-transfer-encoding:message-id:references:to:x-mailer;
        bh=Zv7h+vK43jEHSbSB7rzjptwrhThjq7w6qGsANZqHoG8=;
        b=FFvI+Clitev9PsyKeC34QC7sN6tv8DXKgT+ishWchHwEaFl95v7j2dF7uVgfJM28fq
         hPgL6ZKIoROhdyIv7TgmRcI2/orIBUdChPtsxkSG8rFaQS9KJICHMEZvdwQXlM2VqpKE
         zjLjFw/AbhdriHNziyAb/Vjd/lIZHYszhC9EwPhl+Az6bHpyo4CDGyW7oMVlX6qK66N2
         rDyV2Y3Pq6bC6sB/EmpbpuXsef8sFVFEbOj/MiXAcqyDEapqY4wLOyfL8q8qYuUX5fyq
         LhkVAxfkUUcJbVrRLQ0XoA718rSpQJ3zLVmO7k1SPWcTR2y2mIqPvLG/MuOrR2AHVRpS
         /wPQ==
X-Received: by 10.152.123.77 with SMTP id ly13mr15484161lab.4.1357863865683;
        Thu, 10 Jan 2013 16:24:25 -0800 (PST)
Received: from [172.16.31.105] (gw.farpost.ru. [80.92.161.1])
        by mx.google.com with ESMTPS id mb2sm1403374lab.7.2013.01.10.16.24.21
        (version=TLSv1 cipher=ECDHE-RSA-RC4-SHA bits=128/128);
        Thu, 10 Jan 2013 16:24:24 -0800 (PST)
Content-Type: text/plain; charset=iso-8859-1
Mime-Version: 1.0 (Mac OS X Mail 6.2 \(1499\))
Subject: Re: getting the token position
From: Denis Bazhenov <dotsid@gmail.com>
In-Reply-To: <50EF2130.2@getrailo.org>
Date: Fri, 11 Jan 2013 11:24:14 +1100
Content-Transfer-Encoding: quoted-printable
Message-Id: <B36F1474-BCE8-4780-8512-3B3B0ABA8C6C@gmail.com>
References: <50EF2130.2@getrailo.org>
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.1499)
X-Virus-Checked: Checked by ClamAV on apache.org

What you are looking for is OffsetAttribute. Also consider the =
possibility of using ShingleFilter with position increment > 1 and then =
filtering tokens containing "_" (underscore). This will be easier, I =
guess.

On Jan 11, 2013, at 7:14 AM, Igal @ getRailo.org <igal@getrailo.org> =
wrote:

> hi all,
>=20
> how can I get the Token's Position from the TokenStream / Tokenizer / =
Analyzer ?  I know that there's a TokenPositionIncrement Attribute and a =
TokenPositionLength Attribute, but is there an easy way to get the token =
position or do I need to implement my own attribute by adding one of the =
attributes mentioned above?
>=20
> the reason I need it is that I wrote an implementation of a =
ShingleFilter which breaks shingles at punctuations so the tokens [token =
number one, word two] will create the shingles [ "token number", "number =
one", "word two" ] -- but Not [ "one word" ] because of the comma.  I =
want it to break shingles at increment gaps as well.
>=20
> thanks,
>=20
>=20
> Igal
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20

---
Denis Bazhenov <dotsid@gmail.com>






---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54666-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Jan 11 00:31:31 2013
Return-Path: <java-user-return-54666-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 698C0E458
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 11 Jan 2013 00:31:31 +0000 (UTC)
Received: (qmail 97910 invoked by uid 500); 11 Jan 2013 00:31:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97864 invoked by uid 500); 11 Jan 2013 00:31:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97854 invoked by uid 99); 11 Jan 2013 00:31:28 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Jan 2013 00:31:28 +0000
X-ASF-Spam-Status: No, hits=0.6 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of dotsid@gmail.com designates 209.85.215.43 as permitted sender)
Received: from [209.85.215.43] (HELO mail-la0-f43.google.com) (209.85.215.43)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Jan 2013 00:31:21 +0000
Received: by mail-la0-f43.google.com with SMTP id eg20so1258040lab.16
        for <java-user@lucene.apache.org>; Thu, 10 Jan 2013 16:31:01 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=x-received:content-type:mime-version:subject:from:in-reply-to:date
         :content-transfer-encoding:message-id:references:to:x-mailer;
        bh=nZIf1HlIawZcpANQpkhHvS3eTxxLRESJcKxeFSK1eQo=;
        b=scGOCB1ucwurnD0mifUwXpwWffe9KSfC3MsFk6+aW/0M6iJcFlkhlPn7eH9Il5o1Uv
         xZ73BWdPMkgiiUS8U7ZGcNKEQWGrEDXbvQyJJ0xdgzCHLAqDdulhP4goa1CESnJuSwp2
         kvCmSFtuCbx8JiCQgwWliQpToZHD5fzVxZWUfRYwUFK0R2G7sf97kpBrSMTvV1MSzg6y
         Uo/4v0Iry4CSgdScp5pfTd6+pf3OORlAe6wqusF+dOR4/G/GYeByYIviO3PoJFgOt6Ft
         gSyluCj9pSCR1UlzxGNs93LgMNUVI2fe5KrfE2NY9f+9q84Fr/a1nuHEPg4jZSj0QuoO
         BBzQ==
X-Received: by 10.112.98.71 with SMTP id eg7mr30439694lbb.133.1357864261353;
        Thu, 10 Jan 2013 16:31:01 -0800 (PST)
Received: from [172.16.31.105] (gw.farpost.ru. [80.92.161.1])
        by mx.google.com with ESMTPS id hc20sm1404702lab.11.2013.01.10.16.30.59
        (version=TLSv1 cipher=ECDHE-RSA-RC4-SHA bits=128/128);
        Thu, 10 Jan 2013 16:31:00 -0800 (PST)
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Mac OS X Mail 6.2 \(1499\))
Subject: Re: Field.Store.YES vs Field.Store.NO
From: Denis Bazhenov <dotsid@gmail.com>
In-Reply-To: <1357859792791-4032374.post@n3.nabble.com>
Date: Fri, 11 Jan 2013 11:30:54 +1100
Content-Transfer-Encoding: quoted-printable
Message-Id: <AB220251-899F-4FBB-A050-FC45BA837DEE@gmail.com>
References: <1357859792791-4032374.post@n3.nabble.com>
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.1499)
X-Virus-Checked: Checked by ClamAV on apache.org

If you are using Field.Store.NO the field itself is definitely =
searchable. You will not be able to retrieve the field value itself, =
though. But consequences of using Field.Store.YES is dependent on =
context. If you have a lot of documents in index and storable field is =
relatively large, this could possibly penalty search performance.

On Jan 11, 2013, at 10:16 AM, saisantoshi <saisantoshi76@gmail.com> =
wrote:

> I am new to lucene and am trying to understand what is the impact on =
the
> search in using Field.Store.NO vs Field.Store.YES. I know the earlier =
does
> not store the value in the index and later stores it in the index.  =
Would
> that mean that the one that uses Field.Store.NO is not searchable?
>=20
> new Field("keyword", value, Field.Store.NO, Field.Index.ANALYZED)
>=20
> vs
>=20
> new Field("keyword", value, Field.Store.YES, Field.Index.ANALYZED)
>=20
> Thanks,
> Sai.
>=20
>=20
>=20
> --
> View this message in context: =
http://lucene.472066.n3.nabble.com/Field-Store-YES-vs-Field-Store-NO-tp403=
2374.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20

---
Denis Bazhenov <dotsid@gmail.com>






---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54667-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Jan 11 00:45:13 2013
Return-Path: <java-user-return-54667-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 45AABE519
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 11 Jan 2013 00:45:13 +0000 (UTC)
Received: (qmail 36618 invoked by uid 500); 11 Jan 2013 00:45:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36553 invoked by uid 500); 11 Jan 2013 00:45:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36544 invoked by uid 99); 11 Jan 2013 00:45:11 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Jan 2013 00:45:11 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.160.47] (HELO mail-pb0-f47.google.com) (209.85.160.47)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Jan 2013 00:45:02 +0000
Received: by mail-pb0-f47.google.com with SMTP id un1so613639pbc.20
        for <java-user@lucene.apache.org>; Thu, 10 Jan 2013 16:44:41 -0800 (PST)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=x-received:message-id:date:from:user-agent:mime-version:to:subject
         :references:in-reply-to:content-type:x-gm-message-state;
        bh=cfZFn4ALYiAJYldn1drms/axIDFm65X+D8mLql9tIAk=;
        b=aTra0qOJnnQRLFPLassuV36bttkQlZWSrOOkS1s7VhcRlvqNwAsxWHrKQ4oBINsIc4
         BVLVmNsBwiKRzJ3tft4kpwbIrY4I7ToYy1zk0CiwqzIByd0bhLvA+VAAY8DlDytK3DoV
         1SddWF8mKXqBmpFbvUtwsNQ1QxeBOqvxiOMBQnTNrfk28KTKVeGpG5Nc8ITZ3FRkSbT0
         GzaOg3PVgQV9Qteg4LIk6Fivikbl/FIzO21oFG6ph8oz4ezf5noSxtnJWKkjZ3xyuwTd
         r6QkXXuvBHso+T4Pns6HWfdPm8B86t88N/qsxjfB31T1Hoqoi+6XbKopxnn69oHIjyet
         jY8Q==
X-Received: by 10.66.79.134 with SMTP id j6mr180729102pax.11.1357865081075;
        Thu, 10 Jan 2013 16:44:41 -0800 (PST)
Received: from [192.168.0.11] (cpe-98-145-203-109.socal.res.rr.com. [98.145.203.109])
        by mx.google.com with ESMTPS id o5sm1950400pay.5.2013.01.10.16.44.39
        (version=TLSv1 cipher=ECDHE-RSA-RC4-SHA bits=128/128);
        Thu, 10 Jan 2013 16:44:40 -0800 (PST)
Message-ID: <50EF606A.8090601@getrailo.org>
Date: Thu, 10 Jan 2013 16:44:26 -0800
From: "Igal @ getRailo.org" <igal@getrailo.org>
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:17.0) Gecko/17.0 Thunderbird/17.0
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: getting the token position
References: <50EF2130.2@getrailo.org> <B36F1474-BCE8-4780-8512-3B3B0ABA8C6C@gmail.com>
In-Reply-To: <B36F1474-BCE8-4780-8512-3B3B0ABA8C6C@gmail.com>
Content-Type: multipart/mixed;
 boundary="------------080606070607000803090508"
X-Gm-Message-State: ALoCoQnp/YHKkGaqKCev5rTHFj60Sqcd04OiknKA/Amk9ruS32s7bdY9oLu2IQuDBgXT+G5OLJzN
X-Virus-Checked: Checked by ClamAV on apache.org

--------------080606070607000803090508
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

hi Denis,

thanks for your reply.  OffsetAttribute gives the character position 
whereas I was looking for the Token Position.  I ended up adding the 
attached PositionAttribute/PositionAttributeImpl/PositionFilter.

as it turned out though I didn't need that attribute as there was an 
easier way to "fix" my Shingle Filter for the purpose of Not creating 
shingles from separate calls that add data.  all I had to do was reset 
the buffer when input.incrementToken() returns false.

attached is also my implementation of the Shingle Filter (I named it 
ShingaFilter to avoid confusion with the original ShingleFilter).

if anyone's "bored" and can look at my code I'd appreciate any critique 
-- especially if I'm doing something horribly wrong.

thanks,


Igal


On 1/10/2013 4:24 PM, Denis Bazhenov wrote:
> What you are looking for is OffsetAttribute. Also consider the possibility of using ShingleFilter with position increment > 1 and then filtering tokens containing "_" (underscore). This will be easier, I guess.
>
> On Jan 11, 2013, at 7:14 AM, Igal @ getRailo.org <igal@getrailo.org> wrote:
>
>> hi all,
>>
>> how can I get the Token's Position from the TokenStream / Tokenizer / Analyzer ?  I know that there's a TokenPositionIncrement Attribute and a TokenPositionLength Attribute, but is there an easy way to get the token position or do I need to implement my own attribute by adding one of the attributes mentioned above?
>>
>> the reason I need it is that I wrote an implementation of a ShingleFilter which breaks shingles at punctuations so the tokens [token number one, word two] will create the shingles [ "token number", "number one", "word two" ] -- but Not [ "one word" ] because of the comma.  I want it to break shingles at increment gaps as well.
>>
>> thanks,
>>
>>
>> Igal
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
> ---
> Denis Bazhenov <dotsid@gmail.com>
>
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


--------------080606070607000803090508
Content-Type: text/plain; charset=windows-1252;
 name="PositionAttribute.java"
Content-Transfer-Encoding: 7bit
Content-Disposition: attachment;
 filename="PositionAttribute.java"

/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package s21waf.text.lucene4;

import org.apache.lucene.util.Attribute;

/**
 *
 * @author Igal
 */
public interface PositionAttribute extends Attribute {
        
    public void setPosition( int value );
    
    public int getPosition();
}

--------------080606070607000803090508
Content-Type: text/plain; charset=windows-1252;
 name="PositionAttributeImpl.java"
Content-Transfer-Encoding: 7bit
Content-Disposition: attachment;
 filename="PositionAttributeImpl.java"

/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package s21waf.text.lucene4;

import org.apache.lucene.util.AttributeImpl;

/**
 *
 * @author Igal
 */
public class PositionAttributeImpl extends AttributeImpl implements PositionAttribute {

    int position = 0;
    
    @Override
    public void clear() {
        
        this.position = 0;
    }

    @Override
    public void copyTo(AttributeImpl ai) {
        
        ((PositionAttribute)ai).setPosition( this.position );
    }

    public void setPosition(int value) {
        
        this.position = value;
    }

    public int getPosition() {
        
        return this.position;
    }
    
}

--------------080606070607000803090508
Content-Type: text/plain; charset=windows-1252;
 name="PositionFilter.java"
Content-Transfer-Encoding: 7bit
Content-Disposition: attachment;
 filename="PositionFilter.java"

/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package s21waf.text.lucene4;

import java.io.IOException;
import org.apache.lucene.analysis.TokenFilter;
import org.apache.lucene.analysis.TokenStream;
import org.apache.lucene.analysis.tokenattributes.CharTermAttribute;
import org.apache.lucene.analysis.tokenattributes.PositionIncrementAttribute;
import org.apache.lucene.analysis.tokenattributes.TypeAttribute;

/**
 *
 * @author Igal
 */
public class PositionFilter extends TokenFilter {
    
    int pos = 0;
    
    private final PositionIncrementAttribute posIncAtt = addAttribute( PositionIncrementAttribute.class );
    
    private final PositionAttribute posAtt = addAttribute( PositionAttribute.class );

    
    public PositionFilter( TokenStream in ) {
    
        super( in );
        
    }
    
    
    @Override
    public boolean incrementToken() throws IOException {
    
        if ( !input.incrementToken() )
            return false;
        
        this.pos += posIncAtt.getPositionIncrement();
        
        posAtt.setPosition( this.pos );        
        
        return true;
    }
    
}

--------------080606070607000803090508
Content-Type: text/plain; charset=windows-1252;
 name="ShingaFilter.java"
Content-Transfer-Encoding: 7bit
Content-Disposition: attachment;
 filename="ShingaFilter.java"

/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package s21waf.text.lucene4;

import java.io.IOException;
import java.io.StringReader;
import java.util.ArrayList;
import java.util.Collections;
import java.util.LinkedList;
import java.util.List;
import java.util.Map;
import org.apache.lucene.analysis.TokenFilter;
import org.apache.lucene.analysis.TokenStream;
import org.apache.lucene.analysis.core.WhitespaceTokenizer;
import org.apache.lucene.analysis.tokenattributes.CharTermAttribute;
import org.apache.lucene.analysis.tokenattributes.PositionIncrementAttribute;
import org.apache.lucene.analysis.tokenattributes.TypeAttribute;
import org.apache.lucene.util.AttributeSource;
import s21waf.text.lucene4.LuceneUtils.TokenAttributes;

/**
 *
 * @author Igal
 */
public class ShingaFilter extends TokenFilter {

    public static final String TOKEN_TYPE_SHINGA = LuceneUtils.TYPE_SHINGLE;
    
    public static final String PHRASE_BREAKERS = ",;.:!()[]{}";    // if a term ends with one of those then the phrase shingle breaks

    private final LinkedList<String> terms;
    private final LinkedList<String> queue;
    
    private final int maxShingleSize;
    private int minShingleSize = 2;

    private AttributeSource.State capturedState;

    private final CharTermAttribute termAtt = addAttribute( CharTermAttribute.class );
    private final PositionIncrementAttribute posIncAtt = addAttribute( PositionIncrementAttribute.class );
    private final TypeAttribute typeAtt = addAttribute( TypeAttribute.class );

    private final PunctuationAttribute puncAtt = addAttribute( PunctuationAttribute.class );
    
    private final PositionAttribute posAtt = addAttribute( PositionAttribute.class );
    
    private String[] addedTerms;
    private int pos = 0;
    
    public ShingaFilter( TokenStream input, int maxShingleSize ) {

        super( input );

        this.maxShingleSize = maxShingleSize;

        terms = new LinkedList();
        
        queue = new LinkedList();
        
        addedTerms = new String[ maxShingleSize * ( maxShingleSize - 1 ) ];
    }


    public ShingaFilter( TokenStream input ) {

        this( input, 3 );
    }


    @Override
    public boolean incrementToken() throws IOException {

        if ( !queue.isEmpty() ) {
            // if we have values from previous iteration, return them one at a time with a restored state and no-position-increment
            
            String phrase = queue.poll();
            
            restoreState( capturedState );
            
            typeAtt.setType( TOKEN_TYPE_SHINGA );
            
            termAtt.setEmpty();
            termAtt.append( phrase );
            
            posIncAtt.setPositionIncrement( 0 );
            return true;
        }
        
        if ( !input.incrementToken() ) {    
            // end of stream
            
            // System.out.println( this.getClass().getName() + ": EOS.  Terms: " + terms.toString() );
            
            terms.clear();  // reset terms in case we call the tokenizer again so that we don't create shingles between separate entries
            
            return false;                       
        }
            
        /*/ probably don't need this
        int tokenPos = posAtt.getPosition();
        
        if ( tokenPos > 0 ) {   // if PositionFilter is not in the filter chain then tokenPos will always be 0
            
            System.out.println( this.getClass().getName() + ": " + tokenPos );
        }   //*/
        
        if ( addPhrasesToStack() )              // add phrases to stack
            capturedState = captureState();     // capture state if any phrases were added
        
        return true;                            // return current token
    }
    
    
    boolean addPhrasesToStack() {
        
        boolean doBreakPhrase = false;
        
        String term = termAtt.toString();
        
        int first = term.codePointAt( 0 );
        
        int punc = puncAtt.getPunctuation();
        
        if ( punc != PunctuationAttribute.NONE ) {

//            System.out.println("+" + punc);
        }
        
        if ( PHRASE_BREAKERS.indexOf( first ) > -1 ) {
         
            terms.clear();
            
            term = removePunc( term );
            
            termAtt.setEmpty();
            termAtt.append( term );
        }
        
        if ( !term.isEmpty() ) {    // in case removePunct cleared the term completely
        
//            if ( term.contains("led") )     System.out.println("xxx\t" + term);
            
            int last  = term.codePointAt( term.length() - 1 );

            if ( PHRASE_BREAKERS.indexOf( last ) > -1 ) {

                doBreakPhrase = true;   // set flag to clear the terms queue After adding this term

                termAtt.setLength( term.length() - 1 );
                term = termAtt.toString();
            }
                        
            if ( useTerm() ) {

                terms.add( term );

                if ( terms.size() > maxShingleSize )
                    terms.removeFirst();

                queue.addAll( getPhrases() );
            }
        }
        
        if ( doBreakPhrase )
            terms.clear();
        
        return !queue.isEmpty();
    }
    
    
    boolean useTerm() {
        
        String type = typeAtt.type();
                
        return ( !type.equals( LuceneUtils.TYPE_SYNONYM ) );
    }
    

    List<String> getPhrases() {

        if ( terms.size() < minShingleSize )
            return Collections.EMPTY_LIST;
        
        List<String> results = new ArrayList();

        for ( int j=minShingleSize; j <= terms.size(); j++ ) {   // min phrase size is 2

            StringBuilder sb = new StringBuilder( maxShingleSize * 10 );

            for ( int i=0; i<j; i++ ) {

                sb.append( terms.get( i ) );

                if ( i < j - 1 )
                    sb.append( " " );
            }

            String phrase = sb.toString();
            
            if ( !isAlreadyAdded( phrase ) ) {
            
                results.add( phrase );
                
                addedTerms[ pos++ % addedTerms.length ] = phrase;
            }
        }

        return results;
    }

    
    boolean isAlreadyAdded( String term ) {
        
        for ( String t : addedTerms ) {
            
            if ( term.equalsIgnoreCase( t ) )
                return true;
        }
        
        return false;
    }
    


    /** test methods below */
    public static String printTokens( String phrase, List<Map> list, boolean doPrint ) {

        StringBuilder sb = new StringBuilder();

        for (Map m : list) {

            int pos = Integer.parseInt( m.get( "position").toString() );

            String term = m.get( "term" ).toString();

            sb.append( term ).append( " (" ).append( pos ).append( ") " );
        }

        if ( doPrint )
            System.out.println( sb.toString() );

        return sb.toString();
    }


    public static void main( String[] args ) throws Exception {

        String test = "the quick, somewhat ugly, brown fox jumps over the lazy dog";

//        test = "the quick";
        
        TokenStream ts = new WhitespaceTokenizer( LuceneUtils.VERSION, new StringReader( test ) );

        ts = new ShingaFilter( ts );

        List<TokenAttributes> terms = LuceneUtils.getTokens( ts );

        for ( TokenAttributes ta : terms )
            System.out.println("\t" + ta.term + "\t\t" + ta.attr);
    }

    
    private String removePunc(String term) {
        
        StringBuilder sb = new StringBuilder();
        
        char[] buffer = term.toCharArray();
        
        for ( char c : buffer ) {
            
            /*/
            if ( Character.isWhitespace( c ) && sb.length() == 0 )
                continue;   //*/
            
            if ( PHRASE_BREAKERS.indexOf( c ) == -1 )
                sb.append( c );
        }
        
        return sb.toString();
    }

}


--------------080606070607000803090508
Content-Type: text/plain; charset=us-ascii


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
--------------080606070607000803090508--

From java-user-return-54668-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Jan 11 03:42:24 2013
Return-Path: <java-user-return-54668-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id D1346EF3A
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 11 Jan 2013 03:42:24 +0000 (UTC)
Received: (qmail 19796 invoked by uid 500); 11 Jan 2013 03:42:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19734 invoked by uid 500); 11 Jan 2013 03:42:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19702 invoked by uid 99); 11 Jan 2013 03:42:20 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Jan 2013 03:42:20 +0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,SPF_NEUTRAL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: 216.139.236.26 is neither permitted nor denied by domain of saisantoshi76@gmail.com)
Received: from [216.139.236.26] (HELO sam.nabble.com) (216.139.236.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Jan 2013 03:42:14 +0000
Received: from ben.nabble.com ([192.168.236.152])
	by sam.nabble.com with esmtp (Exim 4.72)
	(envelope-from <saisantoshi76@gmail.com>)
	id 1TtVVB-0000eK-Uj
	for java-user@lucene.apache.org; Thu, 10 Jan 2013 19:41:53 -0800
Date: Thu, 10 Jan 2013 19:41:53 -0800 (PST)
From: saisantoshi <saisantoshi76@gmail.com>
To: java-user@lucene.apache.org
Message-ID: <1357875713936-4032419.post@n3.nabble.com>
In-Reply-To: <AB220251-899F-4FBB-A050-FC45BA837DEE@gmail.com>
References: <1357859792791-4032374.post@n3.nabble.com> <AB220251-899F-4FBB-A050-FC45BA837DEE@gmail.com>
Subject: Re: Field.Store.YES vs Field.Store.NO
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org


Not sure what does the following below mean?

>>using Field.Store.NO the field itself is definitely searchable. You will
not be able to retrieve the field value itself

For example, if we have a file that we upload using some keywords and if the
keyword (is of type Field.Store.NO but is analyzed)

Does the above mean that the value (keyword) will not be retrieved from the
search result? but the file will be retrieved from the search. Please let me
know if my understanding is correct?

Thanks,
Sai.



--
View this message in context: http://lucene.472066.n3.nabble.com/Field-Store-YES-vs-Field-Store-NO-tp4032374p4032419.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54669-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Jan 11 03:50:54 2013
Return-Path: <java-user-return-54669-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id D6F58EF57
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 11 Jan 2013 03:50:54 +0000 (UTC)
Received: (qmail 42996 invoked by uid 500); 11 Jan 2013 03:50:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42724 invoked by uid 500); 11 Jan 2013 03:50:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42693 invoked by uid 99); 11 Jan 2013 03:50:51 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Jan 2013 03:50:51 +0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,SPF_NEUTRAL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: 216.139.236.26 is neither permitted nor denied by domain of saisantoshi76@gmail.com)
Received: from [216.139.236.26] (HELO sam.nabble.com) (216.139.236.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Jan 2013 03:50:46 +0000
Received: from ben.nabble.com ([192.168.236.152])
	by sam.nabble.com with esmtp (Exim 4.72)
	(envelope-from <saisantoshi76@gmail.com>)
	id 1TtVdR-00010y-PG
	for java-user@lucene.apache.org; Thu, 10 Jan 2013 19:50:25 -0800
Date: Thu, 10 Jan 2013 19:50:25 -0800 (PST)
From: saisantoshi <saisantoshi76@gmail.com>
To: java-user@lucene.apache.org
Message-ID: <1357876225775-4032420.post@n3.nabble.com>
In-Reply-To: <56C47385-FFD3-4D13-995D-3896AC46639D@gmail.com>
References: <1357758298989-4031956.post@n3.nabble.com> <50EDC042.50306@getrailo.org> <1357759262767-4031974.post@n3.nabble.com> <6AEE0C09-46B5-4527-9805-D30F50D1A291@gmail.com> <1357765731298-4032029.post@n3.nabble.com> <50EDE2F4.3030703@getrailo.org> <1357768715460-4032038.post@n3.nabble.com> <56C47385-FFD3-4D13-995D-3896AC46639D@gmail.com>
Subject: Re: Upgrade Lucene to latest version (4.0) from 2.4.0
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks for all the responses.

Apart from the API changes, is there any major functionality change from
2.4.0 -> 4.x version. I know we need to modify the API to the latest version
but just curious if we need to be aware of any functional changes so as to
do more thorough testing?

Thanks,
Sai. 



--
View this message in context: http://lucene.472066.n3.nabble.com/Upgrade-Lucene-to-latest-version-4-0-from-2-4-0-tp4031956p4032420.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54670-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Jan 11 04:08:33 2013
Return-Path: <java-user-return-54670-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id A2A54EFB3
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 11 Jan 2013 04:08:33 +0000 (UTC)
Received: (qmail 91155 invoked by uid 500); 11 Jan 2013 04:08:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90886 invoked by uid 500); 11 Jan 2013 04:08:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90853 invoked by uid 99); 11 Jan 2013 04:08:29 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Jan 2013 04:08:29 +0000
X-ASF-Spam-Status: No, hits=1.3 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.160.47] (HELO mail-pb0-f47.google.com) (209.85.160.47)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Jan 2013 04:08:23 +0000
Received: by mail-pb0-f47.google.com with SMTP id un1so705134pbc.20
        for <java-user@lucene.apache.org>; Thu, 10 Jan 2013 20:08:02 -0800 (PST)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=x-received:message-id:date:from:user-agent:mime-version:to:subject
         :references:in-reply-to:content-type:content-transfer-encoding
         :x-gm-message-state;
        bh=Vih1h5k6siPnJB1191oUofqz1xfxTYFSH+2DcU6jxI8=;
        b=CFqLVTgay6dvadEBbccBeS762iYJwau6+ThgoFAJEf4Rsn1gGPLobJuIwjaQrmtRKV
         t/31/TIf1pqsJ76jGNMXIY/zki00HwPHbF3I5v/3eDJqm0KignmttYCBiJdeAs4bZPST
         z8IzC3Pvl85+vqdYlytlNBSufiHGigWAwOb6TRxN8TqMRa4piGApPxFpvs/eMjBhr9kD
         d1eR0zNSG4i68DB7flz0ROx/YaQd5Tjg1xYH33ZRwHT90RxM7wORVE4hHRySDuyr+/NI
         IkwajhIkiPq8L987inI196fv+tZDJT5G4E5asCvuCFqtvlbg3WMw2Fbz7da3yUXheJ89
         tnzA==
X-Received: by 10.68.130.135 with SMTP id oe7mr57382612pbb.38.1357877282475;
        Thu, 10 Jan 2013 20:08:02 -0800 (PST)
Received: from [192.168.0.11] (cpe-98-145-203-109.socal.res.rr.com. [98.145.203.109])
        by mx.google.com with ESMTPS id mz10sm1978612pbc.37.2013.01.10.20.08.01
        (version=TLSv1 cipher=ECDHE-RSA-RC4-SHA bits=128/128);
        Thu, 10 Jan 2013 20:08:01 -0800 (PST)
Message-ID: <50EF9013.9090200@getrailo.org>
Date: Thu, 10 Jan 2013 20:07:47 -0800
From: "Igal @ getRailo.org" <igal@getrailo.org>
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:17.0) Gecko/17.0 Thunderbird/17.0
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Field.Store.YES vs Field.Store.NO
References: <1357859792791-4032374.post@n3.nabble.com> <AB220251-899F-4FBB-A050-FC45BA837DEE@gmail.com> <1357875713936-4032419.post@n3.nabble.com>
In-Reply-To: <1357875713936-4032419.post@n3.nabble.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Gm-Message-State: ALoCoQkzTtszI/0XCuYaARShX9wMdM9hPU5RXo1RbEFMG8tZCm1s/t4qpgbb85Dw6erYWgpxjOWM
X-Virus-Checked: Checked by ClamAV on apache.org

say you index information about a book with the title: "Lucene in 
Action" with an ID and other information.

searching for "Lucene" will find the book and will give you the book's 
ID.  now if you used Store.YES -- then Lucene can also give you the full 
title, i.e. "Lucene in Action", but if you used Store.NO -- then you can 
not retrieve this information from Lucene. you will need to take the ID 
and retrieve the title from some other data store.


On 1/10/2013 7:41 PM, saisantoshi wrote:
> Not sure what does the following below mean?
>
>>> using Field.Store.NO the field itself is definitely searchable. You will
> not be able to retrieve the field value itself
>
> For example, if we have a file that we upload using some keywords and if the
> keyword (is of type Field.Store.NO but is analyzed)
>
> Does the above mean that the value (keyword) will not be retrieved from the
> search result? but the file will be retrieved from the search. Please let me
> know if my understanding is correct?
>
> Thanks,
> Sai.
>
>
>
> --
> View this message in context: http://lucene.472066.n3.nabble.com/Field-Store-YES-vs-Field-Store-NO-tp4032374p4032419.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54671-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Jan 11 05:17:45 2013
Return-Path: <java-user-return-54671-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id E6EA3ED50
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 11 Jan 2013 05:17:44 +0000 (UTC)
Received: (qmail 73597 invoked by uid 500); 11 Jan 2013 05:17:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73243 invoked by uid 500); 11 Jan 2013 05:17:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73225 invoked by uid 99); 11 Jan 2013 05:17:42 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Jan 2013 05:17:42 +0000
X-ASF-Spam-Status: No, hits=0.6 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of dotsid@gmail.com designates 209.85.217.175 as permitted sender)
Received: from [209.85.217.175] (HELO mail-lb0-f175.google.com) (209.85.217.175)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Jan 2013 05:17:35 +0000
Received: by mail-lb0-f175.google.com with SMTP id gg13so1024935lbb.20
        for <java-user@lucene.apache.org>; Thu, 10 Jan 2013 21:17:14 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=x-received:content-type:mime-version:subject:from:in-reply-to:date
         :content-transfer-encoding:message-id:references:to:x-mailer;
        bh=UlwOY0uMlecPO/gDGPNQIKiuQZsJWGSOgNcQtSYZdx0=;
        b=QPVfW8iH6NFFfC41R53ZCUxmyStPw0fCsBjjUznGeJQoQYajKCaIo7oqwCwtOqiEwC
         6BB0pfHg3asBoD8ZQj+sLp5fqhTLYs3JXFc9uN5x424e2k2m59QigvrtQ8Vqpt0tTfta
         15q7KVaB8ZlDTXHAOfSlx3AOcNzlUM6A+62ET5lY1BhZ5pziFtrCFLu1DHLSpl1vzn3j
         GUGufFQA3zaOLUOLYTmg1RNq+rlJbsew2YjWGE7lyOrM5yEAE3dDhC09ILuWzD7HY6qs
         2WcvVgINydj1KdBQ65CGD4wkDd9cZFRKBHumLaXcAi6wfZMUmEkNusUN8Aq2vzawsL7x
         F67g==
X-Received: by 10.152.145.8 with SMTP id sq8mr70720094lab.21.1357881434604;
        Thu, 10 Jan 2013 21:17:14 -0800 (PST)
Received: from [172.16.31.105] (gw.farpost.ru. [80.92.161.1])
        by mx.google.com with ESMTPS id pz15sm1562191lab.3.2013.01.10.21.17.12
        (version=TLSv1 cipher=ECDHE-RSA-RC4-SHA bits=128/128);
        Thu, 10 Jan 2013 21:17:13 -0800 (PST)
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Mac OS X Mail 6.2 \(1499\))
Subject: Re: Field.Store.YES vs Field.Store.NO
From: Denis Bazhenov <dotsid@gmail.com>
In-Reply-To: <1357875713936-4032419.post@n3.nabble.com>
Date: Fri, 11 Jan 2013 16:17:07 +1100
Content-Transfer-Encoding: quoted-printable
Message-Id: <37C9138B-F187-408D-BD28-F7BC2D7722D9@gmail.com>
References: <1357859792791-4032374.post@n3.nabble.com> <AB220251-899F-4FBB-A050-FC45BA837DEE@gmail.com> <1357875713936-4032419.post@n3.nabble.com>
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.1499)
X-Virus-Checked: Checked by ClamAV on apache.org

That's right. For example, file is uploaded with keyword "picture" and =
you are searching "keyword:picture keyword:music" (music OR picture). =
This file will be returned by search, but your will not be able to tell =
if it's music or picture.

The Lucene index itself is inverted index, so all fields are searchable. =
Searchable means that you are able to find all document ids containing =
some particular term (term =3D field name + field value). But forward =
index (get field values for some particular document) is available only =
for stored fields.

On Jan 11, 2013, at 2:41 PM, saisantoshi <saisantoshi76@gmail.com> =
wrote:

>=20
> Not sure what does the following below mean?
>=20
>>> using Field.Store.NO the field itself is definitely searchable. You =
will
> not be able to retrieve the field value itself
>=20
> For example, if we have a file that we upload using some keywords and =
if the
> keyword (is of type Field.Store.NO but is analyzed)
>=20
> Does the above mean that the value (keyword) will not be retrieved =
from the
> search result? but the file will be retrieved from the search. Please =
let me
> know if my understanding is correct?
>=20
> Thanks,
> Sai.
>=20
>=20
>=20
> --
> View this message in context: =
http://lucene.472066.n3.nabble.com/Field-Store-YES-vs-Field-Store-NO-tp403=
2374p4032419.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20

---
Denis Bazhenov <dotsid@gmail.com>






---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54672-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Jan 11 13:29:06 2013
Return-Path: <java-user-return-54672-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id AC2A6E4E0
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 11 Jan 2013 13:29:06 +0000 (UTC)
Received: (qmail 14426 invoked by uid 500); 11 Jan 2013 13:29:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14351 invoked by uid 500); 11 Jan 2013 13:29:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14343 invoked by uid 99); 11 Jan 2013 13:29:04 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Jan 2013 13:29:04 +0000
X-ASF-Spam-Status: No, hits=2.8 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 209.85.216.182 as permitted sender)
Received: from [209.85.216.182] (HELO mail-qc0-f182.google.com) (209.85.216.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Jan 2013 13:28:57 +0000
Received: by mail-qc0-f182.google.com with SMTP id k19so1110517qcs.27
        for <java-user@lucene.apache.org>; Fri, 11 Jan 2013 05:28:37 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=TfAL69ZPa/OfPEWAk84+Dh4RQae/+SFe+4r9BDHaQlU=;
        b=H23v0LKMLQz2k3Hd1Fef/jFHDBU6cNVdeqAyr/v8I8WFjuiklQsLDT4f3LxYUnlATt
         ELqubWMpJ0ftKdYFxvq4mD3wl5mOWuUZT3j4ou50Ocjs+sxrgQ3fQjmv12EyG8J8wZYM
         9VPp2R4Z07K523VrL5/wtLxaok9LU6wFX7iTMS/4yOCCiiErywvBwaKg1PnqDl956mxQ
         L2eT8UgpIkGA4KA++QzSVF9sLksr359Jm0woC0dbpVW6VWOXsaWhpqZYhIkgyDdbEBxI
         0X+cNvj4C5XOhYYMDlBKS2QJ3xgeu5z0f5lLOV27vcZ6/dUfO371yeGCEVOpXsP3/dmg
         s70g==
MIME-Version: 1.0
Received: by 10.49.74.10 with SMTP id p10mr70246436qev.35.1357910916969; Fri,
 11 Jan 2013 05:28:36 -0800 (PST)
Received: by 10.49.12.240 with HTTP; Fri, 11 Jan 2013 05:28:36 -0800 (PST)
In-Reply-To: <37C9138B-F187-408D-BD28-F7BC2D7722D9@gmail.com>
References: <1357859792791-4032374.post@n3.nabble.com>
	<AB220251-899F-4FBB-A050-FC45BA837DEE@gmail.com>
	<1357875713936-4032419.post@n3.nabble.com>
	<37C9138B-F187-408D-BD28-F7BC2D7722D9@gmail.com>
Date: Fri, 11 Jan 2013 08:28:36 -0500
Message-ID: <CAN4YXvca1C2C1vv5keSdKq1kGBN-AzazgE1NqS4FwFbmvUnMxw@mail.gmail.com>
Subject: Re: Field.Store.YES vs Field.Store.NO
From: Erick Erickson <erickerickson@gmail.com>
To: java-user <java-user@lucene.apache.org>
Content-Type: multipart/alternative; boundary=047d7bdc1272d7b44704d30345d2
X-Virus-Checked: Checked by ClamAV on apache.org

--047d7bdc1272d7b44704d30345d2
Content-Type: text/plain; charset=ISO-8859-1

This page might add a little insight:
http://lucene.apache.org/core/old_versioned_docs/versions/3_5_0/fileformats.html#file-names.
It's for 3.5, but the take-away is that *.fdt and *.fdx files are where a
raw copy of the data goes when you specify Store.YES. They are completely
independent of all the files that take position info, TF/IDF info, all the
stuff that goes into searching. Their presence/absence has no bearing on
being able to search, but that's where all the raw data is stored if you
want to retrieve the original input.

FWIW,
Erick



On Fri, Jan 11, 2013 at 12:17 AM, Denis Bazhenov <dotsid@gmail.com> wrote:

> That's right. For example, file is uploaded with keyword "picture" and you
> are searching "keyword:picture keyword:music" (music OR picture). This file
> will be returned by search, but your will not be able to tell if it's music
> or picture.
>
> The Lucene index itself is inverted index, so all fields are searchable.
> Searchable means that you are able to find all document ids containing some
> particular term (term = field name + field value). But forward index (get
> field values for some particular document) is available only for stored
> fields.
>
> On Jan 11, 2013, at 2:41 PM, saisantoshi <saisantoshi76@gmail.com> wrote:
>
> >
> > Not sure what does the following below mean?
> >
> >>> using Field.Store.NO the field itself is definitely searchable. You
> will
> > not be able to retrieve the field value itself
> >
> > For example, if we have a file that we upload using some keywords and if
> the
> > keyword (is of type Field.Store.NO but is analyzed)
> >
> > Does the above mean that the value (keyword) will not be retrieved from
> the
> > search result? but the file will be retrieved from the search. Please
> let me
> > know if my understanding is correct?
> >
> > Thanks,
> > Sai.
> >
> >
> >
> > --
> > View this message in context:
> http://lucene.472066.n3.nabble.com/Field-Store-YES-vs-Field-Store-NO-tp4032374p4032419.html
> > Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
>
> ---
> Denis Bazhenov <dotsid@gmail.com>
>
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--047d7bdc1272d7b44704d30345d2--

From java-user-return-54673-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Jan 11 15:03:46 2013
Return-Path: <java-user-return-54673-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id D7B70E8D7
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 11 Jan 2013 15:03:46 +0000 (UTC)
Received: (qmail 12130 invoked by uid 500); 11 Jan 2013 15:03:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12084 invoked by uid 500); 11 Jan 2013 15:03:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12075 invoked by uid 99); 11 Jan 2013 15:03:44 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Jan 2013 15:03:44 +0000
X-ASF-Spam-Status: No, hits=2.3 required=5.0
	tests=FROM_12LTRDOM,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [80.169.233.11] (HELO mailbck.lombardodier.ch) (80.169.233.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Jan 2013 15:03:37 +0000
To: java-user@lucene.apache.org
Subject: forceMergeDeletes vs forceMerge(int)
MIME-Version: 1.0
X-KeepSent: 4B4DB79F:0F87123E-C1257AF0:0052604C;
 type=4; flags=0; name=$KeepSent
From: v.sevel@lombardodier.com
X-SendAsMailing: 1
Message-ID: <OF4B4DB79F.0F87123E-ONC1257AF0.0052604C-C1257AF0.0052AA0D@biz.lodh.com>
Date: Fri, 11 Jan 2013 16:02:55 +0100
Content-Type: multipart/alternative; boundary="=_alternative 0052AA0DC1257AF0_="
X-Virus-Checked: Checked by ClamAV on apache.org

--=_alternative 0052AA0DC1257AF0_=
Content-Type: text/plain; charset="US-ASCII"

hi, I have an index where I add and delete a lot numerous documents that 
are a few kb in size.
to keep space on disk stable, I have been doing forceMergeDeletes then 
forceMerge(5) regularly (after I do a big clean during the night).
I am wondering if forceMergeDeletes  would be sufficient for that purpose.
what do you think?
thanks,
v.



************************ DISCLAIMER ************************
This message is intended only for use by the person to
whom it is addressed. It may contain information that is
privileged and confidential. Its content does not
constitute a formal commitment by Lombard Odier & Cie
or any of its branches or affiliates.
If you are not the intended recipient of this message,
kindly notify the sender immediately and destroy this
message. Thank You.
*****************************************************************

--=_alternative 0052AA0DC1257AF0_=--

From java-user-return-54674-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Jan 11 16:19:10 2013
Return-Path: <java-user-return-54674-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 57040E821
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 11 Jan 2013 16:19:10 +0000 (UTC)
Received: (qmail 74696 invoked by uid 500); 11 Jan 2013 16:19:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74648 invoked by uid 500); 11 Jan 2013 16:19:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74639 invoked by uid 99); 11 Jan 2013 16:19:08 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Jan 2013 16:19:08 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.160.54] (HELO mail-pb0-f54.google.com) (209.85.160.54)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Jan 2013 16:19:02 +0000
Received: by mail-pb0-f54.google.com with SMTP id wz12so1040278pbc.41
        for <java-user@lucene.apache.org>; Fri, 11 Jan 2013 08:18:41 -0800 (PST)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:x-gm-message-state;
        bh=Y88rtTpljw4MMQXDSZzucb1tdNnSS43L+27mw9ewpa0=;
        b=DMc2c+/KWQzcwhyxFomTpuvpmlAh8Rwu8JMg6YZFNYbD82COYe545fBcMNXZvXz3wx
         QXmg1TLv7alSstSlTj4ikgiOaqokvDPAKmMbDNAmCYjOabEpXurze8ckoMXyFv/iThvZ
         0LmCPYerwoA/7YUwcYJViA2wRCY7Nwt0FZaG+YDZbintgmTk68PGBPhZFkGjLc5s2XeB
         Czhe30tMIdK3BurxpCWBQxuYZj+0z5zti5HB5Uu6mOs6Jno8DEWM71z1HOcQnbzb6tbC
         aF7GXR1MYLF3tQI78mM8//5cxGfip5mmBUCgLhNOGxnaazUztYtS2gdgWOrbYLB/kvbk
         C5gw==
Received: by 10.66.73.138 with SMTP id l10mr208499643pav.44.1357921120959;
 Fri, 11 Jan 2013 08:18:40 -0800 (PST)
MIME-Version: 1.0
Received: by 10.68.34.106 with HTTP; Fri, 11 Jan 2013 08:18:20 -0800 (PST)
In-Reply-To: <OF4B4DB79F.0F87123E-ONC1257AF0.0052604C-C1257AF0.0052AA0D@biz.lodh.com>
References: <OF4B4DB79F.0F87123E-ONC1257AF0.0052604C-C1257AF0.0052AA0D@biz.lodh.com>
From: Michael McCandless <lucene@mikemccandless.com>
Date: Fri, 11 Jan 2013 11:18:20 -0500
Message-ID: <CAL8PwkatcRxnX_rY+N5ix9pwPQp47iGehndExXKLcmFbFUqA6A@mail.gmail.com>
Subject: Re: forceMergeDeletes vs forceMerge(int)
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Gm-Message-State: ALoCoQkL6nxZq7+j129Sf5DE1RgQn2dKu64ZSgvI/C0Phf+DdoMkcpgcmit/hg0EHoFtPyv13I0c
X-Virus-Checked: Checked by ClamAV on apache.org

forceMergeDeletes will only merge down segments with more than X%
deletions (X = 10% by default with TieredMergePolicy) ... so depending
on how many deletes you have it may or may not merge down to 5
segments like forceMerge(5) would.

Mike McCandless

http://blog.mikemccandless.com



On Fri, Jan 11, 2013 at 10:02 AM,  <v.sevel@lombardodier.com> wrote:
> hi, I have an index where I add and delete a lot numerous documents that
> are a few kb in size.
> to keep space on disk stable, I have been doing forceMergeDeletes then
> forceMerge(5) regularly (after I do a big clean during the night).
> I am wondering if forceMergeDeletes  would be sufficient for that purpose.
> what do you think?
> thanks,
> v.
>
>
>
> ************************ DISCLAIMER ************************
> This message is intended only for use by the person to
> whom it is addressed. It may contain information that is
> privileged and confidential. Its content does not
> constitute a formal commitment by Lombard Odier & Cie
> or any of its branches or affiliates.
> If you are not the intended recipient of this message,
> kindly notify the sender immediately and destroy this
> message. Thank You.
> *****************************************************************

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54675-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Jan 11 17:25:11 2013
Return-Path: <java-user-return-54675-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id D395CEC3D
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 11 Jan 2013 17:25:11 +0000 (UTC)
Received: (qmail 30108 invoked by uid 500); 11 Jan 2013 17:25:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30060 invoked by uid 500); 11 Jan 2013 17:25:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30048 invoked by uid 99); 11 Jan 2013 17:25:09 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Jan 2013 17:25:09 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 74.125.82.174 as permitted sender)
Received: from [74.125.82.174] (HELO mail-we0-f174.google.com) (74.125.82.174)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Jan 2013 17:25:03 +0000
Received: by mail-we0-f174.google.com with SMTP id x10so967831wey.5
        for <java-user@lucene.apache.org>; Fri, 11 Jan 2013 09:24:41 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=x-received:mime-version:in-reply-to:references:from:date:message-id
         :subject:to:content-type;
        bh=pVatb1gbTQD4X+97vNlwhb3TR/bp/IfB8NgUavw9/ls=;
        b=qydqUGYieTImSqIf0C2EX4juoGRcGzd1dTG0DNARLZGqU7xd5ZUdcSIzS07psqXDT4
         GSwclyvigZSsUnArBAHt/dros1VqpsuiBiSxgCXihaM16Eicqx6yNSpcF6z716sjjV+Y
         /aauziC43NyVhhDAVylhiYhkcodmGzts6W3Z0JPY+pUkoRu6mnwGEZMgV4NxnX5UL3ff
         2KG6Bn40cmdvEqvnQWp2dzb60pQluM9ZUScNaImi3LERwV1esXE7mVdHaW8Xz2efp6Ps
         iCems0nFl+vHaUxFsBOe+Z4+9KERAHrlJKq/XxPpv19sqqIO8BMgyT5ZI96yWlAv0NXc
         D4Ug==
X-Received: by 10.180.99.72 with SMTP id eo8mr16765054wib.34.1357925081832;
 Fri, 11 Jan 2013 09:24:41 -0800 (PST)
MIME-Version: 1.0
Received: by 10.194.57.11 with HTTP; Fri, 11 Jan 2013 09:24:21 -0800 (PST)
In-Reply-To: <CAOZ_vPYod8eWo0VwDtYvJoPBooOPuWp+Kv7=pRB6Vpd+o01_Xw@mail.gmail.com>
References: <CAOZ_vPYod8eWo0VwDtYvJoPBooOPuWp+Kv7=pRB6Vpd+o01_Xw@mail.gmail.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Fri, 11 Jan 2013 17:24:21 +0000
Message-ID: <CAEY5pxXfen_Pobmm3RnOkcuYeSqChu0Vbz-oARGFfhRCHq+ESw@mail.gmail.com>
Subject: Re: Query beginning with special characters
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

QueryParser has a setAllowLeadingWildcard() method.  Could that be relevant?

What version of lucene?  Can you post some simple examples of what
does/doesn't work? Post the smallest possible, but complete, code that
demonstrates the problem?


With any question that mentions a custom version of something, that
custom version has to be the prime suspect for any problems.


--
Ian.


On Thu, Jan 10, 2013 at 12:08 PM, Hankyu Kim <gksrb92@gmail.com> wrote:
> Hi.
>
> I've created a custom analyzer that treats special characters just like any
> other. The index works fine all the time even when the query includes
> special characters, except when the special characters come to the begining
> of the query.
>
> I'm using spanTermQuery and wildCardQuery, and they both seem to suffer the
> same issue with queries begining with special characters. Is it a
> limitation of Lucene or am I missing something?
>
> Thanks

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54676-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Jan 11 22:50:40 2013
Return-Path: <java-user-return-54676-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 07BDBEDD1
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 11 Jan 2013 22:50:40 +0000 (UTC)
Received: (qmail 57741 invoked by uid 500); 11 Jan 2013 22:50:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57676 invoked by uid 500); 11 Jan 2013 22:50:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57668 invoked by uid 99); 11 Jan 2013 22:50:37 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Jan 2013 22:50:37 +0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,SPF_NEUTRAL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: 216.139.236.26 is neither permitted nor denied by domain of saisantoshi76@gmail.com)
Received: from [216.139.236.26] (HELO sam.nabble.com) (216.139.236.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Jan 2013 22:50:30 +0000
Received: from ben.nabble.com ([192.168.236.152])
	by sam.nabble.com with esmtp (Exim 4.72)
	(envelope-from <saisantoshi76@gmail.com>)
	id 1TtnQQ-0001NZ-25
	for java-user@lucene.apache.org; Fri, 11 Jan 2013 14:50:10 -0800
Date: Fri, 11 Jan 2013 14:50:10 -0800 (PST)
From: saisantoshi <saisantoshi76@gmail.com>
To: java-user@lucene.apache.org
Message-ID: <1357944610039-4032667.post@n3.nabble.com>
In-Reply-To: <1357876225775-4032420.post@n3.nabble.com>
References: <1357758298989-4031956.post@n3.nabble.com> <50EDC042.50306@getrailo.org> <1357759262767-4031974.post@n3.nabble.com> <6AEE0C09-46B5-4527-9805-D30F50D1A291@gmail.com> <1357765731298-4032029.post@n3.nabble.com> <50EDE2F4.3030703@getrailo.org> <1357768715460-4032038.post@n3.nabble.com> <56C47385-FFD3-4D13-995D-3896AC46639D@gmail.com> <1357876225775-4032420.post@n3.nabble.com>
Subject: Re: Upgrade Lucene to latest version (4.0) from 2.4.0
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

I was just going through compiling our sources against 4.0 and it seems there
are quite some API changes. Any major functionality changes from 2.4 - 4.0?
with respect to indexing/searching.

Thanks,
Sai.



--
View this message in context: http://lucene.472066.n3.nabble.com/Upgrade-Lucene-to-latest-version-4-0-from-2-4-0-tp4031956p4032667.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54677-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Sat Jan 12 09:22:39 2013
Return-Path: <java-user-return-54677-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id F26BED375
	for <apmail-lucene-java-user-archive@www.apache.org>; Sat, 12 Jan 2013 09:22:38 +0000 (UTC)
Received: (qmail 24646 invoked by uid 500); 12 Jan 2013 09:22:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24062 invoked by uid 500); 12 Jan 2013 09:22:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24013 invoked by uid 99); 12 Jan 2013 09:22:28 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 12 Jan 2013 09:22:28 +0000
X-ASF-Spam-Status: No, hits=2.8 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of nnaresh@gmail.com designates 209.85.219.46 as permitted sender)
Received: from [209.85.219.46] (HELO mail-oa0-f46.google.com) (209.85.219.46)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 12 Jan 2013 09:22:22 +0000
Received: by mail-oa0-f46.google.com with SMTP id h16so2583348oag.19
        for <java-user@lucene.apache.org>; Sat, 12 Jan 2013 01:22:02 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=O5UHTfGpsmLMf8664CdTqXDTIqMiDD78RQfeMxPbmi8=;
        b=JYl+ef80DhtFQEdi0sc+1SPRG09TrH6parJVy3SClP8NRHbbDeR0NyjI/ghyAJx7sq
         vOjNbH29gHRHQ8d58uXAqiSbM5+Wp4C2ckHIQ2h5CzwQwDvEoxyiDCiikZLKWmiSNg8Y
         D5msyOE96oksTVvzpKvjofp4Jxf8YzyS/E8WXU/GL+6KpY2OdOifkieBJjRWPOwt0Dlf
         Zqb8Q3PG/RiQfSURuVcE/k+dCT64B4kIOpXhTUTEgWgQkl6N/TupW/SHhUwP8Y7Zw2kx
         ij+MRTwKjl0KcfiCnfnkSBEsjtOeTTap4wyzDb8x3l+7SfTnAUToyQc936KMdOzKlKIq
         aegA==
MIME-Version: 1.0
Received: by 10.182.240.41 with SMTP id vx9mr51314635obc.10.1357982522204;
 Sat, 12 Jan 2013 01:22:02 -0800 (PST)
Received: by 10.182.204.67 with HTTP; Sat, 12 Jan 2013 01:22:02 -0800 (PST)
In-Reply-To: <1357944610039-4032667.post@n3.nabble.com>
References: <1357758298989-4031956.post@n3.nabble.com>
	<50EDC042.50306@getrailo.org>
	<1357759262767-4031974.post@n3.nabble.com>
	<6AEE0C09-46B5-4527-9805-D30F50D1A291@gmail.com>
	<1357765731298-4032029.post@n3.nabble.com>
	<50EDE2F4.3030703@getrailo.org>
	<1357768715460-4032038.post@n3.nabble.com>
	<56C47385-FFD3-4D13-995D-3896AC46639D@gmail.com>
	<1357876225775-4032420.post@n3.nabble.com>
	<1357944610039-4032667.post@n3.nabble.com>
Date: Sat, 12 Jan 2013 17:22:02 +0800
Message-ID: <CAJFpt4Vz7E0crCb1Ftg8sr-cifjmJJo_9sNTqvu704QWn48VCA@mail.gmail.com>
Subject: Re: Upgrade Lucene to latest version (4.0) from 2.4.0
From: Naresh <nnaresh@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=14dae93b58e6d8e20d04d313f149
X-Virus-Checked: Checked by ClamAV on apache.org

--14dae93b58e6d8e20d04d313f149
Content-Type: text/plain; charset=ISO-8859-1

NRT search (http://wiki.apache.org/lucene-java/NearRealtimeSearch)

On Sat, Jan 12, 2013 at 6:50 AM, saisantoshi <saisantoshi76@gmail.com>wrote:

> I was just going through compiling our sources against 4.0 and it seems
> there
> are quite some API changes. Any major functionality changes from 2.4 - 4.0?
> with respect to indexing/searching.
>
> Thanks,
> Sai.
>
>
>
> --
> View this message in context:
> http://lucene.472066.n3.nabble.com/Upgrade-Lucene-to-latest-version-4-0-from-2-4-0-tp4031956p4032667.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
Regards
Naresh

--14dae93b58e6d8e20d04d313f149--

From java-user-return-54678-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Sun Jan 13 07:14:29 2013
Return-Path: <java-user-return-54678-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id D4A9FD4D3
	for <apmail-lucene-java-user-archive@www.apache.org>; Sun, 13 Jan 2013 07:14:29 +0000 (UTC)
Received: (qmail 81857 invoked by uid 500); 13 Jan 2013 07:14:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81311 invoked by uid 500); 13 Jan 2013 07:14:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81253 invoked by uid 99); 13 Jan 2013 07:14:18 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 13 Jan 2013 07:14:18 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.160.47] (HELO mail-pb0-f47.google.com) (209.85.160.47)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 13 Jan 2013 07:14:09 +0000
Received: by mail-pb0-f47.google.com with SMTP id un1so1634228pbc.34
        for <java-user@lucene.apache.org>; Sat, 12 Jan 2013 23:13:48 -0800 (PST)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=x-received:message-id:date:from:user-agent:mime-version:to:subject
         :content-type:content-transfer-encoding:x-gm-message-state;
        bh=TRw66NALjiXrqTTbhq0EuDdBMI68VpY/qgj4EzYHbMI=;
        b=XI+Zlp4sX5xa2cmi9uADhjjTt2r+of1QBdvZ1KQd3SD82N2NUnSI3DJjjMvVD/SAUw
         EcEsMsKAmE08UrDekeGywMXXYtgp607FxgTkkUd7auXrTe6uHiaOn+sgyc/IU8p/Kt3H
         Uz+rtrVIUXZly9dgOpe1Y6uvRGGE5HdTtXTFYV8EuN++KSjCKyTGxw9xAKTe1CyHev6O
         ZpxWbq+BsLs0KJiPD6nQTJgZLxlZOxfIyHeQWI6rB9kpVwcOUZhFKUc/7UgAgUdWVvZp
         V+Cdq3o7R2wNoWzv1GvVUkXJt5ZjZwKXUCEn4uyINc0C8crBx+XB+5k0PIOa1Z/g+40/
         vztg==
X-Received: by 10.68.231.10 with SMTP id tc10mr240816040pbc.81.1358061228034;
        Sat, 12 Jan 2013 23:13:48 -0800 (PST)
Received: from [192.168.0.11] (cpe-98-145-203-109.socal.res.rr.com. [98.145.203.109])
        by mx.google.com with ESMTPS id q4sm3307679paz.20.2013.01.12.23.13.46
        (version=TLSv1 cipher=ECDHE-RSA-RC4-SHA bits=128/128);
        Sat, 12 Jan 2013 23:13:47 -0800 (PST)
Message-ID: <50F25EA7.5030904@getrailo.org>
Date: Sat, 12 Jan 2013 23:13:43 -0800
From: "Igal @ getRailo.org" <igal@getrailo.org>
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:17.0) Gecko/17.0 Thunderbird/17.0
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Analyzer in QueryParser behaves differently from IndexWriter
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Gm-Message-State: ALoCoQm8GIBSBJfM2p4BNW0zTX5wBDu/xxwb3Jw8OtfGkAjVo6eI3+kkR8Ih34zp8XhqxPtHE46b
X-Virus-Checked: Checked by ClamAV on apache.org

hi,

I've created an Analyzer that performs a few filtering tasks, including 
creating Shingles and term Replacements among other things.

I use that Analyzer with IndexWriter and it works as expected.  but when 
I use that same Analyzer with QueryParser 
(org.apache.lucene.queryparser.classic.QueryParser) it behaves 
differently.  specifically it does not create shingles.  see below the 
output for a simple phrase of 4 terms:  "word1 word2 word3 word4"

from IndexWriter (shingle terms created as expected -- total of 7 terms):

term: word1	term=word1,bytes=[77 6f 72 64 31],startOffset=0,endOffset=5,punct=0,positionIncrement=1,position=1,type=word,keyword=false
term: word2	term=word2,bytes=[77 6f 72 64 32],startOffset=6,endOffset=11,punct=0,positionIncrement=1,position=2,type=word,keyword=false
term: word1 word2	term=word1 word2,bytes=[77 6f 72 64 31 20 77 6f 72 64 32],startOffset=6,endOffset=11,punct=0,positionIncrement=0,position=2,type=SHINGLE,keyword=false
term: word3	term=word3,bytes=[77 6f 72 64 33],startOffset=12,endOffset=17,punct=0,positionIncrement=1,position=3,type=word,keyword=false
term: word2 word3	term=word2 word3,bytes=[77 6f 72 64 32 20 77 6f 72 64 33],startOffset=12,endOffset=17,punct=0,positionIncrement=0,position=3,type=SHINGLE,keyword=false
term: word4	term=word4,bytes=[77 6f 72 64 34],startOffset=18,endOffset=23,punct=0,positionIncrement=1,position=4,type=word,keyword=false
term: word3 word4	term=word3 word4,bytes=[77 6f 72 64 33 20 77 6f 72 64 34],startOffset=18,endOffset=23,punct=0,positionIncrement=0,position=4,type=SHINGLE,keyword=false


from QueryParser (shingle terms not created -- only 4 terms):

term: word1	term=word1,bytes=[77 6f 72 64 31],startOffset=0,endOffset=5,punct=0,positionIncrement=1,position=1,type=word,keyword=false
term: word2	term=word2,bytes=[77 6f 72 64 32],startOffset=0,endOffset=5,punct=0,positionIncrement=1,position=1,type=word,keyword=false
term: word3	term=word3,bytes=[77 6f 72 64 33],startOffset=0,endOffset=5,punct=0,positionIncrement=1,position=1,type=word,keyword=false
term: word4	term=word4,bytes=[77 6f 72 64 34],startOffset=0,endOffset=5,punct=0,positionIncrement=1,position=1,type=word,keyword=false


can anyone tell me what I'm doing wrong?

thank you,


Igal






---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54679-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Sun Jan 13 13:43:13 2013
Return-Path: <java-user-return-54679-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 2D529E98F
	for <apmail-lucene-java-user-archive@www.apache.org>; Sun, 13 Jan 2013 13:43:13 +0000 (UTC)
Received: (qmail 61263 invoked by uid 500); 13 Jan 2013 13:43:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60981 invoked by uid 500); 13 Jan 2013 13:43:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60953 invoked by uid 99); 13 Jan 2013 13:43:06 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 13 Jan 2013 13:43:06 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=MIME_QP_LONG_LINE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erik.hatcher@gmail.com designates 209.85.220.178 as permitted sender)
Received: from [209.85.220.178] (HELO mail-vc0-f178.google.com) (209.85.220.178)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 13 Jan 2013 13:42:59 +0000
Received: by mail-vc0-f178.google.com with SMTP id l6so2808062vcl.9
        for <java-user@lucene.apache.org>; Sun, 13 Jan 2013 05:42:38 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=x-received:references:mime-version:in-reply-to:content-type
         :content-transfer-encoding:message-id:cc:x-mailer:from:subject:date
         :to;
        bh=+jv3S/JtCwGTEMJ4E50UJVOnwjlJqMVol5mHjvNC4bM=;
        b=XPzNHXr/J0wG08c0SxigrAM9QrnD3R1kvWNP7hutfLYNemqd2A5JsD5ybC+w3o14rP
         E1jeObNYOi0ZPgVldPGutCHC94uN51FfCBaE1Y4I7g7ZsOYrv8uBh5lVnRY1XicjWvP+
         DEyETDqTf3o1RLGl3UbyUvhEU6mfzt7blIGgV+f1QctvnifwzdGImcp+hPrpza+sTgqO
         /aMVyHv2T7LRuZqGSsOP44o6haYnTD7gR8wUNVHu6x+oP6eqLyuU7HEI8LLMzoscMCgW
         8NltwX/Y74MVkx7RJs4l3XVhMYTyagXhr3lOvNWWT/kj1mlpqAtRIwqRHtGextJI0QpE
         7nJg==
X-Received: by 10.220.107.5 with SMTP id z5mr99732601vco.22.1358084558797;
        Sun, 13 Jan 2013 05:42:38 -0800 (PST)
Received: from [10.161.94.178] (mobile-198-228-207-075.mycingular.net. [198.228.207.75])
        by mx.google.com with ESMTPS id x17sm5201456vdi.1.2013.01.13.05.42.36
        (version=TLSv1 cipher=ECDHE-RSA-RC4-SHA bits=128/128);
        Sun, 13 Jan 2013 05:42:38 -0800 (PST)
References: <50F25EA7.5030904@getrailo.org>
Mime-Version: 1.0 (1.0)
In-Reply-To: <50F25EA7.5030904@getrailo.org>
Content-Type: text/plain;
	charset=us-ascii
Content-Transfer-Encoding: quoted-printable
Message-Id: <DFF76882-583A-40FC-ACCE-628293986EDF@gmail.com>
Cc: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
X-Mailer: iPhone Mail (10A551)
From: Erik Hatcher <erik.hatcher@gmail.com>
Subject: Re: Analyzer in QueryParser behaves differently from IndexWriter
Date: Sun, 13 Jan 2013 08:42:34 -0500
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

The analyzer through QueryParser is invoked for each "clause" and thus in yo=
ur example it's invoked 4 times and thus each invocation only sees one word/=
term.=20

    Erik

On Jan 13, 2013, at 2:13, "Igal @ getRailo.org" <igal@getrailo.org> wrote:

> hi,
>=20
> I've created an Analyzer that performs a few filtering tasks, including cr=
eating Shingles and term Replacements among other things.
>=20
> I use that Analyzer with IndexWriter and it works as expected.  but when I=
 use that same Analyzer with QueryParser (org.apache.lucene.queryparser.clas=
sic.QueryParser) it behaves differently.  specifically it does not create sh=
ingles.  see below the output for a simple phrase of 4 terms:  "word1 word2 w=
ord3 word4"
>=20
> from IndexWriter (shingle terms created as expected -- total of 7 terms):
>=20
> term: word1    term=3Dword1,bytes=3D[77 6f 72 64 31],startOffset=3D0,endOf=
fset=3D5,punct=3D0,positionIncrement=3D1,position=3D1,type=3Dword,keyword=3D=
false
> term: word2    term=3Dword2,bytes=3D[77 6f 72 64 32],startOffset=3D6,endOf=
fset=3D11,punct=3D0,positionIncrement=3D1,position=3D2,type=3Dword,keyword=3D=
false
> term: word1 word2    term=3Dword1 word2,bytes=3D[77 6f 72 64 31 20 77 6f 7=
2 64 32],startOffset=3D6,endOffset=3D11,punct=3D0,positionIncrement=3D0,posi=
tion=3D2,type=3DSHINGLE,keyword=3Dfalse
> term: word3    term=3Dword3,bytes=3D[77 6f 72 64 33],startOffset=3D12,endO=
ffset=3D17,punct=3D0,positionIncrement=3D1,position=3D3,type=3Dword,keyword=3D=
false
> term: word2 word3    term=3Dword2 word3,bytes=3D[77 6f 72 64 32 20 77 6f 7=
2 64 33],startOffset=3D12,endOffset=3D17,punct=3D0,positionIncrement=3D0,pos=
ition=3D3,type=3DSHINGLE,keyword=3Dfalse
> term: word4    term=3Dword4,bytes=3D[77 6f 72 64 34],startOffset=3D18,endO=
ffset=3D23,punct=3D0,positionIncrement=3D1,position=3D4,type=3Dword,keyword=3D=
false
> term: word3 word4    term=3Dword3 word4,bytes=3D[77 6f 72 64 33 20 77 6f 7=
2 64 34],startOffset=3D18,endOffset=3D23,punct=3D0,positionIncrement=3D0,pos=
ition=3D4,type=3DSHINGLE,keyword=3Dfalse
>=20
>=20
> from QueryParser (shingle terms not created -- only 4 terms):
>=20
> term: word1    term=3Dword1,bytes=3D[77 6f 72 64 31],startOffset=3D0,endOf=
fset=3D5,punct=3D0,positionIncrement=3D1,position=3D1,type=3Dword,keyword=3D=
false
> term: word2    term=3Dword2,bytes=3D[77 6f 72 64 32],startOffset=3D0,endOf=
fset=3D5,punct=3D0,positionIncrement=3D1,position=3D1,type=3Dword,keyword=3D=
false
> term: word3    term=3Dword3,bytes=3D[77 6f 72 64 33],startOffset=3D0,endOf=
fset=3D5,punct=3D0,positionIncrement=3D1,position=3D1,type=3Dword,keyword=3D=
false
> term: word4    term=3Dword4,bytes=3D[77 6f 72 64 34],startOffset=3D0,endOf=
fset=3D5,punct=3D0,positionIncrement=3D1,position=3D1,type=3Dword,keyword=3D=
false
>=20
>=20
> can anyone tell me what I'm doing wrong?
>=20
> thank you,
>=20
>=20
> Igal
>=20
>=20
>=20
>=20
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54680-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Sun Jan 13 21:03:57 2013
Return-Path: <java-user-return-54680-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 5EDCBE0F5
	for <apmail-lucene-java-user-archive@www.apache.org>; Sun, 13 Jan 2013 21:03:57 +0000 (UTC)
Received: (qmail 52083 invoked by uid 500); 13 Jan 2013 21:03:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52044 invoked by uid 500); 13 Jan 2013 21:03:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52033 invoked by uid 99); 13 Jan 2013 21:03:55 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 13 Jan 2013 21:03:55 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.160.46] (HELO mail-pb0-f46.google.com) (209.85.160.46)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 13 Jan 2013 21:03:48 +0000
Received: by mail-pb0-f46.google.com with SMTP id wy7so1796204pbc.33
        for <java-user@lucene.apache.org>; Sun, 13 Jan 2013 13:03:26 -0800 (PST)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=x-received:message-id:date:from:user-agent:mime-version:to:subject
         :references:in-reply-to:content-type:content-transfer-encoding
         :x-gm-message-state;
        bh=Vy4Lz9caizKwvSVY2YXqt/khNCFej3unFz0yU3OPzQk=;
        b=gVqyJ7AnV2o0f8KjvWzs6uOt8ce5zl+FsgRh1mmDGwD12ou3eHnJB38dh24WSgN2Oq
         QuuIg6LVDg7qQ3KvAJxDOK4snZg1gba3q2b7WZaO9YxtdM4l29o78dqMWvzAiHCy906i
         kSz+EuHM+F0c2p8wWfVtPyHAuXKDB+3B9n9tDclrxMU7qKKIy/JdBWZ30YHSQIa5rTgK
         TIiMsWjgVL408g16V9hf1XU1XkdKs2gFxJk/biNz1wGXbgd7PR0tNv1L79ndUYCzbTLx
         qrkAF5R2VktjYhTpxnhRDrA3+wEeObhOf07KQWW3bAK14bHlNgm0gzy7cvpnWG7qlna0
         1UxQ==
X-Received: by 10.68.231.41 with SMTP id td9mr247412347pbc.128.1358111006608;
        Sun, 13 Jan 2013 13:03:26 -0800 (PST)
Received: from [192.168.0.11] (cpe-98-145-203-109.socal.res.rr.com. [98.145.203.109])
        by mx.google.com with ESMTPS id nm2sm6847467pbc.43.2013.01.13.13.03.24
        (version=TLSv1 cipher=ECDHE-RSA-RC4-SHA bits=128/128);
        Sun, 13 Jan 2013 13:03:25 -0800 (PST)
Message-ID: <50F32119.2020708@getrailo.org>
Date: Sun, 13 Jan 2013 13:03:21 -0800
From: "Igal @ getRailo.org" <igal@getrailo.org>
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:17.0) Gecko/17.0 Thunderbird/17.0
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Analyzer in QueryParser behaves differently from IndexWriter
References: <50F25EA7.5030904@getrailo.org> <DFF76882-583A-40FC-ACCE-628293986EDF@gmail.com>
In-Reply-To: <DFF76882-583A-40FC-ACCE-628293986EDF@gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Gm-Message-State: ALoCoQlpXSqCjsQq32swngt1EJTKG33QsUNr0vGt4gyUdYoCAvOmNVGdiqRyuTyhzquyO/ush+6J
X-Virus-Checked: Checked by ClamAV on apache.org

thanks Erik.

I tried putting the query in "double quotes" and it made some difference 
but still not exactly what I'm looking for.

so what's my best solution?  to avoid using the QueryParser and instead 
"parse" the query myself?  is there a different (better) query parser 
for this situation?


Igal


On 1/13/2013 5:42 AM, Erik Hatcher wrote:
> The analyzer through QueryParser is invoked for each "clause" and thus in your example it's invoked 4 times and thus each invocation only sees one word/term.
>
>      Erik
>
> On Jan 13, 2013, at 2:13, "Igal @ getRailo.org" <igal@getrailo.org> wrote:
>
>> hi,
>>
>> I've created an Analyzer that performs a few filtering tasks, including creating Shingles and term Replacements among other things.
>>
>> I use that Analyzer with IndexWriter and it works as expected.  but when I use that same Analyzer with QueryParser (org.apache.lucene.queryparser.classic.QueryParser) it behaves differently.  specifically it does not create shingles.  see below the output for a simple phrase of 4 terms:  "word1 word2 word3 word4"
>>
>> from IndexWriter (shingle terms created as expected -- total of 7 terms):
>>
>> term: word1    term=word1,bytes=[77 6f 72 64 31],startOffset=0,endOffset=5,punct=0,positionIncrement=1,position=1,type=word,keyword=false
>> term: word2    term=word2,bytes=[77 6f 72 64 32],startOffset=6,endOffset=11,punct=0,positionIncrement=1,position=2,type=word,keyword=false
>> term: word1 word2    term=word1 word2,bytes=[77 6f 72 64 31 20 77 6f 72 64 32],startOffset=6,endOffset=11,punct=0,positionIncrement=0,position=2,type=SHINGLE,keyword=false
>> term: word3    term=word3,bytes=[77 6f 72 64 33],startOffset=12,endOffset=17,punct=0,positionIncrement=1,position=3,type=word,keyword=false
>> term: word2 word3    term=word2 word3,bytes=[77 6f 72 64 32 20 77 6f 72 64 33],startOffset=12,endOffset=17,punct=0,positionIncrement=0,position=3,type=SHINGLE,keyword=false
>> term: word4    term=word4,bytes=[77 6f 72 64 34],startOffset=18,endOffset=23,punct=0,positionIncrement=1,position=4,type=word,keyword=false
>> term: word3 word4    term=word3 word4,bytes=[77 6f 72 64 33 20 77 6f 72 64 34],startOffset=18,endOffset=23,punct=0,positionIncrement=0,position=4,type=SHINGLE,keyword=false
>>
>>
>> from QueryParser (shingle terms not created -- only 4 terms):
>>
>> term: word1    term=word1,bytes=[77 6f 72 64 31],startOffset=0,endOffset=5,punct=0,positionIncrement=1,position=1,type=word,keyword=false
>> term: word2    term=word2,bytes=[77 6f 72 64 32],startOffset=0,endOffset=5,punct=0,positionIncrement=1,position=1,type=word,keyword=false
>> term: word3    term=word3,bytes=[77 6f 72 64 33],startOffset=0,endOffset=5,punct=0,positionIncrement=1,position=1,type=word,keyword=false
>> term: word4    term=word4,bytes=[77 6f 72 64 34],startOffset=0,endOffset=5,punct=0,positionIncrement=1,position=1,type=word,keyword=false
>>
>>
>> can anyone tell me what I'm doing wrong?
>>
>> thank you,
>>
>>
>> Igal
>>
>>
>>
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54681-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Jan 14 07:43:06 2013
Return-Path: <java-user-return-54681-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id C3A12EB8A
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon, 14 Jan 2013 07:43:06 +0000 (UTC)
Received: (qmail 16456 invoked by uid 500); 14 Jan 2013 07:43:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16149 invoked by uid 500); 14 Jan 2013 07:43:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16117 invoked by uid 99); 14 Jan 2013 07:43:03 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Jan 2013 07:43:03 +0000
X-ASF-Spam-Status: No, hits=1.7 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of gksrb92@gmail.com designates 209.85.220.172 as permitted sender)
Received: from [209.85.220.172] (HELO mail-vc0-f172.google.com) (209.85.220.172)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Jan 2013 07:42:53 +0000
Received: by mail-vc0-f172.google.com with SMTP id fw7so3250720vcb.31
        for <java-user@lucene.apache.org>; Sun, 13 Jan 2013 23:42:32 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=L1yuOyzQ7ZnBv+3Ffaxmj/f1JAysYUuHkqP4Nl2NqlM=;
        b=arY+TRV+lCYGhRyDa/VynAIcWPjmA6I/Zjd2alI2ORjLoaS9FW85OxYb7+LfRbW6+M
         da0rrCTc/vs2DGXk4vAFuWznMxKvCUg2iKUlX0OPwfxi4vzIIaQjp3Naq+joAKVfK7zO
         XYzNP8ji8T34oDth1GjF/CXoWUP7l6KXosdGEAxLyFeCzplYarEv/rV59mQFE8cyks0l
         U62I6a689j+6Cig9n6QoMVQiKLdIZpdM35rK6+NOxGr50Jdidmu8ybj88NaebUllnZHR
         n0IUfZA5qv8Wva4pEETrXfrtyXIa9yO7TLQeQpZ6STLkvB3Iy2dAW/WQzX9XkxayPv1t
         XDiQ==
MIME-Version: 1.0
Received: by 10.52.38.34 with SMTP id d2mr90779740vdk.63.1358149352584; Sun,
 13 Jan 2013 23:42:32 -0800 (PST)
Received: by 10.52.92.234 with HTTP; Sun, 13 Jan 2013 23:42:32 -0800 (PST)
In-Reply-To: <CAEY5pxXfen_Pobmm3RnOkcuYeSqChu0Vbz-oARGFfhRCHq+ESw@mail.gmail.com>
References: <CAOZ_vPYod8eWo0VwDtYvJoPBooOPuWp+Kv7=pRB6Vpd+o01_Xw@mail.gmail.com>
	<CAEY5pxXfen_Pobmm3RnOkcuYeSqChu0Vbz-oARGFfhRCHq+ESw@mail.gmail.com>
Date: Mon, 14 Jan 2013 09:42:32 +0200
Message-ID: <CAOZ_vPY1Du15xYVk9qmDMAYUs77BrxUOasSD5SijPfUUtcPBPQ@mail.gmail.com>
Subject: Re: Query beginning with special characters
From: Hankyu Kim <gksrb92@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=bcaec51d2590b6741004d33ac92f
X-Virus-Checked: Checked by ClamAV on apache.org

--bcaec51d2590b6741004d33ac92f
Content-Type: text/plain; charset=ISO-8859-1

I'm working with Lucene 4.0 and I didn't use lucene's QueryParser, so
setAllowLeadingWildcard() is irrelevant.
I also realised the issue wasn't with querying, but it was indexing whihch
left the terms with leading special character out.

My goal was to do a fuzzymatch by creating a trigram index. The idea is to
tokenize the documents into trigrams, not by words during indexing and
searching so lucene can search for part of a word or phrase.

Say the original text in the document said : "Sample text with special
characters :) and such"
It's tokenized into
 'sam', 'amp', 'mpl', 'ple', 'let', 'ete', 'tex', 'ext', 'xtw', 'twi',
'wit', 'ith', 'ths', 'hsp', 'spe', 'pec', 'eci', 'cia', 'ial', 'alc',
'lch', 'cha', 'har', 'ara', 'rac', 'act', 'cte', 'ter', 'ers', 'rs:',
's:)', ':)a', ')an', 'and', 'nds', 'dsu', 'suc', 'uch'.
The above is output from my tokenizer so there's nothing wrong with
creating trigrmas. However, when I check the index with lukeall, all the
other trigrams are indexed correctly except for the terms ':)a' and ')an'.
Since the missing indexes are related to lucene's special characters, I
don't think it's got to do with my custom code.

I only changed analyser in the IndexFiles.java from demo to index the file.
Honestly, I can't locate even the exact class in which the problem is
caused. I'm only guessing IndexWriterConfig or IndexWriter is discarding
the terms with leading special characters.

I hope the above infromation helps.

2013/1/11 Ian Lea <ian.lea@gmail.com>

> QueryParser has a setAllowLeadingWildcard() method.  Could that be
> relevant?
>
> What version of lucene?  Can you post some simple examples of what
> does/doesn't work? Post the smallest possible, but complete, code that
> demonstrates the problem?
>
>
> With any question that mentions a custom version of something, that
> custom version has to be the prime suspect for any problems.
>
>
> --
> Ian.
>
>
> On Thu, Jan 10, 2013 at 12:08 PM, Hankyu Kim <gksrb92@gmail.com> wrote:
> > Hi.
> >
> > I've created a custom analyzer that treats special characters just like
> any
> > other. The index works fine all the time even when the query includes
> > special characters, except when the special characters come to the
> begining
> > of the query.
> >
> > I'm using spanTermQuery and wildCardQuery, and they both seem to suffer
> the
> > same issue with queries begining with special characters. Is it a
> > limitation of Lucene or am I missing something?
> >
> > Thanks
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--bcaec51d2590b6741004d33ac92f--

From java-user-return-54682-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Jan 14 11:03:38 2013
Return-Path: <java-user-return-54682-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 9940CE55D
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon, 14 Jan 2013 11:03:38 +0000 (UTC)
Received: (qmail 4072 invoked by uid 500); 14 Jan 2013 11:03:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3999 invoked by uid 500); 14 Jan 2013 11:03:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3981 invoked by uid 99); 14 Jan 2013 11:03:35 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Jan 2013 11:03:35 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ian.lea@gmail.com designates 74.125.82.171 as permitted sender)
Received: from [74.125.82.171] (HELO mail-we0-f171.google.com) (74.125.82.171)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Jan 2013 11:03:27 +0000
Received: by mail-we0-f171.google.com with SMTP id u3so2023275wey.30
        for <java-user@lucene.apache.org>; Mon, 14 Jan 2013 03:03:07 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        bh=9gcu8B6n/9ryOMh0oHktbaySIS6lFMdITpjlgahNhdI=;
        b=ur8KjPnnBkeOvD3JtsCWjDF8tE9las5uvHTmRcg8mIgg+uxbi30QwUnC7cNWkfqwIm
         dEo2U9U+iUtX+Zjd0kB6SeHiUXz8WkW34MAtjpaV+OPuUeiAvQBOa1zr2t11GjumPw1V
         SfKMFXMdjLHrLumebeRg/79n+35kY43s0RVPnWOwZN4VqkueHzeD/B7HIu3jD95IzgUG
         FpO6tbwigN7tu5ADGgFmB9qrO2A7Ge3LgL8Mkqv6R8ANqadEGxpbxAWEW0QXgjgLj8vu
         ZYNkiGnwibJwT8cPHTea2MuJPLFxClL/OtvhwJf24qn7wD77PQnfiB/2WFmV/PHTGiNq
         SWsw==
Received: by 10.194.172.228 with SMTP id bf4mr42905174wjc.38.1358161387015;
 Mon, 14 Jan 2013 03:03:07 -0800 (PST)
MIME-Version: 1.0
Received: by 10.194.57.11 with HTTP; Mon, 14 Jan 2013 03:02:46 -0800 (PST)
In-Reply-To: <CAOZ_vPY1Du15xYVk9qmDMAYUs77BrxUOasSD5SijPfUUtcPBPQ@mail.gmail.com>
References: <CAOZ_vPYod8eWo0VwDtYvJoPBooOPuWp+Kv7=pRB6Vpd+o01_Xw@mail.gmail.com>
 <CAEY5pxXfen_Pobmm3RnOkcuYeSqChu0Vbz-oARGFfhRCHq+ESw@mail.gmail.com> <CAOZ_vPY1Du15xYVk9qmDMAYUs77BrxUOasSD5SijPfUUtcPBPQ@mail.gmail.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Mon, 14 Jan 2013 11:02:46 +0000
Message-ID: <CAEY5pxVeDaMJ-=c2vVzV7W-dRg3ZZhs2rBTeYEODdzmgjSncgg@mail.gmail.com>
Subject: Re: Query beginning with special characters
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

It won't be IndexWriter or IndexWriterConfig.  What exactly does your
analyzer do - what is the full chain of tokenization?  Are you saying
that  ':)a' and ')an' are not indexed?  Surely that is correct given
your input with a space after the :).  And before as well so 's:)', is
also suspect.

--
Ian.


On Mon, Jan 14, 2013 at 7:42 AM, Hankyu Kim <gksrb92@gmail.com> wrote:
> I'm working with Lucene 4.0 and I didn't use lucene's QueryParser, so
> setAllowLeadingWildcard() is irrelevant.
> I also realised the issue wasn't with querying, but it was indexing whihch
> left the terms with leading special character out.
>
> My goal was to do a fuzzymatch by creating a trigram index. The idea is to
> tokenize the documents into trigrams, not by words during indexing and
> searching so lucene can search for part of a word or phrase.
>
> Say the original text in the document said : "Sample text with special
> characters :) and such"
> It's tokenized into
>  'sam', 'amp', 'mpl', 'ple', 'let', 'ete', 'tex', 'ext', 'xtw', 'twi',
> 'wit', 'ith', 'ths', 'hsp', 'spe', 'pec', 'eci', 'cia', 'ial', 'alc',
> 'lch', 'cha', 'har', 'ara', 'rac', 'act', 'cte', 'ter', 'ers', 'rs:',
> 's:)', ':)a', ')an', 'and', 'nds', 'dsu', 'suc', 'uch'.
> The above is output from my tokenizer so there's nothing wrong with
> creating trigrmas. However, when I check the index with lukeall, all the
> other trigrams are indexed correctly except for the terms ':)a' and ')an'.
> Since the missing indexes are related to lucene's special characters, I
> don't think it's got to do with my custom code.
>
> I only changed analyser in the IndexFiles.java from demo to index the file.
> Honestly, I can't locate even the exact class in which the problem is
> caused. I'm only guessing IndexWriterConfig or IndexWriter is discarding
> the terms with leading special characters.
>
> I hope the above infromation helps.
>
> 2013/1/11 Ian Lea <ian.lea@gmail.com>
>
>> QueryParser has a setAllowLeadingWildcard() method.  Could that be
>> relevant?
>>
>> What version of lucene?  Can you post some simple examples of what
>> does/doesn't work? Post the smallest possible, but complete, code that
>> demonstrates the problem?
>>
>>
>> With any question that mentions a custom version of something, that
>> custom version has to be the prime suspect for any problems.
>>
>>
>> --
>> Ian.
>>
>>
>> On Thu, Jan 10, 2013 at 12:08 PM, Hankyu Kim <gksrb92@gmail.com> wrote:
>> > Hi.
>> >
>> > I've created a custom analyzer that treats special characters just like
>> any
>> > other. The index works fine all the time even when the query includes
>> > special characters, except when the special characters come to the
>> begining
>> > of the query.
>> >
>> > I'm using spanTermQuery and wildCardQuery, and they both seem to suffer
>> the
>> > same issue with queries begining with special characters. Is it a
>> > limitation of Lucene or am I missing something?
>> >
>> > Thanks
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54683-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Jan 14 11:22:48 2013
Return-Path: <java-user-return-54683-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 85E38E5D4
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon, 14 Jan 2013 11:22:48 +0000 (UTC)
Received: (qmail 63362 invoked by uid 500); 14 Jan 2013 11:22:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63171 invoked by uid 500); 14 Jan 2013 11:22:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63143 invoked by uid 99); 14 Jan 2013 11:22:41 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Jan 2013 11:22:41 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ian.lea@gmail.com designates 74.125.82.176 as permitted sender)
Received: from [74.125.82.176] (HELO mail-we0-f176.google.com) (74.125.82.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Jan 2013 11:22:33 +0000
Received: by mail-we0-f176.google.com with SMTP id r5so2020770wey.35
        for <java-user@lucene.apache.org>; Mon, 14 Jan 2013 03:22:13 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        bh=hMWkEpDBGqpNotsYunjN5aLtV5ivQlhNSFrEKEFnDbs=;
        b=BNXHSEgQFsa9gwap8xfJzU+I7h7CnGvAPNSXRTWKxLPZ5w+I/GDc0Q8BsehJK0aXuA
         DDaHlRR9P4smHoI/4D+WU5B0VxR1PboPhtkw5ccOn8gjAg9tA5E06brgkIEP/bI91fgK
         XJTPGBXII0w9EwW1F4cr543zAnc8GptSykA7mzUO/xIs2fsfmm7QzJHl3nbBcgKxA/Zd
         M5/VYUbi4mY23+l5euOUek4o1fmGJihEzHMoluqukncubdhjdtsACDQH5hQvl2Zszcwq
         7vSJO/fSrAjabF5alYIhVRibiSJZvBZEWptjpCA49gyGHjl7XJentB04mN+75ZcxGvOT
         /ktg==
Received: by 10.194.108.101 with SMTP id hj5mr36880490wjb.6.1358162533784;
 Mon, 14 Jan 2013 03:22:13 -0800 (PST)
MIME-Version: 1.0
Received: by 10.194.57.11 with HTTP; Mon, 14 Jan 2013 03:21:53 -0800 (PST)
In-Reply-To: <CAEY5pxVeDaMJ-=c2vVzV7W-dRg3ZZhs2rBTeYEODdzmgjSncgg@mail.gmail.com>
References: <CAOZ_vPYod8eWo0VwDtYvJoPBooOPuWp+Kv7=pRB6Vpd+o01_Xw@mail.gmail.com>
 <CAEY5pxXfen_Pobmm3RnOkcuYeSqChu0Vbz-oARGFfhRCHq+ESw@mail.gmail.com>
 <CAOZ_vPY1Du15xYVk9qmDMAYUs77BrxUOasSD5SijPfUUtcPBPQ@mail.gmail.com> <CAEY5pxVeDaMJ-=c2vVzV7W-dRg3ZZhs2rBTeYEODdzmgjSncgg@mail.gmail.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Mon, 14 Jan 2013 11:21:53 +0000
Message-ID: <CAEY5pxUtpFwcTq=3sqf1LxCY5+60XwDzFhMYMbUHsU0nd-+TzQ@mail.gmail.com>
Subject: Re: Query beginning with special characters
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

In fact I see you are ignoring all spaces between words.  Maybe that's
deliberate.  Break it down into the smallest possible complete code
sample that shows the problem and post that.


--
Ian.


On Mon, Jan 14, 2013 at 11:02 AM, Ian Lea <ian.lea@gmail.com> wrote:
> It won't be IndexWriter or IndexWriterConfig.  What exactly does your
> analyzer do - what is the full chain of tokenization?  Are you saying
> that  ':)a' and ')an' are not indexed?  Surely that is correct given
> your input with a space after the :).  And before as well so 's:)', is
> also suspect.
>
> --
> Ian.
>
>
> On Mon, Jan 14, 2013 at 7:42 AM, Hankyu Kim <gksrb92@gmail.com> wrote:
>> I'm working with Lucene 4.0 and I didn't use lucene's QueryParser, so
>> setAllowLeadingWildcard() is irrelevant.
>> I also realised the issue wasn't with querying, but it was indexing whihch
>> left the terms with leading special character out.
>>
>> My goal was to do a fuzzymatch by creating a trigram index. The idea is to
>> tokenize the documents into trigrams, not by words during indexing and
>> searching so lucene can search for part of a word or phrase.
>>
>> Say the original text in the document said : "Sample text with special
>> characters :) and such"
>> It's tokenized into
>>  'sam', 'amp', 'mpl', 'ple', 'let', 'ete', 'tex', 'ext', 'xtw', 'twi',
>> 'wit', 'ith', 'ths', 'hsp', 'spe', 'pec', 'eci', 'cia', 'ial', 'alc',
>> 'lch', 'cha', 'har', 'ara', 'rac', 'act', 'cte', 'ter', 'ers', 'rs:',
>> 's:)', ':)a', ')an', 'and', 'nds', 'dsu', 'suc', 'uch'.
>> The above is output from my tokenizer so there's nothing wrong with
>> creating trigrmas. However, when I check the index with lukeall, all the
>> other trigrams are indexed correctly except for the terms ':)a' and ')an'.
>> Since the missing indexes are related to lucene's special characters, I
>> don't think it's got to do with my custom code.
>>
>> I only changed analyser in the IndexFiles.java from demo to index the file.
>> Honestly, I can't locate even the exact class in which the problem is
>> caused. I'm only guessing IndexWriterConfig or IndexWriter is discarding
>> the terms with leading special characters.
>>
>> I hope the above infromation helps.
>>
>> 2013/1/11 Ian Lea <ian.lea@gmail.com>
>>
>>> QueryParser has a setAllowLeadingWildcard() method.  Could that be
>>> relevant?
>>>
>>> What version of lucene?  Can you post some simple examples of what
>>> does/doesn't work? Post the smallest possible, but complete, code that
>>> demonstrates the problem?
>>>
>>>
>>> With any question that mentions a custom version of something, that
>>> custom version has to be the prime suspect for any problems.
>>>
>>>
>>> --
>>> Ian.
>>>
>>>
>>> On Thu, Jan 10, 2013 at 12:08 PM, Hankyu Kim <gksrb92@gmail.com> wrote:
>>> > Hi.
>>> >
>>> > I've created a custom analyzer that treats special characters just like
>>> any
>>> > other. The index works fine all the time even when the query includes
>>> > special characters, except when the special characters come to the
>>> begining
>>> > of the query.
>>> >
>>> > I'm using spanTermQuery and wildCardQuery, and they both seem to suffer
>>> the
>>> > same issue with queries begining with special characters. Is it a
>>> > limitation of Lucene or am I missing something?
>>> >
>>> > Thanks
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54684-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Jan 14 11:42:50 2013
Return-Path: <java-user-return-54684-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id CB68CE2DD
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon, 14 Jan 2013 11:42:50 +0000 (UTC)
Received: (qmail 8251 invoked by uid 500); 14 Jan 2013 11:42:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7937 invoked by uid 500); 14 Jan 2013 11:42:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7903 invoked by uid 99); 14 Jan 2013 11:42:42 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Jan 2013 11:42:42 +0000
X-ASF-Spam-Status: No, hits=1.7 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of gksrb92@gmail.com designates 209.85.220.170 as permitted sender)
Received: from [209.85.220.170] (HELO mail-vc0-f170.google.com) (209.85.220.170)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Jan 2013 11:42:35 +0000
Received: by mail-vc0-f170.google.com with SMTP id fl11so3480408vcb.29
        for <java-user@lucene.apache.org>; Mon, 14 Jan 2013 03:42:15 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=4m2BAo3jjPCLm1K50SR6dzCWFIKY2irORMHWENI/W2k=;
        b=IViKhx9AOwEYXH/P4doyagtk1RL0L2mlknH0/dPgXwjfG7OEbuZGJe20FVAiy13xL1
         FVWvjpcREp8SzdCoZZDxIc+O31fj7eyvDH7Ms/6LTvvP7OWFJ2XerwuleVxC5xo1D4Jw
         UVtuiksvbWjF1UtxrSVVef+zudHkt7ciBziLe3ZPVdi9VQTWHGdEuM1zrbqYMdfAKmMw
         6sFgugASYd2A07u+A8UuePHYrMGfWhIWp966vJwMons31BEebMp45cGoKyTtPYaIJzku
         lbYLdsk1Nqah5sSgpi6CuLRgMpj5hKHQf9Tdk0J9/q9jdN7NBdlzeHUHFxLzaLuCPQ+c
         d9ng==
MIME-Version: 1.0
Received: by 10.52.97.104 with SMTP id dz8mr89470199vdb.21.1358163735067; Mon,
 14 Jan 2013 03:42:15 -0800 (PST)
Received: by 10.52.92.234 with HTTP; Mon, 14 Jan 2013 03:42:14 -0800 (PST)
In-Reply-To: <CAEY5pxUtpFwcTq=3sqf1LxCY5+60XwDzFhMYMbUHsU0nd-+TzQ@mail.gmail.com>
References: <CAOZ_vPYod8eWo0VwDtYvJoPBooOPuWp+Kv7=pRB6Vpd+o01_Xw@mail.gmail.com>
	<CAEY5pxXfen_Pobmm3RnOkcuYeSqChu0Vbz-oARGFfhRCHq+ESw@mail.gmail.com>
	<CAOZ_vPY1Du15xYVk9qmDMAYUs77BrxUOasSD5SijPfUUtcPBPQ@mail.gmail.com>
	<CAEY5pxVeDaMJ-=c2vVzV7W-dRg3ZZhs2rBTeYEODdzmgjSncgg@mail.gmail.com>
	<CAEY5pxUtpFwcTq=3sqf1LxCY5+60XwDzFhMYMbUHsU0nd-+TzQ@mail.gmail.com>
Date: Mon, 14 Jan 2013 13:42:14 +0200
Message-ID: <CAOZ_vPZYgH7WcW2HD_BK6OHFEYGr11_TJJAWPDWMDo75CDRvCQ@mail.gmail.com>
Subject: Re: Query beginning with special characters
From: Hankyu Kim <gksrb92@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=20cf307f35f4f9bd0104d33e225d
X-Virus-Checked: Checked by ClamAV on apache.org

--20cf307f35f4f9bd0104d33e225d
Content-Type: text/plain; charset=ISO-8859-1

I did intend to ignore all the spaces, so that's not the problem.

Here's the tokenization chain in customAnalyser class, extending Analyser
    @Override
    protected TokenStreamComponents createComponents(String fieldName,
Reader reader) {
        NGramTokenizer src = new NGramTokenizer(matchVersion, reader); //
My NGramTokenizer

        TokenStream tok = new LowerCaseFilter(matchVersion, src);
        return new TokenStreamComponents(src, tok);
    }

NGramTokenizer's incrementToken() method.
    @Override
    public boolean incrementToken() throws IOException
    {
        clearAttributes();
        char[] termBuffer = termAtt.buffer();
        termAtt.setLength(GRAM_SIZE);

        startOffset++;                            // Values for offset
attribute
        offsetAtt.setOffset(startOffset, startOffset+ GRAM_SIZE-1);

        do
        {
            termBuffer[0] = termBuffer[1];            // Shift characters
to left
            termBuffer[1] = termBuffer[2];

            // Get next non-whitespace character
            int c = ' ';
            while(Character.isWhitespace(c))
            {
                if(position >= dataLength) // Read in buffer, if position
gets out of bound
                {
                    if(charUtils.fill(iobuffer, input))
                    {
                        dataLength = iobuffer.getLength();
                        position = 0;
                    }
                    else    // EOF
                        return false;
                }

                c = charUtils.codePointAt(iobuffer.getBuffer(),
position);    // Get next character
                position++;
            }

            Character.toChars(c, termBuffer, GRAM_SIZE-1);
//
System.out.print("'"+termBuffer[0]+termBuffer[1]+termBuffer[2]+"', ");
// This is how I got the output in the last email

        }
        while(Character.getNumericValue(termBuffer[0]) == -1);

        return true;
    }

2013/1/14 Ian Lea <ian.lea@gmail.com>

> In fact I see you are ignoring all spaces between words.  Maybe that's
> deliberate.  Break it down into the smallest possible complete code
> sample that shows the problem and post that.
>
>
> --
> Ian.
>
>
> On Mon, Jan 14, 2013 at 11:02 AM, Ian Lea <ian.lea@gmail.com> wrote:
> > It won't be IndexWriter or IndexWriterConfig.  What exactly does your
> > analyzer do - what is the full chain of tokenization?  Are you saying
> > that  ':)a' and ')an' are not indexed?  Surely that is correct given
> > your input with a space after the :).  And before as well so 's:)', is
> > also suspect.
> >
> > --
> > Ian.
> >
> >
> > On Mon, Jan 14, 2013 at 7:42 AM, Hankyu Kim <gksrb92@gmail.com> wrote:
> >> I'm working with Lucene 4.0 and I didn't use lucene's QueryParser, so
> >> setAllowLeadingWildcard() is irrelevant.
> >> I also realised the issue wasn't with querying, but it was indexing
> whihch
> >> left the terms with leading special character out.
> >>
> >> My goal was to do a fuzzymatch by creating a trigram index. The idea is
> to
> >> tokenize the documents into trigrams, not by words during indexing and
> >> searching so lucene can search for part of a word or phrase.
> >>
> >> Say the original text in the document said : "Sample text with special
> >> characters :) and such"
> >> It's tokenized into
> >>  'sam', 'amp', 'mpl', 'ple', 'let', 'ete', 'tex', 'ext', 'xtw', 'twi',
> >> 'wit', 'ith', 'ths', 'hsp', 'spe', 'pec', 'eci', 'cia', 'ial', 'alc',
> >> 'lch', 'cha', 'har', 'ara', 'rac', 'act', 'cte', 'ter', 'ers', 'rs:',
> >> 's:)', ':)a', ')an', 'and', 'nds', 'dsu', 'suc', 'uch'.
> >> The above is output from my tokenizer so there's nothing wrong with
> >> creating trigrmas. However, when I check the index with lukeall, all the
> >> other trigrams are indexed correctly except for the terms ':)a' and
> ')an'.
> >> Since the missing indexes are related to lucene's special characters, I
> >> don't think it's got to do with my custom code.
> >>
> >> I only changed analyser in the IndexFiles.java from demo to index the
> file.
> >> Honestly, I can't locate even the exact class in which the problem is
> >> caused. I'm only guessing IndexWriterConfig or IndexWriter is discarding
> >> the terms with leading special characters.
> >>
> >> I hope the above infromation helps.
> >>
> >> 2013/1/11 Ian Lea <ian.lea@gmail.com>
> >>
> >>> QueryParser has a setAllowLeadingWildcard() method.  Could that be
> >>> relevant?
> >>>
> >>> What version of lucene?  Can you post some simple examples of what
> >>> does/doesn't work? Post the smallest possible, but complete, code that
> >>> demonstrates the problem?
> >>>
> >>>
> >>> With any question that mentions a custom version of something, that
> >>> custom version has to be the prime suspect for any problems.
> >>>
> >>>
> >>> --
> >>> Ian.
> >>>
> >>>
> >>> On Thu, Jan 10, 2013 at 12:08 PM, Hankyu Kim <gksrb92@gmail.com>
> wrote:
> >>> > Hi.
> >>> >
> >>> > I've created a custom analyzer that treats special characters just
> like
> >>> any
> >>> > other. The index works fine all the time even when the query includes
> >>> > special characters, except when the special characters come to the
> >>> begining
> >>> > of the query.
> >>> >
> >>> > I'm using spanTermQuery and wildCardQuery, and they both seem to
> suffer
> >>> the
> >>> > same issue with queries begining with special characters. Is it a
> >>> > limitation of Lucene or am I missing something?
> >>> >
> >>> > Thanks
> >>>
> >>> ---------------------------------------------------------------------
> >>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >>> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>>
> >>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--20cf307f35f4f9bd0104d33e225d--

From java-user-return-54685-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Jan 14 12:04:51 2013
Return-Path: <java-user-return-54685-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id CE2A4E34E
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon, 14 Jan 2013 12:04:51 +0000 (UTC)
Received: (qmail 65512 invoked by uid 500); 14 Jan 2013 12:04:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65342 invoked by uid 500); 14 Jan 2013 12:04:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65321 invoked by uid 99); 14 Jan 2013 12:04:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Jan 2013 12:04:48 +0000
X-ASF-Spam-Status: No, hits=1.7 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of gksrb92@gmail.com designates 209.85.220.177 as permitted sender)
Received: from [209.85.220.177] (HELO mail-vc0-f177.google.com) (209.85.220.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Jan 2013 12:04:41 +0000
Received: by mail-vc0-f177.google.com with SMTP id m8so3388939vcd.22
        for <java-user@lucene.apache.org>; Mon, 14 Jan 2013 04:04:21 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=7vVxXYw7xFIYKVGT+NQHQXvGCeoa0BP6/XWonmvhUKw=;
        b=NuJFWkcyhJtkamIiwYpGYEfRgFCsx/t+E8fVWjYvNxerAXXqaoPk64z9A3BtPATq88
         iNxKgDR6s+Hxb1xYrloTa4qmaAfu6+EM9X/p6PRCu5bK7yCF0YKCc4LTlKbjAGupj8gg
         TSDxeJNMrqkFTSCc5QDc7i6ZVKD9vyR9QMZzUXl6L7hI/OoqbhF0yDocE596wC86jw1A
         kmXsKyUIWooAoOCAqiYL4rclofP3sFyZcnNl2yc/XprbRakg4XeoqsyAPFbw4OZ6socc
         ryGh+YZ9xXjDZ+LAsa9R33iU3jj6j1uMXmpJyOGR4ThOX5wg274fNnN/Dr2rxe88OBtW
         qJTQ==
MIME-Version: 1.0
Received: by 10.58.147.69 with SMTP id ti5mr64865457veb.32.1358165061115; Mon,
 14 Jan 2013 04:04:21 -0800 (PST)
Received: by 10.52.92.234 with HTTP; Mon, 14 Jan 2013 04:04:21 -0800 (PST)
In-Reply-To: <CAOZ_vPZYgH7WcW2HD_BK6OHFEYGr11_TJJAWPDWMDo75CDRvCQ@mail.gmail.com>
References: <CAOZ_vPYod8eWo0VwDtYvJoPBooOPuWp+Kv7=pRB6Vpd+o01_Xw@mail.gmail.com>
	<CAEY5pxXfen_Pobmm3RnOkcuYeSqChu0Vbz-oARGFfhRCHq+ESw@mail.gmail.com>
	<CAOZ_vPY1Du15xYVk9qmDMAYUs77BrxUOasSD5SijPfUUtcPBPQ@mail.gmail.com>
	<CAEY5pxVeDaMJ-=c2vVzV7W-dRg3ZZhs2rBTeYEODdzmgjSncgg@mail.gmail.com>
	<CAEY5pxUtpFwcTq=3sqf1LxCY5+60XwDzFhMYMbUHsU0nd-+TzQ@mail.gmail.com>
	<CAOZ_vPZYgH7WcW2HD_BK6OHFEYGr11_TJJAWPDWMDo75CDRvCQ@mail.gmail.com>
Date: Mon, 14 Jan 2013 14:04:21 +0200
Message-ID: <CAOZ_vPbLb0H9PU5JTxAneve55WUayOnfS2TSX2=OsYVmn9GVRQ@mail.gmail.com>
Subject: Re: Query beginning with special characters
From: Hankyu Kim <gksrb92@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=047d7b677b7e039fe204d33e7293
X-Virus-Checked: Checked by ClamAV on apache.org

--047d7b677b7e039fe204d33e7293
Content-Type: text/plain; charset=ISO-8859-1

I just found the cause of error and you were right about my code being the
source.
I used "Character.getNumericValue(termBuffer[0]) == -1" to test if
termBuffer[0] is equal to null, but apparently the special characters
return -1 as well when given as parameter.

Thank you for your help.

2013/1/14 Hankyu Kim <gksrb92@gmail.com>

> I did intend to ignore all the spaces, so that's not the problem.
>
> Here's the tokenization chain in customAnalyser class, extending Analyser
>     @Override
>     protected TokenStreamComponents createComponents(String fieldName,
> Reader reader) {
>         NGramTokenizer src = new NGramTokenizer(matchVersion, reader); //
> My NGramTokenizer
>
>         TokenStream tok = new LowerCaseFilter(matchVersion, src);
>         return new TokenStreamComponents(src, tok);
>     }
>
> NGramTokenizer's incrementToken() method.
>     @Override
>     public boolean incrementToken() throws IOException
>     {
>         clearAttributes();
>         char[] termBuffer = termAtt.buffer();
>         termAtt.setLength(GRAM_SIZE);
>
>         startOffset++;                            // Values for offset
> attribute
>         offsetAtt.setOffset(startOffset, startOffset+ GRAM_SIZE-1);
>
>         do
>         {
>             termBuffer[0] = termBuffer[1];            // Shift characters
> to left
>             termBuffer[1] = termBuffer[2];
>
>             // Get next non-whitespace character
>             int c = ' ';
>             while(Character.isWhitespace(c))
>             {
>                 if(position >= dataLength) // Read in buffer, if position
> gets out of bound
>                 {
>                     if(charUtils.fill(iobuffer, input))
>                     {
>                         dataLength = iobuffer.getLength();
>                         position = 0;
>                     }
>                     else    // EOF
>                         return false;
>                 }
>
>                 c = charUtils.codePointAt(iobuffer.getBuffer(),
> position);    // Get next character
>                 position++;
>             }
>
>             Character.toChars(c, termBuffer, GRAM_SIZE-1);
> //
> System.out.print("'"+termBuffer[0]+termBuffer[1]+termBuffer[2]+"', ");
> // This is how I got the output in the last email
>
>         }
>         while(Character.getNumericValue(termBuffer[0]) == -1);
>
>         return true;
>
>     }
>
> 2013/1/14 Ian Lea <ian.lea@gmail.com>
>
>> In fact I see you are ignoring all spaces between words.  Maybe that's
>> deliberate.  Break it down into the smallest possible complete code
>> sample that shows the problem and post that.
>>
>>
>> --
>> Ian.
>>
>>
>> On Mon, Jan 14, 2013 at 11:02 AM, Ian Lea <ian.lea@gmail.com> wrote:
>> > It won't be IndexWriter or IndexWriterConfig.  What exactly does your
>> > analyzer do - what is the full chain of tokenization?  Are you saying
>> > that  ':)a' and ')an' are not indexed?  Surely that is correct given
>> > your input with a space after the :).  And before as well so 's:)', is
>> > also suspect.
>> >
>> > --
>> > Ian.
>> >
>> >
>> > On Mon, Jan 14, 2013 at 7:42 AM, Hankyu Kim <gksrb92@gmail.com> wrote:
>> >> I'm working with Lucene 4.0 and I didn't use lucene's QueryParser, so
>> >> setAllowLeadingWildcard() is irrelevant.
>> >> I also realised the issue wasn't with querying, but it was indexing
>> whihch
>> >> left the terms with leading special character out.
>> >>
>> >> My goal was to do a fuzzymatch by creating a trigram index. The idea
>> is to
>> >> tokenize the documents into trigrams, not by words during indexing and
>> >> searching so lucene can search for part of a word or phrase.
>> >>
>> >> Say the original text in the document said : "Sample text with special
>> >> characters :) and such"
>> >> It's tokenized into
>> >>  'sam', 'amp', 'mpl', 'ple', 'let', 'ete', 'tex', 'ext', 'xtw', 'twi',
>> >> 'wit', 'ith', 'ths', 'hsp', 'spe', 'pec', 'eci', 'cia', 'ial', 'alc',
>> >> 'lch', 'cha', 'har', 'ara', 'rac', 'act', 'cte', 'ter', 'ers', 'rs:',
>> >> 's:)', ':)a', ')an', 'and', 'nds', 'dsu', 'suc', 'uch'.
>> >> The above is output from my tokenizer so there's nothing wrong with
>> >> creating trigrmas. However, when I check the index with lukeall, all
>> the
>> >> other trigrams are indexed correctly except for the terms ':)a' and
>> ')an'.
>> >> Since the missing indexes are related to lucene's special characters, I
>> >> don't think it's got to do with my custom code.
>> >>
>> >> I only changed analyser in the IndexFiles.java from demo to index the
>> file.
>> >> Honestly, I can't locate even the exact class in which the problem is
>> >> caused. I'm only guessing IndexWriterConfig or IndexWriter is
>> discarding
>> >> the terms with leading special characters.
>> >>
>> >> I hope the above infromation helps.
>> >>
>> >> 2013/1/11 Ian Lea <ian.lea@gmail.com>
>> >>
>> >>> QueryParser has a setAllowLeadingWildcard() method.  Could that be
>> >>> relevant?
>> >>>
>> >>> What version of lucene?  Can you post some simple examples of what
>> >>> does/doesn't work? Post the smallest possible, but complete, code that
>> >>> demonstrates the problem?
>> >>>
>> >>>
>> >>> With any question that mentions a custom version of something, that
>> >>> custom version has to be the prime suspect for any problems.
>> >>>
>> >>>
>> >>> --
>> >>> Ian.
>> >>>
>> >>>
>> >>> On Thu, Jan 10, 2013 at 12:08 PM, Hankyu Kim <gksrb92@gmail.com>
>> wrote:
>> >>> > Hi.
>> >>> >
>> >>> > I've created a custom analyzer that treats special characters just
>> like
>> >>> any
>> >>> > other. The index works fine all the time even when the query
>> includes
>> >>> > special characters, except when the special characters come to the
>> >>> begining
>> >>> > of the query.
>> >>> >
>> >>> > I'm using spanTermQuery and wildCardQuery, and they both seem to
>> suffer
>> >>> the
>> >>> > same issue with queries begining with special characters. Is it a
>> >>> > limitation of Lucene or am I missing something?
>> >>> >
>> >>> > Thanks
>> >>>
>> >>> ---------------------------------------------------------------------
>> >>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >>> For additional commands, e-mail: java-user-help@lucene.apache.org
>> >>>
>> >>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>

--047d7b677b7e039fe204d33e7293--

From java-user-return-54686-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Jan 14 12:08:11 2013
Return-Path: <java-user-return-54686-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 9D916E377
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon, 14 Jan 2013 12:08:11 +0000 (UTC)
Received: (qmail 78283 invoked by uid 500); 14 Jan 2013 12:08:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78242 invoked by uid 500); 14 Jan 2013 12:08:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78224 invoked by uid 99); 14 Jan 2013 12:08:09 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Jan 2013 12:08:09 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 74.125.82.179 as permitted sender)
Received: from [74.125.82.179] (HELO mail-we0-f179.google.com) (74.125.82.179)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Jan 2013 12:08:02 +0000
Received: by mail-we0-f179.google.com with SMTP id r6so2049719wey.10
        for <java-user@lucene.apache.org>; Mon, 14 Jan 2013 04:07:41 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        bh=mpP6x/v9xXt9vdH2POAX3ucRMSKbu+XY+ZCUPmW3nJk=;
        b=vpNvnE5CSVQ0vuGvNe8SS2ex+Zy2IvJ0+elc4jq1ndlyYF3rogN51VsRtsnJhscy/e
         pgVFTG9CODI/JUsjCdVeBcWVQsvk2PgqNa5C4SA3Kg6Pf5rPs8bemS8JxgSarxVNAmcc
         rSxuUHRBu8OylKPkR4NDYIVRK+TeRAvVb2wqIE70I0rLIrNnZ8XHGRmony/khlBhzOyk
         TDXO4gRKg425PZuHmmYvmubYTqz73rJYidQlJf8OhFSH81kf0t24HgY/R+62xDxGMExm
         uTfx2PJgrBrrts3GM6OQMlflF50WL9ufzhjaQgX7CqlHTSM0JHV6R4liKLtOwflCLsHr
         Fobw==
Received: by 10.194.108.101 with SMTP id hj5mr37149459wjb.6.1358165261612;
 Mon, 14 Jan 2013 04:07:41 -0800 (PST)
MIME-Version: 1.0
Received: by 10.194.57.11 with HTTP; Mon, 14 Jan 2013 04:07:21 -0800 (PST)
In-Reply-To: <CAOZ_vPbLb0H9PU5JTxAneve55WUayOnfS2TSX2=OsYVmn9GVRQ@mail.gmail.com>
References: <CAOZ_vPYod8eWo0VwDtYvJoPBooOPuWp+Kv7=pRB6Vpd+o01_Xw@mail.gmail.com>
 <CAEY5pxXfen_Pobmm3RnOkcuYeSqChu0Vbz-oARGFfhRCHq+ESw@mail.gmail.com>
 <CAOZ_vPY1Du15xYVk9qmDMAYUs77BrxUOasSD5SijPfUUtcPBPQ@mail.gmail.com>
 <CAEY5pxVeDaMJ-=c2vVzV7W-dRg3ZZhs2rBTeYEODdzmgjSncgg@mail.gmail.com>
 <CAEY5pxUtpFwcTq=3sqf1LxCY5+60XwDzFhMYMbUHsU0nd-+TzQ@mail.gmail.com>
 <CAOZ_vPZYgH7WcW2HD_BK6OHFEYGr11_TJJAWPDWMDo75CDRvCQ@mail.gmail.com> <CAOZ_vPbLb0H9PU5JTxAneve55WUayOnfS2TSX2=OsYVmn9GVRQ@mail.gmail.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Mon, 14 Jan 2013 12:07:21 +0000
Message-ID: <CAEY5pxW4yAcMB5uB=C-X_4YhuxbyQME9j+R378NfWBqbPQt8yg@mail.gmail.com>
Subject: Re: Query beginning with special characters
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

No problem.  Glad you found the error.  It's always in the custom code
somewhere.


--
Ian.


On Mon, Jan 14, 2013 at 12:04 PM, Hankyu Kim <gksrb92@gmail.com> wrote:
> I just found the cause of error and you were right about my code being the
> source.
> I used "Character.getNumericValue(termBuffer[0]) == -1" to test if
> termBuffer[0] is equal to null, but apparently the special characters
> return -1 as well when given as parameter.
>
> Thank you for your help.
>
> 2013/1/14 Hankyu Kim <gksrb92@gmail.com>
>
>> I did intend to ignore all the spaces, so that's not the problem.
>>
>> Here's the tokenization chain in customAnalyser class, extending Analyser
>>     @Override
>>     protected TokenStreamComponents createComponents(String fieldName,
>> Reader reader) {
>>         NGramTokenizer src = new NGramTokenizer(matchVersion, reader); //
>> My NGramTokenizer
>>
>>         TokenStream tok = new LowerCaseFilter(matchVersion, src);
>>         return new TokenStreamComponents(src, tok);
>>     }
>>
>> NGramTokenizer's incrementToken() method.
>>     @Override
>>     public boolean incrementToken() throws IOException
>>     {
>>         clearAttributes();
>>         char[] termBuffer = termAtt.buffer();
>>         termAtt.setLength(GRAM_SIZE);
>>
>>         startOffset++;                            // Values for offset
>> attribute
>>         offsetAtt.setOffset(startOffset, startOffset+ GRAM_SIZE-1);
>>
>>         do
>>         {
>>             termBuffer[0] = termBuffer[1];            // Shift characters
>> to left
>>             termBuffer[1] = termBuffer[2];
>>
>>             // Get next non-whitespace character
>>             int c = ' ';
>>             while(Character.isWhitespace(c))
>>             {
>>                 if(position >= dataLength) // Read in buffer, if position
>> gets out of bound
>>                 {
>>                     if(charUtils.fill(iobuffer, input))
>>                     {
>>                         dataLength = iobuffer.getLength();
>>                         position = 0;
>>                     }
>>                     else    // EOF
>>                         return false;
>>                 }
>>
>>                 c = charUtils.codePointAt(iobuffer.getBuffer(),
>> position);    // Get next character
>>                 position++;
>>             }
>>
>>             Character.toChars(c, termBuffer, GRAM_SIZE-1);
>> //
>> System.out.print("'"+termBuffer[0]+termBuffer[1]+termBuffer[2]+"', ");
>> // This is how I got the output in the last email
>>
>>         }
>>         while(Character.getNumericValue(termBuffer[0]) == -1);
>>
>>         return true;
>>
>>     }
>>
>> 2013/1/14 Ian Lea <ian.lea@gmail.com>
>>
>>> In fact I see you are ignoring all spaces between words.  Maybe that's
>>> deliberate.  Break it down into the smallest possible complete code
>>> sample that shows the problem and post that.
>>>
>>>
>>> --
>>> Ian.
>>>
>>>
>>> On Mon, Jan 14, 2013 at 11:02 AM, Ian Lea <ian.lea@gmail.com> wrote:
>>> > It won't be IndexWriter or IndexWriterConfig.  What exactly does your
>>> > analyzer do - what is the full chain of tokenization?  Are you saying
>>> > that  ':)a' and ')an' are not indexed?  Surely that is correct given
>>> > your input with a space after the :).  And before as well so 's:)', is
>>> > also suspect.
>>> >
>>> > --
>>> > Ian.
>>> >
>>> >
>>> > On Mon, Jan 14, 2013 at 7:42 AM, Hankyu Kim <gksrb92@gmail.com> wrote:
>>> >> I'm working with Lucene 4.0 and I didn't use lucene's QueryParser, so
>>> >> setAllowLeadingWildcard() is irrelevant.
>>> >> I also realised the issue wasn't with querying, but it was indexing
>>> whihch
>>> >> left the terms with leading special character out.
>>> >>
>>> >> My goal was to do a fuzzymatch by creating a trigram index. The idea
>>> is to
>>> >> tokenize the documents into trigrams, not by words during indexing and
>>> >> searching so lucene can search for part of a word or phrase.
>>> >>
>>> >> Say the original text in the document said : "Sample text with special
>>> >> characters :) and such"
>>> >> It's tokenized into
>>> >>  'sam', 'amp', 'mpl', 'ple', 'let', 'ete', 'tex', 'ext', 'xtw', 'twi',
>>> >> 'wit', 'ith', 'ths', 'hsp', 'spe', 'pec', 'eci', 'cia', 'ial', 'alc',
>>> >> 'lch', 'cha', 'har', 'ara', 'rac', 'act', 'cte', 'ter', 'ers', 'rs:',
>>> >> 's:)', ':)a', ')an', 'and', 'nds', 'dsu', 'suc', 'uch'.
>>> >> The above is output from my tokenizer so there's nothing wrong with
>>> >> creating trigrmas. However, when I check the index with lukeall, all
>>> the
>>> >> other trigrams are indexed correctly except for the terms ':)a' and
>>> ')an'.
>>> >> Since the missing indexes are related to lucene's special characters, I
>>> >> don't think it's got to do with my custom code.
>>> >>
>>> >> I only changed analyser in the IndexFiles.java from demo to index the
>>> file.
>>> >> Honestly, I can't locate even the exact class in which the problem is
>>> >> caused. I'm only guessing IndexWriterConfig or IndexWriter is
>>> discarding
>>> >> the terms with leading special characters.
>>> >>
>>> >> I hope the above infromation helps.
>>> >>
>>> >> 2013/1/11 Ian Lea <ian.lea@gmail.com>
>>> >>
>>> >>> QueryParser has a setAllowLeadingWildcard() method.  Could that be
>>> >>> relevant?
>>> >>>
>>> >>> What version of lucene?  Can you post some simple examples of what
>>> >>> does/doesn't work? Post the smallest possible, but complete, code that
>>> >>> demonstrates the problem?
>>> >>>
>>> >>>
>>> >>> With any question that mentions a custom version of something, that
>>> >>> custom version has to be the prime suspect for any problems.
>>> >>>
>>> >>>
>>> >>> --
>>> >>> Ian.
>>> >>>
>>> >>>
>>> >>> On Thu, Jan 10, 2013 at 12:08 PM, Hankyu Kim <gksrb92@gmail.com>
>>> wrote:
>>> >>> > Hi.
>>> >>> >
>>> >>> > I've created a custom analyzer that treats special characters just
>>> like
>>> >>> any
>>> >>> > other. The index works fine all the time even when the query
>>> includes
>>> >>> > special characters, except when the special characters come to the
>>> >>> begining
>>> >>> > of the query.
>>> >>> >
>>> >>> > I'm using spanTermQuery and wildCardQuery, and they both seem to
>>> suffer
>>> >>> the
>>> >>> > same issue with queries begining with special characters. Is it a
>>> >>> > limitation of Lucene or am I missing something?
>>> >>> >
>>> >>> > Thanks
>>> >>>
>>> >>> ---------------------------------------------------------------------
>>> >>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> >>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>> >>>
>>> >>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54687-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Jan 14 13:54:06 2013
Return-Path: <java-user-return-54687-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 4B5D8EF12
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon, 14 Jan 2013 13:54:06 +0000 (UTC)
Received: (qmail 5677 invoked by uid 500); 14 Jan 2013 13:54:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5356 invoked by uid 500); 14 Jan 2013 13:54:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5329 invoked by uid 99); 14 Jan 2013 13:54:02 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Jan 2013 13:54:02 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of vigneshklncit@gmail.com designates 209.85.216.53 as permitted sender)
Received: from [209.85.216.53] (HELO mail-qa0-f53.google.com) (209.85.216.53)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Jan 2013 13:53:56 +0000
Received: by mail-qa0-f53.google.com with SMTP id a19so1439051qad.19
        for <java-user@lucene.apache.org>; Mon, 14 Jan 2013 05:53:35 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:date:message-id:subject:from:to:content-type;
        bh=anr83uOJDJ0LoxLY+LzH7MaXQpFuUxKwGyhj367Vy0M=;
        b=f1mSkxkKvLbdN1oZaJbAf4u94m7zME2406Bb5USMoDOp8lBbTGJNhNemi91U1wIO+P
         GGy47ZKjv9czhKY/1qaMmtXqvr0MZD0O0tlUV/cbLKZr+KL8m6zgWRhDKs7j1yB+Kkj3
         BSFQQ8l0ZOGDYrX5Vy5pp4MgyoAVfNqKVJWDsd/bG1LFUgXpaDWETZyzVUCDfH/aUunB
         aMUssPH1UxceOYz77nqe0ybuXDN7psSioKzMtvlvy5Y12C0YK4X2iWDqzYDVvUF0Rbwn
         OwWtTKMazBOjuxuhnHFMxXmaHMdPaiPMeqs3yunJgLMChu+cNlaaUXmUAzT0xvhF41iQ
         RdwQ==
MIME-Version: 1.0
Received: by 10.229.137.1 with SMTP id u1mr17325165qct.86.1358171615515; Mon,
 14 Jan 2013 05:53:35 -0800 (PST)
Received: by 10.49.71.143 with HTTP; Mon, 14 Jan 2013 05:53:35 -0800 (PST)
Date: Mon, 14 Jan 2013 19:23:35 +0530
Message-ID: <CAMMjTZyqnNkRLySXjfgyKxtdbRy2-Syyq4K9M2gwN9sByf+03g@mail.gmail.com>
Subject: Reg Lucene Naive Bayesian classifier.
From: VIGNESH S <vigneshklncit@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

Anyone Used the Naive Bayesian Classifier?

It will be really helpful if some one Can  post how to use the
classifiers in Lucene ..

-- 
Thanks and Regards
Vignesh Srinivasan
9739135640

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54688-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Jan 14 14:28:31 2013
Return-Path: <java-user-return-54688-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id A6E8CE5D3
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon, 14 Jan 2013 14:28:31 +0000 (UTC)
Received: (qmail 17346 invoked by uid 500); 14 Jan 2013 14:28:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17167 invoked by uid 500); 14 Jan 2013 14:28:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17139 invoked by uid 99); 14 Jan 2013 14:28:28 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Jan 2013 14:28:28 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of vishwasg@gmail.com designates 209.85.215.42 as permitted sender)
Received: from [209.85.215.42] (HELO mail-la0-f42.google.com) (209.85.215.42)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Jan 2013 14:28:22 +0000
Received: by mail-la0-f42.google.com with SMTP id fe20so3925278lab.29
        for <java-user@lucene.apache.org>; Mon, 14 Jan 2013 06:28:00 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        bh=w+FoG+n4TzjUnzpJHsvK2JzS80GU9Z52Z+/2AXqIdDU=;
        b=LqjhBwunr/FjSJ5vLtdoTP2J6uB52PyRNICMNrqeGGLRqUyJghkoHXBY5PqueDes9I
         COTV+LvX87b28vZ1VGnhM3gGU8c5hr9jB/0tW57x06Ymaw0A96n4H9cqVTeuJkadNSmf
         cAnmSzllSjXl9oXPrKl9Oc0z0AkKdTgMfxDuFchmZfhJW8VBGIjgd4XbWegStheABOl2
         gxf/+cfW8fWMouw5/IqNgSUZXRR3RJnOC3x8ugy5ginah4GWst1xgfYpsYWlUDWAXl8G
         /QxgD8BebnPaa5d1DdNOb3SF6oaRWtM+qO+I27ZZfVdaK+8AUXISjQRJNi783g56u/i5
         WCBw==
Received: by 10.112.49.102 with SMTP id t6mr33640696lbn.60.1358173680575; Mon,
 14 Jan 2013 06:28:00 -0800 (PST)
MIME-Version: 1.0
Received: by 10.112.85.164 with HTTP; Mon, 14 Jan 2013 06:27:40 -0800 (PST)
In-Reply-To: <CAMMjTZyqnNkRLySXjfgyKxtdbRy2-Syyq4K9M2gwN9sByf+03g@mail.gmail.com>
References: <CAMMjTZyqnNkRLySXjfgyKxtdbRy2-Syyq4K9M2gwN9sByf+03g@mail.gmail.com>
From: Vishwas Goel <vishwasg@gmail.com>
Date: Mon, 14 Jan 2013 19:57:40 +0530
Message-ID: <CAK2QSffmcwbsXsK5j1uUcmGUm-H=9yjj2XCFxZkp5QCs0Cmdyw@mail.gmail.com>
Subject: Re: Reg Lucene Naive Bayesian classifier.
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=bcaec5540498c6240d04d34073d7
X-Virus-Checked: Checked by ClamAV on apache.org

--bcaec5540498c6240d04d34073d7
Content-Type: text/plain; charset=ISO-8859-1

What is the use case? I would have thought that a regression or LETOR would
be lots more useful. Thoughts?


On Mon, Jan 14, 2013 at 7:23 PM, VIGNESH S <vigneshklncit@gmail.com> wrote:

> Hi,
>
> Anyone Used the Naive Bayesian Classifier?
>
> It will be really helpful if some one Can  post how to use the
> classifiers in Lucene ..
>
> --
> Thanks and Regards
> Vignesh Srinivasan
> 9739135640
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--bcaec5540498c6240d04d34073d7--

From java-user-return-54689-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Jan 14 16:27:20 2013
Return-Path: <java-user-return-54689-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id E02BFEFB3
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon, 14 Jan 2013 16:27:20 +0000 (UTC)
Received: (qmail 873 invoked by uid 500); 14 Jan 2013 16:27:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 839 invoked by uid 500); 14 Jan 2013 16:27:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 831 invoked by uid 99); 14 Jan 2013 16:27:17 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Jan 2013 16:27:17 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ishalyminov@yandex-team.ru designates 95.108.253.142 as permitted sender)
Received: from [95.108.253.142] (HELO forward17.mail.yandex.net) (95.108.253.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Jan 2013 16:27:09 +0000
Received: from webcorp1g.yandex-team.ru (webcorp1g.yandex-team.ru [95.108.252.5])
	by forward17.mail.yandex.net (Yandex) with ESMTP id 6FA5A1060A47
	for <java-user@lucene.apache.org>; Mon, 14 Jan 2013 20:26:48 +0400 (MSK)
Received: from 127.0.0.1 (localhost.localdomain [127.0.0.1])
	by webcorp1g.yandex-team.ru (Yandex) with ESMTP id 50DC4317F8D;
	Mon, 14 Jan 2013 20:26:48 +0400 (MSK)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yandex-team.ru;
	s=default; t=1358180808;
	bh=hiivBYAuodwt8GCoQlUsroym9VcKdhxoVLM4bnYmZ3E=;
	h=From:To:Subject:Date;
	b=Qf8rm6cOhsebt8RQeusTOekPJOGu2ng4YEghZCz79cjKpaCWQQfAACC/CpmVXQbEJ
	 YrlcHc8MdxwnOKMF+sq9NnAa+2daUbYmDGuhvF34zFFHZ6wYOMt741q5wtpk7Yn/qK
	 c86y3vI3t3sf1YoyCtYNf0M6lfi3B3cVqLtRwL9M=
Received: from dhcp175-135-red.yandex.net (dhcp175-135-red.yandex.net [95.108.175.135]) by webcorp1g.yandex-team.ru with HTTP;
	Mon, 14 Jan 2013 20:26:48 +0400
From: Igor Shalyminov <ishalyminov@yandex-team.ru>
To: java-user@lucene.apache.org
Subject: Lucene release source code
MIME-Version: 1.0
Message-Id: <8251358180808@webcorp1g.yandex-team.ru>
X-Mailer: Yamail [ http://yandex.ru ] 5.0
Date: Mon, 14 Jan 2013 20:26:48 +0400
Content-Transfer-Encoding: 7bit
Content-Type: text/plain
X-Virus-Checked: Checked by ClamAV on apache.org

Hello!

I've checked out Lucene trunk from svn, and the build's version appears to be 5.0-SNAPSHOT.
My goal is to use Lucene for my needs with probable source code changes. That's why I want to use the sources of the latest release, 4.0.0.
How do I get them?

--
Best regards,
Igor Shalyminov

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54690-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Jan 14 16:55:34 2013
Return-Path: <java-user-return-54690-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id A30B2EB1D
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon, 14 Jan 2013 16:55:34 +0000 (UTC)
Received: (qmail 89976 invoked by uid 500); 14 Jan 2013 16:55:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89936 invoked by uid 500); 14 Jan 2013 16:55:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89928 invoked by uid 99); 14 Jan 2013 16:55:32 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Jan 2013 16:55:32 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of sarowe@gmail.com designates 209.85.220.177 as permitted sender)
Received: from [209.85.220.177] (HELO mail-vc0-f177.google.com) (209.85.220.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Jan 2013 16:55:25 +0000
Received: by mail-vc0-f177.google.com with SMTP id m8so3700627vcd.22
        for <java-user@lucene.apache.org>; Mon, 14 Jan 2013 08:55:04 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=x-received:content-type:mime-version:subject:from:in-reply-to:date
         :content-transfer-encoding:message-id:references:to:x-mailer;
        bh=K1F3lxSi0fEvTkFwR1r9W4p/t11C5Qg6bnunhFmzJMw=;
        b=W5LrcqkeOEPNaDFbea8beIKBVzTJjl5oxeKluYL02tvKR59zRn3015b7VnzxXpfgFL
         uRYZc8VusZwuqYt+DeXb8/etYMIGIkvXne0TEZEIoZveSbIjuMtbKH5lXoU78k+nXTIi
         AIzpT0UqpQqRmrzMbVxTCZrRXicPhg5Px9n4F5yZOJxvkKNG8pbwvq3HCsLi4Jlz3sUT
         Tqzhr6+jzM2CmS6Ml/bclXvVO+Z0OfH0VkQTo/gL8rEt7hInz1zOSzlpyoOk3T3Gn7yp
         7Hofbh7D1wJ+1yrWyhsymAhHDWXKW6hmMBDuLBfmCjFKG39KcfVCeZzL+bh4McYo4mJd
         isgA==
X-Received: by 10.220.151.201 with SMTP id d9mr13029282vcw.4.1358182503934;
        Mon, 14 Jan 2013 08:55:03 -0800 (PST)
Received: from [192.168.1.204] (cpe-67-249-104-72.twcny.res.rr.com. [67.249.104.72])
        by mx.google.com with ESMTPS id x9sm3116417vel.4.2013.01.14.08.55.02
        (version=TLSv1 cipher=ECDHE-RSA-RC4-SHA bits=128/128);
        Mon, 14 Jan 2013 08:55:02 -0800 (PST)
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Mac OS X Mail 6.2 \(1499\))
Subject: Re: Lucene release source code
From: Steve Rowe <sarowe@gmail.com>
In-Reply-To: <8251358180808@webcorp1g.yandex-team.ru>
Date: Mon, 14 Jan 2013 11:55:01 -0500
Content-Transfer-Encoding: quoted-printable
Message-Id: <0AB4CAA7-2880-4339-BA1C-9434C1ABB920@gmail.com>
References: <8251358180808@webcorp1g.yandex-team.ru>
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.1499)
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Igor,

You can find all recent released source code under =
<http://svn.apache.org/repos/asf/lucene/dev/tags/>, e.g. =
<http://svn.apache.org/repos/asf/lucene/dev/tags/lucene_solr_4_0_0>

Alternatively, each release has a source distribution.  For v4.0.0, =
click on the Download buttons for 4.0 from =
<http://lucene.apache.org/core/>, click on a mirror link, then click on =
"lucene-4.0.0-src.tgz" to download a gzipped tarball containing all =
Lucene sources.

Steve

On Jan 14, 2013, at 11:26 AM, Igor Shalyminov =
<ishalyminov@yandex-team.ru> wrote:

> Hello!
>=20
> I've checked out Lucene trunk from svn, and the build's version =
appears to be 5.0-SNAPSHOT.
> My goal is to use Lucene for my needs with probable source code =
changes. That's why I want to use the sources of the latest release, =
4.0.0.
> How do I get them?
>=20
> --
> Best regards,
> Igor Shalyminov
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54691-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Jan 14 17:01:24 2013
Return-Path: <java-user-return-54691-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 44976EB5C
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon, 14 Jan 2013 17:01:24 +0000 (UTC)
Received: (qmail 3777 invoked by uid 500); 14 Jan 2013 17:01:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3739 invoked by uid 500); 14 Jan 2013 17:01:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3731 invoked by uid 99); 14 Jan 2013 17:01:22 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Jan 2013 17:01:22 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ian.lea@gmail.com designates 209.85.212.170 as permitted sender)
Received: from [209.85.212.170] (HELO mail-wi0-f170.google.com) (209.85.212.170)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Jan 2013 17:01:15 +0000
Received: by mail-wi0-f170.google.com with SMTP id hq7so1434760wib.3
        for <java-user@lucene.apache.org>; Mon, 14 Jan 2013 09:00:55 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=x-received:mime-version:in-reply-to:references:from:date:message-id
         :subject:to:content-type;
        bh=xU65QhI7ZNjFqtvIT2R8PXxlFEAsnxYkGgCjW5YuuTA=;
        b=x/Ud5XHCD9fl8AqFFh6KxY/XNcShhHb1dL+YlegCwhkwq2MItRpsK+V7HWIF61v7eT
         zY1U9xEszrLm592odWDAj3wkBpoZQDHBG9EeKuxTYYnfZ5Eb3pADlVB5Lk8p0uAC5oPo
         YJn8vkLLIAyByVlpGDPSpBmsTpVhjFXazQ6GBe8u71KZRXcLHxR1AdMJtsYh+gNUdsU+
         CdMr+L1EokEs9D8oexhocxWjNpsVPv3pDP/y6IChFt8HfGt5k6pg8neyYw0GbG3/oxSK
         y+itjQDk1aNgjcsyI2EP6WyDbHoamH9ILDIAHBe7+XW4lYaCFsNzgfAbN3Ts07QdiFLX
         Jgrw==
X-Received: by 10.180.93.3 with SMTP id cq3mr13980774wib.1.1358182852812; Mon,
 14 Jan 2013 09:00:52 -0800 (PST)
MIME-Version: 1.0
Received: by 10.194.57.11 with HTTP; Mon, 14 Jan 2013 09:00:32 -0800 (PST)
In-Reply-To: <8251358180808@webcorp1g.yandex-team.ru>
References: <8251358180808@webcorp1g.yandex-team.ru>
From: Ian Lea <ian.lea@gmail.com>
Date: Mon, 14 Jan 2013 17:00:32 +0000
Message-ID: <CAEY5pxWdBCg3f6Abt2S0p5iOwYODwxMHN8MpzGnbE6O2gxCFQA@mail.gmail.com>
Subject: Re: Lucene release source code
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

lucene-4.0.0-src.tgz from
http://www.apache.org/dyn/closer.cgi/lucene/java/4.0.0, linked from
http://lucene.apache.org/, with a redirect or two along the way.


--
Ian.

On Mon, Jan 14, 2013 at 4:26 PM, Igor Shalyminov
<ishalyminov@yandex-team.ru> wrote:
> Hello!
>
> I've checked out Lucene trunk from svn, and the build's version appears to be 5.0-SNAPSHOT.
> My goal is to use Lucene for my needs with probable source code changes. That's why I want to use the sources of the latest release, 4.0.0.
> How do I get them?
>
> --
> Best regards,
> Igor Shalyminov
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54692-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Jan 14 17:07:11 2013
Return-Path: <java-user-return-54692-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 29506EB92
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon, 14 Jan 2013 17:07:11 +0000 (UTC)
Received: (qmail 21825 invoked by uid 500); 14 Jan 2013 17:07:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21779 invoked by uid 500); 14 Jan 2013 17:07:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21771 invoked by uid 99); 14 Jan 2013 17:07:08 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Jan 2013 17:07:08 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ishalyminov@yandex-team.ru designates 95.108.253.143 as permitted sender)
Received: from [95.108.253.143] (HELO forward18.mail.yandex.net) (95.108.253.143)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Jan 2013 17:07:00 +0000
Received: from webcorp2g.yandex-team.ru (webcorp2g.yandex-team.ru [95.108.252.6])
	by forward18.mail.yandex.net (Yandex) with ESMTP id 5C3021780C60
	for <java-user@lucene.apache.org>; Mon, 14 Jan 2013 21:06:38 +0400 (MSK)
Received: from 127.0.0.1 (localhost.localdomain [127.0.0.1])
	by webcorp2g.yandex-team.ru (Yandex) with ESMTP id 3B9B6317FF0;
	Mon, 14 Jan 2013 21:06:38 +0400 (MSK)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yandex-team.ru;
	s=default; t=1358183198;
	bh=/BP3De1hG36BpcbT7sZVBKiJKKWbl4GuAVwWd8oY5IM=;
	h=From:To:In-Reply-To:References:Subject:Date;
	b=vU9cMS7mZr8RK667S7HcNrLGr9SlKsOWkgWQTv/UnRQpIuqWf940yI/PicJgJ8q52
	 LNWQ2+kT8wfRcl/ZxdWeVgnYEgLw5J/AghK8jseKcLsfj+RBxsNUgBUF6i/oRB28XA
	 M9sNLfX0M5rcKh5AUQd8cclJMW52WhXmDgaqJzRs=
Received: from dhcp175-135-red.yandex.net (dhcp175-135-red.yandex.net [95.108.175.135]) by webcorp2g.yandex-team.ru with HTTP;
	Mon, 14 Jan 2013 21:06:38 +0400
From: Igor Shalyminov <ishalyminov@yandex-team.ru>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
In-Reply-To: <CAEY5pxWdBCg3f6Abt2S0p5iOwYODwxMHN8MpzGnbE6O2gxCFQA@mail.gmail.com>
References: <8251358180808@webcorp1g.yandex-team.ru> <CAEY5pxWdBCg3f6Abt2S0p5iOwYODwxMHN8MpzGnbE6O2gxCFQA@mail.gmail.com>
Subject: Re: Lucene release source code
MIME-Version: 1.0
Message-Id: <10191358183198@webcorp2g.yandex-team.ru>
X-Mailer: Yamail [ http://yandex.ru ] 5.0
Date: Mon, 14 Jan 2013 21:06:38 +0400
Content-Transfer-Encoding: 8bit
Content-Type: text/plain; charset=koi8-r
X-Virus-Checked: Checked by ClamAV on apache.org

Hi, Ian and Steve!

That is exactly what I was looking for, thank you!

-- 
Best Regards,
Igor Shalyminov

14.01.2013, 21:01, "Ian Lea" <ian.lea@gmail.com>:

> lucene-4.0.0-src.tgz from
> http://www.apache.org/dyn/closer.cgi/lucene/java/4.0.0, linked from
> http://lucene.apache.org/, with a redirect or two along the way.
>
> --
> Ian.
>
> On Mon, Jan 14, 2013 at 4:26 PM, Igor Shalyminov
> <ishalyminov@yandex-team.ru> wrote:
>> Hello!
>>
>> I've checked out Lucene trunk from svn, and the build's version appears to be 5.0-SNAPSHOT.
>> My goal is to use Lucene for my needs with probable source code changes. That's why I want to use the sources of the latest release, 4.0.0.
>> How do I get them?
>>
>> --
>> Best regards,
>> Igor Shalyminov
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54693-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Jan 14 17:45:28 2013
Return-Path: <java-user-return-54693-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id A200EEB43
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon, 14 Jan 2013 17:45:28 +0000 (UTC)
Received: (qmail 73751 invoked by uid 500); 14 Jan 2013 17:45:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73656 invoked by uid 500); 14 Jan 2013 17:45:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73648 invoked by uid 99); 14 Jan 2013 17:45:26 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Jan 2013 17:45:26 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of vishwasg@gmail.com designates 209.85.212.181 as permitted sender)
Received: from [209.85.212.181] (HELO mail-wi0-f181.google.com) (209.85.212.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Jan 2013 17:45:18 +0000
Received: by mail-wi0-f181.google.com with SMTP id hq4so1451529wib.14
        for <java-user@lucene.apache.org>; Mon, 14 Jan 2013 09:44:58 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=x-received:mime-version:in-reply-to:references:from:date:message-id
         :subject:to:content-type;
        bh=4T+1laz2qcqZBjpeWfLEAN5LQ2aj2uybar7SGJyUaEg=;
        b=IARM620SUDI2A4fzxdKLvXXyK8zwo+N1YCSQol/wvA1tdyRRkJFRZrvF85W8cuFWQg
         fL+n3216JMqibK2+zHi6jRuluKkuyAx6MlDVJ52rFundvFg94HOxlJO3BJg81DVsRqUb
         gebg/q1g2JX/NfgSyvBNaDFLqD45eqFzdJM3U+XVB0pCrpzLtXHF2JgyeXaDk9Tp2SQI
         +3ZgcsC3GnItztAyYHHcBRE7chzNRVVuj8k7/jSVrlVrW1pUbshnS36ju00LGR8aYj7D
         5vs74X3ckGabouH7hkR6KexztCytrbkKudawGLp0C+MoylFC36NOjL9huI1Hc4Cl8DmZ
         NRmw==
X-Received: by 10.180.93.133 with SMTP id cu5mr13768622wib.32.1358185498429;
 Mon, 14 Jan 2013 09:44:58 -0800 (PST)
MIME-Version: 1.0
Received: by 10.194.36.133 with HTTP; Mon, 14 Jan 2013 09:44:38 -0800 (PST)
In-Reply-To: <CAK2QSffmcwbsXsK5j1uUcmGUm-H=9yjj2XCFxZkp5QCs0Cmdyw@mail.gmail.com>
References: <CAMMjTZyqnNkRLySXjfgyKxtdbRy2-Syyq4K9M2gwN9sByf+03g@mail.gmail.com>
 <CAK2QSffmcwbsXsK5j1uUcmGUm-H=9yjj2XCFxZkp5QCs0Cmdyw@mail.gmail.com>
From: Vishwas Goel <vishwasg@gmail.com>
Date: Mon, 14 Jan 2013 23:14:38 +0530
Message-ID: <CAK2QSfdgbOCbOFa_H_QatCN5cjsSLfh_x7Xw9FYku1Kbq=K0uA@mail.gmail.com>
Subject: Re: Reg Lucene Naive Bayesian classifier.
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=f46d043890452c48a304d34334a0
X-Virus-Checked: Checked by ClamAV on apache.org

--f46d043890452c48a304d34334a0
Content-Type: text/plain; charset=ISO-8859-1

Does anyone has pointers on how to plug in a regression or LETOR model in
Lucene/SOLR?

On Mon, Jan 14, 2013 at 7:57 PM, Vishwas Goel <vishwasg@gmail.com> wrote:

> What is the use case? I would have thought that a regression or LETOR
> would be lots more useful. Thoughts?
>
>
> On Mon, Jan 14, 2013 at 7:23 PM, VIGNESH S <vigneshklncit@gmail.com>wrote:
>
>> Hi,
>>
>> Anyone Used the Naive Bayesian Classifier?
>>
>> It will be really helpful if some one Can  post how to use the
>> classifiers in Lucene ..
>>
>> --
>> Thanks and Regards
>> Vignesh Srinivasan
>> 9739135640
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>

--f46d043890452c48a304d34334a0--

From java-user-return-54694-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Jan 14 19:57:29 2013
Return-Path: <java-user-return-54694-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 8AE88E119
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon, 14 Jan 2013 19:57:29 +0000 (UTC)
Received: (qmail 4253 invoked by uid 500); 14 Jan 2013 19:57:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4174 invoked by uid 500); 14 Jan 2013 19:57:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4166 invoked by uid 99); 14 Jan 2013 19:57:27 -0000
Received: from minotaur.apache.org (HELO minotaur.apache.org) (140.211.11.9)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Jan 2013 19:57:27 +0000
Received: from localhost (HELO [192.168.1.73]) (127.0.0.1)
  (smtp-auth username gsingers, mechanism plain)
  by minotaur.apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Jan 2013 19:57:27 +0000
From: Grant Ingersoll <gsingers@apache.org>
Mime-Version: 1.0 (Apple Message framework v1283)
Content-Type: multipart/alternative; boundary="Apple-Mail=_22C06CE1-C17E-41DB-BF88-4933A8F4A1A1"
Subject: Re: Reg Lucene Naive Bayesian classifier.
Date: Mon, 14 Jan 2013 14:57:25 -0500
In-Reply-To: <CAK2QSfdgbOCbOFa_H_QatCN5cjsSLfh_x7Xw9FYku1Kbq=K0uA@mail.gmail.com>
To: java-user@lucene.apache.org
References: <CAMMjTZyqnNkRLySXjfgyKxtdbRy2-Syyq4K9M2gwN9sByf+03g@mail.gmail.com> <CAK2QSffmcwbsXsK5j1uUcmGUm-H=9yjj2XCFxZkp5QCs0Cmdyw@mail.gmail.com> <CAK2QSfdgbOCbOFa_H_QatCN5cjsSLfh_x7Xw9FYku1Kbq=K0uA@mail.gmail.com>
Message-Id: <9A15DA52-F039-4A14-A206-7713647EC652@apache.org>
X-Mailer: Apple Mail (2.1283)

--Apple-Mail=_22C06CE1-C17E-41DB-BF88-4933A8F4A1A1
Content-Transfer-Encoding: 7bit
Content-Type: text/plain;
	charset=iso-8859-1

What are you trying to classify?  Queries?  Documents?  Other?

On Jan 14, 2013, at 12:44 PM, Vishwas Goel wrote:

> Does anyone has pointers on how to plug in a regression or LETOR model in
> Lucene/SOLR?
> 
> On Mon, Jan 14, 2013 at 7:57 PM, Vishwas Goel <vishwasg@gmail.com> wrote:
> 
>> What is the use case? I would have thought that a regression or LETOR
>> would be lots more useful. Thoughts?
>> 
>> 
>> On Mon, Jan 14, 2013 at 7:23 PM, VIGNESH S <vigneshklncit@gmail.com>wrote:
>> 
>>> Hi,
>>> 
>>> Anyone Used the Naive Bayesian Classifier?
>>> 
>>> It will be really helpful if some one Can  post how to use the
>>> classifiers in Lucene ..
>>> 
>>> --
>>> Thanks and Regards
>>> Vignesh Srinivasan
>>> 9739135640
>>> 
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>> 
>>> 
>> 

--------------------------------------------
Grant Ingersoll
http://www.lucidworks.com





--Apple-Mail=_22C06CE1-C17E-41DB-BF88-4933A8F4A1A1--

From java-user-return-54695-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Jan 14 23:25:23 2013
Return-Path: <java-user-return-54695-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id BC85BECC5
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon, 14 Jan 2013 23:25:23 +0000 (UTC)
Received: (qmail 35454 invoked by uid 500); 14 Jan 2013 23:25:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35408 invoked by uid 500); 14 Jan 2013 23:25:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35400 invoked by uid 99); 14 Jan 2013 23:25:21 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Jan 2013 23:25:21 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of dotsid@gmail.com designates 209.85.217.172 as permitted sender)
Received: from [209.85.217.172] (HELO mail-lb0-f172.google.com) (209.85.217.172)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Jan 2013 23:25:12 +0000
Received: by mail-lb0-f172.google.com with SMTP id y2so3373664lbk.31
        for <java-user@lucene.apache.org>; Mon, 14 Jan 2013 15:24:51 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=x-received:content-type:mime-version:subject:from:in-reply-to:date
         :content-transfer-encoding:message-id:references:to:x-mailer;
        bh=RN4kGV19E3StfJZNXa909OwCZ0GbDd5Vf6poBKXqyM8=;
        b=KBZkc6yIpJQjtIveoBK0Wt8MIWcqMUCPTleMF/026s4ne3cItIPAodssRKQWMbzhww
         HQeXvlsDn77cQxN0jzXbV4uqLoo1jEZBbAl/fTKe0RwOkfIgxfEkuHDg1FvAygBuA6z0
         tkjkhHIyuMJQE1lJ7GG1kxfv2nZIAMfzTD0FYvkvaez81dhOZwdUhxowVOU7LnFFabRW
         dwGcUwvJVAmerP5VfS0ynylVLWVKVf0v6Wh5Z0L8Le3v1t+MuwxAVyhj6PbHJ/ZiVuXG
         WUdgoRfBRSUGzujL71CFgdM9Rin8we3Jixq5m+sdVntvv0TUsqonUFrmpm3GMlcCR2RY
         GsWA==
X-Received: by 10.152.125.237 with SMTP id mt13mr84035145lab.45.1358205891737;
        Mon, 14 Jan 2013 15:24:51 -0800 (PST)
Received: from bazhenov.loc ([95.154.75.220])
        by mx.google.com with ESMTPS id u5sm6020828lbm.8.2013.01.14.15.24.49
        (version=TLSv1 cipher=ECDHE-RSA-RC4-SHA bits=128/128);
        Mon, 14 Jan 2013 15:24:50 -0800 (PST)
Content-Type: text/plain; charset=iso-8859-1
Mime-Version: 1.0 (Mac OS X Mail 6.2 \(1499\))
Subject: Re: Reg Lucene Naive Bayesian classifier.
From: Denis Bazhenov <dotsid@gmail.com>
In-Reply-To: <CAMMjTZyqnNkRLySXjfgyKxtdbRy2-Syyq4K9M2gwN9sByf+03g@mail.gmail.com>
Date: Tue, 15 Jan 2013 10:24:44 +1100
Content-Transfer-Encoding: quoted-printable
Message-Id: <2F827712-B86C-40EA-9225-33571838CE31@gmail.com>
References: <CAMMjTZyqnNkRLySXjfgyKxtdbRy2-Syyq4K9M2gwN9sByf+03g@mail.gmail.com>
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.1499)
X-Virus-Checked: Checked by ClamAV on apache.org

Lucene is not about classification really. It might help you, depends on =
your use case. But if you want the classification library you should =
look at Apache Mahout. It has Naive Bayes implementation as well as a =
bunch of others more complicated classification algorithms.

On Jan 15, 2013, at 12:53 AM, VIGNESH S <vigneshklncit@gmail.com> wrote:

> Hi,
>=20
> Anyone Used the Naive Bayesian Classifier?
>=20
> It will be really helpful if some one Can  post how to use the
> classifiers in Lucene ..
>=20
> --=20
> Thanks and Regards
> Vignesh Srinivasan
> 9739135640
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20

---
Denis Bazhenov <dotsid@gmail.com>






---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54696-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Jan 15 02:12:42 2013
Return-Path: <java-user-return-54696-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id A7E28E7A9
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 15 Jan 2013 02:12:42 +0000 (UTC)
Received: (qmail 19351 invoked by uid 500); 15 Jan 2013 02:12:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19314 invoked by uid 500); 15 Jan 2013 02:12:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19301 invoked by uid 99); 15 Jan 2013 02:12:40 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jan 2013 02:12:40 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of karl.wettin@gmail.com designates 209.85.215.47 as permitted sender)
Received: from [209.85.215.47] (HELO mail-la0-f47.google.com) (209.85.215.47)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jan 2013 02:12:30 +0000
Received: by mail-la0-f47.google.com with SMTP id fh20so4601709lab.34
        for <java-user@lucene.apache.org>; Mon, 14 Jan 2013 18:12:10 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=x-received:content-type:mime-version:subject:from:in-reply-to:date
         :content-transfer-encoding:message-id:references:to:x-mailer;
        bh=+aPbVYRTpBkzsbfmRg7xRROz3RFAKN+dOuSagQbIrV0=;
        b=QsW7NCWf7vqQkWQVs+gvz7xvxyp2boZCCoEg74bhJFet6zqE5WwiFFAiKf0/MOlIyJ
         HU59yFZGqkGWBCAIhGXV+mjQcuyXemul4MkQyczI431ng9DsfyPfNn0zAzPS71/1q6X8
         U6NzrXkYKTkDDO5aq6Rhj7JOXXcLMt8qph87weUXgKO2EY7+p7nT9nkCjX6vpAQq8CSF
         W6KLohDJFg0iYReaPrWhAIp0YIAr64efZ94o64qA8VTTNOOJBt/V47NT/Ke8NMxf5F/Q
         hFPb/RkrEWJJM3gV4tuXfuycTCKoGAbpLsg+3Z+7jHo2g95CvuijFd90RJGPCsI5Je5p
         eI0g==
X-Received: by 10.112.51.233 with SMTP id n9mr36923048lbo.47.1358215930378;
        Mon, 14 Jan 2013 18:12:10 -0800 (PST)
Received: from [10.10.1.224] ([148.122.14.174])
        by mx.google.com with ESMTPS id ft8sm6031363lab.9.2013.01.14.18.12.07
        (version=TLSv1 cipher=ECDHE-RSA-RC4-SHA bits=128/128);
        Mon, 14 Jan 2013 18:12:08 -0800 (PST)
Content-Type: text/plain; charset=iso-8859-1
Mime-Version: 1.0 (Apple Message framework v1283)
Subject: Re: Reg Lucene Naive Bayesian classifier.
From: Karl Wettin <karl.wettin@gmail.com>
In-Reply-To: <CAMMjTZyqnNkRLySXjfgyKxtdbRy2-Syyq4K9M2gwN9sByf+03g@mail.gmail.com>
Date: Tue, 15 Jan 2013 03:12:08 +0100
Content-Transfer-Encoding: quoted-printable
Message-Id: <0D3F2642-504A-49DB-8BBC-F98C488CDB4C@gmail.com>
References: <CAMMjTZyqnNkRLySXjfgyKxtdbRy2-Syyq4K9M2gwN9sByf+03g@mail.gmail.com>
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.1283)
X-Virus-Checked: Checked by ClamAV on apache.org


14 jan 2013 kl. 14:53 skrev VIGNESH S:

> Anyone Used the Naive Bayesian Classifier?
>=20
> It will be really helpful if some one Can  post how to use the
> classifiers in Lucene ..

Hi there,

I posted a NB classifier in the jira back in 2007 that use Lucene as =
data matrix. It probably needs a bit of modifications in order to work =
with newer versions of Lucene, but perhaps you'll find it useful.=20

<https://issues.apache.org/jira/browse/LUCENE-1039>


		karl=

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54697-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Jan 15 03:11:43 2013
Return-Path: <java-user-return-54697-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 3B872DABD
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 15 Jan 2013 03:11:43 +0000 (UTC)
Received: (qmail 80307 invoked by uid 500); 15 Jan 2013 03:11:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80133 invoked by uid 500); 15 Jan 2013 03:11:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80107 invoked by uid 99); 15 Jan 2013 03:11:39 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jan 2013 03:11:39 +0000
X-ASF-Spam-Status: No, hits=2.8 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of goksron@gmail.com designates 209.85.210.50 as permitted sender)
Received: from [209.85.210.50] (HELO mail-da0-f50.google.com) (209.85.210.50)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jan 2013 03:11:32 +0000
Received: by mail-da0-f50.google.com with SMTP id h15so2051690dan.37
        for <java-user@lucene.apache.org>; Mon, 14 Jan 2013 19:11:11 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=x-received:message-id:date:from:user-agent:mime-version:to:subject
         :references:in-reply-to:content-type;
        bh=bzfvx9hDv888vbF8I0C8qScdVa1OJ2DGMIb8hKKZG2Y=;
        b=W8qiYnKlQE13dS5tLHSw9NvNZabqrNRFf2KYkGaxA5cL3SVvrdEx7z2a35mxReqDl9
         FBpFvf+WlFmQdC75AOnISz+K4dAS1l+korWJn2KpJtINb0H/7l5g2KlgWNCD/x3K/Z0K
         BpwONH6/sLL0uN1AcfyOufKjdTn7DKuRA0Y8Hb3WYnoRACTyJGYvBsKiSRvTqRC9168I
         miyCA/ODDzlMUaVW+dGxUyCpW4EvhzpiqeTN3j9Ebw/NGgRfUVERp+V07dlNB7F0ZTX5
         GbP/PetFAJwJDnEezJow6d+sjCiwd1I0goScg7YjresMIFus+7LE+QGY2aOVtLPdoM00
         JUMg==
X-Received: by 10.68.237.135 with SMTP id vc7mr260392048pbc.2.1358219471284;
        Mon, 14 Jan 2013 19:11:11 -0800 (PST)
Received: from [10.19.220.79] (64-71-21-34.static.wiline.com. [64.71.21.34])
        by mx.google.com with ESMTPS id jo6sm9309578pbb.5.2013.01.14.19.11.08
        (version=TLSv1 cipher=ECDHE-RSA-RC4-SHA bits=128/128);
        Mon, 14 Jan 2013 19:11:09 -0800 (PST)
Message-ID: <50F4C8C9.5050408@gmail.com>
Date: Mon, 14 Jan 2013 19:11:05 -0800
From: Lance Norskog <goksron@gmail.com>
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:17.0) Gecko/20130106 Thunderbird/17.0.2
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: StandardAnalyzer: Support for Japanese
References: <1357845593524-4032290.post@n3.nabble.com>
In-Reply-To: <1357845593524-4032290.post@n3.nabble.com>
Content-Type: multipart/alternative;
 boundary="------------030205020501090107050902"
X-Virus-Checked: Checked by ClamAV on apache.org

--------------030205020501090107050902
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

3.x and 4.0 Solr releases have nice analyzers just for Japanese. In 4.0 
they are the "Kuromoji" package.

In 4.0, the JapaneseAnalyzer probably does what you need:
http://grepcode.com/file/repo1.maven.org/maven2/org.apache.lucene/lucene-analyzers-kuromoji/4.0.0/org/apache/lucene/analysis/ja/JapaneseAnalyzer.java?av=f

3.6 also has the Kuromoji package, but I don't know how advanced it is 
compared the 4.x version.

Cheers!

On 01/10/2013 11:19 AM, saisantoshi wrote:
> We are using StandardAnalyzer for indexing some Japanese Keywords. It works
> fine so far but just wanted to confirm if the StandardAnalyzer can fully
> support it ( I have read somewhere in Lucene In Action book, that
> StandardAnalyzer does support CJK). Just want to confirm if my understanding
> is correct? or do we need to use a specific analyzer for processing Japanese
> Keywords.
>
> Alternatively, is there a stop words list for Japanese Language so that we
> can add an extra filter to the Standard Analyzer.
>
> Any thoughts on this is much appreciated.
>
> Thanks,
> Sai.
>
>
>
> --
> View this message in context: http://lucene.472066.n3.nabble.com/StandardAnalyzer-Support-for-Japanese-tp4032290.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


--------------030205020501090107050902--

From java-user-return-54698-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Jan 15 05:34:24 2013
Return-Path: <java-user-return-54698-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id B3397D78C
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 15 Jan 2013 05:34:24 +0000 (UTC)
Received: (qmail 14490 invoked by uid 500); 15 Jan 2013 05:34:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14280 invoked by uid 500); 15 Jan 2013 05:34:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14234 invoked by uid 99); 15 Jan 2013 05:34:20 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jan 2013 05:34:20 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of vigneshklncit@gmail.com designates 209.85.216.45 as permitted sender)
Received: from [209.85.216.45] (HELO mail-qa0-f45.google.com) (209.85.216.45)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jan 2013 05:34:12 +0000
Received: by mail-qa0-f45.google.com with SMTP id j15so2095079qaq.11
        for <java-user@lucene.apache.org>; Mon, 14 Jan 2013 21:33:52 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=84x00OakivBAu/k631IUiAGaKjKYbce2+ePA6zkKV/s=;
        b=ZMYLBQwM/UhnnqoY2R340zOfy5ZUj1GX4Uij/2Sx2TvPc0XP+sWT1U90/Fsv53fUmg
         SxJpFIgHXUmHufL0PCrVA1ih5VMOFHHO6GIRm/BOAc+1jcwbHKM9SE34ND+ySncSCZBf
         i8uoXDomL2BBIYKrjRvCSW/CSgaI67qyr995LaBnA/6JmrVzzVFoaFX1uIskV5SDkE1L
         4GeDqvm4LFwArZj3WWS9lD519jIOp5XWcIPEiqzAhTbSns4eR0FdsoUTdHINX+/+BFqx
         RiJgCncY+s9Y29mUOOhKlrH16XRq/zEm2osYnab25HaVUvGLHi0yczjE4D+li/+WOvac
         U5MA==
MIME-Version: 1.0
Received: by 10.224.184.130 with SMTP id ck2mr73996889qab.41.1358228032268;
 Mon, 14 Jan 2013 21:33:52 -0800 (PST)
Received: by 10.49.71.143 with HTTP; Mon, 14 Jan 2013 21:33:52 -0800 (PST)
In-Reply-To: <CAMMjTZyqnNkRLySXjfgyKxtdbRy2-Syyq4K9M2gwN9sByf+03g@mail.gmail.com>
References: <CAMMjTZyqnNkRLySXjfgyKxtdbRy2-Syyq4K9M2gwN9sByf+03g@mail.gmail.com>
Date: Tue, 15 Jan 2013 11:03:52 +0530
Message-ID: <CAMMjTZxae1o=7vGPVdF2qC1qRG0K4F+SeDY-Gq4Jbx_YjAFrPQ@mail.gmail.com>
Subject: Re: Reg Lucene Naive Bayesian classifier.
From: VIGNESH S <vigneshklncit@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

Hi All,

Thanks for your replies..

Actually I am trying to classify the email mail data in to categories
and also spam mails .. I have tried clustering but it is not useful
since we can not control categories.

I am looking for a light weight implementation which can be used in
mobiles in client side.

I thought Lucene Naive Bayesian Would be useful...

Please Suggest me Whether classifying emails will be done using this
Lucene Naive Bayesian or any other Lucene Classifiers..


Thanks and Regards
Vignesh Srinivasan


On Mon, Jan 14, 2013 at 7:23 PM, VIGNESH S <vigneshklncit@gmail.com> wrote:
> Hi,
>
> Anyone Used the Naive Bayesian Classifier?
>
> It will be really helpful if some one Can  post how to use the
> classifiers in Lucene ..
>
> --
> Thanks and Regards
> Vignesh Srinivasan
> 9739135640



-- 
Thanks and Regards
Vignesh Srinivasan
9739135640

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54699-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Jan 15 09:20:53 2013
Return-Path: <java-user-return-54699-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 8F648E3C8
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 15 Jan 2013 09:20:53 +0000 (UTC)
Received: (qmail 48881 invoked by uid 500); 15 Jan 2013 09:20:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48710 invoked by uid 500); 15 Jan 2013 09:20:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48658 invoked by uid 99); 15 Jan 2013 09:20:49 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jan 2013 09:20:49 +0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [74.125.82.171] (HELO mail-we0-f171.google.com) (74.125.82.171)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jan 2013 09:20:40 +0000
Received: by mail-we0-f171.google.com with SMTP id u3so14384wey.2
        for <java-user@lucene.apache.org>; Tue, 15 Jan 2013 01:20:20 -0800 (PST)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=x-received:from:mime-version:content-type:subject:date:in-reply-to
         :to:references:message-id:x-mailer:x-gm-message-state;
        bh=IwsPC2T18XG4JhWTdoM7zBwmSS3ab66txBOsM0sj6yA=;
        b=FEeXnPQndH4IaO+br/jinpNilBblPEae6b1e38kRxOiWF2p5wr8h10E+RHoOCMvbx9
         AY+mDKXm36YajdsG6RGF0yNcl6dOS/U6K7iXcmWaUkQXDmxf4g+tlEXTQE8Pst6fPa8T
         i579yBj9RUEQF2x37f0YkVTfZfIqZneW0rUXLm0g5pmmAv1riJ4Ajln4Ux4MuIxu1JcH
         OBp8eTU3if/E1SrEq96YJDmKZcfpI4//KsTYMEJZfYt5Yr29rXl2fKcufdzZC8pEowuj
         pgdpW40jGZLMPrLXlg2qBOzEdAdwtU+csabzF5LH5t9HTu0qWqVOkYQa/Wf4e+u1cXIv
         t5Bw==
X-Received: by 10.194.87.200 with SMTP id ba8mr140207087wjb.22.1358241620619;
        Tue, 15 Jan 2013 01:20:20 -0800 (PST)
Received: from [192.168.0.5] (host-2-96-110-173.as13285.net. [2.96.110.173])
        by mx.google.com with ESMTPS id p3sm2568540wic.8.2013.01.15.01.20.19
        (version=TLSv1 cipher=ECDHE-RSA-RC4-SHA bits=128/128);
        Tue, 15 Jan 2013 01:20:19 -0800 (PST)
From: Alan Woodward <alan@flax.co.uk>
Mime-Version: 1.0 (Apple Message framework v1283)
Content-Type: multipart/alternative; boundary="Apple-Mail=_CAE0315D-1B50-4FDE-B642-D399C27C8314"
Subject: Re: Reg Lucene Naive Bayesian classifier.
Date: Tue, 15 Jan 2013 09:20:18 +0000
In-Reply-To: <CAMMjTZxae1o=7vGPVdF2qC1qRG0K4F+SeDY-Gq4Jbx_YjAFrPQ@mail.gmail.com>
To: java-user@lucene.apache.org
References: <CAMMjTZyqnNkRLySXjfgyKxtdbRy2-Syyq4K9M2gwN9sByf+03g@mail.gmail.com> <CAMMjTZxae1o=7vGPVdF2qC1qRG0K4F+SeDY-Gq4Jbx_YjAFrPQ@mail.gmail.com>
Message-Id: <0D71D493-D95B-4179-A8B7-DA2B1CC53230@flax.co.uk>
X-Mailer: Apple Mail (2.1283)
X-Gm-Message-State: ALoCoQmNj9rhWAl1GdFDXu3UD+SeF+BBTjrV434sdA1uAXQE/S+658aR7SL2fxsk6nQWyjjSxpN0
X-Virus-Checked: Checked by ClamAV on apache.org

--Apple-Mail=_CAE0315D-1B50-4FDE-B642-D399C27C8314
Content-Transfer-Encoding: quoted-printable
Content-Type: text/plain;
	charset=iso-8859-1

Hi Vignesh,

You might want to have a look at something we put together last year: =
http://www.flax.co.uk/blog/2012/06/12/clade-a-freely-available-open-source=
-taxonomy-and-autoclassification-tool/.=20

Alan Woodward
alan@flax.co.uk


On 15 Jan 2013, at 05:33, VIGNESH S wrote:

> Hi All,
>=20
> Thanks for your replies..
>=20
> Actually I am trying to classify the email mail data in to categories
> and also spam mails .. I have tried clustering but it is not useful
> since we can not control categories.
>=20
> I am looking for a light weight implementation which can be used in
> mobiles in client side.
>=20
> I thought Lucene Naive Bayesian Would be useful...
>=20
> Please Suggest me Whether classifying emails will be done using this
> Lucene Naive Bayesian or any other Lucene Classifiers..
>=20
>=20
> Thanks and Regards
> Vignesh Srinivasan
>=20
>=20
> On Mon, Jan 14, 2013 at 7:23 PM, VIGNESH S <vigneshklncit@gmail.com> =
wrote:
>> Hi,
>>=20
>> Anyone Used the Naive Bayesian Classifier?
>>=20
>> It will be really helpful if some one Can  post how to use the
>> classifiers in Lucene ..
>>=20
>> --
>> Thanks and Regards
>> Vignesh Srinivasan
>> 9739135640
>=20
>=20
>=20
> --=20
> Thanks and Regards
> Vignesh Srinivasan
> 9739135640
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20


--Apple-Mail=_CAE0315D-1B50-4FDE-B642-D399C27C8314--

From java-user-return-54700-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Jan 15 10:47:17 2013
Return-Path: <java-user-return-54700-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 281BFEF52
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 15 Jan 2013 10:47:17 +0000 (UTC)
Received: (qmail 23746 invoked by uid 500); 15 Jan 2013 10:47:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23573 invoked by uid 500); 15 Jan 2013 10:47:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23544 invoked by uid 99); 15 Jan 2013 10:47:14 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jan 2013 10:47:14 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of tommaso.teofili@gmail.com designates 209.85.160.48 as permitted sender)
Received: from [209.85.160.48] (HELO mail-pb0-f48.google.com) (209.85.160.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jan 2013 10:47:06 +0000
Received: by mail-pb0-f48.google.com with SMTP id rq13so2780705pbb.35
        for <java-user@lucene.apache.org>; Tue, 15 Jan 2013 02:46:45 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        bh=PAPjgJjM9zJtxhfx5xtXi/L/4lErCTWCK7sgL9BDYpU=;
        b=vfBhl3vGvi9+2Kf3V3/Xuhigbx7gileHG6sz2iHBOi79km8b1SXd1G9wfniphbLZAL
         1Ma4sh7rMzL4D/HHK8111ngFU+bx+yBPKjWIpdxDap9v279RjrstrpqcSbIWpWOJrZn3
         iIZ6KssmDBpKNnzCl0bkN0fHttCGFkIIWvdkwc3oKTw67Exty2qzik8YQR9NT2JPmWKd
         sIlkDqIji8fi2pL87F4Y0etfWF31DhSD2mJV5DsgrFxlGWU8z13oJhq0P6Wt44lBhYjQ
         xKZdCbcYBfUQalAL8OAJHCzT6S2R27Pk7Bn4lMOlw5kgvuKoeJfsBTiBkzn5vU5DOZo0
         5TGQ==
Received: by 10.68.227.97 with SMTP id rz1mr262640468pbc.54.1358246805075;
 Tue, 15 Jan 2013 02:46:45 -0800 (PST)
MIME-Version: 1.0
Received: by 10.68.24.136 with HTTP; Tue, 15 Jan 2013 02:46:04 -0800 (PST)
In-Reply-To: <CAMMjTZxae1o=7vGPVdF2qC1qRG0K4F+SeDY-Gq4Jbx_YjAFrPQ@mail.gmail.com>
References: <CAMMjTZyqnNkRLySXjfgyKxtdbRy2-Syyq4K9M2gwN9sByf+03g@mail.gmail.com>
 <CAMMjTZxae1o=7vGPVdF2qC1qRG0K4F+SeDY-Gq4Jbx_YjAFrPQ@mail.gmail.com>
From: Tommaso Teofili <tommaso.teofili@gmail.com>
Date: Tue, 15 Jan 2013 11:46:04 +0100
Message-ID: <CAGnSx04i7NTTjGwFTRcJ8-RjP3jE8Zhr85FTNP1TWPvdyisaxg@mail.gmail.com>
Subject: Re: Reg Lucene Naive Bayesian classifier.
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=e89a8ff24c8955781004d3517a5f
X-Virus-Checked: Checked by ClamAV on apache.org

--e89a8ff24c8955781004d3517a5f
Content-Type: text/plain; charset=ISO-8859-1

2013/1/15 VIGNESH S <vigneshklncit@gmail.com>

> Hi All,
>
> Thanks for your replies..
>
> Actually I am trying to classify the email mail data in to categories
> and also spam mails .. I have tried clustering but it is not useful
> since we can not control categories.
>
> I am looking for a light weight implementation which can be used in
> mobiles in client side.
>
> I thought Lucene Naive Bayesian Would be useful...
>
> Please Suggest me Whether classifying emails will be done using this
> Lucene Naive Bayesian or any other Lucene Classifiers..
>

You could actually use one of the existing ones (naive bayes or nearest
neighbor) or even implement a new one (just implement the Classifier
interface [1]) if you already have enough labeled data in your index (one
field containing mail test and one field containing assigned category).
To use those just call Classifier#train method to train the classifier and
Classifier#assignClass to assign a class/category to a new text.
If your task is just spam detection IMHO one of the above should be enough,
if you have also to assign different categories depending on proper
semantics then I'd recommend use some other library which is more focused
for that purpose like Apache Mahout, Apache OpenNLP, etc..

My 2 cents,
Tommaso


[1] :
http://svn.apache.org/repos/asf/lucene/dev/trunk/lucene/classification/src/java/org/apache/lucene/classification/Classifier.java


>
>
> Thanks and Regards
> Vignesh Srinivasan
>
>
> On Mon, Jan 14, 2013 at 7:23 PM, VIGNESH S <vigneshklncit@gmail.com>
> wrote:
> > Hi,
> >
> > Anyone Used the Naive Bayesian Classifier?
> >
> > It will be really helpful if some one Can  post how to use the
> > classifiers in Lucene ..
> >
> > --
> > Thanks and Regards
> > Vignesh Srinivasan
> > 9739135640
>
>
>
> --
> Thanks and Regards
> Vignesh Srinivasan
> 9739135640
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--e89a8ff24c8955781004d3517a5f--

From java-user-return-54701-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Jan 15 11:29:08 2013
Return-Path: <java-user-return-54701-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 3C780EBC6
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 15 Jan 2013 11:29:08 +0000 (UTC)
Received: (qmail 33040 invoked by uid 500); 15 Jan 2013 11:29:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32554 invoked by uid 500); 15 Jan 2013 11:29:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32528 invoked by uid 99); 15 Jan 2013 11:29:04 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jan 2013 11:29:04 +0000
X-ASF-Spam-Status: No, hits=-0.1 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of makr@ciklum.com designates 207.126.144.119 as permitted sender)
Received: from [207.126.144.119] (HELO eu1sys200aog105.obsmtp.com) (207.126.144.119)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jan 2013 11:28:55 +0000
Received: from mail-bk0-f70.google.com ([209.85.214.70]) (using TLSv1) by eu1sys200aob105.postini.com ([207.126.147.11]) with SMTP
	ID DSNKUPU9Yc3pwcl6oqw8Kv46asK9Xp1jGD/z@postini.com; Tue, 15 Jan 2013 11:28:35 UTC
Received: by mail-bk0-f70.google.com with SMTP id jc3so4954595bkc.1
        for <java-user@lucene.apache.org>; Tue, 15 Jan 2013 03:28:33 -0800 (PST)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=x-received:x-received:message-id:from:to:subject:date:mime-version
         :content-type:x-priority:x-msmail-priority:importance:x-mailer
         :x-mimeole:x-gm-message-state;
        bh=SSWnOhRy8PnCv4pmlHLXYVTr5l0NtWwfhRDB6zPlrA4=;
        b=hK12cwSl8Azbo6RJxucKK5C88VykWHMn6O+/8D7QTWpAcS+aQ2Ys85Xow2EHkWYYwg
         zBU+FX8zLIT5I+9mVe3EXMBkpmPKcmjy7VjvZJuE5Dp9E1aiXqNW1Ti1GDlSBMEc91wZ
         NVDs0EHec4O2GG6pPiRBFkYFRjWHQSwbBqzTcJs4MDnDTgAWBxQ4oF59gXOnLVk85uw3
         9e1XBQGL78dMQyouGvgFx+TBWAUJW4Mxu+SUoRA7sGaP+zQOjejn+QsBbn6kHQxkP2/3
         QuNGGU6Cgn6TCBL6SiS7bt7O1uqDYpdTpP8+5NOy5QRNRih2JadHDFd+F3v7Mgo+okJd
         4bBQ==
X-Received: by 10.204.129.66 with SMTP id n2mr41291266bks.94.1358249313223;
        Tue, 15 Jan 2013 03:28:33 -0800 (PST)
X-Received: by 10.204.129.66 with SMTP id n2mr41291261bks.94.1358249313072;
        Tue, 15 Jan 2013 03:28:33 -0800 (PST)
Received: from MAXXPC ([91.219.169.251])
        by mx.google.com with ESMTPS id u3sm12352194bkw.9.2013.01.15.03.28.32
        (version=TLSv1 cipher=RC4-SHA bits=128/128);
        Tue, 15 Jan 2013 03:28:32 -0800 (PST)
Message-ID: <4A054AFD7E544C7DAA39F84691A9F598@kyiv.ciklum.net>
From: Maksym Krasovskiy <makr@ciklum.com>
To: <java-user@lucene.apache.org>
Subject: Lucene 4.0 WhitespaceAnalyzer problem
Date: Tue, 15 Jan 2013 13:28:31 +0200
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_004D_01CDF324.35E206F0"
X-Priority: 3
X-MSMail-Priority: Normal
Importance: Normal
X-Mailer: Microsoft Windows Live Mail 15.4.3555.308
X-MimeOLE: Produced By Microsoft MimeOLE V15.4.3555.308
X-Gm-Message-State: ALoCoQkqOsnkl48z6zR0EZNFh213hPbFmR88jiSu2aVpqydip2Zjwm7ipKGC4vyOKXQRGoHeJOF33UxDwNB3nrT+tFcZyYuEtQtnglcgGjVQRhPpom5DcEjYRUULzkuivz8tmcn0ipsHo+F6/fgXZGoFwNoZVarEt0lFYK1uGIjrWkMZVzA0q4w=
X-Virus-Checked: Checked by ClamAV on apache.org

------=_NextPart_000_004D_01CDF324.35E206F0
Content-Type: text/plain;
	charset="UTF-8"
Content-Transfer-Encoding: quoted-printable

Hi!
I try to use WhitespaceAnalyzer from Lucene 4.0  for splitting strings =
to words.
I wrote smal test:
@Test
public void whitespaceAnalyzerTest() throws IOException {
    String string =3D "sdfdsf sdfsdf sd sdf ";
    Analyzer wa =3D new WhitespaceAnalyzer(Version.LUCENE_40);
    TokenStream tokenStream =3D wa.tokenStream("", new =
StringReader(string));
    while (tokenStream.incrementToken()) {
        =
System.out.println(tokenStream.getAttribute(CharTermAttribute.class).toSt=
ring());
    }
}

but got exception:
java.lang.ArrayIndexOutOfBoundsException: -1
    at java.lang.Character.codePointAtImpl(Character.java:2405)
    at java.lang.Character.codePointAt(Character.java:2369)
    at =
org.apache.lucene.analysis.util.CharacterUtils$Java5CharacterUtils.codePo=
intAt(CharacterUtils.java:164)
    at =
org.apache.lucene.analysis.util.CharTokenizer.incrementToken(CharTokenize=
r.java:166)
    at =
com.maxx.tests.lucene40test.analyzer.AnalyzerTest.whitespaceAnalyzerTest(=
AnalyzerTest.java:93)
    ...


If I change WhitespaceAnalyzer to StandardAnalyzer  it work correctly.=20
For workaround I can create StandardAnalyzer  without stopwords, but why =
my code doesn=E2=80=99t work?



--
Krasovskiy Maxim

------=_NextPart_000_004D_01CDF324.35E206F0--


From java-user-return-54702-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Jan 15 11:48:39 2013
Return-Path: <java-user-return-54702-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 8DD98ED98
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 15 Jan 2013 11:48:39 +0000 (UTC)
Received: (qmail 81941 invoked by uid 500); 15 Jan 2013 11:48:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81610 invoked by uid 500); 15 Jan 2013 11:48:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81568 invoked by uid 99); 15 Jan 2013 11:48:36 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jan 2013 11:48:36 +0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.220.180] (HELO mail-vc0-f180.google.com) (209.85.220.180)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jan 2013 11:48:30 +0000
Received: by mail-vc0-f180.google.com with SMTP id p16so4544251vcq.39
        for <java-user@lucene.apache.org>; Tue, 15 Jan 2013 03:48:09 -0800 (PST)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:x-gm-message-state;
        bh=K3RlI+xqpxhsTgCTmsXpYfwuJfkvQGHmX6+Dcp2hYA8=;
        b=FlDgQxWvziP6D5UjMkfvkGcl24tSZVzkQ2fBB7m4NSvaIT4oF0SSXVfIqbn+AGdY9R
         UBvteEAVPlBvpLj2sdCBuOY2wdXCtj+rA7dXOfdBkFfBSJS3e+Za8nfqZTh+Lu7Nk6eJ
         9kaygoDgZkP1o7PR7eiac7qC60GR/tUz0OZ0/Snnz5cWJoywLv60IuNqV4hLkAp1FAla
         hFw11qiMXtqiMAolLh1ZtUtql/4kPJV9C1jOnQlPqgySS3wXJfbq928J9R5+wSz/0zTM
         htb85bJhJW/7IZYAllMUR5DdNjPiEl6VGqvDx6TKKbKRcZr6Do6L5CS4VpBVPUSb2DF/
         f2Bg==
MIME-Version: 1.0
Received: by 10.52.177.103 with SMTP id cp7mr92032488vdc.113.1358250489672;
 Tue, 15 Jan 2013 03:48:09 -0800 (PST)
Received: by 10.58.234.138 with HTTP; Tue, 15 Jan 2013 03:48:09 -0800 (PST)
In-Reply-To: <4A054AFD7E544C7DAA39F84691A9F598@kyiv.ciklum.net>
References: <4A054AFD7E544C7DAA39F84691A9F598@kyiv.ciklum.net>
Date: Tue, 15 Jan 2013 13:48:09 +0200
Message-ID: <CA+Ltc5KV_OWX2h2Did-YHz4fUKm3-Cp3SWBaS=VO-Vo1s9vtzA@mail.gmail.com>
Subject: Re: Lucene 4.0 WhitespaceAnalyzer problem
From: Alon Muchnick <alon@datonics.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Content-Type: multipart/alternative; boundary=20cf3071cf30f3f2b304d3525572
X-Gm-Message-State: ALoCoQmtYDwARi3HZJEFpNArCUrAwDTHNV2UcRLvdKgp12yialUvmhdZhgUDNz+qn+UW+jG5EKj8
X-Virus-Checked: Checked by ClamAV on apache.org

--20cf3071cf30f3f2b304d3525572
Content-Type: text/plain; charset=windows-1252
Content-Transfer-Encoding: quoted-printable

hi Maxim ,

you need to reset the tokenStream before the while loop - tokenStream .rese=
t
()

check out
http://lucene.apache.org/core/4_0_0/core/org/apache/lucene/analysis/package=
-summary.html

 look under "invoking the analyzer" :

"ts.reset(); // Resets this stream to the beginning. (Required)"


Alon


On Tue, Jan 15, 2013 at 1:28 PM, Maksym Krasovskiy <makr@ciklum.com> wrote:

> Hi!
> I try to use WhitespaceAnalyzer from Lucene 4.0  for splitting strings to
> words.
> I wrote smal test:
> @Test
> public void whitespaceAnalyzerTest() throws IOException {
>     String string =3D "sdfdsf sdfsdf sd sdf ";
>     Analyzer wa =3D new WhitespaceAnalyzer(Version.LUCENE_40);
>     TokenStream tokenStream =3D wa.tokenStream("", new StringReader(strin=
g));
>     while (tokenStream.incrementToken()) {
>
> System.out.println(tokenStream.getAttribute(CharTermAttribute.class).toSt=
ring());
>     }
> }
>
> but got exception:
> java.lang.ArrayIndexOutOfBoundsException: -1
>     at java.lang.Character.codePointAtImpl(Character.java:2405)
>     at java.lang.Character.codePointAt(Character.java:2369)
>     at
> org.apache.lucene.analysis.util.CharacterUtils$Java5CharacterUtils.codePo=
intAt(CharacterUtils.java:164)
>     at
> org.apache.lucene.analysis.util.CharTokenizer.incrementToken(CharTokenize=
r.java:166)
>     at
> com.maxx.tests.lucene40test.analyzer.AnalyzerTest.whitespaceAnalyzerTest(=
AnalyzerTest.java:93)
>     ...
>
>
> If I change WhitespaceAnalyzer to StandardAnalyzer  it work correctly.
> For workaround I can create StandardAnalyzer  without stopwords, but why
> my code doesn=92t work?
>
>
>
> --
> Krasovskiy Maxim
>

--20cf3071cf30f3f2b304d3525572--

From java-user-return-54703-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Jan 15 14:04:59 2013
Return-Path: <java-user-return-54703-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id E548DE277
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 15 Jan 2013 14:04:59 +0000 (UTC)
Received: (qmail 41338 invoked by uid 500); 15 Jan 2013 14:04:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40380 invoked by uid 500); 15 Jan 2013 14:04:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40361 invoked by uid 99); 15 Jan 2013 14:04:52 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jan 2013 14:04:52 +0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.220.51] (HELO mail-pa0-f51.google.com) (209.85.220.51)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jan 2013 14:04:45 +0000
Received: by mail-pa0-f51.google.com with SMTP id fb11so119369pad.38
        for <java-user@lucene.apache.org>; Tue, 15 Jan 2013 06:04:24 -0800 (PST)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:x-gm-message-state;
        bh=81+KLeB1U3PCTaqnS3K193TBubUV8gQvos/sDDsueYk=;
        b=b0JjeDFr19QLWkDAlEjp2qAArnjM4JgZ9M9zhTfjaU0tZBd5iRgUSj6ccCRU+X9eAq
         h3CtHiIFca23w/eILoX/Sux+EhHjQ0MgxTXZHdp3WKoFIa8IEcYGgzse+CxkrfC2EFDE
         KJm/cB6iLVpaJHC77Wcxpe9re9eC/vkBN8v9LNpb+lcG+XXbN21w3IzkqwOvfL+fZxhz
         tG3XSrVWR9k4vfihIwEsXd3WsIUXGa6ne5L1RCg63xZO8AFW64wa4QDAgUWF2jzkMIhn
         niDQdHWrzAF9xAkLkTKkU/43/jGkJMb3rD8EdvRbhPQ74LKnLnKtCWABXPV22NVeKgGC
         ZDIw==
Received: by 10.68.143.100 with SMTP id sd4mr255437339pbb.107.1358258664163;
 Tue, 15 Jan 2013 06:04:24 -0800 (PST)
MIME-Version: 1.0
Received: by 10.68.202.105 with HTTP; Tue, 15 Jan 2013 06:04:04 -0800 (PST)
In-Reply-To: <CA+Ltc5Kz3+q5GLKvVaG1XCN3Z92QdrH8+0V5kr-wb4998FByyw@mail.gmail.com>
References: <CA+Ltc5+7J5MXQSagA22cWsv2bvyn_hsqLgTE1BAJSooMYF5gRA@mail.gmail.com>
 <CA+Ltc5Kz3+q5GLKvVaG1XCN3Z92QdrH8+0V5kr-wb4998FByyw@mail.gmail.com>
From: Michael McCandless <lucene@mikemccandless.com>
Date: Tue, 15 Jan 2013 09:04:04 -0500
Message-ID: <CAL8PwkZy4SsNOWWAwSV02dn=23+p1EqUAS8hGBZzYJ-59vfJkg@mail.gmail.com>
Subject: Re: extensive minor garbage collection when using RAMDirectory on
 Lucune 3.6.2
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=047d7b2e3f3430c8f804d3543dab
X-Gm-Message-State: ALoCoQlLfB4qRV9jJO5NsIlgBDeOgz1S9zSs9MRALGzIprKhsJpuBtr65sJy0GNTJ7fddVUpKoMx
X-Virus-Checked: Checked by ClamAV on apache.org

--047d7b2e3f3430c8f804d3543dab
Content-Type: text/plain; charset=ISO-8859-1

RAMDirectory generally has high GC cost for a large index because it always
allocates byte[1024] as its "pages".  See eg
http://blog.mikemccandless.com/2012/07/lucene-index-in-ram-with-azuls-zing-jvm.html

But, you are hitting lots of new gen garbage, which is different.

ExactPhraseScorer is new from 3.0.3 -> 3.6.2, and it does alloc two
int[4096] temp arrays, per segment, to do its work, and it gave a speedup
over the old ExactPhraseScorer.

BooleanScorer$Bucket existed in 3.0.3 as well, so I'm not sure why you
didn't see it then.  Though, it could be you previously got BooleanScorer2,
which is slower but creates fewer temp objects.  It creates an array of
2048 Bucket instances, each instance is maybe ~ 32 bytes, plus the pointer
so maybe ~40 bytes * 2048 per segment.

ScoreDoc is created to return the hits back after searching.  How many hits
do you pull for every search?

It's hard to see how this can be 5 MB per search.  But: how many segments
are in your index...?

Net/net I would not worry about this unless you see slower real-world
performance.  The GC seems to be doing its job (reaping lots of "died
young" objects) effectively ...

Mike McCandless

http://blog.mikemccandless.com


On Wed, Jan 9, 2013 at 12:34 PM, Alon Muchnick <alon@datonics.com> wrote:

> hi ,
> after upgrading to Lucune 3.6.2 i noticed there is an extensive minor
> garbage collection operations. once or twice a second , and the amount of
> memory being freed is about 600 MB each time for a load of 60 searches per
> second :
>
> 2013-01-09T18:57:24.350+0200: 174200.121: [GC [PSYoungGen:
> 630064K->544K(630336K)] 1405948K->776747K(1660992K), 0.0084250 secs]
> [Times: user=0.03 sys=0.00, real=0.01 secs]
> 2013-01-09T18:57:24.785+0200: 174200.555: [GC [PSYoungGen:
> 629920K->704K(630336K)] 1406123K->777083K(1660992K), 0.0066510 secs]
> [Times: user=0.04 sys=0.00, real=0.01 secs]
>
> after some investigation , the caused seemed to be Lucune related , we are
> using RAM directory (with about 70000 documents ) on top of tomcat 7.
>
> so i took Lucune source code and integrated it to our application , then
> run Jprofiler during some  load for a minute and checked the "application
> call tree " for "Garbage collected objects" only .
> i found that the 2 Lucune method that produce the most garbage collected
> object are (*screen shot attached* ) :
>
> (we have several indexes the below is from one of them )
>
>
>    - 23.2% - 215 MB - 48,252 alloc.
>    org.apache.lucene.search.ExactPhraseScorer.
>
>
>    - 6.3% - 60,481 kB - 728,414 alloc.
>    org.apache.lucene.search.BooleanQuery$BooleanWeight.scorer
>
>
>
> looking at the currently live object i see the top 2 classes instance are
> ( a screen shot is also attached )  :
>
>  org.apache.lucene.search.BooleanScorer$Bucket (instance count ) 1311699  (size)
> 41974368
>
>  org.apache.lucene.search.ScoreDoc (instance count )45846  (size)1100304
>
> we have a system with an earlier version  (tomcat 5.5 and Lucune 3.0.3 our
> all other code / jars are the same) which handles the same load and has the
> same indexes and the minor gc there occurs once every 1-2 second and the
> amount of memory being freed is about 60 MB.
>
> does this behavior is normal ?
> does a search should really generate so much short lived objects ( about
> 5MB for a search ) ?
> should we try and use some other RAM bases Index ? ( i know
> InstantiatedIndex is deprecated )
>
> thanks in advance .
>
> Alon
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--047d7b2e3f3430c8f804d3543dab--

From java-user-return-54704-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Jan 15 14:15:43 2013
Return-Path: <java-user-return-54704-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id C47DAE2C1
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 15 Jan 2013 14:15:43 +0000 (UTC)
Received: (qmail 83880 invoked by uid 500); 15 Jan 2013 14:15:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83713 invoked by uid 500); 15 Jan 2013 14:15:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83681 invoked by uid 99); 15 Jan 2013 14:15:40 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jan 2013 14:15:40 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of jc.dauphin@gmail.com designates 209.85.219.49 as permitted sender)
Received: from [209.85.219.49] (HELO mail-oa0-f49.google.com) (209.85.219.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jan 2013 14:15:35 +0000
Received: by mail-oa0-f49.google.com with SMTP id l10so143569oag.22
        for <java-user@lucene.apache.org>; Tue, 15 Jan 2013 06:15:14 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:date:message-id:subject:from:to:content-type;
        bh=eLUNB1QBQedlWxC9TNKYfx6vc7zePLAtIjw+1PKb/y4=;
        b=0NrMQ3DsGSFNwkHGsppwPKfso8QCMtto9YDh3p1Y7mxbnUGmbzWPur9seFVd+yavJ1
         nFhq1QxreOi6eaxj1jiP6NxjcYHIM7JbfOceGKjpCs9x9KxkrHJ0soWMFwEZTtabr7Hm
         Hd48T5kdfoIjl68qzuVakq7OKOo46uW7gVZGLSH3BNk8SBRDkgYT6JRt4LA719EpaY3e
         5krxRCYbgxBC+hbQnPKZtbZM0S8VOsqP2vB8looTsOh0WO/gLs93eT0Xi/WvWcoax3ig
         i/Dq89zABHtX01JKptPVcJh3gsqLnL1hByl8fWFjPREMAI/Ul4K32JLMp/8Xrndx/cnn
         0ZOg==
MIME-Version: 1.0
Received: by 10.60.171.170 with SMTP id av10mr56691983oec.78.1358259314332;
 Tue, 15 Jan 2013 06:15:14 -0800 (PST)
Received: by 10.76.34.9 with HTTP; Tue, 15 Jan 2013 06:15:14 -0800 (PST)
Date: Tue, 15 Jan 2013 15:15:14 +0100
Message-ID: <CALkRQxcrxJikRo3ixdhuZEyfCJ=oGt-LqAzRxnQQoBrNHJNMjg@mail.gmail.com>
Subject: Why Lucene 4.0.0 FilterAtomicReader terms method is final?
From: Jean-Claude Dauphin <jc.dauphin@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=bcaec54a3390f1954404d354637b
X-Virus-Checked: Checked by ClamAV on apache.org

--bcaec54a3390f1954404d354637b
Content-Type: text/plain; charset=ISO-8859-1

Hi,

I don't understand why the FilterAtomicReader method is declared as final
while the TestFilterAtomicReader test overrides the terms method.

I may have missed something, any help would be welcome

Best wishes,

JCD

-- 
Jean-Claude Dauphin

jc.dauphin@gmail.com
jc.dauphin@afus.unesco.org

http://kenai.com/projects/j-isis/
http://www.unesco.org/isis/
http://www.unesco.org/idams/
http://www.greenstone.org

--bcaec54a3390f1954404d354637b--

From java-user-return-54705-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Jan 15 15:16:48 2013
Return-Path: <java-user-return-54705-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 071E6D195
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 15 Jan 2013 15:16:48 +0000 (UTC)
Received: (qmail 67288 invoked by uid 500); 15 Jan 2013 15:16:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67021 invoked by uid 500); 15 Jan 2013 15:16:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66998 invoked by uid 99); 15 Jan 2013 15:16:45 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jan 2013 15:16:45 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of need4spd@gmail.com designates 209.85.220.175 as permitted sender)
Received: from [209.85.220.175] (HELO mail-vc0-f175.google.com) (209.85.220.175)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jan 2013 15:16:38 +0000
Received: by mail-vc0-f175.google.com with SMTP id fy7so214370vcb.34
        for <java-user@lucene.apache.org>; Tue, 15 Jan 2013 07:16:18 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:date:message-id:subject:from:to:content-type;
        bh=p76ovJVtOqj7ABK3PTLuqfla5o8I7ATejconq2JUmEw=;
        b=ANVdf/qaH5QVJZgK+iTkbrNeuhh/ebcWMIu0dPwLIjKxWFjxnU+eCLOZranG3PtrGO
         TrIKerZoGPQKfl7Wle8iAymRCCc0J6BNRVpVEc2+fRsnRnw75Is84KageU5Udq9cpwpb
         Ao64QhmJFliXtoSG8hOA49RLtMCXTyzXOZnuINm0WBmWQ5AMiPFxavKWQLRMEfQ5/RJX
         fP3JY4Wpb3YcG0mu9qWoQ9Ahx/UiqXbXKdqjCo3F4oQwpGTOIixy5Qr6gL4njwV51XRZ
         AayuyxPd9uwKBkZoRatIkmcs+9VMAg1t5lNn/VdvlLhvKbVuHfFadZ+cSLMz9SSMQ5sT
         zrcg==
MIME-Version: 1.0
Received: by 10.58.155.99 with SMTP id vv3mr107147364veb.50.1358262977947;
 Tue, 15 Jan 2013 07:16:17 -0800 (PST)
Received: by 10.52.90.210 with HTTP; Tue, 15 Jan 2013 07:16:17 -0800 (PST)
Date: Wed, 16 Jan 2013 00:16:17 +0900
Message-ID: <CAHibZ_7nsKbNMxzzQm0k6qYH=6sX28e_L9v73W=hcpbWXvSrbw@mail.gmail.com>
Subject: The best way get highest frequency term from index
From: =?EUC-KR?B?wOW/67yu?= <need4spd@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=047d7b67002d4fe66004d3553e57
X-Virus-Checked: Checked by ClamAV on apache.org

--047d7b67002d4fe66004d3553e57
Content-Type: text/plain; charset=EUC-KR
Content-Transfer-Encoding: quoted-printable

Hi.

What is the best way get highest frequency term from index?

I think for this, using PriorityQueue and cut off lower frequency term.
But this way need performing loop as all term's count.

Is there better way get highest frequency term?

Thanks.!
--=20
DEV=BF=EB=BD=C4
http://devyongsik.tistory.com

--047d7b67002d4fe66004d3553e57--

From java-user-return-54706-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Jan 15 16:16:24 2013
Return-Path: <java-user-return-54706-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 41C92E27D
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 15 Jan 2013 16:16:24 +0000 (UTC)
Received: (qmail 44561 invoked by uid 500); 15 Jan 2013 15:59:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44191 invoked by uid 500); 15 Jan 2013 15:59:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44166 invoked by uid 99); 15 Jan 2013 15:59:19 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jan 2013 15:59:19 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 209.85.212.177 as permitted sender)
Received: from [209.85.212.177] (HELO mail-wi0-f177.google.com) (209.85.212.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jan 2013 15:59:14 +0000
Received: by mail-wi0-f177.google.com with SMTP id hm2so269053wib.16
        for <java-user@lucene.apache.org>; Tue, 15 Jan 2013 07:58:52 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        bh=PtCCk4M8GrFxI9U9JRKy6wqLXGYvH7nAsGDyGUc+OX4=;
        b=gKuc4wyfrXdzJ05wWyj/WtGloyNhaZyx3GmlG+/ZFEFuDkY2yMKveiXhbydKBKAgbC
         h+8rR1mNbHoxiKEfgMcRVDr+vCJ4aQ4kC79E9HTOl24+62P+Jyh0J5d6iK8M7V2raanA
         7hjqBVCIEr6dTEoyfkzPIjRx4HUG79UwMW2vwzFjK8lLdeKhjCunt9aCs73/xi83TRUN
         rTKhuiCgGiSVUa/CVTfoSXIbuK291treo5sUIMKtn7hbJ2yNyQD1gXRDUNH97jUBEHGm
         2z6nTXn1QoxecpTbDPYsVom8dn+vMtgmX0I98cxgVEF1VEA6VanQnoLmOVHHoniPILOF
         sPFQ==
Received: by 10.194.108.101 with SMTP id hj5mr44888181wjb.6.1358265532770;
 Tue, 15 Jan 2013 07:58:52 -0800 (PST)
MIME-Version: 1.0
Received: by 10.194.57.11 with HTTP; Tue, 15 Jan 2013 07:58:32 -0800 (PST)
In-Reply-To: <CAHibZ_7nsKbNMxzzQm0k6qYH=6sX28e_L9v73W=hcpbWXvSrbw@mail.gmail.com>
References: <CAHibZ_7nsKbNMxzzQm0k6qYH=6sX28e_L9v73W=hcpbWXvSrbw@mail.gmail.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Tue, 15 Jan 2013 15:58:32 +0000
Message-ID: <CAEY5pxXJbwzvaLjNyTOLBVbiBvLQTte=km_fjaGC0Hjf1jD7vg@mail.gmail.com>
Subject: Re: The best way get highest frequency term from index
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=EUC-KR
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

java org.apache.lucene.misc.HighFreqTerms indexdir 1 field

That's for 4.0, in  lucene-misc-4.0.0.jar. It has been around for ages
but may have had a different package name in earlier releases.

I've no idea how it works and luckily don't need to.  You can look at
the source if you need to know.


--
Ian.


On Tue, Jan 15, 2013 at 3:16 PM, =C0=E5=BF=EB=BC=AE <need4spd@gmail.com> wr=
ote:
> Hi.
>
> What is the best way get highest frequency term from index?
>
> I think for this, using PriorityQueue and cut off lower frequency term.
> But this way need performing loop as all term's count.
>
> Is there better way get highest frequency term?
>
> Thanks.!
> --
> DEV=BF=EB=BD=C4
> http://devyongsik.tistory.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54707-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Jan 15 20:22:38 2013
Return-Path: <java-user-return-54707-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 503DFEFA8
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 15 Jan 2013 20:22:38 +0000 (UTC)
Received: (qmail 45186 invoked by uid 500); 15 Jan 2013 20:22:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45061 invoked by uid 500); 15 Jan 2013 20:22:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44948 invoked by uid 99); 15 Jan 2013 20:22:35 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jan 2013 20:22:35 +0000
X-ASF-Spam-Status: No, hits=0.2 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of timheller2@gmx.net designates 212.227.15.18 as permitted sender)
Received: from [212.227.15.18] (HELO mout.gmx.net) (212.227.15.18)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jan 2013 20:22:26 +0000
Received: from mailout-de.gmx.net ([10.1.76.31]) by mrigmx.server.lan
 (mrigmx001) with ESMTP (Nemesis) id 0M5aK6-1T27Of0nKy-00xaV0 for
 <java-user@lucene.apache.org>; Tue, 15 Jan 2013 21:22:05 +0100
Received: (qmail 16121 invoked by uid 0); 15 Jan 2013 20:22:05 -0000
Received: from 93.128.10.137 by www038.gmx.net with HTTP;
 Tue, 15 Jan 2013 21:22:03 +0100 (CET)
Content-Type: text/plain; charset="utf-8"
Date: Tue, 15 Jan 2013 21:22:03 +0100
From: "Thomas Keller" <timheller2@gmx.net>
Message-ID: <20130115202203.178190@gmx.net>
MIME-Version: 1.0
Subject: Lucene-MoreLikethis
To: java-user@lucene.apache.org
X-Authenticated: #113589487
X-Flags: 0001
X-Mailer: WWW-Mail 6100 (Global Message Exchange)
X-Priority: 3
X-Provags-ID: V01U2FsdGVkX1/m//EShonm38/73NY6gbfXjVz/xwkQHM7b9jzCcg
 ZYm/XDqQumQ2wquRGH3FGQZjHKJUz/Zd5sMg== 
Content-Transfer-Encoding: 8bit
X-GMX-UID: PN+HcP8keSEqWY5frnIhgL9+IGRvb4Da
X-Virus-Checked: Checked by ClamAV on apache.org

Hey, 

I have a question about "MoreLikeThis" in Lucene, Java. I built up an index and want to find similar documents. But I always get no results for my query, mlt.like(1) is always empty. Can anyone find my mistake? Here is an example. (I use Lucene 4.0) 

public class HelloLucene { 
  public static void main(String[] args) throws IOException, ParseException { 
  
   StandardAnalyzer analyzer = new StandardAnalyzer(Version.LUCENE_40); 
   Directory index = new RAMDirectory(); 
   IndexWriterConfig config = new IndexWriterConfig(Version.LUCENE_40, analyzer); 
  
    IndexWriter w = new IndexWriter(index, config); 
    addDoc(w, "Lucene in Action", "193398817"); 
    addDoc(w, "Lucene for Dummies", "55320055Z"); 
    addDoc(w, "Managing Gigabytes", "55063554A"); 
    addDoc(w, "The Art of Computer Science", "9900333X"); 
    w.close(); 
  
    // search 
    IndexReader reader = DirectoryReader.open(index); 
    IndexSearcher searcher = new IndexSearcher(reader); 
  
    MoreLikeThis mlt = new MoreLikeThis(reader); 
    Query query = mlt.like(1); 
    System.out.println(searcher.search(query, 5).totalHits); 
  } 
  
  private static void addDoc(IndexWriter w, String title, String isbn) throws IOException { 
    Document doc = new Document(); 
    doc.add(new TextField("title", title, Field.Store.YES)); 
  
    // use a string field for isbn because we don't want it tokenized 
    doc.add(new StringField("isbn", isbn, Field.Store.YES)); 
    w.addDocument(doc); 
  } 
}

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54708-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Jan 15 23:42:25 2013
Return-Path: <java-user-return-54708-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id D2326D494
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 15 Jan 2013 23:42:25 +0000 (UTC)
Received: (qmail 68157 invoked by uid 500); 15 Jan 2013 23:42:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68108 invoked by uid 500); 15 Jan 2013 23:42:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68099 invoked by uid 99); 15 Jan 2013 23:42:23 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jan 2013 23:42:23 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of SRS0=HB20SZ=LI=basetechnology.com=jack@yourhostingaccount.com designates 65.254.253.91 as permitted sender)
Received: from [65.254.253.91] (HELO mailout11.yourhostingaccount.com) (65.254.253.91)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jan 2013 23:42:14 +0000
Received: from mailscan07.yourhostingaccount.com ([10.1.15.7] helo=mailscan07.yourhostingaccount.com)
	by mailout11.yourhostingaccount.com with esmtp (Exim)
	id 1TvG8f-0002Qk-Kg
	for java-user@lucene.apache.org; Tue, 15 Jan 2013 18:41:53 -0500
Received: from impout01.yourhostingaccount.com ([10.1.55.1] helo=impout01.yourhostingaccount.com)
	by mailscan07.yourhostingaccount.com with esmtp (Exim)
	id 1TvG8f-0003Pp-94
	for java-user@lucene.apache.org; Tue, 15 Jan 2013 18:41:53 -0500
Received: from authsmtp10.yourhostingaccount.com ([10.1.18.10])
	by impout01.yourhostingaccount.com with NO UCE
	id oPht1k0030D2B7u01Pht4L; Tue, 15 Jan 2013 18:41:53 -0500
X-Authority-Analysis: v=2.0 cv=EJGEIilC c=1 sm=1
 a=yH02RjTyxywMAIqhn74x1Q==:17 a=aQzbgH187woA:10 a=3jZET7lWBKwA:10
 a=IkcTkHD0fZMA:10 a=jvYhGVW7AAAA:8 a=H6hms0sNOWQA:10 a=mV9VRH-2AAAA:8
 a=AvqIU0dnNoZOevBTFPsA:9 a=QEXdDO2ut3YA:10 a=2gI1vAumJwWs0gD4Ojj1yg==:117
X-EN-OrigOutIP: 10.1.18.10
X-EN-IMPSID: oPht1k0030D2B7u01Pht4L
Received: from 207-237-113-14.c3-0.nyr-ubr1.nyr.ny.cable.rcn.com ([207.237.113.14] helo=JackKrupansky)
	by authsmtp10.yourhostingaccount.com with esmtpa (Exim)
	id 1TvG8e-0000wa-Ta
	for java-user@lucene.apache.org; Tue, 15 Jan 2013 18:41:53 -0500
Message-ID: <1EA0226EAEEA49C3B7D250E0E544D6C0@JackKrupansky>
From: "Jack Krupansky" <jack@basetechnology.com>
To: <java-user@lucene.apache.org>
References: <20130115202203.178190@gmx.net>
In-Reply-To: <20130115202203.178190@gmx.net>
Subject: Re: Lucene-MoreLikethis
Date: Tue, 15 Jan 2013 18:41:49 -0500
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="utf-8";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
Importance: Normal
X-Mailer: Microsoft Windows Live Mail 15.4.3555.308
X-MimeOLE: Produced By Microsoft MimeOLE V15.4.3555.308
X-EN-UserInfo: e0a4b55451ed9f27313ebf02e3d4348d:fc4a93e1349e680c52bdd723c0ab3ef6
X-EN-AuthUser: jack@basetechnology.com
Sender:  "Jack Krupansky" <jack@basetechnology.com>
X-EN-OrigIP: 207.237.113.14
X-EN-OrigHost: 207-237-113-14.c3-0.nyr-ubr1.nyr.ny.cable.rcn.com
X-Virus-Checked: Checked by ClamAV on apache.org

There are lots of parameters you can adjust, but the defaults essentially 
assume that you have a fairly large corpus and aren't interested in 
low-frequency terms.

So, try MoreLikeThis#setMinDocFreq. The default is 5. You don't have any 
terms in your example with a doc freq over 2.

Also, try setMinTermFreq. The default is 2. You don't have any terms with a 
term frequency above 1.

-- Jack Krupansky

-----Original Message----- 
From: Thomas Keller
Sent: Tuesday, January 15, 2013 3:22 PM
To: java-user@lucene.apache.org
Subject: Lucene-MoreLikethis

Hey,

I have a question about "MoreLikeThis" in Lucene, Java. I built up an index 
and want to find similar documents. But I always get no results for my 
query, mlt.like(1) is always empty. Can anyone find my mistake? Here is an 
example. (I use Lucene 4.0)

public class HelloLucene {
  public static void main(String[] args) throws IOException, ParseException 
{

   StandardAnalyzer analyzer = new StandardAnalyzer(Version.LUCENE_40);
   Directory index = new RAMDirectory();
   IndexWriterConfig config = new IndexWriterConfig(Version.LUCENE_40, 
analyzer);

    IndexWriter w = new IndexWriter(index, config);
    addDoc(w, "Lucene in Action", "193398817");
    addDoc(w, "Lucene for Dummies", "55320055Z");
    addDoc(w, "Managing Gigabytes", "55063554A");
    addDoc(w, "The Art of Computer Science", "9900333X");
    w.close();

    // search
    IndexReader reader = DirectoryReader.open(index);
    IndexSearcher searcher = new IndexSearcher(reader);

    MoreLikeThis mlt = new MoreLikeThis(reader);
    Query query = mlt.like(1);
    System.out.println(searcher.search(query, 5).totalHits);
  }

  private static void addDoc(IndexWriter w, String title, String isbn) 
throws IOException {
    Document doc = new Document();
    doc.add(new TextField("title", title, Field.Store.YES));

    // use a string field for isbn because we don't want it tokenized
    doc.add(new StringField("isbn", isbn, Field.Store.YES));
    w.addDocument(doc);
  }
}

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54709-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jan 16 04:17:29 2013
Return-Path: <java-user-return-54709-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id D0989E0A1
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 16 Jan 2013 04:17:28 +0000 (UTC)
Received: (qmail 70228 invoked by uid 500); 16 Jan 2013 04:17:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69851 invoked by uid 500); 16 Jan 2013 04:17:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69812 invoked by uid 99); 16 Jan 2013 04:17:23 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Jan 2013 04:17:23 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of kasunp@opensource.lk designates 74.125.83.46 as permitted sender)
Received: from [74.125.83.46] (HELO mail-ee0-f46.google.com) (74.125.83.46)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Jan 2013 04:17:15 +0000
Received: by mail-ee0-f46.google.com with SMTP id e49so406777eek.19
        for <java-user@lucene.apache.org>; Tue, 15 Jan 2013 20:16:51 -0800 (PST)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:x-gm-message-state;
        bh=rEUTI4KXbZbNXIHZV960yBTKLLJ8TChbduqI5PwGK2k=;
        b=Ze88LXryq4T98X2K3B+rSSTPqQ8GvzTnGmLgE8FNpTLk+P68GUSx7Bh+ttfmEy/61F
         6/S9jvcAPx1KArK/cYDm9LOgpAn7l3JzZCu1/LN2b2kJH3cfwkkKUtMWJG4ktgYnK4J+
         4rBBwRNKAVI0tSxB0IxozuyYNVuckvaZlZfaa/1nTjO7VgN1VrU3XkLnTX8w26dZJtLw
         zEm8vDiG1UMLawL4CKesAlgFjZq2Z0hb7t9c3pnYU663CNVFHqpWhU3AGE4zEwPgwRce
         26ewxQnbhR3ndD/aJ6eJU2rWDJpRgUFcjd4BsEVlVcamh9/1Zeth8C7zqLeCjubdkuUX
         BbXA==
Received: by 10.14.224.199 with SMTP id x47mr40180371eep.19.1358309811696;
 Tue, 15 Jan 2013 20:16:51 -0800 (PST)
MIME-Version: 1.0
Received: by 10.14.184.137 with HTTP; Tue, 15 Jan 2013 20:16:31 -0800 (PST)
In-Reply-To: <CALGBXaO3q5KXqidNd8K7E-gknTa6GrGzmv_ZwTOLR==Q_MxGmQ@mail.gmail.com>
References: <CALGBXaO3q5KXqidNd8K7E-gknTa6GrGzmv_ZwTOLR==Q_MxGmQ@mail.gmail.com>
From: Kasun Perera <kasunp@opensource.lk>
Date: Wed, 16 Jan 2013 09:46:31 +0530
Message-ID: <CALGBXaP2WOcU2J9qT2DrDjkDJFMY5D6V2OKEb5JgCtt3BmobKg@mail.gmail.com>
Subject: Calculating a IDF value for a document collection
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=047d7b6228a6d2325b04d3602584
X-Gm-Message-State: ALoCoQkNmVb3qPzLeuUAy0607TPekwgIH1OBEwC1ziDLXdZe+GSrCwSfvPZbh5Mz2MKQt25olbd5
X-Virus-Checked: Checked by ClamAV on apache.org

--047d7b6228a6d2325b04d3602584
Content-Type: text/plain; charset=windows-1252
Content-Transfer-Encoding: quoted-printable

I have set of documents separated in to doc_sections (d) that are again
separated in to (n) number of sentences. There is an ontology that I=92m
using to calculate similarity between definitions of ontology terms vs
doc_sections.
The documents are indexed at sentence level, so each sentence is a document
in the Lucene index.Each ontology term definition is indexed as separate
document in the same lucene index.

These are my use cases
1)     I want to calculate similarity(Okapi, Cosine) between doc_section(i)
vs doc_section(j) and similarity between doc_section(j) vs ontology
definitions.
Now each sentence itself is a document in Lucene index, so I will be
calculating TF and IDF for a collection.
TF is specific to each document and will not change for a collection, but
what is the way to calculate IDF for a collection (IDF for not each
document but IDF value for collection)

This is the reason why I indexed at sentence level

2)     I would select some specific sentences, and consider those sentences
as new_document.
Then I want to calculate similarity between newly_created_document vs
doc_sections, and newly_created_document vs ontology definitions.
Here also each sentence is a document in lucene index, so basically I want
to calculate TF-IDF for a collection (IDF for not each document but one IDF
value for collection), how can this be done?

This can be done easily by creating the index again with custom documents.
I don=92t want to re-create the index again and again with newly created
documents; it would be much computational intensive.

--=20
Regards

Kasun Perera

--047d7b6228a6d2325b04d3602584--

From java-user-return-54710-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jan 16 12:08:43 2013
Return-Path: <java-user-return-54710-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 0AA2DEE7C
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 16 Jan 2013 12:08:43 +0000 (UTC)
Received: (qmail 73074 invoked by uid 500); 16 Jan 2013 12:08:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70612 invoked by uid 500); 16 Jan 2013 12:08:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70555 invoked by uid 99); 16 Jan 2013 12:08:32 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Jan 2013 12:08:32 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of need4spd@gmail.com designates 209.85.212.42 as permitted sender)
Received: from [209.85.212.42] (HELO mail-vb0-f42.google.com) (209.85.212.42)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Jan 2013 12:08:26 +0000
Received: by mail-vb0-f42.google.com with SMTP id fa15so1244410vbb.29
        for <java-user@lucene.apache.org>; Wed, 16 Jan 2013 04:08:06 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:x-received:in-reply-to:references:date:message-id
         :subject:from:to:content-type;
        bh=NkzAHrM0yy/1913CUQx9RNVuyyXxzijNmmAR9+9RgaQ=;
        b=FiEjE9krnxQ+NVI9WpJETajAoQ7QemfLPeKh/15hvX5RQr5TOaPKT+1XcnVCgl7waC
         i9Nab1iT8vi1vO4kJf3hg+PpVGc61aNtCuGJhRtHUxHsS/Gq9W4jJajSNfyZ6xxB2FdH
         leV8yi7Hh8SbDrow3pqLD1XWTQgIoZ1gUP/mUacEVVK3CnY58t0dh8y6cz5OumFvTB1p
         k8xxo5zxfsY6Ogn5ABhLjMpRDhi6Kr4y7eVcSB7Fxj5YHog9NIW+J7hzrtpl0eIKtzu7
         ywm4SSo6l5N1fgE3MpEGhS7l/mxzJ8pCfmQEMBtceSRSeyYVyQ78o2yhMIa/ORn73Hx9
         nvIA==
MIME-Version: 1.0
X-Received: by 10.52.67.133 with SMTP id n5mr734568vdt.24.1358338086210; Wed,
 16 Jan 2013 04:08:06 -0800 (PST)
Received: by 10.52.90.210 with HTTP; Wed, 16 Jan 2013 04:08:06 -0800 (PST)
In-Reply-To: <CAEY5pxXJbwzvaLjNyTOLBVbiBvLQTte=km_fjaGC0Hjf1jD7vg@mail.gmail.com>
References: <CAHibZ_7nsKbNMxzzQm0k6qYH=6sX28e_L9v73W=hcpbWXvSrbw@mail.gmail.com>
	<CAEY5pxXJbwzvaLjNyTOLBVbiBvLQTte=km_fjaGC0Hjf1jD7vg@mail.gmail.com>
Date: Wed, 16 Jan 2013 21:08:06 +0900
Message-ID: <CAHibZ_5Y04gJgiXnZKtEPW9r33Yh+BimS=96X-ua70jUZDfXWw@mail.gmail.com>
Subject: Re: The best way get highest frequency term from index
From: =?EUC-KR?B?wOW/67yu?= <need4spd@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=20cf307f397c1d0cef04d366bb06
X-Virus-Checked: Checked by ClamAV on apache.org

--20cf307f397c1d0cef04d366bb06
Content-Type: text/plain; charset=EUC-KR
Content-Transfer-Encoding: quoted-printable

Thank you for your reply!



2013/1/16 Ian Lea <ian.lea@gmail.com>

> java org.apache.lucene.misc.HighFreqTerms indexdir 1 field
>
> That's for 4.0, in  lucene-misc-4.0.0.jar. It has been around for ages
> but may have had a different package name in earlier releases.
>
> I've no idea how it works and luckily don't need to.  You can look at
> the source if you need to know.
>
>
> --
> Ian.
>
>
> On Tue, Jan 15, 2013 at 3:16 PM, =C0=E5=BF=EB=BC=AE <need4spd@gmail.com> =
wrote:
> > Hi.
> >
> > What is the best way get highest frequency term from index?
> >
> > I think for this, using PriorityQueue and cut off lower frequency term.
> > But this way need performing loop as all term's count.
> >
> > Is there better way get highest frequency term?
> >
> > Thanks.!
> > --
> > DEV=BF=EB=BD=C4
> > http://devyongsik.tistory.com
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


--=20
DEV=BF=EB=BD=C4
http://devyongsik.tistory.com

--20cf307f397c1d0cef04d366bb06--

From java-user-return-54711-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jan 16 15:51:51 2013
Return-Path: <java-user-return-54711-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 81294DED0
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 16 Jan 2013 15:51:51 +0000 (UTC)
Received: (qmail 45828 invoked by uid 500); 16 Jan 2013 15:51:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42629 invoked by uid 500); 16 Jan 2013 15:51:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42600 invoked by uid 99); 16 Jan 2013 15:51:42 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Jan 2013 15:51:42 +0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [98.138.229.87] (HELO nm34-vm7.bullet.mail.ne1.yahoo.com) (98.138.229.87)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Jan 2013 15:51:32 +0000
Received: from [98.138.90.55] by nm34.bullet.mail.ne1.yahoo.com with NNFMP; 16 Jan 2013 15:51:11 -0000
Received: from [98.138.89.252] by tm8.bullet.mail.ne1.yahoo.com with NNFMP; 16 Jan 2013 15:51:11 -0000
Received: from [127.0.0.1] by omp1044.mail.ne1.yahoo.com with NNFMP; 16 Jan 2013 15:51:11 -0000
X-Yahoo-Newman-Property: ymail-3
X-Yahoo-Newman-Id: 681872.47031.bm@omp1044.mail.ne1.yahoo.com
Received: (qmail 2676 invoked by uid 60001); 16 Jan 2013 15:51:11 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1358351471; bh=GwxJ7fNbArRaPo7iCqWt/4HvqFY9/stAe0wGhUXKB6I=; h=X-YMail-OSG:Received:X-Rocket-MIMEInfo:X-Mailer:Message-ID:Date:From:Reply-To:Subject:To:MIME-Version:Content-Type; b=igTQZ0EAnkLVgl0WLXthaxlhHCYp4/Gcpk8swZVUBIlQaa1gH3cQ6P0CTKDicOSsKKmJLgDmULouS4vHcmBLczyaN94MzLpNKD5XcPFBG6Cx/OPLZ9WX4yTX2S3Q1KxEAUSq4l2FrnNFGyii+ZpJ3hnoqNbV9ktrsLu6UuUd3+k=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Rocket-MIMEInfo:X-Mailer:Message-ID:Date:From:Reply-To:Subject:To:MIME-Version:Content-Type;
  b=y0jSkdyLCIbqQcj0oypuGo+7oIUETIe7mWK+IAxhcgzMEDHMVompXtSM7BRMXfPE1hgwKt9b25U+DvZuoJ6BddXCJeKjnivi93jw40MFYWPCvBlGtEuqOw9u2xhXO9XfA5wJsNnW2D8TmC+hlqr8mv6vN8VRfKHiiqSdshurppc=;
X-YMail-OSG: bxrYUdMVM1n80U3rcQGAE.xj7UnVAfBVr6Z4LZ9HI6bHOBj
 MSBgl.bF1XobumEf8a4gQ5pvQZkRkG3WvTsiLE8btpx6Z1TnI0oR5S.IHE7C
 KcWqli5YgJaZQT7Dznv.vi79gU1FQzVVl_m0ZSrwXqFP4WJygtpznWn6FFWw
 QksdOMFkn4NbkqQL1KwACKFiZP9arVWNE31Zse3SjX7mzcPdx0XJXpvH3nx1
 e6WX1oUEy52UbpLzw5e9RfhUGJdS3AWtPz1W8oRH92FM.Uok6lHrNtQ8boXy
 F7P9i.5FA0F_RATkhwGzg7omFkhlxkGvXEhXeXlBCkb5raQ8ebXchET1E3LD
 1JVkJ1ir38VmNFMR5y3w4S1sjplNZE4XYExinaD4XZZxfVtJ9GvZTE8KtIOJ
 xmESfmPIJnc6YQbgdXa6RC1F40Vep85O0cXKyUr5eynNeXVaX_pmnonUuGdt
 6DgFlIqcUq5CZB2Od.kEtyghIhIw0tT8jJWQfXpmRDfYXPwouHctmltYVpco
 1zkg-
Received: from [146.101.57.209] by web120706.mail.ne1.yahoo.com via HTTP; Wed, 16 Jan 2013 07:51:11 PST
X-Rocket-MIMEInfo: 001.001,SGkgR3V5cywKCkFwb2xvZ2llcyBpZiB0aGlzIGhhcyBiZWVuIGFza2VkIGJlZm9yZSBidXQgSSBjb3VsZCBub3QgYW4gYXBwcm9wcmlhdGUgcG9zdC4KClRoZSBMdWNlbmUgRG9jdW1lbnRhdGlvbiBzdHJlc3NlcyB0aGUgdXNlIG9mIGEgUmF3VGVybUZpbGVyIHdoZW4gYnVpbGRpbmcgdXAgdGhlIHBhcmVudEZpbHRlciBhbmQgSSB3YXMgcHJldmlvdXNseSB1c2luZyB0aGUgZm9sbG93aW5nIGluIGx1Y2VuZSAzLjYuMDoKCgrCoMKgwqDCoMKgwqDCoMKgwqDCoMKgIEZpbHRlciBwYXJlbnRRdWVyeUZpbHRlciABMAEBAQE-
X-Mailer: YahooMailWebService/0.8.130.494
Message-ID: <1358351471.1097.YahooMailNeo@web120706.mail.ne1.yahoo.com>
Date: Wed, 16 Jan 2013 07:51:11 -0800 (PST)
From: kiwi clive <kiwi_clive@yahoo.com>
Reply-To: kiwi clive <kiwi_clive@yahoo.com>
Subject: BlockJoin and RawTermFilter (lucene 4.0.0)
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="506312955-992899140-1358351471=:1097"
X-Virus-Checked: Checked by ClamAV on apache.org

--506312955-992899140-1358351471=:1097
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable

Hi Guys,=0A=0AApologies if this has been asked before but I could not an ap=
propriate post.=0A=0AThe Lucene Documentation stresses the use of a RawTerm=
Filer when building up the parentFilter and I was previously using the foll=
owing in lucene 3.6.0:=0A=0A=0A=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 Filter par=
entQueryFilter =3D new CachingWrapperFilter(new RawTermFilter(new Term("typ=
e", "T1")), true);=0A=0AHaving moved to lucene 4.0.0, I cannot find the Raw=
TermFilter class. It may be in another module but I have not been able to f=
ind it. Is this filter still required for BlockJoin as the Join API does no=
t seem to have changed appreciably.=0A=0AThanks for any help.=0AClive=0A
--506312955-992899140-1358351471=:1097--

From java-user-return-54712-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jan 16 19:19:38 2013
Return-Path: <java-user-return-54712-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 0C503ED5E
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 16 Jan 2013 19:19:38 +0000 (UTC)
Received: (qmail 86478 invoked by uid 500); 16 Jan 2013 19:19:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86315 invoked by uid 500); 16 Jan 2013 19:19:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86303 invoked by uid 99); 16 Jan 2013 19:19:35 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Jan 2013 19:19:35 +0000
X-ASF-Spam-Status: No, hits=1.7 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lukai1984@gmail.com designates 209.85.216.176 as permitted sender)
Received: from [209.85.216.176] (HELO mail-qc0-f176.google.com) (209.85.216.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Jan 2013 19:19:27 +0000
Received: by mail-qc0-f176.google.com with SMTP id n41so1109451qco.7
        for <java-user@lucene.apache.org>; Wed, 16 Jan 2013 11:19:07 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:x-received:date:message-id:subject:from:to
         :content-type;
        bh=x2PRg7FE5A7JAAdtrZPF5GQSzqrpTUqVxFe+1KfUXdo=;
        b=SfozoY0quIlWNgJDElpUlWXBw+oI5Xy3qbC/J8gh7x1pO81d3axG73e4/ifaWYOctP
         RqonQQ546M6kSFHMWO3Swev+TXoZ11ofs3j5yXQ6PoOaXi0LnJuf/hgb4bG0M9ZeR3cq
         ThIfe31nyHDUbd56iGqbWQC6EhmJG7UXJ+7epE1DIXoOwUH2hzQOvTKZh/qtFYq9n4Y5
         OIFPG9wz+eh41frOCACFZvbPC1lYGfqDK1b6VHtlP+KMhoQe8qCxReB/lezmtncbBumM
         on/7+mAfH32sJ2Vxwuf1p9NI//JuAlHo4Y0Ksap2foE+zMv6Q+gt3Kw+EuFrD5BXAodN
         rBwg==
MIME-Version: 1.0
X-Received: by 10.224.31.209 with SMTP id z17mr2906282qac.28.1358363946903;
 Wed, 16 Jan 2013 11:19:06 -0800 (PST)
Received: by 10.49.103.135 with HTTP; Wed, 16 Jan 2013 11:19:06 -0800 (PST)
Date: Wed, 16 Jan 2013 11:19:06 -0800
Message-ID: <CAD0cWeXm0rfoc02f7TCHXLzGoU6y6gNxhYMVeSESX9LGMrA+BQ@mail.gmail.com>
Subject: Any benchmark corps to evaluate performance of specified query?
From: lukai <lukai1984@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=20cf3074afc887e9a904d36cc024
X-Virus-Checked: Checked by ClamAV on apache.org

--20cf3074afc887e9a904d36cc024
Content-Type: text/plain; charset=ISO-8859-1

 As the title, do we have any benchmark corps to test performance of a new
query implementation? like 10k docs, or 1M docs?

Thanks,

--20cf3074afc887e9a904d36cc024--

From java-user-return-54713-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jan 16 21:21:40 2013
Return-Path: <java-user-return-54713-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id E4149EBE4
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 16 Jan 2013 21:21:40 +0000 (UTC)
Received: (qmail 62928 invoked by uid 500); 16 Jan 2013 21:21:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62881 invoked by uid 500); 16 Jan 2013 21:21:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 17071 invoked by uid 99); 16 Jan 2013 21:12:12 -0000
X-ASF-Spam-Status: No, hits=2.0 required=5.0
	tests=SPF_NEUTRAL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: 216.139.236.26 is neither permitted nor denied by domain of jilaba.hindga@gmail.com)
Date: Wed, 16 Jan 2013 13:11:45 -0800 (PST)
From: "balaji.gandhi" <jilaba.hindga@gmail.com>
To: java-user@lucene.apache.org
Message-ID: <1358370705817-4033980.post@n3.nabble.com>
In-Reply-To: <AANLkTinbm05d29MGfXK7ZGW4uMzvhvjb14ki8=QXUrmr@mail.gmail.com>
References: <AANLkTimeF7QYLuS0K7ca6+tj=_2DSmhdzJQEr7iCAwyF@mail.gmail.com> <AANLkTin0JRJOoZ8wvGhBvknWftDhTZXy12E+vjUYk7qe@mail.gmail.com> <AANLkTim=rR5YMs=Wsd94z6xCLK5sKtb725TLqcbad2Mm@mail.gmail.com> <AANLkTikjOdNbynZJ7QjhyewdmNuAzoo9mzZt=eRDAEF7@mail.gmail.com> <AANLkTinaypTn0u4mmcF_Uanq=1XuUpkE1Dn-u-LmwRb9@mail.gmail.com> <AANLkTimqbHCDm=+zAXDdr0N9UpoDOhj-B-kdL21wgBPG@mail.gmail.com> <AANLkTikyqUmJNmYTeY-+gsrbyXej1fXqf7bfGRdPq=Xx@mail.gmail.com> <AANLkTinbm05d29MGfXK7ZGW4uMzvhvjb14ki8=QXUrmr@mail.gmail.com>
Subject: Re: Get fields from a Query object
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

I am trying to do something similar:-

Eg. 
Input: (name:John AND name:Doe) 
Output: ((firstName:John OR lastName:John) AND (firstName:John OR
lastName:John)) 

How can I extract the fields, change them and repackage the query?

Thanks,
Balaji



--
View this message in context: http://lucene.472066.n3.nabble.com/Get-fields-from-a-Query-object-tp1011466p4033980.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54714-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jan 16 21:22:22 2013
Return-Path: <java-user-return-54714-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 5B23AEBF1
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 16 Jan 2013 21:22:22 +0000 (UTC)
Received: (qmail 69390 invoked by uid 500); 16 Jan 2013 21:22:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69339 invoked by uid 500); 16 Jan 2013 21:22:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 91344 invoked by uid 99); 16 Jan 2013 20:46:46 -0000
X-ASF-Spam-Status: No, hits=2.0 required=5.0
	tests=SPF_NEUTRAL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: 216.139.236.26 is neither permitted nor denied by domain of jilaba.hindga@gmail.com)
Date: Wed, 16 Jan 2013 12:46:19 -0800 (PST)
From: "balaji.gandhi" <jilaba.hindga@gmail.com>
To: java-user@lucene.apache.org
Message-ID: <1358369179138-4033973.post@n3.nabble.com>
Subject: Parsing a Lucene/Solr query and adding more clauses
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Team, 

I am trying to write a util which can parse a Lucene/Solr query and convert
into an object representation to add more clauses to the query. 

Eg. 
Input: (name:John AND name:Doe) 
Output: ((firstName:John OR lastName:John) AND (firstName:John OR
lastName:John)) 

I tried org.apache.lucene.queryparser.classic.QueryParser to parse the query
and iterate over the terms. But this doesn't give me the boolean operators
and boosting. Tried to use
org.apache.lucene.queryparser.surround.parser.QueryParser and
org.apache.lucene.queryparser.surround.query.SrndQuery. I didn't see any API
to manipulate the query. 

What would be the best way to do this? 

Thanks, 
Balaji



--
View this message in context: http://lucene.472066.n3.nabble.com/Parsing-a-Lucene-Solr-query-and-adding-more-clauses-tp4033973.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54715-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jan 16 21:22:29 2013
Return-Path: <java-user-return-54715-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id C6928EBF2
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 16 Jan 2013 21:22:29 +0000 (UTC)
Received: (qmail 71469 invoked by uid 500); 16 Jan 2013 21:22:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71429 invoked by uid 500); 16 Jan 2013 21:22:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 39173 invoked by uid 99); 16 Jan 2013 21:17:45 -0000
X-ASF-Spam-Status: No, hits=2.0 required=5.0
	tests=SPF_NEUTRAL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: 216.139.236.26 is neither permitted nor denied by domain of jilaba.hindga@gmail.com)
Date: Wed, 16 Jan 2013 13:17:15 -0800 (PST)
From: "balaji.gandhi" <jilaba.hindga@gmail.com>
To: java-user@lucene.apache.org
Message-ID: <1358371035499-4033984.post@n3.nabble.com>
In-Reply-To: <1358371035500-552221.post@n3.nabble.com>
References: <1358371035500-552221.post@n3.nabble.com>
Subject: Re: Retrieving parsed query string terms
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi, 

I am trying to do something similar:- 

Eg. 
Input: (name:John AND name:Doe) 
Output: ((firstName:John OR lastName:John) AND (firstName:John OR
lastName:John)) 

How can I extract the fields, change them and repackage the query? 

Thanks, 
Balaji



--
View this message in context: http://lucene.472066.n3.nabble.com/Retrieving-parsed-query-string-terms-tp552221p4033984.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54716-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jan 16 21:25:04 2013
Return-Path: <java-user-return-54716-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id DC63AE10E
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 16 Jan 2013 21:25:04 +0000 (UTC)
Received: (qmail 79411 invoked by uid 500); 16 Jan 2013 21:25:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79367 invoked by uid 500); 16 Jan 2013 21:25:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79359 invoked by uid 99); 16 Jan 2013 21:25:02 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Jan 2013 21:25:02 +0000
X-ASF-Spam-Status: No, hits=2.0 required=5.0
	tests=SPF_NEUTRAL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: 216.139.236.26 is neither permitted nor denied by domain of jilaba.hindga@gmail.com)
Received: from [216.139.236.26] (HELO sam.nabble.com) (216.139.236.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Jan 2013 21:24:57 +0000
Received: from ben.nabble.com ([192.168.236.152])
	by sam.nabble.com with esmtp (Exim 4.72)
	(envelope-from <jilaba.hindga@gmail.com>)
	id 1TvaTN-0003YT-6O
	for java-user@lucene.apache.org; Wed, 16 Jan 2013 13:24:37 -0800
Date: Wed, 16 Jan 2013 13:24:37 -0800 (PST)
From: "balaji.gandhi" <jilaba.hindga@gmail.com>
To: java-user@lucene.apache.org
Message-ID: <1358371477193-4033986.post@n3.nabble.com>
In-Reply-To: <4709DC8E.9020209@propylon.com>
References: <470664E1.8020400@propylon.com> <Pine.LNX.4.62.0710051600170.28363@radix.cryptio.net> <4709DC8E.9020209@propylon.com>
Subject: Re: Querying the Query object
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi, 

I am trying to do something similar:- 

Eg. 
Input: (name:John AND name:Doe) 
Output: ((firstName:John OR lastName:John) AND (firstName:John OR
lastName:John)) 

How can I extract the fields, change them and repackage the query? 

Thanks, 
Balaji



--
View this message in context: http://lucene.472066.n3.nabble.com/Querying-the-Query-object-tp549970p4033986.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54717-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jan 16 21:28:13 2013
Return-Path: <java-user-return-54717-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 3A7BCE127
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 16 Jan 2013 21:28:13 +0000 (UTC)
Received: (qmail 2121 invoked by uid 500); 16 Jan 2013 21:28:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2045 invoked by uid 500); 16 Jan 2013 21:28:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1914 invoked by uid 99); 16 Jan 2013 21:28:10 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Jan 2013 21:28:10 +0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ochrist@ebscohost.com designates 140.234.255.31 as permitted sender)
Received: from [140.234.255.31] (HELO eumail1.epnet.com) (140.234.255.31)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Jan 2013 21:27:56 +0000
Received: from pdc-smtp1.epnet.com (pdc-smtp1-ext.epnet.com [140.234.252.47])
	by eumail1.epnet.com (8.13.6/8.13.6/EP8.13) with ESMTP id r0GLRZGt022012
	(version=TLSv1/SSLv3 cipher=DHE-DSS-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Wed, 16 Jan 2013 16:27:35 -0500
Received: from exchange.corp.epnet.com (exchange.corp.epnet.com [10.68.91.21])
	by pdc-smtp1.epnet.com (8.13.6/8.13.6/EP8.13) with ESMTP id r0GLRY8H004303
	for <java-user@lucene.apache.org>; Wed, 16 Jan 2013 16:27:34 -0500
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01CDF430.4CA103D9"
Subject: Suggesters: circumfix suggestions
Date: Wed, 16 Jan 2013 16:27:33 -0500
Message-ID: <BBB9F0110BBE664AA1BD301B11473BD20315142C@exchange.corp.epnet.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Suggesters: circumfix suggestions
Thread-Index: Ac30MExV2c9XNUg2S9GmMNXXdHiTHg==
From: "Oliver Christ" <ochrist@ebscohost.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01CDF430.4CA103D9
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hi,=20

=20

Has anyone tried to implement circumfix suggesters, where the suggestion
is a circumfix of the lookup string?=20

=20

E.g. "sox rumor" suggests "boston red sox rumors" (try it on
google.com).

=20

I think there are several of ways to implement this:=20

=20

*         Given some multiword term, add all word subsequences to the
suggester individually ("boston red sox rumors" adds also "red sox
rumors", "sox rumors", "rumors") - that can be achieved using a special
TermFreqIterator. This turns the lookup problem into a standard prefix
search. While this works, it effectively modifies the surface form, and
the "full term" needs to be indexed and looked up elsewhere.

*         Constructing a token graph with appropriate substring arcs
from the (hopefully linear) token sequence, using a special TokenFilter.
The benefit is that the surface form is always the same, but the
automaton may become large (at least if you are using an
AnalyzingSuggester).

*         DIY, using suffix arrays or something similar.

=20

But I'm sure there are other ways and/or tradeoffs I haven't thought
about J I'd be interested in your feedback.

=20

Cheers, Oli

=20


------_=_NextPart_001_01CDF430.4CA103D9--

From java-user-return-54718-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jan 16 22:38:46 2013
Return-Path: <java-user-return-54718-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id ED498E810
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 16 Jan 2013 22:38:45 +0000 (UTC)
Received: (qmail 69578 invoked by uid 500); 16 Jan 2013 22:38:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69520 invoked by uid 500); 16 Jan 2013 22:38:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69511 invoked by uid 99); 16 Jan 2013 22:38:43 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Jan 2013 22:38:43 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.220.54] (HELO mail-pa0-f54.google.com) (209.85.220.54)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Jan 2013 22:38:37 +0000
Received: by mail-pa0-f54.google.com with SMTP id bi5so1058434pad.41
        for <java-user@lucene.apache.org>; Wed, 16 Jan 2013 14:38:16 -0800 (PST)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=x-received:mime-version:in-reply-to:references:from:date:message-id
         :subject:to:content-type:x-gm-message-state;
        bh=uT8X9oD0tRjxRe6jj1a3SePkhWs5ZuW4WD6BImKjPYk=;
        b=PsawpS0gmODDD9HctMihig8BTJTBg+c20o/e8PhcXPHIxxsTnDN6yvqCIN3KwVUEd9
         EYZ0GqUbITvWfBMwYa2/SgEFJmPaPz2ZfkG6GypWHGKaBeaCydt7YQRwULLOWmpGig80
         XplKChYJK9OG27TrR+Qb0N/Q+L4xnGx8+sX43BLOEDBooqGfLXHf09cV8I/mp47VkXt9
         ACCUP2x7wDezK9ZGbsOK7YqyzSRO4WgFsIu1ijlPLwFgykI540T93QkJfl0cSjKEctDh
         pLHRq7GOa6WwTD/iszfFp8uSh+OMGzjj2IQBc+dzRJpzCzjTVeppTTXB0rTfBkiZCYXH
         R0TA==
X-Received: by 10.66.74.197 with SMTP id w5mr7605865pav.60.1358375896000; Wed,
 16 Jan 2013 14:38:16 -0800 (PST)
MIME-Version: 1.0
Received: by 10.68.154.73 with HTTP; Wed, 16 Jan 2013 14:37:55 -0800 (PST)
In-Reply-To: <BBB9F0110BBE664AA1BD301B11473BD20315142C@exchange.corp.epnet.com>
References: <BBB9F0110BBE664AA1BD301B11473BD20315142C@exchange.corp.epnet.com>
From: Michael McCandless <lucene@mikemccandless.com>
Date: Wed, 16 Jan 2013 17:37:55 -0500
Message-ID: <CAL8PwkYWe2=aN8jTuAzJjJ2MM8VVF4yg1=yva6gUaOP03LD9aQ@mail.gmail.com>
Subject: Re: Suggesters: circumfix suggestions
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Gm-Message-State: ALoCoQnAms+V7nD1u4osi0j1S7Fs3ZHIOkJXfguj9Mgz5VXE3xF9hQne3kO+9CLCE7eP/ne9zeBj
X-Virus-Checked: Checked by ClamAV on apache.org

Netflix also does this, eg type transla (you need an account).

I think it'd be good to somehow support this (Lucene's suggesters don't today).

The first two approaches should conceptually work, but both will bloat
the FST (I'd be curious to know how much!).

Maybe another approach would be ... to index only single tokens into
the suggester?  And then, from the user's query, run the suggester on
each token separately, and then do a second search (against a "normal"
Lucene index) to find all documents containing those tokens?

Eg, you'd index only "boston", "red", "sox", "rumor" into the FST, and
then have a separate search index with "boston red sox rumor" indexed
as a document.  If the user types "red so", then you run suggest on
"red" and on "so", and then run a hmm MultiPhraseQuery for
(red|redmond|reddit) (so|sox|sophomore|...) against the index?  How to
score/sort the resulting hits will be interesting ... if you have
strong priors / boost (e.g. you have a good source of "popularity" or
something) then you could sort by that ...

Mike McCandless

http://blog.mikemccandless.com

On Wed, Jan 16, 2013 at 4:27 PM, Oliver Christ <ochrist@ebscohost.com> wrote:
> Hi,
>
>
>
> Has anyone tried to implement circumfix suggesters, where the suggestion
> is a circumfix of the lookup string?
>
>
>
> E.g. "sox rumor" suggests "boston red sox rumors" (try it on
> google.com).
>
>
>
> I think there are several of ways to implement this:
>
>
>
> *         Given some multiword term, add all word subsequences to the
> suggester individually ("boston red sox rumors" adds also "red sox
> rumors", "sox rumors", "rumors") - that can be achieved using a special
> TermFreqIterator. This turns the lookup problem into a standard prefix
> search. While this works, it effectively modifies the surface form, and
> the "full term" needs to be indexed and looked up elsewhere.
>
> *         Constructing a token graph with appropriate substring arcs
> from the (hopefully linear) token sequence, using a special TokenFilter.
> The benefit is that the surface form is always the same, but the
> automaton may become large (at least if you are using an
> AnalyzingSuggester).
>
> *         DIY, using suffix arrays or something similar.
>
>
>
> But I'm sure there are other ways and/or tradeoffs I haven't thought
> about J I'd be interested in your feedback.
>
>
>
> Cheers, Oli
>
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54719-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jan 16 22:57:18 2013
Return-Path: <java-user-return-54719-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 68448E8CF
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 16 Jan 2013 22:57:18 +0000 (UTC)
Received: (qmail 33625 invoked by uid 500); 16 Jan 2013 22:57:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33582 invoked by uid 500); 16 Jan 2013 22:57:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33552 invoked by uid 99); 16 Jan 2013 22:57:15 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Jan 2013 22:57:15 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of dawid.weiss@gmail.com designates 209.85.214.182 as permitted sender)
Received: from [209.85.214.182] (HELO mail-ob0-f182.google.com) (209.85.214.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Jan 2013 22:57:08 +0000
Received: by mail-ob0-f182.google.com with SMTP id 16so1959401obc.13
        for <java-user@lucene.apache.org>; Wed, 16 Jan 2013 14:56:48 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=x-received:mime-version:in-reply-to:references:from:date:message-id
         :subject:to:content-type;
        bh=iFo8gRE9DQR+an7GDwIdoNJk5Pe+d6rknP1Xnhq/gVQ=;
        b=H17752R29ShV9X2tFcJHTcKdnS1xx0pYNEQRKBuEPtJO1kVVQqOQqQJV6OhFfAb/eg
         iLMrxDwOBBzESDhHnREoA8z9S6dsBgddWxayGzkwT2dsTvsQFT/E+3m2G1lZ3hGtPZ+3
         qS9P/9RVkbIyMPt9Gc8pEEwabzVINOHs9rhT2TywnaGopyxgkjsgmwCXWmMBUzjfwwfQ
         F2HlUDMy6Q30WW0TFEF3r9WUFiulChRUOA4e++D7Ggo1MZKsNRBrqKLAo2g/3N1fwuBM
         c6HZzp1uixeUByUMpVpXcUe0kTxedlAz8jZXjvmN2WL3xMDgwhmEdlJS5ZpYvAIe4FeE
         n4+A==
X-Received: by 10.60.31.6 with SMTP id w6mr2298557oeh.65.1358377008005; Wed,
 16 Jan 2013 14:56:48 -0800 (PST)
MIME-Version: 1.0
Received: by 10.182.110.100 with HTTP; Wed, 16 Jan 2013 14:56:27 -0800 (PST)
In-Reply-To: <CAL8PwkYWe2=aN8jTuAzJjJ2MM8VVF4yg1=yva6gUaOP03LD9aQ@mail.gmail.com>
References: <BBB9F0110BBE664AA1BD301B11473BD20315142C@exchange.corp.epnet.com> <CAL8PwkYWe2=aN8jTuAzJjJ2MM8VVF4yg1=yva6gUaOP03LD9aQ@mail.gmail.com>
From: Dawid Weiss <dawid.weiss@gmail.com>
Date: Wed, 16 Jan 2013 23:56:27 +0100
Message-ID: <CAM21Rt_vF4NXQeHS4L40RYOmAq33zm93Aw6iGXgyFqLn9uGt_w@mail.gmail.com>
Subject: Re: Suggesters: circumfix suggestions
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
X-Virus-Checked: Checked by ClamAV on apache.org

> Eg, you'd index only "boston", "red", "sox", "rumor" into the FST, and
> then have a separate search index with "boston red sox rumor" indexed
> as a document.  If the user types "red so", then you run suggest on
> "red" and on "so", and then run a hmm MultiPhraseQuery for
> (red|redmond|reddit) (so|sox|sophomore|...) against the index?  How to

I know of at least one company (ehm, can't tell by name) that does
this for matching physical locations against user queries (n yo => new
york, etc.). Granted, this is a very closed domain and the boosts can
be pretty well approximated (cities by the number of citizens, streets
by the location they're at etc.).

Good idea to try out though. Another possible alternative would be to
run a frequent phrase extraction algorithm of some sort, then collect
only the best candidate phrases. I bet a lot of these these could be
fit into an FST, perhaps even indexed at every starting token's
position so that infix searches could work. If you need absolutely all
suggestions you'll need to come up with something more clever.

Dawid

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54720-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jan 17 00:00:56 2013
Return-Path: <java-user-return-54720-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 73488E7DF
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 17 Jan 2013 00:00:56 +0000 (UTC)
Received: (qmail 51167 invoked by uid 500); 17 Jan 2013 00:00:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51090 invoked by uid 500); 17 Jan 2013 00:00:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51078 invoked by uid 99); 17 Jan 2013 00:00:54 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Jan 2013 00:00:54 +0000
X-ASF-Spam-Status: No, hits=2.8 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of adrianocrestani@gmail.com designates 209.85.212.180 as permitted sender)
Received: from [209.85.212.180] (HELO mail-wi0-f180.google.com) (209.85.212.180)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Jan 2013 00:00:47 +0000
Received: by mail-wi0-f180.google.com with SMTP id hj13so1806467wib.13
        for <java-user@lucene.apache.org>; Wed, 16 Jan 2013 16:00:26 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=x-received:mime-version:in-reply-to:references:from:date:message-id
         :subject:to:content-type;
        bh=EM7LTbPP0rHmTDBarTN+pZLXKokZY1ZXmrUrrYb/PYU=;
        b=Ap4Px576R3HowdDIddJkj6Yzzijj/ID3yux5d0yh5RHt0BELcC6ffWT2XLiJMH2Tfr
         W2gwKuw5tm74ot5SPcc5QK8CHTXWhcHbEBRyfOp62YzsidtjtVk8Q+SXNcunfHkSU/Yn
         R+Vuw7SbM8/L0LrYXqzLpIQevwYyEzjMXYjjtuuhQDwugFzkaaFJTug5+f6hLHeWkl1L
         gNKeIBHoU/1l77L+xWXW8kLcKLtjKHHXpQ73V6mglKdKkLBkCbJTs/KG4Nh8mDN564R2
         MXNnIaDqhB0KCPuM2TU+XTiCYTkib07w+RYgsSy3JaPUaAosEv/rJuatDHwUPhiFtOe0
         Gnqw==
X-Received: by 10.194.21.70 with SMTP id t6mr5158454wje.42.1358380826809; Wed,
 16 Jan 2013 16:00:26 -0800 (PST)
MIME-Version: 1.0
Received: by 10.194.17.193 with HTTP; Wed, 16 Jan 2013 16:00:04 -0800 (PST)
In-Reply-To: <1358369179138-4033973.post@n3.nabble.com>
References: <1358369179138-4033973.post@n3.nabble.com>
From: Adriano Crestani <adrianocrestani@gmail.com>
Date: Wed, 16 Jan 2013 19:00:04 -0500
Message-ID: <CAN3gF-Cb3_p907+H4rrH1dSS0SLDofev2t=MVq5D8e9XnM2uQA@mail.gmail.com>
Subject: Re: Parsing a Lucene/Solr query and adding more clauses
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=047d7b5d3ef6a6d5f904d370aefc
X-Virus-Checked: Checked by ClamAV on apache.org

--047d7b5d3ef6a6d5f904d370aefc
Content-Type: text/plain; charset=ISO-8859-1

The Flexible query parser is what you are looking for:
http://lucene.apache.org/core/4_0_0/queryparser/index.html


On Wed, Jan 16, 2013 at 3:46 PM, balaji.gandhi <jilaba.hindga@gmail.com>wrote:

> Hi Team,
>
> I am trying to write a util which can parse a Lucene/Solr query and convert
> into an object representation to add more clauses to the query.
>
> Eg.
> Input: (name:John AND name:Doe)
> Output: ((firstName:John OR lastName:John) AND (firstName:John OR
> lastName:John))
>
> I tried org.apache.lucene.queryparser.classic.QueryParser to parse the
> query
> and iterate over the terms. But this doesn't give me the boolean operators
> and boosting. Tried to use
> org.apache.lucene.queryparser.surround.parser.QueryParser and
> org.apache.lucene.queryparser.surround.query.SrndQuery. I didn't see any
> API
> to manipulate the query.
>
> What would be the best way to do this?
>
> Thanks,
> Balaji
>
>
>
> --
> View this message in context:
> http://lucene.472066.n3.nabble.com/Parsing-a-Lucene-Solr-query-and-adding-more-clauses-tp4033973.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--047d7b5d3ef6a6d5f904d370aefc--

From java-user-return-54721-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jan 17 00:33:26 2013
Return-Path: <java-user-return-54721-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id B3272DA5C
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 17 Jan 2013 00:33:26 +0000 (UTC)
Received: (qmail 44703 invoked by uid 500); 17 Jan 2013 00:33:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44656 invoked by uid 500); 17 Jan 2013 00:33:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44647 invoked by uid 99); 17 Jan 2013 00:33:24 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Jan 2013 00:33:24 +0000
X-ASF-Spam-Status: No, hits=2.0 required=5.0
	tests=SPF_NEUTRAL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: 216.139.236.26 is neither permitted nor denied by domain of jilaba.hindga@gmail.com)
Received: from [216.139.236.26] (HELO sam.nabble.com) (216.139.236.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Jan 2013 00:33:18 +0000
Received: from ben.nabble.com ([192.168.236.152])
	by sam.nabble.com with esmtp (Exim 4.72)
	(envelope-from <jilaba.hindga@gmail.com>)
	id 1TvdPd-0005Ez-8N
	for java-user@lucene.apache.org; Wed, 16 Jan 2013 16:32:57 -0800
Date: Wed, 16 Jan 2013 16:32:57 -0800 (PST)
From: "balaji.gandhi" <jilaba.hindga@gmail.com>
To: java-user@lucene.apache.org
Message-ID: <1358382777250-4034031.post@n3.nabble.com>
In-Reply-To: <CAN3gF-Cb3_p907+H4rrH1dSS0SLDofev2t=MVq5D8e9XnM2uQA@mail.gmail.com>
References: <1358369179138-4033973.post@n3.nabble.com> <CAN3gF-Cb3_p907+H4rrH1dSS0SLDofev2t=MVq5D8e9XnM2uQA@mail.gmail.com>
Subject: Re: Parsing a Lucene/Solr query and adding more clauses
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

This is awesome. Thanks. I will look into the API and figure out how to
manipulate the query nodes.



--
View this message in context: http://lucene.472066.n3.nabble.com/Parsing-a-Lucene-Solr-query-and-adding-more-clauses-tp4033973p4034031.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54722-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jan 17 04:23:47 2013
Return-Path: <java-user-return-54722-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 65310E666
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 17 Jan 2013 04:23:47 +0000 (UTC)
Received: (qmail 22737 invoked by uid 500); 17 Jan 2013 04:23:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22639 invoked by uid 500); 17 Jan 2013 04:23:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22607 invoked by uid 99); 17 Jan 2013 04:23:41 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Jan 2013 04:23:41 +0000
X-ASF-Spam-Status: No, hits=2.7 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_NONE,REPTO_QUOTE_YAHOO,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [72.30.239.13] (HELO nm31-vm5.bullet.mail.bf1.yahoo.com) (72.30.239.13)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Jan 2013 04:23:30 +0000
Received: from [98.139.212.148] by nm31.bullet.mail.bf1.yahoo.com with NNFMP; 17 Jan 2013 04:23:09 -0000
Received: from [98.139.212.233] by tm5.bullet.mail.bf1.yahoo.com with NNFMP; 17 Jan 2013 04:23:09 -0000
Received: from [127.0.0.1] by omp1042.mail.bf1.yahoo.com with NNFMP; 17 Jan 2013 04:23:09 -0000
X-Yahoo-Newman-Property: ymail-3
X-Yahoo-Newman-Id: 222723.46830.bm@omp1042.mail.bf1.yahoo.com
Received: (qmail 29487 invoked by uid 60001); 17 Jan 2013 04:23:08 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1358396588; bh=TvBjUw1ESkmnM+1WSQ/7MxCjuv6MLPA3LKs8IW9lnEo=; h=X-YMail-OSG:Received:X-Rocket-MIMEInfo:X-Mailer:Message-ID:Date:From:Reply-To:Subject:To:MIME-Version:Content-Type; b=mTWoJExqJev3jOlPoQV94BBKz2lZvztY17zqjeKazWI7btiaaFOB8sw4JKmm/cCXy5EhTVmumftMznDNULikn1T17bwZ5l4wRCGetONID2N0XIDxOqFs38ddLfO8Ts6lTeZPvm8WBlo35e47z2PSGr5r33iGjvyuTHiKVGlKHZw=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Rocket-MIMEInfo:X-Mailer:Message-ID:Date:From:Reply-To:Subject:To:MIME-Version:Content-Type;
  b=zxyzz8Kw+iuT8f0DIEkxNITKEVZD83tsJfp4j+e5FGdupZ+CBoTfy6Bu4qiXccn8o1s7r/jdeIhotJ4b4WulS0Qzs2b2J1ipx5314Ub9DG9kHGk+MooaIjhInT0ILtD+zTYuHUgtB65zhp+/Uvmv7aUpS7HvJU2Vi0FRbhtZVjo=;
X-YMail-OSG: AgYxjMgVM1laq_PE9ThwJT_vrxrLCJQz5PmmLnNdEiYn_If
 g8AhpnEkZeTEQGVRi79oSuCbKaFrx4tDHLCFdPJvD0og6ZZNHxGlGRKpgoYu
 nFEsjIcA5YMFfleC6mkYNrrZHULeYxvOfkIcWWRISFvVZa4ThROPdE2NxBq0
 ong0i.CmB8uuKmNkMf0sjq3KQDZcZxlXc_d7GiZwazWHMe4ihElZ0B.XG3.n
 CB0e75Fdu7M0HtGoMp80UTmOfxjm0srRvE8GLLZ5rLSBiuXCeqSmWiyItg.B
 fBeAKKGScINt5kWRt_oeyZFbvusDOjD3bANhVH_n2VeKxHKIV6mC3uFyDgnD
 eFXiCbULF_spZAlOpM6apQhzUxEDQTpCwF9QHAjzyMdEGm.uwYkutmFb4g50
 xBVfH_lbfQq0dMvXN2HHO8skbYJL1_a8lF5bCWO7vwSGdDrBjq5tFYMy.qH2
 H5kD1wY9AaHhXsoi48chN0lul2CqSBFEF.vQo5IdW2GjVn7z8fWi6HIg0rbO
 c0zEZ9tcY
Received: from [114.246.176.54] by web39303.mail.mud.yahoo.com via HTTP; Wed, 16 Jan 2013 20:23:08 PST
X-Rocket-MIMEInfo: 001.001,SGksCgpJIGNhbiB3cml0ZSBhIENoYXJGaWx0ZXIsIHNpbWlsYXIgYXMgdGhlIG9yZy5hcGFjaGUuc29sci5hbmFseXNpcy5QYXR0ZXJuUmVwbGFjZUNoYXJGaWx0ZXIsIGluIHdoaWNoIEkgY2FuIGFjY2VzcyB0aGUgZnVsbCBjb250ZW50IG9mIENoYXJTdHJlYW0uIFRoaXMgaXMgaW1wb3J0YW50IHNpbmNlIEkgbWlnaHQgd2FudCB0byBkbyBwYXR0ZXJuIG1hdGNoIG9uIHRoZSBjb250ZW50LCB0aGVuIGJhc2VkIG9uIHRoZSBtYXRjaCwgSSBtaWdodCBtb2RpZnkgdGhlIHBhcnQgb2YgdGhlIGZ1bGwgY29udGUBMAEBAQE-
X-Mailer: YahooMailWebService/0.8.130.494
Message-ID: <1358396588.26373.YahooMailNeo@web39303.mail.mud.yahoo.com>
Date: Wed, 16 Jan 2013 20:23:08 -0800 (PST)
From: "Xu, Ningfeng" <nfxu@yahoo.com>
Reply-To: "Xu, Ningfeng" <nxu@micropole.com>
Subject: Access the whole TokenStream not just one by one in a TokenFilter-like processor
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="-965286322-162169532-1358396588=:26373"
X-Virus-Checked: Checked by ClamAV on apache.org

---965286322-162169532-1358396588=:26373
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable

Hi,=0A=0AI can write a CharFilter, similar as the org.apache.solr.analysis.=
PatternReplaceCharFilter, in which I can access the full content of CharStr=
eam. This is important since I might want to do pattern match on the conten=
t, then based on the match, I might modify the part of the full content bef=
ore tokenization.=0A=0ASimilarly,=A0how to write a TokenFilter-like process=
or which can access the TokenStream in a whole instead of one by one as in =
TokenFilter.incrementToken()? This might be necessary since I might also wa=
nt to do pattern matching on the TokenStream.=0A=0AHere TokenFilter-like me=
ans, I intend to put this processor in schema.xml at the same place as of a=
 TokenFilter.=0A=0A=0AAny ideas? Many thanks.=0A
---965286322-162169532-1358396588=:26373--

From java-user-return-54723-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jan 17 05:52:42 2013
Return-Path: <java-user-return-54723-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id DD794E166
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 17 Jan 2013 05:52:41 +0000 (UTC)
Received: (qmail 31234 invoked by uid 500); 17 Jan 2013 05:52:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31059 invoked by uid 500); 17 Jan 2013 05:52:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31023 invoked by uid 99); 17 Jan 2013 05:52:37 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Jan 2013 05:52:37 +0000
X-ASF-Spam-Status: No, hits=0.3 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_SOFTFAIL
X-Spam-Check-By: apache.org
Received-SPF: softfail (nike.apache.org: transitioning domain of jon@lightboxtechnologies.com does not designate 209.85.215.47 as permitted sender)
Received: from [209.85.215.47] (HELO mail-la0-f47.google.com) (209.85.215.47)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Jan 2013 05:52:30 +0000
Received: by mail-la0-f47.google.com with SMTP id fh20so2181346lab.6
        for <java-user@lucene.apache.org>; Wed, 16 Jan 2013 21:52:09 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=lightboxtechnologies.com; s=google;
        h=mime-version:x-received:x-originating-ip:date:message-id:subject
         :from:to:content-type;
        bh=3twTB+y8gi6KSyOSnLT4Cmx6Q8PnXJV9AeCsHGtyc5Y=;
        b=blb4KIs2PIROsC3hBS4JjyjN0e1rocd/i8UnWKrg/BltouBiP3EDFcMaiQOP7hIlIP
         bq/YIujHqpMcTILgLf0+gDfd/RvssTxf/rMyQk5nCmG33wsjp2G0s2v1W7eZR8zAeygp
         quwythoAwPOmRfUWXl5pEsa6MGpiBcTAz850g=
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=mime-version:x-received:x-originating-ip:date:message-id:subject
         :from:to:content-type:x-gm-message-state;
        bh=3twTB+y8gi6KSyOSnLT4Cmx6Q8PnXJV9AeCsHGtyc5Y=;
        b=KTHjbnAqy9TJ/IcvBYJ3856QnwmjmMZrsbgeuYZWJL3AA/0wmnol/484Y9fMfvcsYK
         457B39sCOq5D9JaSATBH84/3umaJ8at/YWICrdY1t71zHUCFpX/RYtPyxqaZ9bbfWiwF
         PH8/cpUt/tNPzrkWYLoSVsa/gcRsdO6P/FD6gOnjKuRv+963qgBErtpMB4qz0G60Jggd
         U24Qu0VYre7cRUKt9B/Qd6A+q6e4g2iXSh4bpOz9C+9o3BVvVhU8uaW+6kFvFWcbOzKF
         DsoZhURFjX0QlkHYtG5gdnDOzP3LfaX3WOGQPpwEtMU0lbiqeTYreOlNr+DBWX33A0DP
         L8yQ==
MIME-Version: 1.0
X-Received: by 10.112.103.135 with SMTP id fw7mr1682495lbb.17.1358401929615;
 Wed, 16 Jan 2013 21:52:09 -0800 (PST)
Received: by 10.114.14.97 with HTTP; Wed, 16 Jan 2013 21:52:09 -0800 (PST)
X-Originating-IP: [68.33.9.116]
Date: Thu, 17 Jan 2013 00:52:09 -0500
Message-ID: <CAOEyTYS_61qBM8hP_fv0OQC4xACMYYOMbf4NLJkq2SiEKYNBug@mail.gmail.com>
Subject: Document term vectors in Lucene 4
From: Jon Stewart <jon@lightboxtechnologies.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
X-Gm-Message-State: ALoCoQkD0pfiUEmhA/LZHf9XkF9puGhN+HwDeJaKNe4kMS6yXAD6ChKUMjNowx/uJjfQqSQ7v8Yu
X-Virus-Checked: Checked by ClamAV on apache.org

Hello,

I cannot extract document term vectors from an index, and have not
turned up much in some determined googling. In short, when I call
IndexReader.getTermVector(docID, field) or
IndexReader.getTermVectors(docID) and then navigate down to the Terms
for the specified field, I get a null result.

// Indexing:
  String bodyText = "this is foobar";
  final FieldType BodyOptions = new FieldType();
  BodyOptions.setIndexed(true);
  BodyOptions.setIndexOptions(IndexOptions.DOCS_AND_FREQS_AND_POSITIONS_AND_OFFSETS);
  BodyOptions.setStored(true);
  BodyOptions.setStoreTermVectors(true);
  BodyOptions.setTokenized(true);
  Document doc = new Document();
  doc.add(new Field("body", bodyText, BodyOptions));

When I examine docs in Luke, I can see the term vectors.

// Retrieving (at a later time)
  DirectoryReader dirRdr = DirectoryReader.open(FSDirectory.open(new
File(path)));
  SlowCompositeReaderWrapper rdr = new SlowCompositeReaderWrapper(dirRdr);
  for (int i = 0; i < rdr.maxDoc(); ++i) {
    int numTerms = 0;
    Terms terms = rdr.getTermVector(i, "body");
    if (terms != null) {
      TermsEnum term = terms.iterator(null);
      while (term.next() != null) {
        ++numTerms;
      }
      System.out.println("doc " + i + " had " + numTerms + " terms");
    }
    else {
      System.err.println("null term vector on doc " + i);
    }
  }

On every doc, the Terms object I get back from getTermVector(i, "body") is null.


Jon
--
Jon Stewart, Principal
(646) 719-0317 | jon@lightboxtechnologies.com | Arlington, VA

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54724-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jan 17 10:07:26 2013
Return-Path: <java-user-return-54724-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id C6AA8EA24
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 17 Jan 2013 10:07:26 +0000 (UTC)
Received: (qmail 3345 invoked by uid 500); 17 Jan 2013 10:07:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3251 invoked by uid 500); 17 Jan 2013 10:07:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3219 invoked by uid 99); 17 Jan 2013 10:07:23 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Jan 2013 10:07:23 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ian.lea@gmail.com designates 74.125.82.48 as permitted sender)
Received: from [74.125.82.48] (HELO mail-wg0-f48.google.com) (74.125.82.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Jan 2013 10:07:16 +0000
Received: by mail-wg0-f48.google.com with SMTP id 16so607002wgi.15
        for <java-user@lucene.apache.org>; Thu, 17 Jan 2013 02:06:56 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=x-received:mime-version:in-reply-to:references:from:date:message-id
         :subject:to:content-type;
        bh=fNuq8QbvhL7X3J2FG9UNDM7czIBOAsWh+qlJWXsTt+Q=;
        b=mcpGXcBocVIjekdsioV+bsBIXXNk6i1uLjiZa/JwWf4jw8XpDDzH0C/obRrHqNQKAw
         s94IBRD249MUuvu6WtaLedX0AKqzpvSPRCIr8fKIiNu1+FCJCELtHMJfg+XioM6lCiXx
         S3wZwKNlAwoDUK9ghq7cy3l68Zp4wq7k0PLBKM1sjvVnR4A1fYp/Q5wsVaNCf6hp4kc1
         Elk0vCwqxOcmVTQrHTT/LlelBdyGm2u//N81T+WjlYYWyl3NT4pyPIYVzRCkLCu5+zv1
         b9Q29N9DQynANVLaahi52zSSky/XHGEuBep0Xnl6QYRcDnQhiXRFGT12U1yw822rtXIM
         mGJg==
X-Received: by 10.194.236.68 with SMTP id us4mr7340679wjc.11.1358417216730;
 Thu, 17 Jan 2013 02:06:56 -0800 (PST)
MIME-Version: 1.0
Received: by 10.194.57.11 with HTTP; Thu, 17 Jan 2013 02:06:36 -0800 (PST)
In-Reply-To: <CAOEyTYS_61qBM8hP_fv0OQC4xACMYYOMbf4NLJkq2SiEKYNBug@mail.gmail.com>
References: <CAOEyTYS_61qBM8hP_fv0OQC4xACMYYOMbf4NLJkq2SiEKYNBug@mail.gmail.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Thu, 17 Jan 2013 10:06:36 +0000
Message-ID: <CAEY5pxXsj8kXPTBoGpYP_vWPHOTSwYm18aRiYQTky_zK1CFFww@mail.gmail.com>
Subject: Re: Document term vectors in Lucene 4
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

When I run your code, as is except for using RAMDirectory and setting
up an IndexWriter using StandardAnalyzer

	RAMDirectory dir = new RAMDirectory();
	Analyzer anl = new StandardAnalyzer(Version.LUCENE_40);
	IndexWriterConfig iwcfg = new IndexWriterConfig(Version.LUCENE_40, anl);
	IndexWriter iw = new IndexWriter(dir, iwcfg);
        ...
        iw.addDocument(doc);
	iw.close();

it prints

doc 0 had 1 terms.

If change text to .e.g. "this is foobar gibberish" it says there are 2
terms.  So it looks OK to me. "this" and "is" are presumably in the
default list of stop words.

Not relevant, but why are you using SlowCompositeReaderWrapper rather than just
IndexReader rdr = DirectoryReader.open(dir)?  I get the same results either way,


--
Ian.


On Thu, Jan 17, 2013 at 5:52 AM, Jon Stewart
<jon@lightboxtechnologies.com> wrote:
> Hello,
>
> I cannot extract document term vectors from an index, and have not
> turned up much in some determined googling. In short, when I call
> IndexReader.getTermVector(docID, field) or
> IndexReader.getTermVectors(docID) and then navigate down to the Terms
> for the specified field, I get a null result.
>
> // Indexing:
>   String bodyText = "this is foobar";
>   final FieldType BodyOptions = new FieldType();
>   BodyOptions.setIndexed(true);
>   BodyOptions.setIndexOptions(IndexOptions.DOCS_AND_FREQS_AND_POSITIONS_AND_OFFSETS);
>   BodyOptions.setStored(true);
>   BodyOptions.setStoreTermVectors(true);
>   BodyOptions.setTokenized(true);
>   Document doc = new Document();
>   doc.add(new Field("body", bodyText, BodyOptions));
>
> When I examine docs in Luke, I can see the term vectors.
>
> // Retrieving (at a later time)
>   DirectoryReader dirRdr = DirectoryReader.open(FSDirectory.open(new
> File(path)));
>   SlowCompositeReaderWrapper rdr = new SlowCompositeReaderWrapper(dirRdr);
>   for (int i = 0; i < rdr.maxDoc(); ++i) {
>     int numTerms = 0;
>     Terms terms = rdr.getTermVector(i, "body");
>     if (terms != null) {
>       TermsEnum term = terms.iterator(null);
>       while (term.next() != null) {
>         ++numTerms;
>       }
>       System.out.println("doc " + i + " had " + numTerms + " terms");
>     }
>     else {
>       System.err.println("null term vector on doc " + i);
>     }
>   }
>
> On every doc, the Terms object I get back from getTermVector(i, "body") is null.
>
>
> Jon
> --
> Jon Stewart, Principal
> (646) 719-0317 | jon@lightboxtechnologies.com | Arlington, VA
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54725-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jan 17 11:34:44 2013
Return-Path: <java-user-return-54725-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 5A51DE5A6
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 17 Jan 2013 11:34:44 +0000 (UTC)
Received: (qmail 77796 invoked by uid 500); 17 Jan 2013 11:34:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77106 invoked by uid 500); 17 Jan 2013 11:34:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 47103 invoked by uid 99); 17 Jan 2013 11:23:07 -0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of umasankarcv@gmail.com designates 209.85.219.49 as permitted sender)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:x-received:date:message-id:subject:from:to
         :content-type;
        bh=9+RNw8nmT+PlIxKDw4cTuOzWHdp3xVjy0+3nRXf1wM8=;
        b=ieGYt5GxhJ4PWMeeU4Tesj00rNK5ZCbACqyQaJ+i3A0ap0vhA3y4kZJLLi4SAwmKlz
         a4GtjX6yLCNda6skMrlHXmWUkJOsZ1CWULRKFmDLTIoCiTKpUuXajfofemsu2ntG7fil
         eYPpRP75HFmEvo7EzHbnFeVY9BlmpRbW9ROyBY8wWPXUJDu2LxSqHNyIlsRkMECALaM3
         xFE5G//VTOEdqxDDp3RzeBLOhnClL+nT+bVUsgpMRRMJjkle6QLmteEJ/88P4noDjVvl
         JvkiJrJcM3pyTAU+VKhg0EucMCMfcpegJgirqfHngpfPjl8/v0zpYR7ESqB/YD8U/zij
         SoDg==
MIME-Version: 1.0
X-Received: by 10.60.169.133 with SMTP id ae5mr3513620oec.74.1358421760726;
 Thu, 17 Jan 2013 03:22:40 -0800 (PST)
Date: Thu, 17 Jan 2013 16:52:40 +0530
Message-ID: <CAJ7xxeOnU-t-SxRw1mK54hcg5FFDSGb+bssDQkkPJpAbdXnS0A@mail.gmail.com>
Subject: How to control the lucence index storage size?
From: uma sankar <umasankarcv@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=bcaec550b54480d6b904d37a3687
X-Virus-Checked: Checked by ClamAV on apache.org

--bcaec550b54480d6b904d37a3687
Content-Type: text/plain; charset=ISO-8859-1

Hi ,



I need your help or suggestions regarding  Lucence index storage. In our
project we are using Lucence 3.0.3  for indexing , its working amazing. We
are storing the index in the physical file system in the  centos . Now I
would like to know how we can set the upper boundaries for the storage, for
instance the index should occupy more than 1GB. How we can set this
property.. I have done enough google, but no answer available for this, Any
help is really appreciated.



Thanks and Regards,

Uma Sankar. Y

--bcaec550b54480d6b904d37a3687--

From java-user-return-54726-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jan 17 12:06:05 2013
Return-Path: <java-user-return-54726-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 30AFBE667
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 17 Jan 2013 12:06:05 +0000 (UTC)
Received: (qmail 55060 invoked by uid 500); 17 Jan 2013 12:06:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54296 invoked by uid 500); 17 Jan 2013 12:05:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54269 invoked by uid 99); 17 Jan 2013 12:05:58 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Jan 2013 12:05:58 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 74.125.82.54 as permitted sender)
Received: from [74.125.82.54] (HELO mail-wg0-f54.google.com) (74.125.82.54)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Jan 2013 12:05:52 +0000
Received: by mail-wg0-f54.google.com with SMTP id fg15so1623972wgb.9
        for <java-user@lucene.apache.org>; Thu, 17 Jan 2013 04:05:31 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=x-received:mime-version:in-reply-to:references:from:date:message-id
         :subject:to:content-type;
        bh=W8G2VMaJxbr1x3LHX3S19ZC1Ly/l+s9od10tsQ0K51U=;
        b=tSlPewJ353zF0sThHtZSg89oOV9F3T5xKuYMJC04t1uvu1TXdi4z5PMYeaguNq5AON
         IbUk52QIgrlgBJoYG3Lifxq4batF22lIBcLHtomTWyF5wb67i2PMNZ8eNNPLvW1i5pSu
         2ngb2bIF+BRv7ARIMoucnnRl8XMiU1dAmib7PjVU3IBIbf09knasgAMxrKnDvVO2oEr0
         n54PDUXFqLNIFhwTURnIsYlhdVbMWCYSsoxqUgVzLavv6NNzGD7S2PcJhkfzf77zd2ER
         cuUCGi9MTT5J6V/REAan/BDmkS94LnxD312SpmbQkocLIpQ8Yu+K7HrUVQj0lxYk4sqx
         VySg==
X-Received: by 10.180.99.72 with SMTP id eo8mr15607430wib.34.1358424330935;
 Thu, 17 Jan 2013 04:05:30 -0800 (PST)
MIME-Version: 1.0
Received: by 10.194.57.11 with HTTP; Thu, 17 Jan 2013 04:05:10 -0800 (PST)
In-Reply-To: <CAJ7xxeOnU-t-SxRw1mK54hcg5FFDSGb+bssDQkkPJpAbdXnS0A@mail.gmail.com>
References: <CAJ7xxeOnU-t-SxRw1mK54hcg5FFDSGb+bssDQkkPJpAbdXnS0A@mail.gmail.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Thu, 17 Jan 2013 12:05:10 +0000
Message-ID: <CAEY5pxVSqrGHHRFdwxhAwBCVrFPrqeCvbOukUu7jnnqq-ew9BQ@mail.gmail.com>
Subject: Re: How to control the lucence index storage size?
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

There's no way to set such a limit within lucene that I know of.  If
you really need this you could implement something outside lucene to
monitor the index directory and do something (what???) when the limit
was exceeded.

Don't forget that disk usage will vary over time as segments are
merged, readers/writers closed, whatever.

3.0.3 is ancient by the way.


--
Ian.


On Thu, Jan 17, 2013 at 11:22 AM, uma sankar <umasankarcv@gmail.com> wrote:
> Hi ,
>
>
>
> I need your help or suggestions regarding  Lucence index storage. In our
> project we are using Lucence 3.0.3  for indexing , its working amazing. We
> are storing the index in the physical file system in the  centos . Now I
> would like to know how we can set the upper boundaries for the storage, for
> instance the index should occupy more than 1GB. How we can set this
> property.. I have done enough google, but no answer available for this, Any
> help is really appreciated.
>
>
>
> Thanks and Regards,
>
> Uma Sankar. Y

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54727-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jan 17 13:11:17 2013
Return-Path: <java-user-return-54727-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 71397E4F8
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 17 Jan 2013 13:11:17 +0000 (UTC)
Received: (qmail 56291 invoked by uid 500); 17 Jan 2013 13:11:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55662 invoked by uid 500); 17 Jan 2013 13:11:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55579 invoked by uid 99); 17 Jan 2013 13:11:12 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Jan 2013 13:11:12 +0000
X-ASF-Spam-Status: No, hits=0.3 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_SOFTFAIL
X-Spam-Check-By: apache.org
Received-SPF: softfail (athena.apache.org: transitioning domain of jon@lightboxtechnologies.com does not designate 74.125.82.172 as permitted sender)
Received: from [74.125.82.172] (HELO mail-we0-f172.google.com) (74.125.82.172)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Jan 2013 13:11:05 +0000
Received: by mail-we0-f172.google.com with SMTP id r3so237173wey.17
        for <java-user@lucene.apache.org>; Thu, 17 Jan 2013 05:10:37 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=lightboxtechnologies.com; s=google;
        h=mime-version:x-received:x-originating-ip:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=gfM2t8FYFC72L4LRM7e8b5KYa21LeSbIb6iSDRipcwo=;
        b=UvoHzwBZMRVks5j223r3Vs2eA42HNyosxVuA2dYVKFYD9l+7V4T5CWLKXviTYD5nBa
         FijlGCgX4jGc/5vlde9HZOqqfWqq8dny2HjG2v/GfOYxdjZvuRrYGWZrU4PuIg7Qdgkx
         6u+R8mz0ZJq/yVZmfXWpWGVDpC80DzpsT+kGw=
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=mime-version:x-received:x-originating-ip:in-reply-to:references
         :date:message-id:subject:from:to:content-type:x-gm-message-state;
        bh=gfM2t8FYFC72L4LRM7e8b5KYa21LeSbIb6iSDRipcwo=;
        b=HsxL6zk1uXp0sKxmJUtHfFsIvXhAI6T9JX6Lv1XjT49KpdMkPScnx8mFYvZaYrn6Bf
         VMLDvdDOXr2qPpDustGPVAv4i6SlZVv+XotwOVh76vKjxKZQjoTejkQTcj+yQ5ixCWZZ
         Wxeeu8SH8kyXh+Fx/8+AFZHPVhZSkOVyYvvsmUpiFTvc6nJACnJ00oLyp8P4t+f8XWmB
         4S0pbkw2CsLL9lHTbNRW1c6no67WE36atNQmA5t399HperEu0iks7+P58IYd75hkzrxi
         BPsAvVhL+2uKSU80UF+QrfG36qlhosC8DzpQakZVFbUvDBVUmmuttC5vbj/bMeybV/ts
         hZhQ==
MIME-Version: 1.0
X-Received: by 10.180.20.198 with SMTP id p6mr15744843wie.19.1358428237344;
 Thu, 17 Jan 2013 05:10:37 -0800 (PST)
Received: by 10.216.100.72 with HTTP; Thu, 17 Jan 2013 05:10:37 -0800 (PST)
X-Originating-IP: [68.33.9.116]
In-Reply-To: <CAEY5pxXsj8kXPTBoGpYP_vWPHOTSwYm18aRiYQTky_zK1CFFww@mail.gmail.com>
References: <CAOEyTYS_61qBM8hP_fv0OQC4xACMYYOMbf4NLJkq2SiEKYNBug@mail.gmail.com>
	<CAEY5pxXsj8kXPTBoGpYP_vWPHOTSwYm18aRiYQTky_zK1CFFww@mail.gmail.com>
Date: Thu, 17 Jan 2013 08:10:37 -0500
Message-ID: <CAOEyTYSWvsFsGvpBE6pZ7XJXj5ypTDUf8rE9jqGWXJzLoptzkA@mail.gmail.com>
Subject: Re: Document term vectors in Lucene 4
From: Jon Stewart <jon@lightboxtechnologies.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
X-Gm-Message-State: ALoCoQkG9F3VT5iq+ZAK6yoLGAyAaEc0JQzjX9lR5rjK7YfogcgbZUtEdLp6KRokmWd0BPfRlPEF
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks very much for your reply, Ian.

I am using SlowCompositeReaderWrapper because I am also retrieving the
term frequency statistics for the corpus (at the end of the day, I am
doing some machine learning/document clustering). Despite its name and
warning documentation not to use it, SlowCompositeReaderWrapper seems
to be the only baked-in way of getting total corpus term statistics
from a DirectoryReader, n'est-ce pas? Incidentally, I am using the
StandardAnalyzer as well.


Jon

On Thu, Jan 17, 2013 at 5:06 AM, Ian Lea <ian.lea@gmail.com> wrote:
> When I run your code, as is except for using RAMDirectory and setting
> up an IndexWriter using StandardAnalyzer
>
>         RAMDirectory dir = new RAMDirectory();
>         Analyzer anl = new StandardAnalyzer(Version.LUCENE_40);
>         IndexWriterConfig iwcfg = new IndexWriterConfig(Version.LUCENE_40, anl);
>         IndexWriter iw = new IndexWriter(dir, iwcfg);
>         ...
>         iw.addDocument(doc);
>         iw.close();
>
> it prints
>
> doc 0 had 1 terms.
>
> If change text to .e.g. "this is foobar gibberish" it says there are 2
> terms.  So it looks OK to me. "this" and "is" are presumably in the
> default list of stop words.
>
> Not relevant, but why are you using SlowCompositeReaderWrapper rather than just
> IndexReader rdr = DirectoryReader.open(dir)?  I get the same results either way,
>
>
> --
> Ian.
>
>
> On Thu, Jan 17, 2013 at 5:52 AM, Jon Stewart
> <jon@lightboxtechnologies.com> wrote:
>> Hello,
>>
>> I cannot extract document term vectors from an index, and have not
>> turned up much in some determined googling. In short, when I call
>> IndexReader.getTermVector(docID, field) or
>> IndexReader.getTermVectors(docID) and then navigate down to the Terms
>> for the specified field, I get a null result.
>>
>> // Indexing:
>>   String bodyText = "this is foobar";
>>   final FieldType BodyOptions = new FieldType();
>>   BodyOptions.setIndexed(true);
>>   BodyOptions.setIndexOptions(IndexOptions.DOCS_AND_FREQS_AND_POSITIONS_AND_OFFSETS);
>>   BodyOptions.setStored(true);
>>   BodyOptions.setStoreTermVectors(true);
>>   BodyOptions.setTokenized(true);
>>   Document doc = new Document();
>>   doc.add(new Field("body", bodyText, BodyOptions));
>>
>> When I examine docs in Luke, I can see the term vectors.
>>
>> // Retrieving (at a later time)
>>   DirectoryReader dirRdr = DirectoryReader.open(FSDirectory.open(new
>> File(path)));
>>   SlowCompositeReaderWrapper rdr = new SlowCompositeReaderWrapper(dirRdr);
>>   for (int i = 0; i < rdr.maxDoc(); ++i) {
>>     int numTerms = 0;
>>     Terms terms = rdr.getTermVector(i, "body");
>>     if (terms != null) {
>>       TermsEnum term = terms.iterator(null);
>>       while (term.next() != null) {
>>         ++numTerms;
>>       }
>>       System.out.println("doc " + i + " had " + numTerms + " terms");
>>     }
>>     else {
>>       System.err.println("null term vector on doc " + i);
>>     }
>>   }
>>
>> On every doc, the Terms object I get back from getTermVector(i, "body") is null.
>>
>>
>> Jon
>> --
>> Jon Stewart, Principal
>> (646) 719-0317 | jon@lightboxtechnologies.com | Arlington, VA
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>



-- 
Jon Stewart, Principal
(646) 719-0317 | jon@lightboxtechnologies.com | Arlington, VA

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54728-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jan 17 13:56:05 2013
Return-Path: <java-user-return-54728-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 235B9E2F9
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 17 Jan 2013 13:56:05 +0000 (UTC)
Received: (qmail 19977 invoked by uid 500); 17 Jan 2013 13:56:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19693 invoked by uid 500); 17 Jan 2013 13:56:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19655 invoked by uid 99); 17 Jan 2013 13:56:01 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Jan 2013 13:56:01 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ochrist@ebscohost.com designates 140.234.255.31 as permitted sender)
Received: from [140.234.255.31] (HELO eumail1.epnet.com) (140.234.255.31)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Jan 2013 13:55:54 +0000
Received: from edc-smtp1.epnet.com (edc-smtp1-ext.epnet.com [140.234.254.83])
	by eumail1.epnet.com (8.13.6/8.13.6/EP8.13) with ESMTP id r0HDtXcF015122
	(version=TLSv1/SSLv3 cipher=DHE-DSS-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Thu, 17 Jan 2013 08:55:33 -0500
Received: from exchange.corp.epnet.com (exchange.corp.epnet.com [10.68.91.21])
	by edc-smtp1.epnet.com (8.13.6/8.13.6/EP8.13) with ESMTP id r0HDtXG7010884
	for <java-user@lucene.apache.org>; Thu, 17 Jan 2013 08:55:33 -0500
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Suggesters: circumfix suggestions
Date: Thu, 17 Jan 2013 08:55:32 -0500
Message-ID: <BBB9F0110BBE664AA1BD301B11473BD2031516B3@exchange.corp.epnet.com>
In-Reply-To: <CAL8PwkYWe2=aN8jTuAzJjJ2MM8VVF4yg1=yva6gUaOP03LD9aQ@mail.gmail.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Suggesters: circumfix suggestions
Thread-Index: Ac30Oj9eeYkEUloYTYadmY/tfpPuXAAfmTKw
References: <BBB9F0110BBE664AA1BD301B11473BD20315142C@exchange.corp.epnet.com> <CAL8PwkYWe2=aN8jTuAzJjJ2MM8VVF4yg1=yva6gUaOP03LD9aQ@mail.gmail.com>
From: "Oliver Christ" <ochrist@ebscohost.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

In our case (very similar to the "Netflix movie titles" use case) the
AnalyzingSuggester's FST grows by a factor of ~5 when we generate the
token graph.

Looking up and joining individual "postings lists" for the individual
tokens would certainly work, but is certainly more work than injecting a
token graph generator into the index analyzer's token filter chain :)
(or modifying TokenStreamToAutomaton to generate the additional
transitions, but that may be too low-level).

Cheers, Oli

-----Original Message-----
From: Michael McCandless [mailto:lucene@mikemccandless.com]=20
Sent: Wednesday, January 16, 2013 5:38 PM
To: java-user@lucene.apache.org
Subject: Re: Suggesters: circumfix suggestions

Netflix also does this, eg type transla (you need an account).

I think it'd be good to somehow support this (Lucene's suggesters don't
today).

The first two approaches should conceptually work, but both will bloat
the FST (I'd be curious to know how much!).

Maybe another approach would be ... to index only single tokens into the
suggester?  And then, from the user's query, run the suggester on each
token separately, and then do a second search (against a "normal"
Lucene index) to find all documents containing those tokens?

Eg, you'd index only "boston", "red", "sox", "rumor" into the FST, and
then have a separate search index with "boston red sox rumor" indexed as
a document.  If the user types "red so", then you run suggest on "red"
and on "so", and then run a hmm MultiPhraseQuery for
(red|redmond|reddit) (so|sox|sophomore|...) against the index?  How to
score/sort the resulting hits will be interesting ... if you have strong
priors / boost (e.g. you have a good source of "popularity" or
something) then you could sort by that ...

Mike McCandless

http://blog.mikemccandless.com

On Wed, Jan 16, 2013 at 4:27 PM, Oliver Christ <ochrist@ebscohost.com>
wrote:
> Hi,
>
>
>
> Has anyone tried to implement circumfix suggesters, where the=20
> suggestion is a circumfix of the lookup string?
>
>
>
> E.g. "sox rumor" suggests "boston red sox rumors" (try it on=20
> google.com).
>
>
>
> I think there are several of ways to implement this:
>
>
>
> *         Given some multiword term, add all word subsequences to the
> suggester individually ("boston red sox rumors" adds also "red sox=20
> rumors", "sox rumors", "rumors") - that can be achieved using a=20
> special TermFreqIterator. This turns the lookup problem into a=20
> standard prefix search. While this works, it effectively modifies the=20
> surface form, and the "full term" needs to be indexed and looked up
elsewhere.
>
> *         Constructing a token graph with appropriate substring arcs
> from the (hopefully linear) token sequence, using a special
TokenFilter.
> The benefit is that the surface form is always the same, but the=20
> automaton may become large (at least if you are using an=20
> AnalyzingSuggester).
>
> *         DIY, using suffix arrays or something similar.
>
>
>
> But I'm sure there are other ways and/or tradeoffs I haven't thought=20
> about J I'd be interested in your feedback.
>
>
>
> Cheers, Oli
>
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54729-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jan 17 14:09:29 2013
Return-Path: <java-user-return-54729-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 6E801E391
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 17 Jan 2013 14:09:29 +0000 (UTC)
Received: (qmail 73956 invoked by uid 500); 17 Jan 2013 14:09:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73487 invoked by uid 500); 17 Jan 2013 14:09:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73475 invoked by uid 99); 17 Jan 2013 14:09:26 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Jan 2013 14:09:26 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of rcmuir@gmail.com designates 209.85.216.169 as permitted sender)
Received: from [209.85.216.169] (HELO mail-qc0-f169.google.com) (209.85.216.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Jan 2013 14:09:21 +0000
Received: by mail-qc0-f169.google.com with SMTP id t2so1677789qcq.28
        for <java-user@lucene.apache.org>; Thu, 17 Jan 2013 06:09:01 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=x-received:mime-version:in-reply-to:references:from:date:message-id
         :subject:to:content-type;
        bh=E0X0jvCHQUod+X2JGxuiQwNwBf5S+geZSzAkwEaDqGE=;
        b=TJLo/JIopdwmMnPL5iqrEIvSml7Qlrz8WNtR0DKE+DVH3BI7IC3WJKBhWZqoL4jyTp
         k0WtrdvjPHRLcXKOTstxn335b1wBFi8QsxYfXOJ9iUV1GFQyAlrjyFTmZ7tpA77+2VPO
         Hsnpss//YcWX90td+fj4iuSkJ45ouoQMM6SRCgxWJeITlKCYBTu2OIUnQcpn6UZaURFh
         mrQSrkjphbVWbgXkDovrnQZIFs+XSov1Ltlx77ngM8iv7zJ/j7Chwr/1WGfcuvYNdqNR
         ++/EMcsTHZ+Y3KMUfwaAcr80XN1gYO02Gh1BdpSaOZc/T/oL6NoxVbySvtoQkDl3eeRT
         76Fg==
X-Received: by 10.49.2.35 with SMTP id 3mr6128476qer.36.1358431740993; Thu, 17
 Jan 2013 06:09:00 -0800 (PST)
MIME-Version: 1.0
Received: by 10.49.103.198 with HTTP; Thu, 17 Jan 2013 06:08:40 -0800 (PST)
In-Reply-To: <CAOEyTYSWvsFsGvpBE6pZ7XJXj5ypTDUf8rE9jqGWXJzLoptzkA@mail.gmail.com>
References: <CAOEyTYS_61qBM8hP_fv0OQC4xACMYYOMbf4NLJkq2SiEKYNBug@mail.gmail.com>
 <CAEY5pxXsj8kXPTBoGpYP_vWPHOTSwYm18aRiYQTky_zK1CFFww@mail.gmail.com> <CAOEyTYSWvsFsGvpBE6pZ7XJXj5ypTDUf8rE9jqGWXJzLoptzkA@mail.gmail.com>
From: Robert Muir <rcmuir@gmail.com>
Date: Thu, 17 Jan 2013 06:08:40 -0800
Message-ID: <CAOdYfZVb4tO=Fy=x6tH_NgLT8jR7wV8ZV0hoSDQnTa2nZopDGg@mail.gmail.com>
Subject: Re: Document term vectors in Lucene 4
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
X-Virus-Checked: Checked by ClamAV on apache.org

Which statistics in particular (which methods)?

On Thu, Jan 17, 2013 at 5:10 AM, Jon Stewart
<jon@lightboxtechnologies.com> wrote:
> Thanks very much for your reply, Ian.
>
> I am using SlowCompositeReaderWrapper because I am also retrieving the
> term frequency statistics for the corpus (at the end of the day, I am
> doing some machine learning/document clustering). Despite its name and
> warning documentation not to use it, SlowCompositeReaderWrapper seems
> to be the only baked-in way of getting total corpus term statistics
> from a DirectoryReader, n'est-ce pas? Incidentally, I am using the
> StandardAnalyzer as well.
>
>
> Jon
>
> On Thu, Jan 17, 2013 at 5:06 AM, Ian Lea <ian.lea@gmail.com> wrote:
>> When I run your code, as is except for using RAMDirectory and setting
>> up an IndexWriter using StandardAnalyzer
>>
>>         RAMDirectory dir = new RAMDirectory();
>>         Analyzer anl = new StandardAnalyzer(Version.LUCENE_40);
>>         IndexWriterConfig iwcfg = new IndexWriterConfig(Version.LUCENE_40, anl);
>>         IndexWriter iw = new IndexWriter(dir, iwcfg);
>>         ...
>>         iw.addDocument(doc);
>>         iw.close();
>>
>> it prints
>>
>> doc 0 had 1 terms.
>>
>> If change text to .e.g. "this is foobar gibberish" it says there are 2
>> terms.  So it looks OK to me. "this" and "is" are presumably in the
>> default list of stop words.
>>
>> Not relevant, but why are you using SlowCompositeReaderWrapper rather than just
>> IndexReader rdr = DirectoryReader.open(dir)?  I get the same results either way,
>>
>>
>> --
>> Ian.
>>
>>
>> On Thu, Jan 17, 2013 at 5:52 AM, Jon Stewart
>> <jon@lightboxtechnologies.com> wrote:
>>> Hello,
>>>
>>> I cannot extract document term vectors from an index, and have not
>>> turned up much in some determined googling. In short, when I call
>>> IndexReader.getTermVector(docID, field) or
>>> IndexReader.getTermVectors(docID) and then navigate down to the Terms
>>> for the specified field, I get a null result.
>>>
>>> // Indexing:
>>>   String bodyText = "this is foobar";
>>>   final FieldType BodyOptions = new FieldType();
>>>   BodyOptions.setIndexed(true);
>>>   BodyOptions.setIndexOptions(IndexOptions.DOCS_AND_FREQS_AND_POSITIONS_AND_OFFSETS);
>>>   BodyOptions.setStored(true);
>>>   BodyOptions.setStoreTermVectors(true);
>>>   BodyOptions.setTokenized(true);
>>>   Document doc = new Document();
>>>   doc.add(new Field("body", bodyText, BodyOptions));
>>>
>>> When I examine docs in Luke, I can see the term vectors.
>>>
>>> // Retrieving (at a later time)
>>>   DirectoryReader dirRdr = DirectoryReader.open(FSDirectory.open(new
>>> File(path)));
>>>   SlowCompositeReaderWrapper rdr = new SlowCompositeReaderWrapper(dirRdr);
>>>   for (int i = 0; i < rdr.maxDoc(); ++i) {
>>>     int numTerms = 0;
>>>     Terms terms = rdr.getTermVector(i, "body");
>>>     if (terms != null) {
>>>       TermsEnum term = terms.iterator(null);
>>>       while (term.next() != null) {
>>>         ++numTerms;
>>>       }
>>>       System.out.println("doc " + i + " had " + numTerms + " terms");
>>>     }
>>>     else {
>>>       System.err.println("null term vector on doc " + i);
>>>     }
>>>   }
>>>
>>> On every doc, the Terms object I get back from getTermVector(i, "body") is null.
>>>
>>>
>>> Jon
>>> --
>>> Jon Stewart, Principal
>>> (646) 719-0317 | jon@lightboxtechnologies.com | Arlington, VA
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>
>
> --
> Jon Stewart, Principal
> (646) 719-0317 | jon@lightboxtechnologies.com | Arlington, VA
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54730-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jan 17 14:39:51 2013
Return-Path: <java-user-return-54730-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id CCCFEE148
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 17 Jan 2013 14:39:51 +0000 (UTC)
Received: (qmail 86756 invoked by uid 500); 17 Jan 2013 14:39:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86399 invoked by uid 500); 17 Jan 2013 14:39:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86371 invoked by uid 99); 17 Jan 2013 14:39:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Jan 2013 14:39:48 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of martijn.is.hier@gmail.com designates 209.85.220.54 as permitted sender)
Received: from [209.85.220.54] (HELO mail-pa0-f54.google.com) (209.85.220.54)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Jan 2013 14:39:42 +0000
Received: by mail-pa0-f54.google.com with SMTP id bi5so1503444pad.13
        for <java-user@lucene.apache.org>; Thu, 17 Jan 2013 06:39:21 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=x-received:mime-version:sender:in-reply-to:references:from:date
         :x-google-sender-auth:message-id:subject:to:content-type;
        bh=zHHhGV2y+Yj11P3piI65F//O5C0rRsznJ46Oi49W4HI=;
        b=C/COJ+utX9+mcsviQhQY6HBlMrAF/YvZHSrV0WTXf6pCIVF9HAlX9oF2XW6IO8ONsT
         bkCtnsY08nEj8sdcly+SRHvIDmtZRCDEZyDru1ERa1f0FA2qeqLqD+Ye9n09/JO9mU7N
         eqcHkx8pZ5ACqVaQK8OU1KvRnHAr/xzN43bZFBf4b1crH2NhOSCkvK5bWrE+QR2ukXNw
         iKResIDKqZZMI7c7kmwvPJjX3jyYWXQMHxJWjxcODXf9SLNseO7SpvR6wD1Zy98bAeXd
         7/97sLujWVwBBEVWB49SLqkZSqE5Cv+1Aq6/i6CjqbD8xvcR3kiibOcAQO6Z2IRJE3mL
         32oA==
X-Received: by 10.68.219.67 with SMTP id pm3mr14026780pbc.150.1358433561819;
 Thu, 17 Jan 2013 06:39:21 -0800 (PST)
MIME-Version: 1.0
Sender: martijn.is.hier@gmail.com
Received: by 10.66.157.9 with HTTP; Thu, 17 Jan 2013 06:39:01 -0800 (PST)
In-Reply-To: <1358351471.1097.YahooMailNeo@web120706.mail.ne1.yahoo.com>
References: <1358351471.1097.YahooMailNeo@web120706.mail.ne1.yahoo.com>
From: Martijn v Groningen <martijn.v.groningen@gmail.com>
Date: Thu, 17 Jan 2013 15:39:01 +0100
X-Google-Sender-Auth: iWD6MebDJ6bGatCaBMz1BPC-9CA
Message-ID: <CA+A76TwvUWx5PpJ1B3yxuwjbj4geXxZZdn=Rp3j255Yfa8u57Q@mail.gmail.com>
Subject: Re: BlockJoin and RawTermFilter (lucene 4.0.0)
To: java-user@lucene.apache.org, kiwi clive <kiwi_clive@yahoo.com>
Content-Type: text/plain; charset=UTF-8
X-Virus-Checked: Checked by ClamAV on apache.org

I don't recall that the RawTermFilter was required. The following code
should also work in 4.x:
Filter parentsFilter = new CachingWrapperFilter(new
QueryWrapperFilter(new TermQuery(new Term("type", "T1"))));

Martijn

On 16 January 2013 16:51, kiwi clive <kiwi_clive@yahoo.com> wrote:
> Hi Guys,
>
> Apologies if this has been asked before but I could not an appropriate post.
>
> The Lucene Documentation stresses the use of a RawTermFiler when building up the parentFilter and I was previously using the following in lucene 3.6.0:
>
>
>             Filter parentQueryFilter = new CachingWrapperFilter(new RawTermFilter(new Term("type", "T1")), true);
>
> Having moved to lucene 4.0.0, I cannot find the RawTermFilter class. It may be in another module but I have not been able to find it. Is this filter still required for BlockJoin as the Join API does not seem to have changed appreciably.
>
> Thanks for any help.
> Clive



-- 
Met vriendelijke groet,

Martijn van Groningen

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54731-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jan 17 14:47:11 2013
Return-Path: <java-user-return-54731-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 1EC68E1AD
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 17 Jan 2013 14:47:11 +0000 (UTC)
Received: (qmail 18406 invoked by uid 500); 17 Jan 2013 14:47:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18267 invoked by uid 500); 17 Jan 2013 14:47:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18235 invoked by uid 99); 17 Jan 2013 14:47:08 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Jan 2013 14:47:08 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.210.50] (HELO mail-da0-f50.google.com) (209.85.210.50)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Jan 2013 14:47:03 +0000
Received: by mail-da0-f50.google.com with SMTP id h15so1139043dan.37
        for <java-user@lucene.apache.org>; Thu, 17 Jan 2013 06:46:42 -0800 (PST)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=x-received:mime-version:in-reply-to:references:from:date:message-id
         :subject:to:cc:content-type:x-gm-message-state;
        bh=UN3ugpE7pLOSeJU5CKcsIJBeqz7BFkKDImjcdl1SFYo=;
        b=Kemqd2TxGkTCjRfWwNnDD9HDSZnGAZGRztBnVt7mTe8YPnguzj1WBqwCnANWpOMJ0x
         vytaVI2S1buR7683VVvueIAVbx9+hWpbhMpTTGbhq9usTgQbuv4GnbnGel3/WFFQSDBk
         PYDH+IqnYXJ3pveITycCq08mPr2bPy1aoWvZB8IxiJiJ731d2lSig51BfwQpSOz2UqEL
         4UdVjX6haU90BIcatRuWFAG2Vtfl1qTKpAvPFtjiL+WbDBOBEVc0HueghxckAhtA+bAh
         CmBbywyAVt3fPcK2ymmXfn9rnxWmivll+zoMNjDH9edHqM3u5zaPc2FRe5vgIsD4JmHi
         8mAw==
X-Received: by 10.68.220.162 with SMTP id px2mr14216771pbc.109.1358434002455;
 Thu, 17 Jan 2013 06:46:42 -0800 (PST)
MIME-Version: 1.0
Received: by 10.68.154.73 with HTTP; Thu, 17 Jan 2013 06:46:22 -0800 (PST)
In-Reply-To: <CA+A76TwvUWx5PpJ1B3yxuwjbj4geXxZZdn=Rp3j255Yfa8u57Q@mail.gmail.com>
References: <1358351471.1097.YahooMailNeo@web120706.mail.ne1.yahoo.com> <CA+A76TwvUWx5PpJ1B3yxuwjbj4geXxZZdn=Rp3j255Yfa8u57Q@mail.gmail.com>
From: Michael McCandless <lucene@mikemccandless.com>
Date: Thu, 17 Jan 2013 09:46:22 -0500
Message-ID: <CAL8PwkYf=Gxk2Cn6Nmzg5LE9OYHTEEVYKQZoa8mZEtAYdoq1aA@mail.gmail.com>
Subject: Re: BlockJoin and RawTermFilter (lucene 4.0.0)
To: java-user@lucene.apache.org
Cc: kiwi clive <kiwi_clive@yahoo.com>
Content-Type: text/plain; charset=ISO-8859-1
X-Gm-Message-State: ALoCoQkD2yDN4A6wHJerWfEGsNoV3GTuAPlJIbDvJYkEIshi5ZEUZ8GWS8caWQu2kQQHhu1L9zVk
X-Virus-Checked: Checked by ClamAV on apache.org

Right, RawTermFilter is no longer needed (because we changed how
deleted docs are handled in 4.0).

Mike McCandless

http://blog.mikemccandless.com

On Thu, Jan 17, 2013 at 9:39 AM, Martijn v Groningen
<martijn.v.groningen@gmail.com> wrote:
> I don't recall that the RawTermFilter was required. The following code
> should also work in 4.x:
> Filter parentsFilter = new CachingWrapperFilter(new
> QueryWrapperFilter(new TermQuery(new Term("type", "T1"))));
>
> Martijn
>
> On 16 January 2013 16:51, kiwi clive <kiwi_clive@yahoo.com> wrote:
>> Hi Guys,
>>
>> Apologies if this has been asked before but I could not an appropriate post.
>>
>> The Lucene Documentation stresses the use of a RawTermFiler when building up the parentFilter and I was previously using the following in lucene 3.6.0:
>>
>>
>>             Filter parentQueryFilter = new CachingWrapperFilter(new RawTermFilter(new Term("type", "T1")), true);
>>
>> Having moved to lucene 4.0.0, I cannot find the RawTermFilter class. It may be in another module but I have not been able to find it. Is this filter still required for BlockJoin as the Join API does not seem to have changed appreciably.
>>
>> Thanks for any help.
>> Clive
>
>
>
> --
> Met vriendelijke groet,
>
> Martijn van Groningen
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54732-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jan 17 14:50:09 2013
Return-Path: <java-user-return-54732-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 3AF11E1C5
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 17 Jan 2013 14:50:09 +0000 (UTC)
Received: (qmail 29892 invoked by uid 500); 17 Jan 2013 14:50:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29611 invoked by uid 500); 17 Jan 2013 14:50:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29586 invoked by uid 99); 17 Jan 2013 14:50:06 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Jan 2013 14:50:06 +0000
X-ASF-Spam-Status: No, hits=0.3 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_SOFTFAIL
X-Spam-Check-By: apache.org
Received-SPF: softfail (nike.apache.org: transitioning domain of jon@lightboxtechnologies.com does not designate 209.85.212.180 as permitted sender)
Received: from [209.85.212.180] (HELO mail-wi0-f180.google.com) (209.85.212.180)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Jan 2013 14:49:59 +0000
Received: by mail-wi0-f180.google.com with SMTP id hj13so2344959wib.1
        for <java-user@lucene.apache.org>; Thu, 17 Jan 2013 06:49:38 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=lightboxtechnologies.com; s=google;
        h=mime-version:x-received:x-originating-ip:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=75J8wUxkgHA0pUFCjLO54u/Q7cfrqWIjFK/LNqVUX8c=;
        b=Em4tL4xN2HHldU+gyQsckoq9HwMfYIkaZOsdBXS/TFjUkouuGgZcinTEjR4WZOj6/9
         EsMyc05dvpD1FmwAJESb0mWvBppdFcG+47ukuxlTNQZKNYqKFYmM+3GSiK0NWL+3dkAP
         3Iw8byEoS2d9s6qBF7JFUcnnmFEDvOwW9HaUk=
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=mime-version:x-received:x-originating-ip:in-reply-to:references
         :date:message-id:subject:from:to:content-type:x-gm-message-state;
        bh=75J8wUxkgHA0pUFCjLO54u/Q7cfrqWIjFK/LNqVUX8c=;
        b=jmrxRj36siiwaariDd3XZk/ACIsrH6Jn/XkDB1Nthu9yA8nkwMvC35Q6H6pJfp5u42
         NebJm1gYfZc/CTA5V31T6ITxdoO5eYKlXO+QNWhr+YLVkGQTk5uln8Vbj+8fqmUab6kU
         QjlUJ4GhPqcLlPMI4xyIkEm+8Ug27H60glE9vNspDY9SdDQheH12xPGbh7iPW+45Ami6
         ys4tY2wW0c6xjd9qiKdd1Tl3QFaV3Ltrbsdxp681OoXgGDlSMrbZ7vwl1ilbSVLEc04E
         MRiUlh+xz4EZK/nIBkdw75ZMYk/u+ZCuPQbplaCbdPMt0Jm4VwMs1/hEM2jYas6DjwOH
         2/6g==
MIME-Version: 1.0
X-Received: by 10.180.20.198 with SMTP id p6mr16317041wie.19.1358434178489;
 Thu, 17 Jan 2013 06:49:38 -0800 (PST)
Received: by 10.216.100.72 with HTTP; Thu, 17 Jan 2013 06:49:38 -0800 (PST)
X-Originating-IP: [68.33.9.116]
In-Reply-To: <CAOdYfZVb4tO=Fy=x6tH_NgLT8jR7wV8ZV0hoSDQnTa2nZopDGg@mail.gmail.com>
References: <CAOEyTYS_61qBM8hP_fv0OQC4xACMYYOMbf4NLJkq2SiEKYNBug@mail.gmail.com>
	<CAEY5pxXsj8kXPTBoGpYP_vWPHOTSwYm18aRiYQTky_zK1CFFww@mail.gmail.com>
	<CAOEyTYSWvsFsGvpBE6pZ7XJXj5ypTDUf8rE9jqGWXJzLoptzkA@mail.gmail.com>
	<CAOdYfZVb4tO=Fy=x6tH_NgLT8jR7wV8ZV0hoSDQnTa2nZopDGg@mail.gmail.com>
Date: Thu, 17 Jan 2013 09:49:38 -0500
Message-ID: <CAOEyTYSFgnp+FfniGW18rcB8o5b1HXDYjGEdqpb+QHb4ac_89g@mail.gmail.com>
Subject: Re: Document term vectors in Lucene 4
From: Jon Stewart <jon@lightboxtechnologies.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
X-Gm-Message-State: ALoCoQmeeMACJpYWyR/9D6mJrUyGap+CNJ+KSHhnut+nzp3Nk1rDtczgS7OPKNHaGglYqL2Mkf3T
X-Virus-Checked: Checked by ClamAV on apache.org

On Thu, Jan 17, 2013 at 9:08 AM, Robert Muir <rcmuir@gmail.com> wrote:
> Which statistics in particular (which methods)?

I'd like to know the frequency of each term in each document. Those
term counts for the most frequent terms in the corpus will make it
into the document vectors for clustering.

Looking at Terms and TermsEnum, I'm actually somewhat baffled about
how to do this. Iterating over the TermsEnums in a Terms retrieved by
IndexReader.getTermVector() will tell me about the presence of a term
within a document, but I don't see a simple "count" or "freq" method
in TermsEnum--the methods there look like corpus statistics.

Based on Ian's reply, I created the following one-file test program.
The results I get are weird: I get a term vector back for the first
document, but not for the second.

Output:
doc 0 had term 'baz'
doc 0 had term 'foobar'
doc 0 had term 'gibberish'
doc 0 had 3 terms
doc 1 had no term vector for body

Thanks again for the responses and assistance.


Jon


import java.io.File;
import java.io.IOException;

import org.apache.lucene.analysis.standard.StandardAnalyzer;

import org.apache.lucene.index.IndexWriter;
import org.apache.lucene.index.IndexWriterConfig.OpenMode;
import org.apache.lucene.index.IndexWriterConfig;
import org.apache.lucene.index.FieldInfo.IndexOptions;
import org.apache.lucene.index.CorruptIndexException;
import org.apache.lucene.index.AtomicReader;
import org.apache.lucene.index.IndexableField;
import org.apache.lucene.index.Terms;
import org.apache.lucene.index.TermsEnum;
import org.apache.lucene.index.SlowCompositeReaderWrapper;
import org.apache.lucene.index.DirectoryReader;

import org.apache.lucene.store.Directory;
import org.apache.lucene.store.FSDirectory;

import org.apache.lucene.util.BytesRef;
import org.apache.lucene.util.Version;

import org.apache.lucene.document.Document;
import org.apache.lucene.document.Field;
import org.apache.lucene.document.StringField;
import org.apache.lucene.document.FieldType;

public class LuceneTest {

  static void createIndex(final String path) throws IOException,
CorruptIndexException {
    final Directory dir = FSDirectory.open(new File(path));
    final StandardAnalyzer analyzer = new StandardAnalyzer(Version.LUCENE_40);
    final IndexWriterConfig iwc = new
IndexWriterConfig(Version.LUCENE_40, analyzer);
    iwc.setOpenMode(OpenMode.CREATE_OR_APPEND);
    iwc.setRAMBufferSizeMB(256.0);
    final IndexWriter writer = new IndexWriter(dir, iwc);

    final FieldType bodyOptions = new FieldType();
    bodyOptions.setIndexed(true);
    bodyOptions.setIndexOptions(IndexOptions.DOCS_AND_FREQS_AND_POSITIONS_AND_OFFSETS);
    bodyOptions.setStored(true);
    bodyOptions.setStoreTermVectors(true);
    bodyOptions.setTokenized(true);

    final Document doc = new Document();
    doc.add(new Field("body", "this foobar is gibberish, baz", bodyOptions));
    writer.addDocument(doc);

    final Document doc2 = new Document();
    doc.add(new Field("body", "I don't know what to tell you, qux.
Some foobar is just fubar.", bodyOptions));
    writer.addDocument(doc2);

    writer.close();
  }

  static void readIndex(final String path) throws IOException,
CorruptIndexException {
    final DirectoryReader dirReader =
DirectoryReader.open(FSDirectory.open(new File(path)));
    final SlowCompositeReaderWrapper rdr = new
SlowCompositeReaderWrapper(dirReader);

    int max = rdr.maxDoc();

    TermsEnum term = null;
    // iterate docs
    for (int i = 0; i < max; ++i) {
      // get term vector for body field
      final Terms terms = rdr.getTermVector(i, "body");
      if (terms != null) {
        // count terms in doc
        int numTerms = 0;
        term = terms.iterator(term);
        while (term.next() != null) {
          System.out.println("doc " + i + " had term '" +
term.term().utf8ToString() + "'");
          ++numTerms;

          // would like to record doc term frequencies here, i.e.,
counts[i][term.term()] = term.freq()
        }
        System.out.println("doc " + i + " had " + numTerms + " terms");
      }
      else {
        System.err.println("doc " + i + " had no term vector for body");
      }
    }
  }

  public static void main(String[] args) throws IOException,
InterruptedException, CorruptIndexException {
    final String path = args[0];
    createIndex(path);
    readIndex(path);
  }
}

-- 
Jon Stewart, Principal
(646) 719-0317 | jon@lightboxtechnologies.com | Arlington, VA

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54733-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jan 17 15:01:09 2013
Return-Path: <java-user-return-54733-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 4BEF4E260
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 17 Jan 2013 15:01:09 +0000 (UTC)
Received: (qmail 15573 invoked by uid 500); 17 Jan 2013 15:01:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15483 invoked by uid 500); 17 Jan 2013 15:01:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15461 invoked by uid 99); 17 Jan 2013 15:01:06 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Jan 2013 15:01:06 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 74.125.82.52 as permitted sender)
Received: from [74.125.82.52] (HELO mail-wg0-f52.google.com) (74.125.82.52)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Jan 2013 15:01:01 +0000
Received: by mail-wg0-f52.google.com with SMTP id 12so1624891wgh.31
        for <java-user@lucene.apache.org>; Thu, 17 Jan 2013 07:00:40 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=x-received:mime-version:in-reply-to:references:from:date:message-id
         :subject:to:content-type;
        bh=nyj4T/xhyWFY6A/Fw0rFrnP4EOrL25ixZCbjIsCZvuI=;
        b=K/GRdrmI5MO+fJCj3Pa046nWb2ipYIRXym9irQyrGtLCsO+LcrN/kIFwiYbgqs5Hqc
         +p+mbt6hbScnZzdi6uQEtZSBUhdT2y6U/JZOYv0YLPmNmioyIJHzO55EqJ6buP7bzoQF
         JKdmsFGMC8IRTNz9gnysIk2n1pNvhNlnG76rDxoTHTc5jWk+M0yOkNJLi1mIEQGEqOKD
         ah+hWdx/ZkE50p6sL4DWkQLRGMwoK6RsUhjC5VRdys3pBvS6u20vGFMdRgrP4c/K3zLW
         zHJDumoRrXpku8G/ab+xZ4ENUfWgpZNeCD2dH5V7czRqjLG9exq4FcBMmGSX4qKwOcbv
         C9Zg==
X-Received: by 10.180.87.228 with SMTP id bb4mr16299263wib.31.1358434840456;
 Thu, 17 Jan 2013 07:00:40 -0800 (PST)
MIME-Version: 1.0
Received: by 10.194.57.11 with HTTP; Thu, 17 Jan 2013 07:00:20 -0800 (PST)
In-Reply-To: <CAOEyTYSFgnp+FfniGW18rcB8o5b1HXDYjGEdqpb+QHb4ac_89g@mail.gmail.com>
References: <CAOEyTYS_61qBM8hP_fv0OQC4xACMYYOMbf4NLJkq2SiEKYNBug@mail.gmail.com>
 <CAEY5pxXsj8kXPTBoGpYP_vWPHOTSwYm18aRiYQTky_zK1CFFww@mail.gmail.com>
 <CAOEyTYSWvsFsGvpBE6pZ7XJXj5ypTDUf8rE9jqGWXJzLoptzkA@mail.gmail.com>
 <CAOdYfZVb4tO=Fy=x6tH_NgLT8jR7wV8ZV0hoSDQnTa2nZopDGg@mail.gmail.com> <CAOEyTYSFgnp+FfniGW18rcB8o5b1HXDYjGEdqpb+QHb4ac_89g@mail.gmail.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Thu, 17 Jan 2013 15:00:20 +0000
Message-ID: <CAEY5pxUN3u+CEQKhasf8tOumW1fiYQSwE5D=mfm462-KGGPCgQ@mail.gmail.com>
Subject: Re: Document term vectors in Lucene 4
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

typo time.  You need doc2.add(...) not 2 doc.add(...) statements.


--
Ian.


On Thu, Jan 17, 2013 at 2:49 PM, Jon Stewart
<jon@lightboxtechnologies.com> wrote:
> On Thu, Jan 17, 2013 at 9:08 AM, Robert Muir <rcmuir@gmail.com> wrote:
>> Which statistics in particular (which methods)?
>
> I'd like to know the frequency of each term in each document. Those
> term counts for the most frequent terms in the corpus will make it
> into the document vectors for clustering.
>
> Looking at Terms and TermsEnum, I'm actually somewhat baffled about
> how to do this. Iterating over the TermsEnums in a Terms retrieved by
> IndexReader.getTermVector() will tell me about the presence of a term
> within a document, but I don't see a simple "count" or "freq" method
> in TermsEnum--the methods there look like corpus statistics.
>
> Based on Ian's reply, I created the following one-file test program.
> The results I get are weird: I get a term vector back for the first
> document, but not for the second.
>
> Output:
> doc 0 had term 'baz'
> doc 0 had term 'foobar'
> doc 0 had term 'gibberish'
> doc 0 had 3 terms
> doc 1 had no term vector for body
>
> Thanks again for the responses and assistance.
>
>
> Jon
>
>
> import java.io.File;
> import java.io.IOException;
>
> import org.apache.lucene.analysis.standard.StandardAnalyzer;
>
> import org.apache.lucene.index.IndexWriter;
> import org.apache.lucene.index.IndexWriterConfig.OpenMode;
> import org.apache.lucene.index.IndexWriterConfig;
> import org.apache.lucene.index.FieldInfo.IndexOptions;
> import org.apache.lucene.index.CorruptIndexException;
> import org.apache.lucene.index.AtomicReader;
> import org.apache.lucene.index.IndexableField;
> import org.apache.lucene.index.Terms;
> import org.apache.lucene.index.TermsEnum;
> import org.apache.lucene.index.SlowCompositeReaderWrapper;
> import org.apache.lucene.index.DirectoryReader;
>
> import org.apache.lucene.store.Directory;
> import org.apache.lucene.store.FSDirectory;
>
> import org.apache.lucene.util.BytesRef;
> import org.apache.lucene.util.Version;
>
> import org.apache.lucene.document.Document;
> import org.apache.lucene.document.Field;
> import org.apache.lucene.document.StringField;
> import org.apache.lucene.document.FieldType;
>
> public class LuceneTest {
>
>   static void createIndex(final String path) throws IOException,
> CorruptIndexException {
>     final Directory dir = FSDirectory.open(new File(path));
>     final StandardAnalyzer analyzer = new StandardAnalyzer(Version.LUCENE_40);
>     final IndexWriterConfig iwc = new
> IndexWriterConfig(Version.LUCENE_40, analyzer);
>     iwc.setOpenMode(OpenMode.CREATE_OR_APPEND);
>     iwc.setRAMBufferSizeMB(256.0);
>     final IndexWriter writer = new IndexWriter(dir, iwc);
>
>     final FieldType bodyOptions = new FieldType();
>     bodyOptions.setIndexed(true);
>     bodyOptions.setIndexOptions(IndexOptions.DOCS_AND_FREQS_AND_POSITIONS_AND_OFFSETS);
>     bodyOptions.setStored(true);
>     bodyOptions.setStoreTermVectors(true);
>     bodyOptions.setTokenized(true);
>
>     final Document doc = new Document();
>     doc.add(new Field("body", "this foobar is gibberish, baz", bodyOptions));
>     writer.addDocument(doc);
>
>     final Document doc2 = new Document();
>     doc.add(new Field("body", "I don't know what to tell you, qux.
> Some foobar is just fubar.", bodyOptions));
>     writer.addDocument(doc2);
>
>     writer.close();
>   }
>
>   static void readIndex(final String path) throws IOException,
> CorruptIndexException {
>     final DirectoryReader dirReader =
> DirectoryReader.open(FSDirectory.open(new File(path)));
>     final SlowCompositeReaderWrapper rdr = new
> SlowCompositeReaderWrapper(dirReader);
>
>     int max = rdr.maxDoc();
>
>     TermsEnum term = null;
>     // iterate docs
>     for (int i = 0; i < max; ++i) {
>       // get term vector for body field
>       final Terms terms = rdr.getTermVector(i, "body");
>       if (terms != null) {
>         // count terms in doc
>         int numTerms = 0;
>         term = terms.iterator(term);
>         while (term.next() != null) {
>           System.out.println("doc " + i + " had term '" +
> term.term().utf8ToString() + "'");
>           ++numTerms;
>
>           // would like to record doc term frequencies here, i.e.,
> counts[i][term.term()] = term.freq()
>         }
>         System.out.println("doc " + i + " had " + numTerms + " terms");
>       }
>       else {
>         System.err.println("doc " + i + " had no term vector for body");
>       }
>     }
>   }
>
>   public static void main(String[] args) throws IOException,
> InterruptedException, CorruptIndexException {
>     final String path = args[0];
>     createIndex(path);
>     readIndex(path);
>   }
> }
>
> --
> Jon Stewart, Principal
> (646) 719-0317 | jon@lightboxtechnologies.com | Arlington, VA
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54734-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jan 17 15:12:14 2013
Return-Path: <java-user-return-54734-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 7EA68E2B8
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 17 Jan 2013 15:12:14 +0000 (UTC)
Received: (qmail 70480 invoked by uid 500); 17 Jan 2013 15:12:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70401 invoked by uid 500); 17 Jan 2013 15:12:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70384 invoked by uid 99); 17 Jan 2013 15:12:11 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Jan 2013 15:12:11 +0000
X-ASF-Spam-Status: No, hits=0.3 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_SOFTFAIL
X-Spam-Check-By: apache.org
Received-SPF: softfail (nike.apache.org: transitioning domain of jon@lightboxtechnologies.com does not designate 74.125.82.49 as permitted sender)
Received: from [74.125.82.49] (HELO mail-wg0-f49.google.com) (74.125.82.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Jan 2013 15:12:03 +0000
Received: by mail-wg0-f49.google.com with SMTP id 15so1728860wgd.16
        for <java-user@lucene.apache.org>; Thu, 17 Jan 2013 07:11:43 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=lightboxtechnologies.com; s=google;
        h=mime-version:x-received:x-originating-ip:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=aafdTpmfJ2OoigVSeSL74BfysvXQ70yCP33Wbyc4HPs=;
        b=atr8luB27mwHUySobE1YfN4+uToyi2N8LMmdCbsWeN2XPvyzEGmMdxC5PDmtHMfkwe
         4YHpiB4N1lB+/MFeAxSdQnMDHIWOYWsGcTYVRx5DC6bHJSkLGUnwHDI3dnLbCPXiG8Bt
         G8R/jXjU427ux7/r+YHgFrlu86vbwDsDMid2Y=
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=mime-version:x-received:x-originating-ip:in-reply-to:references
         :date:message-id:subject:from:to:content-type:x-gm-message-state;
        bh=aafdTpmfJ2OoigVSeSL74BfysvXQ70yCP33Wbyc4HPs=;
        b=kLtnQuhnkXuv/8raOHIKz27LhJ64IHK+CA3PC6yBUr8PQvLzrjS0hrDRJs3dZdel07
         tfkdL3ChXM1yRJORLe5AQO0f3XnS/W7KrBhVP9rulXIJxnTDA4hoEf9sE6gz/Ewn+h2K
         FdXLBnaaYSkQ6my651vO4q7Bi1mJiHpxNViEB0ZM/q6AM3jdb5MpRG+SCXd+CSWzQ4tN
         HQnnjgsLiU3qLfG5hYGsGr7BfuKYEoouA251OA+mEaubZ04zq/CO0zeWt2/A8PVRhOGh
         Hvj6sURiQ2eLCWim8vUCXDlkfbfpV3Ekne6O9SuxU79Cf4lmIVgpVwev5tQD9sFk/oyk
         vYsw==
MIME-Version: 1.0
X-Received: by 10.180.20.198 with SMTP id p6mr16454907wie.19.1358435503682;
 Thu, 17 Jan 2013 07:11:43 -0800 (PST)
Received: by 10.216.100.72 with HTTP; Thu, 17 Jan 2013 07:11:43 -0800 (PST)
X-Originating-IP: [68.33.9.116]
In-Reply-To: <CAEY5pxUN3u+CEQKhasf8tOumW1fiYQSwE5D=mfm462-KGGPCgQ@mail.gmail.com>
References: <CAOEyTYS_61qBM8hP_fv0OQC4xACMYYOMbf4NLJkq2SiEKYNBug@mail.gmail.com>
	<CAEY5pxXsj8kXPTBoGpYP_vWPHOTSwYm18aRiYQTky_zK1CFFww@mail.gmail.com>
	<CAOEyTYSWvsFsGvpBE6pZ7XJXj5ypTDUf8rE9jqGWXJzLoptzkA@mail.gmail.com>
	<CAOdYfZVb4tO=Fy=x6tH_NgLT8jR7wV8ZV0hoSDQnTa2nZopDGg@mail.gmail.com>
	<CAOEyTYSFgnp+FfniGW18rcB8o5b1HXDYjGEdqpb+QHb4ac_89g@mail.gmail.com>
	<CAEY5pxUN3u+CEQKhasf8tOumW1fiYQSwE5D=mfm462-KGGPCgQ@mail.gmail.com>
Date: Thu, 17 Jan 2013 10:11:43 -0500
Message-ID: <CAOEyTYRRu_Dch4mWdibbVo6rav=5puW7Jk7tA-ZShePrbWyxew@mail.gmail.com>
Subject: Re: Document term vectors in Lucene 4
From: Jon Stewart <jon@lightboxtechnologies.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
X-Gm-Message-State: ALoCoQnXVmbpf6ShMNzA0nrw+WeddJwac5+FgSXqzf6/Xw0enF0zQaqFU7Bo574sG8QmwcSTsk0v
X-Virus-Checked: Checked by ClamAV on apache.org

D'oh!!!! Thanks!

Does TermsEnum.totalTermFreq() return the per-doc frequencies? It
looks like it empirically, but the documentation refers to corpus
usage, not document.field usage.

Jon

On Thu, Jan 17, 2013 at 10:00 AM, Ian Lea <ian.lea@gmail.com> wrote:
> typo time.  You need doc2.add(...) not 2 doc.add(...) statements.
>
>
> --
> Ian.
>
>
> On Thu, Jan 17, 2013 at 2:49 PM, Jon Stewart
> <jon@lightboxtechnologies.com> wrote:
>> On Thu, Jan 17, 2013 at 9:08 AM, Robert Muir <rcmuir@gmail.com> wrote:
>>> Which statistics in particular (which methods)?
>>
>> I'd like to know the frequency of each term in each document. Those
>> term counts for the most frequent terms in the corpus will make it
>> into the document vectors for clustering.
>>
>> Looking at Terms and TermsEnum, I'm actually somewhat baffled about
>> how to do this. Iterating over the TermsEnums in a Terms retrieved by
>> IndexReader.getTermVector() will tell me about the presence of a term
>> within a document, but I don't see a simple "count" or "freq" method
>> in TermsEnum--the methods there look like corpus statistics.
>>
>> Based on Ian's reply, I created the following one-file test program.
>> The results I get are weird: I get a term vector back for the first
>> document, but not for the second.
>>
>> Output:
>> doc 0 had term 'baz'
>> doc 0 had term 'foobar'
>> doc 0 had term 'gibberish'
>> doc 0 had 3 terms
>> doc 1 had no term vector for body
>>
>> Thanks again for the responses and assistance.
>>
>>
>> Jon
>>
>>
>> import java.io.File;
>> import java.io.IOException;
>>
>> import org.apache.lucene.analysis.standard.StandardAnalyzer;
>>
>> import org.apache.lucene.index.IndexWriter;
>> import org.apache.lucene.index.IndexWriterConfig.OpenMode;
>> import org.apache.lucene.index.IndexWriterConfig;
>> import org.apache.lucene.index.FieldInfo.IndexOptions;
>> import org.apache.lucene.index.CorruptIndexException;
>> import org.apache.lucene.index.AtomicReader;
>> import org.apache.lucene.index.IndexableField;
>> import org.apache.lucene.index.Terms;
>> import org.apache.lucene.index.TermsEnum;
>> import org.apache.lucene.index.SlowCompositeReaderWrapper;
>> import org.apache.lucene.index.DirectoryReader;
>>
>> import org.apache.lucene.store.Directory;
>> import org.apache.lucene.store.FSDirectory;
>>
>> import org.apache.lucene.util.BytesRef;
>> import org.apache.lucene.util.Version;
>>
>> import org.apache.lucene.document.Document;
>> import org.apache.lucene.document.Field;
>> import org.apache.lucene.document.StringField;
>> import org.apache.lucene.document.FieldType;
>>
>> public class LuceneTest {
>>
>>   static void createIndex(final String path) throws IOException,
>> CorruptIndexException {
>>     final Directory dir = FSDirectory.open(new File(path));
>>     final StandardAnalyzer analyzer = new StandardAnalyzer(Version.LUCENE_40);
>>     final IndexWriterConfig iwc = new
>> IndexWriterConfig(Version.LUCENE_40, analyzer);
>>     iwc.setOpenMode(OpenMode.CREATE_OR_APPEND);
>>     iwc.setRAMBufferSizeMB(256.0);
>>     final IndexWriter writer = new IndexWriter(dir, iwc);
>>
>>     final FieldType bodyOptions = new FieldType();
>>     bodyOptions.setIndexed(true);
>>     bodyOptions.setIndexOptions(IndexOptions.DOCS_AND_FREQS_AND_POSITIONS_AND_OFFSETS);
>>     bodyOptions.setStored(true);
>>     bodyOptions.setStoreTermVectors(true);
>>     bodyOptions.setTokenized(true);
>>
>>     final Document doc = new Document();
>>     doc.add(new Field("body", "this foobar is gibberish, baz", bodyOptions));
>>     writer.addDocument(doc);
>>
>>     final Document doc2 = new Document();
>>     doc.add(new Field("body", "I don't know what to tell you, qux.
>> Some foobar is just fubar.", bodyOptions));
>>     writer.addDocument(doc2);
>>
>>     writer.close();
>>   }
>>
>>   static void readIndex(final String path) throws IOException,
>> CorruptIndexException {
>>     final DirectoryReader dirReader =
>> DirectoryReader.open(FSDirectory.open(new File(path)));
>>     final SlowCompositeReaderWrapper rdr = new
>> SlowCompositeReaderWrapper(dirReader);
>>
>>     int max = rdr.maxDoc();
>>
>>     TermsEnum term = null;
>>     // iterate docs
>>     for (int i = 0; i < max; ++i) {
>>       // get term vector for body field
>>       final Terms terms = rdr.getTermVector(i, "body");
>>       if (terms != null) {
>>         // count terms in doc
>>         int numTerms = 0;
>>         term = terms.iterator(term);
>>         while (term.next() != null) {
>>           System.out.println("doc " + i + " had term '" +
>> term.term().utf8ToString() + "'");
>>           ++numTerms;
>>
>>           // would like to record doc term frequencies here, i.e.,
>> counts[i][term.term()] = term.freq()
>>         }
>>         System.out.println("doc " + i + " had " + numTerms + " terms");
>>       }
>>       else {
>>         System.err.println("doc " + i + " had no term vector for body");
>>       }
>>     }
>>   }
>>
>>   public static void main(String[] args) throws IOException,
>> InterruptedException, CorruptIndexException {
>>     final String path = args[0];
>>     createIndex(path);
>>     readIndex(path);
>>   }
>> }
>>
>> --
>> Jon Stewart, Principal
>> (646) 719-0317 | jon@lightboxtechnologies.com | Arlington, VA
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>



-- 
Jon Stewart, Principal
(646) 719-0317 | jon@lightboxtechnologies.com | Arlington, VA

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54735-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jan 17 16:02:15 2013
Return-Path: <java-user-return-54735-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id DD7D4E1E0
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 17 Jan 2013 16:02:14 +0000 (UTC)
Received: (qmail 74088 invoked by uid 500); 17 Jan 2013 16:02:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73943 invoked by uid 500); 17 Jan 2013 16:02:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73907 invoked by uid 99); 17 Jan 2013 16:02:11 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Jan 2013 16:02:11 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of m.conrad@iterend.com designates 209.85.223.182 as permitted sender)
Received: from [209.85.223.182] (HELO mail-ie0-f182.google.com) (209.85.223.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Jan 2013 16:02:04 +0000
Received: by mail-ie0-f182.google.com with SMTP id s9so5000410iec.13
        for <java-user@lucene.apache.org>; Thu, 17 Jan 2013 08:01:43 -0800 (PST)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=x-received:dkim-signature:mime-version:x-received:reply-to:date
         :message-id:subject:from:to:content-type:x-gm-message-state;
        bh=c7YzbAh9eIPjUpNbqoLIkxtCGt7ZeZ+s8VDPBa8XQ7I=;
        b=BhguJkLR6dKdtLmBGft/4fdNP2t351Xm0K9Hsizi+JHnX5MEjIN9TGsqXWoY9yRBoi
         boYgLlrLofEGt2w9Zen/YazCx0YbHNMZV4H8EzTmXv8M2x6QUKcugmrZ9Uy/pxXrYmqe
         RG0YLJTdEfoFihGjLr3dT5ubVnFAxxoJ7rsDkqxkvqPQgso2pz9WNTodNcb1+q/3YIXM
         mChxkIa9Cs0bqfFO2CVQgKUBME39ZBAC675f4JCGGUmeD8+MLKjBwlOM0p9ohBKZ9eg0
         VlsBvHCwJSxPAHqBALsUWhKfSo/3PZF/BSWTQ2QqLiRsEQ5DUOoV6sI0eQTpNANZo3DG
         awsw==
X-Received: by 10.50.6.169 with SMTP id c9mr4314918iga.24.1358438503626;
        Thu, 17 Jan 2013 08:01:43 -0800 (PST)
Received: from mail-ie0-f175.google.com (mail-ie0-f175.google.com [209.85.223.175])
        by mx.google.com with ESMTPS id e9sm1868789igp.11.2013.01.17.08.01.43
        (version=TLSv1 cipher=ECDHE-RSA-RC4-SHA bits=128/128);
        Thu, 17 Jan 2013 08:01:43 -0800 (PST)
Received: by mail-ie0-f175.google.com with SMTP id qd14so5002672ieb.34
        for <java-user@lucene.apache.org>; Thu, 17 Jan 2013 08:01:43 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=trendiction.com; s=googletrendictioncom;
        h=mime-version:x-received:reply-to:date:message-id:subject:from:to
         :content-type;
        bh=c7YzbAh9eIPjUpNbqoLIkxtCGt7ZeZ+s8VDPBa8XQ7I=;
        b=tL2Wg9zoy0Hu6C4FQItksQD82X4OoGPMc6R4clZweXoH3+c9QPK74yPSQvPhQmkxnV
         25B9w6S1YpHUmtey9MSDX6j3I0EiBIYz+YaYfg/F6Hb1mzcruxpa2iyMJEgvS3v/iIbP
         PuBCwK3Z62T6HtKbISg5HiIFzuAhOyRNC847I=
MIME-Version: 1.0
X-Received: by 10.50.152.137 with SMTP id uy9mr4093696igb.62.1358438502659;
 Thu, 17 Jan 2013 08:01:42 -0800 (PST)
Reply-To: michel.conrad@trendiction.com
Received: by 10.42.93.17 with HTTP; Thu, 17 Jan 2013 08:01:42 -0800 (PST)
Date: Thu, 17 Jan 2013 17:01:42 +0100
Message-ID: <CAH0sEYhppVFLqM7xnp2s0USsOz-Dw1C0LX+Y-EPHZ4-TtcshiQ@mail.gmail.com>
Subject: Combine two BooleanQueries by a SpanNearQuery.
From: Michel Conrad <michel.conrad@trendiction.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Gm-Message-State: ALoCoQkUezDxT2JmNdeZu+BHXgxKN6hV3IkjV4ORwevC4GdC+V1CyZkzEAtwilwU9gtYhrwL/3ZQ
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

I am looking to get a combination of multiple subqueries.

What I want to do is to have two queries which have to be near one to another.

As an example:
Query1: (A AND (B OR C))
Query2: D

Then I want to use something like a SpanNearQuery to combine both (slop 5):
Both would then have to match and D should be within slop 5 to A, B or C.

So my question is if there is a query that combines two BooleanQuery
trees into a SpanNearQuery.
It would have to take the terms that match Query 1 and the terms that
match Query 2, and look if there is a combination within the required
slop.

Can I rewrite the BooleanQuery after parsing the query as a
MultiTermQuery, than wrap these in SpanMultiTermQueryWrapper, which
can be combined by the SpanNearQuery?

Best regards,
Michel

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54736-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jan 17 16:13:00 2013
Return-Path: <java-user-return-54736-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 05F64E22E
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 17 Jan 2013 16:13:00 +0000 (UTC)
Received: (qmail 15212 invoked by uid 500); 17 Jan 2013 16:12:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15047 invoked by uid 500); 17 Jan 2013 16:12:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15025 invoked by uid 99); 17 Jan 2013 16:12:57 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Jan 2013 16:12:57 +0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [80.169.233.11] (HELO mailbck.lombardodier.ch) (80.169.233.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Jan 2013 16:12:52 +0000
To: "'java-user@lucene.apache.org'" <java-user@lucene.apache.org>
Subject: mmap loads the entire index into memory during
 forceMergeDeletes/forceMerge(int)
Thread-Topic: mmap loads the entire index into memory during
 forceMergeDeletes/forceMerge(int)
Thread-Index: Ac30zW/faDtmHo5lTyWZkucZ6o9yQg==
Accept-Language: en-US, fr-CH
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
sendtoweb: 1
x-originating-ip: [10.207.1.17]
MIME-Version: 1.0
X-TNEFEvaluated: 1
From: v.sevel@lombardodier.com
Cc: s.seymarc@lombardodier.com,
	y.albou@lombardodier.com,
	c.dieng@lombardodier.com
Message-ID: <E710AC74C3EA5E4788C7D09CFB0EA89E8EBFFE@GVADAG02.biz.lodh.com>
Date: Thu, 17 Jan 2013 16:12:24 +0000
Content-Type: multipart/alternative;
	boundary="_000_E710AC74C3EA5E4788C7D09CFB0EA89E8EBFFEGVADAG02bizlodhco_"
Content-Language: en-US
X-Virus-Checked: Checked by ClamAV on apache.org

--_000_E710AC74C3EA5E4788C7D09CFB0EA89E8EBFFEGVADAG02bizlodhco_
Content-Transfer-Encoding: quoted-printable
Content-Type: text/plain; charset="us-ascii"

Hi,
On a 256 Gb RAM machine, we have half of our IT system running.
Part of it, are 2 lucene applications, managing each a an approximate 100 G=
b index.
These applications are used to index logging events, and every night there =
is a purge, followed by a forceMergeDeletes to reclaim disk space (and I ha=
ve configured forceMergeDeletesPctAllowed=3D0 to make sure I really do get =
the space back).
We have had production incidents  recently, because the resident size would=
 go as high as 100 Gb on each lucene app process during forceMergeDeletes. =
After an investigation I figured out the default behavior of FSDirectory.op=
en(File), instantiating a MMapDirectory on 64 bits windows.
I read http://blog.thetaphi.de/2012/07/use-lucenes-mmapdirectory-on-64bit.h=
tml, and I guess I am seeing something different than what is stated in the=
 article: "MMapDirectory will not load the whole index into physical memory=
. Why should it do this? We just ask the operating system to map the file i=
nto address space for easy access, by no means we are requesting more. Java=
 and the O/S optionally provide the option to try loading the whole file in=
to RAM (if enough is available), but Lucene does not use that option (we ma=
y add this possibility in a later version)."

At least, in my case it does load the entire index into memory.

This behavior caught everybody by surprise, even app servers administrators=
 that are used to monitor heaps on java machines, not resident memory.
Mmap is appropriate when the lucene app is running alone on a physical box =
or a vm, because if it wants to load the entire index into memory, it will =
swap out its own pages. But when you use a shared machine, then you start h=
urting the other app servers.

I think you should raise awareness on mmap usage when dealing with a large =
index.

Regards,

vince


************************ DISCLAIMER ************************
This message is intended only for use by the person to
whom it is addressed. It may contain information that is
privileged and confidential. Its content does not constitute
a formal commitment by Lombard Odier & Cie or any of its
branches or affiliates. If you are not the intended recipient
of this message, kindly notify the sender immediately and
destroy this message. Thank You.
*****************************************************************

--_000_E710AC74C3EA5E4788C7D09CFB0EA89E8EBFFEGVADAG02bizlodhco_--

From java-user-return-54737-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jan 17 16:15:11 2013
Return-Path: <java-user-return-54737-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 9B1A1E24C
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 17 Jan 2013 16:15:11 +0000 (UTC)
Received: (qmail 25459 invoked by uid 500); 17 Jan 2013 16:15:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25390 invoked by uid 500); 17 Jan 2013 16:15:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25382 invoked by uid 99); 17 Jan 2013 16:15:09 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Jan 2013 16:15:09 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of SRS0=cpe9pD=LK=basetechnology.com=jack@yourhostingaccount.com designates 65.254.253.56 as permitted sender)
Received: from [65.254.253.56] (HELO mailout07.yourhostingaccount.com) (65.254.253.56)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Jan 2013 16:15:00 +0000
Received: from mailscan20.yourhostingaccount.com ([10.1.15.20] helo=mailscan20.yourhostingaccount.com)
	by mailout07.yourhostingaccount.com with esmtp (Exim)
	id 1Tvs6x-0006zM-5Q
	for java-user@lucene.apache.org; Thu, 17 Jan 2013 11:14:39 -0500
Received: from impout02.yourhostingaccount.com ([10.1.55.2] helo=impout02.yourhostingaccount.com)
	by mailscan20.yourhostingaccount.com with esmtp (Exim)
	id 1Tvs6v-0004HV-WC
	for java-user@lucene.apache.org; Thu, 17 Jan 2013 11:14:38 -0500
Received: from authsmtp12.yourhostingaccount.com ([10.1.18.12])
	by impout02.yourhostingaccount.com with NO UCE
	id p4Ed1k00A0FdXoS014Edst; Thu, 17 Jan 2013 11:14:37 -0500
X-Authority-Analysis: v=2.0 cv=HIVB5/Rv c=1 sm=1
 a=yH02RjTyxywMAIqhn74x1Q==:17 a=aQzbgH187woA:10 a=d69IStaLMIYA:10
 a=3jZET7lWBKwA:10 a=8nJEP1OIZ-IA:10 a=jvYhGVW7AAAA:8 a=fb31bJvFR3MA:10
 a=mV9VRH-2AAAA:8 a=gkoPpAuPEDJWTuPephsA:9 a=wPNLvfGTeEIA:10
 a=t1ijpx9AV50gTBtUFlM2vg==:117
X-EN-OrigOutIP: 10.1.18.12
X-EN-IMPSID: p4Ed1k00A0FdXoS014Edst
Received: from 207-237-113-14.c3-0.nyr-ubr1.nyr.ny.cable.rcn.com ([207.237.113.14] helo=JackKrupansky)
	by authsmtp12.yourhostingaccount.com with esmtpa (Exim)
	id 1Tvs6v-0006du-KG
	for java-user@lucene.apache.org; Thu, 17 Jan 2013 11:14:37 -0500
Message-ID: <22F966A4B74E418DB0F819E566407857@JackKrupansky>
From: "Jack Krupansky" <jack@basetechnology.com>
To: <java-user@lucene.apache.org>
References: <CAH0sEYhppVFLqM7xnp2s0USsOz-Dw1C0LX+Y-EPHZ4-TtcshiQ@mail.gmail.com>
In-Reply-To: <CAH0sEYhppVFLqM7xnp2s0USsOz-Dw1C0LX+Y-EPHZ4-TtcshiQ@mail.gmail.com>
Subject: Re: Combine two BooleanQueries by a SpanNearQuery.
Date: Thu, 17 Jan 2013 11:14:33 -0500
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
Importance: Normal
X-Mailer: Microsoft Windows Live Mail 15.4.3555.308
X-MimeOLE: Produced By Microsoft MimeOLE V15.4.3555.308
X-EN-UserInfo: e0a4b55451ed9f27313ebf02e3d4348d:fc4a93e1349e680c52bdd723c0ab3ef6
X-EN-AuthUser: jack@basetechnology.com
Sender:  "Jack Krupansky" <jack@basetechnology.com>
X-EN-OrigIP: 207.237.113.14
X-EN-OrigHost: 207-237-113-14.c3-0.nyr-ubr1.nyr.ny.cable.rcn.com
X-Virus-Checked: Checked by ClamAV on apache.org

You need to express the "boolean" query solely in terms of SpanOrQuery and 
SpanNearQuery. If you can't, ... then it probably can't be done, but you 
should be able to.

How about starting with a plan English description of the problem you are 
trying to solve?

-- Jack Krupansky

-----Original Message----- 
From: Michel Conrad
Sent: Thursday, January 17, 2013 11:01 AM
To: java-user@lucene.apache.org
Subject: Combine two BooleanQueries by a SpanNearQuery.

Hi,

I am looking to get a combination of multiple subqueries.

What I want to do is to have two queries which have to be near one to 
another.

As an example:
Query1: (A AND (B OR C))
Query2: D

Then I want to use something like a SpanNearQuery to combine both (slop 5):
Both would then have to match and D should be within slop 5 to A, B or C.

So my question is if there is a query that combines two BooleanQuery
trees into a SpanNearQuery.
It would have to take the terms that match Query 1 and the terms that
match Query 2, and look if there is a combination within the required
slop.

Can I rewrite the BooleanQuery after parsing the query as a
MultiTermQuery, than wrap these in SpanMultiTermQueryWrapper, which
can be combined by the SpanNearQuery?

Best regards,
Michel

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54738-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jan 17 17:15:18 2013
Return-Path: <java-user-return-54738-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id D96DCE125
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 17 Jan 2013 17:15:17 +0000 (UTC)
Received: (qmail 80863 invoked by uid 500); 17 Jan 2013 17:15:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80812 invoked by uid 500); 17 Jan 2013 17:15:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80802 invoked by uid 99); 17 Jan 2013 17:15:15 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Jan 2013 17:15:15 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of m.conrad@iterend.com designates 209.85.223.181 as permitted sender)
Received: from [209.85.223.181] (HELO mail-ie0-f181.google.com) (209.85.223.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Jan 2013 17:15:08 +0000
Received: by mail-ie0-f181.google.com with SMTP id 16so5129335iea.12
        for <java-user@lucene.apache.org>; Thu, 17 Jan 2013 09:14:47 -0800 (PST)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=x-received:dkim-signature:mime-version:x-received:reply-to
         :in-reply-to:references:date:message-id:subject:from:to:content-type
         :x-gm-message-state;
        bh=I4eKrMFfNjsSyHqmfL3S2GKo7Q63J+4dbHAOl3/BEoQ=;
        b=OXV6cfwvUQtQIe3I34yW3Fd0jdrKqsolgbWtnl9jei1Csa9s+WCAWgtVSk+LF3qzQ+
         k6f2QdfDJ+rWo4fXKSD4vEQncPgq59PFtoGr+3judT4n56QbUIlP21W4xO3iqYcfZ/aj
         3jz0AKqO6k3rdkgxUKvp8gp1GTMHW7lf3c+7qrCVpOry1zssz5dh46tJF/lhKbBK0dnL
         OCKEk3WHUdbEAHeblWMCMw/NX1WUMdAl4Oj2fRca+4upFMYJoFRDnP3veaX1QWNP0ZCI
         nrl+o73PyT+BQ6YS5Ms3A8kBpM+3wcgFhYuCjJK3XosUVBeEfuqWUmd35iplKTWLqbev
         Ob3A==
X-Received: by 10.43.47.10 with SMTP id uq10mr3853696icb.17.1358442887632;
        Thu, 17 Jan 2013 09:14:47 -0800 (PST)
Received: from mail-ie0-f173.google.com (mail-ie0-f173.google.com [209.85.223.173])
        by mx.google.com with ESMTPS id u4sm1627702igw.6.2013.01.17.09.14.47
        (version=TLSv1 cipher=ECDHE-RSA-RC4-SHA bits=128/128);
        Thu, 17 Jan 2013 09:14:47 -0800 (PST)
Received: by mail-ie0-f173.google.com with SMTP id e13so5095880iej.4
        for <java-user@lucene.apache.org>; Thu, 17 Jan 2013 09:14:47 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=trendiction.com; s=googletrendictioncom;
        h=mime-version:x-received:reply-to:in-reply-to:references:date
         :message-id:subject:from:to:content-type;
        bh=I4eKrMFfNjsSyHqmfL3S2GKo7Q63J+4dbHAOl3/BEoQ=;
        b=wa9UF5X9q1L7MUYewKuLV096UerE6YrnPWnfbMoY6Ooiv+OP/aUOddbvgsi19eMxzl
         qDdREbEKl0iAmqlXOAnhvfVMvf1DvM25vH/2g4durbjI5efdxPDavQox+4DKHhktzuUt
         TxL/+coh0zIQXZRr1z89moqhghRNq73P3hCp8=
MIME-Version: 1.0
X-Received: by 10.50.150.167 with SMTP id uj7mr8634189igb.33.1358442886981;
 Thu, 17 Jan 2013 09:14:46 -0800 (PST)
Reply-To: michel.conrad@trendiction.com
Received: by 10.42.93.17 with HTTP; Thu, 17 Jan 2013 09:14:46 -0800 (PST)
In-Reply-To: <22F966A4B74E418DB0F819E566407857@JackKrupansky>
References: <CAH0sEYhppVFLqM7xnp2s0USsOz-Dw1C0LX+Y-EPHZ4-TtcshiQ@mail.gmail.com>
	<22F966A4B74E418DB0F819E566407857@JackKrupansky>
Date: Thu, 17 Jan 2013 18:14:46 +0100
Message-ID: <CAH0sEYhBP+s9_cqMRx5V_j-ZvSvB90+rUMr_RHmHpcODqnoVPA@mail.gmail.com>
Subject: Re: Combine two BooleanQueries by a SpanNearQuery.
From: Michel Conrad <michel.conrad@trendiction.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Gm-Message-State: ALoCoQlN6c7GXgRMxSpabxn/V0WR+jrcyPfspGAkt0lv3XjJS8nWbr+hJA2HjpAU7IkY13sW/hKp
X-Virus-Checked: Checked by ClamAV on apache.org

The problem I would like to solve is to have two queries that I will
get from the query parser (this could include wildcardqueries and
phrasequeries).
Both of these queries would have to match the document and as an
additional restriction I would like to add that a matching term from
the first query
is near a matching term from the second query.

So that you can search for instance for matching documents with
in your first query 'apple AND NOT computer'
and in your second 'monkey'
with a slop of 10 between the two queries, then it would be equivalent
to '"apple monkey"~10 AND NOT computer'.

I was wondering if there is a method to combine more complicated
queries in a similar way. (Some kind of generic solution)

Thanks for your help,

Michel

On Thu, Jan 17, 2013 at 5:14 PM, Jack Krupansky <jack@basetechnology.com> wrote:
> You need to express the "boolean" query solely in terms of SpanOrQuery and
> SpanNearQuery. If you can't, ... then it probably can't be done, but you
> should be able to.
>
> How about starting with a plan English description of the problem you are
> trying to solve?
>
> -- Jack Krupansky
>
> -----Original Message----- From: Michel Conrad
> Sent: Thursday, January 17, 2013 11:01 AM
> To: java-user@lucene.apache.org
> Subject: Combine two BooleanQueries by a SpanNearQuery.
>
>
> Hi,
>
> I am looking to get a combination of multiple subqueries.
>
> What I want to do is to have two queries which have to be near one to
> another.
>
> As an example:
> Query1: (A AND (B OR C))
> Query2: D
>
> Then I want to use something like a SpanNearQuery to combine both (slop 5):
> Both would then have to match and D should be within slop 5 to A, B or C.
>
> So my question is if there is a query that combines two BooleanQuery
> trees into a SpanNearQuery.
> It would have to take the terms that match Query 1 and the terms that
> match Query 2, and look if there is a combination within the required
> slop.
>
> Can I rewrite the BooleanQuery after parsing the query as a
> MultiTermQuery, than wrap these in SpanMultiTermQueryWrapper, which
> can be combined by the SpanNearQuery?
>
> Best regards,
> Michel
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54739-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jan 17 17:30:24 2013
Return-Path: <java-user-return-54739-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id CD9AAEE3F
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 17 Jan 2013 17:30:24 +0000 (UTC)
Received: (qmail 31912 invoked by uid 500); 17 Jan 2013 17:30:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31730 invoked by uid 500); 17 Jan 2013 17:30:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31720 invoked by uid 99); 17 Jan 2013 17:30:22 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Jan 2013 17:30:22 +0000
X-ASF-Spam-Status: No, hits=-2.3 required=5.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of mryan@moreover.com designates 208.65.144.81 as permitted sender)
Received: from [208.65.144.81] (HELO p02c11o148.mxlogic.net) (208.65.144.81)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Jan 2013 17:30:14 +0000
Received: from unknown [8.8.204.243] (EHLO webmail.moreover.com)
	by p02c11o148.mxlogic.net(mxl_mta-6.16.0-0) over TLS secured channel
	with ESMTP id 01538f05.0.194393.00-206.464655.p02c11o148.mxlogic.net (envelope-from <mryan@moreover.com>);
	Thu, 17 Jan 2013 10:29:54 -0700 (MST)
X-MXL-Hash: 50f83512579a30d2-88be0cd4bb54073d603a4a3b65bf79dae0e21ecd
Received: from EX2010-MAIL1.WIZARD.PVT ([fe80::28a2:7fa8:c541:22cc]) by
 EX2010-MAIL1.WIZARD.PVT ([fe80::28a2:7fa8:c541:22cc%11]) with mapi id
 14.01.0289.001; Thu, 17 Jan 2013 12:29:51 -0500
From: Michael Ryan <mryan@moreover.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Subject: RE: Combine two BooleanQueries by a SpanNearQuery.
Thread-Topic: Combine two BooleanQueries by a SpanNearQuery.
Thread-Index: AQHN9MwF8H3SPSv9IkS+xJ8XSHUB0ZhOBbKAgAAQ0wD//69GwA==
Date: Thu, 17 Jan 2013 17:29:50 +0000
Message-ID: <0A03B892A1F8E14C8D9E8DCB8320052804F0EA4D@EX2010-MAIL1.WIZARD.PVT>
References: <CAH0sEYhppVFLqM7xnp2s0USsOz-Dw1C0LX+Y-EPHZ4-TtcshiQ@mail.gmail.com>
	<22F966A4B74E418DB0F819E566407857@JackKrupansky>
 <CAH0sEYhBP+s9_cqMRx5V_j-ZvSvB90+rUMr_RHmHpcODqnoVPA@mail.gmail.com>
In-Reply-To: <CAH0sEYhBP+s9_cqMRx5V_j-ZvSvB90+rUMr_RHmHpcODqnoVPA@mail.gmail.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
x-originating-ip: [10.62.0.60]
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-AnalysisOut: [v=2.0 cv=Vs6U9ZKn c=1 sm=1 a=8V/Jeb+Klm/Sx6ugEkoitg==:17 a]
X-AnalysisOut: [=-umEzIyPh-wA:10 a=d69IStaLMIYA:10 a=uFFSgVP0Kt8A:10 a=BLc]
X-AnalysisOut: [eEmwcHowA:10 a=kj9zAlcOel0A:10 a=xqWC_Br6kY4A:10 a=4vNeviq]
X-AnalysisOut: [ZAAAA:8 a=fb31bJvFR3MA:10 a=ZWBsXUH4AAAA:8 a=mV9VRH-2AAAA:]
X-AnalysisOut: [8 a=jvYhGVW7AAAA:8 a=cwZb1B-F6KyCfbViCAIA:9 a=CjuIK1q_8ugA]
X-AnalysisOut: [:10 a=MqPBctdRSckA:10 a=EMlJoiak7gQA:10]
X-Spam: [F=0.2000000000; CM=0.500; S=0.200(2010122901)]
X-MAIL-FROM: <mryan@moreover.com>
X-SOURCE-IP: [8.8.204.243]
X-Virus-Checked: Checked by ClamAV on apache.org

I've had to do something exactly like this. My approach was to turn AND que=
ries into a SpanNearQuery with a slop of Integer.MAX_VALUE and inOrder fals=
e, and to turn OR queries into a SpanOrQuery. It's a bit hacky, but is much=
 simpler than creating your own Query class to implement this.

-Michael=20

-----Original Message-----
From: Michel Conrad [mailto:michel.conrad@trendiction.com]=20
Sent: Thursday, January 17, 2013 12:15 PM
To: java-user@lucene.apache.org
Subject: Re: Combine two BooleanQueries by a SpanNearQuery.

The problem I would like to solve is to have two queries that I will get fr=
om the query parser (this could include wildcardqueries and phrasequeries).
Both of these queries would have to match the document and as an additional=
 restriction I would like to add that a matching term from the first query =
is near a matching term from the second query.

So that you can search for instance for matching documents with in your fir=
st query 'apple AND NOT computer'
and in your second 'monkey'
with a slop of 10 between the two queries, then it would be equivalent to '=
"apple monkey"~10 AND NOT computer'.

I was wondering if there is a method to combine more complicated queries in=
 a similar way. (Some kind of generic solution)

Thanks for your help,

Michel

On Thu, Jan 17, 2013 at 5:14 PM, Jack Krupansky <jack@basetechnology.com> w=
rote:
> You need to express the "boolean" query solely in terms of SpanOrQuery=20
> and SpanNearQuery. If you can't, ... then it probably can't be done,=20
> but you should be able to.
>
> How about starting with a plan English description of the problem you=20
> are trying to solve?
>
> -- Jack Krupansky
>
> -----Original Message----- From: Michel Conrad
> Sent: Thursday, January 17, 2013 11:01 AM
> To: java-user@lucene.apache.org
> Subject: Combine two BooleanQueries by a SpanNearQuery.
>
>
> Hi,
>
> I am looking to get a combination of multiple subqueries.
>
> What I want to do is to have two queries which have to be near one to=20
> another.
>
> As an example:
> Query1: (A AND (B OR C))
> Query2: D
>
> Then I want to use something like a SpanNearQuery to combine both (slop 5=
):
> Both would then have to match and D should be within slop 5 to A, B or C.
>
> So my question is if there is a query that combines two BooleanQuery=20
> trees into a SpanNearQuery.
> It would have to take the terms that match Query 1 and the terms that=20
> match Query 2, and look if there is a combination within the required=20
> slop.
>
> Can I rewrite the BooleanQuery after parsing the query as a=20
> MultiTermQuery, than wrap these in SpanMultiTermQueryWrapper, which=20
> can be combined by the SpanNearQuery?
>
> Best regards,
> Michel
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54740-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jan 17 17:34:37 2013
Return-Path: <java-user-return-54740-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 6DCD8EE62
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 17 Jan 2013 17:34:37 +0000 (UTC)
Received: (qmail 52516 invoked by uid 500); 17 Jan 2013 17:34:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52476 invoked by uid 500); 17 Jan 2013 17:34:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52465 invoked by uid 99); 17 Jan 2013 17:34:35 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Jan 2013 17:34:35 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of SRS0=cpe9pD=LK=basetechnology.com=jack@yourhostingaccount.com designates 65.254.253.121 as permitted sender)
Received: from [65.254.253.121] (HELO mailout15.yourhostingaccount.com) (65.254.253.121)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Jan 2013 17:34:26 +0000
Received: from mailscan08.yourhostingaccount.com ([10.1.15.8] helo=mailscan08.yourhostingaccount.com)
	by mailout15.yourhostingaccount.com with esmtp (Exim)
	id 1TvtLp-0006sw-9d
	for java-user@lucene.apache.org; Thu, 17 Jan 2013 12:34:05 -0500
Received: from impout01.yourhostingaccount.com ([10.1.55.1] helo=impout01.yourhostingaccount.com)
	by mailscan08.yourhostingaccount.com with esmtp (Exim)
	id 1TvtLp-0006bG-Ml; Thu, 17 Jan 2013 12:34:05 -0500
Received: from authsmtp09.yourhostingaccount.com ([10.1.18.9])
	by impout01.yourhostingaccount.com with NO UCE
	id p5a51k0090BkWne015a53a; Thu, 17 Jan 2013 12:34:05 -0500
X-Authority-Analysis: v=2.0 cv=EJGEIilC c=1 sm=1
 a=yH02RjTyxywMAIqhn74x1Q==:17 a=aQzbgH187woA:10 a=d69IStaLMIYA:10
 a=3jZET7lWBKwA:10 a=8nJEP1OIZ-IA:10 a=jvYhGVW7AAAA:8 a=fb31bJvFR3MA:10
 a=mV9VRH-2AAAA:8 a=cwZb1B-F6KyCfbViCAIA:9 a=wPNLvfGTeEIA:10 a=EMlJoiak7gQA:10
 a=6Nsp9XPxgQEopsMv/m97rg==:117
X-EN-OrigOutIP: 10.1.18.9
X-EN-IMPSID: p5a51k0090BkWne015a53a
Received: from 207-237-113-14.c3-0.nyr-ubr1.nyr.ny.cable.rcn.com ([207.237.113.14] helo=JackKrupansky)
	by authsmtp09.yourhostingaccount.com with esmtpa (Exim)
	id 1TvtLo-0001ec-Ts; Thu, 17 Jan 2013 12:34:04 -0500
Message-ID: <9E856D021BD34B4A93BD54551D6CD3E7@JackKrupansky>
From: "Jack Krupansky" <jack@basetechnology.com>
To: <java-user@lucene.apache.org>,
	<michel.conrad@trendiction.com>
References: <CAH0sEYhppVFLqM7xnp2s0USsOz-Dw1C0LX+Y-EPHZ4-TtcshiQ@mail.gmail.com><22F966A4B74E418DB0F819E566407857@JackKrupansky> <CAH0sEYhBP+s9_cqMRx5V_j-ZvSvB90+rUMr_RHmHpcODqnoVPA@mail.gmail.com>
In-Reply-To: <CAH0sEYhBP+s9_cqMRx5V_j-ZvSvB90+rUMr_RHmHpcODqnoVPA@mail.gmail.com>
Subject: Re: Combine two BooleanQueries by a SpanNearQuery.
Date: Thu, 17 Jan 2013 12:33:59 -0500
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
Importance: Normal
X-Mailer: Microsoft Windows Live Mail 15.4.3555.308
X-MimeOLE: Produced By Microsoft MimeOLE V15.4.3555.308
X-EN-UserInfo: e0a4b55451ed9f27313ebf02e3d4348d:fc4a93e1349e680c52bdd723c0ab3ef6
X-EN-AuthUser: jack@basetechnology.com
Sender:  "Jack Krupansky" <jack@basetechnology.com>
X-EN-OrigIP: 207.237.113.14
X-EN-OrigHost: 207-237-113-14.c3-0.nyr-ubr1.nyr.ny.cable.rcn.com
X-Virus-Checked: Checked by ClamAV on apache.org

Currently there isn't. SpanNearQuery can take only other SpanQuery objects, 
which includes other spans, span terms, and span wrapped multi-term queries 
(e.g., wildcard, fuzzy query), but not Boolean queries.

But it does sound like a good feature request.

There is SpanNotQuery, so you can exclude terms from a span.

-- Jack Krupansky

-----Original Message----- 
From: Michel Conrad
Sent: Thursday, January 17, 2013 12:14 PM
To: java-user@lucene.apache.org
Subject: Re: Combine two BooleanQueries by a SpanNearQuery.

The problem I would like to solve is to have two queries that I will
get from the query parser (this could include wildcardqueries and
phrasequeries).
Both of these queries would have to match the document and as an
additional restriction I would like to add that a matching term from
the first query
is near a matching term from the second query.

So that you can search for instance for matching documents with
in your first query 'apple AND NOT computer'
and in your second 'monkey'
with a slop of 10 between the two queries, then it would be equivalent
to '"apple monkey"~10 AND NOT computer'.

I was wondering if there is a method to combine more complicated
queries in a similar way. (Some kind of generic solution)

Thanks for your help,

Michel

On Thu, Jan 17, 2013 at 5:14 PM, Jack Krupansky <jack@basetechnology.com> 
wrote:
> You need to express the "boolean" query solely in terms of SpanOrQuery and
> SpanNearQuery. If you can't, ... then it probably can't be done, but you
> should be able to.
>
> How about starting with a plan English description of the problem you are
> trying to solve?
>
> -- Jack Krupansky
>
> -----Original Message----- From: Michel Conrad
> Sent: Thursday, January 17, 2013 11:01 AM
> To: java-user@lucene.apache.org
> Subject: Combine two BooleanQueries by a SpanNearQuery.
>
>
> Hi,
>
> I am looking to get a combination of multiple subqueries.
>
> What I want to do is to have two queries which have to be near one to
> another.
>
> As an example:
> Query1: (A AND (B OR C))
> Query2: D
>
> Then I want to use something like a SpanNearQuery to combine both (slop 
> 5):
> Both would then have to match and D should be within slop 5 to A, B or C.
>
> So my question is if there is a query that combines two BooleanQuery
> trees into a SpanNearQuery.
> It would have to take the terms that match Query 1 and the terms that
> match Query 2, and look if there is a combination within the required
> slop.
>
> Can I rewrite the BooleanQuery after parsing the query as a
> MultiTermQuery, than wrap these in SpanMultiTermQueryWrapper, which
> can be combined by the SpanNearQuery?
>
> Best regards,
> Michel
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54741-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jan 17 17:52:01 2013
Return-Path: <java-user-return-54741-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id CDA0FEED5
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 17 Jan 2013 17:52:01 +0000 (UTC)
Received: (qmail 14586 invoked by uid 500); 17 Jan 2013 17:51:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14539 invoked by uid 500); 17 Jan 2013 17:51:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14531 invoked by uid 99); 17 Jan 2013 17:51:59 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Jan 2013 17:51:59 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of uwe@thetaphi.de designates 188.138.97.18 as permitted sender)
Received: from [188.138.97.18] (HELO mail.sd-datasolutions.de) (188.138.97.18)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Jan 2013 17:51:51 +0000
Received: from VEGA (port-92-196-61-239.dynamic.qsc.de [92.196.61.239])
	by mail.sd-datasolutions.de (Postfix) with ESMTPSA id 59C1514AA06F
	for <java-user@lucene.apache.org>; Thu, 17 Jan 2013 17:51:30 +0000 (UTC)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <E710AC74C3EA5E4788C7D09CFB0EA89E8EBFFE@GVADAG02.biz.lodh.com>
In-Reply-To: <E710AC74C3EA5E4788C7D09CFB0EA89E8EBFFE@GVADAG02.biz.lodh.com>
Subject: RE: mmap loads the entire index into memory during forceMergeDeletes/forceMerge(int)
Date: Thu, 17 Jan 2013 18:51:30 +0100
Message-ID: <04e201cdf4db$481e4190$d85ac4b0$@thetaphi.de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="utf-8"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Outlook 14.0
Thread-Index: AQKJypa4vOdS2ZkHVL/9sveW2/cr4ZbWH7sg
Content-Language: de
X-Virus-Checked: Checked by ClamAV on apache.org

The answer is simple: It load the whole index into RAM because it has =
the RAM available for free use. If there would be apps running really =
using that RAM, this would not happen.

There is no difference if you use another Lucene directory =
implementation, merging is a heavy IO operation, so it will always load =
all of the index into the FS cache while merging (if there is space in =
it). You will see the same behavior, if you do "dd if=3Dlargeindexfile =
of=3D/dev/null". After that it will also consume all of filesystem cache =
because it transferred the whole file through RAM. The only difference =
here is, that there is no *address space* allocated. But as stated in =
the article, address space is for free on 64 bit OS.

In no case, resident RAM will be raised by this. Also heap space stays =
the same. Teach your system administrator. And it is also not a windows =
problem. I have a 20 Gigabytes index on my windows 7 64 bit machine and =
it is still useable and doesn=E2=80=99t swap while merging (although I =
have other apps running)..

Uwe

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de


> -----Original Message-----
> From: v.sevel@lombardodier.com [mailto:v.sevel@lombardodier.com]
> Sent: Thursday, January 17, 2013 5:12 PM
> To: 'java-user@lucene.apache.org'
> Cc: s.seymarc@lombardodier.com; y.albou@lombardodier.com;
> c.dieng@lombardodier.com
> Subject: mmap loads the entire index into memory during
> forceMergeDeletes/forceMerge(int)
>=20
> Hi,
> On a 256 Gb RAM machine, we have half of our IT system running.
> Part of it, are 2 lucene applications, managing each a an approximate =
100 Gb
> index.
> These applications are used to index logging events, and every night =
there is
> a purge, followed by a forceMergeDeletes to reclaim disk space (and I =
have
> configured forceMergeDeletesPctAllowed=3D0 to make sure I really do =
get the
> space back).
> We have had production incidents  recently, because the resident size =
would
> go as high as 100 Gb on each lucene app process during =
forceMergeDeletes.
> After an investigation I figured out the default behavior of
> FSDirectory.open(File), instantiating a MMapDirectory on 64 bits =
windows.
> I read http://blog.thetaphi.de/2012/07/use-lucenes-mmapdirectory-on-
> 64bit.html, and I guess I am seeing something different than what is =
stated in
> the article: "MMapDirectory will not load the whole index into =
physical
> memory. Why should it do this? We just ask the operating system to map =
the
> file into address space for easy access, by no means we are requesting =
more.
> Java and the O/S optionally provide the option to try loading the =
whole file
> into RAM (if enough is available), but Lucene does not use that option =
(we
> may add this possibility in a later version)."
>=20
> At least, in my case it does load the entire index into memory.
>=20
> This behavior caught everybody by surprise, even app servers =
administrators
> that are used to monitor heaps on java machines, not resident memory.
> Mmap is appropriate when the lucene app is running alone on a physical =
box
> or a vm, because if it wants to load the entire index into memory, it =
will swap
> out its own pages. But when you use a shared machine, then you start
> hurting the other app servers.
>=20
> I think you should raise awareness on mmap usage when dealing with a =
large
> index.
>=20
> Regards,
>=20
> vince
>=20
>=20
> ************************ DISCLAIMER ************************
> This message is intended only for use by the person to whom it is =
addressed.
> It may contain information that is privileged and confidential. Its =
content
> does not constitute a formal commitment by Lombard Odier & Cie or any =
of
> its branches or affiliates. If you are not the intended recipient of =
this
> message, kindly notify the sender immediately and destroy this =
message.
> Thank You.
> **********************************************************
> *******


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54742-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Jan 18 02:59:28 2013
Return-Path: <java-user-return-54742-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 7C89DE313
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 18 Jan 2013 02:59:28 +0000 (UTC)
Received: (qmail 69490 invoked by uid 500); 18 Jan 2013 02:59:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69407 invoked by uid 500); 18 Jan 2013 02:59:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69051 invoked by uid 99); 18 Jan 2013 02:59:24 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Jan 2013 02:59:24 +0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [98.138.229.84] (HELO nm34-vm4.bullet.mail.ne1.yahoo.com) (98.138.229.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Jan 2013 02:59:17 +0000
Received: from [98.138.226.177] by nm34.bullet.mail.ne1.yahoo.com with NNFMP; 18 Jan 2013 02:58:56 -0000
Received: from [98.138.89.174] by tm12.bullet.mail.ne1.yahoo.com with NNFMP; 18 Jan 2013 02:58:56 -0000
Received: from [127.0.0.1] by omp1030.mail.ne1.yahoo.com with NNFMP; 18 Jan 2013 02:58:56 -0000
X-Yahoo-Newman-Property: ymail-3
X-Yahoo-Newman-Id: 387142.24945.bm@omp1030.mail.ne1.yahoo.com
Received: (qmail 64019 invoked by uid 60001); 18 Jan 2013 02:58:56 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1358477936; bh=8rMMbTOCVpdzeGa0XgviU3QnDz++zg8CXpuGJG8JnS8=; h=X-YMail-OSG:Received:X-Rocket-MIMEInfo:X-Mailer:References:Message-ID:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type; b=LrdRzLQidnPcGaIBZmFtf9Ehb7pmU7UcTuCXHW+HMwGecj3N1VzrveUF3yblxxv6H7d4BFt4wF1a2Oq9yvJNiuEqeaDGsjraJC5+gGjSF59MuRAmLXg6XBVG/IRBWamykbaZlmFChzMThs+vUYTfrAz9YfAuzhxiuYuUHzdvbNw=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Rocket-MIMEInfo:X-Mailer:References:Message-ID:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=qcgt37xRLlYs+tSEjPqZF84s5No7YcKUIP3fSby3O+pRtKkbA0MXYX0lOqxIUTdjip71aLXLbMpttSHuPse0xkpIaU7LsgbfC4k3ekgOe/EIOPwOTe87T3ejuzYvn7p11/rT786dThOnMIxbmOnKsnY8FAYNIiBrgY+uVoMf/vQ=;
X-YMail-OSG: vM84ga8VM1n0n2NS4EnkBt8PajGFjUX1WizqVhLR0HMBo7i
 VO3MXqyDXvV4frJZYESIfxrQxct9a5g8UcTwZq9MdK6yLlRZ91IZ_0TsDL3M
 vFkPDG9qX4FbCP_scG7rgM2jcq3tofM11tvgIhWLcrLC18xmjxQC685C2hGn
 zin0xgNZ03QwNdo6W5nK3elQT3mkPDP4F3Cc2bUVnTgKiokj7_0P0u_iMdJd
 XHMbqnky0xPBwi75Y4gd_PwuwkeblPrvcImJEwM8ZoKQpOMpc2krD0hQuEeM
 8YJOaVpARefC7CB8z2Fy.JRArFTsUvwuL2JZ3hG_lY9yHwbC_Eg1LSu5wli0
 0Q6pXdvXe2cvIlzhv1S5wxWm85.P0Fv61um9JxIu1NBagLagbN_v9BoVa6Ev
 s4UmON0Ktr1zMSy6fZNoyuKRz7uZCn7hTtjnpiDNuHm4TxL8DuO4xhwGNjQx
 M8tBfaWlep_4gB5t2kIFd2F4b97P3FzTFOU76U5b.UZSBYuuQzZ.mRkStPsf
 R_K4Xlv0w95rl.Lu1Ao_oWtA9AYOxm0tcMvlMhz1F2F12aUDVjRHKE079GMz
 4.W1_60ialPFSWBAPWgT0GK6q5b8BdQuBM2ClYBXjKoRL0cj3HOdATEyUm.P
 qPUnBsmPbUyRB3ZgmaiowUR_JJnOAN0RvJ7j6I.CHHH5DWfbzIQ--
Received: from [24.90.73.159] by web126004.mail.ne1.yahoo.com via HTTP; Thu, 17 Jan 2013 18:58:55 PST
X-Rocket-MIMEInfo: 001.001,SGksCgpNYXliZcKgaHR0cHM6Ly9naXRodWIuY29tL3NlbWF0ZXh0L0FjdGlvbkdlbmVyYXRvciBjb3VsZCBiZSBvZiBoZWxwPwpXZSB1c2UgaXQgdG8gcHJvZHVjZSBxdWVyeSBsb2FkIGZvciBTb2xyIGFuZCBFbGFzdGljU2VhcmNoIGFuZCB0aGUgd2hvbGUgdGhpbmcgaXMgZXh0ZW5zaWJsZSwgc28geW91IGNvdWxkIGVhc2lseSBhZGQgc3VwcG9ydCBmb3IgdGFsa2luZyBkaXJlY3RseSB0byBMdWNlbmUuCgpPaCwgYW5kIHRoZXJlIGlzIHRoZSBiZW5jaG1hcmsgaW4gTHVjZW5lOsKgaHR0cDovL2x1Y2VuZS4BMAEBAQE-
X-Mailer: YahooMailWebService/0.8.130.494
References: <CAD0cWeXm0rfoc02f7TCHXLzGoU6y6gNxhYMVeSESX9LGMrA+BQ@mail.gmail.com>
Message-ID: <1358477935.63908.YahooMailNeo@web126004.mail.ne1.yahoo.com>
Date: Thu, 17 Jan 2013 18:58:55 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Reply-To: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Any benchmark corps to evaluate performance of specified query?
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
In-Reply-To: <CAD0cWeXm0rfoc02f7TCHXLzGoU6y6gNxhYMVeSESX9LGMrA+BQ@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="1688457910-2096298937-1358477935=:63908"
X-Virus-Checked: Checked by ClamAV on apache.org

--1688457910-2096298937-1358477935=:63908
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable

Hi,=0A=0AMaybe=A0https://github.com/sematext/ActionGenerator could be of he=
lp?=0AWe use it to produce query load for Solr and ElasticSearch and the wh=
ole thing is extensible, so you could easily add support for talking direct=
ly to Lucene.=0A=0AOh, and there is the benchmark in Lucene:=A0http://lucen=
e.apache.org/core/4_0_0/benchmark/index.html=0A=0AOtis=0A----=0A=0APerforma=
nce Monitoring for Solr / ElasticSearch / HBase - http://sematext.com/spm=
=A0=0A=0A=0A=0A>________________________________=0A> From: lukai <lukai1984=
@gmail.com>=0A>To: java-user@lucene.apache.org =0A>Sent: Wednesday, January=
 16, 2013 2:19 PM=0A>Subject: Any benchmark corps to evaluate performance o=
f specified query?=0A> =0A>As the title, do we have any benchmark corps to =
test performance of a new=0A>query implementation? like 10k docs, or 1M doc=
s?=0A>=0A>Thanks,=0A>=0A>=0A>
--1688457910-2096298937-1358477935=:63908--

From java-user-return-54743-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Jan 18 08:44:45 2013
Return-Path: <java-user-return-54743-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 04460E1ED
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 18 Jan 2013 08:44:45 +0000 (UTC)
Received: (qmail 87610 invoked by uid 500); 18 Jan 2013 08:44:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87373 invoked by uid 500); 18 Jan 2013 08:44:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87253 invoked by uid 99); 18 Jan 2013 08:44:27 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Jan 2013 08:44:27 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of m.conrad@iterend.com designates 209.85.210.170 as permitted sender)
Received: from [209.85.210.170] (HELO mail-ia0-f170.google.com) (209.85.210.170)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Jan 2013 08:44:21 +0000
Received: by mail-ia0-f170.google.com with SMTP id k20so1198455iak.1
        for <java-user@lucene.apache.org>; Fri, 18 Jan 2013 00:44:00 -0800 (PST)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=x-received:dkim-signature:mime-version:x-received:reply-to
         :in-reply-to:references:date:message-id:subject:from:to:content-type
         :x-gm-message-state;
        bh=Vi25nh/X1MT8Mx2hCDM9svTfi/AA6sj2iOBwQLKRQWQ=;
        b=l2OO/JazrxusL6dwGhJ45h+zUQmHHzEVoDpoODw5I2khGAlJS+lFg4FtYhd7XwHfdn
         Iu/Njx2+77pGmPDOUYaGJX6OMVRF/ttOhCzkMt5l+ISxR6PWRCKBtZZOi6mExZTouz4M
         OnWkNXs0mn2gh7gmLmK8yXucfCRn1k7uWQY/m1tFYrSTPbukAb+yItcQZ0XV5dBuUE9s
         oE3U9TFBFZVqRJRp1vrgDDpssc7YqIOzYFfpdhsoV8WRgo2TVMkBC78Zn0Qbv2579UZl
         OhOCISJL++/c82DoedLunddU+SH8+DVr94geniNSjkZUfu8hXMn5XI8nRofdOusE/ONk
         zgTA==
X-Received: by 10.50.217.129 with SMTP id oy1mr1471922igc.26.1358498640601;
        Fri, 18 Jan 2013 00:44:00 -0800 (PST)
Received: from mail-ie0-f171.google.com (mail-ie0-f171.google.com [209.85.223.171])
        by mx.google.com with ESMTPS id ui8sm1389939igb.14.2013.01.18.00.44.00
        (version=TLSv1 cipher=ECDHE-RSA-RC4-SHA bits=128/128);
        Fri, 18 Jan 2013 00:44:00 -0800 (PST)
Received: by mail-ie0-f171.google.com with SMTP id 9so2160961iec.30
        for <java-user@lucene.apache.org>; Fri, 18 Jan 2013 00:43:59 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=trendiction.com; s=googletrendictioncom;
        h=mime-version:x-received:reply-to:in-reply-to:references:date
         :message-id:subject:from:to:content-type;
        bh=Vi25nh/X1MT8Mx2hCDM9svTfi/AA6sj2iOBwQLKRQWQ=;
        b=tg9RcbAAtfe7MQsnHfDvfWCQ4MNbUAfatThQ3gjDO+7FlrnXzKi68l0/bE2K7GJpQJ
         0RENOw05QbatL3/KN9mIANmUMAxFq+4jVeJFCRj3fqjukaw4qxOB11gtEKtNegZ8RYLu
         Hr2nhxFIrytklHS/FuvemgkCsEqS5xe/pVz9Q=
MIME-Version: 1.0
X-Received: by 10.50.222.226 with SMTP id qp2mr1424598igc.103.1358498639788;
 Fri, 18 Jan 2013 00:43:59 -0800 (PST)
Reply-To: michel.conrad@trendiction.com
Received: by 10.42.93.17 with HTTP; Fri, 18 Jan 2013 00:43:59 -0800 (PST)
In-Reply-To: <9E856D021BD34B4A93BD54551D6CD3E7@JackKrupansky>
References: <CAH0sEYhppVFLqM7xnp2s0USsOz-Dw1C0LX+Y-EPHZ4-TtcshiQ@mail.gmail.com>
	<22F966A4B74E418DB0F819E566407857@JackKrupansky>
	<CAH0sEYhBP+s9_cqMRx5V_j-ZvSvB90+rUMr_RHmHpcODqnoVPA@mail.gmail.com>
	<9E856D021BD34B4A93BD54551D6CD3E7@JackKrupansky>
Date: Fri, 18 Jan 2013 09:43:59 +0100
Message-ID: <CAH0sEYgk+zR7poM+tprPLd2eho4ng1LfiO-kosEiBUduRg1dzQ@mail.gmail.com>
Subject: Re: Combine two BooleanQueries by a SpanNearQuery.
From: Michel Conrad <michel.conrad@trendiction.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Gm-Message-State: ALoCoQmah18D4uErFNkRjkSwvYkOKCyPTX+ItEjEdMoMN+R48Cjfow/fcZq/XDGD/n3n5G+OLYPy
X-Virus-Checked: Checked by ClamAV on apache.org

I created a feature request:
https://issues.apache.org/jira/browse/LUCENE-4696

Thanks for your help,
Michel

On Thu, Jan 17, 2013 at 6:33 PM, Jack Krupansky <jack@basetechnology.com> wrote:
> Currently there isn't. SpanNearQuery can take only other SpanQuery objects,
> which includes other spans, span terms, and span wrapped multi-term queries
> (e.g., wildcard, fuzzy query), but not Boolean queries.
>
> But it does sound like a good feature request.
>
> There is SpanNotQuery, so you can exclude terms from a span.
>
>
> -- Jack Krupansky
>
> -----Original Message----- From: Michel Conrad
> Sent: Thursday, January 17, 2013 12:14 PM
> To: java-user@lucene.apache.org
> Subject: Re: Combine two BooleanQueries by a SpanNearQuery.
>
>
> The problem I would like to solve is to have two queries that I will
> get from the query parser (this could include wildcardqueries and
> phrasequeries).
> Both of these queries would have to match the document and as an
> additional restriction I would like to add that a matching term from
> the first query
> is near a matching term from the second query.
>
> So that you can search for instance for matching documents with
> in your first query 'apple AND NOT computer'
> and in your second 'monkey'
> with a slop of 10 between the two queries, then it would be equivalent
> to '"apple monkey"~10 AND NOT computer'.
>
> I was wondering if there is a method to combine more complicated
> queries in a similar way. (Some kind of generic solution)
>
> Thanks for your help,
>
> Michel
>
> On Thu, Jan 17, 2013 at 5:14 PM, Jack Krupansky <jack@basetechnology.com>
> wrote:
>>
>> You need to express the "boolean" query solely in terms of SpanOrQuery and
>> SpanNearQuery. If you can't, ... then it probably can't be done, but you
>> should be able to.
>>
>> How about starting with a plan English description of the problem you are
>> trying to solve?
>>
>> -- Jack Krupansky
>>
>> -----Original Message----- From: Michel Conrad
>> Sent: Thursday, January 17, 2013 11:01 AM
>> To: java-user@lucene.apache.org
>> Subject: Combine two BooleanQueries by a SpanNearQuery.
>>
>>
>> Hi,
>>
>> I am looking to get a combination of multiple subqueries.
>>
>> What I want to do is to have two queries which have to be near one to
>> another.
>>
>> As an example:
>> Query1: (A AND (B OR C))
>> Query2: D
>>
>> Then I want to use something like a SpanNearQuery to combine both (slop
>> 5):
>> Both would then have to match and D should be within slop 5 to A, B or C.
>>
>> So my question is if there is a query that combines two BooleanQuery
>> trees into a SpanNearQuery.
>> It would have to take the terms that match Query 1 and the terms that
>> match Query 2, and look if there is a combination within the required
>> slop.
>>
>> Can I rewrite the BooleanQuery after parsing the query as a
>> MultiTermQuery, than wrap these in SpanMultiTermQueryWrapper, which
>> can be combined by the SpanNearQuery?
>>
>> Best regards,
>> Michel
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54744-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Jan 18 11:13:50 2013
Return-Path: <java-user-return-54744-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 2B60AE4F2
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 18 Jan 2013 11:13:50 +0000 (UTC)
Received: (qmail 93579 invoked by uid 500); 18 Jan 2013 11:13:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93375 invoked by uid 500); 18 Jan 2013 11:13:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93348 invoked by uid 99); 18 Jan 2013 11:13:46 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Jan 2013 11:13:46 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ian.lea@gmail.com designates 74.125.82.172 as permitted sender)
Received: from [74.125.82.172] (HELO mail-we0-f172.google.com) (74.125.82.172)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Jan 2013 11:13:39 +0000
Received: by mail-we0-f172.google.com with SMTP id r3so801037wey.17
        for <java-user@lucene.apache.org>; Fri, 18 Jan 2013 03:13:19 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=x-received:mime-version:in-reply-to:references:from:date:message-id
         :subject:to:content-type;
        bh=L3P40q+1JqGByGS8izmaSt9gSE4LmETKRarLRtIfaq8=;
        b=wgSqvGqbt+mEvunuRTM3mPzZgBxCdmnPzP9w27R4L4S8ipa/CyPeoFUgZOdtzzoSUD
         My+4IdQVKf2KF4DdYB4DgZ5SOwI6kWbuRSqpubHJm1KIrPu9tQSvW/FizzWh6eB8OkbY
         MW/sgnAoy/w+6wXdJxrmP1Vz5qmrmEbhPDZ8AfFFd+4hEfL/9TBGjG5WULICrI0atOab
         ZhZM5dOQoyM1RbmjJeF2shDWAnv2KajJqSmD8YJ8QEjRHRwJmHANO2YyUye18qihr3sY
         AqMgfT5YMKwlPj/L9s3xZ3XWQnaL9i8ZbaafsmbqudXa4i7GkwQrxPuN8YhGNNrkM+oN
         D4SA==
X-Received: by 10.194.172.228 with SMTP id bf4mr13511819wjc.38.1358507598988;
 Fri, 18 Jan 2013 03:13:18 -0800 (PST)
MIME-Version: 1.0
Received: by 10.194.57.11 with HTTP; Fri, 18 Jan 2013 03:12:58 -0800 (PST)
In-Reply-To: <CAOEyTYRRu_Dch4mWdibbVo6rav=5puW7Jk7tA-ZShePrbWyxew@mail.gmail.com>
References: <CAOEyTYS_61qBM8hP_fv0OQC4xACMYYOMbf4NLJkq2SiEKYNBug@mail.gmail.com>
 <CAEY5pxXsj8kXPTBoGpYP_vWPHOTSwYm18aRiYQTky_zK1CFFww@mail.gmail.com>
 <CAOEyTYSWvsFsGvpBE6pZ7XJXj5ypTDUf8rE9jqGWXJzLoptzkA@mail.gmail.com>
 <CAOdYfZVb4tO=Fy=x6tH_NgLT8jR7wV8ZV0hoSDQnTa2nZopDGg@mail.gmail.com>
 <CAOEyTYSFgnp+FfniGW18rcB8o5b1HXDYjGEdqpb+QHb4ac_89g@mail.gmail.com>
 <CAEY5pxUN3u+CEQKhasf8tOumW1fiYQSwE5D=mfm462-KGGPCgQ@mail.gmail.com> <CAOEyTYRRu_Dch4mWdibbVo6rav=5puW7Jk7tA-ZShePrbWyxew@mail.gmail.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Fri, 18 Jan 2013 11:12:58 +0000
Message-ID: <CAEY5pxVp5NMNEMdDvgAh-DynX0-+SMs6hywqbqZGxm9DKQyNHg@mail.gmail.com>
Subject: Re: Document term vectors in Lucene 4
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

To get stats from the whole index I think you need to come at this
from a different direction.  See the 4.0 migration guide for some
details.

With a variation on your code and 2 docs

doc1: foobar qux quote
doc2: foobar qux qux quorum

this code snippet

	Fields fields = MultiFields.getFields(rdr);
	Terms terms = fields.terms("body");
	TermsEnum te = terms.iterator(null);
	while (te.next() != null) {
	    String tt = te.term().utf8ToString();
	    System.out.printf("%s totalFreq()=%s, docFreq=%s\n",
			      tt,
			      te.totalTermFreq(),
			      te.docFreq());
	}

displays

foobar totalFreq()=2, docFreq=2
quorum totalFreq()=1, docFreq=1
quote totalFreq()=1, docFreq=1
qux totalFreq()=3, docFreq=2

This is with a standard IndexReader as returned by
DirectoryReader.open(dir), on a RAMDirectory with 2 docs so there
won't be many segments.  But from my reading of the migration guide
you shouldn't need to use the Composite reader.


Hope this helps - we are getting outside my area of expertise so don't
trust anything I say.


--
Ian.

On Thu, Jan 17, 2013 at 3:11 PM, Jon Stewart
<jon@lightboxtechnologies.com> wrote:
> D'oh!!!! Thanks!
>
> Does TermsEnum.totalTermFreq() return the per-doc frequencies? It
> looks like it empirically, but the documentation refers to corpus
> usage, not document.field usage.
>
> Jon
>
> On Thu, Jan 17, 2013 at 10:00 AM, Ian Lea <ian.lea@gmail.com> wrote:
>> typo time.  You need doc2.add(...) not 2 doc.add(...) statements.
>>
>>
>> --
>> Ian.
>>
>>
>> On Thu, Jan 17, 2013 at 2:49 PM, Jon Stewart
>> <jon@lightboxtechnologies.com> wrote:
>>> On Thu, Jan 17, 2013 at 9:08 AM, Robert Muir <rcmuir@gmail.com> wrote:
>>>> Which statistics in particular (which methods)?
>>>
>>> I'd like to know the frequency of each term in each document. Those
>>> term counts for the most frequent terms in the corpus will make it
>>> into the document vectors for clustering.
>>>
>>> Looking at Terms and TermsEnum, I'm actually somewhat baffled about
>>> how to do this. Iterating over the TermsEnums in a Terms retrieved by
>>> IndexReader.getTermVector() will tell me about the presence of a term
>>> within a document, but I don't see a simple "count" or "freq" method
>>> in TermsEnum--the methods there look like corpus statistics.
>>>
>>> Based on Ian's reply, I created the following one-file test program.
>>> The results I get are weird: I get a term vector back for the first
>>> document, but not for the second.
>>>
>>> Output:
>>> doc 0 had term 'baz'
>>> doc 0 had term 'foobar'
>>> doc 0 had term 'gibberish'
>>> doc 0 had 3 terms
>>> doc 1 had no term vector for body
>>>
>>> Thanks again for the responses and assistance.
>>>
>>>
>>> Jon
>>>
>>>
>>> import java.io.File;
>>> import java.io.IOException;
>>>
>>> import org.apache.lucene.analysis.standard.StandardAnalyzer;
>>>
>>> import org.apache.lucene.index.IndexWriter;
>>> import org.apache.lucene.index.IndexWriterConfig.OpenMode;
>>> import org.apache.lucene.index.IndexWriterConfig;
>>> import org.apache.lucene.index.FieldInfo.IndexOptions;
>>> import org.apache.lucene.index.CorruptIndexException;
>>> import org.apache.lucene.index.AtomicReader;
>>> import org.apache.lucene.index.IndexableField;
>>> import org.apache.lucene.index.Terms;
>>> import org.apache.lucene.index.TermsEnum;
>>> import org.apache.lucene.index.SlowCompositeReaderWrapper;
>>> import org.apache.lucene.index.DirectoryReader;
>>>
>>> import org.apache.lucene.store.Directory;
>>> import org.apache.lucene.store.FSDirectory;
>>>
>>> import org.apache.lucene.util.BytesRef;
>>> import org.apache.lucene.util.Version;
>>>
>>> import org.apache.lucene.document.Document;
>>> import org.apache.lucene.document.Field;
>>> import org.apache.lucene.document.StringField;
>>> import org.apache.lucene.document.FieldType;
>>>
>>> public class LuceneTest {
>>>
>>>   static void createIndex(final String path) throws IOException,
>>> CorruptIndexException {
>>>     final Directory dir = FSDirectory.open(new File(path));
>>>     final StandardAnalyzer analyzer = new StandardAnalyzer(Version.LUCENE_40);
>>>     final IndexWriterConfig iwc = new
>>> IndexWriterConfig(Version.LUCENE_40, analyzer);
>>>     iwc.setOpenMode(OpenMode.CREATE_OR_APPEND);
>>>     iwc.setRAMBufferSizeMB(256.0);
>>>     final IndexWriter writer = new IndexWriter(dir, iwc);
>>>
>>>     final FieldType bodyOptions = new FieldType();
>>>     bodyOptions.setIndexed(true);
>>>     bodyOptions.setIndexOptions(IndexOptions.DOCS_AND_FREQS_AND_POSITIONS_AND_OFFSETS);
>>>     bodyOptions.setStored(true);
>>>     bodyOptions.setStoreTermVectors(true);
>>>     bodyOptions.setTokenized(true);
>>>
>>>     final Document doc = new Document();
>>>     doc.add(new Field("body", "this foobar is gibberish, baz", bodyOptions));
>>>     writer.addDocument(doc);
>>>
>>>     final Document doc2 = new Document();
>>>     doc.add(new Field("body", "I don't know what to tell you, qux.
>>> Some foobar is just fubar.", bodyOptions));
>>>     writer.addDocument(doc2);
>>>
>>>     writer.close();
>>>   }
>>>
>>>   static void readIndex(final String path) throws IOException,
>>> CorruptIndexException {
>>>     final DirectoryReader dirReader =
>>> DirectoryReader.open(FSDirectory.open(new File(path)));
>>>     final SlowCompositeReaderWrapper rdr = new
>>> SlowCompositeReaderWrapper(dirReader);
>>>
>>>     int max = rdr.maxDoc();
>>>
>>>     TermsEnum term = null;
>>>     // iterate docs
>>>     for (int i = 0; i < max; ++i) {
>>>       // get term vector for body field
>>>       final Terms terms = rdr.getTermVector(i, "body");
>>>       if (terms != null) {
>>>         // count terms in doc
>>>         int numTerms = 0;
>>>         term = terms.iterator(term);
>>>         while (term.next() != null) {
>>>           System.out.println("doc " + i + " had term '" +
>>> term.term().utf8ToString() + "'");
>>>           ++numTerms;
>>>
>>>           // would like to record doc term frequencies here, i.e.,
>>> counts[i][term.term()] = term.freq()
>>>         }
>>>         System.out.println("doc " + i + " had " + numTerms + " terms");
>>>       }
>>>       else {
>>>         System.err.println("doc " + i + " had no term vector for body");
>>>       }
>>>     }
>>>   }
>>>
>>>   public static void main(String[] args) throws IOException,
>>> InterruptedException, CorruptIndexException {
>>>     final String path = args[0];
>>>     createIndex(path);
>>>     readIndex(path);
>>>   }
>>> }
>>>
>>> --
>>> Jon Stewart, Principal
>>> (646) 719-0317 | jon@lightboxtechnologies.com | Arlington, VA
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>
>
> --
> Jon Stewart, Principal
> (646) 719-0317 | jon@lightboxtechnologies.com | Arlington, VA
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54745-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Jan 18 13:29:26 2013
Return-Path: <java-user-return-54745-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id C8F67E383
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 18 Jan 2013 13:29:26 +0000 (UTC)
Received: (qmail 38405 invoked by uid 500); 18 Jan 2013 13:29:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37754 invoked by uid 500); 18 Jan 2013 13:29:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37724 invoked by uid 99); 18 Jan 2013 13:29:17 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Jan 2013 13:29:17 +0000
X-ASF-Spam-Status: No, hits=-0.1 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jerome_lanneluc@fr.ibm.com designates 195.75.94.106 as permitted sender)
Received: from [195.75.94.106] (HELO e06smtp10.uk.ibm.com) (195.75.94.106)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Jan 2013 13:29:08 +0000
Received: from /spool/local
	by e06smtp10.uk.ibm.com with IBM ESMTP SMTP Gateway: Authorized Use Only! Violators will be prosecuted
	for <java-user@lucene.apache.org> from <jerome_lanneluc@fr.ibm.com>;
	Fri, 18 Jan 2013 13:28:13 -0000
Received: from b06cxnps4075.portsmouth.uk.ibm.com (9.149.109.197)
	by e06smtp10.uk.ibm.com (192.168.101.140) with IBM ESMTP SMTP Gateway: Authorized Use Only! Violators will be prosecuted;
	Fri, 18 Jan 2013 13:28:03 -0000
Received: from d06av09.portsmouth.uk.ibm.com (d06av09.portsmouth.uk.ibm.com [9.149.37.250])
	by b06cxnps4075.portsmouth.uk.ibm.com (8.13.8/8.13.8/NCO v10.0) with ESMTP id r0IDSRDm17498242
	for <java-user@lucene.apache.org>; Fri, 18 Jan 2013 13:28:27 GMT
Received: from d06av09.portsmouth.uk.ibm.com (loopback [127.0.0.1])
	by d06av09.portsmouth.uk.ibm.com (8.14.4/8.13.1/NCO v10.0 AVout) with ESMTP id r0IDSZhg013087
	for <java-user@lucene.apache.org>; Fri, 18 Jan 2013 06:28:35 -0700
Received: from d06ml370.portsmouth.uk.ibm.com (d06ml370.portsmouth.uk.ibm.com [9.149.76.152])
	by d06av09.portsmouth.uk.ibm.com (8.14.4/8.13.1/NCO v10.0 AVin) with ESMTP id r0IDSZSh013084
	for <java-user@lucene.apache.org>; Fri, 18 Jan 2013 06:28:35 -0700
X-Disclaimed: 13542
To: java-user@lucene.apache.org
MIME-Version: 1.0
Subject: Japanese analyzer
X-KeepSent: FC862722:87C7F4A2-C1257AF7:0049E4AF;
 type=4; name=$KeepSent
X-Mailer: Lotus Notes Release 8.5.3FP2 SHF22 July 19, 2012
From: Jerome Lanneluc <jerome_lanneluc@fr.ibm.com>
Message-ID: <OFFC862722.87C7F4A2-ONC1257AF7.0049E4AF-C1257AF7.0049FC40@fr.ibm.com>
Date: Fri, 18 Jan 2013 14:28:26 +0100
X-MIMETrack: Serialize by Router on D06ML370/06/M/IBM(Release 8.5.3 ZX853HP5|January 12, 2012) at
 18/01/2013 14:28:26
Content-Type: multipart/mixed; boundary="=_mixed 0049FBD6C1257AF7_="
x-cbid: 13011813-4966-0000-0000-000004A81C93
X-Virus-Checked: Checked by ClamAV on apache.org

--=_mixed 0049FBD6C1257AF7_=
Content-Type: multipart/alternative; boundary="=_alternative 0049FBD6C1257AF7_="


--=_alternative 0049FBD6C1257AF7_=
Content-Type: text/plain; charset="GB2312"
Content-Transfer-Encoding: base64

SSBoYXZlIHNlYXJjaGVkIHRoaXMgbWFpbGluZyBsaXN0IGJ1dCBJIGNvdWxkIG5vdCBmaW5kIHRo
ZSBhbnN3ZXIgdG8gdGhlIA0KZm9sbG93aW5nIHByb2JsZW0uDQoNCkknbSB1c2luZyB0aGUgMy42
LjEgSmFwYW5lc2UgYW5hbHl6ZXIgYW5kIGl0IHNlZW1zIHRoYXQgd2hlbiB0b2tlbml6aW5nIA0K
c29tZSBKYXBhbmVzZSB3b3Jkcywgc29tZSBjaGFyYWN0ZXJzIGFyZSBpZ25vcmVkIGFuZCB0aGV5
IGFyZSBub3QgcmV0dXJuZWQgDQppbiB0aGUgdG9rZW5zLg0KDQpJbiB0aGUgYXR0YWNoZWQgZXhh
bXBsZSwgDQp0aGUgb3V0cHV0IGlzOg0KDQpby70gyNWxvsjLIF0NCltdDQoNCk5vdGUgdGhlIGVt
cHR5IHRva2VuIHNldCBvZiB0aGUgc2Vjb25kIHNhbXBsZS4gSSBjb3VsZCBub3QgZmlndXJlIG91
dCBpZiANCkknbSBkb2luZyBzb21ldGhpbmcgd3JvbmcsIG9yIGlmIHRoaXMgaXMgYSBidWcgaW4g
dGhlIEphcGFuZXNlIGFuYWx5emVyLg0KDQpUaGFua3MsDQpKZXJvbWUNCg0KDQoNClNhdWYgaW5k
aWNhdGlvbiBjb250cmFpcmUgY2ktZGVzc3VzOi8gVW5sZXNzIHN0YXRlZCBvdGhlcndpc2UgYWJv
dmU6DQpDb21wYWduaWUgSUJNIEZyYW5jZQ0KU2moqGdlIFNvY2lhbCA6IDE3IGF2ZW51ZSBkZSBs
J0V1cm9wZSwgOTIyNzUgQm9pcy1Db2xvbWJlcyBDZWRleA0KUkNTIE5hbnRlcnJlIDU1MiAxMTgg
NDY1DQpGb3JtZSBTb2NpYWxlIDogUy5BLlMuDQpDYXBpdGFsIFNvY2lhbCA6IDY1My4yNDIuMzA2
LDIwIIANClNJUkVOL1NJUkVUIDogNTUyIDExOCA0NjUgMDM2NDQgLSBDb2RlIE5BRiA2MjAyQSAN
Cg==
--=_alternative 0049FBD6C1257AF7_=
Content-Type: text/html; charset="GB2312"
Content-Transfer-Encoding: base64

PGZvbnQgc2l6ZT0yIGZhY2U9InNhbnMtc2VyaWYiPkkgaGF2ZSBzZWFyY2hlZCB0aGlzIG1haWxp
bmcgbGlzdCBidXQgSQ0KY291bGQgbm90IGZpbmQgdGhlIGFuc3dlciB0byB0aGUgZm9sbG93aW5n
IHByb2JsZW0uPC9mb250Pg0KPGJyPg0KPGJyPjxmb250IHNpemU9MiBmYWNlPSJzYW5zLXNlcmlm
Ij5JJ20gdXNpbmcgdGhlIDMuNi4xIEphcGFuZXNlIGFuYWx5emVyDQphbmQgaXQgc2VlbXMgdGhh
dCB3aGVuIHRva2VuaXppbmcgc29tZSBKYXBhbmVzZSB3b3Jkcywgc29tZSBjaGFyYWN0ZXJzDQph
cmUgaWdub3JlZCBhbmQgdGhleSBhcmUgbm90IHJldHVybmVkIGluIHRoZSB0b2tlbnMuPC9mb250
Pg0KPGJyPg0KPGJyPjxmb250IHNpemU9MiBmYWNlPSJzYW5zLXNlcmlmIj5JbiB0aGUgYXR0YWNo
ZWQgZXhhbXBsZSwgPC9mb250Pg0KPGJyPjxmb250IHNpemU9MiBmYWNlPSJzYW5zLXNlcmlmIj50
aGUgb3V0cHV0IGlzOjwvZm9udD4NCjxicj4NCjxicj48Zm9udCBzaXplPTEgZmFjZT0iVGFob21h
Ij5by70gyNWxvsjLIF08L2ZvbnQ+DQo8YnI+PGZvbnQgc2l6ZT0xIGZhY2U9IlRhaG9tYSI+W108
L2ZvbnQ+DQo8YnI+DQo8YnI+PGZvbnQgc2l6ZT0yIGZhY2U9InNhbnMtc2VyaWYiPk5vdGUgdGhl
IGVtcHR5IHRva2VuIHNldCBvZiB0aGUgc2Vjb25kDQpzYW1wbGUuIEkgY291bGQgbm90IGZpZ3Vy
ZSBvdXQgaWYgSSdtIGRvaW5nIHNvbWV0aGluZyB3cm9uZywgb3IgaWYgdGhpcw0KaXMgYSBidWcg
aW4gdGhlIEphcGFuZXNlIGFuYWx5emVyLjwvZm9udD4NCjxicj4NCjxicj48Zm9udCBzaXplPTIg
ZmFjZT0ic2Fucy1zZXJpZiI+VGhhbmtzLDwvZm9udD4NCjxicj48Zm9udCBzaXplPTIgZmFjZT0i
c2Fucy1zZXJpZiI+SmVyb21lPC9mb250Pg0KPGJyPjxmb250IHNpemU9MiBmYWNlPSJzYW5zLXNl
cmlmIj48YnI+DQo8YnI+DQo8YnI+DQpTYXVmIGluZGljYXRpb24gY29udHJhaXJlIGNpLWRlc3N1
czovIFVubGVzcyBzdGF0ZWQgb3RoZXJ3aXNlIGFib3ZlOjxicj4NCkNvbXBhZ25pZSBJQk0gRnJh
bmNlPGJyPg0KU2moqGdlIFNvY2lhbCA6IDE3IGF2ZW51ZSBkZSBsJ0V1cm9wZSwgOTIyNzUgQm9p
cy1Db2xvbWJlcyBDZWRleDxicj4NClJDUyBOYW50ZXJyZSA1NTIgMTE4IDQ2NTxicj4NCkZvcm1l
IFNvY2lhbGUgOiBTLkEuUy48YnI+DQpDYXBpdGFsIFNvY2lhbCA6IDY1My4yNDIuMzA2LDIwIIA8
YnI+DQpTSVJFTi9TSVJFVCA6IDU1MiAxMTggNDY1IDAzNjQ0IC0gQ29kZSBOQUYgNjIwMkEgPC9m
b250Pg0K
--=_alternative 0049FBD6C1257AF7_=--


--=_mixed 0049FBD6C1257AF7_=
Content-Type: text/plain; charset=us-ascii


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
--=_mixed 0049FBD6C1257AF7_=--


From java-user-return-54746-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Jan 18 13:33:38 2013
Return-Path: <java-user-return-54746-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 99C75E467
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 18 Jan 2013 13:33:38 +0000 (UTC)
Received: (qmail 48315 invoked by uid 500); 18 Jan 2013 13:33:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47827 invoked by uid 500); 18 Jan 2013 13:33:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47801 invoked by uid 99); 18 Jan 2013 13:33:35 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Jan 2013 13:33:35 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ping.swapnil@gmail.com designates 209.85.215.41 as permitted sender)
Received: from [209.85.215.41] (HELO mail-la0-f41.google.com) (209.85.215.41)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Jan 2013 13:33:27 +0000
Received: by mail-la0-f41.google.com with SMTP id em20so3881791lab.28
        for <java-user@lucene.apache.org>; Fri, 18 Jan 2013 05:33:07 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:x-received:in-reply-to:references:date:message-id
         :subject:from:to:content-type;
        bh=8tbYPW4IWgpyusF7ZC7Ba+/zmskarMzOPX3CJt63PcM=;
        b=iY4YrxcUIowllCoNY8G3HZlN4jGtXTfE1whwT4hb9hw2ZMYcyIxJ3Re1kyvDKeNs0S
         OX2HhHWMDgLffInOvQ4mPe7LZ1YzMP0aJJZMjliGfbfwoIViWwn4eHN7gdEdWAzPf9eM
         HB9JrtNiuTAIPcCTc3tF4A6eY4+nc9GEy1Dan4k/lo+8mCpX4+gbIIjXzlBOJA+nHKLW
         qwFh5F/8ryWIuYnmmBfFdQzJPwD2y2ZhUZBQySRmZFFgcyTGh6dtwev6/uZj+HgOADZL
         AIch9kJ8Sj7u2g/F08mF4czhG/Ru+MxwHHlAz1N2xbH+Kr1r5paDTRzK0By5/gFtE1cJ
         NFwA==
MIME-Version: 1.0
X-Received: by 10.112.13.162 with SMTP id i2mr3658766lbc.76.1358515987329;
 Fri, 18 Jan 2013 05:33:07 -0800 (PST)
Received: by 10.112.147.231 with HTTP; Fri, 18 Jan 2013 05:33:07 -0800 (PST)
In-Reply-To: <OFFC862722.87C7F4A2-ONC1257AF7.0049E4AF-C1257AF7.0049FC40@fr.ibm.com>
References: <OFFC862722.87C7F4A2-ONC1257AF7.0049E4AF-C1257AF7.0049FC40@fr.ibm.com>
Date: Fri, 18 Jan 2013 19:03:07 +0530
Message-ID: <CALR91oRD3bABhEZuiGT-2ME2ZCqDMm-xE21p=n14-1DPHv19rw@mail.gmail.com>
Subject: Re: Japanese analyzer
From: Swapnil Patil <ping.swapnil@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=f46d0401fa5dd8b49204d3902625
X-Virus-Checked: Checked by ClamAV on apache.org

--f46d0401fa5dd8b49204d3902625
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

Hi,

I just translated these words, using google translate look like   Japanese
I [
Can you check if these words are  in your stopword file.
if these words exits in your stop word file than you will not get them in
token stream.

-Swapnil

On Fri, Jan 18, 2013 at 6:58 PM, Jerome Lanneluc <jerome_lanneluc@fr.ibm.co=
m
> wrote:

> [=E7=A7=81 =E6=97=A5=E6=9C=AC=E4=BA=BA

--f46d0401fa5dd8b49204d3902625--

From java-user-return-54747-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Jan 18 13:47:50 2013
Return-Path: <java-user-return-54747-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 6630DE4A2
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 18 Jan 2013 13:47:50 +0000 (UTC)
Received: (qmail 91352 invoked by uid 500); 18 Jan 2013 13:47:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91314 invoked by uid 500); 18 Jan 2013 13:47:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91292 invoked by uid 99); 18 Jan 2013 13:47:47 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Jan 2013 13:47:47 +0000
X-ASF-Spam-Status: No, hits=-0.1 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of jerome_lanneluc@fr.ibm.com designates 195.75.94.112 as permitted sender)
Received: from [195.75.94.112] (HELO e06smtp16.uk.ibm.com) (195.75.94.112)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Jan 2013 13:47:36 +0000
Received: from /spool/local
	by e06smtp16.uk.ibm.com with IBM ESMTP SMTP Gateway: Authorized Use Only! Violators will be prosecuted
	for <java-user@lucene.apache.org> from <jerome_lanneluc@fr.ibm.com>;
	Fri, 18 Jan 2013 13:46:00 -0000
Received: from b06cxnps3074.portsmouth.uk.ibm.com (9.149.109.194)
	by e06smtp16.uk.ibm.com (192.168.101.146) with IBM ESMTP SMTP Gateway: Authorized Use Only! Violators will be prosecuted;
	Fri, 18 Jan 2013 13:45:53 -0000
Received: from d06av01.portsmouth.uk.ibm.com (d06av01.portsmouth.uk.ibm.com [9.149.37.212])
	by b06cxnps3074.portsmouth.uk.ibm.com (8.13.8/8.13.8/NCO v10.0) with ESMTP id r0IDkrVC30670964
	for <java-user@lucene.apache.org>; Fri, 18 Jan 2013 13:46:53 GMT
Received: from d06av01.portsmouth.uk.ibm.com (loopback [127.0.0.1])
	by d06av01.portsmouth.uk.ibm.com (8.14.4/8.13.1/NCO v10.0 AVout) with ESMTP id r0IDl1jR008519
	for <java-user@lucene.apache.org>; Fri, 18 Jan 2013 06:47:01 -0700
Received: from d06ml370.portsmouth.uk.ibm.com (d06ml370.portsmouth.uk.ibm.com [9.149.76.152])
	by d06av01.portsmouth.uk.ibm.com (8.14.4/8.13.1/NCO v10.0 AVin) with ESMTP id r0IDl1x7008516
	for <java-user@lucene.apache.org>; Fri, 18 Jan 2013 06:47:01 -0700
In-Reply-To: <CALR91oRD3bABhEZuiGT-2ME2ZCqDMm-xE21p=n14-1DPHv19rw@mail.gmail.com>
References: <OFFC862722.87C7F4A2-ONC1257AF7.0049E4AF-C1257AF7.0049FC40@fr.ibm.com> <CALR91oRD3bABhEZuiGT-2ME2ZCqDMm-xE21p=n14-1DPHv19rw@mail.gmail.com>
X-Disclaimed: 30094
To: java-user@lucene.apache.org
MIME-Version: 1.0
Subject: Re: Japanese analyzer
X-KeepSent: 029731EF:B83CF820-C1257AF7:004B0C40;
 type=4; name=$KeepSent
X-Mailer: Lotus Notes Release 8.5.3FP2 SHF22 July 19, 2012
From: Jerome Lanneluc <jerome_lanneluc@fr.ibm.com>
Message-ID: <OF029731EF.B83CF820-ONC1257AF7.004B0C40-C1257AF7.004BAC6D@fr.ibm.com>
Date: Fri, 18 Jan 2013 14:46:51 +0100
X-MIMETrack: Serialize by Router on D06ML370/06/M/IBM(Release 8.5.3 ZX853HP5|January 12, 2012) at
 18/01/2013 14:46:52,
	Serialize complete at 18/01/2013 14:46:52
Content-Type: multipart/alternative; boundary="=_alternative 004BAC46C1257AF7_="
x-cbid: 13011813-3548-0000-0000-0000044D6DC1
X-Virus-Checked: Checked by ClamAV on apache.org

--=_alternative 004BAC46C1257AF7_=
Content-Type: text/plain; charset="GB2312"
Content-Transfer-Encoding: base64

VGhhbmtzIGZvciB5b3VyIGFuc3dlci4NCg0KTm8gdGhvc2Ugd29yZHMgYXJlIG5vdCBwYXJ0IG9m
IHRoZSBzdG9wIHdvcmQgZmlsZSAoSSdtIHVzaW5nIHRoZSBvbmUgdGhhdCANCmNvbWVzIHdpdGgg
dGhlIEphcGFuZXNlIGFuYWx5emVyIGluIGx1Y2VuZS1rdXJvbW9qaS0zLjYuMS5qYXIuDQoNCk15
IEphcGFuZXNlIGNvbnRhY3QgdG9sZCBtZSB0aGF0IHRoZSBmaXJzdCBzZW50ZW5jZSBtZWFucyAi
SSBhbSBKYXBhbmVzZSIgDQphbmQgdGhlIHNlY29uZCBvbmUgaXMgYSB1bml0IG9mIGxlbmd0aC4N
Cg0KSmVyb21lDQoNCg0KDQpGcm9tOiAgIFN3YXBuaWwgUGF0aWwgPHBpbmcuc3dhcG5pbEBnbWFp
bC5jb20+DQpUbzogICAgIGphdmEtdXNlckBsdWNlbmUuYXBhY2hlLm9yZywgDQpEYXRlOiAgIDAx
LzE4LzIwMTMgMDI6MzMgUE0NClN1YmplY3Q6ICAgICAgICBSZTogSmFwYW5lc2UgYW5hbHl6ZXIN
Cg0KDQoNCkhpLA0KDQpJIGp1c3QgdHJhbnNsYXRlZCB0aGVzZSB3b3JkcywgdXNpbmcgZ29vZ2xl
IHRyYW5zbGF0ZSBsb29rIGxpa2UgICBKYXBhbmVzZQ0KSSBbDQpDYW4geW91IGNoZWNrIGlmIHRo
ZXNlIHdvcmRzIGFyZSAgaW4geW91ciBzdG9wd29yZCBmaWxlLg0KaWYgdGhlc2Ugd29yZHMgZXhp
dHMgaW4geW91ciBzdG9wIHdvcmQgZmlsZSB0aGFuIHlvdSB3aWxsIG5vdCBnZXQgdGhlbSBpbg0K
dG9rZW4gc3RyZWFtLg0KDQotU3dhcG5pbA0KDQpPbiBGcmksIEphbiAxOCwgMjAxMyBhdCA2OjU4
IFBNLCBKZXJvbWUgTGFubmVsdWMgDQo8amVyb21lX2xhbm5lbHVjQGZyLmlibS5jb20NCj4gd3Jv
dGU6DQoNCj4gW8u9IMjVsb7Iyw0KDQoNCg0KU2F1ZiBpbmRpY2F0aW9uIGNvbnRyYWlyZSBjaS1k
ZXNzdXM6LyBVbmxlc3Mgc3RhdGVkIG90aGVyd2lzZSBhYm92ZToNCkNvbXBhZ25pZSBJQk0gRnJh
bmNlDQpTaaioZ2UgU29jaWFsIDogMTcgYXZlbnVlIGRlIGwnRXVyb3BlLCA5MjI3NSBCb2lzLUNv
bG9tYmVzIENlZGV4DQpSQ1MgTmFudGVycmUgNTUyIDExOCA0NjUNCkZvcm1lIFNvY2lhbGUgOiBT
LkEuUy4NCkNhcGl0YWwgU29jaWFsIDogNjUzLjI0Mi4zMDYsMjAggA0KU0lSRU4vU0lSRVQgOiA1
NTIgMTE4IDQ2NSAwMzY0NCAtIENvZGUgTkFGIDYyMDJBIA0K
--=_alternative 004BAC46C1257AF7_=--


From java-user-return-54748-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Jan 18 13:52:33 2013
Return-Path: <java-user-return-54748-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id CD4E3E511
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 18 Jan 2013 13:52:33 +0000 (UTC)
Received: (qmail 10705 invoked by uid 500); 18 Jan 2013 13:52:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10647 invoked by uid 500); 18 Jan 2013 13:52:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10625 invoked by uid 99); 18 Jan 2013 13:52:30 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Jan 2013 13:52:30 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of dawid.weiss@gmail.com designates 209.85.215.43 as permitted sender)
Received: from [209.85.215.43] (HELO mail-la0-f43.google.com) (209.85.215.43)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Jan 2013 13:52:24 +0000
Received: by mail-la0-f43.google.com with SMTP id eg20so3841895lab.2
        for <java-user@lucene.apache.org>; Fri, 18 Jan 2013 05:52:02 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=x-received:mime-version:in-reply-to:references:from:date:message-id
         :subject:to:content-type:content-transfer-encoding;
        bh=nlJsqSDCo1UM1iQ2AsDGFJPX3uf4FJhTh4i3RWnIgok=;
        b=DXXMJz/YW3qvlLHN8PTN631fn5sGKTfsNo75qfo/yOIKLzGOuBdFWAdzpjq0+cLiI4
         xPq0bGGgJ5SPeVVXMNcLGt0Hohg9hovBJES5PeXT/L0gyh2xD5hsotph/jCFrJIKQanw
         cQmanVzj/+tJ0biTeqXbnBp7amitjtDKi3P15goC9Z9j1jxyHw0GmWUNUFigzc05XdMt
         fNpcON/lYTGzqDyYDnVNZFJeIbodM+RYuBfutTQu7wWH0kJnWE80CgWnajuA4wWJxxPf
         GtWAFV9wogTLpq4eMOnEOC3tNl1AZcFLGr9Zi0zNn6MaVTSG7pJXmyqwXTohLQ9JQPxN
         rUNQ==
X-Received: by 10.112.49.97 with SMTP id t1mr3767182lbn.58.1358517122097; Fri,
 18 Jan 2013 05:52:02 -0800 (PST)
MIME-Version: 1.0
Received: by 10.112.100.167 with HTTP; Fri, 18 Jan 2013 05:51:41 -0800 (PST)
In-Reply-To: <OF029731EF.B83CF820-ONC1257AF7.004B0C40-C1257AF7.004BAC6D@fr.ibm.com>
References: <OFFC862722.87C7F4A2-ONC1257AF7.0049E4AF-C1257AF7.0049FC40@fr.ibm.com>
 <CALR91oRD3bABhEZuiGT-2ME2ZCqDMm-xE21p=n14-1DPHv19rw@mail.gmail.com> <OF029731EF.B83CF820-ONC1257AF7.004B0C40-C1257AF7.004BAC6D@fr.ibm.com>
From: Dawid Weiss <dawid.weiss@gmail.com>
Date: Fri, 18 Jan 2013 14:51:41 +0100
Message-ID: <CAM21Rt_hJKEKno=Ky84aWL6Py+cbTOYJm-O37Rrity04xcwxUA@mail.gmail.com>
Subject: Re: Japanese analyzer
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Jerome,

Some of the tokens are removed because their part of speech tags are
in the stoptags file? That's my guess at least -- you can always try
to copy/paste Japanese analyzer and change the token stream
components:

  protected TokenStreamComponents createComponents(String fieldName,
Reader reader) {
    Tokenizer tokenizer =3D new JapaneseTokenizer(reader, userDict, true, m=
ode);
    TokenStream stream =3D new JapaneseBaseFormFilter(tokenizer);
    stream =3D new JapanesePartOfSpeechStopFilter(true, stream,
stoptags);    << this is the thing I was talking about.
    stream =3D new CJKWidthFilter(stream);
    stream =3D new StopFilter(matchVersion, stream, stopwords);
    stream =3D new JapaneseKatakanaStemFilter(stream);
    stream =3D new LowerCaseFilter(matchVersion, stream);
    return new TokenStreamComponents(tokenizer, stream);
  }

Dawid

On Fri, Jan 18, 2013 at 2:46 PM, Jerome Lanneluc
<jerome_lanneluc@fr.ibm.com> wrote:
> Thanks for your answer.
>
> No those words are not part of the stop word file (I'm using the one that
> comes with the Japanese analyzer in lucene-kuromoji-3.6.1.jar.
>
> My Japanese contact told me that the first sentence means "I am Japanese"
> and the second one is a unit of length.
>
> Jerome
>
>
>
> From:   Swapnil Patil <ping.swapnil@gmail.com>
> To:     java-user@lucene.apache.org,
> Date:   01/18/2013 02:33 PM
> Subject:        Re: Japanese analyzer
>
>
>
> Hi,
>
> I just translated these words, using google translate look like   Japanes=
e
> I [
> Can you check if these words are  in your stopword file.
> if these words exits in your stop word file than you will not get them in
> token stream.
>
> -Swapnil
>
> On Fri, Jan 18, 2013 at 6:58 PM, Jerome Lanneluc
> <jerome_lanneluc@fr.ibm.com
>> wrote:
>
>> [=E7=A7=81 =E6=97=A5=E6=9C=AC=E4=BA=BA
>
>
>
> Sauf indication contraire ci-dessus:/ Unless stated otherwise above:
> Compagnie IBM France
> Si=C3=A8ge Social : 17 avenue de l'Europe, 92275 Bois-Colombes Cedex
> RCS Nanterre 552 118 465
> Forme Sociale : S.A.S.
> Capital Social : 653.242.306,20 =E2=82=AC
> SIREN/SIRET : 552 118 465 03644 - Code NAF 6202A

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54749-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Jan 18 14:58:47 2013
Return-Path: <java-user-return-54749-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 5A0CFE3CB
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 18 Jan 2013 14:58:47 +0000 (UTC)
Received: (qmail 58657 invoked by uid 500); 18 Jan 2013 14:58:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58350 invoked by uid 500); 18 Jan 2013 14:58:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58329 invoked by uid 99); 18 Jan 2013 14:58:44 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Jan 2013 14:58:44 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of youngestachiever@gmail.com designates 209.85.215.49 as permitted sender)
Received: from [209.85.215.49] (HELO mail-la0-f49.google.com) (209.85.215.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Jan 2013 14:58:38 +0000
Received: by mail-la0-f49.google.com with SMTP id fk20so3985711lab.36
        for <java-user@lucene.apache.org>; Fri, 18 Jan 2013 06:58:16 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:x-received:sender:date:x-google-sender-auth:message-id
         :subject:from:to:content-type;
        bh=v2YwQPeiuByKSjFJd+xH9jEP+8BafKDtnl2rMBM6RZQ=;
        b=wX5ZrmMXWeY4V2QhI8ss73o2Jv9YlRAfGkuuejC/s//AdYXo2TfrkAXhXsJ6B65I5s
         v0zVYPS+NJwXSJW/tpgmuHajqclWCgW8bF3MpWU/fPjSNhMN1D131NfSxvmQ2fBKkXYp
         RDkKR4CTckFHNzpqLyfLtdxDkKPgHyeR9nSC1K4IZ5zMRIMcu5LKYDuVz6ijexrweQHR
         arzWoaFUuU0s0C7KQQRoe9PjfN6kOleYdKunNHI8WKRsY8eXYjOoBvNGcDdFw71BhNUf
         zlhMc+XSISVAZbriJtO6B8wrS0GADnaipNCOQ1vubki0tDN4E9KJNUPeCS3+AoESQgZ+
         gatw==
MIME-Version: 1.0
X-Received: by 10.112.49.97 with SMTP id t1mr3852491lbn.58.1358521096713; Fri,
 18 Jan 2013 06:58:16 -0800 (PST)
Sender: youngestachiever@gmail.com
Received: by 10.114.4.39 with HTTP; Fri, 18 Jan 2013 06:58:16 -0800 (PST)
Date: Fri, 18 Jan 2013 20:28:16 +0530
X-Google-Sender-Auth: iZoxrhGplJRt0DxGp58IOzLP41U
Message-ID: <CAPzrt-1KJ5GfXCVpv1w9zF4jBeDmH9e2VWkoYfcO6G4AAwRK9A@mail.gmail.com>
Subject: Inner join in lucene
From: Ramprakash Ramamoorthy <r4ramprakash@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=bcaec553ff0263b63b04d3915791
X-Virus-Checked: Checked by ClamAV on apache.org

--bcaec553ff0263b63b04d3915791
Content-Type: text/plain; charset=ISO-8859-1

Dear all,

         I know, lucene is no relational database, but spare me. I need to
run a search across an index, and find fields that have a common equal
value, where the common value is unknown(to be determined at run time).

         An outright sql query would be *SELECT * from table1 where
table1.field1=table2.field3=table3.field2; *

*        *How do I proceed upon this? Get distinct values (if at all it is
possible) for a field and iterate the query across fields is the only
solution? Or is there an aesthetic way?

         Please to help. Thanks in advance.

--
With thanks and regards,
Ramprakash Ramamoorthy,
SASTRA University,
India.

--bcaec553ff0263b63b04d3915791--

From java-user-return-54750-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Jan 18 15:18:06 2013
Return-Path: <java-user-return-54750-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 11675E477
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 18 Jan 2013 15:18:06 +0000 (UTC)
Received: (qmail 28490 invoked by uid 500); 18 Jan 2013 15:18:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28343 invoked by uid 500); 18 Jan 2013 15:18:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28329 invoked by uid 99); 18 Jan 2013 15:18:03 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Jan 2013 15:18:03 +0000
X-ASF-Spam-Status: No, hits=-0.1 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of jerome_lanneluc@fr.ibm.com designates 195.75.94.109 as permitted sender)
Received: from [195.75.94.109] (HELO e06smtp13.uk.ibm.com) (195.75.94.109)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Jan 2013 15:17:52 +0000
Received: from /spool/local
	by e06smtp13.uk.ibm.com with IBM ESMTP SMTP Gateway: Authorized Use Only! Violators will be prosecuted
	for <java-user@lucene.apache.org> from <jerome_lanneluc@fr.ibm.com>;
	Fri, 18 Jan 2013 15:16:33 -0000
Received: from b06cxnps3075.portsmouth.uk.ibm.com (9.149.109.195)
	by e06smtp13.uk.ibm.com (192.168.101.143) with IBM ESMTP SMTP Gateway: Authorized Use Only! Violators will be prosecuted;
	Fri, 18 Jan 2013 15:16:31 -0000
Received: from d06av02.portsmouth.uk.ibm.com (d06av02.portsmouth.uk.ibm.com [9.149.37.228])
	by b06cxnps3075.portsmouth.uk.ibm.com (8.13.8/8.13.8/NCO v10.0) with ESMTP id r0IFHKpX4653502
	for <java-user@lucene.apache.org>; Fri, 18 Jan 2013 15:17:20 GMT
Received: from d06av02.portsmouth.uk.ibm.com (loopback [127.0.0.1])
	by d06av02.portsmouth.uk.ibm.com (8.14.4/8.13.1/NCO v10.0 AVout) with ESMTP id r0IFHSun000520
	for <java-user@lucene.apache.org>; Fri, 18 Jan 2013 08:17:28 -0700
Received: from d06ml370.portsmouth.uk.ibm.com (d06ml370.portsmouth.uk.ibm.com [9.149.76.152])
	by d06av02.portsmouth.uk.ibm.com (8.14.4/8.13.1/NCO v10.0 AVin) with ESMTP id r0IFHR8L000509
	for <java-user@lucene.apache.org>; Fri, 18 Jan 2013 08:17:27 -0700
In-Reply-To: <CAM21Rt_hJKEKno=Ky84aWL6Py+cbTOYJm-O37Rrity04xcwxUA@mail.gmail.com>
References: <OFFC862722.87C7F4A2-ONC1257AF7.0049E4AF-C1257AF7.0049FC40@fr.ibm.com> <CALR91oRD3bABhEZuiGT-2ME2ZCqDMm-xE21p=n14-1DPHv19rw@mail.gmail.com> <OF029731EF.B83CF820-ONC1257AF7.004B0C40-C1257AF7.004BAC6D@fr.ibm.com> <CAM21Rt_hJKEKno=Ky84aWL6Py+cbTOYJm-O37Rrity04xcwxUA@mail.gmail.com>
X-Disclaimed: 26234
To: java-user@lucene.apache.org
MIME-Version: 1.0
Subject: Re: Japanese analyzer
X-KeepSent: C46A6893:DCF591AC-C1257AF7:00514514;
 type=4; name=$KeepSent
X-Mailer: Lotus Notes Release 8.5.3FP2 SHF22 July 19, 2012
From: Jerome Lanneluc <jerome_lanneluc@fr.ibm.com>
Message-ID: <OFC46A6893.DCF591AC-ONC1257AF7.00514514-C1257AF7.0053F417@fr.ibm.com>
Date: Fri, 18 Jan 2013 16:17:18 +0100
X-MIMETrack: Serialize by Router on D06ML370/06/M/IBM(Release 8.5.3 ZX853HP5|January 12, 2012) at
 18/01/2013 16:17:18,
	Serialize complete at 18/01/2013 16:17:18
Content-Type: multipart/alternative; boundary="=_alternative 0053F3B3C1257AF7_="
x-cbid: 13011815-2966-0000-0000-0000067E28B0
X-Virus-Checked: Checked by ClamAV on apache.org

--=_alternative 0053F3B3C1257AF7_=
Content-Type: text/plain; charset="GB2312"
Content-Transfer-Encoding: base64

VGhhbmtzIERhd2lkLCB0aGF0IHdhcyBpdC4gSSdtIG5vdyB1c2luZyBhbiBlbXB0eSBzdG9wdGFn
cyBzZXQgYW5kIEknbSANCnNlZWluZyBhbGwgdGhlIGV4cGVjdGVkIHRva2Vucy4NCg0KSmVyb21l
DQoNCg0KDQpGcm9tOiAgIERhd2lkIFdlaXNzIDxkYXdpZC53ZWlzc0BnbWFpbC5jb20+DQpUbzog
ICAgIGphdmEtdXNlckBsdWNlbmUuYXBhY2hlLm9yZywgDQpEYXRlOiAgIDAxLzE4LzIwMTMgMDI6
NTIgUE0NClN1YmplY3Q6ICAgICAgICBSZTogSmFwYW5lc2UgYW5hbHl6ZXINCg0KDQoNCkplcm9t
ZSwNCg0KU29tZSBvZiB0aGUgdG9rZW5zIGFyZSByZW1vdmVkIGJlY2F1c2UgdGhlaXIgcGFydCBv
ZiBzcGVlY2ggdGFncyBhcmUNCmluIHRoZSBzdG9wdGFncyBmaWxlPyBUaGF0J3MgbXkgZ3Vlc3Mg
YXQgbGVhc3QgLS0geW91IGNhbiBhbHdheXMgdHJ5DQp0byBjb3B5L3Bhc3RlIEphcGFuZXNlIGFu
YWx5emVyIGFuZCBjaGFuZ2UgdGhlIHRva2VuIHN0cmVhbQ0KY29tcG9uZW50czoNCg0KICBwcm90
ZWN0ZWQgVG9rZW5TdHJlYW1Db21wb25lbnRzIGNyZWF0ZUNvbXBvbmVudHMoU3RyaW5nIGZpZWxk
TmFtZSwNClJlYWRlciByZWFkZXIpIHsNCiAgICBUb2tlbml6ZXIgdG9rZW5pemVyID0gbmV3IEph
cGFuZXNlVG9rZW5pemVyKHJlYWRlciwgdXNlckRpY3QsIHRydWUsIA0KbW9kZSk7DQogICAgVG9r
ZW5TdHJlYW0gc3RyZWFtID0gbmV3IEphcGFuZXNlQmFzZUZvcm1GaWx0ZXIodG9rZW5pemVyKTsN
CiAgICBzdHJlYW0gPSBuZXcgSmFwYW5lc2VQYXJ0T2ZTcGVlY2hTdG9wRmlsdGVyKHRydWUsIHN0
cmVhbSwNCnN0b3B0YWdzKTsgICAgPDwgdGhpcyBpcyB0aGUgdGhpbmcgSSB3YXMgdGFsa2luZyBh
Ym91dC4NCiAgICBzdHJlYW0gPSBuZXcgQ0pLV2lkdGhGaWx0ZXIoc3RyZWFtKTsNCiAgICBzdHJl
YW0gPSBuZXcgU3RvcEZpbHRlcihtYXRjaFZlcnNpb24sIHN0cmVhbSwgc3RvcHdvcmRzKTsNCiAg
ICBzdHJlYW0gPSBuZXcgSmFwYW5lc2VLYXRha2FuYVN0ZW1GaWx0ZXIoc3RyZWFtKTsNCiAgICBz
dHJlYW0gPSBuZXcgTG93ZXJDYXNlRmlsdGVyKG1hdGNoVmVyc2lvbiwgc3RyZWFtKTsNCiAgICBy
ZXR1cm4gbmV3IFRva2VuU3RyZWFtQ29tcG9uZW50cyh0b2tlbml6ZXIsIHN0cmVhbSk7DQogIH0N
Cg0KRGF3aWQNCg0KT24gRnJpLCBKYW4gMTgsIDIwMTMgYXQgMjo0NiBQTSwgSmVyb21lIExhbm5l
bHVjDQo8amVyb21lX2xhbm5lbHVjQGZyLmlibS5jb20+IHdyb3RlOg0KPiBUaGFua3MgZm9yIHlv
dXIgYW5zd2VyLg0KPg0KPiBObyB0aG9zZSB3b3JkcyBhcmUgbm90IHBhcnQgb2YgdGhlIHN0b3Ag
d29yZCBmaWxlIChJJ20gdXNpbmcgdGhlIG9uZSANCnRoYXQNCj4gY29tZXMgd2l0aCB0aGUgSmFw
YW5lc2UgYW5hbHl6ZXIgaW4gbHVjZW5lLWt1cm9tb2ppLTMuNi4xLmphci4NCj4NCj4gTXkgSmFw
YW5lc2UgY29udGFjdCB0b2xkIG1lIHRoYXQgdGhlIGZpcnN0IHNlbnRlbmNlIG1lYW5zICJJIGFt
IA0KSmFwYW5lc2UiDQo+IGFuZCB0aGUgc2Vjb25kIG9uZSBpcyBhIHVuaXQgb2YgbGVuZ3RoLg0K
Pg0KPiBKZXJvbWUNCj4NCj4NCj4NCj4gRnJvbTogICBTd2FwbmlsIFBhdGlsIDxwaW5nLnN3YXBu
aWxAZ21haWwuY29tPg0KPiBUbzogICAgIGphdmEtdXNlckBsdWNlbmUuYXBhY2hlLm9yZywNCj4g
RGF0ZTogICAwMS8xOC8yMDEzIDAyOjMzIFBNDQo+IFN1YmplY3Q6ICAgICAgICBSZTogSmFwYW5l
c2UgYW5hbHl6ZXINCj4NCj4NCj4NCj4gSGksDQo+DQo+IEkganVzdCB0cmFuc2xhdGVkIHRoZXNl
IHdvcmRzLCB1c2luZyBnb29nbGUgdHJhbnNsYXRlIGxvb2sgbGlrZSBKYXBhbmVzZQ0KPiBJIFsN
Cj4gQ2FuIHlvdSBjaGVjayBpZiB0aGVzZSB3b3JkcyBhcmUgIGluIHlvdXIgc3RvcHdvcmQgZmls
ZS4NCj4gaWYgdGhlc2Ugd29yZHMgZXhpdHMgaW4geW91ciBzdG9wIHdvcmQgZmlsZSB0aGFuIHlv
dSB3aWxsIG5vdCBnZXQgdGhlbSANCmluDQo+IHRva2VuIHN0cmVhbS4NCj4NCj4gLVN3YXBuaWwN
Cj4NCj4gT24gRnJpLCBKYW4gMTgsIDIwMTMgYXQgNjo1OCBQTSwgSmVyb21lIExhbm5lbHVjDQo+
IDxqZXJvbWVfbGFubmVsdWNAZnIuaWJtLmNvbQ0KPj4gd3JvdGU6DQo+DQo+PiBby70gyNWxvsjL
DQo+DQo+DQo+DQo+IFNhdWYgaW5kaWNhdGlvbiBjb250cmFpcmUgY2ktZGVzc3VzOi8gVW5sZXNz
IHN0YXRlZCBvdGhlcndpc2UgYWJvdmU6DQo+IENvbXBhZ25pZSBJQk0gRnJhbmNlDQo+IFNpqKhn
ZSBTb2NpYWwgOiAxNyBhdmVudWUgZGUgbCdFdXJvcGUsIDkyMjc1IEJvaXMtQ29sb21iZXMgQ2Vk
ZXgNCj4gUkNTIE5hbnRlcnJlIDU1MiAxMTggNDY1DQo+IEZvcm1lIFNvY2lhbGUgOiBTLkEuUy4N
Cj4gQ2FwaXRhbCBTb2NpYWwgOiA2NTMuMjQyLjMwNiwyMCCADQo+IFNJUkVOL1NJUkVUIDogNTUy
IDExOCA0NjUgMDM2NDQgLSBDb2RlIE5BRiA2MjAyQQ0KDQotLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NClRvIHVuc3Vi
c2NyaWJlLCBlLW1haWw6IGphdmEtdXNlci11bnN1YnNjcmliZUBsdWNlbmUuYXBhY2hlLm9yZw0K
Rm9yIGFkZGl0aW9uYWwgY29tbWFuZHMsIGUtbWFpbDogamF2YS11c2VyLWhlbHBAbHVjZW5lLmFw
YWNoZS5vcmcNCg0KDQoNCg0KU2F1ZiBpbmRpY2F0aW9uIGNvbnRyYWlyZSBjaS1kZXNzdXM6LyBV
bmxlc3Mgc3RhdGVkIG90aGVyd2lzZSBhYm92ZToNCkNvbXBhZ25pZSBJQk0gRnJhbmNlDQpTaaio
Z2UgU29jaWFsIDogMTcgYXZlbnVlIGRlIGwnRXVyb3BlLCA5MjI3NSBCb2lzLUNvbG9tYmVzIENl
ZGV4DQpSQ1MgTmFudGVycmUgNTUyIDExOCA0NjUNCkZvcm1lIFNvY2lhbGUgOiBTLkEuUy4NCkNh
cGl0YWwgU29jaWFsIDogNjUzLjI0Mi4zMDYsMjAggA0KU0lSRU4vU0lSRVQgOiA1NTIgMTE4IDQ2
NSAwMzY0NCAtIENvZGUgTkFGIDYyMDJBIA0K
--=_alternative 0053F3B3C1257AF7_=--


From java-user-return-54751-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Jan 18 15:35:58 2013
Return-Path: <java-user-return-54751-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 37635E488
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 18 Jan 2013 15:35:58 +0000 (UTC)
Received: (qmail 3477 invoked by uid 500); 18 Jan 2013 15:35:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3133 invoked by uid 500); 18 Jan 2013 15:35:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3104 invoked by uid 99); 18 Jan 2013 15:35:54 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Jan 2013 15:35:54 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of xekoukou@gmail.com designates 74.125.82.41 as permitted sender)
Received: from [74.125.82.41] (HELO mail-wg0-f41.google.com) (74.125.82.41)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Jan 2013 15:35:46 +0000
Received: by mail-wg0-f41.google.com with SMTP id ds1so479565wgb.4
        for <java-user@lucene.apache.org>; Fri, 18 Jan 2013 07:35:26 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:x-received:in-reply-to:references:date:message-id
         :subject:from:to:content-type;
        bh=UPaftl7VDyJg5JlfQACWOFhMNCD4v1+kJvcUOa8Poes=;
        b=eZIRmKLL+7XHv4qg9T9vtkpcEfN8HOahr0jWsOvswPipHhvsj84aQV7Sqwwu0guQ9X
         goMxuyCppsHtSDI1gDBxE722ztRh5P329w6kHtWU3Zr+ln1adcjLJLJ60Z4UnTFkUDkX
         e4C5WdBr4CgCP3cN9k57y0pT/P7jjQQKAIobafS+2NA8fwOj8DFhCE12AAon9TBt7F3Q
         BNv/h5V/6Gr0OAXOnqliNXw3B/VuWfc6yHPS9M0esw3oVfz27PSxLp094pS1+9Ydp4m0
         CLiaaA9NJ0n0ju/soFQtow/cs0grIyGTjaS9gw8xnWSuSqbsZfCGfDy+70cKQLmyjEAp
         I4kA==
MIME-Version: 1.0
X-Received: by 10.180.20.109 with SMTP id m13mr4404913wie.16.1358523326174;
 Fri, 18 Jan 2013 07:35:26 -0800 (PST)
Received: by 10.217.70.72 with HTTP; Fri, 18 Jan 2013 07:35:26 -0800 (PST)
In-Reply-To: <CAPzrt-1KJ5GfXCVpv1w9zF4jBeDmH9e2VWkoYfcO6G4AAwRK9A@mail.gmail.com>
References: <CAPzrt-1KJ5GfXCVpv1w9zF4jBeDmH9e2VWkoYfcO6G4AAwRK9A@mail.gmail.com>
Date: Fri, 18 Jan 2013 17:35:26 +0200
Message-ID: <CAOX4E5FQc-QRDVV2eSM1YH-QCjU1V2YeM3gTY8WRP6-wGQu7ag@mail.gmail.com>
Subject: Re: Inner join in lucene
From: Apostolis Xekoukoulotakis <xekoukou@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=bcaec53f343b46957004d391dcdf
X-Virus-Checked: Checked by ClamAV on apache.org

--bcaec53f343b46957004d391dcdf
Content-Type: text/plain; charset=ISO-8859-1

You can put those fields as a DocValue type of field. They are optimized
for use during search(or join in this case).

Then create a collector that collects the documents which have the same
value in those fields.

Have other more experienced comment though before you start implementing it.


2013/1/18 Ramprakash Ramamoorthy <r4ramprakash@gmail.com>

> Dear all,
>
>          I know, lucene is no relational database, but spare me. I need to
> run a search across an index, and find fields that have a common equal
> value, where the common value is unknown(to be determined at run time).
>
>          An outright sql query would be *SELECT * from table1 where
> table1.field1=table2.field3=table3.field2; *
>
> *        *How do I proceed upon this? Get distinct values (if at all it is
> possible) for a field and iterate the query across fields is the only
> solution? Or is there an aesthetic way?
>
>          Please to help. Thanks in advance.
>
> --
> With thanks and regards,
> Ramprakash Ramamoorthy,
> SASTRA University,
> India.
>



-- 


Sincerely yours,

     Apostolis Xekoukoulotakis

--bcaec53f343b46957004d391dcdf--

From java-user-return-54752-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Jan 18 15:40:26 2013
Return-Path: <java-user-return-54752-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id A847AE4A8
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 18 Jan 2013 15:40:26 +0000 (UTC)
Received: (qmail 22046 invoked by uid 500); 18 Jan 2013 15:40:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21856 invoked by uid 500); 18 Jan 2013 15:40:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21837 invoked by uid 99); 18 Jan 2013 15:40:24 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Jan 2013 15:40:24 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of xekoukou@gmail.com designates 74.125.82.49 as permitted sender)
Received: from [74.125.82.49] (HELO mail-wg0-f49.google.com) (74.125.82.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Jan 2013 15:40:17 +0000
Received: by mail-wg0-f49.google.com with SMTP id 15so2234237wgd.4
        for <java-user@lucene.apache.org>; Fri, 18 Jan 2013 07:39:56 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:x-received:date:message-id:subject:from:to
         :content-type;
        bh=h9ak+lEXTfgaa8F/ULdtlmvGLBwLueUkPIqB5E8JfSk=;
        b=dPaW28C/b/WRUEM5UjGAp2L/kKpfom8j1byVi9PTwOZgSxHt7PVQWePZ0SncWF+4z4
         TIO2ig/p1O9+XZuaOTidQiL8ydaTXcBZ/4AgtaPSiMbIw58WFyvIqM2KwG+nmKcRUnv5
         Oyl2IENgqU8shmmdbYdgeeL1W36vfYdGDoqFCDboXt8UGqOt3Msfx8nP4LhBVhkrORwc
         awILoC3TvILteSSwawNTltY4s89j9EYYSlXzHjgl+7SFKdcahhcY0pSxI94+ihuYSutV
         hphzCcY9Y3u8vBpI6RHssOY4gGCrsARb2TkOVdXC5ANIldvB7gp+fRZE5UBenx1huq1A
         2i2g==
MIME-Version: 1.0
X-Received: by 10.194.21.70 with SMTP id t6mr14924696wje.42.1358523596517;
 Fri, 18 Jan 2013 07:39:56 -0800 (PST)
Received: by 10.217.70.72 with HTTP; Fri, 18 Jan 2013 07:39:56 -0800 (PST)
Date: Fri, 18 Jan 2013 17:39:56 +0200
Message-ID: <CAOX4E5EZv0NhdcYKexZSWWjpaR1f0va6FiZt-aEwc=khc3ki_g@mail.gmail.com>
Subject: Is LogByteSizeMergePolicy deterministic?
From: Apostolis Xekoukoulotakis <xekoukou@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=047d7b5d3ef663b13d04d391ecbc
X-Virus-Checked: Checked by ClamAV on apache.org

--047d7b5d3ef663b13d04d391ecbc
Content-Type: text/plain; charset=ISO-8859-1

I want to replicate an index from multiple replicas at the same time.

Those replicas have been given the same documents and at the same order.

Will the files be the same across all replicas?



-- 


Sincerely yours,

     Apostolis Xekoukoulotakis

--047d7b5d3ef663b13d04d391ecbc--

From java-user-return-54753-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Jan 18 15:46:11 2013
Return-Path: <java-user-return-54753-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 8E814E4B6
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 18 Jan 2013 15:46:11 +0000 (UTC)
Received: (qmail 40927 invoked by uid 500); 18 Jan 2013 15:46:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40804 invoked by uid 500); 18 Jan 2013 15:46:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40456 invoked by uid 99); 18 Jan 2013 15:46:05 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Jan 2013 15:46:05 +0000
X-ASF-Spam-Status: No, hits=0.3 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_SOFTFAIL
X-Spam-Check-By: apache.org
Received-SPF: softfail (nike.apache.org: transitioning domain of jon@lightboxtechnologies.com does not designate 209.85.217.180 as permitted sender)
Received: from [209.85.217.180] (HELO mail-lb0-f180.google.com) (209.85.217.180)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Jan 2013 15:45:57 +0000
Received: by mail-lb0-f180.google.com with SMTP id gj3so2781242lbb.39
        for <java-user@lucene.apache.org>; Fri, 18 Jan 2013 07:45:35 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=lightboxtechnologies.com; s=google;
        h=mime-version:x-received:x-originating-ip:in-reply-to:references
         :date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=IEPd6lYXUkDY5ryAvLunHRfOHEnclO+R2XJn0mS67RU=;
        b=kyE/GVuv+UVOnwtIY1qdt9csX3L/MplbvgtUzCg8INVwriKwjNziKQYP6En93hCrkn
         B133TAqOiLN3St7ln1LQRNT0YLXe5ggzF8iQmcPcKfRDmHB3exGfxgPxEeSAIDIWZTIs
         3idq9o7sD25tBUli86WKIS+BYc2hZLGOPLVRg=
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=mime-version:x-received:x-originating-ip:in-reply-to:references
         :date:message-id:subject:from:to:content-type
         :content-transfer-encoding:x-gm-message-state;
        bh=IEPd6lYXUkDY5ryAvLunHRfOHEnclO+R2XJn0mS67RU=;
        b=FI1/rgsNcF65CP1qI40R3v1a05apJAHFw54c6hiHC8PeWw3z+2jK3TBxDiudEHDYzZ
         d/OtmJPrVEqNGwt5hFYvQci4G9zUmkQx6AOSAElNr3YAxAHdfh1asTfX8YpSIP53O29P
         Myd3tUEFwOd7Ts9Ah+Xk0Zo86eSVaaVtEZriG/SdB+1PECQQJgwfKmaCtsXR1JhsDG5A
         eOd/bCBE+RdbF4aLQy7AZ9c77yZv1w4E2Vz8qTtsi3hhl1Qdx59JkurwzrjvQAbD5eoD
         PCjoWsNFYb4N8Jt7IZGUM0dv+KufRIqPfyCDulsPhjxFERJ4oST0YstHVI+TdhiXc5WT
         vC7A==
MIME-Version: 1.0
X-Received: by 10.112.103.135 with SMTP id fw7mr3935804lbb.17.1358523935303;
 Fri, 18 Jan 2013 07:45:35 -0800 (PST)
Received: by 10.114.14.97 with HTTP; Fri, 18 Jan 2013 07:45:35 -0800 (PST)
X-Originating-IP: [68.33.9.116]
In-Reply-To: <CAEY5pxVp5NMNEMdDvgAh-DynX0-+SMs6hywqbqZGxm9DKQyNHg@mail.gmail.com>
References: <CAOEyTYS_61qBM8hP_fv0OQC4xACMYYOMbf4NLJkq2SiEKYNBug@mail.gmail.com>
	<CAEY5pxXsj8kXPTBoGpYP_vWPHOTSwYm18aRiYQTky_zK1CFFww@mail.gmail.com>
	<CAOEyTYSWvsFsGvpBE6pZ7XJXj5ypTDUf8rE9jqGWXJzLoptzkA@mail.gmail.com>
	<CAOdYfZVb4tO=Fy=x6tH_NgLT8jR7wV8ZV0hoSDQnTa2nZopDGg@mail.gmail.com>
	<CAOEyTYSFgnp+FfniGW18rcB8o5b1HXDYjGEdqpb+QHb4ac_89g@mail.gmail.com>
	<CAEY5pxUN3u+CEQKhasf8tOumW1fiYQSwE5D=mfm462-KGGPCgQ@mail.gmail.com>
	<CAOEyTYRRu_Dch4mWdibbVo6rav=5puW7Jk7tA-ZShePrbWyxew@mail.gmail.com>
	<CAEY5pxVp5NMNEMdDvgAh-DynX0-+SMs6hywqbqZGxm9DKQyNHg@mail.gmail.com>
Date: Fri, 18 Jan 2013 10:45:35 -0500
Message-ID: <CAOEyTYQ1Y4Jp+18i96hLbOjC1HuGGYmnYU1ffVXAhhCAr5BVSQ@mail.gmail.com>
Subject: Re: Document term vectors in Lucene 4
From: Jon Stewart <jon@lightboxtechnologies.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Gm-Message-State: ALoCoQlFLIfrcYIlMPvODGo3FS97zKzvOuTZEYgqVD6JUSkRbAiX9ykAhVfxTIxBvLagyWOaJLE3
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks! I still can't see what was wrong with my original code--must
have been a dumb typo somewhere--but starting over from that example
now works on indices generated from my real indexing code. I will try
to blog about it next week so there is some sample code up on the web
for anyone else searching for how to do something similar.

I did not know about MultiFields, but yes, that seems to get rid of
the need for the SlowCompositeReaderWrapper. I really doubt
SlowCompositeReaderWrapper would be all that slow for my purposes,
though=E2=80=94I care more about indexing speed than ultra-fast query
responses. With multithreaded indexing, Lucene 4 seems to be able to
index files about as fast as I can read them in from disk, even
including Tika text extraction. Kudos.


Jon

On Fri, Jan 18, 2013 at 6:12 AM, Ian Lea <ian.lea@gmail.com> wrote:
> To get stats from the whole index I think you need to come at this
> from a different direction.  See the 4.0 migration guide for some
> details.
>
> With a variation on your code and 2 docs
>
> doc1: foobar qux quote
> doc2: foobar qux qux quorum
>
> this code snippet
>
>         Fields fields =3D MultiFields.getFields(rdr);
>         Terms terms =3D fields.terms("body");
>         TermsEnum te =3D terms.iterator(null);
>         while (te.next() !=3D null) {
>             String tt =3D te.term().utf8ToString();
>             System.out.printf("%s totalFreq()=3D%s, docFreq=3D%s\n",
>                               tt,
>                               te.totalTermFreq(),
>                               te.docFreq());
>         }
>
> displays
>
> foobar totalFreq()=3D2, docFreq=3D2
> quorum totalFreq()=3D1, docFreq=3D1
> quote totalFreq()=3D1, docFreq=3D1
> qux totalFreq()=3D3, docFreq=3D2
>
> This is with a standard IndexReader as returned by
> DirectoryReader.open(dir), on a RAMDirectory with 2 docs so there
> won't be many segments.  But from my reading of the migration guide
> you shouldn't need to use the Composite reader.
>
>
> Hope this helps - we are getting outside my area of expertise so don't
> trust anything I say.
>
>
> --
> Ian.
>
> On Thu, Jan 17, 2013 at 3:11 PM, Jon Stewart
> <jon@lightboxtechnologies.com> wrote:
>> D'oh!!!! Thanks!
>>
>> Does TermsEnum.totalTermFreq() return the per-doc frequencies? It
>> looks like it empirically, but the documentation refers to corpus
>> usage, not document.field usage.
>>
>> Jon
>>
>> On Thu, Jan 17, 2013 at 10:00 AM, Ian Lea <ian.lea@gmail.com> wrote:
>>> typo time.  You need doc2.add(...) not 2 doc.add(...) statements.
>>>
>>>
>>> --
>>> Ian.
>>>
>>>
>>> On Thu, Jan 17, 2013 at 2:49 PM, Jon Stewart
>>> <jon@lightboxtechnologies.com> wrote:
>>>> On Thu, Jan 17, 2013 at 9:08 AM, Robert Muir <rcmuir@gmail.com> wrote:
>>>>> Which statistics in particular (which methods)?
>>>>
>>>> I'd like to know the frequency of each term in each document. Those
>>>> term counts for the most frequent terms in the corpus will make it
>>>> into the document vectors for clustering.
>>>>
>>>> Looking at Terms and TermsEnum, I'm actually somewhat baffled about
>>>> how to do this. Iterating over the TermsEnums in a Terms retrieved by
>>>> IndexReader.getTermVector() will tell me about the presence of a term
>>>> within a document, but I don't see a simple "count" or "freq" method
>>>> in TermsEnum--the methods there look like corpus statistics.
>>>>
>>>> Based on Ian's reply, I created the following one-file test program.
>>>> The results I get are weird: I get a term vector back for the first
>>>> document, but not for the second.
>>>>
>>>> Output:
>>>> doc 0 had term 'baz'
>>>> doc 0 had term 'foobar'
>>>> doc 0 had term 'gibberish'
>>>> doc 0 had 3 terms
>>>> doc 1 had no term vector for body
>>>>
>>>> Thanks again for the responses and assistance.
>>>>
>>>>
>>>> Jon
>>>>
>>>>
>>>> import java.io.File;
>>>> import java.io.IOException;
>>>>
>>>> import org.apache.lucene.analysis.standard.StandardAnalyzer;
>>>>
>>>> import org.apache.lucene.index.IndexWriter;
>>>> import org.apache.lucene.index.IndexWriterConfig.OpenMode;
>>>> import org.apache.lucene.index.IndexWriterConfig;
>>>> import org.apache.lucene.index.FieldInfo.IndexOptions;
>>>> import org.apache.lucene.index.CorruptIndexException;
>>>> import org.apache.lucene.index.AtomicReader;
>>>> import org.apache.lucene.index.IndexableField;
>>>> import org.apache.lucene.index.Terms;
>>>> import org.apache.lucene.index.TermsEnum;
>>>> import org.apache.lucene.index.SlowCompositeReaderWrapper;
>>>> import org.apache.lucene.index.DirectoryReader;
>>>>
>>>> import org.apache.lucene.store.Directory;
>>>> import org.apache.lucene.store.FSDirectory;
>>>>
>>>> import org.apache.lucene.util.BytesRef;
>>>> import org.apache.lucene.util.Version;
>>>>
>>>> import org.apache.lucene.document.Document;
>>>> import org.apache.lucene.document.Field;
>>>> import org.apache.lucene.document.StringField;
>>>> import org.apache.lucene.document.FieldType;
>>>>
>>>> public class LuceneTest {
>>>>
>>>>   static void createIndex(final String path) throws IOException,
>>>> CorruptIndexException {
>>>>     final Directory dir =3D FSDirectory.open(new File(path));
>>>>     final StandardAnalyzer analyzer =3D new StandardAnalyzer(Version.L=
UCENE_40);
>>>>     final IndexWriterConfig iwc =3D new
>>>> IndexWriterConfig(Version.LUCENE_40, analyzer);
>>>>     iwc.setOpenMode(OpenMode.CREATE_OR_APPEND);
>>>>     iwc.setRAMBufferSizeMB(256.0);
>>>>     final IndexWriter writer =3D new IndexWriter(dir, iwc);
>>>>
>>>>     final FieldType bodyOptions =3D new FieldType();
>>>>     bodyOptions.setIndexed(true);
>>>>     bodyOptions.setIndexOptions(IndexOptions.DOCS_AND_FREQS_AND_POSITI=
ONS_AND_OFFSETS);
>>>>     bodyOptions.setStored(true);
>>>>     bodyOptions.setStoreTermVectors(true);
>>>>     bodyOptions.setTokenized(true);
>>>>
>>>>     final Document doc =3D new Document();
>>>>     doc.add(new Field("body", "this foobar is gibberish, baz", bodyOpt=
ions));
>>>>     writer.addDocument(doc);
>>>>
>>>>     final Document doc2 =3D new Document();
>>>>     doc.add(new Field("body", "I don't know what to tell you, qux.
>>>> Some foobar is just fubar.", bodyOptions));
>>>>     writer.addDocument(doc2);
>>>>
>>>>     writer.close();
>>>>   }
>>>>
>>>>   static void readIndex(final String path) throws IOException,
>>>> CorruptIndexException {
>>>>     final DirectoryReader dirReader =3D
>>>> DirectoryReader.open(FSDirectory.open(new File(path)));
>>>>     final SlowCompositeReaderWrapper rdr =3D new
>>>> SlowCompositeReaderWrapper(dirReader);
>>>>
>>>>     int max =3D rdr.maxDoc();
>>>>
>>>>     TermsEnum term =3D null;
>>>>     // iterate docs
>>>>     for (int i =3D 0; i < max; ++i) {
>>>>       // get term vector for body field
>>>>       final Terms terms =3D rdr.getTermVector(i, "body");
>>>>       if (terms !=3D null) {
>>>>         // count terms in doc
>>>>         int numTerms =3D 0;
>>>>         term =3D terms.iterator(term);
>>>>         while (term.next() !=3D null) {
>>>>           System.out.println("doc " + i + " had term '" +
>>>> term.term().utf8ToString() + "'");
>>>>           ++numTerms;
>>>>
>>>>           // would like to record doc term frequencies here, i.e.,
>>>> counts[i][term.term()] =3D term.freq()
>>>>         }
>>>>         System.out.println("doc " + i + " had " + numTerms + " terms")=
;
>>>>       }
>>>>       else {
>>>>         System.err.println("doc " + i + " had no term vector for body"=
);
>>>>       }
>>>>     }
>>>>   }
>>>>
>>>>   public static void main(String[] args) throws IOException,
>>>> InterruptedException, CorruptIndexException {
>>>>     final String path =3D args[0];
>>>>     createIndex(path);
>>>>     readIndex(path);
>>>>   }
>>>> }
>>>>
>>>> --
>>>> Jon Stewart, Principal
>>>> (646) 719-0317 | jon@lightboxtechnologies.com | Arlington, VA
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>
>>
>>
>> --
>> Jon Stewart, Principal
>> (646) 719-0317 | jon@lightboxtechnologies.com | Arlington, VA
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>



--=20
Jon Stewart, Principal
(646) 719-0317 | jon@lightboxtechnologies.com | Arlington, VA

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54754-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Jan 18 15:46:34 2013
Return-Path: <java-user-return-54754-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 12B41E4BD
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 18 Jan 2013 15:46:34 +0000 (UTC)
Received: (qmail 44015 invoked by uid 500); 18 Jan 2013 15:46:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43960 invoked by uid 500); 18 Jan 2013 15:46:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43948 invoked by uid 99); 18 Jan 2013 15:46:31 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Jan 2013 15:46:31 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of xekoukou@gmail.com designates 209.85.212.179 as permitted sender)
Received: from [209.85.212.179] (HELO mail-wi0-f179.google.com) (209.85.212.179)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Jan 2013 15:46:25 +0000
Received: by mail-wi0-f179.google.com with SMTP id o1so3149189wic.12
        for <java-user@lucene.apache.org>; Fri, 18 Jan 2013 07:46:05 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:x-received:in-reply-to:references:date:message-id
         :subject:from:to:content-type;
        bh=2S8RhtAiiADujUmBu9hXVbE5vMhGGoFyaf/OzvhxMfQ=;
        b=gHB/pw8RLtkpg/QjZtOwHXTLQlVv3l9a1ewQ32VMOuqu0Wzql2CZdSooQLhd47IEl1
         w29QUXj7JIXLf6NccUthGHhvxRVzZbDErzzuVRUiTivEyOYdASmedcj/9G8FYhVnfE0B
         EfBYM51PSZvPbTvAoeYYxK4J616iRUoHvy2lKDc0rrXtkFu+NTqVwsxUtkoWuRNdN56Z
         FykW7e4xqThJJeS2Mo0v4fA7BKKOlscuSyQfbJND6BJRWMsgLLgPZXst7OwhkJjFsjKJ
         QbYjsuT4Q746wbY52kfctYR+QjVmxFfy5aT+fP6VuaRr3nHlItwMiPRP7qdw7NOD8cT7
         J09g==
MIME-Version: 1.0
X-Received: by 10.180.95.200 with SMTP id dm8mr4361050wib.16.1358523965367;
 Fri, 18 Jan 2013 07:46:05 -0800 (PST)
Received: by 10.217.70.72 with HTTP; Fri, 18 Jan 2013 07:46:05 -0800 (PST)
In-Reply-To: <CAOX4E5Hc1ZMtSF7LEEm3hMFNEMxDcNVCjNvqvtgdnHsEs6_h2Q@mail.gmail.com>
References: <CAOX4E5Hc1ZMtSF7LEEm3hMFNEMxDcNVCjNvqvtgdnHsEs6_h2Q@mail.gmail.com>
Date: Fri, 18 Jan 2013 17:46:05 +0200
Message-ID: <CAOX4E5GTHKGcvF3weuyWzMzAx27xeG9yVc_hG1X96QMPJ2gnuQ@mail.gmail.com>
Subject: Re: tries and spatial search
From: Apostolis Xekoukoulotakis <xekoukou@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=f46d044306065fe6a004d3920264
X-Virus-Checked: Checked by ClamAV on apache.org

--f46d044306065fe6a004d3920264
Content-Type: text/plain; charset=ISO-8859-1

The new Spatial contrib module has already implemented what I was talking.




2012/12/22 Apostolis Xekoukoulotakis <xekoukou@gmail.com>

> I just found out about the blocktree implementation and how it is used to
> increase the speed of prefix search.
>
> Have you tried to use it for spatial search?
> I will explain to you how i think it will work. Please correct me if I am
> wrong.
>
> A radix tree is a structure that you can use to efficiently search terms
> with a specific prefix.
> Spatial searches are prefix searches. Lets see why.
>
> Lets say we have the surface of the earth and we use as coordinate system
> the Geographic coordinate system<http://en.wikipedia.org/wiki/Geographic_coordinate_system>
>  .
>
> We then create a grid of 4 square surfaces and create an id for each one.
> ...
> We split each square surface into 4 square surfaces with an id.
>
> When we want to point to a location, its uid would be of this form:
> idlv1idlv2idlv3...
>
> Each id can be encoded with 4 bits.
> The surface of the earth (510million kms) would then require 29 bits to
> have the precision of 1m^2.
>
> How do we encode arbitrary closed surfaces?
> Here is what measure theory does: check page 7. theorem 1.4 figure 3<http://press.princeton.edu/chapters/s8008.pdf>
> This theorem says that any surface can be described by a countable amout
> of squares.
> Lucene can only handle finite number of terms.
> We thus  put an upper limit on the number of squares that represent our
> surface. The ids of those squares are the terms that need to be searched.
>
>
> In conclusion, searching documents inside an arbitrary surface means
> creating the trie of that surface and then looking through the inverted
> index trie for those terms.
>
> The scoring that we will implement will be the surface area of the common
> terms,(ie the surface area of the intersection of those surfaces)
>
>
>
> *So 2 questions, *
> *1)Will this work in general?*
> *2) I want to avoid writing new code.*
> *
> *
> * Is the blocktree implementation much different than a radix tree that
> it wouldnt not make it work?*
> *Does blocktree accept arbitrary byte or bit prefixes?*
> *Which classes would I use if all the above answers are positive?*
>
>
>
> --
>
>
> Sincerely yours,
>
>      Apostolis Xekoukoulotakis
>
>


-- 


Sincerely yours,

     Apostolis Xekoukoulotakis

--f46d044306065fe6a004d3920264--

From java-user-return-54755-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Jan 18 16:14:20 2013
Return-Path: <java-user-return-54755-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 33DA2E5B7
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 18 Jan 2013 16:14:20 +0000 (UTC)
Received: (qmail 37064 invoked by uid 500); 18 Jan 2013 16:14:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37007 invoked by uid 500); 18 Jan 2013 16:14:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36972 invoked by uid 99); 18 Jan 2013 16:14:17 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Jan 2013 16:14:17 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ishalyminov@yandex-team.ru designates 84.201.187.146 as permitted sender)
Received: from [84.201.187.146] (HELO forward1h.mail.yandex.net) (84.201.187.146)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Jan 2013 16:14:09 +0000
Received: from webcorp1h.yandex-team.ru (webcorp1h.yandex-team.ru [84.201.186.78])
	by forward1h.mail.yandex.net (Yandex) with ESMTP id 64B279E1749
	for <java-user@lucene.apache.org>; Fri, 18 Jan 2013 20:13:47 +0400 (MSK)
Received: from 127.0.0.1 (localhost.localdomain [127.0.0.1])
	by webcorp1h.yandex-team.ru (Yandex) with ESMTP id 3FDEB318385;
	Fri, 18 Jan 2013 20:13:47 +0400 (MSK)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yandex-team.ru;
	s=default; t=1358525627;
	bh=IdTLzUE2xoHV9hkMA9uBS5kT9lbmZ3Dts7fplsBLw78=;
	h=From:To:Subject:Date;
	b=JrRkir6CJfXq+dXRcix7qs+TYwHnZPiNY5bisArrXeXgdkYVgKYHOiBvNNn/qd2Wn
	 MT/sFX3fSn8m9ORMc986hCq3+EdhvMRcT9gUH0jPhCRB+8+Qsn+elEi1ScWr81dzx0
	 4Kuuh09Oq8m4UYEzO8+H2PNcQ5RWf63MC9nmwefo=
Received: from dhcp175-135-red.yandex.net (dhcp175-135-red.yandex.net [95.108.175.135]) by webcorp1h.yandex-team.ru with HTTP;
	Fri, 18 Jan 2013 20:13:46 +0400
From: Igor Shalyminov <ishalyminov@yandex-team.ru>
To: java-user@lucene.apache.org
Subject: SpanNearQuery with two boundaries
MIME-Version: 1.0
Message-Id: <51881358525626@webcorp1h.yandex-team.ru>
X-Mailer: Yamail [ http://yandex.ru ] 5.0
Date: Fri, 18 Jan 2013 20:13:46 +0400
Content-Transfer-Encoding: 7bit
Content-Type: text/plain
X-Virus-Checked: Checked by ClamAV on apache.org

Hello!

I want to perform search queries like this one:
word:"dog" \1 word:"runs" (\3 \10) word:"cat"

It is thus something like SpanNearQuery, but with two boundaries - minimum and maximum distance between the terms (which in the \1-case would be equal).
Syntax (as above, fictional:) itself doesn't matter, I just want to know if one is able to build this type of query based on existing (Lucene 4.0.0) query classes. 

-- 
Best Regards,
Igor Shalyminov

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54756-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Jan 18 17:38:19 2013
Return-Path: <java-user-return-54756-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id CD979E6F6
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 18 Jan 2013 17:38:19 +0000 (UTC)
Received: (qmail 38127 invoked by uid 500); 18 Jan 2013 17:38:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38088 invoked by uid 500); 18 Jan 2013 17:38:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38080 invoked by uid 99); 18 Jan 2013 17:38:17 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Jan 2013 17:38:17 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,HTML_OBFUSCATE_05_10,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of mbrzezicki@gmail.com designates 209.85.215.50 as permitted sender)
Received: from [209.85.215.50] (HELO mail-la0-f50.google.com) (209.85.215.50)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Jan 2013 17:38:12 +0000
Received: by mail-la0-f50.google.com with SMTP id er20so2449964lab.9
        for <java-user@lucene.apache.org>; Fri, 18 Jan 2013 09:37:51 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=x-received:mime-version:from:date:message-id:subject:to
         :content-type;
        bh=sZ4JlfA87yNFq9P8BULei3Xg1KnvKvlvfzh05tieTb0=;
        b=i0RVlselCjyITd6btNR1gH9iAi8qx82MOg2/wwwwLppxr8NufYxuHoVnooQx5I6hVE
         WwBrYshM+sPtajZCiJYa0aaaNhdX4/WK91Fz90kFoBxylqXg9Ydv/wwIBa9Zugx+z/zt
         PG7ibe9Ke7b6hrvzkvkcc8qcH71GW6EP05pD1bnzqTbtTOvVCVNx0IzE2v/5ZCq4L8pC
         kW80qgrEewMLMPVpkcw15fyYc+cnQrQPuAIWZTTTr3eJuxhehN4Byr+BAU55TXLeg1aC
         xv0yTsVsRLJFB3W4/GXjHnT7tJFRJMblQxcta7GwRba4ebiSmtdlgu5mQP2WVf6f2rss
         ugGg==
X-Received: by 10.112.24.226 with SMTP id x2mr4079450lbf.97.1358530671751;
 Fri, 18 Jan 2013 09:37:51 -0800 (PST)
MIME-Version: 1.0
Received: by 10.152.108.228 with HTTP; Fri, 18 Jan 2013 09:37:31 -0800 (PST)
From: =?ISO-8859-2?Q?Micha=B3_Brzezicki?= <mbrzezicki@gmail.com>
Date: Fri, 18 Jan 2013 18:37:31 +0100
Message-ID: <CAHF1uunQ7eegQqKbOdX4hyuAPYptSzCZL-Dz4dwaYuGq+mq9Pw@mail.gmail.com>
Subject: Tool for Lucene storage recovery
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=e0cb4efe35b41b310c04d39392c5
X-Virus-Checked: Checked by ClamAV on apache.org

--e0cb4efe35b41b310c04d39392c5
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

Hi,

I have created simple tool for recovering data from corrupted storage files
in lucene (*.fdt). Code is available here http://pastebin.com/nmF0j4np you
just have to implement method "handleDocument".

Hope you will never have to use it :)

--=20
Micha=C5=82

--e0cb4efe35b41b310c04d39392c5--

From java-user-return-54757-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Jan 18 18:09:25 2013
Return-Path: <java-user-return-54757-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 0DB22E83A
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 18 Jan 2013 18:09:25 +0000 (UTC)
Received: (qmail 52214 invoked by uid 500); 18 Jan 2013 18:09:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52165 invoked by uid 500); 18 Jan 2013 18:09:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52156 invoked by uid 99); 18 Jan 2013 18:09:22 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Jan 2013 18:09:22 +0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.82.176] (HELO mail-we0-f176.google.com) (74.125.82.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Jan 2013 18:09:16 +0000
Received: by mail-we0-f176.google.com with SMTP id r5so974898wey.21
        for <java-user@lucene.apache.org>; Fri, 18 Jan 2013 10:08:53 -0800 (PST)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=x-received:from:mime-version:content-type:subject:date:in-reply-to
         :to:references:message-id:x-mailer:x-gm-message-state;
        bh=J2N5jW7wvVdKTFKD3OWZmQTUZn390OnrjA61cUnb4XY=;
        b=OnzJHeOnAYyajfpuNyuv/04RYvuFOGV8OCgHeDho1V8rMbIf4lIFZdg6iM9N04rZ/X
         rjNjSO4aPJtk2AzHBlvvK0fSlsu2kNtLh87RP2fLyLY+oVxKu5f/PEb95eeQlO0ykFCK
         j4TYJ3/CdAA8BqiMXifQ2/dvus5RdoWpI9tfZJIHFMpGMHG+Z7erm9Ix9I6qhD/H/uIo
         o5ufXhCE30rHfGWbqnmUr4jX6MLUNUAWSybdcUd5vLKwZhFJnyweyrTDDF/Gpo7ThDRX
         Xs5rlmXFHdCCQsRbMT9xeHZKQkLKQWuPtUZvnucRUE/CKQPmnhuqLQwSnYjAMA7O0lSb
         fl/A==
X-Received: by 10.194.235.6 with SMTP id ui6mr15831063wjc.12.1358532533387;
        Fri, 18 Jan 2013 10:08:53 -0800 (PST)
Received: from [192.168.0.5] (host-78-150-53-251.as13285.net. [78.150.53.251])
        by mx.google.com with ESMTPS id s16sm8390447wii.0.2013.01.18.10.08.51
        (version=TLSv1 cipher=ECDHE-RSA-RC4-SHA bits=128/128);
        Fri, 18 Jan 2013 10:08:52 -0800 (PST)
From: Alan Woodward <alan@flax.co.uk>
Mime-Version: 1.0 (Apple Message framework v1283)
Content-Type: multipart/alternative; boundary="Apple-Mail=_6A680FB0-0BD6-440E-AD23-BD4866D4A0C6"
Subject: Re: SpanNearQuery with two boundaries
Date: Fri, 18 Jan 2013 18:08:50 +0000
In-Reply-To: <51881358525626@webcorp1h.yandex-team.ru>
To: java-user@lucene.apache.org
References: <51881358525626@webcorp1h.yandex-team.ru>
Message-Id: <6B68350D-7A66-4687-AC5E-8B9EFDAC8B75@flax.co.uk>
X-Mailer: Apple Mail (2.1283)
X-Gm-Message-State: ALoCoQnxaLpcJjF3kq1s2y1jUVUwdjx5G37rbCa3Tp8nWtXBzVHjaNhSj2HtNUoGCgDPJSNAzQfv
X-Virus-Checked: Checked by ClamAV on apache.org

--Apple-Mail=_6A680FB0-0BD6-440E-AD23-BD4866D4A0C6
Content-Transfer-Encoding: quoted-printable
Content-Type: text/plain;
	charset=us-ascii

Hi Igor,

You could try wrapping the two cases in a SpanNotQuery:
	SpanNot(SpanNear(runs, cat, 10), SpanNear(runs, cat, 3))

That should return documents that have runs within 10 positions of cat, =
as long as they don't overlap with runs within 3 positions of cat.

Alan Woodward
www.flax.co.uk


On 18 Jan 2013, at 16:13, Igor Shalyminov wrote:

> Hello!
>=20
> I want to perform search queries like this one:
> word:"dog" \1 word:"runs" (\3 \10) word:"cat"
>=20
> It is thus something like SpanNearQuery, but with two boundaries - =
minimum and maximum distance between the terms (which in the \1-case =
would be equal).
> Syntax (as above, fictional:) itself doesn't matter, I just want to =
know if one is able to build this type of query based on existing =
(Lucene 4.0.0) query classes.=20
>=20
> --=20
> Best Regards,
> Igor Shalyminov
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20


--Apple-Mail=_6A680FB0-0BD6-440E-AD23-BD4866D4A0C6--

From java-user-return-54758-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Jan 18 18:14:06 2013
Return-Path: <java-user-return-54758-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id B0E1CE84E
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 18 Jan 2013 18:14:06 +0000 (UTC)
Received: (qmail 64217 invoked by uid 500); 18 Jan 2013 18:14:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64155 invoked by uid 500); 18 Jan 2013 18:14:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64147 invoked by uid 99); 18 Jan 2013 18:14:04 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Jan 2013 18:14:04 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of SRS0=ckrkok=LL=basetechnology.com=jack@yourhostingaccount.com designates 65.254.253.117 as permitted sender)
Received: from [65.254.253.117] (HELO mailout14.yourhostingaccount.com) (65.254.253.117)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Jan 2013 18:13:57 +0000
Received: from mailscan06.yourhostingaccount.com ([10.1.15.6] helo=mailscan06.yourhostingaccount.com)
	by mailout14.yourhostingaccount.com with esmtp (Exim)
	id 1TwGRc-0004CC-VA
	for java-user@lucene.apache.org; Fri, 18 Jan 2013 13:13:36 -0500
Received: from impout02.yourhostingaccount.com ([10.1.55.2] helo=impout02.yourhostingaccount.com)
	by mailscan06.yourhostingaccount.com with esmtp (Exim)
	id 1TwGRc-0001LE-JK
	for java-user@lucene.apache.org; Fri, 18 Jan 2013 13:13:36 -0500
Received: from authsmtp03.yourhostingaccount.com ([10.1.18.3])
	by impout02.yourhostingaccount.com with NO UCE
	id pWDc1k00A03yUm201WDcbd; Fri, 18 Jan 2013 13:13:36 -0500
X-Authority-Analysis: v=2.0 cv=HIVB5/Rv c=1 sm=1
 a=yH02RjTyxywMAIqhn74x1Q==:17 a=aQzbgH187woA:10 a=57nk5OFxojgA:10
 a=3jZET7lWBKwA:10 a=8nJEP1OIZ-IA:10 a=jvYhGVW7AAAA:8 a=v33ptc6-9loA:10
 a=mV9VRH-2AAAA:8 a=KRQ10mdHAAAA:8 a=R6Ds3y97AAAA:8 a=23GH71o-DftP25y-NQcA:9
 a=wPNLvfGTeEIA:10 a=HL6sylNKkhQA:10 a=maIvl2Yd+fJND/e85XqkCw==:117
X-EN-OrigOutIP: 10.1.18.3
X-EN-IMPSID: pWDc1k00A03yUm201WDcbd
Received: from 207-237-113-14.c3-0.nyr-ubr1.nyr.ny.cable.rcn.com ([207.237.113.14] helo=JackKrupansky)
	by authsmtp03.yourhostingaccount.com with esmtpa (Exim)
	id 1TwGRa-0000A5-0s
	for java-user@lucene.apache.org; Fri, 18 Jan 2013 13:13:34 -0500
Message-ID: <689E420649DD4EC3BEBE1BC4046CD5D6@JackKrupansky>
From: "Jack Krupansky" <jack@basetechnology.com>
To: <java-user@lucene.apache.org>
References: <51881358525626@webcorp1h.yandex-team.ru> <6B68350D-7A66-4687-AC5E-8B9EFDAC8B75@flax.co.uk>
In-Reply-To: <6B68350D-7A66-4687-AC5E-8B9EFDAC8B75@flax.co.uk>
Subject: Re: SpanNearQuery with two boundaries
Date: Fri, 18 Jan 2013 13:13:11 -0500
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
Importance: Normal
X-Mailer: Microsoft Windows Live Mail 15.4.3555.308
X-MimeOLE: Produced By Microsoft MimeOLE V15.4.3555.308
X-EN-UserInfo: e0a4b55451ed9f27313ebf02e3d4348d:fc4a93e1349e680c52bdd723c0ab3ef6
X-EN-AuthUser: jack@basetechnology.com
Sender:  "Jack Krupansky" <jack@basetechnology.com>
X-EN-OrigIP: 207.237.113.14
X-EN-OrigHost: 207-237-113-14.c3-0.nyr-ubr1.nyr.ny.cable.rcn.com
X-Virus-Checked: Checked by ClamAV on apache.org

+1

I think that accurately states the semantics of the operation you want.

-- Jack Krupansky

-----Original Message----- 
From: Alan Woodward
Sent: Friday, January 18, 2013 1:08 PM
To: java-user@lucene.apache.org
Subject: Re: SpanNearQuery with two boundaries

Hi Igor,

You could try wrapping the two cases in a SpanNotQuery:
SpanNot(SpanNear(runs, cat, 10), SpanNear(runs, cat, 3))

That should return documents that have runs within 10 positions of cat, as 
long as they don't overlap with runs within 3 positions of cat.

Alan Woodward
www.flax.co.uk


On 18 Jan 2013, at 16:13, Igor Shalyminov wrote:

> Hello!
>
> I want to perform search queries like this one:
> word:"dog" \1 word:"runs" (\3 \10) word:"cat"
>
> It is thus something like SpanNearQuery, but with two boundaries - minimum 
> and maximum distance between the terms (which in the \1-case would be 
> equal).
> Syntax (as above, fictional:) itself doesn't matter, I just want to know 
> if one is able to build this type of query based on existing (Lucene 
> 4.0.0) query classes.
>
> -- 
> Best Regards,
> Igor Shalyminov
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54759-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Jan 18 18:17:48 2013
Return-Path: <java-user-return-54759-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id D4251E866
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 18 Jan 2013 18:17:47 +0000 (UTC)
Received: (qmail 77150 invoked by uid 500); 18 Jan 2013 18:17:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77090 invoked by uid 500); 18 Jan 2013 18:17:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77082 invoked by uid 99); 18 Jan 2013 18:17:45 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Jan 2013 18:17:45 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.220.47] (HELO mail-pa0-f47.google.com) (209.85.220.47)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Jan 2013 18:17:39 +0000
Received: by mail-pa0-f47.google.com with SMTP id fa10so2261544pad.6
        for <java-user@lucene.apache.org>; Fri, 18 Jan 2013 10:17:17 -0800 (PST)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=x-received:mime-version:in-reply-to:references:from:date:message-id
         :subject:to:content-type:x-gm-message-state;
        bh=wzKeS/oXidk/yB4XZBrXACbUVjlMSlvH/fb3gdSHREU=;
        b=gz2MX3K9gOHlgifpm1Lcyyhfo2zOlciNILaTqgFi9zIhFNZB96JwsdfqLjyedyrjuD
         2JEllF5ZXIy3T8xcYhq5i8YETPNfUkvhgh1e02lutgGW53HQNRk/fHfvL67DqSdil+i4
         Pd7u1JAk9z32dFT81J29yIHj3s+gJ2dot4mfDKol6wkmz4w2q1+d5HVXgg097MxWolr+
         2GFfCdw3JKVgxm+OoPo/wzeXDKq1ciUFLIX1Cq6MwO02wOKOM5ccXjoZdt+v2H0FtGon
         FarF/C7PUNXIdHQldpsaahdesYyDkuKFzjp2sWTQKZ/97vxo65oGtUrhMakMYtNJD9Ia
         edBQ==
X-Received: by 10.68.222.232 with SMTP id qp8mr26485631pbc.99.1358533037794;
 Fri, 18 Jan 2013 10:17:17 -0800 (PST)
MIME-Version: 1.0
Received: by 10.68.154.73 with HTTP; Fri, 18 Jan 2013 10:16:57 -0800 (PST)
In-Reply-To: <CAOX4E5EZv0NhdcYKexZSWWjpaR1f0va6FiZt-aEwc=khc3ki_g@mail.gmail.com>
References: <CAOX4E5EZv0NhdcYKexZSWWjpaR1f0va6FiZt-aEwc=khc3ki_g@mail.gmail.com>
From: Michael McCandless <lucene@mikemccandless.com>
Date: Fri, 18 Jan 2013 13:16:57 -0500
Message-ID: <CAL8PwkZRb_hAeBYfwSeh595OmhvMd3sXq2wE=FBtcUFp0MKEKQ@mail.gmail.com>
Subject: Re: Is LogByteSizeMergePolicy deterministic?
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Gm-Message-State: ALoCoQlRprX+7tOrAQi5r+xwgRqxQP5lfH8M/7XufECeZeMaGaAV66oDy7egm1MI4yQ1FEnUPRqZ
X-Virus-Checked: Checked by ClamAV on apache.org

You must also use only a single indexing thread.

And you must use SerialMergeScheduler.

If you do that, I think it will be deterministic.

But don't rely on this ... this is runtime behavior and can suddenly
change between releases ...

Mike McCandless

http://blog.mikemccandless.com

On Fri, Jan 18, 2013 at 10:39 AM, Apostolis Xekoukoulotakis
<xekoukou@gmail.com> wrote:
> I want to replicate an index from multiple replicas at the same time.
>
> Those replicas have been given the same documents and at the same order.
>
> Will the files be the same across all replicas?
>
>
>
> --
>
>
> Sincerely yours,
>
>      Apostolis Xekoukoulotakis

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54760-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Jan 18 19:54:25 2013
Return-Path: <java-user-return-54760-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 681B4E939
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 18 Jan 2013 19:54:25 +0000 (UTC)
Received: (qmail 65302 invoked by uid 500); 18 Jan 2013 19:54:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65221 invoked by uid 500); 18 Jan 2013 19:54:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65175 invoked by uid 99); 18 Jan 2013 19:54:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Jan 2013 19:54:22 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ishalyminov@yandex-team.ru designates 95.108.253.144 as permitted sender)
Received: from [95.108.253.144] (HELO forward19.mail.yandex.net) (95.108.253.144)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Jan 2013 19:54:17 +0000
Received: from webcorp2g.yandex-team.ru (webcorp2g.yandex-team.ru [95.108.252.6])
	by forward19.mail.yandex.net (Yandex) with ESMTP id CCAB41120FAC
	for <java-user@lucene.apache.org>; Fri, 18 Jan 2013 23:53:54 +0400 (MSK)
Received: from 127.0.0.1 (localhost.localdomain [127.0.0.1])
	by webcorp2g.yandex-team.ru (Yandex) with ESMTP id B06DC80FA;
	Fri, 18 Jan 2013 23:53:54 +0400 (MSK)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yandex-team.ru;
	s=default; t=1358538834;
	bh=oUfxpjiBFSnuqXYFKmPmzvHrpIctF2hAb4EJ+rurmyE=;
	h=From:To:In-Reply-To:References:Subject:Date;
	b=GZoAQVfFpns54ZN78Tf7LRafLlSrz6hdwwjM0hj/MayYm0UTdUUyAlauNGBb2yeVO
	 xuAFJ9cVZMarWZWVVzmzLZMAaeYJprWANpysCEE4gxcBYvsBd4Ks495foFjSslGh+W
	 QV/xG72gBVVwriCHgCtdp/hSm6eU3Du0yFS7IjRk=
Received: from v3-150-91.yandex.net (v3-150-91.yandex.net [84.201.150.91]) by webcorp2g.yandex-team.ru with HTTP;
	Fri, 18 Jan 2013 23:53:54 +0400
From: Igor Shalyminov <ishalyminov@yandex-team.ru>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
In-Reply-To: <689E420649DD4EC3BEBE1BC4046CD5D6@JackKrupansky>
References: <51881358525626@webcorp1h.yandex-team.ru> <6B68350D-7A66-4687-AC5E-8B9EFDAC8B75@flax.co.uk> <689E420649DD4EC3BEBE1BC4046CD5D6@JackKrupansky>
Subject: Re: SpanNearQuery with two boundaries
MIME-Version: 1.0
Message-Id: <9211358538834@webcorp2g.yandex-team.ru>
X-Mailer: Yamail [ http://yandex.ru ] 5.0
Date: Fri, 18 Jan 2013 23:53:54 +0400
Content-Transfer-Encoding: 8bit
Content-Type: text/plain; charset=koi8-r
X-Virus-Checked: Checked by ClamAV on apache.org

Alan and Jack,

That's it, thank you!

-- 
Best Regards,
Igor

18.01.2013, 22:14, "Jack Krupansky" <jack@basetechnology.com>:
> +1
>
> I think that accurately states the semantics of the operation you want.
>
> -- Jack Krupansky
>
> -----Original Message-----
> From: Alan Woodward
> Sent: Friday, January 18, 2013 1:08 PM
> To: java-user@lucene.apache.org
> Subject: Re: SpanNearQuery with two boundaries
>
> Hi Igor,
>
> You could try wrapping the two cases in a SpanNotQuery:
> SpanNot(SpanNear(runs, cat, 10), SpanNear(runs, cat, 3))
>
> That should return documents that have runs within 10 positions of cat, as
> long as they don't overlap with runs within 3 positions of cat.
>
> Alan Woodward
> www.flax.co.uk
>
> On 18 Jan 2013, at 16:13, Igor Shalyminov wrote:
>
>> Hello!
>>
>> I want to perform search queries like this one:
>> word:"dog" \1 word:"runs" (\3 \10) word:"cat"
>>
>> It is thus something like SpanNearQuery, but with two boundaries - minimum
>> and maximum distance between the terms (which in the \1-case would be
>> equal).
>> Syntax (as above, fictional:) itself doesn't matter, I just want to know
>> if one is able to build this type of query based on existing (Lucene
>> 4.0.0) query classes.
>>
>> --
>> Best Regards,
>> Igor Shalyminov
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54761-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Jan 18 21:04:20 2013
Return-Path: <java-user-return-54761-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id B7CE3DEC8
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 18 Jan 2013 21:04:20 +0000 (UTC)
Received: (qmail 30965 invoked by uid 500); 18 Jan 2013 21:04:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30916 invoked by uid 500); 18 Jan 2013 21:04:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30902 invoked by uid 99); 18 Jan 2013 21:04:18 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Jan 2013 21:04:18 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of xekoukou@gmail.com designates 74.125.82.53 as permitted sender)
Received: from [74.125.82.53] (HELO mail-wg0-f53.google.com) (74.125.82.53)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Jan 2013 21:04:11 +0000
Received: by mail-wg0-f53.google.com with SMTP id fn15so2387051wgb.8
        for <java-user@lucene.apache.org>; Fri, 18 Jan 2013 13:03:51 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:x-received:in-reply-to:references:date:message-id
         :subject:from:to:content-type;
        bh=TKIN5Kw1Nh2dn9NDOK+ssdiTIdeRoQ3+Zb5QipIoJes=;
        b=n/IxfhiULXk0H5dkdQ3qBYAIUuD3K22bobBZc9rFh5uAF4pk1n6ra55SjMUmSqYBop
         GRV6paqEryqYWEyxnigJAkagYKXAFE7LEZrpW2lvQAhKIuFs8hC42iVsovOtXBwjZvTD
         iYIS8yyxhvjMMKu1jBuDa5xvGdtxaCh4z+jKQFvOX7j+teOwv0bhhsAuUxo+Idx/bzsW
         5eKZnfril/X+Q4I61QMG/6zbEBIp8bO1z1GJDuLIc6PVaTpMUiHCn162P2v0jrtKeks6
         YkVmjvDGCZcLgT+yy8JEaxyH104T/bR/Tkzg/VfnhyP5sTXtaLRGVm6kMEfhFHZGdUOv
         oOrA==
MIME-Version: 1.0
X-Received: by 10.194.21.70 with SMTP id t6mr16258919wje.42.1358543031336;
 Fri, 18 Jan 2013 13:03:51 -0800 (PST)
Received: by 10.217.70.72 with HTTP; Fri, 18 Jan 2013 13:03:51 -0800 (PST)
In-Reply-To: <CAL8PwkZRb_hAeBYfwSeh595OmhvMd3sXq2wE=FBtcUFp0MKEKQ@mail.gmail.com>
References: <CAOX4E5EZv0NhdcYKexZSWWjpaR1f0va6FiZt-aEwc=khc3ki_g@mail.gmail.com>
	<CAL8PwkZRb_hAeBYfwSeh595OmhvMd3sXq2wE=FBtcUFp0MKEKQ@mail.gmail.com>
Date: Fri, 18 Jan 2013 23:03:51 +0200
Message-ID: <CAOX4E5FdgvjiCob1d406PSTu8uL9zu2Ay2MYUuCFLcMYiXB7Mw@mail.gmail.com>
Subject: Re: Is LogByteSizeMergePolicy deterministic?
From: Apostolis Xekoukoulotakis <xekoukou@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=047d7b5d3ef6cb7e0a04d39672c3
X-Virus-Checked: Checked by ClamAV on apache.org

--047d7b5d3ef6cb7e0a04d39672c3
Content-Type: text/plain; charset=ISO-8859-1

Thanks Michael.

I am mostly duplicating the solrCloud implementation so as to reduce the
complexity and be able to use custom collectors and the
LogByteSizeMergePolicy.
(in order to perform an ordered join with exterior data from a database)

Most of the things I want are under development in SolrCloud
(1<https://issues.apache.org/jira/browse/SOLR-2592>
)

2013/1/18 Michael McCandless <lucene@mikemccandless.com>

> You must also use only a single indexing thread.
>
> And you must use SerialMergeScheduler.
>
> If you do that, I think it will be deterministic.
>
> But don't rely on this ... this is runtime behavior and can suddenly
> change between releases ...
>
> Mike McCandless
>
> http://blog.mikemccandless.com
>
> On Fri, Jan 18, 2013 at 10:39 AM, Apostolis Xekoukoulotakis
> <xekoukou@gmail.com> wrote:
> > I want to replicate an index from multiple replicas at the same time.
> >
> > Those replicas have been given the same documents and at the same order.
> >
> > Will the files be the same across all replicas?
> >
> >
> >
> > --
> >
> >
> > Sincerely yours,
> >
> >      Apostolis Xekoukoulotakis
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 


Sincerely yours,

     Apostolis Xekoukoulotakis

--047d7b5d3ef6cb7e0a04d39672c3--

From java-user-return-54762-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Sat Jan 19 07:59:51 2013
Return-Path: <java-user-return-54762-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id C3561E0FD
	for <apmail-lucene-java-user-archive@www.apache.org>; Sat, 19 Jan 2013 07:59:51 +0000 (UTC)
Received: (qmail 88741 invoked by uid 500); 19 Jan 2013 07:59:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88468 invoked by uid 500); 19 Jan 2013 07:59:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88369 invoked by uid 99); 19 Jan 2013 07:59:45 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 19 Jan 2013 07:59:45 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of simon.willnauer@gmail.com designates 209.85.217.173 as permitted sender)
Received: from [209.85.217.173] (HELO mail-lb0-f173.google.com) (209.85.217.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 19 Jan 2013 07:59:39 +0000
Received: by mail-lb0-f173.google.com with SMTP id gf7so2352868lbb.4
        for <java-user@lucene.apache.org>; Fri, 18 Jan 2013 23:59:19 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:x-received:reply-to:in-reply-to:references:date
         :message-id:subject:from:to:content-type:content-transfer-encoding;
        bh=GT18uLLapIvOHaWP8NFDKqRAHVdPKkIXmWLwbSGumuM=;
        b=pKuokvq3Q2chi4NQaH6LWwimw6n44TK04aQMP/KG7cnOPk/iZGxFIAxVlgFN2s7yQH
         eVY+2k6WrVscKgm605FiQVvQTP00Ykr9n1axhlEmvwLiAycD+6gCs8AJs0gf+oY9W12V
         74BNaagttENuECP3a6J7o+WsdrECktck8mzKlO9zpK5uKacsSIYrYA1l6a+e9scwo6Y2
         ZKpU3EuTpsz+948XbJOggZhaqza1rGkXSIiOTVHEtoBz2OX3HUqtQ4DakhZz6K+RXqVh
         cuWPi0Dzmv9x9T6OdTOI8E3qeEzYf03Ja+CPfNxv9voI8NuCxv+NwRyv1mMiMgcjxN0v
         XqjA==
MIME-Version: 1.0
X-Received: by 10.112.8.129 with SMTP id r1mr4826185lba.127.1358582359194;
 Fri, 18 Jan 2013 23:59:19 -0800 (PST)
Received: by 10.112.134.74 with HTTP; Fri, 18 Jan 2013 23:59:19 -0800 (PST)
Reply-To: simon.willnauer@gmail.com
In-Reply-To: <CAHF1uunQ7eegQqKbOdX4hyuAPYptSzCZL-Dz4dwaYuGq+mq9Pw@mail.gmail.com>
References: <CAHF1uunQ7eegQqKbOdX4hyuAPYptSzCZL-Dz4dwaYuGq+mq9Pw@mail.gmail.com>
Date: Sat, 19 Jan 2013 08:59:19 +0100
Message-ID: <CAAHmpkg5ONaGzsRdbdB6DCV2cOM-B46unkOXY1wMvSzZRvOrAQ@mail.gmail.com>
Subject: Re: Tool for Lucene storage recovery
From: Simon Willnauer <simon.willnauer@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

hey,

do you wanna open a jira issue for this and attach your code? this
might help others too and if the shit hits the fan its good to have
something in the lucene jar that can bring some data back.

simon
On Fri, Jan 18, 2013 at 6:37 PM, Micha=C5=82 Brzezicki <mbrzezicki@gmail.co=
m> wrote:
> in lucene (*.fdt). Code is available here http://pastebin.com/nmF0j4np yo=
u

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54763-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Sat Jan 19 21:59:03 2013
Return-Path: <java-user-return-54763-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id E347FDF8A
	for <apmail-lucene-java-user-archive@www.apache.org>; Sat, 19 Jan 2013 21:59:02 +0000 (UTC)
Received: (qmail 59214 invoked by uid 500); 19 Jan 2013 21:59:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59144 invoked by uid 500); 19 Jan 2013 21:59:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59122 invoked by uid 99); 19 Jan 2013 21:59:00 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 19 Jan 2013 21:59:00 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of emmanuel.gosse@gmail.com designates 209.85.219.53 as permitted sender)
Received: from [209.85.219.53] (HELO mail-oa0-f53.google.com) (209.85.219.53)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 19 Jan 2013 21:58:52 +0000
Received: by mail-oa0-f53.google.com with SMTP id j6so4865838oag.40
        for <java-user@lucene.apache.org>; Sat, 19 Jan 2013 13:58:32 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=x-received:mime-version:from:date:message-id:subject:to
         :content-type;
        bh=bmjxV3f2ZvO7wfUdXQn0hxNId1HkEn+2sumx3WtIxDw=;
        b=Fae2TIbt0GgJ6tresZ/in23c4+oo+F8nieNP4GFoinLbKDvm9FreW02pGHsSAa200x
         8DPWT8/ibq0fC+jnD/P1rnFHlXo5kcQqpYXP/jaXrwjCJfXgFOqSfY4hpQuRv5iAdNsb
         eBeMsyZ90cAjKAXG1YISGc4luM3Ofxl3SCmpXGhlF+a9fq0ZesxDYxg4iOC3es+nu1af
         Ad3Hy/FP+bqM2D2ST7VHEcumPTdyPod0oEsG0OlV03PJ5CAYlK40zyVwRLJPBeZbRQPe
         Y/+c5JF934wVoXCgM8V+rrR2lSb4WfJqh5zwBAT8gJIxcUbLgEpS/Sn+AbJx4fAGacnl
         ++Bw==
X-Received: by 10.182.130.99 with SMTP id od3mr10286256obb.61.1358632712047;
 Sat, 19 Jan 2013 13:58:32 -0800 (PST)
MIME-Version: 1.0
Received: by 10.76.110.102 with HTTP; Sat, 19 Jan 2013 13:57:51 -0800 (PST)
From: emmanuel Gosse <emmanuel.gosse@gmail.com>
Date: Sat, 19 Jan 2013 22:57:51 +0100
Message-ID: <CAHgjhBH3Lw7E5ok0hdgpZuQrhB4E_Xku8MZ5b-O=wAiGVEg9Wg@mail.gmail.com>
Subject: FieldCacheTermsFilter performance
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=14dae93b61342e8a7e04d3ab548d
X-Virus-Checked: Checked by ClamAV on apache.org

--14dae93b61342e8a7e04d3ab548d
Content-Type: text/plain; charset=ISO-8859-1

Hi,

I would like to share a performance problem about FieldCacheTermsFilter
between 3.0.3 and 4.0.0 Lucene versions.

I've made tests with the same application with 3.0.3 (my production
version) and 4.0.0.
And I found a "big" difference of response time.

I run "real life" injection of 400 000 queries and I obtain the average of
time response.
I used to run this type of tests to validate that we have no performance
regression.

So I've made other tests to find out where comes this difference.
Desactivating faceting or changing Directory used or other more...

And for one test, I desactivated the filters (I use only
FieldCacheTermsFilter) and I obtained the same average of time response.

To give some data :
20 millions of documents
3 indexes under a multireader
no indexations, only searcher (indexation is not implemented in this app)
400 000 queries with jmeter

Test :

3.0.3 or 4.0.0
Queries without filters : 60ms (average of time response)

Queries with filters:
3.0.3 : 150ms
4.0.0 : 400ms

The code difference of my application is only the required one to plug with
each Lucene version.

The fields used to filter are not stored and in 4.0.0 version, are
stringfield.
I checked that caches of fieldCache dont move for the test.

I have no more ideas to seek. Maybe I've not understood which type of field
I should use.

Emmanuel

-----------
Emmanuel Gosse
Fnac.Com <http://www.fnac.com>

--14dae93b61342e8a7e04d3ab548d--

From java-user-return-54764-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Sun Jan 20 09:57:48 2013
Return-Path: <java-user-return-54764-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 13BB3EC7E
	for <apmail-lucene-java-user-archive@www.apache.org>; Sun, 20 Jan 2013 09:57:48 +0000 (UTC)
Received: (qmail 63638 invoked by uid 500); 20 Jan 2013 09:57:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63316 invoked by uid 500); 20 Jan 2013 09:57:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63290 invoked by uid 99); 20 Jan 2013 09:57:42 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 20 Jan 2013 09:57:42 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of uwe@thetaphi.de designates 188.138.97.18 as permitted sender)
Received: from [188.138.97.18] (HELO mail.sd-datasolutions.de) (188.138.97.18)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 20 Jan 2013 09:57:37 +0000
Received: from VEGA (port-92-196-61-239.dynamic.qsc.de [92.196.61.239])
	by mail.sd-datasolutions.de (Postfix) with ESMTPSA id 2D71C14AA03E
	for <java-user@lucene.apache.org>; Sun, 20 Jan 2013 09:57:15 +0000 (UTC)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <CAHgjhBH3Lw7E5ok0hdgpZuQrhB4E_Xku8MZ5b-O=wAiGVEg9Wg@mail.gmail.com>
In-Reply-To: <CAHgjhBH3Lw7E5ok0hdgpZuQrhB4E_Xku8MZ5b-O=wAiGVEg9Wg@mail.gmail.com>
Subject: RE: FieldCacheTermsFilter performance
Date: Sun, 20 Jan 2013 10:57:15 +0100
Message-ID: <014501cdf6f4$871c62d0$95552870$@thetaphi.de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="UTF-8"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Outlook 14.0
Thread-Index: AQElfrpKCR9OwiGbUgSP2qFkXm+5ZZmi6eZA
Content-Language: de
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

in Lucene 4.0 I would recommend to use TermsFilter (from queries =
module), not FieldCacheTermsFilter, because the term dictionary is much =
faster and it is in this case better to use the posting lists, instead =
of scanning all documents (which FCTermsCache does). How many filter =
terms do you have? Is the filter selective? To further improve, use =
CachingWrapperFilter, too (this will cache filter results, which is =
useful if you have a set of Filters/terms that are used quite often).
The problem with FCTermsFilter is: It scans all documents from beginning =
to end and looks them up the terms cache. In Lucene 4.0 the structure of =
the FieldCache changed to be more memory efficient (which does not hurt =
the primary use-case of sorting), but scanning all documents and =
resolving all terms is not always the best option (this also heavily =
relies on your index structure, FCTermsFilter may still be faster under =
some circumstances).

Uwe
-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de


> -----Original Message-----
> From: emmanuel Gosse [mailto:emmanuel.gosse@gmail.com]
> Sent: Saturday, January 19, 2013 10:58 PM
> To: java-user@lucene.apache.org
> Subject: FieldCacheTermsFilter performance
>=20
> Hi,
>=20
> I would like to share a performance problem about =
FieldCacheTermsFilter
> between 3.0.3 and 4.0.0 Lucene versions.
>=20
> I've made tests with the same application with 3.0.3 (my production
> version) and 4.0.0.
> And I found a "big" difference of response time.
>=20
> I run "real life" injection of 400 000 queries and I obtain the =
average of time
> response.
> I used to run this type of tests to validate that we have no =
performance
> regression.
>=20
> So I've made other tests to find out where comes this difference.
> Desactivating faceting or changing Directory used or other more...
>=20
> And for one test, I desactivated the filters (I use only
> FieldCacheTermsFilter) and I obtained the same average of time =
response.
>=20
> To give some data :
> 20 millions of documents
> 3 indexes under a multireader
> no indexations, only searcher (indexation is not implemented in this =
app)
> 400 000 queries with jmeter
>=20
> Test :
>=20
> 3.0.3 or 4.0.0
> Queries without filters : 60ms (average of time response)
>=20
> Queries with filters:
> 3.0.3 : 150ms
> 4.0.0 : 400ms
>=20
> The code difference of my application is only the required one to plug =
with
> each Lucene version.
>=20
> The fields used to filter are not stored and in 4.0.0 version, are =
stringfield.
> I checked that caches of fieldCache dont move for the test.
>=20
> I have no more ideas to seek. Maybe I've not understood which type of =
field
> I should use.
>=20
> Emmanuel
>=20
> -----------
> Emmanuel Gosse
> Fnac.Com <http://www.fnac.com>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54765-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Sun Jan 20 19:05:13 2013
Return-Path: <java-user-return-54765-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 34CF6ED95
	for <apmail-lucene-java-user-archive@www.apache.org>; Sun, 20 Jan 2013 19:05:13 +0000 (UTC)
Received: (qmail 17712 invoked by uid 500); 20 Jan 2013 19:05:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17620 invoked by uid 500); 20 Jan 2013 19:05:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17612 invoked by uid 99); 20 Jan 2013 19:05:10 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 20 Jan 2013 19:05:10 +0000
X-ASF-Spam-Status: No, hits=2.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_SOFTFAIL
X-Spam-Check-By: apache.org
Received-SPF: softfail (nike.apache.org: transitioning domain of adam@labkey.com does not designate 66.111.4.29 as permitted sender)
Received: from [66.111.4.29] (HELO out5-smtp.messagingengine.com) (66.111.4.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 20 Jan 2013 19:05:02 +0000
Received: from compute3.internal (compute3.nyi.mail.srv.osa [10.202.2.43])
	by gateway1.nyi.mail.srv.osa (Postfix) with ESMTP id 52C5F20575
	for <java-user@lucene.apache.org>; Sun, 20 Jan 2013 14:04:41 -0500 (EST)
Received: from frontend1.nyi.mail.srv.osa ([10.202.2.160])
  by compute3.internal (MEProxy); Sun, 20 Jan 2013 14:04:41 -0500
DKIM-Signature: v=1; a=rsa-sha1; c=relaxed/relaxed; d=
	messagingengine.com; h=from:to:subject:date:message-id
	:mime-version:content-type; s=smtpout; bh=kV+DRJZq7Ywzb1UR/iNNN0
	Z8ko8=; b=LcZH7Qjz9yv17ifZrA5zJ8QCker+FnyFAOEw4XXKH213ZoyyO4lN/y
	8IcuJfGSClHxpeA9cd3mVj3JPw8kTPhv8tLz+lLEu6O1Dx5HfpZRKYSYAciIu5yl
	I5DUus9bjmpPHZwLo3RAmcfspU0Et3EFbcXEpVlF3DGFaIGagmsxs=
X-Sasl-enc: RejK7n4jzzlkzdTSyKuBajsOhbLhf2RzG0uRMz9VKyKB 1358708680
Received: from AdamE6420 (unknown [76.121.169.15])
	by mail.messagingengine.com (Postfix) with ESMTPA id 99FC18E081E
	for <java-user@lucene.apache.org>; Sun, 20 Jan 2013 14:04:40 -0500 (EST)
From: "Adam Rauch" <adam@labkey.com>
To: <java-user@lucene.apache.org>
Subject: TextField constructors
Date: Sun, 20 Jan 2013 11:04:43 -0800
Message-ID: <035b01cdf741$026ee790$074cb6b0$@labkey.com>
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_035C_01CDF6FD.F44C43D0"
X-Mailer: Microsoft Outlook 14.0
Thread-Index: Ac33PxAR7StVXwi2RjmiDF8w4mt7vg==
Content-Language: en-us
X-Virus-Checked: Checked by ClamAV on apache.org

------=_NextPart_000_035C_01CDF6FD.F44C43D0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

The FieldType section of the 4.0 migration guide
(http://lucene.apache.org/core/4_0_0/MIGRATE.html) states:

If you did this before (value can be String or Reader):

new Field("field", value, Field.Store.NO, Field.Indexed.ANALYZED)

you can now do this:

new TextField("field", value)

 

But 4.0 has no TextField(String, String) constructor.  Not a big deal, but
it would be nice to add one. or at least correct the migration guide.

 

Totally separate: I think the dev@lucene section of the mailing lists page
(http://lucene.apache.org/core/discussion.html) should reference "java-user"
instead of "solr-user."

 

Thanks,

Adam


------=_NextPart_000_035C_01CDF6FD.F44C43D0--


From java-user-return-54766-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Sun Jan 20 19:27:34 2013
Return-Path: <java-user-return-54766-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 5CF78EFBA
	for <apmail-lucene-java-user-archive@www.apache.org>; Sun, 20 Jan 2013 19:27:34 +0000 (UTC)
Received: (qmail 64072 invoked by uid 500); 20 Jan 2013 19:27:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64033 invoked by uid 500); 20 Jan 2013 19:27:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64025 invoked by uid 99); 20 Jan 2013 19:27:32 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 20 Jan 2013 19:27:32 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.210.50] (HELO mail-da0-f50.google.com) (209.85.210.50)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 20 Jan 2013 19:27:25 +0000
Received: by mail-da0-f50.google.com with SMTP id h15so2364391dan.37
        for <java-user@lucene.apache.org>; Sun, 20 Jan 2013 11:27:04 -0800 (PST)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=x-received:mime-version:in-reply-to:references:from:date:message-id
         :subject:to:content-type:x-gm-message-state;
        bh=VrUiiCPcg3stPCYAYGc2RCBYl1FTUNhXMmFvfUykKW8=;
        b=C0GPDQ/ZyzNR5+iBnU94nt/JSV+N5p4O8VoOVkEBq6ednmUzsesJDl+Ostzq+kOyVh
         uwaOlzL9M8nY3a5FEPzjVWqqzOGibF7vU3EgUP/lFSCRIp5B6Puv57gR75yGdOD3lRB8
         0mkGQIQiubfGCPbFIAbNDZbA3op7TTQMFSyMsfx6++UJjthesPXqHZfFFgQohHB525Wf
         VZ8VUpYWimZYF93NChqs5MBZXwdYghcI0Ih5fAi25/BQkUvwtj62LULBGJsECTsp79Ub
         ehvTYOD4esqWYB2y3T2Db0koZSIp5bVFcKyEla1ay4b2jRAkeLlgHHml6loKGUFYF8BF
         gcJQ==
X-Received: by 10.68.220.162 with SMTP id px2mr24176145pbc.109.1358710024063;
 Sun, 20 Jan 2013 11:27:04 -0800 (PST)
MIME-Version: 1.0
Received: by 10.68.154.73 with HTTP; Sun, 20 Jan 2013 11:26:44 -0800 (PST)
In-Reply-To: <035b01cdf741$026ee790$074cb6b0$@labkey.com>
References: <035b01cdf741$026ee790$074cb6b0$@labkey.com>
From: Michael McCandless <lucene@mikemccandless.com>
Date: Sun, 20 Jan 2013 14:26:44 -0500
Message-ID: <CAL8PwkZpDgASo=ewuigF=XCO6i-oZsC=bmKuUdGWJV0p+KEOBw@mail.gmail.com>
Subject: Re: TextField constructors
To: java-user@lucene.apache.org, adam@labkey.com
Content-Type: text/plain; charset=ISO-8859-1
X-Gm-Message-State: ALoCoQmEHMwhoheBU0zulPaw8LhUqzV2N8Cfu7gaaRElMPc3K7xGzC629Q5JUjs55xowjkZFMkg5
X-Virus-Checked: Checked by ClamAV on apache.org

On Sun, Jan 20, 2013 at 2:04 PM, Adam Rauch <adam@labkey.com> wrote:
> The FieldType section of the 4.0 migration guide
> (http://lucene.apache.org/core/4_0_0/MIGRATE.html) states:
>
> If you did this before (value can be String or Reader):
>
> new Field("field", value, Field.Store.NO, Field.Indexed.ANALYZED)
>
> you can now do this:
>
> new TextField("field", value)
>
>
>
> But 4.0 has no TextField(String, String) constructor.  Not a big deal, but
> it would be nice to add one. or at least correct the migration guide.

Woops, I'll fix MIGRATE.txt

> Totally separate: I think the dev@lucene section of the mailing lists page
> (http://lucene.apache.org/core/discussion.html) should reference "java-user"
> instead of "solr-user."

Probably both solr-user and java-user ... I'll fix.

Thanks for raising these!

Mike McCandless

http://blog.mikemccandless.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54767-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Jan 21 08:05:19 2013
Return-Path: <java-user-return-54767-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 1B8FEE85F
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon, 21 Jan 2013 08:05:19 +0000 (UTC)
Received: (qmail 8850 invoked by uid 500); 21 Jan 2013 08:05:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8788 invoked by uid 500); 21 Jan 2013 08:05:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8763 invoked by uid 99); 21 Jan 2013 08:05:16 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Jan 2013 08:05:16 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ishalyminov@yandex-team.ru designates 95.108.253.141 as permitted sender)
Received: from [95.108.253.141] (HELO forward16.mail.yandex.net) (95.108.253.141)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Jan 2013 08:05:07 +0000
Received: from webcorp1g.yandex-team.ru (webcorp1g.yandex-team.ru [95.108.252.5])
	by forward16.mail.yandex.net (Yandex) with ESMTP id ACFF7D202F5
	for <java-user@lucene.apache.org>; Mon, 21 Jan 2013 12:04:46 +0400 (MSK)
Received: from 127.0.0.1 (localhost.localdomain [127.0.0.1])
	by webcorp1g.yandex-team.ru (Yandex) with ESMTP id 5B454318005;
	Mon, 21 Jan 2013 12:04:46 +0400 (MSK)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yandex-team.ru;
	s=default; t=1358755486;
	bh=BeJEjRpLds0mpyPGXsRYKNyn6YPCRV7VhRQPgVniwRU=;
	h=From:To:Subject:Date;
	b=nciHPGeRLaT/DcGqSBBCtyD/4e+D5cYVpQBj02YeXyO3p0UmwtSm7tyDrQb83AxZY
	 85rKHXSj2jrSh7poRttoBeBKooL2VfpzSEi24TyvtYIJj1pCuw7v0noxKb8FivGNRG
	 qzjnqDeOqt0nW0oewC1aXRMVB7qTb89zi2F/bYmY=
Received: from v3-150-222.yandex.net (v3-150-222.yandex.net [84.201.150.222]) by webcorp1g.yandex-team.ru with HTTP;
	Mon, 21 Jan 2013 12:04:46 +0400
From: Igor Shalyminov <ishalyminov@yandex-team.ru>
To: java-user@lucene.apache.org
Subject: Indexing multiple fields with one document position
MIME-Version: 1.0
Message-Id: <16011358755486@webcorp1g.yandex-team.ru>
X-Mailer: Yamail [ http://yandex.ru ] 5.0
Date: Mon, 21 Jan 2013 12:04:46 +0400
Content-Transfer-Encoding: 7bit
Content-Type: text/plain
X-Virus-Checked: Checked by ClamAV on apache.org

Hello!

When indexing text with position data, one just adds field do a document in the form of its name and value, and the indexer assigns it unique position in the index.
I wonder, if I have an entry with two attributes, say:

<entry pos = "Noun" number = "singular">cat</entry>,

How do I store in the index two fields, "pos" and "number" with its values, pointing to the same position in the document?

-- 
Best Regards,
Igor Shalyminov

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54768-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Jan 21 13:20:01 2013
Return-Path: <java-user-return-54768-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id F141BD869
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon, 21 Jan 2013 13:20:00 +0000 (UTC)
Received: (qmail 65290 invoked by uid 500); 21 Jan 2013 13:19:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65152 invoked by uid 500); 21 Jan 2013 13:19:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65115 invoked by uid 99); 21 Jan 2013 13:19:53 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Jan 2013 13:19:53 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of youngestachiever@gmail.com designates 209.85.217.178 as permitted sender)
Received: from [209.85.217.178] (HELO mail-lb0-f178.google.com) (209.85.217.178)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Jan 2013 13:19:45 +0000
Received: by mail-lb0-f178.google.com with SMTP id n1so2020684lba.9
        for <java-user@lucene.apache.org>; Mon, 21 Jan 2013 05:19:25 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:x-received:in-reply-to:references:date:message-id
         :subject:from:to:content-type;
        bh=UJ1tfzWTEechF0SMQaU5MKfzq89JO9iDY+SG9slWIzw=;
        b=f+h3VUPcaJai5/yMvHojrnSw65PH7nMV/ckjA4ot06GmPrH8nzegEZKpc4XXuvWzkP
         N63n32xHJDtbwJEKgyTVfrZY7ZSt5d9x+VIsKg1FLlXFN9OeRDDNLLGeekejhzp08Lmq
         klqTfi8lHriN3qRGbYK1tJNMZJjFZeTnT2PwJAojkMXKrTMk5GYoB1LrZN5HJmfGmNgU
         KbtkcLm1TnB1afGD5PK7d4PKyElEu5c8X+J8uyV9XzbubO3vUSqWe6YbI7LApk4BM9Om
         Um2SmCcderupqsn2n86VzLekeIYefP5DaseHZD1ZEnKaV+CIASSEHZhN8i15dnr+d3M5
         PjGQ==
MIME-Version: 1.0
X-Received: by 10.152.134.243 with SMTP id pn19mr17402079lab.11.1358774364928;
 Mon, 21 Jan 2013 05:19:24 -0800 (PST)
Received: by 10.114.4.39 with HTTP; Mon, 21 Jan 2013 05:19:24 -0800 (PST)
In-Reply-To: <CAOX4E5FQc-QRDVV2eSM1YH-QCjU1V2YeM3gTY8WRP6-wGQu7ag@mail.gmail.com>
References: <CAPzrt-1KJ5GfXCVpv1w9zF4jBeDmH9e2VWkoYfcO6G4AAwRK9A@mail.gmail.com>
	<CAOX4E5FQc-QRDVV2eSM1YH-QCjU1V2YeM3gTY8WRP6-wGQu7ag@mail.gmail.com>
Date: Mon, 21 Jan 2013 18:49:24 +0530
Message-ID: <CAPzrt-2gAOHqoFvGVR6RH7Tb5WtV8Zp=-cF2gv2noPGv7J1znA@mail.gmail.com>
Subject: Re: Inner join in lucene
From: Ramprakash Ramamoorthy <youngestachiever@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=f46d0442724859fbf004d3cc4fe0
X-Virus-Checked: Checked by ClamAV on apache.org

--f46d0442724859fbf004d3cc4fe0
Content-Type: text/plain; charset=ISO-8859-1

On Fri, Jan 18, 2013 at 9:05 PM, Apostolis Xekoukoulotakis <
xekoukou@gmail.com> wrote:

> You can put those fields as a DocValue type of field. They are optimized
> for use during search(or join in this case).
>
> Then create a collector that collects the documents which have the same
> value in those fields.
>
> Have other more experienced comment though before you start implementing
> it.
>
> Thank you Apostolis,

          That is definitely giving me some headstarts. Will check with
this and also update this thread, when I infer.

>
>
2013/1/18 Ramprakash Ramamoorthy <r4ramprakash@gmail.com>
>
> > Dear all,
> >
> >          I know, lucene is no relational database, but spare me. I need
> to
> > run a search across an index, and find fields that have a common equal
> > value, where the common value is unknown(to be determined at run time).
> >
> >          An outright sql query would be *SELECT * from table1 where
> > table1.field1=table2.field3=table3.field2; *
> >
> > *        *How do I proceed upon this? Get distinct values (if at all it
> is
> > possible) for a field and iterate the query across fields is the only
> > solution? Or is there an aesthetic way?
> >
> >          Please to help. Thanks in advance.
> >
> > --
> > With thanks and regards,
> > Ramprakash Ramamoorthy,
> > SASTRA University,
> > India.
> >
>
>
>
> --
>
>
> Sincerely yours,
>
>      Apostolis Xekoukoulotakis
>

--f46d0442724859fbf004d3cc4fe0--

From java-user-return-54769-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Jan 21 14:07:25 2013
Return-Path: <java-user-return-54769-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 87840E7DF
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon, 21 Jan 2013 14:07:25 +0000 (UTC)
Received: (qmail 29824 invoked by uid 500); 21 Jan 2013 14:07:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29573 invoked by uid 500); 21 Jan 2013 14:07:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29534 invoked by uid 99); 21 Jan 2013 14:07:21 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Jan 2013 14:07:21 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of mbrzezicki@gmail.com designates 209.85.217.180 as permitted sender)
Received: from [209.85.217.180] (HELO mail-lb0-f180.google.com) (209.85.217.180)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Jan 2013 14:07:15 +0000
Received: by mail-lb0-f180.google.com with SMTP id gj3so4367872lbb.25
        for <java-user@lucene.apache.org>; Mon, 21 Jan 2013 06:06:54 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=x-received:mime-version:in-reply-to:references:from:date:message-id
         :subject:to:content-type;
        bh=nErRfLHkEuZIcFyfqONJDFsks97cdH5t8jpVLOQKnT8=;
        b=lnTynxqqUxb0ohUv3YACnviCjiRZlrgk7RZrKKFgC6XicFGESodpQ298JLenn74Rvc
         qGHZgPk6Hw6R+kR+P97vPXSMnmoZRt2iBlksXEBctvB8TZeLL8xnI7cgU+3b8LXvWXM2
         IwulX5fzw2owQk0sK4XeECsV81hIZ/4wlUbpOvVVW34bXKJxyOxH1ZPvOeKRelnfU+Ny
         Omd5NSj91gu9gA9HYC7/H6yQ1IqJQLlyiPeTlwi/XvkGXrwIJJ/htTiJ6R/J33z49a4l
         VedKs3or1rslFv6N8Ma+aXgnydKW1cqXiK1cEqTJweTtVrFBg7YYU5FW9e0CLIEB/T9D
         d2Bg==
X-Received: by 10.152.113.66 with SMTP id iw2mr17325489lab.37.1358777214557;
 Mon, 21 Jan 2013 06:06:54 -0800 (PST)
MIME-Version: 1.0
Received: by 10.152.108.228 with HTTP; Mon, 21 Jan 2013 06:06:34 -0800 (PST)
In-Reply-To: <CAAHmpkg5ONaGzsRdbdB6DCV2cOM-B46unkOXY1wMvSzZRvOrAQ@mail.gmail.com>
References: <CAHF1uunQ7eegQqKbOdX4hyuAPYptSzCZL-Dz4dwaYuGq+mq9Pw@mail.gmail.com>
 <CAAHmpkg5ONaGzsRdbdB6DCV2cOM-B46unkOXY1wMvSzZRvOrAQ@mail.gmail.com>
From: =?ISO-8859-2?Q?Micha=B3_Brzezicki?= <mbrzezicki@gmail.com>
Date: Mon, 21 Jan 2013 15:06:34 +0100
Message-ID: <CAHF1uumNQnBs5uw91nM2nHortNTD_t58YbRHyKywPG1-EcekBg@mail.gmail.com>
Subject: Re: Tool for Lucene storage recovery
To: java-user@lucene.apache.org, simon.willnauer@gmail.com
Content-Type: multipart/alternative; boundary=f46d0408915933dcdc04d3ccf913
X-Virus-Checked: Checked by ClamAV on apache.org

--f46d0408915933dcdc04d3ccf913
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

I don't think it is possible to simply compile it as jar since you need to
implement handling of recovered documents.

--=20
Micha=C5=82

2013/1/19 Simon Willnauer <simon.willnauer@gmail.com>

> hey,
>
> do you wanna open a jira issue for this and attach your code? this
> might help others too and if the shit hits the fan its good to have
> something in the lucene jar that can bring some data back.
>
> simon
> On Fri, Jan 18, 2013 at 6:37 PM, Micha=C5=82 Brzezicki <mbrzezicki@gmail.=
com>
> wrote:
> > in lucene (*.fdt). Code is available here http://pastebin.com/nmF0j4npy=
ou
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--f46d0408915933dcdc04d3ccf913--

From java-user-return-54770-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Jan 21 15:00:12 2013
Return-Path: <java-user-return-54770-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id B6187E6D0
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon, 21 Jan 2013 15:00:12 +0000 (UTC)
Received: (qmail 90413 invoked by uid 500); 21 Jan 2013 15:00:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90319 invoked by uid 500); 21 Jan 2013 15:00:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90293 invoked by uid 99); 21 Jan 2013 15:00:09 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Jan 2013 15:00:09 +0000
X-ASF-Spam-Status: No, hits=-2.3 required=5.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of nbuso@ebi.ac.uk designates 193.62.194.225 as permitted sender)
Received: from [193.62.194.225] (HELO smtp01.ebi.ac.uk) (193.62.194.225)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Jan 2013 14:59:59 +0000
Received: from [172.22.70.38] (linux.windows.ebi.ac.uk [172.22.70.38])
	by smtp01.ebi.ac.uk (8.13.8/8.13.8) with ESMTP id r0LExawI002668
	for <java-user@lucene.apache.org>; Mon, 21 Jan 2013 14:59:36 GMT
Message-ID: <1358780365.2728.14.camel@linux.scoobydoo>
Subject: FacetedSearch and MultiReader
From: Nicola Buso <nbuso@ebi.ac.uk>
Reply-To: nbuso@ebi.ac.uk
To: java-user@lucene.apache.org
Date: Mon, 21 Jan 2013 14:59:25 +0000
Organization: EBI
Content-Type: text/plain; charset="UTF-8"
X-Mailer: Evolution 3.6.2 (3.6.2-3.fc18) 
Mime-Version: 1.0
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi all,

I'm trying to develop faceted search using lucene 4.0 faceting
framework.
In our project we are searching on multiple indexes using lucene
MultiReader. How should we use the faceted framework to obtain
FacetResults starting from a MultiReader? all the example I see are
using a "single" IndexReader.



Nicola.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54771-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Jan 21 15:22:59 2013
Return-Path: <java-user-return-54771-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 5EF0FE7A6
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon, 21 Jan 2013 15:22:59 +0000 (UTC)
Received: (qmail 67637 invoked by uid 500); 21 Jan 2013 15:22:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67586 invoked by uid 500); 21 Jan 2013 15:22:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67559 invoked by uid 99); 21 Jan 2013 15:22:54 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Jan 2013 15:22:54 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of uwe@thetaphi.de designates 188.138.97.18 as permitted sender)
Received: from [188.138.97.18] (HELO mail.sd-datasolutions.de) (188.138.97.18)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Jan 2013 15:22:47 +0000
Received: from VEGA (unknown [84.246.232.137])
	by mail.sd-datasolutions.de (Postfix) with ESMTPSA id D7DB514AA008;
	Mon, 21 Jan 2013 15:22:26 +0000 (UTC)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>,
	<nbuso@ebi.ac.uk>
References: <1358780365.2728.14.camel@linux.scoobydoo>
In-Reply-To: <1358780365.2728.14.camel@linux.scoobydoo>
Subject: RE: FacetedSearch and MultiReader
Date: Mon, 21 Jan 2013 16:22:26 +0100
Message-ID: <007c01cdf7eb$1eba8d50$5c2fa7f0$@thetaphi.de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="UTF-8"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Outlook 14.0
Thread-Index: AQGi7ESljMI+2JJBDUjl28Wmp5cbYpip/Ywg
Content-Language: de
X-Virus-Checked: Checked by ClamAV on apache.org

Just use MultiReader, it extends IndexReader, so you can pass it =
anywhere where IndexReader can be passed.

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de

> -----Original Message-----
> From: Nicola Buso [mailto:nbuso@ebi.ac.uk]
> Sent: Monday, January 21, 2013 3:59 PM
> To: java-user@lucene.apache.org
> Subject: FacetedSearch and MultiReader
>=20
> Hi all,
>=20
> I'm trying to develop faceted search using lucene 4.0 faceting =
framework.
> In our project we are searching on multiple indexes using lucene
> MultiReader. How should we use the faceted framework to obtain
> FacetResults starting from a MultiReader? all the example I see are =
using a
> "single" IndexReader.
>=20
>=20
>=20
> Nicola.
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54772-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Jan 21 15:40:13 2013
Return-Path: <java-user-return-54772-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id C455CD969
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon, 21 Jan 2013 15:40:13 +0000 (UTC)
Received: (qmail 53023 invoked by uid 500); 21 Jan 2013 15:40:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52268 invoked by uid 500); 21 Jan 2013 15:40:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51974 invoked by uid 99); 21 Jan 2013 15:40:09 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Jan 2013 15:40:09 +0000
X-ASF-Spam-Status: No, hits=-2.3 required=5.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of nbuso@ebi.ac.uk designates 193.62.194.225 as permitted sender)
Received: from [193.62.194.225] (HELO smtp01.ebi.ac.uk) (193.62.194.225)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Jan 2013 15:40:04 +0000
Received: from [172.22.70.38] (linux.windows.ebi.ac.uk [172.22.70.38])
	by smtp01.ebi.ac.uk (8.13.8/8.13.8) with ESMTP id r0LFdgSi028952;
	Mon, 21 Jan 2013 15:39:42 GMT
Message-ID: <1358782771.2728.28.camel@linux.scoobydoo>
Subject: Re: FacetedSearch and MultiReader
From: Nicola Buso <nbuso@ebi.ac.uk>
Reply-To: nbuso@ebi.ac.uk
To: Uwe Schindler <uwe@thetaphi.de>
Cc: java-user@lucene.apache.org
Date: Mon, 21 Jan 2013 15:39:31 +0000
In-Reply-To: <007c01cdf7eb$1eba8d50$5c2fa7f0$@thetaphi.de>
References: <1358780365.2728.14.camel@linux.scoobydoo>
	 <007c01cdf7eb$1eba8d50$5c2fa7f0$@thetaphi.de>
Organization: EBI
Content-Type: text/plain; charset="UTF-8"
X-Mailer: Evolution 3.6.2 (3.6.2-3.fc18) 
Mime-Version: 1.0
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks for the reply Uwe,

we currently can search with MultiReader over all the indexes we have.
Now I want to add the faceting search, than I created a categories index
for every index I currently have.
To accumulate the faceted results now I have a MultiReader pointing all
the indexes and I can create a TaxonomyReader for every categories index
I have; all the way I see to obtain FacetResults are:
1 - FacetsCollector
2 - a FacetsAccumulator implementation

suppose I use the second option. I should:
- search as usual using the MultiReader
- than try to collect all the facetresults iterating over my
TaxonomyReaders; at every iteration:
  - I create a FacetsAccumulator using the MultiReader and a
TaxonomyReader
  - I get a list of FacetResult from the accumulator.
- as I finish I should in some way merge all the List<FacetResult> I
have.

I think this solution is not correct because the docsids from the search
are pointing the multireader instead the taxonomyreader is pointing to
the categories index of a single reader.
I neither like to merge all the List of FacetResult I retrieve from the
Accumulators.

Probably I'm missing something, can somebody clarify to me how I should
collect the facets in this case?


Nicola.

 

On Mon, 2013-01-21 at 16:22 +0100, Uwe Schindler wrote:
> Just use MultiReader, it extends IndexReader, so you can pass it anywhere where IndexReader can be passed.
> 
> -----
> Uwe Schindler
> H.-H.-Meier-Allee 63, D-28213 Bremen
> http://www.thetaphi.de
> eMail: uwe@thetaphi.de
> 
> > -----Original Message-----
> > From: Nicola Buso [mailto:nbuso@ebi.ac.uk]
> > Sent: Monday, January 21, 2013 3:59 PM
> > To: java-user@lucene.apache.org
> > Subject: FacetedSearch and MultiReader
> > 
> > Hi all,
> > 
> > I'm trying to develop faceted search using lucene 4.0 faceting framework.
> > In our project we are searching on multiple indexes using lucene
> > MultiReader. How should we use the faceted framework to obtain
> > FacetResults starting from a MultiReader? all the example I see are using a
> > "single" IndexReader.
> > 
> > 
> > 
> > Nicola.
> > 
> > 
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> 



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54773-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Jan 21 15:48:32 2013
Return-Path: <java-user-return-54773-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id E581ADA27
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon, 21 Jan 2013 15:48:31 +0000 (UTC)
Received: (qmail 82039 invoked by uid 500); 21 Jan 2013 15:48:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82002 invoked by uid 500); 21 Jan 2013 15:48:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81980 invoked by uid 99); 21 Jan 2013 15:48:29 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Jan 2013 15:48:29 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of SRS0=IDhw/4=LO=basetechnology.com=jack@yourhostingaccount.com designates 65.254.253.75 as permitted sender)
Received: from [65.254.253.75] (HELO mailout09.yourhostingaccount.com) (65.254.253.75)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Jan 2013 15:48:20 +0000
Received: from mailscan10.yourhostingaccount.com ([10.1.15.10] helo=mailscan10.yourhostingaccount.com)
	by mailout09.yourhostingaccount.com with esmtp (Exim)
	id 1TxJbL-0008Jj-5B
	for java-user@lucene.apache.org; Mon, 21 Jan 2013 10:47:59 -0500
Received: from impout02.yourhostingaccount.com ([10.1.55.2] helo=impout02.yourhostingaccount.com)
	by mailscan10.yourhostingaccount.com with esmtp (Exim)
	id 1TxJbK-0002wq-PZ
	for java-user@lucene.apache.org; Mon, 21 Jan 2013 10:47:59 -0500
Received: from authsmtp01.yourhostingaccount.com ([10.1.18.1])
	by impout02.yourhostingaccount.com with NO UCE
	id qfny1k00901P85W01fnysA; Mon, 21 Jan 2013 10:47:58 -0500
X-Authority-Analysis: v=2.0 cv=HIVB5/Rv c=1 sm=1
 a=yH02RjTyxywMAIqhn74x1Q==:17 a=aQzbgH187woA:10 a=jCDKipcyYo4A:10
 a=3jZET7lWBKwA:10 a=8nJEP1OIZ-IA:10 a=jvYhGVW7AAAA:8 a=UfMjTimorC8A:10
 a=mV9VRH-2AAAA:8 a=43mNqJ4k-IiO-3vbASoA:9 a=wPNLvfGTeEIA:10
 a=DJzt-e5dkiTia-Lt:21 a=S-e0-QKVk5Mf2Vqi:21 a=ilymawf/5WNU8sTmGLp1gQ==:117
X-EN-OrigOutIP: 10.1.18.1
X-EN-IMPSID: qfny1k00901P85W01fnysA
Received: from 207-237-113-14.c3-0.nyr-ubr1.nyr.ny.cable.rcn.com ([207.237.113.14] helo=JackKrupansky)
	by authsmtp01.yourhostingaccount.com with esmtpa (Exim)
	id 1TxJbK-0002y8-97
	for java-user@lucene.apache.org; Mon, 21 Jan 2013 10:47:58 -0500
Message-ID: <981123ED0B204EC690AEFE6575CD18CB@JackKrupansky>
From: "Jack Krupansky" <jack@basetechnology.com>
To: <java-user@lucene.apache.org>
References: <16011358755486@webcorp1g.yandex-team.ru>
In-Reply-To: <16011358755486@webcorp1g.yandex-team.ru>
Subject: Re: Indexing multiple fields with one document position
Date: Mon, 21 Jan 2013 10:47:56 -0500
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
Importance: Normal
X-Mailer: Microsoft Windows Live Mail 15.4.3555.308
X-MimeOLE: Produced By Microsoft MimeOLE V15.4.3555.308
X-EN-UserInfo: e0a4b55451ed9f27313ebf02e3d4348d:fc4a93e1349e680c52bdd723c0ab3ef6
X-EN-AuthUser: jack@basetechnology.com
Sender:  "Jack Krupansky" <jack@basetechnology.com>
X-EN-OrigIP: 207.237.113.14
X-EN-OrigHost: 207-237-113-14.c3-0.nyr-ubr1.nyr.ny.cable.rcn.com
X-Virus-Checked: Checked by ClamAV on apache.org

Send the same input text to two different analyzers for two separate fields. 
The first analyzer emits only the first attribute. The second analyzer emits 
only the second attribute. The document position in one will correspond to 
the document position in the other.

-- Jack Krupansky

-----Original Message----- 
From: Igor Shalyminov
Sent: Monday, January 21, 2013 3:04 AM
To: java-user@lucene.apache.org
Subject: Indexing multiple fields with one document position

Hello!

When indexing text with position data, one just adds field do a document in 
the form of its name and value, and the indexer assigns it unique position 
in the index.
I wonder, if I have an entry with two attributes, say:

<entry pos = "Noun" number = "singular">cat</entry>,

How do I store in the index two fields, "pos" and "number" with its values, 
pointing to the same position in the document?

-- 
Best Regards,
Igor Shalyminov

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54774-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Jan 21 15:55:00 2013
Return-Path: <java-user-return-54774-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 52A3DDA5E
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon, 21 Jan 2013 15:55:00 +0000 (UTC)
Received: (qmail 9501 invoked by uid 500); 21 Jan 2013 15:54:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9455 invoked by uid 500); 21 Jan 2013 15:54:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9437 invoked by uid 99); 21 Jan 2013 15:54:57 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Jan 2013 15:54:57 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of serera@gmail.com designates 74.125.82.47 as permitted sender)
Received: from [74.125.82.47] (HELO mail-wg0-f47.google.com) (74.125.82.47)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Jan 2013 15:54:51 +0000
Received: by mail-wg0-f47.google.com with SMTP id dq11so813337wgb.26
        for <java-user@lucene.apache.org>; Mon, 21 Jan 2013 07:54:31 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:x-received:in-reply-to:references:date:message-id
         :subject:from:to:content-type;
        bh=6jG/E60YhJLmji85EV9PrdmclsXcxa3kmnIIugl8+70=;
        b=LhN16O3d7IYaR4j/uN0NX5yC1VtV19oMWMLWJNTj9Ir5b9b5nO+qnm3W3OWdTJ2m8N
         gvhIUQK+VoMUCoH9YdUShBgAQHhly5v/96XsDMXLb4YKSOphK+eve18Gm2dfZ0ws5WXo
         yorBwjvcR0Il6I6ZsY88OthfYPnyORCiDaAJ3wMiU+VptNvhtCbt29jKrv8RC7u8F6LP
         hFLtd04jyypYr7lVwqK5wRWONWLpvUCt72k5Nq/cm9EPfKmzddjmx/amAmvH/zO7KnNr
         cCom0046eC1b6jn1t2sve17s8dQYZGEfiAiAq0kRjx98EwGp0dS0zdE6JPyEpWk9JGPr
         pUDQ==
MIME-Version: 1.0
X-Received: by 10.180.107.130 with SMTP id hc2mr16233908wib.12.1358783671681;
 Mon, 21 Jan 2013 07:54:31 -0800 (PST)
Received: by 10.194.90.171 with HTTP; Mon, 21 Jan 2013 07:54:31 -0800 (PST)
In-Reply-To: <1358782771.2728.28.camel@linux.scoobydoo>
References: <1358780365.2728.14.camel@linux.scoobydoo>
	<007c01cdf7eb$1eba8d50$5c2fa7f0$@thetaphi.de>
	<1358782771.2728.28.camel@linux.scoobydoo>
Date: Mon, 21 Jan 2013 17:54:31 +0200
Message-ID: <CALfq-2QkLJaLtbaH7P1_XARJYQju_Nd6QUK1CdvGXXPTsjRPQA@mail.gmail.com>
Subject: Re: FacetedSearch and MultiReader
From: Shai Erera <serera@gmail.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>, nbuso@ebi.ac.uk
Content-Type: multipart/alternative; boundary=e89a8f3baa6f13c3f604d3ce7af9
X-Virus-Checked: Checked by ClamAV on apache.org

--e89a8f3baa6f13c3f604d3ce7af9
Content-Type: text/plain; charset=ISO-8859-1

Hi Nicola,

I think that what you're describing corresponds to distributed faceted
search. I.e., you have N content indexes, alongside N taxonomy indexes.
The information that's indexed in each of those sub-indexes does not
correlate with the other ones.
For example, say that you index the category "Movie/Drama", it may receive
ordinal 12 in index1 and 23 in index2.
If you'll try to count ordinals using MultiReader, you'll just mess up
everything.

If you can share a single taxonomy index for all N content indexes, then
you'll be in a super-simple position:
1) Open one TaxonomyReader
2) Execute search with MultiReader and FacetsCollector

It doesn't get simpler than that ! :)

Before I go into great length describing what you should do if you cannot
share the taxonomy, let me know if that's not an option for you.

Shai


On Mon, Jan 21, 2013 at 5:39 PM, Nicola Buso <nbuso@ebi.ac.uk> wrote:

> Thanks for the reply Uwe,
>
> we currently can search with MultiReader over all the indexes we have.
> Now I want to add the faceting search, than I created a categories index
> for every index I currently have.
> To accumulate the faceted results now I have a MultiReader pointing all
> the indexes and I can create a TaxonomyReader for every categories index
> I have; all the way I see to obtain FacetResults are:
> 1 - FacetsCollector
> 2 - a FacetsAccumulator implementation
>
> suppose I use the second option. I should:
> - search as usual using the MultiReader
> - than try to collect all the facetresults iterating over my
> TaxonomyReaders; at every iteration:
>   - I create a FacetsAccumulator using the MultiReader and a
> TaxonomyReader
>   - I get a list of FacetResult from the accumulator.
> - as I finish I should in some way merge all the List<FacetResult> I
> have.
>
> I think this solution is not correct because the docsids from the search
> are pointing the multireader instead the taxonomyreader is pointing to
> the categories index of a single reader.
> I neither like to merge all the List of FacetResult I retrieve from the
> Accumulators.
>
> Probably I'm missing something, can somebody clarify to me how I should
> collect the facets in this case?
>
>
> Nicola.
>
>
>
> On Mon, 2013-01-21 at 16:22 +0100, Uwe Schindler wrote:
> > Just use MultiReader, it extends IndexReader, so you can pass it
> anywhere where IndexReader can be passed.
> >
> > -----
> > Uwe Schindler
> > H.-H.-Meier-Allee 63, D-28213 Bremen
> > http://www.thetaphi.de
> > eMail: uwe@thetaphi.de
> >
> > > -----Original Message-----
> > > From: Nicola Buso [mailto:nbuso@ebi.ac.uk]
> > > Sent: Monday, January 21, 2013 3:59 PM
> > > To: java-user@lucene.apache.org
> > > Subject: FacetedSearch and MultiReader
> > >
> > > Hi all,
> > >
> > > I'm trying to develop faceted search using lucene 4.0 faceting
> framework.
> > > In our project we are searching on multiple indexes using lucene
> > > MultiReader. How should we use the faceted framework to obtain
> > > FacetResults starting from a MultiReader? all the example I see are
> using a
> > > "single" IndexReader.
> > >
> > >
> > >
> > > Nicola.
> > >
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--e89a8f3baa6f13c3f604d3ce7af9--

From java-user-return-54775-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Jan 21 16:09:00 2013
Return-Path: <java-user-return-54775-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 50934DB0C
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon, 21 Jan 2013 16:09:00 +0000 (UTC)
Received: (qmail 58661 invoked by uid 500); 21 Jan 2013 16:08:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58569 invoked by uid 500); 21 Jan 2013 16:08:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58552 invoked by uid 99); 21 Jan 2013 16:08:57 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Jan 2013 16:08:57 +0000
X-ASF-Spam-Status: No, hits=-2.3 required=5.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of nbuso@ebi.ac.uk designates 193.62.194.225 as permitted sender)
Received: from [193.62.194.225] (HELO smtp01.ebi.ac.uk) (193.62.194.225)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Jan 2013 16:08:53 +0000
Received: from [172.22.70.38] (linux.windows.ebi.ac.uk [172.22.70.38])
	by smtp01.ebi.ac.uk (8.13.8/8.13.8) with ESMTP id r0LG8Tn2015256;
	Mon, 21 Jan 2013 16:08:29 GMT
Message-ID: <1358784492.2728.35.camel@linux.scoobydoo>
Subject: Re: FacetedSearch and MultiReader
From: Nicola Buso <nbuso@ebi.ac.uk>
Reply-To: nbuso@ebi.ac.uk
To: Shai Erera <serera@gmail.com>
Cc: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Mon, 21 Jan 2013 16:08:12 +0000
In-Reply-To: <CALfq-2QkLJaLtbaH7P1_XARJYQju_Nd6QUK1CdvGXXPTsjRPQA@mail.gmail.com>
References: <1358780365.2728.14.camel@linux.scoobydoo>
	 <007c01cdf7eb$1eba8d50$5c2fa7f0$@thetaphi.de>
	 <1358782771.2728.28.camel@linux.scoobydoo>
	 <CALfq-2QkLJaLtbaH7P1_XARJYQju_Nd6QUK1CdvGXXPTsjRPQA@mail.gmail.com>
Organization: EBI
Content-Type: text/plain; charset="UTF-8"
X-Mailer: Evolution 3.6.2 (3.6.2-3.fc18) 
Mime-Version: 1.0
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Shai,

I was thinking to that too, but I'm indexing all indexes in a custom
distributed environment than I can't in this moment have a single
categories index for all the content indexes at indexing time.
A solution should be to merge all the categories indexes in one only
index and use your solution but the merge code I see in the examples
merge also the content index and I can't do that.

I should share the taxonomy if is possible to merge (I see the resulting
categories indexes are not that big currently), but I would prefer to
have a solution where I can collect the facets over multiple categories
indexes in this way I will be sure the solution will scale better.


Nicola.


On Mon, 2013-01-21 at 17:54 +0200, Shai Erera wrote:
> Hi Nicola,
> 
> 
> I think that what you're describing corresponds to distributed faceted
> search. I.e., you have N content indexes, alongside N taxonomy
> indexes.
> 
> The information that's indexed in each of those sub-indexes does not
> correlate with the other ones.
> For example, say that you index the category "Movie/Drama", it may
> receive ordinal 12 in index1 and 23 in index2.
> 
> If you'll try to count ordinals using MultiReader, you'll just mess up
> everything.
> 
> 
> If you can share a single taxonomy index for all N content indexes,
> then you'll be in a super-simple position:
> 
> 1) Open one TaxonomyReader
> 
> 2) Execute search with MultiReader and FacetsCollector
> 
> 
> 
> It doesn't get simpler than that ! :)
> 
> 
> Before I go into great length describing what you should do if you
> cannot share the taxonomy, let me know if that's not an option for
> you.
> 
> Shai
> 
> 
> 
> On Mon, Jan 21, 2013 at 5:39 PM, Nicola Buso <nbuso@ebi.ac.uk> wrote:
>         Thanks for the reply Uwe,
>         
>         we currently can search with MultiReader over all the indexes
>         we have.
>         Now I want to add the faceting search, than I created a
>         categories index
>         for every index I currently have.
>         To accumulate the faceted results now I have a MultiReader
>         pointing all
>         the indexes and I can create a TaxonomyReader for every
>         categories index
>         I have; all the way I see to obtain FacetResults are:
>         1 - FacetsCollector
>         2 - a FacetsAccumulator implementation
>         
>         suppose I use the second option. I should:
>         - search as usual using the MultiReader
>         - than try to collect all the facetresults iterating over my
>         TaxonomyReaders; at every iteration:
>           - I create a FacetsAccumulator using the MultiReader and a
>         TaxonomyReader
>           - I get a list of FacetResult from the accumulator.
>         - as I finish I should in some way merge all the
>         List<FacetResult> I
>         have.
>         
>         I think this solution is not correct because the docsids from
>         the search
>         are pointing the multireader instead the taxonomyreader is
>         pointing to
>         the categories index of a single reader.
>         I neither like to merge all the List of FacetResult I retrieve
>         from the
>         Accumulators.
>         
>         Probably I'm missing something, can somebody clarify to me how
>         I should
>         collect the facets in this case?
>         
>         
>         Nicola.
>         
>         
>         
>         On Mon, 2013-01-21 at 16:22 +0100, Uwe Schindler wrote:
>         > Just use MultiReader, it extends IndexReader, so you can
>         pass it anywhere where IndexReader can be passed.
>         >
>         > -----
>         > Uwe Schindler
>         > H.-H.-Meier-Allee 63, D-28213 Bremen
>         > http://www.thetaphi.de
>         > eMail: uwe@thetaphi.de
>         >
>         > > -----Original Message-----
>         > > From: Nicola Buso [mailto:nbuso@ebi.ac.uk]
>         > > Sent: Monday, January 21, 2013 3:59 PM
>         > > To: java-user@lucene.apache.org
>         > > Subject: FacetedSearch and MultiReader
>         > >
>         > > Hi all,
>         > >
>         > > I'm trying to develop faceted search using lucene 4.0
>         faceting framework.
>         > > In our project we are searching on multiple indexes using
>         lucene
>         > > MultiReader. How should we use the faceted framework to
>         obtain
>         > > FacetResults starting from a MultiReader? all the example
>         I see are using a
>         > > "single" IndexReader.
>         > >
>         > >
>         > >
>         > > Nicola.
>         > >
>         > >
>         > >
>         ---------------------------------------------------------------------
>         > > To unsubscribe, e-mail:
>         java-user-unsubscribe@lucene.apache.org
>         > > For additional commands, e-mail:
>         java-user-help@lucene.apache.org
>         >
>         
>         
>         
>         ---------------------------------------------------------------------
>         To unsubscribe, e-mail:
>         java-user-unsubscribe@lucene.apache.org
>         For additional commands, e-mail:
>         java-user-help@lucene.apache.org
>         
>         
> 
> 



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54776-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Jan 21 17:14:44 2013
Return-Path: <java-user-return-54776-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 264C1EADE
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon, 21 Jan 2013 17:14:44 +0000 (UTC)
Received: (qmail 94449 invoked by uid 500); 21 Jan 2013 17:14:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94392 invoked by uid 500); 21 Jan 2013 17:14:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94383 invoked by uid 99); 21 Jan 2013 17:14:41 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Jan 2013 17:14:41 +0000
X-ASF-Spam-Status: No, hits=-2.3 required=5.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of nbuso@ebi.ac.uk designates 193.62.194.225 as permitted sender)
Received: from [193.62.194.225] (HELO smtp02.ebi.ac.uk) (193.62.194.225)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Jan 2013 17:14:35 +0000
Received: from [172.22.70.38] (linux.windows.ebi.ac.uk [172.22.70.38])
	by smtp02.ebi.ac.uk (8.13.8/8.13.8) with ESMTP id r0LHEDnv022594
	for <java-user@lucene.apache.org>; Mon, 21 Jan 2013 17:14:13 GMT
Message-ID: <1358788442.2728.51.camel@linux.scoobydoo>
Subject: [Fwd: Re: FacetedSearch and MultiReader]
From: Nicola Buso <nbuso@ebi.ac.uk>
Reply-To: nbuso@ebi.ac.uk
To: java-user <java-user@lucene.apache.org>
Date: Mon, 21 Jan 2013 17:14:02 +0000
Organization: EBI
Content-Type: multipart/mixed; boundary="=-r1CoaAVGmgmzReE27wy1"
X-Mailer: Evolution 3.6.2 (3.6.2-3.fc18) 
Mime-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

--=-r1CoaAVGmgmzReE27wy1
Content-Type: text/plain
Content-Transfer-Encoding: 7bit



--=-r1CoaAVGmgmzReE27wy1
Content-Disposition: inline
Content-Description: Forwarded message - Re: FacetedSearch and MultiReader
Content-Type: message/rfc822

Message-ID: <1358788300.2728.50.camel@linux.scoobydoo>
Subject: Re: FacetedSearch and MultiReader
From: Nicola Buso <nbuso@ebi.ac.uk>
Reply-To: nbuso@ebi.ac.uk
To: Shai Erera <serera@gmail.com>
Date: Mon, 21 Jan 2013 17:11:40 +0000
In-Reply-To: <CALfq-2RZ0X4XWjc2g6Spfs6ybjU_jPAXNXTn9OjDTZ_50hLtjA@mail.gmail.com>
References: <1358780365.2728.14.camel@linux.scoobydoo>
	 <007c01cdf7eb$1eba8d50$5c2fa7f0$@thetaphi.de>
	 <1358782771.2728.28.camel@linux.scoobydoo>
	 <CALfq-2QkLJaLtbaH7P1_XARJYQju_Nd6QUK1CdvGXXPTsjRPQA@mail.gmail.com>
	 <1358784492.2728.35.camel@linux.scoobydoo>
	 <CALfq-2RZ0X4XWjc2g6Spfs6ybjU_jPAXNXTn9OjDTZ_50hLtjA@mail.gmail.com>
Organization: EBI
Content-Type: text/plain; charset="UTF-8"
X-Mailer: Evolution 3.6.2 (3.6.2-3.fc18) 
Mime-Version: 1.0
Content-Transfer-Encoding: 7bit

Hi,

it's not clear your proposal.

On Mon, 2013-01-21 at 18:21 +0200, Shai Erera wrote:
> Hi
> 
> 
> First, if it's a one time operation, you can merge the taxonomy
> indexes into one, without merging the content indexes too (but you'll
> need to re-map the ordinals in each content index, by e.g. adding it
> to itself). Not a cheap solution.
I think I can't do that I have terabytes of indexes and seam not
feasible to me.

> 
> Another option is to merge all taxonomy indexes into one, and obtain
> the OrdinalMap per content index.
How this solution differ from the previous? I merge the taxonomy without
touching the content indexes?
Is there some documentation explaining how the ordinalmaps are used with
facets? Just to be aware of what I'm doing?
Suppose I merge in memory more taxonomy indexes (think I want facets on
a subset of all my indexes otherwise would be to heavy).
I iterate over the taxonomy indexes and I merge them with
TaxonomyWriter.addTaxonomy(directory, map)
how I obtain the OrdinalMap[M]? (I suppose this is the map corresponding
to my MultiReader).


> Then run the search w/ MultiReader, and when asked to count ordinal M,
> you count ordMap[M] instead.
> 
> You can do so by creating your own Aggregator, and override
> CountFacetRequest.createAggregator().

in CountFacetRequest where should I use the new OrdinalMap? should I use
the OrdinalMap.getMap to construct the CountingAggregator?
  public Aggregator createAggregator(boolean useComplements,
                                      FacetArrays arrays, IndexReader
reader,
                                      TaxonomyReader taxonomy) {
    // we rely on that, if needed, result is cleared by arrays!
    int[] a = arrays.getIntArray();
    if (useComplements) {
      return new ComplementCountingAggregator(a);
    }
    return new CountingAggregator(a);
  }
> 
> 
> If that's also not an option, then you'll need to do a form of
> distributed search. You'll need to run the search against each
> content/taxonomy index pair, then collect the top-K and merge the
> categories' weights (counts).
> Note though that in this process you may lose some categories that
> should be in the top-K.
I think I can merge in memory at indexing time;
Can you elaborate e bit more about the solution consisting in the
taxonomyindexes merge?


Nicola


> 
> E.g. imagine that categories A(3) and B(2) are returned from index1
> and A(4) and C(3) are returned from index2 (for top-2, numbers in
> parenthesis denote counts).
> 
> And say that category B appears in index2 with count 2. Then it should
> be among the top 2 categories: A(7), B(4), but instead you'll return
> A(7), C(3).
> 
> You can somewhat overcome that by requesting to count c*K, where 'c'
> is an over-counting factor (say 5), and hopefully the true top-K will
> be in the top-5*K of all indexes.
> 
> That too can break under some extreme circumstances, but we've tested
> it once and c=2 was enough for a rather large index.
> However, since your searches are run locally (i.e. you don't transmit
> intermediate results over the wire), you can use a larger 'c'.
> 
> HTH,
> Shai



--=-r1CoaAVGmgmzReE27wy1
Content-Type: text/plain; charset=us-ascii


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
--=-r1CoaAVGmgmzReE27wy1--


From java-user-return-54777-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Jan 21 17:38:14 2013
Return-Path: <java-user-return-54777-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 67EE3E818
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon, 21 Jan 2013 17:38:14 +0000 (UTC)
Received: (qmail 66657 invoked by uid 500); 21 Jan 2013 17:38:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66591 invoked by uid 500); 21 Jan 2013 17:38:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66583 invoked by uid 99); 21 Jan 2013 17:38:12 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Jan 2013 17:38:12 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.216.179 as permitted sender)
Received: from [209.85.216.179] (HELO mail-qc0-f179.google.com) (209.85.216.179)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Jan 2013 17:38:07 +0000
Received: by mail-qc0-f179.google.com with SMTP id b40so1308169qcq.38
        for <java-user@lucene.apache.org>; Mon, 21 Jan 2013 09:37:46 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:x-received:in-reply-to:references:date:message-id
         :subject:from:to:content-type:content-transfer-encoding;
        bh=m0jBZtHPUoWwbqLaTeRiAhwrV0c7Zr2vF8ojX4ricj8=;
        b=uo8dlVlQUH5HpqQ6jJTiNEOf9HL4KFynXcX4Db80HYTbZR82p0biilhlU4LAawANja
         TOz2qUOsdim53YTbHqvvUmQAUB+wL1uA6Nh+PPRUHw4YPKYpAZnlYXc6BW5668dm3pGW
         kss2NWRTq+cS4SGDaHh6yHyn/DFJKPyXAHeqbaTB+YGHbpIY8ig/1HHoBkhmLOJ9qSb7
         EYXReQDx5NVNwDGir2b89FoIREs7jei2f0/4C0J/deVty8WI1ul9xSoGegNESKqkSpHv
         2w/yeB79OGTH+fAYHO4+nu5/UFXlSmX1P5tkVJGgYtdk2iNY3TciBZ7TsdQ8SVlNoGVa
         wc1g==
MIME-Version: 1.0
X-Received: by 10.224.58.69 with SMTP id f5mr20035370qah.87.1358789866898;
 Mon, 21 Jan 2013 09:37:46 -0800 (PST)
Received: by 10.49.12.240 with HTTP; Mon, 21 Jan 2013 09:37:46 -0800 (PST)
In-Reply-To: <CAHF1uumNQnBs5uw91nM2nHortNTD_t58YbRHyKywPG1-EcekBg@mail.gmail.com>
References: <CAHF1uunQ7eegQqKbOdX4hyuAPYptSzCZL-Dz4dwaYuGq+mq9Pw@mail.gmail.com>
	<CAAHmpkg5ONaGzsRdbdB6DCV2cOM-B46unkOXY1wMvSzZRvOrAQ@mail.gmail.com>
	<CAHF1uumNQnBs5uw91nM2nHortNTD_t58YbRHyKywPG1-EcekBg@mail.gmail.com>
Date: Mon, 21 Jan 2013 12:37:46 -0500
Message-ID: <CAN4YXvcV1nFH=VV6T5jm=_4peZYzZ5qX09Zs5uv5rzmCrkr03g@mail.gmail.com>
Subject: Re: Tool for Lucene storage recovery
From: Erick Erickson <erickerickson@gmail.com>
To: java-user <java-user@lucene.apache.org>
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Maybe do the handling as an overridable method and make it abstract?
That would give the skeleton of all the recovery stuff, but then
require the user to implement the actual recovery?

Just a thought
Erick

On Mon, Jan 21, 2013 at 9:06 AM, Micha=C5=82 Brzezicki <mbrzezicki@gmail.co=
m> wrote:
> I don't think it is possible to simply compile it as jar since you need t=
o
> implement handling of recovered documents.
>
> --
> Micha=C5=82
>
> 2013/1/19 Simon Willnauer <simon.willnauer@gmail.com>
>
>> hey,
>>
>> do you wanna open a jira issue for this and attach your code? this
>> might help others too and if the shit hits the fan its good to have
>> something in the lucene jar that can bring some data back.
>>
>> simon
>> On Fri, Jan 18, 2013 at 6:37 PM, Micha=C5=82 Brzezicki <mbrzezicki@gmail=
.com>
>> wrote:
>> > in lucene (*.fdt). Code is available here http://pastebin.com/nmF0j4np=
you
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54778-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Jan 21 17:39:31 2013
Return-Path: <java-user-return-54778-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 1C395E821
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon, 21 Jan 2013 17:39:31 +0000 (UTC)
Received: (qmail 72064 invoked by uid 500); 21 Jan 2013 17:39:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72015 invoked by uid 500); 21 Jan 2013 17:39:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72003 invoked by uid 99); 21 Jan 2013 17:39:29 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Jan 2013 17:39:29 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.216.170 as permitted sender)
Received: from [209.85.216.170] (HELO mail-qc0-f170.google.com) (209.85.216.170)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Jan 2013 17:39:20 +0000
Received: by mail-qc0-f170.google.com with SMTP id d42so2582147qca.29
        for <java-user@lucene.apache.org>; Mon, 21 Jan 2013 09:39:00 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:x-received:in-reply-to:references:date:message-id
         :subject:from:to:content-type:content-transfer-encoding;
        bh=b+LIeVGOpDR63Qq6/3jSUQARw6Q2sxsZddRb7y2DWB4=;
        b=RWMdKtfHsAtN+u31Vq4/7MzFNJUtuEYyMk+gfJvNkPP5d9vA51SfqJJxFyQAvqlgPJ
         9M4PXud9jdaVj3eDqpAEfBNLk12dIimTw0ObIKmXynkp1va2BRzYGtq9TD7ATi0KCedo
         ioIH6oeaKQhmdWiVUaUESwU745I0xB7tFP+dAn43F0GsT3e0yMOjFhO9OIgZj+BljnZR
         nYd1pZOUsa18zY/+h9AuvqTg7G68tvDNck1WGOzOAZP9G14t3bphCd8/xCdF9uY7SNRN
         mntA2hIrVvkIePoNhpM6h+t/ojanMfhwdZxHroIfyIOpfu/vR3DqiYB770wRPo0LrizW
         EXbw==
MIME-Version: 1.0
X-Received: by 10.229.171.207 with SMTP id i15mr796819qcz.98.1358789940019;
 Mon, 21 Jan 2013 09:39:00 -0800 (PST)
Received: by 10.49.12.240 with HTTP; Mon, 21 Jan 2013 09:38:59 -0800 (PST)
In-Reply-To: <CAN4YXvcV1nFH=VV6T5jm=_4peZYzZ5qX09Zs5uv5rzmCrkr03g@mail.gmail.com>
References: <CAHF1uunQ7eegQqKbOdX4hyuAPYptSzCZL-Dz4dwaYuGq+mq9Pw@mail.gmail.com>
	<CAAHmpkg5ONaGzsRdbdB6DCV2cOM-B46unkOXY1wMvSzZRvOrAQ@mail.gmail.com>
	<CAHF1uumNQnBs5uw91nM2nHortNTD_t58YbRHyKywPG1-EcekBg@mail.gmail.com>
	<CAN4YXvcV1nFH=VV6T5jm=_4peZYzZ5qX09Zs5uv5rzmCrkr03g@mail.gmail.com>
Date: Mon, 21 Jan 2013 12:38:59 -0500
Message-ID: <CAN4YXvdZsS6W1oEPabL+N=HZbcpUZ4pJB+8uG6DQ8JqpcEqCMQ@mail.gmail.com>
Subject: Re: Tool for Lucene storage recovery
From: Erick Erickson <erickerickson@gmail.com>
To: java-user <java-user@lucene.apache.org>
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

P.S. Or just attach the code without your customized doc recovery
stuff with a note about how to carry it forward? That way someone
could pick it up if interested and generalize it.

Best
Erick

On Mon, Jan 21, 2013 at 12:37 PM, Erick Erickson
<erickerickson@gmail.com> wrote:
> Maybe do the handling as an overridable method and make it abstract?
> That would give the skeleton of all the recovery stuff, but then
> require the user to implement the actual recovery?
>
> Just a thought
> Erick
>
> On Mon, Jan 21, 2013 at 9:06 AM, Micha=C5=82 Brzezicki <mbrzezicki@gmail.=
com> wrote:
>> I don't think it is possible to simply compile it as jar since you need =
to
>> implement handling of recovered documents.
>>
>> --
>> Micha=C5=82
>>
>> 2013/1/19 Simon Willnauer <simon.willnauer@gmail.com>
>>
>>> hey,
>>>
>>> do you wanna open a jira issue for this and attach your code? this
>>> might help others too and if the shit hits the fan its good to have
>>> something in the lucene jar that can bring some data back.
>>>
>>> simon
>>> On Fri, Jan 18, 2013 at 6:37 PM, Micha=C5=82 Brzezicki <mbrzezicki@gmai=
l.com>
>>> wrote:
>>> > in lucene (*.fdt). Code is available here http://pastebin.com/nmF0j4n=
pyou
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54779-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Jan 21 21:16:10 2013
Return-Path: <java-user-return-54779-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 65F20EB46
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon, 21 Jan 2013 21:16:02 +0000 (UTC)
Received: (qmail 88137 invoked by uid 500); 21 Jan 2013 21:16:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88088 invoked by uid 500); 21 Jan 2013 21:16:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88080 invoked by uid 99); 21 Jan 2013 21:16:00 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Jan 2013 21:16:00 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of emmanuel.gosse@gmail.com designates 209.85.219.43 as permitted sender)
Received: from [209.85.219.43] (HELO mail-oa0-f43.google.com) (209.85.219.43)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Jan 2013 21:15:53 +0000
Received: by mail-oa0-f43.google.com with SMTP id k1so6516364oag.2
        for <java-user@lucene.apache.org>; Mon, 21 Jan 2013 13:15:33 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=x-received:mime-version:in-reply-to:references:from:date:message-id
         :subject:to:content-type;
        bh=6KZ631wC0o7DsWV1N5rx0ccm9vL0YkhYyYA/L9uqFoE=;
        b=CtDL/PGSGUQJM0fwewPicme7cxG8POt5qinnOoatooMGz5nQyT5cYbMGLAsWIyY8UJ
         m4IeP3lwxM3BHSt5gQobzzAJ3mKyyGI8zokjykwtb3SDZZnilkbsG6piAKkVS4/jKcSW
         o3/PB3fD6juoQtZgmANN+tiENKkPnR1bHsjNZ3AiQEqDWof0l3LpxtaaUCF8lBPPcp22
         bcJwOsEmSF+jLeIynim3tExRMjipPSrD2uJp2X/mLVlk3c3fx0LFJcXpASNufBhNlLAO
         RiMiJYDrpxmDvZEbW1nqwWa+qdfJPzb6k5u0D2dyvDsEPxhCm/IpHxpbxXy5G/OynfD4
         b8Lg==
X-Received: by 10.60.30.231 with SMTP id v7mr15332932oeh.22.1358802932952;
 Mon, 21 Jan 2013 13:15:32 -0800 (PST)
MIME-Version: 1.0
Received: by 10.76.110.102 with HTTP; Mon, 21 Jan 2013 13:14:51 -0800 (PST)
In-Reply-To: <014501cdf6f4$871c62d0$95552870$@thetaphi.de>
References: <CAHgjhBH3Lw7E5ok0hdgpZuQrhB4E_Xku8MZ5b-O=wAiGVEg9Wg@mail.gmail.com>
 <014501cdf6f4$871c62d0$95552870$@thetaphi.de>
From: emmanuel Gosse <emmanuel.gosse@gmail.com>
Date: Mon, 21 Jan 2013 22:14:51 +0100
Message-ID: <CAHgjhBESscjgpNRVHzjOdquFvoDASN-MHra4fZRV0h1zS4Qo=A@mail.gmail.com>
Subject: Re: FieldCacheTermsFilter performance
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=e89a8ff1c2c2236f1204d3d2f60d
X-Virus-Checked: Checked by ClamAV on apache.org

--e89a8ff1c2c2236f1204d3d2f60d
Content-Type: text/plain; charset=ISO-8859-1

Hi,

We have about 120 filters, half is selective but some filters are "boolean".


It's easy to find where the difference comes.

binarySearchLookup in DocTermsIndexImpl versus StringIndex :

In StringIndex, just a comparaison between Strings  :
int cmp = lookup[mid].compareTo(key);

In DocTermsIndexImpl, the BytesRef has to be retrieved :

public BytesRef lookup(int ord, BytesRef ret) {
      return bytes.fill(ret, termOrdToBytesOffset.get(ord));
}


Emmanuel


2013/1/20 Uwe Schindler <uwe@thetaphi.de>

> Hi,
>
> in Lucene 4.0 I would recommend to use TermsFilter (from queries module),
> not FieldCacheTermsFilter, because the term dictionary is much faster and
> it is in this case better to use the posting lists, instead of scanning all
> documents (which FCTermsCache does). How many filter terms do you have? Is
> the filter selective? To further improve, use CachingWrapperFilter, too
> (this will cache filter results, which is useful if you have a set of
> Filters/terms that are used quite often).
> The problem with FCTermsFilter is: It scans all documents from beginning
> to end and looks them up the terms cache. In Lucene 4.0 the structure of
> the FieldCache changed to be more memory efficient (which does not hurt the
> primary use-case of sorting), but scanning all documents and resolving all
> terms is not always the best option (this also heavily relies on your index
> structure, FCTermsFilter may still be faster under some circumstances).
>
> Uwe
> -----
> Uwe Schindler
> H.-H.-Meier-Allee 63, D-28213 Bremen
> http://www.thetaphi.de
> eMail: uwe@thetaphi.de
>
>
> > -----Original Message-----
> > From: emmanuel Gosse [mailto:emmanuel.gosse@gmail.com]
> > Sent: Saturday, January 19, 2013 10:58 PM
> > To: java-user@lucene.apache.org
> > Subject: FieldCacheTermsFilter performance
> >
> > Hi,
> >
> > I would like to share a performance problem about FieldCacheTermsFilter
> > between 3.0.3 and 4.0.0 Lucene versions.
> >
> > I've made tests with the same application with 3.0.3 (my production
> > version) and 4.0.0.
> > And I found a "big" difference of response time.
> >
> > I run "real life" injection of 400 000 queries and I obtain the average
> of time
> > response.
> > I used to run this type of tests to validate that we have no performance
> > regression.
> >
> > So I've made other tests to find out where comes this difference.
> > Desactivating faceting or changing Directory used or other more...
> >
> > And for one test, I desactivated the filters (I use only
> > FieldCacheTermsFilter) and I obtained the same average of time response.
> >
> > To give some data :
> > 20 millions of documents
> > 3 indexes under a multireader
> > no indexations, only searcher (indexation is not implemented in this app)
> > 400 000 queries with jmeter
> >
> > Test :
> >
> > 3.0.3 or 4.0.0
> > Queries without filters : 60ms (average of time response)
> >
> > Queries with filters:
> > 3.0.3 : 150ms
> > 4.0.0 : 400ms
> >
> > The code difference of my application is only the required one to plug
> with
> > each Lucene version.
> >
> > The fields used to filter are not stored and in 4.0.0 version, are
> stringfield.
> > I checked that caches of fieldCache dont move for the test.
> >
> > I have no more ideas to seek. Maybe I've not understood which type of
> field
> > I should use.
> >
> > Emmanuel
> >
> > -----------
> > Emmanuel Gosse
> > Fnac.Com <http://www.fnac.com>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
Emmanuel Gosse
06 65 26 96 71

--e89a8ff1c2c2236f1204d3d2f60d--

From java-user-return-54780-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Jan 21 21:27:48 2013
Return-Path: <java-user-return-54780-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id A9492DD6D
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon, 21 Jan 2013 21:27:48 +0000 (UTC)
Received: (qmail 25886 invoked by uid 500); 21 Jan 2013 21:27:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25569 invoked by uid 500); 21 Jan 2013 21:27:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25542 invoked by uid 99); 21 Jan 2013 21:27:45 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Jan 2013 21:27:45 +0000
X-ASF-Spam-Status: No, hits=-2.7 required=5.0
	tests=ASF_LIST_OPS,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ryantxu@gmail.com designates 209.85.217.193 as permitted sender)
Received: from [209.85.217.193] (HELO mail-lb0-f193.google.com) (209.85.217.193)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Jan 2013 21:27:38 +0000
Received: by mail-lb0-f193.google.com with SMTP id n10so613071lbo.4
        for <multiple recipients>; Mon, 21 Jan 2013 13:27:18 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:x-received:date:message-id:subject:from:to
         :content-type;
        bh=J95VSqEn+EkbS/3drvnA0zL0Hu5HdbqS+BRV2cJveiE=;
        b=VDCQqD/FCzLcWq/XPEZUaQpJHp+M0n/Kljz6dGNtBJIIiSauNXtVopfQI2Mj9o1cQ/
         nGCLsdkwttk9KlsDXKxmPiuMfM7FEWoyQrkhj5LkVohqCvZKTNMj3/oKhFP+nDbCS37F
         cqCPLqMfz+wc8Jez3NK5+TwKA1eMcnOGW/IGQc2fjYZ08ZxOCVn9gDv9Hgy2w7g4a725
         1wUuMjtApWgy67JaViiASBHcUF2Uwh83vF0+fRtcbiLJsU+QDvMZH1IICpzOTxy8Ibki
         LpiQ1XEtaPa1SC3gGiRid3MntRzmdnWEhgnRImY/h8iabFbMVA1nIU8aVlIRPJjFWNfV
         xdRQ==
MIME-Version: 1.0
X-Received: by 10.152.114.66 with SMTP id je2mr18624177lab.40.1358803232484;
 Mon, 21 Jan 2013 13:20:32 -0800 (PST)
Received: by 10.112.126.242 with HTTP; Mon, 21 Jan 2013 13:20:32 -0800 (PST)
Date: Mon, 21 Jan 2013 13:20:32 -0800
Message-ID: <CAF=Pa5-558uJ756WhED9kOKy9NCen5n5PYnpAc65RFToqKKvhw@mail.gmail.com>
Subject: Re.....
From: Ryan McKinley <ryantxu@gmail.com>
To: jross@makanipower.com, jan.asf@cominvent.com, JSlaughter@eaglebankcorp.com, 
	jason.rutherglen@gmail.com, jasont@media.mit.edu, java-dev@lucene.apache.org, 
	java-user-subscribe@lucene.apache.org, java-user@lucene.apache.org, 
	jbelquist@ccarey.com
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

http://phukimlong.com/wp-content/themes/twentyeleven/yahool2.php

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54781-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Jan 22 02:26:18 2013
Return-Path: <java-user-return-54781-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id C993AEA8E
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 22 Jan 2013 02:26:18 +0000 (UTC)
Received: (qmail 67844 invoked by uid 500); 22 Jan 2013 02:26:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67760 invoked by uid 500); 22 Jan 2013 02:26:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67751 invoked by uid 99); 22 Jan 2013 02:26:16 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Jan 2013 02:26:16 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of dotsid@gmail.com designates 209.85.217.179 as permitted sender)
Received: from [209.85.217.179] (HELO mail-lb0-f179.google.com) (209.85.217.179)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Jan 2013 02:26:10 +0000
Received: by mail-lb0-f179.google.com with SMTP id j14so216926lbo.24
        for <java-user@lucene.apache.org>; Mon, 21 Jan 2013 18:25:48 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=x-received:content-type:mime-version:subject:from:in-reply-to:date
         :content-transfer-encoding:message-id:references:to:x-mailer;
        bh=UaqSI7kChzRRBuLVy3CmuPX+gYFwDxWxhkWa1PFyk9g=;
        b=hyfD9DPnbBUGhNGShC9T/vU6QCE7G7dOVMMlkxywCP6UvTUYH2tn9+lSY6sm6s5iw8
         ep1Ivn5mwG1N/zcZwwclTz8I7Bf0r2NPOEMtZ+FvvRohqI++D/Aw1Im5dN6kNpUmgg35
         fQCKsTiZIcQVJvNpAcWZ4JFIwtNFFTB/SG4n8B8uBato5VbFYiyd/sE0YSSivjLPVfDo
         2Zj/paMGmUu4ZWWynOz4m/5wi0JWWrgV3b/X+a9RXXzn6LU8kpnwZ7rZ5GfiUh0VyJYz
         rlaR1EtjeGhGBD2DLQLeQwNNv0bwgK08dPpq+TaXNnllW+INASMA2fwOnaBLfxnPuR60
         d2bA==
X-Received: by 10.152.122.133 with SMTP id ls5mr19757479lab.9.1358821548801;
        Mon, 21 Jan 2013 18:25:48 -0800 (PST)
Received: from [172.16.31.105] (gw.farpost.ru. [80.92.161.1])
        by mx.google.com with ESMTPS id gi3sm5837479lab.7.2013.01.21.18.25.46
        (version=TLSv1 cipher=ECDHE-RSA-RC4-SHA bits=128/128);
        Mon, 21 Jan 2013 18:25:47 -0800 (PST)
Content-Type: text/plain; charset=iso-8859-1
Mime-Version: 1.0 (Mac OS X Mail 6.2 \(1499\))
Subject: Re: Is LogByteSizeMergePolicy deterministic?
From: Denis Bazhenov <dotsid@gmail.com>
In-Reply-To: <CAL8PwkZRb_hAeBYfwSeh595OmhvMd3sXq2wE=FBtcUFp0MKEKQ@mail.gmail.com>
Date: Tue, 22 Jan 2013 13:25:43 +1100
Content-Transfer-Encoding: quoted-printable
Message-Id: <D9315AAD-0323-4E63-A5D9-361E7E4E81D8@gmail.com>
References: <CAOX4E5EZv0NhdcYKexZSWWjpaR1f0va6FiZt-aEwc=khc3ki_g@mail.gmail.com> <CAL8PwkZRb_hAeBYfwSeh595OmhvMd3sXq2wE=FBtcUFp0MKEKQ@mail.gmail.com>
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.1499)
X-Virus-Checked: Checked by ClamAV on apache.org

Can you explain in more details why is that? We have in-house =
replication for Lucene/3.6 index and use default IndexWriter settings. =
All works fine except sometimes (just after optimization, in fact) index =
could not be opened (segment file is missing on FS). We tolerate this =
issue by replicating index one more time in case of failure. I guess =
it's somehow related to the discussed issue.

On Jan 19, 2013, at 5:16 AM, Michael McCandless =
<lucene@mikemccandless.com> wrote:

> You must also use only a single indexing thread.
>=20
> And you must use SerialMergeScheduler.
>=20
> If you do that, I think it will be deterministic.
>=20
> But don't rely on this ... this is runtime behavior and can suddenly
> change between releases ...
>=20
> Mike McCandless
>=20
> http://blog.mikemccandless.com
>=20
> On Fri, Jan 18, 2013 at 10:39 AM, Apostolis Xekoukoulotakis
> <xekoukou@gmail.com> wrote:
>> I want to replicate an index from multiple replicas at the same time.
>>=20
>> Those replicas have been given the same documents and at the same =
order.
>>=20
>> Will the files be the same across all replicas?
>>=20
>>=20
>>=20
>> --
>>=20
>>=20
>> Sincerely yours,
>>=20
>>     Apostolis Xekoukoulotakis
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20

---
Denis Bazhenov <dotsid@gmail.com>






---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54782-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Jan 22 02:33:13 2013
Return-Path: <java-user-return-54782-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 57991ECE1
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 22 Jan 2013 02:33:13 +0000 (UTC)
Received: (qmail 84516 invoked by uid 500); 22 Jan 2013 02:33:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84446 invoked by uid 500); 22 Jan 2013 02:33:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84388 invoked by uid 99); 22 Jan 2013 02:33:07 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Jan 2013 02:33:07 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of dotsid@gmail.com designates 209.85.217.169 as permitted sender)
Received: from [209.85.217.169] (HELO mail-lb0-f169.google.com) (209.85.217.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Jan 2013 02:33:01 +0000
Received: by mail-lb0-f169.google.com with SMTP id m4so3687887lbo.0
        for <java-user@lucene.apache.org>; Mon, 21 Jan 2013 18:32:39 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=x-received:content-type:mime-version:subject:from:in-reply-to:date
         :content-transfer-encoding:message-id:references:to:x-mailer;
        bh=tQfYto61x7Tzaa2Ox8LMD42F4fxxjvljOkq0eQ9tZLQ=;
        b=oQJ4e70pxoalLB3ptdS/87ixOTtTUNK+QJZCvmVuXI1gkAQT724fum+Kw4oJbWpwoo
         bdP9gB1SY0FJ7msIyI8L91dcQmuekVy4rp/pQkui/uXEtsgrpdmGltF8XRg0H5RnzQd6
         nEDfsSUNWbe2cf6lsJsXlNhWSmAwPkaN6Rj6jhgz4a5HFIOclbjZRGtAU0VQHjAvuFjy
         J4cjhUTh6VeAuM8Pih2z+VKhFuPVGsGwSnDVg3RSgDdrwVqkPsGVIZ49xeYPyiZEOiN2
         qYNlB3s/fckxJ3wfzuwOMIUyJY28IKJkL+guo/qYI1wAeNlfdb/lIvQQZmAv1+BPJqJ6
         LQhQ==
X-Received: by 10.152.110.18 with SMTP id hw18mr19625672lab.22.1358821959792;
        Mon, 21 Jan 2013 18:32:39 -0800 (PST)
Received: from [172.16.31.105] (gw.farpost.ru. [80.92.161.1])
        by mx.google.com with ESMTPS id hn3sm6237380lab.10.2013.01.21.18.32.35
        (version=TLSv1 cipher=ECDHE-RSA-RC4-SHA bits=128/128);
        Mon, 21 Jan 2013 18:32:39 -0800 (PST)
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Mac OS X Mail 6.2 \(1499\))
Subject: Re: FacetedSearch and MultiReader
From: Denis Bazhenov <dotsid@gmail.com>
In-Reply-To: <1358784492.2728.35.camel@linux.scoobydoo>
Date: Tue, 22 Jan 2013 13:32:32 +1100
Content-Transfer-Encoding: quoted-printable
Message-Id: <8C30D9E4-B961-4A09-8FEA-343690A0BC56@gmail.com>
References: <1358780365.2728.14.camel@linux.scoobydoo> <007c01cdf7eb$1eba8d50$5c2fa7f0$@thetaphi.de> <1358782771.2728.28.camel@linux.scoobydoo> <CALfq-2QkLJaLtbaH7P1_XARJYQju_Nd6QUK1CdvGXXPTsjRPQA@mail.gmail.com> <1358784492.2728.35.camel@linux.scoobydoo>
To: java-user@lucene.apache.org,
 nbuso@ebi.ac.uk
X-Mailer: Apple Mail (2.1499)
X-Virus-Checked: Checked by ClamAV on apache.org

We have similar distribute search system and we have finished with the =
following scheme. Search replicas (machines where index resides) are =
build FacetResult's based on their index chunk (top N categories with =
document counts). Later on the results are merged "by hands" with =
summing relevant categories from different replicas.

On Jan 22, 2013, at 3:08 AM, Nicola Buso <nbuso@ebi.ac.uk> wrote:

> Hi Shai,
>=20
> I was thinking to that too, but I'm indexing all indexes in a custom
> distributed environment than I can't in this moment have a single
> categories index for all the content indexes at indexing time.
> A solution should be to merge all the categories indexes in one only
> index and use your solution but the merge code I see in the examples
> merge also the content index and I can't do that.
>=20
> I should share the taxonomy if is possible to merge (I see the =
resulting
> categories indexes are not that big currently), but I would prefer to
> have a solution where I can collect the facets over multiple =
categories
> indexes in this way I will be sure the solution will scale better.
>=20
>=20
> Nicola.
>=20
>=20
> On Mon, 2013-01-21 at 17:54 +0200, Shai Erera wrote:
>> Hi Nicola,
>>=20
>>=20
>> I think that what you're describing corresponds to distributed =
faceted
>> search. I.e., you have N content indexes, alongside N taxonomy
>> indexes.
>>=20
>> The information that's indexed in each of those sub-indexes does not
>> correlate with the other ones.
>> For example, say that you index the category "Movie/Drama", it may
>> receive ordinal 12 in index1 and 23 in index2.
>>=20
>> If you'll try to count ordinals using MultiReader, you'll just mess =
up
>> everything.
>>=20
>>=20
>> If you can share a single taxonomy index for all N content indexes,
>> then you'll be in a super-simple position:
>>=20
>> 1) Open one TaxonomyReader
>>=20
>> 2) Execute search with MultiReader and FacetsCollector
>>=20
>>=20
>>=20
>> It doesn't get simpler than that ! :)
>>=20
>>=20
>> Before I go into great length describing what you should do if you
>> cannot share the taxonomy, let me know if that's not an option for
>> you.
>>=20
>> Shai
>>=20
>>=20
>>=20
>> On Mon, Jan 21, 2013 at 5:39 PM, Nicola Buso <nbuso@ebi.ac.uk> wrote:
>>        Thanks for the reply Uwe,
>>=20
>>        we currently can search with MultiReader over all the indexes
>>        we have.
>>        Now I want to add the faceting search, than I created a
>>        categories index
>>        for every index I currently have.
>>        To accumulate the faceted results now I have a MultiReader
>>        pointing all
>>        the indexes and I can create a TaxonomyReader for every
>>        categories index
>>        I have; all the way I see to obtain FacetResults are:
>>        1 - FacetsCollector
>>        2 - a FacetsAccumulator implementation
>>=20
>>        suppose I use the second option. I should:
>>        - search as usual using the MultiReader
>>        - than try to collect all the facetresults iterating over my
>>        TaxonomyReaders; at every iteration:
>>          - I create a FacetsAccumulator using the MultiReader and a
>>        TaxonomyReader
>>          - I get a list of FacetResult from the accumulator.
>>        - as I finish I should in some way merge all the
>>        List<FacetResult> I
>>        have.
>>=20
>>        I think this solution is not correct because the docsids from
>>        the search
>>        are pointing the multireader instead the taxonomyreader is
>>        pointing to
>>        the categories index of a single reader.
>>        I neither like to merge all the List of FacetResult I retrieve
>>        from the
>>        Accumulators.
>>=20
>>        Probably I'm missing something, can somebody clarify to me how
>>        I should
>>        collect the facets in this case?
>>=20
>>=20
>>        Nicola.
>>=20
>>=20
>>=20
>>        On Mon, 2013-01-21 at 16:22 +0100, Uwe Schindler wrote:
>>> Just use MultiReader, it extends IndexReader, so you can
>>        pass it anywhere where IndexReader can be passed.
>>>=20
>>> -----
>>> Uwe Schindler
>>> H.-H.-Meier-Allee 63, D-28213 Bremen
>>> http://www.thetaphi.de
>>> eMail: uwe@thetaphi.de
>>>=20
>>>> -----Original Message-----
>>>> From: Nicola Buso [mailto:nbuso@ebi.ac.uk]
>>>> Sent: Monday, January 21, 2013 3:59 PM
>>>> To: java-user@lucene.apache.org
>>>> Subject: FacetedSearch and MultiReader
>>>>=20
>>>> Hi all,
>>>>=20
>>>> I'm trying to develop faceted search using lucene 4.0
>>        faceting framework.
>>>> In our project we are searching on multiple indexes using
>>        lucene
>>>> MultiReader. How should we use the faceted framework to
>>        obtain
>>>> FacetResults starting from a MultiReader? all the example
>>        I see are using a
>>>> "single" IndexReader.
>>>>=20
>>>>=20
>>>>=20
>>>> Nicola.
>>>>=20
>>>>=20
>>>>=20
>>        =
---------------------------------------------------------------------
>>>> To unsubscribe, e-mail:
>>        java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail:
>>        java-user-help@lucene.apache.org
>>>=20
>>=20
>>=20
>>=20
>>        =
---------------------------------------------------------------------
>>        To unsubscribe, e-mail:
>>        java-user-unsubscribe@lucene.apache.org
>>        For additional commands, e-mail:
>>        java-user-help@lucene.apache.org
>>=20
>>=20
>>=20
>>=20
>=20
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20

---
Denis Bazhenov <dotsid@gmail.com>






---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54783-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Jan 22 04:20:49 2013
Return-Path: <java-user-return-54783-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 4378FECA3
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 22 Jan 2013 04:20:49 +0000 (UTC)
Received: (qmail 16682 invoked by uid 500); 22 Jan 2013 04:20:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16612 invoked by uid 500); 22 Jan 2013 04:20:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16406 invoked by uid 99); 22 Jan 2013 04:20:37 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Jan 2013 04:20:37 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of serera@gmail.com designates 209.85.212.177 as permitted sender)
Received: from [209.85.212.177] (HELO mail-wi0-f177.google.com) (209.85.212.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Jan 2013 04:20:32 +0000
Received: by mail-wi0-f177.google.com with SMTP id hm2so5534405wib.4
        for <java-user@lucene.apache.org>; Mon, 21 Jan 2013 20:20:11 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:x-received:in-reply-to:references:date:message-id
         :subject:from:to:content-type;
        bh=LmwGRat5Tv453Y8LakrQ7dizMKA8kJj4ZKk7oqnEttM=;
        b=Xc9o/AjfHfy7mOZJaBUEIXiIiv05pMVKLrrZKy9cDAYOFPDemtUVYf7kNjvs1CBLoX
         I4BFllI+ox2Xqo5US1zOUbxXENF9EBiFwk0Zl0WVey6TRJDHIdni3aaqCOlZC7DUlwcI
         1J5SjCJ/Nw41g5KzSVAO4qRBg8aKx67mY9fdgeVaQcvtSomUyI2DAiCRuktM3aqBYxRu
         cWudUiduW4T5XOVxIOS9+f55MxVgDMm7d4S45NOEetfxy4po7ThxwqrB70QAGkSjEwzd
         VnElngchGueXkMcPtMepSQGwEqBF4jDFavaEiDazbm9hlML/wYuXTVkvLOwUeL1ZZOpQ
         NzRQ==
MIME-Version: 1.0
X-Received: by 10.180.82.41 with SMTP id f9mr18741954wiy.25.1358828411408;
 Mon, 21 Jan 2013 20:20:11 -0800 (PST)
Received: by 10.194.90.171 with HTTP; Mon, 21 Jan 2013 20:20:11 -0800 (PST)
In-Reply-To: <8C30D9E4-B961-4A09-8FEA-343690A0BC56@gmail.com>
References: <1358780365.2728.14.camel@linux.scoobydoo>
	<007c01cdf7eb$1eba8d50$5c2fa7f0$@thetaphi.de>
	<1358782771.2728.28.camel@linux.scoobydoo>
	<CALfq-2QkLJaLtbaH7P1_XARJYQju_Nd6QUK1CdvGXXPTsjRPQA@mail.gmail.com>
	<1358784492.2728.35.camel@linux.scoobydoo>
	<8C30D9E4-B961-4A09-8FEA-343690A0BC56@gmail.com>
Date: Tue, 22 Jan 2013 06:20:11 +0200
Message-ID: <CALfq-2R+qNdb34t-BYQvJyWZBo=tT0sE_pNieCOuRO7oSANGnA@mail.gmail.com>
Subject: Re: FacetedSearch and MultiReader
From: Shai Erera <serera@gmail.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Content-Type: multipart/alternative; boundary=f46d041826e6c5d00304d3d8e458
X-Virus-Checked: Checked by ClamAV on apache.org

--f46d041826e6c5d00304d3d8e458
Content-Type: text/plain; charset=ISO-8859-1

Hi Nicola,

What I had in mind is something similar to this, which is possible starting
with Lucene 4.1, due to changes done to facets (per-segment faceting):

DirTaxoWriter master = new DirTaxoWriter(masterDir);
Directory[] origTaxoDirs = new Directory[numTaxoDirs]; // open Directories
and store in that array
OrdinalMap[] ordinalMaps = new OrdinalMap[numTaxoDirs]; // initialize
OrdinalMap and store in that array

// now do the merge
for (int i = 0; i < origTaxoDirs.length; i++) {
  master.addTaxonomy(origTaxoDir[i], ordinalMaps[i]);
}

// now open your readers, and create the important map
Map<AtomicReader,OrdinalMap) readerOrdinals = new
HashMap<AtomicReader,OrdinalMap>();
DirectoryReader[] readers = new DirectoryReader[origTaxoDirs.length];
for (int i = 0; i < origTaxoDirs.length; i++) {
  DirectoryReader r = DirectoryReader.open(contentDirectories[i]);
  OrdinalMap ordMap = ordinalMaps[i];
  for (AtomicReaderContext ctx : r.leaves()) {
    readerOrdinals.put(ctx.reader(), ordMap);
  }
}

MultiReader mr = new MultiReader(readers);

// create your FacetRequest (CountFacetRequest) with a custom Aggregator
FacetRequest fr = new CountFacetRequest(cp, topK) {
  @Override
  public Aggregator createAggregator(...) {
    return new OrdinalMappingAggregator() {
      int[] ordMap;

      @Override
      public void setNextReader(AtomicReaderContext context) {
        ordMap = readerOrdinals.get(context.reader()).getMap();
      }

      @Override
      public void aggregate(int docID, float score, IntsRef ordinals) {
        int upto = ordinals.offset + ordinals.length;
        for (int i = ordinals.offset; i < upto; i++) {
          int ordinal = ordinals[i]; // original ordinal read for the
AtomicReader given to setNextReader
          int mappedOrdinal = ordMap[ordinal]; // mapped ordinal, following
the taxonomy merge
          counts[mappedOrdinal]++; // count the mapped ordinal instead, so
all AtomicReaders count that ordinal
        }
      }
    };
  }
}

While it may look like I wrote actual code to do it, I didn't :). So I
guess it should work, but I haven't tried it.
That way, you don't touch the content indexes at all, just the taxonomy
ones.

Note however that you'll need to do this step every time the taxonomy index
is updated, and you refresh the TaxoReader instance.
Also, this will only work if all your indexes are opened in the same JVM
(which I assume that's the case, since you use MultiReader).

If you still don't want to do that, then what Dennis wrote above is another
way to do distributed faceted search, either inside the same JVM or across
multiple JVMs.
You obtain the FacetResult from each search and merge the results
(unfortunately, there's still no tool in Lucene to do that for you).
Just make sure to ask for a larger K, to ensure that the correct top-K is
returned (see my previous notes).

Shai




On Tue, Jan 22, 2013 at 4:32 AM, Denis Bazhenov <dotsid@gmail.com> wrote:

> We have similar distribute search system and we have finished with the
> following scheme. Search replicas (machines where index resides) are build
> FacetResult's based on their index chunk (top N categories with document
> counts). Later on the results are merged "by hands" with summing relevant
> categories from different replicas.
>
> On Jan 22, 2013, at 3:08 AM, Nicola Buso <nbuso@ebi.ac.uk> wrote:
>
> > Hi Shai,
> >
> > I was thinking to that too, but I'm indexing all indexes in a custom
> > distributed environment than I can't in this moment have a single
> > categories index for all the content indexes at indexing time.
> > A solution should be to merge all the categories indexes in one only
> > index and use your solution but the merge code I see in the examples
> > merge also the content index and I can't do that.
> >
> > I should share the taxonomy if is possible to merge (I see the resulting
> > categories indexes are not that big currently), but I would prefer to
> > have a solution where I can collect the facets over multiple categories
> > indexes in this way I will be sure the solution will scale better.
> >
> >
> > Nicola.
> >
> >
> > On Mon, 2013-01-21 at 17:54 +0200, Shai Erera wrote:
> >> Hi Nicola,
> >>
> >>
> >> I think that what you're describing corresponds to distributed faceted
> >> search. I.e., you have N content indexes, alongside N taxonomy
> >> indexes.
> >>
> >> The information that's indexed in each of those sub-indexes does not
> >> correlate with the other ones.
> >> For example, say that you index the category "Movie/Drama", it may
> >> receive ordinal 12 in index1 and 23 in index2.
> >>
> >> If you'll try to count ordinals using MultiReader, you'll just mess up
> >> everything.
> >>
> >>
> >> If you can share a single taxonomy index for all N content indexes,
> >> then you'll be in a super-simple position:
> >>
> >> 1) Open one TaxonomyReader
> >>
> >> 2) Execute search with MultiReader and FacetsCollector
> >>
> >>
> >>
> >> It doesn't get simpler than that ! :)
> >>
> >>
> >> Before I go into great length describing what you should do if you
> >> cannot share the taxonomy, let me know if that's not an option for
> >> you.
> >>
> >> Shai
> >>
> >>
> >>
> >> On Mon, Jan 21, 2013 at 5:39 PM, Nicola Buso <nbuso@ebi.ac.uk> wrote:
> >>        Thanks for the reply Uwe,
> >>
> >>        we currently can search with MultiReader over all the indexes
> >>        we have.
> >>        Now I want to add the faceting search, than I created a
> >>        categories index
> >>        for every index I currently have.
> >>        To accumulate the faceted results now I have a MultiReader
> >>        pointing all
> >>        the indexes and I can create a TaxonomyReader for every
> >>        categories index
> >>        I have; all the way I see to obtain FacetResults are:
> >>        1 - FacetsCollector
> >>        2 - a FacetsAccumulator implementation
> >>
> >>        suppose I use the second option. I should:
> >>        - search as usual using the MultiReader
> >>        - than try to collect all the facetresults iterating over my
> >>        TaxonomyReaders; at every iteration:
> >>          - I create a FacetsAccumulator using the MultiReader and a
> >>        TaxonomyReader
> >>          - I get a list of FacetResult from the accumulator.
> >>        - as I finish I should in some way merge all the
> >>        List<FacetResult> I
> >>        have.
> >>
> >>        I think this solution is not correct because the docsids from
> >>        the search
> >>        are pointing the multireader instead the taxonomyreader is
> >>        pointing to
> >>        the categories index of a single reader.
> >>        I neither like to merge all the List of FacetResult I retrieve
> >>        from the
> >>        Accumulators.
> >>
> >>        Probably I'm missing something, can somebody clarify to me how
> >>        I should
> >>        collect the facets in this case?
> >>
> >>
> >>        Nicola.
> >>
> >>
> >>
> >>        On Mon, 2013-01-21 at 16:22 +0100, Uwe Schindler wrote:
> >>> Just use MultiReader, it extends IndexReader, so you can
> >>        pass it anywhere where IndexReader can be passed.
> >>>
> >>> -----
> >>> Uwe Schindler
> >>> H.-H.-Meier-Allee 63, D-28213 Bremen
> >>> http://www.thetaphi.de
> >>> eMail: uwe@thetaphi.de
> >>>
> >>>> -----Original Message-----
> >>>> From: Nicola Buso [mailto:nbuso@ebi.ac.uk]
> >>>> Sent: Monday, January 21, 2013 3:59 PM
> >>>> To: java-user@lucene.apache.org
> >>>> Subject: FacetedSearch and MultiReader
> >>>>
> >>>> Hi all,
> >>>>
> >>>> I'm trying to develop faceted search using lucene 4.0
> >>        faceting framework.
> >>>> In our project we are searching on multiple indexes using
> >>        lucene
> >>>> MultiReader. How should we use the faceted framework to
> >>        obtain
> >>>> FacetResults starting from a MultiReader? all the example
> >>        I see are using a
> >>>> "single" IndexReader.
> >>>>
> >>>>
> >>>>
> >>>> Nicola.
> >>>>
> >>>>
> >>>>
> >>
>  ---------------------------------------------------------------------
> >>>> To unsubscribe, e-mail:
> >>        java-user-unsubscribe@lucene.apache.org
> >>>> For additional commands, e-mail:
> >>        java-user-help@lucene.apache.org
> >>>
> >>
> >>
> >>
> >>
>  ---------------------------------------------------------------------
> >>        To unsubscribe, e-mail:
> >>        java-user-unsubscribe@lucene.apache.org
> >>        For additional commands, e-mail:
> >>        java-user-help@lucene.apache.org
> >>
> >>
> >>
> >>
> >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
>
> ---
> Denis Bazhenov <dotsid@gmail.com>
>
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--f46d041826e6c5d00304d3d8e458--

From java-user-return-54784-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Jan 22 12:08:46 2013
Return-Path: <java-user-return-54784-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 6754CED27
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 22 Jan 2013 12:08:46 +0000 (UTC)
Received: (qmail 79107 invoked by uid 500); 22 Jan 2013 12:08:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78555 invoked by uid 500); 22 Jan 2013 12:08:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78455 invoked by uid 99); 22 Jan 2013 12:08:36 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Jan 2013 12:08:36 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of xekoukou@gmail.com designates 74.125.82.53 as permitted sender)
Received: from [74.125.82.53] (HELO mail-wg0-f53.google.com) (74.125.82.53)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Jan 2013 12:08:31 +0000
Received: by mail-wg0-f53.google.com with SMTP id fn15so655588wgb.32
        for <java-user@lucene.apache.org>; Tue, 22 Jan 2013 04:08:09 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:x-received:in-reply-to:references:date:message-id
         :subject:from:to:content-type;
        bh=HNW2LAaB/Hje3ZvQhqNhcPopgsqe9vShykig9tZTkww=;
        b=YC57O+weLc8coU2R4/xijXan7FWfEw9uAKfO59rLNwIZBbB8a9IPRgWpfq0aGazeDT
         V42lPAM57OAc9VlchjQpHLoCEux4RT+mKzGzGb9H5a6WIgFA2Fkm4GnYsMy01LqKj4vG
         HQppgI+YyaxrP0Lqu3nt3vCf42Gdwam+HqKckZY+CpH1c+Y/gIK0o1imdDSBcblEljDR
         Kp9/kh3em+Ozs91ftRBK5pdoi6FB9V2gMGHWG/SIj3Eav/td6cPNTyer64o5zAJv8kbs
         TKgeeWj6I4HXXOlt8cKLQ+bHnDW51MCLuhqXJNN2by0WOjJTsAyX1r3M/dQ29LnQICzA
         dnRw==
MIME-Version: 1.0
X-Received: by 10.180.95.200 with SMTP id dm8mr20797391wib.16.1358856489746;
 Tue, 22 Jan 2013 04:08:09 -0800 (PST)
Received: by 10.217.70.72 with HTTP; Tue, 22 Jan 2013 04:08:09 -0800 (PST)
In-Reply-To: <D9315AAD-0323-4E63-A5D9-361E7E4E81D8@gmail.com>
References: <CAOX4E5EZv0NhdcYKexZSWWjpaR1f0va6FiZt-aEwc=khc3ki_g@mail.gmail.com>
	<CAL8PwkZRb_hAeBYfwSeh595OmhvMd3sXq2wE=FBtcUFp0MKEKQ@mail.gmail.com>
	<D9315AAD-0323-4E63-A5D9-361E7E4E81D8@gmail.com>
Date: Tue, 22 Jan 2013 14:08:09 +0200
Message-ID: <CAOX4E5F22+CJ9rjehMc6ESvbDx89vDg9woLDCeBVKNxYs51e8w@mail.gmail.com>
Subject: Re: Is LogByteSizeMergePolicy deterministic?
From: Apostolis Xekoukoulotakis <xekoukou@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=f46d044306065f40c004d3df6ec4
X-Virus-Checked: Checked by ClamAV on apache.org

--f46d044306065f40c004d3df6ec4
Content-Type: text/plain; charset=ISO-8859-1

I havent started working on this yet. I use the LogByteSizeMergePolicy
because of personal reasons that have nothing to do with replication.
I havent found a lucene replication method. (?)

>From my research, there are 2 ways to replicate an index.

a) You stop indexing. You make a "hard" commit and you replicate the files
of this commit.
or you change the deletion policy and simply replicate an old commit while
you continue to index.

b)You send documents to both replicas which they index independently. This
is done to take advantage of the near-real-time feature of lucene.

when one replica goes offline but is intact, If the missed documents are a
lot you do a), else you replay the missed documents to the replica.

Method a) also seems to not be durable for the new documents which havent
been replicated yet. We have only one replica of them.



2013/1/22 Denis Bazhenov <dotsid@gmail.com>

> Can you explain in more details why is that? We have in-house replication
> for Lucene/3.6 index and use default IndexWriter settings. All works fine
> except sometimes (just after optimization, in fact) index could not be
> opened (segment file is missing on FS). We tolerate this issue by
> replicating index one more time in case of failure. I guess it's somehow
> related to the discussed issue.
>
> On Jan 19, 2013, at 5:16 AM, Michael McCandless <lucene@mikemccandless.com>
> wrote:
>
> > You must also use only a single indexing thread.
> >
> > And you must use SerialMergeScheduler.
> >
> > If you do that, I think it will be deterministic.
> >
> > But don't rely on this ... this is runtime behavior and can suddenly
> > change between releases ...
> >
> > Mike McCandless
> >
> > http://blog.mikemccandless.com
> >
> > On Fri, Jan 18, 2013 at 10:39 AM, Apostolis Xekoukoulotakis
> > <xekoukou@gmail.com> wrote:
> >> I want to replicate an index from multiple replicas at the same time.
> >>
> >> Those replicas have been given the same documents and at the same order.
> >>
> >> Will the files be the same across all replicas?
> >>
> >>
> >>
> >> --
> >>
> >>
> >> Sincerely yours,
> >>
> >>     Apostolis Xekoukoulotakis
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
>
> ---
> Denis Bazhenov <dotsid@gmail.com>
>
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 


Sincerely yours,

     Apostolis Xekoukoulotakis

--f46d044306065f40c004d3df6ec4--

From java-user-return-54785-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Jan 22 12:52:31 2013
Return-Path: <java-user-return-54785-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id D77B3EB41
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 22 Jan 2013 12:52:31 +0000 (UTC)
Received: (qmail 16386 invoked by uid 500); 22 Jan 2013 12:52:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15649 invoked by uid 500); 22 Jan 2013 12:52:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15603 invoked by uid 99); 22 Jan 2013 12:52:22 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Jan 2013 12:52:22 +0000
X-ASF-Spam-Status: No, hits=-2.3 required=5.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of nbuso@ebi.ac.uk designates 193.62.194.225 as permitted sender)
Received: from [193.62.194.225] (HELO smtp02.ebi.ac.uk) (193.62.194.225)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Jan 2013 12:52:15 +0000
Received: from [172.22.70.38] (linux.windows.ebi.ac.uk [172.22.70.38])
	by smtp02.ebi.ac.uk (8.13.8/8.13.8) with ESMTP id r0MCpr8H004101
	for <java-user@lucene.apache.org>; Tue, 22 Jan 2013 12:51:53 GMT
Message-ID: <1358859100.2728.54.camel@linux.scoobydoo>
Subject: Re: FacetedSearch and MultiReader
From: Nicola Buso <nbuso@ebi.ac.uk>
Reply-To: nbuso@ebi.ac.uk
To: java-user@lucene.apache.org
Date: Tue, 22 Jan 2013 12:51:40 +0000
In-Reply-To: <CALfq-2R+qNdb34t-BYQvJyWZBo=tT0sE_pNieCOuRO7oSANGnA@mail.gmail.com>
References: <1358780365.2728.14.camel@linux.scoobydoo>
	 <007c01cdf7eb$1eba8d50$5c2fa7f0$@thetaphi.de>
	 <1358782771.2728.28.camel@linux.scoobydoo>
	 <CALfq-2QkLJaLtbaH7P1_XARJYQju_Nd6QUK1CdvGXXPTsjRPQA@mail.gmail.com>
	 <1358784492.2728.35.camel@linux.scoobydoo>
	 <8C30D9E4-B961-4A09-8FEA-343690A0BC56@gmail.com>
	 <CALfq-2R+qNdb34t-BYQvJyWZBo=tT0sE_pNieCOuRO7oSANGnA@mail.gmail.com>
Organization: EBI
Content-Type: text/plain; charset="UTF-8"
X-Mailer: Evolution 3.6.2 (3.6.2-3.fc18) 
Mime-Version: 1.0
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

I will try it.

I see there is already a lucene-4.1.0 package (dated 2013/01/21)
available for download, do you know if this version will be released
soon?


Nicola.

On Tue, 2013-01-22 at 06:20 +0200, Shai Erera wrote:
> Hi Nicola,
> 
> What I had in mind is something similar to this, which is possible starting
> with Lucene 4.1, due to changes done to facets (per-segment faceting):
> 
> DirTaxoWriter master = new DirTaxoWriter(masterDir);
> Directory[] origTaxoDirs = new Directory[numTaxoDirs]; // open Directories
> and store in that array
> OrdinalMap[] ordinalMaps = new OrdinalMap[numTaxoDirs]; // initialize
> OrdinalMap and store in that array
> 
> // now do the merge
> for (int i = 0; i < origTaxoDirs.length; i++) {
>   master.addTaxonomy(origTaxoDir[i], ordinalMaps[i]);
> }
> 
> // now open your readers, and create the important map
> Map<AtomicReader,OrdinalMap) readerOrdinals = new
> HashMap<AtomicReader,OrdinalMap>();
> DirectoryReader[] readers = new DirectoryReader[origTaxoDirs.length];
> for (int i = 0; i < origTaxoDirs.length; i++) {
>   DirectoryReader r = DirectoryReader.open(contentDirectories[i]);
>   OrdinalMap ordMap = ordinalMaps[i];
>   for (AtomicReaderContext ctx : r.leaves()) {
>     readerOrdinals.put(ctx.reader(), ordMap);
>   }
> }
> 
> MultiReader mr = new MultiReader(readers);
> 
> // create your FacetRequest (CountFacetRequest) with a custom Aggregator
> FacetRequest fr = new CountFacetRequest(cp, topK) {
>   @Override
>   public Aggregator createAggregator(...) {
>     return new OrdinalMappingAggregator() {
>       int[] ordMap;
> 
>       @Override
>       public void setNextReader(AtomicReaderContext context) {
>         ordMap = readerOrdinals.get(context.reader()).getMap();
>       }
> 
>       @Override
>       public void aggregate(int docID, float score, IntsRef ordinals) {
>         int upto = ordinals.offset + ordinals.length;
>         for (int i = ordinals.offset; i < upto; i++) {
>           int ordinal = ordinals[i]; // original ordinal read for the
> AtomicReader given to setNextReader
>           int mappedOrdinal = ordMap[ordinal]; // mapped ordinal, following
> the taxonomy merge
>           counts[mappedOrdinal]++; // count the mapped ordinal instead, so
> all AtomicReaders count that ordinal
>         }
>       }
>     };
>   }
> }
> 
> While it may look like I wrote actual code to do it, I didn't :). So I
> guess it should work, but I haven't tried it.
> That way, you don't touch the content indexes at all, just the taxonomy
> ones.
> 
> Note however that you'll need to do this step every time the taxonomy index
> is updated, and you refresh the TaxoReader instance.
> Also, this will only work if all your indexes are opened in the same JVM
> (which I assume that's the case, since you use MultiReader).
> 
> If you still don't want to do that, then what Dennis wrote above is another
> way to do distributed faceted search, either inside the same JVM or across
> multiple JVMs.
> You obtain the FacetResult from each search and merge the results
> (unfortunately, there's still no tool in Lucene to do that for you).
> Just make sure to ask for a larger K, to ensure that the correct top-K is
> returned (see my previous notes).
> 
> Shai
> 
> 
> 
> 
> On Tue, Jan 22, 2013 at 4:32 AM, Denis Bazhenov <dotsid@gmail.com> wrote:
> 
> > We have similar distribute search system and we have finished with the
> > following scheme. Search replicas (machines where index resides) are build
> > FacetResult's based on their index chunk (top N categories with document
> > counts). Later on the results are merged "by hands" with summing relevant
> > categories from different replicas.
> >
> > On Jan 22, 2013, at 3:08 AM, Nicola Buso <nbuso@ebi.ac.uk> wrote:
> >
> > > Hi Shai,
> > >
> > > I was thinking to that too, but I'm indexing all indexes in a custom
> > > distributed environment than I can't in this moment have a single
> > > categories index for all the content indexes at indexing time.
> > > A solution should be to merge all the categories indexes in one only
> > > index and use your solution but the merge code I see in the examples
> > > merge also the content index and I can't do that.
> > >
> > > I should share the taxonomy if is possible to merge (I see the resulting
> > > categories indexes are not that big currently), but I would prefer to
> > > have a solution where I can collect the facets over multiple categories
> > > indexes in this way I will be sure the solution will scale better.
> > >
> > >
> > > Nicola.
> > >
> > >
> > > On Mon, 2013-01-21 at 17:54 +0200, Shai Erera wrote:
> > >> Hi Nicola,
> > >>
> > >>
> > >> I think that what you're describing corresponds to distributed faceted
> > >> search. I.e., you have N content indexes, alongside N taxonomy
> > >> indexes.
> > >>
> > >> The information that's indexed in each of those sub-indexes does not
> > >> correlate with the other ones.
> > >> For example, say that you index the category "Movie/Drama", it may
> > >> receive ordinal 12 in index1 and 23 in index2.
> > >>
> > >> If you'll try to count ordinals using MultiReader, you'll just mess up
> > >> everything.
> > >>
> > >>
> > >> If you can share a single taxonomy index for all N content indexes,
> > >> then you'll be in a super-simple position:
> > >>
> > >> 1) Open one TaxonomyReader
> > >>
> > >> 2) Execute search with MultiReader and FacetsCollector
> > >>
> > >>
> > >>
> > >> It doesn't get simpler than that ! :)
> > >>
> > >>
> > >> Before I go into great length describing what you should do if you
> > >> cannot share the taxonomy, let me know if that's not an option for
> > >> you.
> > >>
> > >> Shai
> > >>
> > >>
> > >>
> > >> On Mon, Jan 21, 2013 at 5:39 PM, Nicola Buso <nbuso@ebi.ac.uk> wrote:
> > >>        Thanks for the reply Uwe,
> > >>
> > >>        we currently can search with MultiReader over all the indexes
> > >>        we have.
> > >>        Now I want to add the faceting search, than I created a
> > >>        categories index
> > >>        for every index I currently have.
> > >>        To accumulate the faceted results now I have a MultiReader
> > >>        pointing all
> > >>        the indexes and I can create a TaxonomyReader for every
> > >>        categories index
> > >>        I have; all the way I see to obtain FacetResults are:
> > >>        1 - FacetsCollector
> > >>        2 - a FacetsAccumulator implementation
> > >>
> > >>        suppose I use the second option. I should:
> > >>        - search as usual using the MultiReader
> > >>        - than try to collect all the facetresults iterating over my
> > >>        TaxonomyReaders; at every iteration:
> > >>          - I create a FacetsAccumulator using the MultiReader and a
> > >>        TaxonomyReader
> > >>          - I get a list of FacetResult from the accumulator.
> > >>        - as I finish I should in some way merge all the
> > >>        List<FacetResult> I
> > >>        have.
> > >>
> > >>        I think this solution is not correct because the docsids from
> > >>        the search
> > >>        are pointing the multireader instead the taxonomyreader is
> > >>        pointing to
> > >>        the categories index of a single reader.
> > >>        I neither like to merge all the List of FacetResult I retrieve
> > >>        from the
> > >>        Accumulators.
> > >>
> > >>        Probably I'm missing something, can somebody clarify to me how
> > >>        I should
> > >>        collect the facets in this case?
> > >>
> > >>
> > >>        Nicola.
> > >>
> > >>
> > >>
> > >>        On Mon, 2013-01-21 at 16:22 +0100, Uwe Schindler wrote:
> > >>> Just use MultiReader, it extends IndexReader, so you can
> > >>        pass it anywhere where IndexReader can be passed.
> > >>>
> > >>> -----
> > >>> Uwe Schindler
> > >>> H.-H.-Meier-Allee 63, D-28213 Bremen
> > >>> http://www.thetaphi.de
> > >>> eMail: uwe@thetaphi.de
> > >>>
> > >>>> -----Original Message-----
> > >>>> From: Nicola Buso [mailto:nbuso@ebi.ac.uk]
> > >>>> Sent: Monday, January 21, 2013 3:59 PM
> > >>>> To: java-user@lucene.apache.org
> > >>>> Subject: FacetedSearch and MultiReader
> > >>>>
> > >>>> Hi all,
> > >>>>
> > >>>> I'm trying to develop faceted search using lucene 4.0
> > >>        faceting framework.
> > >>>> In our project we are searching on multiple indexes using
> > >>        lucene
> > >>>> MultiReader. How should we use the faceted framework to
> > >>        obtain
> > >>>> FacetResults starting from a MultiReader? all the example
> > >>        I see are using a
> > >>>> "single" IndexReader.
> > >>>>
> > >>>>
> > >>>>
> > >>>> Nicola.
> > >>>>
> > >>>>
> > >>>>
> > >>
> >  ---------------------------------------------------------------------
> > >>>> To unsubscribe, e-mail:
> > >>        java-user-unsubscribe@lucene.apache.org
> > >>>> For additional commands, e-mail:
> > >>        java-user-help@lucene.apache.org
> > >>>
> > >>
> > >>
> > >>
> > >>
> >  ---------------------------------------------------------------------
> > >>        To unsubscribe, e-mail:
> > >>        java-user-unsubscribe@lucene.apache.org
> > >>        For additional commands, e-mail:
> > >>        java-user-help@lucene.apache.org
> > >>
> > >>
> > >>
> > >>
> > >
> > >
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> >
> > ---
> > Denis Bazhenov <dotsid@gmail.com>
> >
> >
> >
> >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54786-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Jan 22 13:03:09 2013
Return-Path: <java-user-return-54786-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id E5AC6EBA7
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 22 Jan 2013 13:03:08 +0000 (UTC)
Received: (qmail 54385 invoked by uid 500); 22 Jan 2013 13:03:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54251 invoked by uid 500); 22 Jan 2013 13:03:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54227 invoked by uid 99); 22 Jan 2013 13:03:06 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Jan 2013 13:03:06 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of serera@gmail.com designates 74.125.82.44 as permitted sender)
Received: from [74.125.82.44] (HELO mail-wg0-f44.google.com) (74.125.82.44)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Jan 2013 13:02:59 +0000
Received: by mail-wg0-f44.google.com with SMTP id dr12so4332351wgb.23
        for <java-user@lucene.apache.org>; Tue, 22 Jan 2013 05:02:39 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:x-received:in-reply-to:references:date:message-id
         :subject:from:to:content-type;
        bh=90AvRUfQN7HLJgw6X9lNRsyYq157Z6D179jc62cJZaI=;
        b=X9fVLYPzPs4PFJmuQtafPHF/bIEcbnXMvlptXTuOiEaqOupWBWHItODmbfgrVi00Ue
         PtSEWvGoGv8t6syolRuwcljV5TB4ydzRvvhV/e1UYRytw74GYbW1R7u/yIX+IBlzEJ43
         ZUx1naaSQ33EZCR6ZR2GmojWRIwjrasqLhX8dNlIkBCiMiMuZBjwzGgaQinpZm+GKDiH
         FOu/BaehMko8wFTffr+Lq6/YaWMDzPEOSSc7ooEA9ahJn1Krw7j6+kI81tps7XkJxc12
         GC6CJzbyP1+PF5OwzE10Aa9mCX1S6IhoUKImsUm7zLIID/9+vax8qdace5VehBatZoYF
         MfVA==
MIME-Version: 1.0
X-Received: by 10.180.88.40 with SMTP id bd8mr20868995wib.33.1358859759132;
 Tue, 22 Jan 2013 05:02:39 -0800 (PST)
Received: by 10.194.90.171 with HTTP; Tue, 22 Jan 2013 05:02:39 -0800 (PST)
In-Reply-To: <1358859100.2728.54.camel@linux.scoobydoo>
References: <1358780365.2728.14.camel@linux.scoobydoo>
	<007c01cdf7eb$1eba8d50$5c2fa7f0$@thetaphi.de>
	<1358782771.2728.28.camel@linux.scoobydoo>
	<CALfq-2QkLJaLtbaH7P1_XARJYQju_Nd6QUK1CdvGXXPTsjRPQA@mail.gmail.com>
	<1358784492.2728.35.camel@linux.scoobydoo>
	<8C30D9E4-B961-4A09-8FEA-343690A0BC56@gmail.com>
	<CALfq-2R+qNdb34t-BYQvJyWZBo=tT0sE_pNieCOuRO7oSANGnA@mail.gmail.com>
	<1358859100.2728.54.camel@linux.scoobydoo>
Date: Tue, 22 Jan 2013 15:02:39 +0200
Message-ID: <CALfq-2RODu2bTSm21oLY1mCPPYEXaoQHqCkmztgM+gFwE1BYNw@mail.gmail.com>
Subject: Re: FacetedSearch and MultiReader
From: Shai Erera <serera@gmail.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>, nbuso@ebi.ac.uk
Content-Type: multipart/alternative; boundary=f46d04428f123e1ffb04d3e031f6
X-Virus-Checked: Checked by ClamAV on apache.org

--f46d04428f123e1ffb04d3e031f6
Content-Type: text/plain; charset=ISO-8859-1

Yes, the release is wrapping up. I believe that an announcement message
will be sent in the coming days.

Shai


On Tue, Jan 22, 2013 at 2:51 PM, Nicola Buso <nbuso@ebi.ac.uk> wrote:

> I will try it.
>
> I see there is already a lucene-4.1.0 package (dated 2013/01/21)
> available for download, do you know if this version will be released
> soon?
>
>
> Nicola.
>
> On Tue, 2013-01-22 at 06:20 +0200, Shai Erera wrote:
> > Hi Nicola,
> >
> > What I had in mind is something similar to this, which is possible
> starting
> > with Lucene 4.1, due to changes done to facets (per-segment faceting):
> >
> > DirTaxoWriter master = new DirTaxoWriter(masterDir);
> > Directory[] origTaxoDirs = new Directory[numTaxoDirs]; // open
> Directories
> > and store in that array
> > OrdinalMap[] ordinalMaps = new OrdinalMap[numTaxoDirs]; // initialize
> > OrdinalMap and store in that array
> >
> > // now do the merge
> > for (int i = 0; i < origTaxoDirs.length; i++) {
> >   master.addTaxonomy(origTaxoDir[i], ordinalMaps[i]);
> > }
> >
> > // now open your readers, and create the important map
> > Map<AtomicReader,OrdinalMap) readerOrdinals = new
> > HashMap<AtomicReader,OrdinalMap>();
> > DirectoryReader[] readers = new DirectoryReader[origTaxoDirs.length];
> > for (int i = 0; i < origTaxoDirs.length; i++) {
> >   DirectoryReader r = DirectoryReader.open(contentDirectories[i]);
> >   OrdinalMap ordMap = ordinalMaps[i];
> >   for (AtomicReaderContext ctx : r.leaves()) {
> >     readerOrdinals.put(ctx.reader(), ordMap);
> >   }
> > }
> >
> > MultiReader mr = new MultiReader(readers);
> >
> > // create your FacetRequest (CountFacetRequest) with a custom Aggregator
> > FacetRequest fr = new CountFacetRequest(cp, topK) {
> >   @Override
> >   public Aggregator createAggregator(...) {
> >     return new OrdinalMappingAggregator() {
> >       int[] ordMap;
> >
> >       @Override
> >       public void setNextReader(AtomicReaderContext context) {
> >         ordMap = readerOrdinals.get(context.reader()).getMap();
> >       }
> >
> >       @Override
> >       public void aggregate(int docID, float score, IntsRef ordinals) {
> >         int upto = ordinals.offset + ordinals.length;
> >         for (int i = ordinals.offset; i < upto; i++) {
> >           int ordinal = ordinals[i]; // original ordinal read for the
> > AtomicReader given to setNextReader
> >           int mappedOrdinal = ordMap[ordinal]; // mapped ordinal,
> following
> > the taxonomy merge
> >           counts[mappedOrdinal]++; // count the mapped ordinal instead,
> so
> > all AtomicReaders count that ordinal
> >         }
> >       }
> >     };
> >   }
> > }
> >
> > While it may look like I wrote actual code to do it, I didn't :). So I
> > guess it should work, but I haven't tried it.
> > That way, you don't touch the content indexes at all, just the taxonomy
> > ones.
> >
> > Note however that you'll need to do this step every time the taxonomy
> index
> > is updated, and you refresh the TaxoReader instance.
> > Also, this will only work if all your indexes are opened in the same JVM
> > (which I assume that's the case, since you use MultiReader).
> >
> > If you still don't want to do that, then what Dennis wrote above is
> another
> > way to do distributed faceted search, either inside the same JVM or
> across
> > multiple JVMs.
> > You obtain the FacetResult from each search and merge the results
> > (unfortunately, there's still no tool in Lucene to do that for you).
> > Just make sure to ask for a larger K, to ensure that the correct top-K is
> > returned (see my previous notes).
> >
> > Shai
> >
> >
> >
> >
> > On Tue, Jan 22, 2013 at 4:32 AM, Denis Bazhenov <dotsid@gmail.com>
> wrote:
> >
> > > We have similar distribute search system and we have finished with the
> > > following scheme. Search replicas (machines where index resides) are
> build
> > > FacetResult's based on their index chunk (top N categories with
> document
> > > counts). Later on the results are merged "by hands" with summing
> relevant
> > > categories from different replicas.
> > >
> > > On Jan 22, 2013, at 3:08 AM, Nicola Buso <nbuso@ebi.ac.uk> wrote:
> > >
> > > > Hi Shai,
> > > >
> > > > I was thinking to that too, but I'm indexing all indexes in a custom
> > > > distributed environment than I can't in this moment have a single
> > > > categories index for all the content indexes at indexing time.
> > > > A solution should be to merge all the categories indexes in one only
> > > > index and use your solution but the merge code I see in the examples
> > > > merge also the content index and I can't do that.
> > > >
> > > > I should share the taxonomy if is possible to merge (I see the
> resulting
> > > > categories indexes are not that big currently), but I would prefer to
> > > > have a solution where I can collect the facets over multiple
> categories
> > > > indexes in this way I will be sure the solution will scale better.
> > > >
> > > >
> > > > Nicola.
> > > >
> > > >
> > > > On Mon, 2013-01-21 at 17:54 +0200, Shai Erera wrote:
> > > >> Hi Nicola,
> > > >>
> > > >>
> > > >> I think that what you're describing corresponds to distributed
> faceted
> > > >> search. I.e., you have N content indexes, alongside N taxonomy
> > > >> indexes.
> > > >>
> > > >> The information that's indexed in each of those sub-indexes does not
> > > >> correlate with the other ones.
> > > >> For example, say that you index the category "Movie/Drama", it may
> > > >> receive ordinal 12 in index1 and 23 in index2.
> > > >>
> > > >> If you'll try to count ordinals using MultiReader, you'll just mess
> up
> > > >> everything.
> > > >>
> > > >>
> > > >> If you can share a single taxonomy index for all N content indexes,
> > > >> then you'll be in a super-simple position:
> > > >>
> > > >> 1) Open one TaxonomyReader
> > > >>
> > > >> 2) Execute search with MultiReader and FacetsCollector
> > > >>
> > > >>
> > > >>
> > > >> It doesn't get simpler than that ! :)
> > > >>
> > > >>
> > > >> Before I go into great length describing what you should do if you
> > > >> cannot share the taxonomy, let me know if that's not an option for
> > > >> you.
> > > >>
> > > >> Shai
> > > >>
> > > >>
> > > >>
> > > >> On Mon, Jan 21, 2013 at 5:39 PM, Nicola Buso <nbuso@ebi.ac.uk>
> wrote:
> > > >>        Thanks for the reply Uwe,
> > > >>
> > > >>        we currently can search with MultiReader over all the indexes
> > > >>        we have.
> > > >>        Now I want to add the faceting search, than I created a
> > > >>        categories index
> > > >>        for every index I currently have.
> > > >>        To accumulate the faceted results now I have a MultiReader
> > > >>        pointing all
> > > >>        the indexes and I can create a TaxonomyReader for every
> > > >>        categories index
> > > >>        I have; all the way I see to obtain FacetResults are:
> > > >>        1 - FacetsCollector
> > > >>        2 - a FacetsAccumulator implementation
> > > >>
> > > >>        suppose I use the second option. I should:
> > > >>        - search as usual using the MultiReader
> > > >>        - than try to collect all the facetresults iterating over my
> > > >>        TaxonomyReaders; at every iteration:
> > > >>          - I create a FacetsAccumulator using the MultiReader and a
> > > >>        TaxonomyReader
> > > >>          - I get a list of FacetResult from the accumulator.
> > > >>        - as I finish I should in some way merge all the
> > > >>        List<FacetResult> I
> > > >>        have.
> > > >>
> > > >>        I think this solution is not correct because the docsids from
> > > >>        the search
> > > >>        are pointing the multireader instead the taxonomyreader is
> > > >>        pointing to
> > > >>        the categories index of a single reader.
> > > >>        I neither like to merge all the List of FacetResult I
> retrieve
> > > >>        from the
> > > >>        Accumulators.
> > > >>
> > > >>        Probably I'm missing something, can somebody clarify to me
> how
> > > >>        I should
> > > >>        collect the facets in this case?
> > > >>
> > > >>
> > > >>        Nicola.
> > > >>
> > > >>
> > > >>
> > > >>        On Mon, 2013-01-21 at 16:22 +0100, Uwe Schindler wrote:
> > > >>> Just use MultiReader, it extends IndexReader, so you can
> > > >>        pass it anywhere where IndexReader can be passed.
> > > >>>
> > > >>> -----
> > > >>> Uwe Schindler
> > > >>> H.-H.-Meier-Allee 63, D-28213 Bremen
> > > >>> http://www.thetaphi.de
> > > >>> eMail: uwe@thetaphi.de
> > > >>>
> > > >>>> -----Original Message-----
> > > >>>> From: Nicola Buso [mailto:nbuso@ebi.ac.uk]
> > > >>>> Sent: Monday, January 21, 2013 3:59 PM
> > > >>>> To: java-user@lucene.apache.org
> > > >>>> Subject: FacetedSearch and MultiReader
> > > >>>>
> > > >>>> Hi all,
> > > >>>>
> > > >>>> I'm trying to develop faceted search using lucene 4.0
> > > >>        faceting framework.
> > > >>>> In our project we are searching on multiple indexes using
> > > >>        lucene
> > > >>>> MultiReader. How should we use the faceted framework to
> > > >>        obtain
> > > >>>> FacetResults starting from a MultiReader? all the example
> > > >>        I see are using a
> > > >>>> "single" IndexReader.
> > > >>>>
> > > >>>>
> > > >>>>
> > > >>>> Nicola.
> > > >>>>
> > > >>>>
> > > >>>>
> > > >>
> > >  ---------------------------------------------------------------------
> > > >>>> To unsubscribe, e-mail:
> > > >>        java-user-unsubscribe@lucene.apache.org
> > > >>>> For additional commands, e-mail:
> > > >>        java-user-help@lucene.apache.org
> > > >>>
> > > >>
> > > >>
> > > >>
> > > >>
> > >  ---------------------------------------------------------------------
> > > >>        To unsubscribe, e-mail:
> > > >>        java-user-unsubscribe@lucene.apache.org
> > > >>        For additional commands, e-mail:
> > > >>        java-user-help@lucene.apache.org
> > > >>
> > > >>
> > > >>
> > > >>
> > > >
> > > >
> > > >
> > > > ---------------------------------------------------------------------
> > > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > > >
> > >
> > > ---
> > > Denis Bazhenov <dotsid@gmail.com>
> > >
> > >
> > >
> > >
> > >
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--f46d04428f123e1ffb04d3e031f6--

From java-user-return-54787-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Jan 22 13:20:59 2013
Return-Path: <java-user-return-54787-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id F07AFEBFA
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 22 Jan 2013 13:20:58 +0000 (UTC)
Received: (qmail 99093 invoked by uid 500); 22 Jan 2013 13:20:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98757 invoked by uid 500); 22 Jan 2013 13:20:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98728 invoked by uid 99); 22 Jan 2013 13:20:54 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Jan 2013 13:20:54 +0000
X-ASF-Spam-Status: No, hits=1.7 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of zhoucheng2008@gmail.com designates 209.85.220.174 as permitted sender)
Received: from [209.85.220.174] (HELO mail-vc0-f174.google.com) (209.85.220.174)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Jan 2013 13:20:47 +0000
Received: by mail-vc0-f174.google.com with SMTP id n11so4694495vch.33
        for <java-user@lucene.apache.org>; Tue, 22 Jan 2013 05:20:26 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:x-received:date:message-id:subject:from:to
         :content-type;
        bh=rkBS6/NjTwJl+PTY738ehSG7+hhQrZMMPWjG2brDBD8=;
        b=BG+ar4LDT/bObmyXf4xa42FcVUfsMz5/dADyGRnyEIZqYO3o2Jer0BuTfx/r1XKYPx
         Om/EK799SSlb2yV+CqCCeDshhsjNTw+DeU9gJar/LWkB/uzC/zjudhizUxSeJDf5LseF
         +1QaGZxbmthiJbfF/BNDQ2yb7BHUGhmCVI74pY1jXIv5s2cfClKoa++vQaGtoMwb6VdY
         imNkr+4bAVVpoC9RC/gUMmhrmnmRcdAvt0Xpv5OwcjZnulhDvGkD2m7O17RRsP6qrBgV
         8lI+JOrYP+GSCu3XpU97a+Yf4dACgKK9MXnFNJT6lpTZitzMx387QxaWElhW2E4hZf/G
         fL/Q==
MIME-Version: 1.0
X-Received: by 10.52.95.203 with SMTP id dm11mr20325802vdb.112.1358860826225;
 Tue, 22 Jan 2013 05:20:26 -0800 (PST)
Received: by 10.58.76.8 with HTTP; Tue, 22 Jan 2013 05:20:25 -0800 (PST)
Date: Tue, 22 Jan 2013 21:20:25 +0800
Message-ID: <CA+huq0BREzsjFotc4APRo9a2gApYuX4G-2PaTuEJEQOwNY5ibg@mail.gmail.com>
Subject: IndexReader.open and CorruptIndexException
From: Cheng <zhoucheng2008@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=bcaec50162a1d8aadd04d3e07048
X-Virus-Checked: Checked by ClamAV on apache.org

--bcaec50162a1d8aadd04d3e07048
Content-Type: text/plain; charset=ISO-8859-1

Hi,

I run a Lucene application on Tomcat. The app will try to open a Linux
directory, and sometime returns CorruptIndexException error.

Shortly after I restart Tomcat (nothing else changes), the app can be run
on the fly. I am using the following statements to open a directory:


    try {
      searcher = new IndexSearcher(IndexReader.open(new NIOFSDirectory(new
File("/home/user/"+ type))));
    } catch (IOException e) {
      throw new Exception("[" + type + "] Cannot open index folder...");
    }

I would like to know how to tackle this problem.

Many thanks!

--bcaec50162a1d8aadd04d3e07048--

From java-user-return-54788-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Jan 22 13:57:27 2013
Return-Path: <java-user-return-54788-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id BAB73EA41
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 22 Jan 2013 13:57:27 +0000 (UTC)
Received: (qmail 88515 invoked by uid 500); 22 Jan 2013 13:57:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88475 invoked by uid 500); 22 Jan 2013 13:57:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88437 invoked by uid 99); 22 Jan 2013 13:57:24 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Jan 2013 13:57:24 +0000
X-ASF-Spam-Status: No, hits=-0.2 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_REPLYTO_END_DIGIT,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of paul_t100@fastmail.fm designates 66.111.4.29 as permitted sender)
Received: from [66.111.4.29] (HELO out5-smtp.messagingengine.com) (66.111.4.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Jan 2013 13:57:17 +0000
Received: from compute5.internal (compute5.nyi.mail.srv.osa [10.202.2.45])
	by gateway1.nyi.mail.srv.osa (Postfix) with ESMTP id 1615721BBF
	for <java-user@lucene.apache.org>; Tue, 22 Jan 2013 08:56:55 -0500 (EST)
Received: from frontend2.nyi.mail.srv.osa ([10.202.2.161])
  by compute5.internal (MEProxy); Tue, 22 Jan 2013 08:56:55 -0500
DKIM-Signature: v=1; a=rsa-sha1; c=relaxed/relaxed; d=fastmail.fm; h=
	message-id:date:from:reply-to:mime-version:to:subject
	:content-type:content-transfer-encoding; s=mesmtp; bh=OqNuw4z3fc
	B51HayrxvTZvq8KLE=; b=G2MN3SGH5tgwlWwloSwG2YgE4zthdenfC+SczmZYY3
	y1gaMblg0P4Fzw6vlrCNP6zfY0WgTD1h29L7WmzvKdF2jawPa1BnsK3x3uDu5ATy
	OORgkuiS4RvNPpriafVa61ycD1E8XNKT1GEJB7Vr6PEow/62J1OsOCJpdgOOzbGy
	8=
DKIM-Signature: v=1; a=rsa-sha1; c=relaxed/relaxed; d=
	messagingengine.com; h=message-id:date:from:reply-to
	:mime-version:to:subject:content-type:content-transfer-encoding;
	 s=smtpout; bh=OqNuw4z3fcB51HayrxvTZvq8KLE=; b=s33dsR92KNgTa4KLc
	EXYEqeFlt+udgpak4V9WH4ZgnuHlVnlgtSItTEAnWdk2yhaSK5w1SXQ4kgLaQs4P
	FtBw9jJVQT643vlkfvZxXkmLCiAthjjipU0uO6YIJJeJfvtgy9M6ObKnKNfnpz0b
	8uBoMDuhMyR6Ek4K+kC0+Fo79c=
X-Sasl-enc: /hyJNNfo6rRXCJk7O7IquUJzalD8yqbA+6Fkqb5bWy7i 1358863014
Received: from [192.168.1.66] (unknown [217.155.98.246])
	by mail.messagingengine.com (Postfix) with ESMTPA id 384B148263F
	for <java-user@lucene.apache.org>; Tue, 22 Jan 2013 08:56:54 -0500 (EST)
Message-ID: <50FE9AA5.3060605@fastmail.fm>
Date: Tue, 22 Jan 2013 13:56:53 +0000
From: Paul Taylor <paul_t100@fastmail.fm>
Reply-To: paul_t100@fastmail.fm
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.8; rv:17.0) Gecko/20130107 Thunderbird/17.0.2
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Is there a problem with my Analyzer subclass ?
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

I've been investigating potential memory leaks in my Lucene based 
application thats runs on jetty. I did a memory dump with jmap and one 
thing I've noticed is that for any subclass of analyzer that I have 
created that there are alot instances of the $SavedStream inner class.

So for example I can have just fives instances of TitleAnalyzer 
analyser, but 417 instances of TitleAnalyzer$SavedStreams. These 
$SavedStreams are taking alot of memory, and my profiler (Yourkit) 
labels them all but two (415 instances) as strongly reachable, i.e has 
strong references so i dont think they can be garbage collected, 
therefore suggesting a memory leak.

But i cant see it ?



     package org.musicbrainz.search.analysis;

     import com.ibm.icu.text.Transliterator;
     import org.apache.lucene.analysis.*;
     import org.musicbrainz.search.LuceneVersion;

     import java.io.IOException;
     import java.io.Reader;
     import java.util.regex.Pattern;

     /**
      * Should be used for for analysing titles such as track 
title,release title or recording title
      * because contains special processing for titles that isn't 
required for other text fields such as artist name.
      *
      * Filters MusicbrainzTokenizer with MusicbrainzTokenizerFilter, 
ICUTransformFilter, AccentFilter, LowerCaseFilter
      * and no stop words.
      */
     public class TitleAnalyzer extends Analyzer {

         private NormalizeCharMap charConvertMap;

         //We convert to the wrong form No.1 rather than the correct 
form No. 1 because this keeps it as single token
         //when tokenized so doesn't incorrectly match additional single 
numbers in the text.
         private Pattern no1Pattern = Pattern.compile("(no\\.) (\\d+)", 
Pattern.CASE_INSENSITIVE);
         private String no1PatternReplacement = "$1$2";

         private void setCharConvertMap() {
             charConvertMap = new NormalizeCharMap();
             AmpersandToAndMappingHelper.addToMap(charConvertMap);
             CharEquivToCharHelper.addToMap(charConvertMap);
             HebrewCharMappingHelper.addToMap(charConvertMap);
         }

         public TitleAnalyzer() {
             setCharConvertMap();
         }

         public final TokenStream tokenStream(String fieldName, Reader 
reader) {
             CharFilter mappingCharFilter = new 
MappingCharFilter(charConvertMap, reader);
             CharFilter no1CharFilter = new 
PatternReplaceCharFilter(no1Pattern, no1PatternReplacement, 
mappingCharFilter);
             MusicbrainzTokenizer tokenStream = new 
MusicbrainzTokenizer(LuceneVersion.LUCENE_VERSION, no1CharFilter);
             TokenStream result = new ICUTransformFilter(tokenStream, 
Transliterator.getInstance("[?[:Script=Katakana:]]Katakana-Hiragana"));
             result = new ICUTransformFilter(result, 
Transliterator.getInstance("Traditional-Simplified"));
             result = new MusicbrainzTokenizerFilter(result);
             result = new AccentFilter(result);
             result = new LowercaseFilter(result);
             result = new MusicbrainzWordDelimiterFilter(result,
WordDelimiterIterator.DEFAULT_WORD_DELIM_TABLE,
                                               1,
                                               0,
                                               0,
                                               6,
                                               0,
                                               0,
                                               0,
                                               0,
                                               0,
                                              null);
             return result;
         }

         private static final class SavedStreams {
             MusicbrainzTokenizer tokenStream;
             TokenStream filteredTokenStream;
         }

         public final TokenStream reusableTokenStream(String fieldName, 
Reader reader) throws IOException {
             SavedStreams streams = (SavedStreams) getPreviousTokenStream();
             if (streams == null) {
                 streams = new SavedStreams();
                 setPreviousTokenStream(streams);
                 streams.tokenStream = new 
MusicbrainzTokenizer(LuceneVersion.LUCENE_VERSION, new 
PatternReplaceCharFilter(no1Pattern, no1PatternReplacement, new 
MappingCharFilter(charConvertMap, reader)));
                 streams.filteredTokenStream = new 
ICUTransformFilter(streams.tokenStream, 
Transliterator.getInstance("[?[:Script=Katakana:]]Katakana-Hiragana"));
                 streams.filteredTokenStream = new 
ICUTransformFilter(streams.filteredTokenStream, 
Transliterator.getInstance("Traditional-Simplified"));
                 streams.filteredTokenStream = new 
MusicbrainzTokenizerFilter(streams.filteredTokenStream);
                 streams.filteredTokenStream = new 
AccentFilter(streams.filteredTokenStream);
                 streams.filteredTokenStream = new 
LowercaseFilter(streams.filteredTokenStream);
                 streams.filteredTokenStream = new 
MusicbrainzWordDelimiterFilter(streams.filteredTokenStream,
WordDelimiterIterator.DEFAULT_WORD_DELIM_TABLE,
                                               1,
                                               0,
                                               0,
                                               6,
                                               0,
                                               0,
                                               0,
                                               0,
                                               0,
                                              null);
             } else {
                 streams.tokenStream.reset(new 
PatternReplaceCharFilter(no1Pattern, no1PatternReplacement, new 
MappingCharFilter(charConvertMap, reader)));
             }
             return streams.filteredTokenStream;
         }
     }

Some of the referrences back:

+---org.musicbrainz.search.analysis.TitleAnalyzer$SavedStreams |         
58,672  |            32  |
     |  | | |                 |                |
     |  | +---value of java.util.WeakHashMap$Entry |            144  
|            72  |
     |  | | |                 |                |
     |  |   +---[251] of java.util.WeakHashMap$Entry[256] |        
247,888  |         2,072  |
     |  | | |                 |                |
     |  |     +---table of java.util.WeakHashMap |        248,048  
|            80  |
     |  | | |                 |                |
     |  |       +---hardRefs of 
org.apache.lucene.util.CloseableThreadLocal |        248,112  
|            40  |
     |  | | |                 |                |
     |  |         +---tokenStreams of 
org.musicbrainz.search.analysis.TitleWithPosGapAnalyzer |        
248,160  |            48  |
     |  | | |                 |                |
     |  |           +---analyzer of 
org.musicbrainz.search.index.RecordingIndexField |             64  
|            64  |
     |  | | |                 |                |
     |  |             +---RELEASE of 
org.musicbrainz.search.index.RecordingIndexField |          4,720  
|            64  |
     |  | | |                 |                |
     |  |               +---[1756] of java.lang.Object[2560] |      
8,089,136  |        20,504  |
     |  | | |                 |                |
     |  |                 +---elementData of java.util.Vector |      
8,089,176  |            40  |
     |  | | |                 |                |
     |  |                   +---classes of 
org.eclipse.jetty.webapp.WebAppClassLoader |      8,256,880  |           
184  |
     |  | | |                 |                |
     |  |                     +---contextClassLoader of 
java.util.TimerThread [Thread]  "HashSessionScavenger-1" |            
568  |           176  |
     | | |                 |                |
     | +---org.musicbrainz.search.analysis.TitleAnalyzer$SavedStreams 
|         79,192  |            32  |
     |  | | |                 |                |
     |  | +---value of java.util.WeakHashMap$Entry |             72  
|            72  |
     |  | | |                 |                |
     |  |   +---[243] of java.util.WeakHashMap$Entry[256] |        
247,888  |         2,072  |
     |  | | |                 |                |
     |  |     +---table of java.util.WeakHashMap |        248,048  
|            80  |
     |  | | |                 |                |
     |  |       +---hardRefs of 
org.apache.lucene.util.CloseableThreadLocal |        248,112  
|            40  |
     |  | | |                 |                |
     |  |         +---tokenStreams of 
org.musicbrainz.search.analysis.TitleWithPosGapAnalyzer |        
248,160  |            48  |
     |  | | |                 |                |
     |  |           +---analyzer of 
org.musicbrainz.search.index.RecordingIndexField |             64  
|            64  |
     |  | | |                 |                |
     |  |             +---RELEASE of 
org.musicbrainz.search.index.RecordingIndexField |          4,720  
|            64  |
     |  | | |                 |                |
     |  |               +---[1756] of java.lang.Object[2560] |      
8,089,136  |        20,504  |
     |  | | |                 |                |
     |  |                 +---elementData of java.util.Vector |      
8,089,176  |            40  |
     |  | | |                 |                |
     |  |                   +---classes of 
org.eclipse.jetty.webapp.WebAppClassLoader |      8,256,880  |           
184  |
     |  | | |                 |                |
     |  |                     +---contextClassLoader of 
java.util.TimerThread [Thread]  "HashSessionScavenger-1" |            
568  |           176  |
     | | |                 |                |
     | +---org.musicbrainz.search.analysis.TitleAnalyzer$SavedStreams 
|         79,176  |            32  |
     |  | | |                 |                |
     |  | +---value of java.util.WeakHashMap$Entry |             72  
|            72  |
     |  | | |                 |                |
     |  |   +---[240] of java.util.WeakHashMap$Entry[256] |        
247,888  |         2,072  |
     |  | | |                 |                |
     |  |     +---table of java.util.WeakHashMap |        248,048  
|            80  |
     |  | | |                 |                |
     |  |       +---hardRefs of 
org.apache.lucene.util.CloseableThreadLocal |        248,112  
|            40  |
     |  | | |                 |                |
     |  |         +---tokenStreams of 
org.musicbrainz.search.analysis.TitleWithPosGapAnalyzer |        
248,160  |            48  |
     |  | | |                 |                |
     |  |           +---analyzer of 
org.musicbrainz.search.index.RecordingIndexField |             64  
|            64  |
     |  | | |                 |                |
     |  |             +---RELEASE of 
org.musicbrainz.search.index.RecordingIndexField |          4,720  
|            64  |
     |  | | |                 |                |
     |  |               +---[1756] of java.lang.Object[2560] |      
8,089,136  |        20,504  |
     |  | | |                 |                |
     |  |                 +---elementData of java.util.Vector |      
8,089,176  |            40  |
     |  | | |                 |                |
     |  |                   +---classes of 
org.eclipse.jetty.webapp.WebAppClassLoader |      8,256,880  |           
184  |
     |  | | |                 |                |
     |  |                     +---contextClassLoader of 
java.util.TimerThread [Thread]  "HashSessionScavenger-1" |            
568  |           176  |
     | | |                 |                |
     | +---org.musicbrainz.search.analysis.TitleAnalyzer$SavedStreams 
|         79,176  |            32  |
     |  | | |                 |                |
     |  | +---value of java.util.WeakHashMap$Entry |             72  
|            72  |
     |  | | |                 |                |
     |  |   +---[239] of java.util.WeakHashMap$Entry[256] |        
247,888  |         2,072  |
     |  | | |                 |                |
     |  |     +---table of java.util.WeakHashMap |        248,048  
|            80  |
     |  | | |                 |                |
     |  |       +---hardRefs of 
org.apache.lucene.util.CloseableThreadLocal |        248,112  
|            40  |
     |  | | |                 |                |
     |  |         +---tokenStreams of 
org.musicbrainz.search.analysis.TitleWithPosGapAnalyzer |        
248,160  |            48  |
     |  | | |                 |                |
     |  |           +---analyzer of 
org.musicbrainz.search.index.RecordingIndexField |             64  
|            64  |
     |  | | |                 |                |
     |  |             +---RELEASE of 
org.musicbrainz.search.index.RecordingIndexField |          4,720  
|            64  |
     |  | | |                 |                |
     |  |               +---[1756] of java.lang.Object[2560] |      
8,089,136  |        20,504  |
     |  | | |                 |                |
     |  |                 +---elementData of java.util.Vector |      
8,089,176  |            40  |
     |  | | |                 |                |
     |  |                   +---classes of 
org.eclipse.jetty.webapp.WebAppClassLoader |      8,256,880  |           
184  |
     |  | | |                 |                |
     |  |                     +---contextClassLoader of 
java.util.TimerThread [Thread]  "HashS

essionScavenger-1"      |            568  |           176  |

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54789-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Jan 22 14:53:10 2013
Return-Path: <java-user-return-54789-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 5409DE86E
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 22 Jan 2013 14:53:10 +0000 (UTC)
Received: (qmail 56518 invoked by uid 500); 22 Jan 2013 14:53:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56464 invoked by uid 500); 22 Jan 2013 14:53:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56451 invoked by uid 99); 22 Jan 2013 14:53:07 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Jan 2013 14:53:07 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.220.52] (HELO mail-pa0-f52.google.com) (209.85.220.52)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Jan 2013 14:53:01 +0000
Received: by mail-pa0-f52.google.com with SMTP id fb1so4084323pad.11
        for <java-user@lucene.apache.org>; Tue, 22 Jan 2013 06:52:39 -0800 (PST)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=x-received:mime-version:in-reply-to:references:from:date:message-id
         :subject:to:content-type:x-gm-message-state;
        bh=Zcl4xHYW7/mWsiiF1s+Dh0gbeu67qNAI26EJLdgg9zw=;
        b=Rw2e1uTIUfEdjNxHgt5iEHj/kVq58O8iMZwIn4YPzxDonVlVl8xySlUU7c02RlpBnL
         S8kd+dPd/1H3V/J27UuL5NmPp3yBAPuMpz30GF6zyh1xceu/fvfAgI6h48Lr76rABsxa
         d6Kex0RWurNMN0LJjeaFyXbin6zigpHsQIwFCrUuGh0V+KASWHqdAqockzLbiIB0EF/p
         vH/+EOxpUN+Vqor4xikj/RYxpO9DBzVRCVCalVLcl328cujFp7j607MVsZthr/I9IxCQ
         WoX3xhxNUmk4dSHhUm7gvlfM9/sFR2PsFBnIvDVPVzhHf0OhJy9lP/bf8lNPtIuCz61A
         Fuyg==
X-Received: by 10.66.85.74 with SMTP id f10mr56836536paz.38.1358866359321;
 Tue, 22 Jan 2013 06:52:39 -0800 (PST)
MIME-Version: 1.0
Received: by 10.68.154.73 with HTTP; Tue, 22 Jan 2013 06:52:19 -0800 (PST)
In-Reply-To: <CA+huq0BREzsjFotc4APRo9a2gApYuX4G-2PaTuEJEQOwNY5ibg@mail.gmail.com>
References: <CA+huq0BREzsjFotc4APRo9a2gApYuX4G-2PaTuEJEQOwNY5ibg@mail.gmail.com>
From: Michael McCandless <lucene@mikemccandless.com>
Date: Tue, 22 Jan 2013 09:52:19 -0500
Message-ID: <CAL8PwkYddktWPpYpLtb2eRVO9+-AV_+23jfsG5X-RAuwSCv+gw@mail.gmail.com>
Subject: Re: IndexReader.open and CorruptIndexException
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Gm-Message-State: ALoCoQmQiHrq77UQEDAxnm7RPLtzkYIC6EXE/Cc648rVqxC3zfXxR2CGsnf24HUS2Ieflaak5hPo
X-Virus-Checked: Checked by ClamAV on apache.org

Can you post the full stack trace of the CorruptIndexException?

Mike McCandless

http://blog.mikemccandless.com

On Tue, Jan 22, 2013 at 8:20 AM, Cheng <zhoucheng2008@gmail.com> wrote:
> Hi,
>
> I run a Lucene application on Tomcat. The app will try to open a Linux
> directory, and sometime returns CorruptIndexException error.
>
> Shortly after I restart Tomcat (nothing else changes), the app can be run
> on the fly. I am using the following statements to open a directory:
>
>
>     try {
>       searcher = new IndexSearcher(IndexReader.open(new NIOFSDirectory(new
> File("/home/user/"+ type))));
>     } catch (IOException e) {
>       throw new Exception("[" + type + "] Cannot open index folder...");
>     }
>
> I would like to know how to tackle this problem.
>
> Many thanks!

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54790-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Jan 22 14:58:15 2013
Return-Path: <java-user-return-54790-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id C16F8E8A1
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 22 Jan 2013 14:58:15 +0000 (UTC)
Received: (qmail 79920 invoked by uid 500); 22 Jan 2013 14:58:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79702 invoked by uid 500); 22 Jan 2013 14:58:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79662 invoked by uid 99); 22 Jan 2013 14:58:12 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Jan 2013 14:58:12 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.210.53] (HELO mail-da0-f53.google.com) (209.85.210.53)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Jan 2013 14:58:05 +0000
Received: by mail-da0-f53.google.com with SMTP id x6so3263800dac.12
        for <java-user@lucene.apache.org>; Tue, 22 Jan 2013 06:57:44 -0800 (PST)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=x-received:mime-version:in-reply-to:references:from:date:message-id
         :subject:to:content-type:x-gm-message-state;
        bh=IqLx/8zqfZIixe31+CoJrbEr0koDdYL8AjUrioFFxuQ=;
        b=h5JXd2ZrWIkQzAIw/JHqIT468AOb5SFRt8r+z4CVvA+1PCkK6SGanLVy1rVE9/9Any
         cY1dASu4gCUmY2RYKGbHVTU3pdAly/nD1IGyD8Jc9ZMLhxhZX5tZkrh+ZuU0euFrmDj2
         bUsQkHr44y1ojPVnyyMMtkHf2ra1DVRobOA0kStiCzQ7JuzUOq9Kfr4BclclbKmQBbLp
         pXFPsQA1J+M0lyqD86hNpKQ2w1FlsnfSLrZDNxulSjAdR2pSIeTib/rClJq8E4tlJVXl
         66APaPZr7n6DYle0EdOAwaSobRxXJsbetmuJXBYNsWDj6ZKKxIFF/m5tEoS5e0D6mBdp
         /FGA==
X-Received: by 10.68.238.136 with SMTP id vk8mr40028910pbc.86.1358866664332;
 Tue, 22 Jan 2013 06:57:44 -0800 (PST)
MIME-Version: 1.0
Received: by 10.68.154.73 with HTTP; Tue, 22 Jan 2013 06:57:24 -0800 (PST)
In-Reply-To: <CALfq-2R+qNdb34t-BYQvJyWZBo=tT0sE_pNieCOuRO7oSANGnA@mail.gmail.com>
References: <1358780365.2728.14.camel@linux.scoobydoo> <007c01cdf7eb$1eba8d50$5c2fa7f0$@thetaphi.de>
 <1358782771.2728.28.camel@linux.scoobydoo> <CALfq-2QkLJaLtbaH7P1_XARJYQju_Nd6QUK1CdvGXXPTsjRPQA@mail.gmail.com>
 <1358784492.2728.35.camel@linux.scoobydoo> <8C30D9E4-B961-4A09-8FEA-343690A0BC56@gmail.com>
 <CALfq-2R+qNdb34t-BYQvJyWZBo=tT0sE_pNieCOuRO7oSANGnA@mail.gmail.com>
From: Michael McCandless <lucene@mikemccandless.com>
Date: Tue, 22 Jan 2013 09:57:24 -0500
Message-ID: <CAL8PwkbLqaadSqhJXHbCkGcwdZGy7cxgpohVfJkmCqpdHkm5Rg@mail.gmail.com>
Subject: Re: FacetedSearch and MultiReader
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Gm-Message-State: ALoCoQnJAFcnKtgEFzhVXf9TYn6pkJmXHIUJwhqPsNFtc/C5V0MyO3Nr+63oFeeHavr1lfc8DzTZ
X-Virus-Checked: Checked by ClamAV on apache.org

On Mon, Jan 21, 2013 at 11:20 PM, Shai Erera <serera@gmail.com> wrote:

> (unfortunately, there's still no tool in Lucene to do that for you).

I think we should open an issue to provide support for distributed faceting?

For example, we already provide support for distributed searching
(TopDocs.merge), and distributed grouping (TopGroups.merge) ... seems
like we should do the same for distributed faceting (even though its
somewhat tricky)?

Mike McCandless

http://blog.mikemccandless.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54791-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Jan 22 16:22:28 2013
Return-Path: <java-user-return-54791-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id B58EFE86F
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 22 Jan 2013 16:22:28 +0000 (UTC)
Received: (qmail 2485 invoked by uid 500); 22 Jan 2013 16:22:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1773 invoked by uid 500); 22 Jan 2013 16:22:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 532 invoked by uid 99); 22 Jan 2013 16:22:21 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Jan 2013 16:22:21 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of sarowe@gmail.com designates 209.85.212.52 as permitted sender)
Received: from [209.85.212.52] (HELO mail-vb0-f52.google.com) (209.85.212.52)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Jan 2013 16:22:14 +0000
Received: by mail-vb0-f52.google.com with SMTP id fa15so3876301vbb.11
        for <multiple recipients>; Tue, 22 Jan 2013 08:21:53 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=x-received:sender:from:content-type:content-transfer-encoding
         :subject:message-id:date:to:mime-version:x-mailer;
        bh=GXjNy2iuluOKgnFrvAYQ4jG+jTRUWIKwZ/jUOeLatLU=;
        b=rYsgHL4n1AbzRCdnr9sbZeomQMO8n9VrngNw6jzEu9ZKc92AD2G3LZ/Ur6xIsl6msA
         yFmtbPxGht6+lIGP6VZCuwhTc9X7tQO1ePO6W9kFVmeLjfCflsn8CP2TKlk1NYpEkWag
         rHIYV824uRZmBfaxKUxLQ1aS7G78C6JDb5KCcyl8Zp/lRz5i1na6Ja/E7DNWzG/gTFz9
         r6k8oQaN0WQjyZGKx0d+8q/NXmtYNkSBgZxngQf7hPtNjfeH+dnmkypbjhxVQ8gUK4kw
         IHvaZrYXm0VtcCGy/arrBjnHZsjprVfbWYnA7CMJMq1zFf6dm6KUtux4g3qfeF7GR07N
         Gtog==
X-Received: by 10.52.29.109 with SMTP id j13mr16970363vdh.111.1358871713212;
        Tue, 22 Jan 2013 08:21:53 -0800 (PST)
Received: from [192.168.1.204] (cpe-67-249-104-72.twcny.res.rr.com. [67.249.104.72])
        by mx.google.com with ESMTPS id x17sm9779734vdi.1.2013.01.22.08.21.51
        (version=TLSv1 cipher=ECDHE-RSA-RC4-SHA bits=128/128);
        Tue, 22 Jan 2013 08:21:52 -0800 (PST)
Sender: Steve Rowe <sarowe@gmail.com>
From: Steve Rowe <sarowe@apache.org>
Content-Type: text/plain; charset=windows-1252
Content-Transfer-Encoding: quoted-printable
Subject: [ANNOUNCE] Apache Lucene 4.1 released
Message-Id: <CE4D7C46-D0EE-4BCF-8C47-12B62DED85AA@apache.org>
Date: Tue, 22 Jan 2013 11:21:50 -0500
To: "dev@lucene.apache.org" <dev@lucene.apache.org>,
 "java-user@lucene.apache.org" <java-user@lucene.apache.org>,
 "general@lucene.apache.org" <general@lucene.apache.org>,
 announce@apache.org
Mime-Version: 1.0 (Mac OS X Mail 6.2 \(1499\))
X-Mailer: Apple Mail (2.1499)
X-Virus-Checked: Checked by ClamAV on apache.org

January 2013, Apache Lucene=99 4.1 available

The Lucene PMC is pleased to announce the release of Apache Lucene 4.1.

Apache Lucene is a high-performance, full-featured text search engine
library written entirely in Java. It is a technology suitable for nearly
any application that requires full-text search, especially =
cross-platform.

This release contains numerous bug fixes, optimizations, and
improvements, some of which are highlighted below. The release
is available for immediate download at:
   http://lucene.apache.org/core/mirrors-core-latest-redir.html

See the CHANGES.txt file included with the release for a full list of
details.

Lucene 4.1 Release Highlights:

 * Lucene 4.1 has a new default codec (Lucene41Codec) based on the
   previously-experimental "Block" indexing format for improved
   performance, but also incorporating the functionality of "Appending"
   and "Pulsing".

 * The default codec incorporates the optimization of Pulsing: terms
   that appear in only one document (such as primary key/id fields) just
   store the document id in the term dictionary instead of a pointer to
   this document id in a separate file.

 * The default codec incorporates an efficient compressed stored fields
   implementation that compresses chunks of documents together with LZ4.
   (see
   =
http://blog.jpountz.net/post/33247161884/efficient-compressed-stored-field=
s-with-lucene)

 * Lucene no longer seeks when writing files (all fields are written in
   an append-only way). This means it works by default with append-only
   streams, hdfs, etc.

 * New suggest implementations: AnalyzingSuggester, where the underlying
   form (computed from a lucene Analyzer) used for suggestions is
   separate from the returned text (see
   =
http://blog.mikemccandless.com/2012/09/lucenes-new-analyzing-suggester.htm=
l),
   and FuzzySuggester, which additionally allows for inexact matching on
   the input.

 * Near-realtime support was added to the facet module.
  (see http://shaierera.blogspot.com/2012/11/lucene-facets-part-1.html)

 * New Highlighter (postingshighlighter) added to the highlighter
   module.  (see
   =
http://blog.mikemccandless.com/2012/12/a-new-lucene-highlighter-is-born.ht=
ml)

 * Added FilterStrategy to FilteredQuery for more flexibility in
   filtered query execution.

 * Added CommonTermsQuery to speed up queries with very highly frequent
   terms.  Term frequencies are efficiently detected at query time - no
   index time preparation required.

 * Several bugfixes and optimizations since the 4.0 release.

Please read CHANGES.txt for a full list of new features.

Please report any feedback to the mailing lists
(http://lucene.apache.org/core/discussion.html)

Note: The Apache Software Foundation uses an extensive mirroring network
for distributing releases.  It is possible that the mirror you are using
may not have replicated the release yet.  If that is the case, please
try another mirror.  This also goes for Maven access.

Happy searching,
Lucene/Solr developers=

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54792-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Jan 22 20:26:01 2013
Return-Path: <java-user-return-54792-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id C6DE1EE5F
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 22 Jan 2013 20:26:01 +0000 (UTC)
Received: (qmail 4196 invoked by uid 500); 22 Jan 2013 20:25:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4030 invoked by uid 500); 22 Jan 2013 20:25:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4019 invoked by uid 99); 22 Jan 2013 20:25:59 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Jan 2013 20:25:59 +0000
X-ASF-Spam-Status: No, hits=-0.2 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_REPLYTO_END_DIGIT,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of paul_t100@fastmail.fm designates 66.111.4.29 as permitted sender)
Received: from [66.111.4.29] (HELO out5-smtp.messagingengine.com) (66.111.4.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Jan 2013 20:25:52 +0000
Received: from compute6.internal (compute6.nyi.mail.srv.osa [10.202.2.46])
	by gateway1.nyi.mail.srv.osa (Postfix) with ESMTP id 40F5820B3B
	for <java-user@lucene.apache.org>; Tue, 22 Jan 2013 15:25:31 -0500 (EST)
Received: from frontend1.nyi.mail.srv.osa ([10.202.2.160])
  by compute6.internal (MEProxy); Tue, 22 Jan 2013 15:25:31 -0500
DKIM-Signature: v=1; a=rsa-sha1; c=relaxed/relaxed; d=fastmail.fm; h=
	message-id:date:from:reply-to:mime-version:to:subject:references
	:in-reply-to:content-type:content-transfer-encoding; s=mesmtp;
	 bh=ZmeF0gR+n7OeaOv1dUT6+LfzRd4=; b=gHaoxDbWTd92hV5RIOgx5MhUj9CX
	mSStGM7jkiCylCKKTuH3aw4UkST30D2LIaYRXDDIQXDLAE0fkRL1ySGFGohqIvRJ
	ep3CngDgjG1mMqaQNS0VLM4A11vXumQ24aSCzd16uGGQmy12x2rekuK4jGqI9xWg
	tIv2lruWOtsKpGg=
DKIM-Signature: v=1; a=rsa-sha1; c=relaxed/relaxed; d=
	messagingengine.com; h=message-id:date:from:reply-to
	:mime-version:to:subject:references:in-reply-to:content-type
	:content-transfer-encoding; s=smtpout; bh=ZmeF0gR+n7OeaOv1dUT6+L
	fzRd4=; b=t5JoXVo/x603/dERR8gMWKgWkwjOVUPHfoBbm6hr4cEkSqShYAin16
	oe45y0uZUmke3bLy3MISjMAGHaHiHQiBxRAoUOpq9Y1pSXwAiH7I5Uj/13oovsAb
	kA49TDciZ7paHXdVKF5E0EOuo5PuqllmsNws8hKWSFZ/jZ96I84KE=
X-Sasl-enc: OX7ya/61jLRfnlU4aK3tp+lFB7lI+0nuwxSVAOZbG5TK 1358886330
Received: from [192.168.1.66] (unknown [217.155.98.246])
	by mail.messagingengine.com (Postfix) with ESMTPA id C6F618E0859
	for <java-user@lucene.apache.org>; Tue, 22 Jan 2013 15:25:30 -0500 (EST)
Message-ID: <50FEF5B9.2030402@fastmail.fm>
Date: Tue, 22 Jan 2013 20:25:29 +0000
From: Paul Taylor <paul_t100@fastmail.fm>
Reply-To: paul_t100@fastmail.fm
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.8; rv:17.0) Gecko/20130107 Thunderbird/17.0.2
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Is there a problem with my Analyzer subclass ?
References: <50FE9AA5.3060605@fastmail.fm>
In-Reply-To: <50FE9AA5.3060605@fastmail.fm>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

I've found a simpler subclass, that illustrates the same problem

package org.musicbrainz.search.analysis;

import org.apache.lucene.analysis.*;

import java.io.IOException;
import java.io.Reader;

/**
  * For analyzing catalogno so can compare values containing spaces with 
values that do not
  * Removes any spaces and lowercases the remaining text
  */
public class StripSpacesAnalyzer extends Analyzer {

     protected NormalizeCharMap charConvertMap;

     protected void setCharConvertMap() {
         charConvertMap = new NormalizeCharMap();
         charConvertMap.add(" ","");

     }

     public StripSpacesAnalyzer() {
         setCharConvertMap();
     }

     public final TokenStream tokenStream(String fieldName,
                                    final Reader reader) {
         CharFilter mappingCharFilter = new 
MappingCharFilter(charConvertMap,reader);
         TokenStream result = new KeywordTokenizer(mappingCharFilter);
         result = new LowercaseFilter(result);
         return result;
     }

     private static final class SavedStreams {
         KeywordTokenizer tokenStream;
         TokenStream filteredTokenStream;
     }

     public final TokenStream reusableTokenStream(String fieldName,
                                            final Reader reader) throws 
IOException {

         SavedStreams streams = (SavedStreams) getPreviousTokenStream();
         if (streams == null) {
             streams = new SavedStreams();
             setPreviousTokenStream(streams);
             streams.tokenStream = new KeywordTokenizer(new 
MappingCharFilter(charConvertMap, reader));
             streams.filteredTokenStream = new 
LowercaseFilter(streams.tokenStream);
         }
         else {
             streams.tokenStream.reset(new 
MappingCharFilter(charConvertMap,reader));
         }
         return streams.filteredTokenStream;
     }
}

So to reiterate looking at a dump one instance of a StripSpacesAnalyzer 
can find itself with multiple instances of the SavedStreams class 
conected to it via a WeakHashMap called hardRefs in the tokenStreams 
(CloseableThreadLocal) of the superclass, shoudnt there just be the one 
per instance of the analyzer ?

(Using Lucene 3.6.0)

Paul
Paul

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54793-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Jan 22 23:27:37 2013
Return-Path: <java-user-return-54793-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 9F883E15B
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 22 Jan 2013 23:27:37 +0000 (UTC)
Received: (qmail 53029 invoked by uid 500); 22 Jan 2013 23:27:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52934 invoked by uid 500); 22 Jan 2013 23:27:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52923 invoked by uid 99); 22 Jan 2013 23:27:35 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Jan 2013 23:27:35 +0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,SPF_NEUTRAL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: 216.139.236.26 is neither permitted nor denied by domain of saisantoshi76@gmail.com)
Received: from [216.139.236.26] (HELO sam.nabble.com) (216.139.236.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Jan 2013 23:27:28 +0000
Received: from ben.nabble.com ([192.168.236.152])
	by sam.nabble.com with esmtp (Exim 4.72)
	(envelope-from <saisantoshi76@gmail.com>)
	id 1TxnFE-0007xY-Bo
	for java-user@lucene.apache.org; Tue, 22 Jan 2013 15:27:08 -0800
Date: Tue, 22 Jan 2013 15:27:08 -0800 (PST)
From: saisantoshi <saisantoshi76@gmail.com>
To: java-user@lucene.apache.org
Message-ID: <1358897228356-4035488.post@n3.nabble.com>
Subject: IndexSearcher.search(Weight weight, Filter filter, HitCollector
 results) is not there in 4.0 version
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

We are using the following below method with Lucene 2.4.0

public void search(Weight weight,
                   Filter filter,
                   HitCollector results)
            throws IOException

We are upgrading to the latest version and looking at the API (4.0), the
above signature has been deleted from the 4.0 but has no indication on what
other method needs to be used for the above one. Could someone please let us
know if this is a documentation error or removed from 4.0. If its removed
from 4.0, could someone please suggest an appropriate method that needs to
be used in place of the above?



--
View this message in context: http://lucene.472066.n3.nabble.com/IndexSearcher-search-Weight-weight-Filter-filter-HitCollector-results-is-not-there-in-4-0-version-tp4035488.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54794-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Jan 22 23:46:07 2013
Return-Path: <java-user-return-54794-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id A3A05ECEA
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 22 Jan 2013 23:46:07 +0000 (UTC)
Received: (qmail 99870 invoked by uid 500); 22 Jan 2013 23:46:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99764 invoked by uid 500); 22 Jan 2013 23:46:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99754 invoked by uid 99); 22 Jan 2013 23:46:04 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Jan 2013 23:46:04 +0000
X-ASF-Spam-Status: No, hits=1.3 required=5.0
	tests=SPF_PASS,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of uwe@thetaphi.de designates 188.138.97.18 as permitted sender)
Received: from [188.138.97.18] (HELO mail.sd-datasolutions.de) (188.138.97.18)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Jan 2013 23:45:59 +0000
Received: from VEGA (71-53.5-85.cust.bluewin.ch [85.5.53.71])
	by mail.sd-datasolutions.de (Postfix) with ESMTPSA id 1114E14AA008
	for <java-user@lucene.apache.org>; Tue, 22 Jan 2013 23:45:37 +0000 (UTC)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <1358897228356-4035488.post@n3.nabble.com>
In-Reply-To: <1358897228356-4035488.post@n3.nabble.com>
Subject: RE: IndexSearcher.search(Weight weight, Filter filter, HitCollector results) is not there in 4.0 version
Date: Wed, 23 Jan 2013 00:45:36 +0100
Message-ID: <001a01cdf8fa$93d1e010$bb75a030$@thetaphi.de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="utf-8"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Outlook 14.0
Thread-Index: AQJCXIFkTuxCRyEntEJ3KySqf/IJlZdtONMw
Content-Language: de
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

the methods taking Weight are not for public use, only for internal use =
(e.g. subclasses). You should not pass Weight to IndexSearcher, use the =
native Query instance! Why do you want to pass a Weight to =
IndexSearcher?=20

Every Weight is created by a Query instance, so you can always pass the =
original Query instance to IndexSearcher, no usage of Weight is needed. =
IndexSearcher will correctly rewrite the query and create the weight =
internally you don't need to handle that (and it is subject to change =
and is only a implementation detail).

In addition, there are no longer a Weight-based methods that can also =
take a Filter (not even protected). The reason for this is, that =
IndexSearcher no longer supports and executes Filters natively, the =
filter handling is now completely done inside FilteredQuery; =
IndexSearcher does not handle Filters anymore. The methods in =
IndexSearcher taking Query and Filter are for convenience, but use new =
FilteredQuery(Query, Filter) internally to wrap the Query/Filter =
combination and create the weight from it.

If you want to use the internal search methods with Weight, you have to =
refactor your code and include the filter into your Query using =
FilteredQuery only passing a Weight to IndexSearcher. But those methods =
are protected; you can only use them from subclasses (under the =
assumption that you know what you are doing *g*).

Finally, the class HitCollector was deprecated in Lucene 2.9 and was =
removed in 3.0, you have to use the new segement-based "Collector".

Uwe

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de

> -----Original Message-----
> From: saisantoshi [mailto:saisantoshi76@gmail.com]
> Sent: Wednesday, January 23, 2013 12:27 AM
> To: java-user@lucene.apache.org
> Subject: IndexSearcher.search(Weight weight, Filter filter, =
HitCollector
> results) is not there in 4.0 version
>=20
> We are using the following below method with Lucene 2.4.0
>=20
> public void search(Weight weight,
>                    Filter filter,
>                    HitCollector results)
>             throws IOException
>=20
> We are upgrading to the latest version and looking at the API (4.0), =
the above
> signature has been deleted from the 4.0 but has no indication on what =
other
> method needs to be used for the above one. Could someone please let us
> know if this is a documentation error or removed from 4.0. If its =
removed
> from 4.0, could someone please suggest an appropriate method that =
needs
> to be used in place of the above?
>=20
>=20
>=20
> --
> View this message in context:
> http://lucene.472066.n3.nabble.com/IndexSearcher-search-Weight-weight-
> =
Filter-filter-HitCollector-results-is-not-there-in-4-0-version-tp4035488.=
html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54795-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jan 23 00:01:03 2013
Return-Path: <java-user-return-54795-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 06162ED6A
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 23 Jan 2013 00:01:03 +0000 (UTC)
Received: (qmail 34860 invoked by uid 500); 23 Jan 2013 00:01:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34812 invoked by uid 500); 23 Jan 2013 00:01:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34797 invoked by uid 99); 23 Jan 2013 00:01:00 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Jan 2013 00:01:00 +0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,SPF_NEUTRAL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: 216.139.236.26 is neither permitted nor denied by domain of saisantoshi76@gmail.com)
Received: from [216.139.236.26] (HELO sam.nabble.com) (216.139.236.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Jan 2013 00:00:55 +0000
Received: from ben.nabble.com ([192.168.236.152])
	by sam.nabble.com with esmtp (Exim 4.72)
	(envelope-from <saisantoshi76@gmail.com>)
	id 1Txnla-00020s-R1
	for java-user@lucene.apache.org; Tue, 22 Jan 2013 16:00:34 -0800
Date: Tue, 22 Jan 2013 16:00:34 -0800 (PST)
From: saisantoshi <saisantoshi76@gmail.com>
To: java-user@lucene.apache.org
Message-ID: <1358899234828-4035490.post@n3.nabble.com>
In-Reply-To: <001a01cdf8fa$93d1e010$bb75a030$@thetaphi.de>
References: <1358897228356-4035488.post@n3.nabble.com> <001a01cdf8fa$93d1e010$bb75a030$@thetaphi.de>
Subject: RE: IndexSearcher.search(Weight weight, Filter filter, HitCollector
 results) is not there in 4.0 version
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks.

Can we use the following method in 4.0 as a replacement for the above
method? However, we will rewrite this to use FilteredQuery later but don't
want to refactor a lot.

public void search(Query query,
          Filter filter,
          Collector results)
            throws IOException

http://lucene.apache.org/core/4_0_0/core/org/apache/lucene/search/IndexSearcher.html#search%28org.apache.lucene.search.Query,%20org.apache.lucene.search.Filter,%20org.apache.lucene.search.Collector%29

In this way, I can pass the native query (instead of the weight) and pass in
the filter and a TopDocsCollector instance.

Thanks,
Sai.



--
View this message in context: http://lucene.472066.n3.nabble.com/IndexSearcher-search-Weight-weight-Filter-filter-HitCollector-results-is-not-there-in-4-0-version-tp4035488p4035490.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54796-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jan 23 00:30:51 2013
Return-Path: <java-user-return-54796-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 29A64D016
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 23 Jan 2013 00:30:51 +0000 (UTC)
Received: (qmail 17158 invoked by uid 500); 23 Jan 2013 00:30:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17066 invoked by uid 500); 23 Jan 2013 00:30:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17056 invoked by uid 99); 23 Jan 2013 00:30:49 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Jan 2013 00:30:49 +0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,SPF_NEUTRAL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: 216.139.236.26 is neither permitted nor denied by domain of saisantoshi76@gmail.com)
Received: from [216.139.236.26] (HELO sam.nabble.com) (216.139.236.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Jan 2013 00:30:42 +0000
Received: from ben.nabble.com ([192.168.236.152])
	by sam.nabble.com with esmtp (Exim 4.72)
	(envelope-from <saisantoshi76@gmail.com>)
	id 1TxoEQ-0003xs-2Z
	for java-user@lucene.apache.org; Tue, 22 Jan 2013 16:30:22 -0800
Date: Tue, 22 Jan 2013 16:30:22 -0800 (PST)
From: saisantoshi <saisantoshi76@gmail.com>
To: java-user@lucene.apache.org
Message-ID: <1358901022051-4035494.post@n3.nabble.com>
Subject: Are Search Index directories backward comptabile? ( when upgrading
 to latest lucene version)
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

While upgrading from one version to another version ( in our case : 2.4 -
4.0). Do we need to flush out the existing search index directory and
rebuild new one. What are the best practices here? Are the existing search
index directories not backward compatible?

Thanks
Sai



--
View this message in context: http://lucene.472066.n3.nabble.com/Are-Search-Index-directories-backward-comptabile-when-upgrading-to-latest-lucene-version-tp4035494.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54797-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jan 23 05:35:31 2013
Return-Path: <java-user-return-54797-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 860C4E41F
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 23 Jan 2013 05:35:31 +0000 (UTC)
Received: (qmail 56038 invoked by uid 500); 23 Jan 2013 05:35:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55816 invoked by uid 500); 23 Jan 2013 05:35:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55775 invoked by uid 99); 23 Jan 2013 05:35:26 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Jan 2013 05:35:26 +0000
X-ASF-Spam-Status: No, hits=1.3 required=5.0
	tests=SPF_PASS,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of uwe@thetaphi.de designates 188.138.97.18 as permitted sender)
Received: from [188.138.97.18] (HELO mail.sd-datasolutions.de) (188.138.97.18)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Jan 2013 05:35:19 +0000
Received: from VEGA (71-53.5-85.cust.bluewin.ch [85.5.53.71])
	by mail.sd-datasolutions.de (Postfix) with ESMTPSA id 0083914AA009
	for <java-user@lucene.apache.org>; Wed, 23 Jan 2013 05:34:57 +0000 (UTC)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <1358897228356-4035488.post@n3.nabble.com> <001a01cdf8fa$93d1e010$bb75a030$@thetaphi.de> <1358899234828-4035490.post@n3.nabble.com>
In-Reply-To: <1358899234828-4035490.post@n3.nabble.com>
Subject: RE: IndexSearcher.search(Weight weight, Filter filter, HitCollector results) is not there in 4.0 version
Date: Wed, 23 Jan 2013 06:34:57 +0100
Message-ID: <004101cdf92b$61e15640$25a402c0$@thetaphi.de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="utf-8"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Outlook 14.0
Thread-Index: AQJCXIFkTuxCRyEntEJ3KySqf/IJlQLHQe5EAUy9WymXTP0SYA==
Content-Language: de
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

That'a the way to go! With this method, you don't need to use =
FilteredQuery, it is done under the hood automatically.
Please take care that Collector works, in contrast to HitCollector, per =
index segment (setScorer/setNextReader), so you have to rewrite at least =
most of you collection code so it is able to use the relative document =
IDs.

Uwe

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de


> -----Original Message-----
> From: saisantoshi [mailto:saisantoshi76@gmail.com]
> Sent: Wednesday, January 23, 2013 1:01 AM
> To: java-user@lucene.apache.org
> Subject: RE: IndexSearcher.search(Weight weight, Filter filter, =
HitCollector
> results) is not there in 4.0 version
>=20
> Thanks.
>=20
> Can we use the following method in 4.0 as a replacement for the above
> method? However, we will rewrite this to use FilteredQuery later but =
don't
> want to refactor a lot.
>=20
> public void search(Query query,
>           Filter filter,
>           Collector results)
>             throws IOException
>=20
> http://lucene.apache.org/core/4_0_0/core/org/apache/lucene/search/Inde
> xSearcher.html#search%28org.apache.lucene.search.Query,%20org.apache.l
> ucene.search.Filter,%20org.apache.lucene.search.Collector%29
>=20
> In this way, I can pass the native query (instead of the weight) and =
pass in
> the filter and a TopDocsCollector instance.
>=20
> Thanks,
> Sai.
>=20
>=20
>=20
> --
> View this message in context:
> http://lucene.472066.n3.nabble.com/IndexSearcher-search-Weight-weight-
> Filter-filter-HitCollector-results-is-not-there-in-4-0-version-
> tp4035488p4035490.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54798-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jan 23 05:41:44 2013
Return-Path: <java-user-return-54798-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 9F0ACE431
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 23 Jan 2013 05:41:44 +0000 (UTC)
Received: (qmail 70607 invoked by uid 500); 23 Jan 2013 05:41:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70278 invoked by uid 500); 23 Jan 2013 05:41:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70225 invoked by uid 99); 23 Jan 2013 05:41:40 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Jan 2013 05:41:40 +0000
X-ASF-Spam-Status: No, hits=1.3 required=5.0
	tests=SPF_PASS,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of uwe@thetaphi.de designates 188.138.97.18 as permitted sender)
Received: from [188.138.97.18] (HELO mail.sd-datasolutions.de) (188.138.97.18)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Jan 2013 05:41:34 +0000
Received: from VEGA (71-53.5-85.cust.bluewin.ch [85.5.53.71])
	by mail.sd-datasolutions.de (Postfix) with ESMTPSA id CD6F714AA009
	for <java-user@lucene.apache.org>; Wed, 23 Jan 2013 05:41:12 +0000 (UTC)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <1358901022051-4035494.post@n3.nabble.com>
In-Reply-To: <1358901022051-4035494.post@n3.nabble.com>
Subject: RE: Are Search Index directories backward comptabile? ( when upgrading to latest lucene version)
Date: Wed, 23 Jan 2013 06:41:12 +0100
Message-ID: <004201cdf92c$414d13a0$c3e73ae0$@thetaphi.de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="utf-8"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Outlook 14.0
Thread-Index: AQGwPNqOpOfFrXv6RXShCmwcRo50qZiR3RwA
Content-Language: de
X-Virus-Checked: Checked by ClamAV on apache.org

You have to update in 1 extra steps: 2.x -> 3.6.2 and then you can use =
the index in 4.0, because it can read 3.x indexes. To upgrade to Lucene =
3.6, download lucene-core-3.6.2.jar and run:
$ java -cp lucene-core-3.6.2.jar org.apache.lucene.index.IndexUpgrader =
<indexDir>

After that the binary index format is on the version number 3.6, which =
can be read by 4.0. A direct update from 2.x to 4.0 is not possible. =
Also keep in mind that upgrading the index only updates the index format =
not its contents. Depending on the analyzers you used, you might need to =
reindex, because the text analysis will behave different in newer Lucene =
versions resulting in Queries no longer returning results. To make the =
used analyzers behave like the ones you used in Lucene 2.4, you have to =
pass Version.LUCENE_24 as matchVersion parameter to your analyzer.

But I still recommend to reindex all your data, especially when the =
version difference is so big. In that case, you can use the newer =
Analyzer versions (Version.LUCENE_40).

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de


> -----Original Message-----
> From: saisantoshi [mailto:saisantoshi76@gmail.com]
> Sent: Wednesday, January 23, 2013 1:30 AM
> To: java-user@lucene.apache.org
> Subject: Are Search Index directories backward comptabile? ( when
> upgrading to latest lucene version)
>=20
> While upgrading from one version to another version ( in our case : =
2.4 - 4.0).
> Do we need to flush out the existing search index directory and =
rebuild new
> one. What are the best practices here? Are the existing search index
> directories not backward compatible?
>=20
> Thanks
> Sai
>=20
>=20
>=20
> --
> View this message in context: http://lucene.472066.n3.nabble.com/Are-
> Search-Index-directories-backward-comptabile-when-upgrading-to-latest-
> lucene-version-tp4035494.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54799-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jan 23 07:11:41 2013
Return-Path: <java-user-return-54799-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id C7837E5CD
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 23 Jan 2013 07:11:41 +0000 (UTC)
Received: (qmail 84699 invoked by uid 500); 23 Jan 2013 07:11:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84266 invoked by uid 500); 23 Jan 2013 07:11:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84216 invoked by uid 99); 23 Jan 2013 07:11:37 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Jan 2013 07:11:37 +0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,SPF_NEUTRAL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: 216.139.236.26 is neither permitted nor denied by domain of saisantoshi76@gmail.com)
Received: from [216.139.236.26] (HELO sam.nabble.com) (216.139.236.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Jan 2013 07:11:32 +0000
Received: from ben.nabble.com ([192.168.236.152])
	by sam.nabble.com with esmtp (Exim 4.72)
	(envelope-from <saisantoshi76@gmail.com>)
	id 1TxuUK-0001gY-3W
	for java-user@lucene.apache.org; Tue, 22 Jan 2013 23:11:12 -0800
Date: Tue, 22 Jan 2013 23:11:12 -0800 (PST)
From: saisantoshi <saisantoshi76@gmail.com>
To: java-user@lucene.apache.org
Message-ID: <1358925072101-4035538.post@n3.nabble.com>
In-Reply-To: <004201cdf92c$414d13a0$c3e73ae0$@thetaphi.de>
References: <1358901022051-4035494.post@n3.nabble.com> <004201cdf92c$414d13a0$c3e73ae0$@thetaphi.de>
Subject: RE: Are Search Index directories backward comptabile? ( when
 upgrading to latest lucene version)
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

We are upgrading from 2.4 - 4.0? What are the options here? ( To delete the
existing index directories and reindex with the upgraded ones).

We don't want to take any intermediate steps which would cause more work
again to upgrade to the latest version.

Thanks,
Sai.



--
View this message in context: http://lucene.472066.n3.nabble.com/Are-Search-Index-directories-backward-comptabile-when-upgrading-to-latest-lucene-version-tp4035494p4035538.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54800-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jan 23 07:35:08 2013
Return-Path: <java-user-return-54800-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 05751D6BB
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 23 Jan 2013 07:35:08 +0000 (UTC)
Received: (qmail 47486 invoked by uid 500); 23 Jan 2013 07:35:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47041 invoked by uid 500); 23 Jan 2013 07:35:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46976 invoked by uid 99); 23 Jan 2013 07:35:01 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Jan 2013 07:35:01 +0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,SPF_NEUTRAL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: 216.139.236.26 is neither permitted nor denied by domain of saisantoshi76@gmail.com)
Received: from [216.139.236.26] (HELO sam.nabble.com) (216.139.236.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Jan 2013 07:34:56 +0000
Received: from ben.nabble.com ([192.168.236.152])
	by sam.nabble.com with esmtp (Exim 4.72)
	(envelope-from <saisantoshi76@gmail.com>)
	id 1Txuqx-0002ww-Nq
	for java-user@lucene.apache.org; Tue, 22 Jan 2013 23:34:35 -0800
Date: Tue, 22 Jan 2013 23:34:35 -0800 (PST)
From: saisantoshi <saisantoshi76@gmail.com>
To: java-user@lucene.apache.org
Message-ID: <1358926475732-4035542.post@n3.nabble.com>
In-Reply-To: <004201cdf92c$414d13a0$c3e73ae0$@thetaphi.de>
References: <1358901022051-4035494.post@n3.nabble.com> <004201cdf92c$414d13a0$c3e73ae0$@thetaphi.de>
Subject: RE: Are Search Index directories backward comptabile? ( when
 upgrading to latest lucene version)
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Also, I am not sure about the following below statement:

>>A direct update from 2.x to 4.0 is not possible

Are you saying that its impossible to upgrade from 2.4 - 4.0 version? Why
can't we upgrade? Any technical limitations with Lucene that will not allow
from upgrading from 2.4 - 4.x?. 

I am directly upgrading from 2.4 - 4.x but not sure about any problems with
respect to compilation against 4.x apart from the API changes. I am fixing
them but not sure about any other issues? As far as the indexing is
considered, we are thinking of deleting all the existing indexes and
recreating with the newer version (4.0).

We don't want to take an extra hop ( 2.4 - 3.6.2 and 3.6.2 - 4.x) which
would cause more work for us. 

Please let us know of any issues with the above approach.

Thanks,
Sai



--
View this message in context: http://lucene.472066.n3.nabble.com/Are-Search-Index-directories-backward-comptabile-when-upgrading-to-latest-lucene-version-tp4035494p4035542.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54801-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jan 23 11:13:47 2013
Return-Path: <java-user-return-54801-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 032E0DE1B
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 23 Jan 2013 11:13:47 +0000 (UTC)
Received: (qmail 52592 invoked by uid 500); 23 Jan 2013 11:13:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52360 invoked by uid 500); 23 Jan 2013 11:13:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52318 invoked by uid 99); 23 Jan 2013 11:13:42 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Jan 2013 11:13:42 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of serera@gmail.com designates 209.85.212.180 as permitted sender)
Received: from [209.85.212.180] (HELO mail-wi0-f180.google.com) (209.85.212.180)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Jan 2013 11:13:35 +0000
Received: by mail-wi0-f180.google.com with SMTP id hj13so586927wib.13
        for <java-user@lucene.apache.org>; Wed, 23 Jan 2013 03:13:15 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:x-received:in-reply-to:references:date:message-id
         :subject:from:to:content-type;
        bh=JV/FV7e1SGktDPHIPGOeOITCIK4+m3Oooh0WFztbgp0=;
        b=yIgJCAcpejEcE3eIotuDtribJsEb5QD6LkSiyDRmV6A4VFKS8V5UPo6knDEWcGbxR8
         xvFEahynrd2OY073GRjZgoy6GkEAKPX+cz0jMNZO5xDD/BKnxAmZVnl9csNWYqfMQd4A
         zf8LQn2PaN75r/V8OT7FtZHkV2uYEC5zoYUFoiTMdCx87uccXEhgn0rCafST5V286/v2
         rdqf5uB4bZe38VMIT2nOiIaN+WovsnmP0vef3w2pyMcKnIyHcEQb8pa1EVn51MiJ6IcT
         0tpjzXnzKir8G552K9zkok9EWSuqNzWcHHw7RwMWEbp9xeeQIejaIdP0lvUvSQ61CT/r
         9IWg==
MIME-Version: 1.0
X-Received: by 10.180.90.106 with SMTP id bv10mr1754814wib.12.1358939595580;
 Wed, 23 Jan 2013 03:13:15 -0800 (PST)
Received: by 10.194.90.171 with HTTP; Wed, 23 Jan 2013 03:13:15 -0800 (PST)
In-Reply-To: <CAL8PwkbLqaadSqhJXHbCkGcwdZGy7cxgpohVfJkmCqpdHkm5Rg@mail.gmail.com>
References: <1358780365.2728.14.camel@linux.scoobydoo>
	<007c01cdf7eb$1eba8d50$5c2fa7f0$@thetaphi.de>
	<1358782771.2728.28.camel@linux.scoobydoo>
	<CALfq-2QkLJaLtbaH7P1_XARJYQju_Nd6QUK1CdvGXXPTsjRPQA@mail.gmail.com>
	<1358784492.2728.35.camel@linux.scoobydoo>
	<8C30D9E4-B961-4A09-8FEA-343690A0BC56@gmail.com>
	<CALfq-2R+qNdb34t-BYQvJyWZBo=tT0sE_pNieCOuRO7oSANGnA@mail.gmail.com>
	<CAL8PwkbLqaadSqhJXHbCkGcwdZGy7cxgpohVfJkmCqpdHkm5Rg@mail.gmail.com>
Date: Wed, 23 Jan 2013 13:13:15 +0200
Message-ID: <CALfq-2S3xMZGWqCQ=OiWLpv1_pe-2tuYAE-3GLUon1T7X597yg@mail.gmail.com>
Subject: Re: FacetedSearch and MultiReader
From: Shai Erera <serera@gmail.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Content-Type: multipart/alternative; boundary=f46d043c81e8dda56004d3f2c711
X-Virus-Checked: Checked by ClamAV on apache.org

--f46d043c81e8dda56004d3f2c711
Content-Type: text/plain; charset=ISO-8859-1

>
> I think we should open an issue to provide support for distributed
> faceting?
>

Opened https://issues.apache.org/jira/browse/LUCENE-4710.

BTW Nicola, I remember you said something about TBs of indexes. I just
wanted to point out that if you have really large indexes, with many
documents, then you may want to look at facets sampling. I.e., instead of
working hard to get exact counts, you can sample the result set and get an
approximation to the top-K categories. You can then choose to either 'fully
count the approximated top-K', or stick w/ their partial counts and display
pctg (%) to the user.

In fact, when the number of results is so big, think about the following
result:

A (456,873,234)
  A/1 (143,548,034)
  A/1 (137,323,452)

These numbers are too big for a human to process the value behind them.
Following the big numbers rule, these just denote "lots of results" to
anyone.
Rather, it may be better if it displayed A/1 (87%) and A/2 (85%).
This is something you may want to consider too.

Sampling improves the performance of faceted search, especially on large
result sets.
Displaying % counts clarifies the returned top-K categories better, IMO, to
the common user.

Shai


On Tue, Jan 22, 2013 at 4:57 PM, Michael McCandless <
lucene@mikemccandless.com> wrote:

> On Mon, Jan 21, 2013 at 11:20 PM, Shai Erera <serera@gmail.com> wrote:
>
> > (unfortunately, there's still no tool in Lucene to do that for you).
>
> I think we should open an issue to provide support for distributed
> faceting?
>
> For example, we already provide support for distributed searching
> (TopDocs.merge), and distributed grouping (TopGroups.merge) ... seems
> like we should do the same for distributed faceting (even though its
> somewhat tricky)?
>
> Mike McCandless
>
> http://blog.mikemccandless.com
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--f46d043c81e8dda56004d3f2c711--

From java-user-return-54802-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jan 23 12:23:29 2013
Return-Path: <java-user-return-54802-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 7B871ED3B
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 23 Jan 2013 12:23:29 +0000 (UTC)
Received: (qmail 37772 invoked by uid 500); 23 Jan 2013 12:23:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37166 invoked by uid 500); 23 Jan 2013 12:23:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37096 invoked by uid 99); 23 Jan 2013 12:23:19 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Jan 2013 12:23:19 +0000
X-ASF-Spam-Status: No, hits=-2.3 required=5.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of nbuso@ebi.ac.uk designates 193.62.194.225 as permitted sender)
Received: from [193.62.194.225] (HELO smtp01.ebi.ac.uk) (193.62.194.225)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Jan 2013 12:23:14 +0000
Received: from [172.22.70.38] (linux.windows.ebi.ac.uk [172.22.70.38])
	by smtp01.ebi.ac.uk (8.13.8/8.13.8) with ESMTP id r0NCMoVD015631
	for <java-user@lucene.apache.org>; Wed, 23 Jan 2013 12:22:50 GMT
Message-ID: <1358943754.2728.65.camel@linux.scoobydoo>
Subject: Re: FacetedSearch and MultiReader
From: Nicola Buso <nbuso@ebi.ac.uk>
Reply-To: nbuso@ebi.ac.uk
To: java-user@lucene.apache.org
Date: Wed, 23 Jan 2013 12:22:34 +0000
In-Reply-To: <CALfq-2S3xMZGWqCQ=OiWLpv1_pe-2tuYAE-3GLUon1T7X597yg@mail.gmail.com>
References: <1358780365.2728.14.camel@linux.scoobydoo>
	 <007c01cdf7eb$1eba8d50$5c2fa7f0$@thetaphi.de>
	 <1358782771.2728.28.camel@linux.scoobydoo>
	 <CALfq-2QkLJaLtbaH7P1_XARJYQju_Nd6QUK1CdvGXXPTsjRPQA@mail.gmail.com>
	 <1358784492.2728.35.camel@linux.scoobydoo>
	 <8C30D9E4-B961-4A09-8FEA-343690A0BC56@gmail.com>
	 <CALfq-2R+qNdb34t-BYQvJyWZBo=tT0sE_pNieCOuRO7oSANGnA@mail.gmail.com>
	 <CAL8PwkbLqaadSqhJXHbCkGcwdZGy7cxgpohVfJkmCqpdHkm5Rg@mail.gmail.com>
	 <CALfq-2S3xMZGWqCQ=OiWLpv1_pe-2tuYAE-3GLUon1T7X597yg@mail.gmail.com>
Organization: EBI
Content-Type: text/plain; charset="UTF-8"
X-Mailer: Evolution 3.6.2 (3.6.2-3.fc18) 
Mime-Version: 1.0
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks Shai,

I'm trying your solution and it's working, I need to check some number
to test it.
As I said we are aware having big indexes, than I use facets only on
subsets, but if it will result in performances issues too than I'll for
sure take a look into facet sampling.


Nicola.

On Wed, 2013-01-23 at 13:13 +0200, Shai Erera wrote:
> >
> > I think we should open an issue to provide support for distributed
> > faceting?
> >
> 
> Opened https://issues.apache.org/jira/browse/LUCENE-4710.
> 
> BTW Nicola, I remember you said something about TBs of indexes. I just
> wanted to point out that if you have really large indexes, with many
> documents, then you may want to look at facets sampling. I.e., instead of
> working hard to get exact counts, you can sample the result set and get an
> approximation to the top-K categories. You can then choose to either 'fully
> count the approximated top-K', or stick w/ their partial counts and display
> pctg (%) to the user.
> 
> In fact, when the number of results is so big, think about the following
> result:
> 
> A (456,873,234)
>   A/1 (143,548,034)
>   A/1 (137,323,452)
> 
> These numbers are too big for a human to process the value behind them.
> Following the big numbers rule, these just denote "lots of results" to
> anyone.
> Rather, it may be better if it displayed A/1 (87%) and A/2 (85%).
> This is something you may want to consider too.
> 
> Sampling improves the performance of faceted search, especially on large
> result sets.
> Displaying % counts clarifies the returned top-K categories better, IMO, to
> the common user.
> 
> Shai
> 
> 
> On Tue, Jan 22, 2013 at 4:57 PM, Michael McCandless <
> lucene@mikemccandless.com> wrote:
> 
> > On Mon, Jan 21, 2013 at 11:20 PM, Shai Erera <serera@gmail.com> wrote:
> >
> > > (unfortunately, there's still no tool in Lucene to do that for you).
> >
> > I think we should open an issue to provide support for distributed
> > faceting?
> >
> > For example, we already provide support for distributed searching
> > (TopDocs.merge), and distributed grouping (TopGroups.merge) ... seems
> > like we should do the same for distributed faceting (even though its
> > somewhat tricky)?
> >
> > Mike McCandless
> >
> > http://blog.mikemccandless.com
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54803-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jan 23 13:01:21 2013
Return-Path: <java-user-return-54803-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 94E32EADF
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 23 Jan 2013 13:01:21 +0000 (UTC)
Received: (qmail 36045 invoked by uid 500); 23 Jan 2013 13:01:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35787 invoked by uid 500); 23 Jan 2013 13:01:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 32569 invoked by uid 99); 23 Jan 2013 12:59:39 -0000
X-ASF-Spam-Status: No, hits=-2.3 required=5.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of gilin@il.ibm.com designates 195.75.94.107 as permitted sender)
Subject: MMapDirectory performance - Are searchable field values contiguously stored
 in FS block?
X-KeepSent: 37518A87:FFA572B7-C2257AFC:00450374;
 type=4; name=$KeepSent
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 8.5.3 September 15, 2011
Message-ID: <OF37518A87.FFA572B7-ONC2257AFC.00450374-C2257AFC.00475387@il.ibm.com>
From: Gili Nachum <GILIN@il.ibm.com>
Date: Wed, 23 Jan 2013 14:59:04 +0200
X-MIMETrack: Serialize by Router on D06ML319/06/M/IBM(Release 8.5.3 ZX853HP5|January 12, 2012) at
 23/01/2013 14:58:55
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
x-cbid: 13012312-5024-0000-0000-000005049520
X-Virus-Checked: Checked by ClamAV on apache.org


Hi,

I have a search workload that focuses on two fields in my 1GB index. I get
very good performance when loaded the index via MmapDirectory. I attribute
this performance to the Operating System File System (FS OS) cache, that
keeps the most recently used FS blocks RAM resident.

I would like to add 50 more fields to the index, increasing it size to
~50GB, A key factor is that these additional fields will be queried very
rarely.
Given this increase in index size, should I expect lower Queries/Sec rate
for the original search workload (that doesn't use the new fields)?

I would assume that if the values of each searchable field are stored in a
different set of FS blocks, then the 50 additional fields would make no
difference for the OS FS cache, as it would continue to behave like before,
keeping in RAM those most used FS blocks.
On the other hand, if values from different fields share the same FS
blocks, then the hot 2 fields values will be to scattered acrossed the FS
the OS cache useless. degradating performance back to I/O bounded.

Which is the case with Lucene 3.6?

Thanks.
Gili Nachum.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54804-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jan 23 13:51:05 2013
Return-Path: <java-user-return-54804-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 59961E8DC
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 23 Jan 2013 13:51:05 +0000 (UTC)
Received: (qmail 70040 invoked by uid 500); 23 Jan 2013 13:51:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69545 invoked by uid 500); 23 Jan 2013 13:50:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69505 invoked by uid 99); 23 Jan 2013 13:50:58 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Jan 2013 13:50:58 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.160.51] (HELO mail-pb0-f51.google.com) (209.85.160.51)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Jan 2013 13:50:51 +0000
Received: by mail-pb0-f51.google.com with SMTP id ro12so4662720pbb.38
        for <java-user@lucene.apache.org>; Wed, 23 Jan 2013 05:50:30 -0800 (PST)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=x-received:mime-version:in-reply-to:references:from:date:message-id
         :subject:to:content-type:x-gm-message-state;
        bh=EyfNWvXQ0njj3AUIchX1UxqhDBn44U2WaY9AFotG4Z0=;
        b=BiQ2l+PtPxlesiG4GpaeaT5KPKgYdjUcNSduqpFcDsOY2JLv6JZXInlkl2UynLL7cS
         GQi+9mYMIGGaaeEFNQ48rfz7usFwGzM1oa8fbkAm/+l69hW+D3uEeiL7LYdQr8a4ekVQ
         KObGlEeCepBn5i8YOjjiPdeesY6AKufLBrF4XU7p4O9CnIJyCyUdxdC5hHH2/7Byt4Jv
         7JlTGTXMOYEzhNB0Hm2Hi+TIXK6+dA9JAg3WkoxaLkLfotf2GAdd57qTX7LeVCP121Pw
         ubeGBv5O2XIpluV19j1SRqEhkfDgeSoP6hybQj4RlagmHMQJqiK0SolswBVePbhhj9AT
         GUtg==
X-Received: by 10.66.74.197 with SMTP id w5mr4665661pav.60.1358949030294; Wed,
 23 Jan 2013 05:50:30 -0800 (PST)
MIME-Version: 1.0
Received: by 10.68.154.73 with HTTP; Wed, 23 Jan 2013 05:50:10 -0800 (PST)
In-Reply-To: <OF37518A87.FFA572B7-ONC2257AFC.00450374-C2257AFC.00475387@il.ibm.com>
References: <OF37518A87.FFA572B7-ONC2257AFC.00450374-C2257AFC.00475387@il.ibm.com>
From: Michael McCandless <lucene@mikemccandless.com>
Date: Wed, 23 Jan 2013 08:50:10 -0500
Message-ID: <CAL8PwkYS8pVi48Q2uiTjtjJ=4SdWYBtAgPHsLM9Oc3MwYr+3jg@mail.gmail.com>
Subject: Re: MMapDirectory performance - Are searchable field values
 contiguously stored in FS block?
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Gm-Message-State: ALoCoQmEXUWN1cL2jJq/L+7o6WAC+faBNuUQP74AwHLN763x8RgGpwDbR9k7f4Ey/pe9iJmQP/qy
X-Virus-Checked: Checked by ClamAV on apache.org

Are the additional rarely used 48 fields used for searching?  Or, for
looking up stored fields?

If it's for searching then you should see good locality (efficient use
of the OS's IO cache) from the posting lists: each field's postings
are stored in a single chunk of the files, then the next field's
postings, etc.  Ie the storage is "column stride" (if columns are
fields and rows are documents).

But for stored fields, or term vectors, which are "row stride", you
won't see efficient use of the OS's IO cache.

Mike McCandless

http://blog.mikemccandless.com

On Wed, Jan 23, 2013 at 7:59 AM, Gili Nachum <GILIN@il.ibm.com> wrote:
>
> Hi,
>
> I have a search workload that focuses on two fields in my 1GB index. I get
> very good performance when loaded the index via MmapDirectory. I attribute
> this performance to the Operating System File System (FS OS) cache, that
> keeps the most recently used FS blocks RAM resident.
>
> I would like to add 50 more fields to the index, increasing it size to
> ~50GB, A key factor is that these additional fields will be queried very
> rarely.
> Given this increase in index size, should I expect lower Queries/Sec rate
> for the original search workload (that doesn't use the new fields)?
>
> I would assume that if the values of each searchable field are stored in a
> different set of FS blocks, then the 50 additional fields would make no
> difference for the OS FS cache, as it would continue to behave like before,
> keeping in RAM those most used FS blocks.
> On the other hand, if values from different fields share the same FS
> blocks, then the hot 2 fields values will be to scattered acrossed the FS
> the OS cache useless. degradating performance back to I/O bounded.
>
> Which is the case with Lucene 3.6?
>
> Thanks.
> Gili Nachum.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54805-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jan 23 14:31:22 2013
Return-Path: <java-user-return-54805-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 6FAD5E6E1
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 23 Jan 2013 14:31:22 +0000 (UTC)
Received: (qmail 11646 invoked by uid 500); 23 Jan 2013 14:31:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11411 invoked by uid 500); 23 Jan 2013 14:31:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11346 invoked by uid 99); 23 Jan 2013 14:31:18 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Jan 2013 14:31:18 +0000
X-ASF-Spam-Status: No, hits=1.7 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of gksrb92@gmail.com designates 209.85.212.46 as permitted sender)
Received: from [209.85.212.46] (HELO mail-vb0-f46.google.com) (209.85.212.46)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Jan 2013 14:31:12 +0000
Received: by mail-vb0-f46.google.com with SMTP id b13so7557451vby.5
        for <java-user@lucene.apache.org>; Wed, 23 Jan 2013 06:30:51 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:x-received:date:message-id:subject:from:to
         :content-type;
        bh=EqKO3CahC13Q1h8ovasaMT2JTu3gCpK2zBtn6FOoyqg=;
        b=YLVmR6XYy6Zz9mBq8elokbisWbnHyOSSGcsjBWjEzJV6FqMNqInGWX3YMvp2D3ElYE
         CR0bOZSv2WjTEqKYNYwUEq6WEmqJoxfxPyuHefLHAOcWK4xOjXyt+JvsOfazyv/mXQn2
         9y33h0XucLmxB3YwTQyfmTP+xeCyNaqoVxIgeINFblbx1e2d3nb3vT1g4bZKzBrUYpKa
         cPKz0eCvLC7AkVkMpIJdDHJo8Y/3omonG6ACdl2xUZoyO8k6rwJqe7OA3ANirbw1ZM2A
         gzxLs8p+MFD1e5KPIVe615HUpsmoPOBEcJQetYPjeWhcLWqkOkXjntZ0b2qm5OlUZSiO
         ss5A==
MIME-Version: 1.0
X-Received: by 10.52.16.102 with SMTP id f6mr1347442vdd.12.1358951451375; Wed,
 23 Jan 2013 06:30:51 -0800 (PST)
Received: by 10.52.92.234 with HTTP; Wed, 23 Jan 2013 06:30:51 -0800 (PST)
Date: Wed, 23 Jan 2013 16:30:51 +0200
Message-ID: <CAOZ_vPZ5EDkB2-5AwDtY8V2SAQd4UHPeZ6P=oY7KYTy-DQpZ9Q@mail.gmail.com>
Subject: Highlighting NGram index
From: Hankyu Kim <gksrb92@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=bcaec5040de286b68804d3f58ac8
X-Virus-Checked: Checked by ClamAV on apache.org

--bcaec5040de286b68804d3f58ac8
Content-Type: text/plain; charset=ISO-8859-1

I have created a NGram index of a fairly large text corpus and I'd like to
highlight the result.

I read from Lucene in Action that FastVectorHighlighter supports
highlighting ngram tokenized index, but when I try, its getBestFragment
method returned null. At the moment I suspect it is caused by not storing
the term vectors while indexing.

Below is the line of code I used to add the contents of the text files into
the index. It seems TextField can't be used to store the term vectors. What
Field class should I use to store contents of a document if I want
FastVectorHighlighter to work?

doc.add(new TextField("contents", new BufferedReader(new
InputStreamReader(fis, "UTF-8"))));

--bcaec5040de286b68804d3f58ac8--

From java-user-return-54806-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jan 23 14:40:52 2013
Return-Path: <java-user-return-54806-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 38E60E721
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 23 Jan 2013 14:40:52 +0000 (UTC)
Received: (qmail 42580 invoked by uid 500); 23 Jan 2013 14:40:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41723 invoked by uid 500); 23 Jan 2013 14:40:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41320 invoked by uid 99); 23 Jan 2013 14:40:45 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Jan 2013 14:40:45 +0000
X-ASF-Spam-Status: No, hits=0.6 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ian.lea@gmail.com designates 74.125.82.176 as permitted sender)
Received: from [74.125.82.176] (HELO mail-we0-f176.google.com) (74.125.82.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Jan 2013 14:40:38 +0000
Received: by mail-we0-f176.google.com with SMTP id s43so1113899wey.35
        for <java-user@lucene.apache.org>; Wed, 23 Jan 2013 06:40:18 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=x-received:mime-version:in-reply-to:references:from:date:message-id
         :subject:to:content-type;
        bh=syfrRgLGuSOynHABgd7SAyT2VT8/xpuwVVNr+Cp+E/0=;
        b=obYU3d1W9NEhtcUcH6BzYNbMgjRMqEdg5g4gYafcQhZgGi3uLEaI8EMQS3HZCfmPP6
         nmxPId/pmf52krWQEPoUd6ctQlTN/Vh1BjO0gCETb+l63DmO7yh4ATFhnOHGHyzYa/aH
         /ppF817xgbtuUirBx6QHfRLOugDyzdK4zn16WVMW4WCZ1fGO8LK6d0PBfmEizUvX+Pc8
         LELx1Ac2AlOu+KApCwbQJ2Doozd6NKFzcZAr47UkdqWV7Cknu515zmfwKr0mjs6asrYk
         6JBxB4u7QKSLy4uQNYufUX2MyVQ++/NiUaUOPDsjxR6Fev80gSrLjOkwDwvgNF82PfVr
         Az7g==
X-Received: by 10.180.99.72 with SMTP id eo8mr27840421wib.34.1358952018032;
 Wed, 23 Jan 2013 06:40:18 -0800 (PST)
MIME-Version: 1.0
Received: by 10.194.57.11 with HTTP; Wed, 23 Jan 2013 06:39:21 -0800 (PST)
In-Reply-To: <1358926475732-4035542.post@n3.nabble.com>
References: <1358901022051-4035494.post@n3.nabble.com> <004201cdf92c$414d13a0$c3e73ae0$@thetaphi.de>
 <1358926475732-4035542.post@n3.nabble.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Wed, 23 Jan 2013 14:39:21 +0000
Message-ID: <CAEY5pxV_ktn0pdFaB7ebXCjMCC5d0nQ91NOk8xZythDZ8VAr9w@mail.gmail.com>
Subject: Re: Are Search Index directories backward comptabile? ( when
 upgrading to latest lucene version)
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

Lucene 4.x cannot read indexes created with 2.x.  You can change and
recompile your code to 4.x in one go.  Since you can reindex, I'd make
all the code changes and then recreate the indexes using 4.x.  With a
bit of testing along the way of course.


--
Ian.


On Wed, Jan 23, 2013 at 7:34 AM, saisantoshi <saisantoshi76@gmail.com> wrote:
> Also, I am not sure about the following below statement:
>
>>>A direct update from 2.x to 4.0 is not possible
>
> Are you saying that its impossible to upgrade from 2.4 - 4.0 version? Why
> can't we upgrade? Any technical limitations with Lucene that will not allow
> from upgrading from 2.4 - 4.x?.
>
> I am directly upgrading from 2.4 - 4.x but not sure about any problems with
> respect to compilation against 4.x apart from the API changes. I am fixing
> them but not sure about any other issues? As far as the indexing is
> considered, we are thinking of deleting all the existing indexes and
> recreating with the newer version (4.0).
>
> We don't want to take an extra hop ( 2.4 - 3.6.2 and 3.6.2 - 4.x) which
> would cause more work for us.
>
> Please let us know of any issues with the above approach.
>
> Thanks,
> Sai
>
>
>
> --
> View this message in context: http://lucene.472066.n3.nabble.com/Are-Search-Index-directories-backward-comptabile-when-upgrading-to-latest-lucene-version-tp4035494p4035542.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54807-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jan 23 16:28:41 2013
Return-Path: <java-user-return-54807-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 006D2E6E6
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 23 Jan 2013 16:28:41 +0000 (UTC)
Received: (qmail 18371 invoked by uid 500); 23 Jan 2013 16:28:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18228 invoked by uid 500); 23 Jan 2013 16:28:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 15465 invoked by uid 99); 23 Jan 2013 16:27:41 -0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ricky.pritchett@gmail.com designates 74.125.83.41 as permitted sender)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:x-received:date:message-id:subject:from:to:cc
         :content-type;
        bh=qpnNINWP3k0MCFmn4WHEj6zTFICMvVW9BnmGR0D2+Pg=;
        b=f+LuM6Xf6s5TU2cI0WUzaqu0fLr2aTHvxR5XXQh/aCJTiJTpFdJxG7cmvso1gSwg4g
         87groEaz9AjwdMbGaqZvpf/aVTuBNSXRD0hwUO7pOi0EKkp5luqrXFLJjf1yo5HuNUOa
         kOd/G5KCHFi8tVHaSOAjHBC2T7qV/JTDyKQdxS5QwkhIf6jAWfugvEizPn8tHpqUIbFe
         p1Q4uVdfuEAIOO+SzYuj8p6R5qXcNu8Q9Sqz9sD0Qd0yHLUM3kqw85t6OYigSpZiS5HT
         vkQxsqVr8KPWtMnwtq4FUrdkb/0g+eB1AFhf1SNpLD8uO3OwgSKZLVEHJNU0DKqPev3u
         tTJg==
MIME-Version: 1.0
X-Received: by 10.14.2.196 with SMTP id 44mr5537388eef.25.1358958433497; Wed,
 23 Jan 2013 08:27:13 -0800 (PST)
Date: Wed, 23 Jan 2013 11:27:13 -0500
Message-ID: <CAJ=AQfZzsxsUVOfrREpSQ4f-fz5JCfXraQGVU9g8TtpDfpBOZA@mail.gmail.com>
Subject: NullPointer Exception in MemoryIndex.MemoryIndexReader
From: Ricky Pritchett <ricky.pritchett@gmail.com>
To: java-user@lucene.apache.org
Cc: Jeffrey Chung <chung@alumni.virginia.edu>
Content-Type: multipart/alternative; boundary=047d7b625236b1718c04d3f72a9e
X-Virus-Checked: Checked by ClamAV on apache.org

--047d7b625236b1718c04d3f72a9e
Content-Type: text/plain; charset=ISO-8859-1

Greetings,

Version: Lucene 4.1

I'm currently a user of the MemoryIndex, and I've noticed that after
Lucene-4515 patch, I experience NullPointer Exceptions when searching on an
index with a query that has a field that's not in the index.

The NullPointer is thrown at line 1141:

public DocValues normValues(String field) {
      if (fieldInfos.get(field).omitsNorms())  <---- //If fieldInfos
doesn't contain the field then a NullPointer is thrown.
        return null;

Is this expected behavior?

Thanks,

Ricky



--
"If you can make one heap of all your winnings, And risk it on one turn of
pitch-and-toss, And lose, and start again at your beginnings, And never
breathe a word about your loss"
--  Rudyard Kipling

--047d7b625236b1718c04d3f72a9e--

From java-user-return-54808-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jan 23 17:00:02 2013
Return-Path: <java-user-return-54808-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 939B2EB75
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 23 Jan 2013 17:00:02 +0000 (UTC)
Received: (qmail 28966 invoked by uid 500); 23 Jan 2013 17:00:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28797 invoked by uid 500); 23 Jan 2013 17:00:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28788 invoked by uid 99); 23 Jan 2013 17:00:00 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Jan 2013 17:00:00 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.210.43] (HELO mail-da0-f43.google.com) (209.85.210.43)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Jan 2013 16:59:54 +0000
Received: by mail-da0-f43.google.com with SMTP id u36so3867074dak.2
        for <java-user@lucene.apache.org>; Wed, 23 Jan 2013 08:59:34 -0800 (PST)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=x-received:mime-version:in-reply-to:references:from:date:message-id
         :subject:to:cc:content-type:x-gm-message-state;
        bh=QsJfxzATnmN8ea26L0PDYxKn51voj+ZVnFDdkIYw2Bw=;
        b=dzVYGE6HtmVi/+iRWEvu9QrE+Bh1v9YRanK/64f+hwH6uWTCm2nbzgLkAuvPPnYSN6
         96tuQq1f/wobzUVgSr451DYDWZM+tr15RyyTs8Ot8pSOwAR4euVXk4ZAN9asz33fcTsr
         05IO0iPQyOKL1PWkEsSFvTSijzR31Z8SvWyhXjCo/nYKwBeuP3RTfqNmeacDsIwu0IBj
         XMZFUEqie8TMrzS/hqPsV9OlWMIkNRXKTycEO2LsYrrIWm0s6IXmfSQYVkUOBUsQ7FTp
         oND+v+sKYtzasJaZeryyFGKne7SFozZIDI2rIdzALWwQed6fpbsywcjEgvb4OlQVeYT3
         1ARQ==
X-Received: by 10.69.1.65 with SMTP id be1mr5376844pbd.66.1358960374343; Wed,
 23 Jan 2013 08:59:34 -0800 (PST)
MIME-Version: 1.0
Received: by 10.68.154.73 with HTTP; Wed, 23 Jan 2013 08:59:13 -0800 (PST)
In-Reply-To: <CAJ=AQfZzsxsUVOfrREpSQ4f-fz5JCfXraQGVU9g8TtpDfpBOZA@mail.gmail.com>
References: <CAJ=AQfZzsxsUVOfrREpSQ4f-fz5JCfXraQGVU9g8TtpDfpBOZA@mail.gmail.com>
From: Michael McCandless <lucene@mikemccandless.com>
Date: Wed, 23 Jan 2013 11:59:13 -0500
Message-ID: <CAL8PwkZ6wTQQPkzNaqhANyPOPjV2qsV9RddDVbuJMQ8SO7KY_A@mail.gmail.com>
Subject: Re: NullPointer Exception in MemoryIndex.MemoryIndexReader
To: java-user@lucene.apache.org
Cc: Jeffrey Chung <chung@alumni.virginia.edu>, ricky.pritchett@gmail.com
Content-Type: text/plain; charset=ISO-8859-1
X-Gm-Message-State: ALoCoQmiJtkR1maQk92twyWFXpnhMjT4hAMQknku9kDFN0v+1qHqhzbwsf9jH8LKVQVbVd2y6qTr
X-Virus-Checked: Checked by ClamAV on apache.org

This is not expected: the method should return null if the field isn't
in the FieldInfos.

Can you open an issue?  Thanks!

Mike McCandless

http://blog.mikemccandless.com

On Wed, Jan 23, 2013 at 11:27 AM, Ricky Pritchett
<ricky.pritchett@gmail.com> wrote:
> Greetings,
>
> Version: Lucene 4.1
>
> I'm currently a user of the MemoryIndex, and I've noticed that after
> Lucene-4515 patch, I experience NullPointer Exceptions when searching on an
> index with a query that has a field that's not in the index.
>
> The NullPointer is thrown at line 1141:
>
> public DocValues normValues(String field) {
>       if (fieldInfos.get(field).omitsNorms())  <---- //If fieldInfos
> doesn't contain the field then a NullPointer is thrown.
>         return null;
>
> Is this expected behavior?
>
> Thanks,
>
> Ricky
>
>
>
> --
> "If you can make one heap of all your winnings, And risk it on one turn of
> pitch-and-toss, And lose, and start again at your beginnings, And never
> breathe a word about your loss"
> --  Rudyard Kipling

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54809-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jan 23 20:05:02 2013
Return-Path: <java-user-return-54809-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id D2A33EEE6
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 23 Jan 2013 20:05:01 +0000 (UTC)
Received: (qmail 79356 invoked by uid 500); 23 Jan 2013 20:04:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79298 invoked by uid 500); 23 Jan 2013 20:04:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79283 invoked by uid 99); 23 Jan 2013 20:04:59 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Jan 2013 20:04:59 +0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,SPF_NEUTRAL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: 216.139.236.26 is neither permitted nor denied by domain of saisantoshi76@gmail.com)
Received: from [216.139.236.26] (HELO sam.nabble.com) (216.139.236.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Jan 2013 20:04:54 +0000
Received: from ben.nabble.com ([192.168.236.152])
	by sam.nabble.com with esmtp (Exim 4.72)
	(envelope-from <saisantoshi76@gmail.com>)
	id 1Ty6Yj-00051Z-Ow
	for java-user@lucene.apache.org; Wed, 23 Jan 2013 12:04:33 -0800
Date: Wed, 23 Jan 2013 12:04:33 -0800 (PST)
From: saisantoshi <saisantoshi76@gmail.com>
To: java-user@lucene.apache.org
Message-ID: <1358971473762-4035732.post@n3.nabble.com>
Subject: IndexWriter: IndexWriter.MaxFieldLength.LIMITED &&
 setMaxFieldLength(MAX_FIELD_SCAN_LENGTH)
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

In 2.4, we are creating the IndexWriter in the following below way:

 IndexWriter indexWriter = new IndexWriter(directory, stAnalyzer, create,
IndexWriter.MaxFieldLength.LIMITED);
 indexWriter.setMaxFieldLength(MAX_FIELD_SCAN_LENGTH);

Moving to 4.0, I am not sure 

IndexWriterConfig indexWriterConfig = new
IndexWriterConfig(Version.LUCENE_40,analyzer);
indexWriterConfig.setOpenMode(IndexWriterConfig.OpenMode.CREATE);
IndexWriter indexWriter = new IndexWriter(directory, indexWriterConfig); 

1.
Not sure about the following below:
*IndexWriter.MaxFieldLength.LIMITED*   --  // IndexWriter config does not
have any method to set the MaxFieldLength.LIMITED

2.
*indexWriter.setMaxFieldLength(MAX_FIELD_SCAN_LENGTH)*;  // this method does
not exists


Could someone please suggest a way of what parameters to use in the newer
API?

Thanks,
Sai.





--
View this message in context: http://lucene.472066.n3.nabble.com/IndexWriter-IndexWriter-MaxFieldLength-LIMITED-setMaxFieldLength-MAX-FIELD-SCAN-LENGTH-tp4035732.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54810-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jan 23 20:17:39 2013
Return-Path: <java-user-return-54810-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id C122AEF83
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 23 Jan 2013 20:17:39 +0000 (UTC)
Received: (qmail 35490 invoked by uid 500); 23 Jan 2013 20:17:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35433 invoked by uid 500); 23 Jan 2013 20:17:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35424 invoked by uid 99); 23 Jan 2013 20:17:37 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Jan 2013 20:17:37 +0000
X-ASF-Spam-Status: No, hits=0.6 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ian.lea@gmail.com designates 74.125.82.44 as permitted sender)
Received: from [74.125.82.44] (HELO mail-wg0-f44.google.com) (74.125.82.44)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Jan 2013 20:17:31 +0000
Received: by mail-wg0-f44.google.com with SMTP id dr12so5520693wgb.35
        for <java-user@lucene.apache.org>; Wed, 23 Jan 2013 12:17:11 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=x-received:mime-version:in-reply-to:references:from:date:message-id
         :subject:to:content-type;
        bh=OEr8+kvPe8iNRzLHTPquSjUmTaSw19o4bQRajxx3zr8=;
        b=B/oqusatc2qxSV0S1/ZwKNgmYhWeGhxmvjRkaqAvqcWTFJEhFczSTI3H0J0cj6Ygha
         gZX+9qdqIT8p1gnm3w9uWtrEoBuU4Rnkmm6daLpUxMHFeMiM6x2cYzNO95bHr7IDqSgq
         tbzUYmogafi0xce/SghCvd9/57YpMHBcvzldt+Kopp5gPbCKWBaqxKIs0jIV9xGS3h4e
         cTohtbqtLoT5UhGsLZV+tg8hPCYw6OrSuh7pAmccV16nOhkffpea6i+UQHbUlDhbj1VU
         vSm5f8yStOENxajC9M7pViuwmwjfN8oAd+0LxFEagMFWFMBCOWahK/b5lHda1Wr+v61e
         XRmg==
X-Received: by 10.180.99.72 with SMTP id eo8mr29613231wib.34.1358972230961;
 Wed, 23 Jan 2013 12:17:10 -0800 (PST)
MIME-Version: 1.0
Received: by 10.194.57.11 with HTTP; Wed, 23 Jan 2013 12:16:50 -0800 (PST)
In-Reply-To: <1358971473762-4035732.post@n3.nabble.com>
References: <1358971473762-4035732.post@n3.nabble.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Wed, 23 Jan 2013 20:16:50 +0000
Message-ID: <CAEY5pxUfU3QE12ybY36uucjXzfN3=+044Y3T=vkg+DB1oMPhDg@mail.gmail.com>
Subject: Re: IndexWriter: IndexWriter.MaxFieldLength.LIMITED && setMaxFieldLength(MAX_FIELD_SCAN_LENGTH)
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

Read the change log: Changes.html.  It links to
https://issues.apache.org/jira/browse/LUCENE-2295


--
Ian.


On Wed, Jan 23, 2013 at 8:04 PM, saisantoshi <saisantoshi76@gmail.com> wrote:
> In 2.4, we are creating the IndexWriter in the following below way:
>
>  IndexWriter indexWriter = new IndexWriter(directory, stAnalyzer, create,
> IndexWriter.MaxFieldLength.LIMITED);
>  indexWriter.setMaxFieldLength(MAX_FIELD_SCAN_LENGTH);
>
> Moving to 4.0, I am not sure
>
> IndexWriterConfig indexWriterConfig = new
> IndexWriterConfig(Version.LUCENE_40,analyzer);
> indexWriterConfig.setOpenMode(IndexWriterConfig.OpenMode.CREATE);
> IndexWriter indexWriter = new IndexWriter(directory, indexWriterConfig);
>
> 1.
> Not sure about the following below:
> *IndexWriter.MaxFieldLength.LIMITED*   --  // IndexWriter config does not
> have any method to set the MaxFieldLength.LIMITED
>
> 2.
> *indexWriter.setMaxFieldLength(MAX_FIELD_SCAN_LENGTH)*;  // this method does
> not exists
>
>
> Could someone please suggest a way of what parameters to use in the newer
> API?
>
> Thanks,
> Sai.
>
>
>
>
>
> --
> View this message in context: http://lucene.472066.n3.nabble.com/IndexWriter-IndexWriter-MaxFieldLength-LIMITED-setMaxFieldLength-MAX-FIELD-SCAN-LENGTH-tp4035732.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54811-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jan 23 20:29:24 2013
Return-Path: <java-user-return-54811-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id CD549EC66
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 23 Jan 2013 20:29:24 +0000 (UTC)
Received: (qmail 77007 invoked by uid 500); 23 Jan 2013 20:29:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76969 invoked by uid 500); 23 Jan 2013 20:29:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76961 invoked by uid 99); 23 Jan 2013 20:29:22 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Jan 2013 20:29:22 +0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,SPF_NEUTRAL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: 216.139.236.26 is neither permitted nor denied by domain of saisantoshi76@gmail.com)
Received: from [216.139.236.26] (HELO sam.nabble.com) (216.139.236.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Jan 2013 20:29:17 +0000
Received: from ben.nabble.com ([192.168.236.152])
	by sam.nabble.com with esmtp (Exim 4.72)
	(envelope-from <saisantoshi76@gmail.com>)
	id 1Ty6wK-0006V5-To
	for java-user@lucene.apache.org; Wed, 23 Jan 2013 12:28:56 -0800
Date: Wed, 23 Jan 2013 12:28:56 -0800 (PST)
From: saisantoshi <saisantoshi76@gmail.com>
To: java-user@lucene.apache.org
Message-ID: <1358972936915-4035740.post@n3.nabble.com>
In-Reply-To: <CAEY5pxUfU3QE12ybY36uucjXzfN3=+044Y3T=vkg+DB1oMPhDg@mail.gmail.com>
References: <1358971473762-4035732.post@n3.nabble.com> <CAEY5pxUfU3QE12ybY36uucjXzfN3=+044Y3T=vkg+DB1oMPhDg@mail.gmail.com>
Subject: Re: IndexWriter: IndexWriter.MaxFieldLength.LIMITED &&
 setMaxFieldLength(MAX_FIELD_SCAN_LENGTH)
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks. I have gone through the change log but its not very clear from the
bug on the usage in the latest versions. I understand that instead of user
supplying the values, its been wrapped in another analyzer. Could you please
let me know how the usage for modifying the fields I mentioned above. Also,
we are using StandardAnalyzer and wanted to stick with it.

The docs are not very clear. it should have at least provided some usage
snippets if deprecated.

IndexWriterConfig indexWriterConfig = new
IndexWriterConfig(Version.LUCENE_40,analyzer);
IndexWriter indexWriter = new IndexWriter(directory, indexWriterConfig)
indexWriterConfig.setOpenMode(IndexWriterConfig.OpenMode.CREATE);

How to add the below two feilds to the indexWriterConfig:

IndexWriter.MaxFieldLength.LIMITED
indexWriter.setMaxFieldLength(MAX_FIELD_SCAN_LENGTH)

/*** 2.4 Construct ***//
IndexWriter indexWriter = new IndexWriter(directory, stAnalyzer,
create,IndexWriter.MaxFieldLength.LIMITED);
indexWriter.setMaxFieldLength(MAX_FIELD_SCAN_LENGTH); 

All I am looking is how can we get the same kind of thing with the newer
API.

Thanks,
Sai.




--
View this message in context: http://lucene.472066.n3.nabble.com/IndexWriter-IndexWriter-MaxFieldLength-LIMITED-setMaxFieldLength-MAX-FIELD-SCAN-LENGTH-tp4035732p4035740.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54812-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jan 23 21:31:52 2013
Return-Path: <java-user-return-54812-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 80F0CEBAA
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 23 Jan 2013 21:31:52 +0000 (UTC)
Received: (qmail 85512 invoked by uid 500); 23 Jan 2013 21:31:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85445 invoked by uid 500); 23 Jan 2013 21:31:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85437 invoked by uid 99); 23 Jan 2013 21:31:50 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Jan 2013 21:31:50 +0000
X-ASF-Spam-Status: No, hits=1.3 required=5.0
	tests=SPF_PASS,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of uwe@thetaphi.de designates 188.138.97.18 as permitted sender)
Received: from [188.138.97.18] (HELO mail.sd-datasolutions.de) (188.138.97.18)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Jan 2013 21:31:43 +0000
Received: from VEGA (71-53.5-85.cust.bluewin.ch [85.5.53.71])
	by mail.sd-datasolutions.de (Postfix) with ESMTPSA id 7FB5214AA008
	for <java-user@lucene.apache.org>; Wed, 23 Jan 2013 21:31:22 +0000 (UTC)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <1358901022051-4035494.post@n3.nabble.com> <004201cdf92c$414d13a0$c3e73ae0$@thetaphi.de> <1358925072101-4035538.post@n3.nabble.com>
In-Reply-To: <1358925072101-4035538.post@n3.nabble.com>
Subject: RE: Are Search Index directories backward comptabile? ( when upgrading to latest lucene version)
Date: Wed, 23 Jan 2013 22:31:23 +0100
Message-ID: <002f01cdf9b0$fe2dd7f0$fa8987d0$@thetaphi.de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="utf-8"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Outlook 14.0
Thread-Index: AQGwPNqOpOfFrXv6RXShCmwcRo50qQIcIhRTAv0FXSWYah76sA==
Content-Language: de
X-Virus-Checked: Checked by ClamAV on apache.org

No, there are only those 2 options.

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de


> -----Original Message-----
> From: saisantoshi [mailto:saisantoshi76@gmail.com]
> Sent: Wednesday, January 23, 2013 8:11 AM
> To: java-user@lucene.apache.org
> Subject: RE: Are Search Index directories backward comptabile? ( when
> upgrading to latest lucene version)
> 
> We are upgrading from 2.4 - 4.0? What are the options here? ( To delete the
> existing index directories and reindex with the upgraded ones).
> 
> We don't want to take any intermediate steps which would cause more work
> again to upgrade to the latest version.
> 
> Thanks,
> Sai.
> 
> 
> 
> --
> View this message in context: http://lucene.472066.n3.nabble.com/Are-
> Search-Index-directories-backward-comptabile-when-upgrading-to-latest-
> lucene-version-tp4035494p4035538.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54813-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jan 23 21:41:30 2013
Return-Path: <java-user-return-54813-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id C2E09EBEA
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 23 Jan 2013 21:41:30 +0000 (UTC)
Received: (qmail 22358 invoked by uid 500); 23 Jan 2013 21:41:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22318 invoked by uid 500); 23 Jan 2013 21:41:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22310 invoked by uid 99); 23 Jan 2013 21:41:28 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Jan 2013 21:41:28 +0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,SPF_NEUTRAL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: 216.139.236.26 is neither permitted nor denied by domain of saisantoshi76@gmail.com)
Received: from [216.139.236.26] (HELO sam.nabble.com) (216.139.236.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Jan 2013 21:41:22 +0000
Received: from ben.nabble.com ([192.168.236.152])
	by sam.nabble.com with esmtp (Exim 4.72)
	(envelope-from <saisantoshi76@gmail.com>)
	id 1Ty845-0002da-Gs
	for java-user@lucene.apache.org; Wed, 23 Jan 2013 13:41:01 -0800
Date: Wed, 23 Jan 2013 13:41:01 -0800 (PST)
From: saisantoshi <saisantoshi76@gmail.com>
To: java-user@lucene.apache.org
Message-ID: <1358977261513-4035763.post@n3.nabble.com>
In-Reply-To: <002f01cdf9b0$fe2dd7f0$fa8987d0$@thetaphi.de>
References: <1358901022051-4035494.post@n3.nabble.com> <004201cdf92c$414d13a0$c3e73ae0$@thetaphi.de> <1358925072101-4035538.post@n3.nabble.com> <002f01cdf9b0$fe2dd7f0$fa8987d0$@thetaphi.de>
Subject: RE: Are Search Index directories backward comptabile? ( when
 upgrading to latest lucene version)
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks. We decided to delete the existing index directories and recreate it
once we upgrade to 4.0 (unless we hit any major api blockers during
compilation, we will prefer to go to 3.6.2 first and then later to 4.0).

Thanks,
Sai.



--
View this message in context: http://lucene.472066.n3.nabble.com/Are-Search-Index-directories-backward-comptabile-when-upgrading-to-latest-lucene-version-tp4035494p4035763.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54814-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jan 23 21:49:48 2013
Return-Path: <java-user-return-54814-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 97F19EC54
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 23 Jan 2013 21:49:48 +0000 (UTC)
Received: (qmail 55155 invoked by uid 500); 23 Jan 2013 21:49:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55087 invoked by uid 500); 23 Jan 2013 21:49:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55079 invoked by uid 99); 23 Jan 2013 21:49:46 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Jan 2013 21:49:46 +0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,SPF_NEUTRAL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: 216.139.236.26 is neither permitted nor denied by domain of saisantoshi76@gmail.com)
Received: from [216.139.236.26] (HELO sam.nabble.com) (216.139.236.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Jan 2013 21:49:41 +0000
Received: from ben.nabble.com ([192.168.236.152])
	by sam.nabble.com with esmtp (Exim 4.72)
	(envelope-from <saisantoshi76@gmail.com>)
	id 1Ty8C8-0003UF-Sl
	for java-user@lucene.apache.org; Wed, 23 Jan 2013 13:49:20 -0800
Date: Wed, 23 Jan 2013 13:49:20 -0800 (PST)
From: saisantoshi <saisantoshi76@gmail.com>
To: java-user@lucene.apache.org
Message-ID: <1358977760883-4035769.post@n3.nabble.com>
Subject: IndexWriter.optimize() is removed in 4.0?
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

There is no optimize() method in 4.0. I looked at the 3.6 docs and it did
mention the following below. Does the following below mean that we no longer
need this method and should not be used anymore. Is there any supplement
method that we need to use as it is deprecated as of version 3.6.0

/*
Deprecated. 
This method has been deprecated, as it is horribly inefficient and very
rarely justified. Lucene's multi-segment search performance has improved
over time, and the default TieredMergePolicy now targets segments with
deletions.
*/

Thanks,
Sai.



--
View this message in context: http://lucene.472066.n3.nabble.com/IndexWriter-optimize-is-removed-in-4-0-tp4035769.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54815-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jan 23 21:58:47 2013
Return-Path: <java-user-return-54815-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 16728ECAD
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 23 Jan 2013 21:58:47 +0000 (UTC)
Received: (qmail 94266 invoked by uid 500); 23 Jan 2013 21:58:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94158 invoked by uid 500); 23 Jan 2013 21:58:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94150 invoked by uid 99); 23 Jan 2013 21:58:44 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Jan 2013 21:58:44 +0000
X-ASF-Spam-Status: No, hits=1.3 required=5.0
	tests=SPF_PASS,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of sarowe@gmail.com designates 209.85.128.175 as permitted sender)
Received: from [209.85.128.175] (HELO mail-ve0-f175.google.com) (209.85.128.175)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Jan 2013 21:58:38 +0000
Received: by mail-ve0-f175.google.com with SMTP id db12so1174792veb.6
        for <java-user@lucene.apache.org>; Wed, 23 Jan 2013 13:58:17 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=x-received:content-type:mime-version:subject:from:in-reply-to:date
         :content-transfer-encoding:message-id:references:to:x-mailer;
        bh=k9TRa+ydyiL5LyMiAzD261pvT6hq6Q6PDjFmpzn4yUw=;
        b=p1j7nVsf44tZaDfubYSdz0I1yw+6bpd5WTPXQiYEj7o4I1GEFkqtNFRb4kpcg4RU9J
         Um/J1KO28stMiVWKRL+VIcNE0mS9Fq90pWtVuKzYBQEdGcAkebN8SwowKt0NZPQCnmu4
         tBGDiemPd1XaWORchD7iFwhPmytW199kXLGMeJ6dZWoG+AcFA48iYYyInSFU2vfYceNg
         CHdEMBDyicG/vKAGfWVMBwyk/F1pM5KByH1X0LIFiMHEWME21V7t11QU1G5Y9cbna7tp
         sIr+EN1oT+NvCMH6W2ue37eFfNJ2KFG9gRVC/1Qwwmv1GUtXlyGk/KHPw3c2/lE3K7l3
         sKcw==
X-Received: by 10.52.19.20 with SMTP id a20mr2898894vde.26.1358978297295;
        Wed, 23 Jan 2013 13:58:17 -0800 (PST)
Received: from [192.168.1.204] (cpe-67-249-104-72.twcny.res.rr.com. [67.249.104.72])
        by mx.google.com with ESMTPS id ko19sm12043294veb.1.2013.01.23.13.58.15
        (version=TLSv1 cipher=ECDHE-RSA-RC4-SHA bits=128/128);
        Wed, 23 Jan 2013 13:58:16 -0800 (PST)
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Mac OS X Mail 6.2 \(1499\))
Subject: Re: IndexWriter.optimize() is removed in 4.0?
From: Steve Rowe <sarowe@gmail.com>
In-Reply-To: <1358977760883-4035769.post@n3.nabble.com>
Date: Wed, 23 Jan 2013 16:58:14 -0500
Content-Transfer-Encoding: quoted-printable
Message-Id: <F613D8AA-13BC-46C1-A2A0-DA8603320303@gmail.com>
References: <1358977760883-4035769.post@n3.nabble.com>
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.1499)
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Sai,

Check out Simon Willnauer's blog post about this: =
<http://www.searchworkings.org/blog/-/blogs/simon-says%3A-optimize-is-bad-=
for-you>

Steve

On Jan 23, 2013, at 4:49 PM, saisantoshi <saisantoshi76@gmail.com> =
wrote:

> There is no optimize() method in 4.0. I looked at the 3.6 docs and it =
did
> mention the following below. Does the following below mean that we no =
longer
> need this method and should not be used anymore. Is there any =
supplement
> method that we need to use as it is deprecated as of version 3.6.0
>=20
> /*
> Deprecated.=20
> This method has been deprecated, as it is horribly inefficient and =
very
> rarely justified. Lucene's multi-segment search performance has =
improved
> over time, and the default TieredMergePolicy now targets segments with
> deletions.
> */
>=20
> Thanks,
> Sai.
>=20
>=20
>=20
> --
> View this message in context: =
http://lucene.472066.n3.nabble.com/IndexWriter-optimize-is-removed-in-4-0-=
tp4035769.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54816-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jan 23 23:19:39 2013
Return-Path: <java-user-return-54816-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id C7AF9EBBF
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 23 Jan 2013 23:19:39 +0000 (UTC)
Received: (qmail 49446 invoked by uid 500); 23 Jan 2013 23:19:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49369 invoked by uid 500); 23 Jan 2013 23:19:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49359 invoked by uid 99); 23 Jan 2013 23:19:37 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Jan 2013 23:19:37 +0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,SPF_NEUTRAL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: 216.139.236.26 is neither permitted nor denied by domain of saisantoshi76@gmail.com)
Received: from [216.139.236.26] (HELO sam.nabble.com) (216.139.236.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Jan 2013 23:19:31 +0000
Received: from ben.nabble.com ([192.168.236.152])
	by sam.nabble.com with esmtp (Exim 4.72)
	(envelope-from <saisantoshi76@gmail.com>)
	id 1Ty9b4-0000gG-LX
	for java-user@lucene.apache.org; Wed, 23 Jan 2013 15:19:10 -0800
Date: Wed, 23 Jan 2013 15:19:10 -0800 (PST)
From: saisantoshi <saisantoshi76@gmail.com>
To: java-user@lucene.apache.org
Message-ID: <1358983150658-4035806.post@n3.nabble.com>
Subject: TopDocCollector vs TopScoreDocCollector (semantics changed in 4.0,
 not backward comptabile)
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Our current search implementation (based on 2.4.0) uses a collector extending
the TopDocCollector class

public class MyHitCollector extends TopDocsCollector {

    private IndexReader indexReader;
    private CustomFilter customFilter;

    public MyHitCollector (IndexReader indexReader, int numberOfHits,
CustomFilter filter) {
    *    super(numberOfHits);*
        this.indexReader = indexReader;
        this.nodeFilter = filter();
    }

    *public void collect(int doc, float score) {*
        try {
            if (score > 0.0f) {
                // do something
                    super.collect(doc, score);
                }
            }
        } catch (Exception e) {
           
        }
    }


//Using the collector
             MyHitCollector collector;
             IndexSearcher searcher= new IndexSearcher(reader);
               try {
                   collector = new MyHitCollector(reader, maximumHits,
filter);
                    searcher.search(query, null, collector);
                } finally {
              
                }

                TopDocs docs = collector.topDocs();


Now in 4.0, the TopDocCollector is removed and the suggested class is to use
TopScoreDocCollector (for faster performance).. I don't see the following
signatures available in the newer class thus breaking the backward
compatibility.

public collect(int doc, float score).   //I think this is no longer there.
 super(numberOfHits)  .  //The constructor for this is also been removed in
4.0.. This used to be in 2.4

This looks to be me backward compatibility is broken and there is no proper
documentation as well.

Could someone suggest any alternative here? Any collector that we can use to
be backward compatible?

Thanks and appreciate your help.

Thanks,
Sai.



--
View this message in context: http://lucene.472066.n3.nabble.com/TopDocCollector-vs-TopScoreDocCollector-semantics-changed-in-4-0-not-backward-comptabile-tp4035806.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54817-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jan 23 23:37:15 2013
Return-Path: <java-user-return-54817-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 887BADDBD
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 23 Jan 2013 23:37:15 +0000 (UTC)
Received: (qmail 12365 invoked by uid 500); 23 Jan 2013 23:37:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12297 invoked by uid 500); 23 Jan 2013 23:37:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12283 invoked by uid 99); 23 Jan 2013 23:37:12 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Jan 2013 23:37:12 +0000
X-ASF-Spam-Status: No, hits=1.3 required=5.0
	tests=SPF_PASS,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of uwe@thetaphi.de designates 188.138.97.18 as permitted sender)
Received: from [188.138.97.18] (HELO mail.sd-datasolutions.de) (188.138.97.18)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Jan 2013 23:37:07 +0000
Received: from VEGA (71-53.5-85.cust.bluewin.ch [85.5.53.71])
	by mail.sd-datasolutions.de (Postfix) with ESMTPSA id 390FA14AA008
	for <java-user@lucene.apache.org>; Wed, 23 Jan 2013 23:36:45 +0000 (UTC)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <1358983150658-4035806.post@n3.nabble.com>
In-Reply-To: <1358983150658-4035806.post@n3.nabble.com>
Subject: RE: TopDocCollector vs TopScoreDocCollector (semantics changed in 4.0, not backward comptabile)
Date: Thu, 24 Jan 2013 00:36:45 +0100
Message-ID: <001101cdf9c2$81b8dc80$852a9580$@thetaphi.de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="utf-8"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Outlook 14.0
Thread-Index: AQK+lbgbBNl/obT9+tRrbDXgEhey3pZ2WULw
Content-Language: de
X-Virus-Checked: Checked by ClamAV on apache.org

This has been changed in Lucene 2.9, its nothing new in Lucene 4.0. Read =
the changes logs of Lucene 2.9/3.0, there is explained what you need to =
do.

Uwe

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de


> -----Original Message-----
> From: saisantoshi [mailto:saisantoshi76@gmail.com]
> Sent: Thursday, January 24, 2013 12:19 AM
> To: java-user@lucene.apache.org
> Subject: TopDocCollector vs TopScoreDocCollector (semantics changed in =
4.0,
> not backward comptabile)
>=20
> Our current search implementation (based on 2.4.0) uses a collector
> extending the TopDocCollector class
>=20
> public class MyHitCollector extends TopDocsCollector {
>=20
>     private IndexReader indexReader;
>     private CustomFilter customFilter;
>=20
>     public MyHitCollector (IndexReader indexReader, int numberOfHits,
> CustomFilter filter) {
>     *    super(numberOfHits);*
>         this.indexReader =3D indexReader;
>         this.nodeFilter =3D filter();
>     }
>=20
>     *public void collect(int doc, float score) {*
>         try {
>             if (score > 0.0f) {
>                 // do something
>                     super.collect(doc, score);
>                 }
>             }
>         } catch (Exception e) {
>=20
>         }
>     }
>=20
>=20
> //Using the collector
>              MyHitCollector collector;
>              IndexSearcher searcher=3D new IndexSearcher(reader);
>                try {
>                    collector =3D new MyHitCollector(reader, =
maximumHits, filter);
>                     searcher.search(query, null, collector);
>                 } finally {
>=20
>                 }
>=20
>                 TopDocs docs =3D collector.topDocs();
>=20
>=20
> Now in 4.0, the TopDocCollector is removed and the suggested class is =
to use
> TopScoreDocCollector (for faster performance).. I don't see the =
following
> signatures available in the newer class thus breaking the backward
> compatibility.
>=20
> public collect(int doc, float score).   //I think this is no longer =
there.
>  super(numberOfHits)  .  //The constructor for this is also been =
removed in
> 4.0.. This used to be in 2.4
>=20
> This looks to be me backward compatibility is broken and there is no =
proper
> documentation as well.
>=20
> Could someone suggest any alternative here? Any collector that we can =
use
> to be backward compatible?
>=20
> Thanks and appreciate your help.
>=20
> Thanks,
> Sai.
>=20
>=20
>=20
> --
> View this message in context:
> http://lucene.472066.n3.nabble.com/TopDocCollector-vs-
> TopScoreDocCollector-semantics-changed-in-4-0-not-backward-comptabile-
> tp4035806.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54818-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jan 24 00:04:37 2013
Return-Path: <java-user-return-54818-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id C6669DED2
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 24 Jan 2013 00:04:37 +0000 (UTC)
Received: (qmail 81037 invoked by uid 500); 24 Jan 2013 00:04:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80996 invoked by uid 500); 24 Jan 2013 00:04:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80987 invoked by uid 99); 24 Jan 2013 00:04:35 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Jan 2013 00:04:35 +0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,SPF_NEUTRAL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: 216.139.236.26 is neither permitted nor denied by domain of saisantoshi76@gmail.com)
Received: from [216.139.236.26] (HELO sam.nabble.com) (216.139.236.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Jan 2013 00:04:30 +0000
Received: from ben.nabble.com ([192.168.236.152])
	by sam.nabble.com with esmtp (Exim 4.72)
	(envelope-from <saisantoshi76@gmail.com>)
	id 1TyAIb-0003tY-LQ
	for java-user@lucene.apache.org; Wed, 23 Jan 2013 16:04:09 -0800
Date: Wed, 23 Jan 2013 16:04:09 -0800 (PST)
From: saisantoshi <saisantoshi76@gmail.com>
To: java-user@lucene.apache.org
Message-ID: <1358985849653-4035815.post@n3.nabble.com>
In-Reply-To: <001101cdf9c2$81b8dc80$852a9580$@thetaphi.de>
References: <1358983150658-4035806.post@n3.nabble.com> <001101cdf9c2$81b8dc80$852a9580$@thetaphi.de>
Subject: RE: TopDocCollector vs TopScoreDocCollector (semantics changed in
 4.0, not backward comptabile)
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

I am sorry but I am confused looking at the change logs and the enhancements
done.  Since we are jumping from 2.4 - 4.0. Could you please point me to any
example code that extends one of the new collectors.. that would help a lot
or it would be great if you could give some pointers on how we can modify
our existing collector.

Thanks in advance and really appreciate your help here... Any example code
is also fine...



--
View this message in context: http://lucene.472066.n3.nabble.com/TopDocCollector-vs-TopScoreDocCollector-semantics-changed-in-4-0-not-backward-comptabile-tp4035806p4035815.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54819-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jan 24 00:43:02 2013
Return-Path: <java-user-return-54819-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 77ECEECE8
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 24 Jan 2013 00:43:02 +0000 (UTC)
Received: (qmail 74542 invoked by uid 500); 24 Jan 2013 00:43:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74495 invoked by uid 500); 24 Jan 2013 00:43:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74486 invoked by uid 99); 24 Jan 2013 00:43:00 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Jan 2013 00:43:00 +0000
X-ASF-Spam-Status: No, hits=0.6 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of dotsid@gmail.com designates 209.85.217.172 as permitted sender)
Received: from [209.85.217.172] (HELO mail-lb0-f172.google.com) (209.85.217.172)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Jan 2013 00:42:54 +0000
Received: by mail-lb0-f172.google.com with SMTP id n8so4876287lbj.3
        for <java-user@lucene.apache.org>; Wed, 23 Jan 2013 16:42:33 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=x-received:content-type:mime-version:subject:from:in-reply-to:date
         :content-transfer-encoding:message-id:references:to:x-mailer;
        bh=/vT4T8goBR9GZ5ml/MTme19WK8HiZA2O01dQx8IS07A=;
        b=OaOYRE6mqObM1MfwHS7esaSC+vHLruTtvGr4WEwl+EoTttr/gqxsmUOpA6j07zBIuO
         0IKbSwvXsh6ezUWVGyIiZJbZqiPrLlsy6WUyAQZC7nyeWv4Gi5Z1/tu2MA6DKUKjCW9Y
         WKzAsTDRZsFhNwWpN+n39nx/aeQIC36O2YRE2Vu9PU2e2exQdpbY7saPYyNyZA13PQbs
         T+2R+tuNo4m7uRPcEOo9XNpkub1bmIerYKxJs4QF94x+WTqsUGAEeS5nbByg1QRKts82
         IzLmGhd/+49QQXwHwYgKUpwOQxAdTaO61szlMWsn+M8g/OAWJkStgWo/XqTk0ILmcANg
         0R5g==
X-Received: by 10.152.105.103 with SMTP id gl7mr69400lab.41.1358988152878;
        Wed, 23 Jan 2013 16:42:32 -0800 (PST)
Received: from [172.16.31.105] (gw.farpost.ru. [80.92.161.1])
        by mx.google.com with ESMTPS id gu8sm2594459lab.6.2013.01.23.16.42.28
        (version=TLSv1 cipher=ECDHE-RSA-RC4-SHA bits=128/128);
        Wed, 23 Jan 2013 16:42:30 -0800 (PST)
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Mac OS X Mail 6.2 \(1499\))
Subject: Re: IndexWriter.optimize() is removed in 4.0?
From: Denis Bazhenov <dotsid@gmail.com>
In-Reply-To: <F613D8AA-13BC-46C1-A2A0-DA8603320303@gmail.com>
Date: Thu, 24 Jan 2013 11:42:24 +1100
Content-Transfer-Encoding: quoted-printable
Message-Id: <731DA2E1-D55F-4E8B-97F5-848D15330262@gmail.com>
References: <1358977760883-4035769.post@n3.nabble.com> <F613D8AA-13BC-46C1-A2A0-DA8603320303@gmail.com>
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.1499)
X-Virus-Checked: Checked by ClamAV on apache.org

All the given reasons applies to some systems but not to all of them. =
But distributed systems (with index being built on dedicated machine) =
with index warm up on index reopen can successfully mitigate both IO and =
cold-cache overhead.

On Jan 24, 2013, at 8:58 AM, Steve Rowe <sarowe@gmail.com> wrote:

> Hi Sai,
>=20
> Check out Simon Willnauer's blog post about this: =
<http://www.searchworkings.org/blog/-/blogs/simon-says%3A-optimize-is-bad-=
for-you>
>=20
> Steve
>=20
> On Jan 23, 2013, at 4:49 PM, saisantoshi <saisantoshi76@gmail.com> =
wrote:
>=20
>> There is no optimize() method in 4.0. I looked at the 3.6 docs and it =
did
>> mention the following below. Does the following below mean that we no =
longer
>> need this method and should not be used anymore. Is there any =
supplement
>> method that we need to use as it is deprecated as of version 3.6.0
>>=20
>> /*
>> Deprecated.=20
>> This method has been deprecated, as it is horribly inefficient and =
very
>> rarely justified. Lucene's multi-segment search performance has =
improved
>> over time, and the default TieredMergePolicy now targets segments =
with
>> deletions.
>> */
>>=20
>> Thanks,
>> Sai.
>>=20
>>=20
>>=20
>> --
>> View this message in context: =
http://lucene.472066.n3.nabble.com/IndexWriter-optimize-is-removed-in-4-0-=
tp4035769.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>=20
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>=20
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20

---
Denis Bazhenov <dotsid@gmail.com>






---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54820-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jan 24 05:33:50 2013
Return-Path: <java-user-return-54820-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 0EEC3E3AA
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 24 Jan 2013 05:33:50 +0000 (UTC)
Received: (qmail 51343 invoked by uid 500); 24 Jan 2013 05:33:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50911 invoked by uid 500); 24 Jan 2013 05:33:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50857 invoked by uid 99); 24 Jan 2013 05:33:45 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Jan 2013 05:33:45 +0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,SPF_NEUTRAL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: 216.139.236.26 is neither permitted nor denied by domain of saisantoshi76@gmail.com)
Received: from [216.139.236.26] (HELO sam.nabble.com) (216.139.236.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Jan 2013 05:33:40 +0000
Received: from ben.nabble.com ([192.168.236.152])
	by sam.nabble.com with esmtp (Exim 4.72)
	(envelope-from <saisantoshi76@gmail.com>)
	id 1TyFR9-00065D-QJ
	for java-user@lucene.apache.org; Wed, 23 Jan 2013 21:33:19 -0800
Date: Wed, 23 Jan 2013 21:33:19 -0800 (PST)
From: saisantoshi <saisantoshi76@gmail.com>
To: java-user@lucene.apache.org
Message-ID: <1359005598802-4035861.post@n3.nabble.com>
Subject: Extending TopScoreDocCollector to write a custom collector
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

I would like to write a custom collector ( similar to the one which is inside
the source of TopScoreDocCollector  like InOrderTopScoreDocCollector). The
reason for extending this is because InOrderTopScoreDocCollector and 
OutOfOrderTopScoreDocCollector are private to the class and I really wanted
to override the collect(int doc) method to have some custom logic
incorporated. Could someone please let me know if this approach would work
fine? or does have any issues?

Here is what I am thinking:

public class MyCollector extends TopScoreDocCollector {
    public MyCollector (int numHits) {
      super(numHits);
    }
     
    @Override
    public void collect(int doc) throws IOException {
      float score = scorer.score();
       
       // Add a check here
      if(score < 0.0f) {
          return;
       }
      
      // remaining code

    }
     
    @Override
    public boolean acceptsDocsOutOfOrder() {
      return true;
    }
  }
 



--
View this message in context: http://lucene.472066.n3.nabble.com/Extending-TopScoreDocCollector-to-write-a-custom-collector-tp4035861.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54821-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jan 24 07:09:21 2013
Return-Path: <java-user-return-54821-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id E8386E299
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 24 Jan 2013 07:09:20 +0000 (UTC)
Received: (qmail 67870 invoked by uid 500); 24 Jan 2013 07:09:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67658 invoked by uid 500); 24 Jan 2013 07:09:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67636 invoked by uid 99); 24 Jan 2013 07:09:17 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Jan 2013 07:09:17 +0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,SPF_NEUTRAL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: 216.139.236.26 is neither permitted nor denied by domain of saisantoshi76@gmail.com)
Received: from [216.139.236.26] (HELO sam.nabble.com) (216.139.236.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Jan 2013 07:09:12 +0000
Received: from ben.nabble.com ([192.168.236.152])
	by sam.nabble.com with esmtp (Exim 4.72)
	(envelope-from <saisantoshi76@gmail.com>)
	id 1TyGva-0003QX-9x
	for java-user@lucene.apache.org; Wed, 23 Jan 2013 23:08:50 -0800
Date: Wed, 23 Jan 2013 23:08:50 -0800 (PST)
From: saisantoshi <saisantoshi76@gmail.com>
To: java-user@lucene.apache.org
Message-ID: <1359011330300-4035869.post@n3.nabble.com>
In-Reply-To: <1359005598802-4035861.post@n3.nabble.com>
References: <1359005598802-4035861.post@n3.nabble.com>
Subject: Re: Extending TopScoreDocCollector to write a custom collector
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Here is the way I implemented a collector class. Appreciate if you could let
me know of any issues.. 

public class MyCollector extends PositiveScoresOnlyCollector  {

    private IndexReader indexReader;
      
   
    public MyCollector (IndexReader indexReader,PositiveScoresOnlyCollector
topScore) {
        super(topScore); 
        this.indexReader = indexReader;
    }

    @Override
    public void collect(int doc) {
        try {
               //Custom Logic
                    super.collect(doc);
           }
            
        } catch (Exception e) {
         
        }
    }



//Usage:

MyCollector collector;
                TopScoreDocCollector topScore =
TopScoreDocCollector.create(hits, true);
                IndexSearcher searcher = new IndexSearcher(reader);
                try {
                    collector = new MyCollector(indexReader, new
PositiveScoresOnlyCollector(topScore));
                    searcher.search(query, (Filter) null, collector);
                } finally {
                 
                }
    
 TopDocs hitDocs = topScore.topDocs();



--
View this message in context: http://lucene.472066.n3.nabble.com/Extending-TopScoreDocCollector-to-write-a-custom-collector-tp4035861p4035869.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54822-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jan 24 07:11:26 2013
Return-Path: <java-user-return-54822-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id B7226E2AA
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 24 Jan 2013 07:11:26 +0000 (UTC)
Received: (qmail 78368 invoked by uid 500); 24 Jan 2013 07:11:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78265 invoked by uid 500); 24 Jan 2013 07:11:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78223 invoked by uid 99); 24 Jan 2013 07:11:23 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Jan 2013 07:11:23 +0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,SPF_NEUTRAL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: 216.139.236.26 is neither permitted nor denied by domain of saisantoshi76@gmail.com)
Received: from [216.139.236.26] (HELO sam.nabble.com) (216.139.236.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Jan 2013 07:11:17 +0000
Received: from ben.nabble.com ([192.168.236.152])
	by sam.nabble.com with esmtp (Exim 4.72)
	(envelope-from <saisantoshi76@gmail.com>)
	id 1TyGxc-0003XP-Hl
	for java-user@lucene.apache.org; Wed, 23 Jan 2013 23:10:56 -0800
Date: Wed, 23 Jan 2013 23:10:56 -0800 (PST)
From: saisantoshi <saisantoshi76@gmail.com>
To: java-user@lucene.apache.org
Message-ID: <1359011456523-4035870.post@n3.nabble.com>
In-Reply-To: <001101cdf9c2$81b8dc80$852a9580$@thetaphi.de>
References: <1358983150658-4035806.post@n3.nabble.com> <001101cdf9c2$81b8dc80$852a9580$@thetaphi.de>
Subject: RE: TopDocCollector vs TopScoreDocCollector (semantics changed in
 4.0, not backward comptabile)
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Here is the way I implemented a collector class. Appreciate if you could let
me know of any issues.. 

public class MyCollector extends PositiveScoresOnlyCollector  {

    private IndexReader indexReader;
      
   
    public MyCollector (IndexReader indexReader,PositiveScoresOnlyCollector
topScore) {
        super(topScore); 
        this.indexReader = indexReader;
    }

    @Override
    public void collect(int doc) {
        try {
               //Custom Logic
                    super.collect(doc);
           }
            
        } catch (Exception e) {
         
        }
    }



//Usage:

MyCollector collector;
                TopScoreDocCollector topScore =
TopScoreDocCollector.create(hits, true);
                IndexSearcher searcher = new IndexSearcher(reader);
                try {
                    collector = new MyCollector(indexReader, new
PositiveScoresOnlyCollector(topScore));
                    searcher.search(query, (Filter) null, collector);
                } finally {
                 
                }
    



--
View this message in context: http://lucene.472066.n3.nabble.com/TopDocCollector-vs-TopScoreDocCollector-semantics-changed-in-4-0-not-backward-comptabile-tp4035806p4035870.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54823-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jan 24 08:30:53 2013
Return-Path: <java-user-return-54823-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id BA53BEE27
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 24 Jan 2013 08:30:53 +0000 (UTC)
Received: (qmail 3722 invoked by uid 500); 24 Jan 2013 08:30:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3573 invoked by uid 500); 24 Jan 2013 08:30:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3464 invoked by uid 99); 24 Jan 2013 08:30:50 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Jan 2013 08:30:50 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of belunto@googlemail.com designates 209.85.216.43 as permitted sender)
Received: from [209.85.216.43] (HELO mail-qa0-f43.google.com) (209.85.216.43)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Jan 2013 08:30:45 +0000
Received: by mail-qa0-f43.google.com with SMTP id cr7so178224qab.2
        for <java-user@lucene.apache.org>; Thu, 24 Jan 2013 00:30:24 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlemail.com; s=20120113;
        h=mime-version:x-received:date:message-id:subject:from:to
         :content-type;
        bh=O66GXXs/gsl398TNk7G5LxOjC/O5jNodTkQ29MlS6ms=;
        b=HAWqUoMzHlvV/lRxJZrnpV65In6Jxf66EqQ2MPICYZuXjfopmrSnZe6FBdgewHpzyG
         hjfQLgcLA2NaBJuLwO3BfVPwF5sPvbsc4mQk101EZDQHxwM18YzRQbWJB5oUkmdHfw4k
         tNyD7ESGbAw29orID0F4yixM/ypHSnho+SNqDfiul3aP/m5sci6aYiUQ0s6eMCCOGPnE
         4G7f4CursspnYRlXxsqDcEgIdibrTzqyY2lLdVjzGswkJUT/72vLbZcdVJv8wd0IVnSk
         qJOuE2Ux+VwE54vRo0/+tgEzVjIoj7m6vZCXnhODvSYQL0mQKSU0iqHzJ8aduWJJIOOU
         6SZA==
MIME-Version: 1.0
X-Received: by 10.224.96.4 with SMTP id f4mr1092996qan.79.1359016224383; Thu,
 24 Jan 2013 00:30:24 -0800 (PST)
Received: by 10.49.11.228 with HTTP; Thu, 24 Jan 2013 00:30:24 -0800 (PST)
Date: Thu, 24 Jan 2013 09:30:24 +0100
Message-ID: <CAKY7MkkU897fXSpWfzMf467mFH74-bqya-c+H6mJ+aWnBau=8A@mail.gmail.com>
Subject: StoredFieldsFormat / documentation
From: =?UTF-8?Q?Bernd_M=C3=BCller?= <belunto@googlemail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
X-Virus-Checked: Checked by ClamAV on apache.org

Hello,

In the lucene 4.1 release, there was introduced a compression for
stored fields as described here:
https://issues.apache.org/jira/browse/LUCENE-4226

In the java-docs, I don't really find any documentation about the
application of StoredFieldsFormat and CompressingStoredFieldsFormat.

Where can I apply the field compression and provide parameters for the
compression level?

The documentation about the 4.0 and 4.1 releases with examples about
the changes aren't well documented. The wiki seems a little bit
outdated. For lucene 2 and 3, I have read the Manning-Series Lucene in
Action that doesn't have any successor so far for the lucene 4
release.

Does there exist any further documentation, especially with examples
for the new releases?

Regards,

  Bernd

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54824-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jan 24 09:13:57 2013
Return-Path: <java-user-return-54824-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 5CDFCEF69
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 24 Jan 2013 09:13:57 +0000 (UTC)
Received: (qmail 26571 invoked by uid 500); 24 Jan 2013 09:13:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26361 invoked by uid 500); 24 Jan 2013 09:13:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26325 invoked by uid 99); 24 Jan 2013 09:13:53 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Jan 2013 09:13:53 +0000
X-ASF-Spam-Status: No, hits=1.7 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of zhoucheng2008@gmail.com designates 209.85.212.54 as permitted sender)
Received: from [209.85.212.54] (HELO mail-vb0-f54.google.com) (209.85.212.54)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Jan 2013 09:13:46 +0000
Received: by mail-vb0-f54.google.com with SMTP id l1so2299284vba.13
        for <java-user@lucene.apache.org>; Thu, 24 Jan 2013 01:13:25 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:x-received:in-reply-to:references:date:message-id
         :subject:from:to:content-type;
        bh=aW7FG5QdjXdkTdKXgaXVNg/oxNHfu+a3rmPUiFYMJjs=;
        b=BrSug8xn1WkH2JbtWQKdG2MTBOLo4CnLhGBq/6Foq1t6ydEs3doGWo1gBGbbbhJDDB
         H81zf12Yo2AnBxPc+y349/Frq9ftax4xwPus+EDlvhmxCXY9MTE6QnoMpHy8m2X/JjjG
         qpn6kKX7d/udlN/MCKgAkUleJJnLMpbYP5rEGnoO/ZKGITu3qDtabKkeSWBQ/iNqOMuv
         Pcpmn+ThN4OvhSb6E9+VRLJMlEfzjR1C+FyDRrTbLiUlI+g1d+UhM8YbpyUkuCCjZjD6
         xWb+TRhsFxaCSSSN6X1XAtpgUUI/Z0f11E5Z3DPEGrczI7adYWqtMfBemwJgNvm01wdm
         eYUg==
MIME-Version: 1.0
X-Received: by 10.220.149.81 with SMTP id s17mr1177985vcv.31.1359018805695;
 Thu, 24 Jan 2013 01:13:25 -0800 (PST)
Received: by 10.58.76.8 with HTTP; Thu, 24 Jan 2013 01:13:25 -0800 (PST)
In-Reply-To: <CAL8PwkYddktWPpYpLtb2eRVO9+-AV_+23jfsG5X-RAuwSCv+gw@mail.gmail.com>
References: <CA+huq0BREzsjFotc4APRo9a2gApYuX4G-2PaTuEJEQOwNY5ibg@mail.gmail.com>
	<CAL8PwkYddktWPpYpLtb2eRVO9+-AV_+23jfsG5X-RAuwSCv+gw@mail.gmail.com>
Date: Thu, 24 Jan 2013 17:13:25 +0800
Message-ID: <CA+huq0BNub8fZ3T7AELKadFOfiYJLEhAaj+pupV6nGNwzUv75Q@mail.gmail.com>
Subject: Re: IndexReader.open and CorruptIndexException
From: Cheng <zhoucheng2008@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=f46d043c07ac2814fa04d40539c8
X-Virus-Checked: Checked by ClamAV on apache.org

--f46d043c07ac2814fa04d40539c8
Content-Type: text/plain; charset=ISO-8859-1

Here is the log:

Jan 24, 2013 4:10:33 AM org.apache.tomcat.util.net.AprEndpoint$Acceptor run
SEVERE: Socket accept failed
org.apache.tomcat.jni.Error: 24: Too many open files
at org.apache.tomcat.jni.Socket.accept(Native Method)
at org.apache.tomcat.util.net.AprEndpoint$Acceptor.run(AprEndpoint.java:990)
at java.lang.Thread.run(Thread.java:722)



Too many open files... How to solve it?


On Tue, Jan 22, 2013 at 10:52 PM, Michael McCandless <
lucene@mikemccandless.com> wrote:

> Can you post the full stack trace of the CorruptIndexException?
>
> Mike McCandless
>
> http://blog.mikemccandless.com
>
> On Tue, Jan 22, 2013 at 8:20 AM, Cheng <zhoucheng2008@gmail.com> wrote:
> > Hi,
> >
> > I run a Lucene application on Tomcat. The app will try to open a Linux
> > directory, and sometime returns CorruptIndexException error.
> >
> > Shortly after I restart Tomcat (nothing else changes), the app can be run
> > on the fly. I am using the following statements to open a directory:
> >
> >
> >     try {
> >       searcher = new IndexSearcher(IndexReader.open(new
> NIOFSDirectory(new
> > File("/home/user/"+ type))));
> >     } catch (IOException e) {
> >       throw new Exception("[" + type + "] Cannot open index folder...");
> >     }
> >
> > I would like to know how to tackle this problem.
> >
> > Many thanks!
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--f46d043c07ac2814fa04d40539c8--

From java-user-return-54825-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jan 24 09:19:05 2013
Return-Path: <java-user-return-54825-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id A255BEF8D
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 24 Jan 2013 09:19:05 +0000 (UTC)
Received: (qmail 41949 invoked by uid 500); 24 Jan 2013 09:19:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41581 invoked by uid 500); 24 Jan 2013 09:19:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41526 invoked by uid 99); 24 Jan 2013 09:19:00 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Jan 2013 09:19:00 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [89.161.223.23] (HELO v044473.home.net.pl) (89.161.223.23)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 24 Jan 2013 09:18:53 +0000
Received: from 078088007253.bialystok.vectranet.pl [78.88.7.253] (HELO [192.168.1.10])
 by alud.home.pl [89.161.223.23] with SMTP (IdeaSmtpServer v0.80)
 id b4cdd29dfbc21872; Thu, 24 Jan 2013 10:18:33 +0100
Date: Thu, 24 Jan 2013 10:18:30 +0100
From: =?utf-8?Q?Rafa=C5=82_Ku=C4=87?= <r.kuc@solr.pl>
X-Priority: 3 (Normal)
Message-ID: <1976437055.20130124101830@alud.com.pl>
To: java-user@lucene.apache.org
Subject: Re: IndexReader.open and CorruptIndexException
In-Reply-To: <CA+huq0BNub8fZ3T7AELKadFOfiYJLEhAaj+pupV6nGNwzUv75Q@mail.gmail.com>
References: <CA+huq0BREzsjFotc4APRo9a2gApYuX4G-2PaTuEJEQOwNY5ibg@mail.gmail.com> <CAL8PwkYddktWPpYpLtb2eRVO9+-AV_+23jfsG5X-RAuwSCv+gw@mail.gmail.com> <CA+huq0BNub8fZ3T7AELKadFOfiYJLEhAaj+pupV6nGNwzUv75Q@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=windows-1250
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Hello!

You need to allow the user that is running Lucene to open more files.
There are plenty of tutorials available on the web. Modify your
/etc/security/limits.conf and if for example your user is lucene add
the following (or modify if those already exists):

lucene soft nofile 64000
lucene hard nofile 64000

Relog and run:

sudo -u lucene -s "ulimit -Sn"

To see if the limits are the ones you set. If they are not, check if
you don't have pam_limits.so commented in the /etc/pam.d/

--=20
Regards,
 Rafa=B3 Ku=E6
 Sematext :: http://sematext.com/ :: Solr - Lucene - Nutch

> Here is the log:

> Jan 24, 2013 4:10:33 AM
> org.apache.tomcat.util.net.AprEndpoint$Acceptor run
> SEVERE: Socket accept failed
> org.apache.tomcat.jni.Error: 24: Too many open files
> at org.apache.tomcat.jni.Socket.accept(Native Method)
> at
> org.apache.tomcat.util.net.AprEndpoint$Acceptor.run(AprEndpoint.java:990)
> at java.lang.Thread.run(Thread.java:722)



> Too many open files... How to solve it?


> On Tue, Jan 22, 2013 at 10:52 PM, Michael McCandless <
> lucene@mikemccandless.com> wrote:

>> Can you post the full stack trace of the CorruptIndexException?
>>
>> Mike McCandless
>>
>> http://blog.mikemccandless.com
>>
>> On Tue, Jan 22, 2013 at 8:20 AM, Cheng <zhoucheng2008@gmail.com> wrote:
>> > Hi,
>> >
>> > I run a Lucene application on Tomcat. The app will try to open a Linux
>> > directory, and sometime returns CorruptIndexException error.
>> >
>> > Shortly after I restart Tomcat (nothing else changes), the app can be =
run
>> > on the fly. I am using the following statements to open a directory:
>> >
>> >
>> >     try {
>> >       searcher =3D new IndexSearcher(IndexReader.open(new
>> NIOFSDirectory(new
>> > File("/home/user/"+ type))));
>> >     } catch (IOException e) {
>> >       throw new Exception("[" + type + "] Cannot open index folder..."=
);
>> >     }
>> >
>> > I would like to know how to tackle this problem.
>> >
>> > Many thanks!
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54826-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jan 24 09:22:46 2013
Return-Path: <java-user-return-54826-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 72A39EF97
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 24 Jan 2013 09:22:46 +0000 (UTC)
Received: (qmail 49178 invoked by uid 500); 24 Jan 2013 09:22:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48988 invoked by uid 500); 24 Jan 2013 09:22:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48947 invoked by uid 99); 24 Jan 2013 09:22:42 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Jan 2013 09:22:42 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of simon.willnauer@gmail.com designates 209.85.215.44 as permitted sender)
Received: from [209.85.215.44] (HELO mail-la0-f44.google.com) (209.85.215.44)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Jan 2013 09:22:36 +0000
Received: by mail-la0-f44.google.com with SMTP id eb20so8727705lab.3
        for <java-user@lucene.apache.org>; Thu, 24 Jan 2013 01:22:16 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:x-received:reply-to:in-reply-to:references:date
         :message-id:subject:from:to:content-type:content-transfer-encoding;
        bh=Wt+iq+BhrRVmQG/EXTSLaQINhx5bcPqa+TBygs3HuV4=;
        b=SxvHCmS7YlxUuAzcKFUeVKKMmO3vRK89xANFvGt6lzn5bbah2w4ISeXA4C2DWWZTsz
         kqbh8w7GTdSZVTHXsH5+bWQY61iIWs6d714KITnWrVLo7bOB9Pb7iVGzeonad5iQLInR
         Y6xFaI+x9PTqHFbQ1B2z1jZlwPCuIYhwxLpU2RNbVC1JTNULKetmdAUUTtYI3zXKKP+R
         DRdzilSblUe2Nh3JvqPp2iDw3jz/xawuk11ttsuwfVchsEuxm5LgqVEl/q1y4RAOuHJT
         mDiMMlMPQ7Tgyado8qZpkS+VJf7rri2AlI/D2NuDmqpQSh/aEOOdJ2nZxiivWGxhOzyU
         l9KQ==
MIME-Version: 1.0
X-Received: by 10.152.145.8 with SMTP id sq8mr1160708lab.21.1359019336317;
 Thu, 24 Jan 2013 01:22:16 -0800 (PST)
Received: by 10.112.134.74 with HTTP; Thu, 24 Jan 2013 01:22:16 -0800 (PST)
Reply-To: simon.willnauer@gmail.com
In-Reply-To: <CAKY7MkkU897fXSpWfzMf467mFH74-bqya-c+H6mJ+aWnBau=8A@mail.gmail.com>
References: <CAKY7MkkU897fXSpWfzMf467mFH74-bqya-c+H6mJ+aWnBau=8A@mail.gmail.com>
Date: Thu, 24 Jan 2013 10:22:16 +0100
Message-ID: <CAAHmpkje8P_+_sdoZjOGi-eFQ21r-yTCXtGaAcMxJY_YaOC7wQ@mail.gmail.com>
Subject: Re: StoredFieldsFormat / documentation
From: Simon Willnauer <simon.willnauer@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Bernd,


On Thu, Jan 24, 2013 at 9:30 AM, Bernd M=C3=BCller <belunto@googlemail.com>=
 wrote:
> Hello,
>
> In the lucene 4.1 release, there was introduced a compression for
> stored fields as described here:
> https://issues.apache.org/jira/browse/LUCENE-4226

yeah that is correct, its the new default. if you use Lucene 4.1 this
will be enabled and used by default for all stored fields.
there is also a blog post about the stored fields format
http://blog.jpountz.net/post/33247161884/efficient-compressed-stored-fields=
-with-lucene
>
> In the java-docs, I don't really find any documentation about the
> application of StoredFieldsFormat and CompressingStoredFieldsFormat.

you mean where it is used? Look at the org.apache.lucene.codecs.Codec
class, it has a method:

  public abstract StoredFieldsFormat storedFieldsFormat();

which returns a stored fields format used to encode your stored fields
written by the index writer.
>
> Where can I apply the field compression and provide parameters for the
> compression level?

Look at Lucene41Codec this is where the field format is created. you
can use your own codec (subclass codec) and plug it into the
IndexWriterConfig
to apply your own settings.
>
> The documentation about the 4.0 and 4.1 releases with examples about
> the changes aren't well documented. The wiki seems a little bit
> outdated. For lucene 2 and 3, I have read the Manning-Series Lucene in
> Action that doesn't have any successor so far for the lucene 4
> release.
>
> Does there exist any further documentation, especially with examples
> for the new releases?

I don't think we have examples on the wiki for that stuff but we should I g=
uess.

simon
>
> Regards,
>
>   Bernd
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54827-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jan 24 09:47:15 2013
Return-Path: <java-user-return-54827-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 41F1BED20
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 24 Jan 2013 09:47:15 +0000 (UTC)
Received: (qmail 36633 invoked by uid 500); 24 Jan 2013 09:47:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36480 invoked by uid 500); 24 Jan 2013 09:47:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36453 invoked by uid 99); 24 Jan 2013 09:47:12 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Jan 2013 09:47:11 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ian.lea@gmail.com designates 209.85.212.182 as permitted sender)
Received: from [209.85.212.182] (HELO mail-wi0-f182.google.com) (209.85.212.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Jan 2013 09:47:06 +0000
Received: by mail-wi0-f182.google.com with SMTP id hn14so253878wib.3
        for <java-user@lucene.apache.org>; Thu, 24 Jan 2013 01:46:46 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=x-received:mime-version:in-reply-to:references:from:date:message-id
         :subject:to:content-type:content-transfer-encoding;
        bh=STSi/Iepy3fZEwOICacpnrYUnRs95a7iOcrO1lgo/T0=;
        b=Lwp47jrFqsRGh/kKwIhJlyzVdXTsHZFRVeq0u6DFcfjstsX7Tz1ll2bUfLxMwIgk36
         ToX0DwzYIUQAiegD5Ugu2vQfnGh/R+wxD/uW48/129IeXKN9dIwVyOWvkHrTxSBDKD2+
         5HGHDt1/A0u7I34HmCib2wUN/670tQwVI3MfLBAlScagFA4IGhVsjbht0yYny0EEwL0W
         2LMB9LLEab17XWwtRwXl9RFZ6bhv01meteM2bC84mqpj9adh5CxFNL60AsrB/ddeJLHe
         C9oYB53/hhgi1/Dky88fFg6H0kc0CYq5w1HSfcTX7vFAp3Ztnf+6Ab4uhquOqKn9lGJ3
         CbMA==
X-Received: by 10.180.20.138 with SMTP id n10mr1950694wie.0.1359020806065;
 Thu, 24 Jan 2013 01:46:46 -0800 (PST)
MIME-Version: 1.0
Received: by 10.194.57.11 with HTTP; Thu, 24 Jan 2013 01:46:25 -0800 (PST)
In-Reply-To: <1976437055.20130124101830@alud.com.pl>
References: <CA+huq0BREzsjFotc4APRo9a2gApYuX4G-2PaTuEJEQOwNY5ibg@mail.gmail.com>
 <CAL8PwkYddktWPpYpLtb2eRVO9+-AV_+23jfsG5X-RAuwSCv+gw@mail.gmail.com>
 <CA+huq0BNub8fZ3T7AELKadFOfiYJLEhAaj+pupV6nGNwzUv75Q@mail.gmail.com> <1976437055.20130124101830@alud.com.pl>
From: Ian Lea <ian.lea@gmail.com>
Date: Thu, 24 Jan 2013 09:46:25 +0000
Message-ID: <CAEY5pxVH1MXY2ve=7EXcKBtRc8K3DqqybhHUzof22wYyDMxM2g@mail.gmail.com>
Subject: Re: IndexReader.open and CorruptIndexException
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Well, raising the limits is one option but there may be better ones.

There's an FAQ entry on this:
http://wiki.apache.org/lucene-java/LuceneFAQ#Why_am_I_getting_an_IOExceptio=
n_that_says_.22Too_many_open_files.22.3F

Take a look at org.apache.lucene.search.SearcherManager "Utility class
to safely share IndexSearcher instances across multiple threads".


--
Ian.


On Thu, Jan 24, 2013 at 9:18 AM, Rafa=C5=82 Ku=C4=87 <r.kuc@solr.pl> wrote:
> Hello!
>
> You need to allow the user that is running Lucene to open more files.
> There are plenty of tutorials available on the web. Modify your
> /etc/security/limits.conf and if for example your user is lucene add
> the following (or modify if those already exists):
>
> lucene soft nofile 64000
> lucene hard nofile 64000
>
> Relog and run:
>
> sudo -u lucene -s "ulimit -Sn"
>
> To see if the limits are the ones you set. If they are not, check if
> you don't have pam_limits.so commented in the /etc/pam.d/
>
> --
> Regards,
>  Rafa=C5=82 Ku=C4=87
>  Sematext :: http://sematext.com/ :: Solr - Lucene - Nutch
>
>> Here is the log:
>
>> Jan 24, 2013 4:10:33 AM
>> org.apache.tomcat.util.net.AprEndpoint$Acceptor run
>> SEVERE: Socket accept failed
>> org.apache.tomcat.jni.Error: 24: Too many open files
>> at org.apache.tomcat.jni.Socket.accept(Native Method)
>> at
>> org.apache.tomcat.util.net.AprEndpoint$Acceptor.run(AprEndpoint.java:990=
)
>> at java.lang.Thread.run(Thread.java:722)
>
>
>
>> Too many open files... How to solve it?
>
>
>> On Tue, Jan 22, 2013 at 10:52 PM, Michael McCandless <
>> lucene@mikemccandless.com> wrote:
>
>>> Can you post the full stack trace of the CorruptIndexException?
>>>
>>> Mike McCandless
>>>
>>> http://blog.mikemccandless.com
>>>
>>> On Tue, Jan 22, 2013 at 8:20 AM, Cheng <zhoucheng2008@gmail.com> wrote:
>>> > Hi,
>>> >
>>> > I run a Lucene application on Tomcat. The app will try to open a Linu=
x
>>> > directory, and sometime returns CorruptIndexException error.
>>> >
>>> > Shortly after I restart Tomcat (nothing else changes), the app can be=
 run
>>> > on the fly. I am using the following statements to open a directory:
>>> >
>>> >
>>> >     try {
>>> >       searcher =3D new IndexSearcher(IndexReader.open(new
>>> NIOFSDirectory(new
>>> > File("/home/user/"+ type))));
>>> >     } catch (IOException e) {
>>> >       throw new Exception("[" + type + "] Cannot open index folder...=
");
>>> >     }
>>> >
>>> > I would like to know how to tackle this problem.
>>> >
>>> > Many thanks!
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54828-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jan 24 09:59:45 2013
Return-Path: <java-user-return-54828-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id CCCB9ED61
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 24 Jan 2013 09:59:45 +0000 (UTC)
Received: (qmail 72693 invoked by uid 500); 24 Jan 2013 09:59:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72401 invoked by uid 500); 24 Jan 2013 09:59:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72374 invoked by uid 99); 24 Jan 2013 09:59:42 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Jan 2013 09:59:42 +0000
X-ASF-Spam-Status: No, hits=0.6 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ian.lea@gmail.com designates 74.125.82.49 as permitted sender)
Received: from [74.125.82.49] (HELO mail-wg0-f49.google.com) (74.125.82.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Jan 2013 09:59:36 +0000
Received: by mail-wg0-f49.google.com with SMTP id 15so2792048wgd.16
        for <java-user@lucene.apache.org>; Thu, 24 Jan 2013 01:59:16 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=x-received:mime-version:in-reply-to:references:from:date:message-id
         :subject:to:content-type;
        bh=y3UqNLzW+qnTxtMaIFVfEE7CO1Ny2+jA+FNMb6mJXAY=;
        b=rbQB5Y/nZEH3/ZIQ/81syLprgSEHCghgiHXf6f8ZdUlXpHiawGvQ5DKfsM+4SEN48b
         tiioVC6pir7OIikbdsx1HqAJzX0WS8l8vVf7QpOzFGXI+94eWAn23FAQOo+k35jK3/Qj
         SNHDNrkW4KYQnvNZmIfb7WX4Box7+GsY6EUYrJ/TxNcZhsQB89hvhqBDpPgd0OiqlgLu
         Kor96zuH8TDX4aMN3xbzvyVG9dm6dTujqdtvMjZuwtxLTKIy49ybIsdD7tzyPbmlHYq6
         5c6pafTmAq8MzMRary225c0EcSyLtU3ztsEqal2Qz3h5dA4Rtf4hMp7N8dumD/NAgYif
         Ei/Q==
X-Received: by 10.180.99.72 with SMTP id eo8mr1910482wib.34.1359021556020;
 Thu, 24 Jan 2013 01:59:16 -0800 (PST)
MIME-Version: 1.0
Received: by 10.194.57.11 with HTTP; Thu, 24 Jan 2013 01:58:55 -0800 (PST)
In-Reply-To: <1358972936915-4035740.post@n3.nabble.com>
References: <1358971473762-4035732.post@n3.nabble.com> <CAEY5pxUfU3QE12ybY36uucjXzfN3=+044Y3T=vkg+DB1oMPhDg@mail.gmail.com>
 <1358972936915-4035740.post@n3.nabble.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Thu, 24 Jan 2013 09:58:55 +0000
Message-ID: <CAEY5pxWT_Xq8JQYtPUfRH=pUu4Ge9QJ7YNZeeJ=Y9ofSzEbyVQ@mail.gmail.com>
Subject: Re: IndexWriter: IndexWriter.MaxFieldLength.LIMITED && setMaxFieldLength(MAX_FIELD_SCAN_LENGTH)
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

See org.apache.lucene.analysis.miscellaneous.LimitTokenCountAnalyzer
and org.apache.lucene.analysis.miscellaneous.LimitTokenCountFilter.

Looks you can use the former with StandardAnalyzer as the delegate and
whatever value you want for maxTokenCount.

The 3.6,1 javadocs have "IndexWriter.MaxFieldLength Deprecated. use
LimitTokenCountAnalyzer instead.".  The 4.x docs don't, because it's
gone.




--
Ian.


On Wed, Jan 23, 2013 at 8:28 PM, saisantoshi <saisantoshi76@gmail.com> wrote:
> Thanks. I have gone through the change log but its not very clear from the
> bug on the usage in the latest versions. I understand that instead of user
> supplying the values, its been wrapped in another analyzer. Could you please
> let me know how the usage for modifying the fields I mentioned above. Also,
> we are using StandardAnalyzer and wanted to stick with it.
>
> The docs are not very clear. it should have at least provided some usage
> snippets if deprecated.
>
> IndexWriterConfig indexWriterConfig = new
> IndexWriterConfig(Version.LUCENE_40,analyzer);
> IndexWriter indexWriter = new IndexWriter(directory, indexWriterConfig)
> indexWriterConfig.setOpenMode(IndexWriterConfig.OpenMode.CREATE);
>
> How to add the below two feilds to the indexWriterConfig:
>
> IndexWriter.MaxFieldLength.LIMITED
> indexWriter.setMaxFieldLength(MAX_FIELD_SCAN_LENGTH)
>
> /*** 2.4 Construct ***//
> IndexWriter indexWriter = new IndexWriter(directory, stAnalyzer,
> create,IndexWriter.MaxFieldLength.LIMITED);
> indexWriter.setMaxFieldLength(MAX_FIELD_SCAN_LENGTH);
>
> All I am looking is how can we get the same kind of thing with the newer
> API.
>
> Thanks,
> Sai.
>
>
>
>
> --
> View this message in context: http://lucene.472066.n3.nabble.com/IndexWriter-IndexWriter-MaxFieldLength-LIMITED-setMaxFieldLength-MAX-FIELD-SCAN-LENGTH-tp4035732p4035740.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54829-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jan 24 10:55:37 2013
Return-Path: <java-user-return-54829-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 3DF70EBA7
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 24 Jan 2013 10:55:37 +0000 (UTC)
Received: (qmail 12840 invoked by uid 500); 24 Jan 2013 10:55:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12733 invoked by uid 500); 24 Jan 2013 10:55:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12684 invoked by uid 99); 24 Jan 2013 10:55:32 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Jan 2013 10:55:32 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of belunto@googlemail.com designates 209.85.216.46 as permitted sender)
Received: from [209.85.216.46] (HELO mail-qa0-f46.google.com) (209.85.216.46)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Jan 2013 10:55:28 +0000
Received: by mail-qa0-f46.google.com with SMTP id r4so241911qaq.19
        for <java-user@lucene.apache.org>; Thu, 24 Jan 2013 02:55:07 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlemail.com; s=20120113;
        h=mime-version:x-received:in-reply-to:references:date:message-id
         :subject:from:to:content-type:content-transfer-encoding;
        bh=zFv8JuywDRXA4d6xdgYWMP3v9MevdaEeGIz1vIvTAac=;
        b=r8uKaE5p9IJIIwgdvOK6tTmINB4jZEeDYQ/6hXkHPR63xZsh+d4bZJjC6AkiGZN6Ii
         l120REVAhM6IORxsAs37LKV/9c+d8LiU2RyVSAa4KPlzXJhrKmx06i/mn5bhcwSnJ1Nh
         AEaEBPxwp6Vn27J4IrcDCnXGFXuhinwQUpU6Vv/BiCp0HTsHdPIbfoyifp7B5DAcgKEL
         GLfN2LY1fDgSkFBkzMZMWt4glfzJSsGSIwMuawNYYFXjLgtyVRzNX+UAXE2+k5+CWTha
         8x+aZd9pBXwXradD7aSg0HGwY/C1mc011W4HdhGx5tHT7QtFG3upkyC+U1MGc9tuyhL1
         OYPA==
MIME-Version: 1.0
X-Received: by 10.229.177.142 with SMTP id bi14mr371570qcb.48.1359024907324;
 Thu, 24 Jan 2013 02:55:07 -0800 (PST)
Received: by 10.49.11.228 with HTTP; Thu, 24 Jan 2013 02:55:07 -0800 (PST)
In-Reply-To: <CAAHmpkje8P_+_sdoZjOGi-eFQ21r-yTCXtGaAcMxJY_YaOC7wQ@mail.gmail.com>
References: <CAKY7MkkU897fXSpWfzMf467mFH74-bqya-c+H6mJ+aWnBau=8A@mail.gmail.com>
	<CAAHmpkje8P_+_sdoZjOGi-eFQ21r-yTCXtGaAcMxJY_YaOC7wQ@mail.gmail.com>
Date: Thu, 24 Jan 2013 11:55:07 +0100
Message-ID: <CAKY7Mkn7wMUhMszuMuj=26kmPSRvvpOaVzpF8z_-08YP30F-xw@mail.gmail.com>
Subject: Re: StoredFieldsFormat / documentation
From: =?UTF-8?Q?Bernd_M=C3=BCller?= <belunto@googlemail.com>
To: java-user@lucene.apache.org, simon.willnauer@gmail.com
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Simon,

> you mean where it is used? Look at the org.apache.lucene.codecs.Codec
> class, it has a method:
>
>   public abstract StoredFieldsFormat storedFieldsFormat();
>
> which returns a stored fields format used to encode your stored fields
> written by the index writer.

Thanks for your quick reply. So I have to change the return value of
the method storedFieldsFormat to a custom
CompressingStoredFieldsFormat. Then, I set the codec in the
IndexWriterConfig for the IndexWriter. If this is correct, my problem
is solved.

Next question that comes up: If I have different IndexWriters writing
in the same index with different codecs, is the codec for the fields
somehow resolved for an IndexReader? Or does every instance of an
IndexWriter change the stored fields to its codec when committing and
closing the index?

Regards,
  Bernd



2013/1/24 Simon Willnauer <simon.willnauer@gmail.com>:
> Hi Bernd,
>
>
> On Thu, Jan 24, 2013 at 9:30 AM, Bernd M=C3=BCller <belunto@googlemail.co=
m> wrote:
>> Hello,
>>
>> In the lucene 4.1 release, there was introduced a compression for
>> stored fields as described here:
>> https://issues.apache.org/jira/browse/LUCENE-4226
>
> yeah that is correct, its the new default. if you use Lucene 4.1 this
> will be enabled and used by default for all stored fields.
> there is also a blog post about the stored fields format
> http://blog.jpountz.net/post/33247161884/efficient-compressed-stored-fiel=
ds-with-lucene
>>
>> In the java-docs, I don't really find any documentation about the
>> application of StoredFieldsFormat and CompressingStoredFieldsFormat.
>
> you mean where it is used? Look at the org.apache.lucene.codecs.Codec
> class, it has a method:
>
>   public abstract StoredFieldsFormat storedFieldsFormat();
>
> which returns a stored fields format used to encode your stored fields
> written by the index writer.
>>
>> Where can I apply the field compression and provide parameters for the
>> compression level?
>
> Look at Lucene41Codec this is where the field format is created. you
> can use your own codec (subclass codec) and plug it into the
> IndexWriterConfig
> to apply your own settings.
>>
>> The documentation about the 4.0 and 4.1 releases with examples about
>> the changes aren't well documented. The wiki seems a little bit
>> outdated. For lucene 2 and 3, I have read the Manning-Series Lucene in
>> Action that doesn't have any successor so far for the lucene 4
>> release.
>>
>> Does there exist any further documentation, especially with examples
>> for the new releases?
>
> I don't think we have examples on the wiki for that stuff but we should I=
 guess.
>
> simon
>>
>> Regards,
>>
>>   Bernd
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54830-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jan 24 13:11:43 2013
Return-Path: <java-user-return-54830-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 03C42E808
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 24 Jan 2013 13:11:43 +0000 (UTC)
Received: (qmail 72925 invoked by uid 500); 24 Jan 2013 13:11:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70489 invoked by uid 500); 24 Jan 2013 13:10:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65835 invoked by uid 99); 24 Jan 2013 13:07:14 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Jan 2013 13:07:14 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of crockabiscuit@gmail.com designates 209.85.220.179 as permitted sender)
Received: from [209.85.220.179] (HELO mail-vc0-f179.google.com) (209.85.220.179)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Jan 2013 13:07:06 +0000
Received: by mail-vc0-f179.google.com with SMTP id gb23so1355249vcb.10
        for <java-user@lucene.apache.org>; Thu, 24 Jan 2013 05:06:46 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:x-received:date:message-id:subject:from:to
         :content-type;
        bh=LUoxuHVRWby/IeBHvO5EK8F4NDLr5/FhWtK2Dc6MEjA=;
        b=RVS4KJORIVXVzWWqImrjJUStZNMjD3oDyGHoaVojnb/Rd+3SnSdGeuC0kIk2nO2art
         hf7mLuZiQRm1IX5jpDytcN2G21VdhrIJGUzWrhbwnlvHltPGx7p2Yp8V5M/bM07GXsC6
         w+uRbCnfSuJHAp7kAaURw9XczexQci0G/j6L61fR3ksP9AKmbCgxaAH2UVczrU7lDiC1
         Weizyxeh9XDzWgZifdU4msqOMNaZtqiyEiCJVwij64fuhx20WdwHhXmHnf9tREpPRLOf
         kfDkKmQnYs6LKpe8N1iQHS1QInPRBNOqD6GUzH3DpvMa9xJW8gSN0vBG1SGlQVCe9ITt
         Lt3g==
MIME-Version: 1.0
X-Received: by 10.52.99.106 with SMTP id ep10mr1578511vdb.53.1359032806054;
 Thu, 24 Jan 2013 05:06:46 -0800 (PST)
Received: by 10.220.37.140 with HTTP; Thu, 24 Jan 2013 05:06:45 -0800 (PST)
Date: Thu, 24 Jan 2013 22:06:45 +0900
Message-ID: <CAL0=0H33AtnsNYxB+WseQXvSmLn_2UJ7QZ3p9vJMcJ8UUZi9Eg@mail.gmail.com>
Subject: How do I best store my IRC log data in lucene indexes?
From: crocket <crockabiscuit@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=20cf307f30f8a49ace04d4087bb4
X-Virus-Checked: Checked by ClamAV on apache.org

--20cf307f30f8a49ace04d4087bb4
Content-Type: text/plain; charset=ISO-8859-1

I have three data I want to store, search, and restore.
It is for logging IRC messages.

NICK
  time=the number of seconds passed since the epoch, 1970-01-01 00:00:00
UTC+0
  network=
  me=0 or 1
  old=
  new=

KICKED
  time=the number of seconds passed since the epoch, 1970-01-01 00:00:00
UTC+0
  network=
  chan=
  msg=
  kicker=
  mynick=

MSG
  time=the number of seconds passed since the epoch, 1970-01-01 00:00:00
UTC+0
  network=
  chan=
  msg=
  me=0 or 1
  nick=

Below are ideas for IRC log search web UI.

[] Main UI : network("", freenode, ...) | channel("", ...) | nick | message
  1) network and channel have dropdown boxes. nick and message are text
boxes.
  2) duration, network, and nick can be applied to every data.
  3) channel and message are applicable to KICKED and MSG.

[] Facets
  1) duration(1day, 1 week, 1 month, 1 year, all) <-- just like google
search tools
  2) ...

[] Category search(categories registered as facets)
  1) network
  2) channel

Is it better to store NICK, KICKED, and MSG in one index directory or to
store them in separate index directories?

Are there other things that I should know or consider?

--20cf307f30f8a49ace04d4087bb4--

From java-user-return-54831-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jan 24 13:12:38 2013
Return-Path: <java-user-return-54831-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 278AEE810
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 24 Jan 2013 13:12:38 +0000 (UTC)
Received: (qmail 86776 invoked by uid 500); 24 Jan 2013 13:12:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86661 invoked by uid 500); 24 Jan 2013 13:12:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86595 invoked by uid 99); 24 Jan 2013 13:12:35 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Jan 2013 13:12:35 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jpountz@gmail.com designates 209.85.214.49 as permitted sender)
Received: from [209.85.214.49] (HELO mail-bk0-f49.google.com) (209.85.214.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Jan 2013 13:12:30 +0000
Received: by mail-bk0-f49.google.com with SMTP id jm19so5142180bkc.22
        for <java-user@lucene.apache.org>; Thu, 24 Jan 2013 05:12:09 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=x-received:mime-version:in-reply-to:references:from:date:message-id
         :subject:to:content-type:content-transfer-encoding;
        bh=3Lr9mx9khi02i+iLvH4CyBcm2+hNESwrvJKS/3jxgE0=;
        b=DGE/+qxsuwoF4kd8v6ibu17PxG/786Jfg5wBmtjtEmNtHmhJXW7Muw6HgtonY4PhIp
         MeV03zLA50YLQLoyl7FfikgGvSUNRLLzLYqKLgySWrJHCSmB2y6yuoJviOScA5/GXuu8
         YGzBahla76Ec7pnHYAcbrAMJO/EPLkOAa8dG6aU0dLOkEdwKY8csQNMh3Gh6nHAfMR2X
         TOb93kCsxmUJfPxkxU7VqY1D7G0HeFPoJJeWusGJx476l6/EWRtZDEuqSzrhXoqj0AK4
         n0vej2jZ5lXcc8vRt3H8lI1+oSQ3mUiBJBGtWVQvXt1f3j8YdgUF+frMZwaMwQLJl/2h
         Mpuw==
X-Received: by 10.204.150.199 with SMTP id z7mr784802bkv.139.1359033128933;
 Thu, 24 Jan 2013 05:12:08 -0800 (PST)
MIME-Version: 1.0
Received: by 10.204.253.138 with HTTP; Thu, 24 Jan 2013 05:11:48 -0800 (PST)
In-Reply-To: <CAKY7Mkn7wMUhMszuMuj=26kmPSRvvpOaVzpF8z_-08YP30F-xw@mail.gmail.com>
References: <CAKY7MkkU897fXSpWfzMf467mFH74-bqya-c+H6mJ+aWnBau=8A@mail.gmail.com>
 <CAAHmpkje8P_+_sdoZjOGi-eFQ21r-yTCXtGaAcMxJY_YaOC7wQ@mail.gmail.com> <CAKY7Mkn7wMUhMszuMuj=26kmPSRvvpOaVzpF8z_-08YP30F-xw@mail.gmail.com>
From: Adrien Grand <jpountz@gmail.com>
Date: Thu, 24 Jan 2013 14:11:48 +0100
Message-ID: <CAPsWd+P3FWoXnhdt2C+LYqsz7xvtqUko-J=OyCraD714V=eqXw@mail.gmail.com>
Subject: Re: StoredFieldsFormat / documentation
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Bernd,

On Thu, Jan 24, 2013 at 11:55 AM, Bernd M=C3=BCller <belunto@googlemail.com=
> wrote:
> Hi Simon,
>
>> you mean where it is used? Look at the org.apache.lucene.codecs.Codec
>> class, it has a method:
>>
>>   public abstract StoredFieldsFormat storedFieldsFormat();
>>
>> which returns a stored fields format used to encode your stored fields
>> written by the index writer.
>
> Thanks for your quick reply. So I have to change the return value of
> the method storedFieldsFormat to a custom
> CompressingStoredFieldsFormat. Then, I set the codec in the
> IndexWriterConfig for the IndexWriter. If this is correct, my problem
> is solved.

This is correct. There are some explanations on how to register custom
codecs in the o.a.l.codecs package documentation:
http://lucene.apache.org/core/4_1_0/core/org/apache/lucene/codecs/package-s=
ummary.html#package_description.

Something you may need to consider if you are willing to read this
index with future versions of Lucene is that
CompressingStoredFieldsFormat is still experimental, so we might break
it in a non backward-compatible way in a future release. (But it is
possible to work around this problem: for example if we break it in
Lucene 4.2, all you need to do is to convert your index to the
Lucene41 codec using Lucene 4.1 and then re-converting your index back
to your custom codec using Lucene 4.2.)

> Next question that comes up: If I have different IndexWriters writing
> in the same index with different codecs, is the codec for the fields
> somehow resolved for an IndexReader? Or does every instance of an
> IndexWriter change the stored fields to its codec when committing and
> closing the index?

You should never have two IndexWriters writing to the same directory
at the same time. However there is no problem writing some segments
with a codec and then other segments with another codec. Your
DirectoryReader will just be composed of atomic readers which use
different codecs, which is fine, even for merging.

--=20
Adrien

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54832-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jan 24 14:26:47 2013
Return-Path: <java-user-return-54832-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id D596AE62A
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 24 Jan 2013 14:26:47 +0000 (UTC)
Received: (qmail 22968 invoked by uid 500); 24 Jan 2013 14:26:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22817 invoked by uid 500); 24 Jan 2013 14:26:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22792 invoked by uid 99); 24 Jan 2013 14:26:43 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Jan 2013 14:26:43 +0000
X-ASF-Spam-Status: No, hits=-0.1 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of jerome_lanneluc@fr.ibm.com designates 195.75.94.112 as permitted sender)
Received: from [195.75.94.112] (HELO e06smtp16.uk.ibm.com) (195.75.94.112)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Jan 2013 14:26:32 +0000
Received: from /spool/local
	by e06smtp16.uk.ibm.com with IBM ESMTP SMTP Gateway: Authorized Use Only! Violators will be prosecuted
	for <java-user@lucene.apache.org> from <jerome_lanneluc@fr.ibm.com>;
	Thu, 24 Jan 2013 14:24:48 -0000
Received: from b06cxnps3075.portsmouth.uk.ibm.com (9.149.109.195)
	by e06smtp16.uk.ibm.com (192.168.101.146) with IBM ESMTP SMTP Gateway: Authorized Use Only! Violators will be prosecuted;
	Thu, 24 Jan 2013 14:24:46 -0000
Received: from d06av11.portsmouth.uk.ibm.com (d06av11.portsmouth.uk.ibm.com [9.149.37.252])
	by b06cxnps3075.portsmouth.uk.ibm.com (8.13.8/8.13.8/NCO v10.0) with ESMTP id r0OEQ0pF16384006
	for <java-user@lucene.apache.org>; Thu, 24 Jan 2013 14:26:00 GMT
Received: from d06av11.portsmouth.uk.ibm.com (loopback [127.0.0.1])
	by d06av11.portsmouth.uk.ibm.com (8.14.4/8.13.1/NCO v10.0 AVout) with ESMTP id r0OEQ8VI032429
	for <java-user@lucene.apache.org>; Thu, 24 Jan 2013 07:26:08 -0700
Received: from d06ml370.portsmouth.uk.ibm.com (d06ml370.portsmouth.uk.ibm.com [9.149.76.152])
	by d06av11.portsmouth.uk.ibm.com (8.14.4/8.13.1/NCO v10.0 AVin) with ESMTP id r0OEQ75e032392
	for <java-user@lucene.apache.org>; Thu, 24 Jan 2013 07:26:07 -0700
X-Disclaimed: 50642
To: java-user@lucene.apache.org
MIME-Version: 1.0
Subject: Chinese analyzer
X-KeepSent: 4420813A:F438A161-C1257AFD:004A1B23;
 type=4; name=$KeepSent
X-Mailer: Lotus Notes Release 8.5.3FP2 SHF22 July 19, 2012
From: Jerome Lanneluc <jerome_lanneluc@fr.ibm.com>
Message-ID: <OF4420813A.F438A161-ONC1257AFD.004A1B23-C1257AFD.004F4053@fr.ibm.com>
Date: Thu, 24 Jan 2013 15:25:58 +0100
X-MIMETrack: Serialize by Router on D06ML370/06/M/IBM(Release 8.5.3 ZX853HP5|January 12, 2012) at
 24/01/2013 15:25:58
Content-Type: multipart/mixed; boundary="=_mixed 004F403EC1257AFD_="
x-cbid: 13012414-3548-0000-0000-0000045DC87D
X-Virus-Checked: Checked by ClamAV on apache.org

--=_mixed 004F403EC1257AFD_=
Content-Type: multipart/alternative; boundary="=_alternative 004F403EC1257AFD_="


--=_alternative 004F403EC1257AFD_=
Content-Type: text/plain; charset="GB2312"
Content-Transfer-Encoding: base64

SGksDQoNCkknbSB1c2luZyB0aGUgMy42LjEgQ2hpbmVzZSBhbmFseXplciBhbmQgd2hlbiB0b2tl
bml6aW5nIHNvbWUgQ2hpbmVzZSANCndvcmRzIGNvbnRhaW5pbmcgQ0pLIFVuaWZpZWQgSWRlb2dy
YXBocyBFeHRlbnNpb24gQiBjaGFyYWN0ZXJzLCB0aGUgDQpyZXN1bHRpbmcgdG9rZW5zIGRvIG5v
dCBjb250YWluIHRoZSBvcmlnaW5hbCB3b3Jkcy4gSW5zdGVhZCBpdCBzZWVtcyB0aGF0IA0KdGhl
IENKSyBVbmlmaWVkIElkZW9ncmFwaHMgRXh0ZW5zaW9uIEIgY2hhcmFjdGVycyBhcmUgc3BsaXQg
aW4gdHdvIA0KY2hhcmFjdGVycy4NCg0KSW4gdGhlIGF0dGFjaGVkIGV4YW1wbGUsIA0KdGhlIG91
dHB1dCBpczoNCg0KU2VudGVuY2U6IM7SysfW0Ln6yMsoMjUxMDUgMjYxNTkgMjAwMTMgMjIyNjkg
MjAxNTQpDQpUb2tlbnM6IFvO0igyNTEwNSkgyscoMjYxNTkpINbQufooMjAwMTMgMjIyNjkpIMjL
KDIwMTU0KSBdDQoNClNlbnRlbmNlOiA/KDU1NDAxIDU3MDQ2KQ0KVG9rZW5zOiBbPyg1NTQwMSkg
Pyg1NzA0NikgXQ0KDQpOb3RlIHRoZSAyIHRva2VucyBpbiB0aGUgc2Vjb25kIHNhbXBsZSB3aGVu
IEkgd291bGQgZXhwZWN0IHRvIGhhdmUgb25seSANCm9uZSB0b2tlbiB3aXRoIHRoZSAoNTU0MDEg
NTcwNDYpIGNoYXJhY3RlcnMuDQoNCkkgY291bGQgbm90IGZpZ3VyZSBvdXQgaWYgSSdtIGRvaW5n
IHNvbWV0aGluZyB3cm9uZywgb3IgaWYgdGhpcyBpcyBhIGJ1ZyANCmluIHRoZSBDaGluZXNlIGFu
YWx5emVyLg0KDQpUaGFua3MsDQpKZXJvbWUNCg0KDQoNClNhdWYgaW5kaWNhdGlvbiBjb250cmFp
cmUgY2ktZGVzc3VzOi8gVW5sZXNzIHN0YXRlZCBvdGhlcndpc2UgYWJvdmU6DQpDb21wYWduaWUg
SUJNIEZyYW5jZQ0KU2moqGdlIFNvY2lhbCA6IDE3IGF2ZW51ZSBkZSBsJ0V1cm9wZSwgOTIyNzUg
Qm9pcy1Db2xvbWJlcyBDZWRleA0KUkNTIE5hbnRlcnJlIDU1MiAxMTggNDY1DQpGb3JtZSBTb2Np
YWxlIDogUy5BLlMuDQpDYXBpdGFsIFNvY2lhbCA6IDY1My4yNDIuMzA2LDIwIIANClNJUkVOL1NJ
UkVUIDogNTUyIDExOCA0NjUgMDM2NDQgLSBDb2RlIE5BRiA2MjAyQSANCg==
--=_alternative 004F403EC1257AFD_=
Content-Type: text/html; charset="GB2312"
Content-Transfer-Encoding: base64

PGZvbnQgc2l6ZT0yIGZhY2U9InNhbnMtc2VyaWYiPkhpLDwvZm9udD4NCjxicj4NCjxicj48Zm9u
dCBzaXplPTIgZmFjZT0ic2Fucy1zZXJpZiI+SSdtIHVzaW5nIHRoZSAzLjYuMSBDaGluZXNlIGFu
YWx5emVyDQphbmQgd2hlbiB0b2tlbml6aW5nIHNvbWUgQ2hpbmVzZSB3b3JkcyBjb250YWluaW5n
IDwvZm9udD48Zm9udCBzaXplPTM+Q0pLDQpVbmlmaWVkIElkZW9ncmFwaHMgRXh0ZW5zaW9uIEIg
PC9mb250Pjxmb250IHNpemU9MiBmYWNlPSJzYW5zLXNlcmlmIj5jaGFyYWN0ZXJzLA0KdGhlIHJl
c3VsdGluZyB0b2tlbnMgZG8gbm90IGNvbnRhaW4gdGhlIG9yaWdpbmFsIHdvcmRzLiBJbnN0ZWFk
IGl0IHNlZW1zDQp0aGF0IHRoZSA8L2ZvbnQ+PGZvbnQgc2l6ZT0zPkNKSyBVbmlmaWVkIElkZW9n
cmFwaHMgRXh0ZW5zaW9uIEIgPC9mb250Pjxmb250IHNpemU9MiBmYWNlPSJzYW5zLXNlcmlmIj5j
aGFyYWN0ZXJzDQphcmUgc3BsaXQgaW4gdHdvIGNoYXJhY3RlcnMuPC9mb250Pg0KPGJyPg0KPGJy
Pjxmb250IHNpemU9MiBmYWNlPSJzYW5zLXNlcmlmIj5JbiB0aGUgYXR0YWNoZWQgZXhhbXBsZSwg
PC9mb250Pg0KPGJyPjxmb250IHNpemU9MiBmYWNlPSJzYW5zLXNlcmlmIj50aGUgb3V0cHV0IGlz
OjwvZm9udD4NCjxicj4NCjxicj48Zm9udCBzaXplPTEgZmFjZT0iVGFob21hIj5TZW50ZW5jZTog
ztLKx9bQufrIyygyNTEwNSAyNjE1OSAyMDAxMw0KMjIyNjkgMjAxNTQpPC9mb250Pg0KPGJyPjxm
b250IHNpemU9MSBmYWNlPSJUYWhvbWEiPlRva2VuczogW87SKDI1MTA1KSDKxygyNjE1OSkg1tC5
+igyMDAxMw0KMjIyNjkpIMjLKDIwMTU0KSBdPC9mb250Pg0KPGJyPg0KPGJyPjxmb250IHNpemU9
MSBmYWNlPSJUYWhvbWEiPlNlbnRlbmNlOiAmIzE3Mzc4MjsoNTU0MDEgNTcwNDYpPC9mb250Pg0K
PGJyPjxmb250IHNpemU9MSBmYWNlPSJUYWhvbWEiPlRva2VuczogWz8oNTU0MDEpID8oNTcwNDYp
IF08L2ZvbnQ+DQo8YnI+DQo8YnI+PGZvbnQgc2l6ZT0yIGZhY2U9InNhbnMtc2VyaWYiPk5vdGUg
dGhlIDIgdG9rZW5zIGluIHRoZSBzZWNvbmQgc2FtcGxlDQp3aGVuIEkgd291bGQgZXhwZWN0IHRv
IGhhdmUgb25seSBvbmUgdG9rZW4gd2l0aCB0aGUgPC9mb250Pjxmb250IHNpemU9MSBmYWNlPSJU
YWhvbWEiPig1NTQwMQ0KNTcwNDYpPC9mb250Pjxmb250IHNpemU9MiBmYWNlPSJzYW5zLXNlcmlm
Ij4gY2hhcmFjdGVycy48L2ZvbnQ+DQo8YnI+DQo8YnI+PGZvbnQgc2l6ZT0yIGZhY2U9InNhbnMt
c2VyaWYiPkkgY291bGQgbm90IGZpZ3VyZSBvdXQgaWYgSSdtIGRvaW5nDQpzb21ldGhpbmcgd3Jv
bmcsIG9yIGlmIHRoaXMgaXMgYSBidWcgaW4gdGhlIENoaW5lc2UgYW5hbHl6ZXIuPC9mb250Pg0K
PGJyPg0KPGJyPjxmb250IHNpemU9MiBmYWNlPSJzYW5zLXNlcmlmIj5UaGFua3MsPC9mb250Pg0K
PGJyPjxmb250IHNpemU9MiBmYWNlPSJzYW5zLXNlcmlmIj5KZXJvbWU8L2ZvbnQ+DQo8YnI+PGZv
bnQgc2l6ZT0yIGZhY2U9InNhbnMtc2VyaWYiPjxicj4NCjxicj4NCjxicj4NClNhdWYgaW5kaWNh
dGlvbiBjb250cmFpcmUgY2ktZGVzc3VzOi8gVW5sZXNzIHN0YXRlZCBvdGhlcndpc2UgYWJvdmU6
PGJyPg0KQ29tcGFnbmllIElCTSBGcmFuY2U8YnI+DQpTaaioZ2UgU29jaWFsIDogMTcgYXZlbnVl
IGRlIGwnRXVyb3BlLCA5MjI3NSBCb2lzLUNvbG9tYmVzIENlZGV4PGJyPg0KUkNTIE5hbnRlcnJl
IDU1MiAxMTggNDY1PGJyPg0KRm9ybWUgU29jaWFsZSA6IFMuQS5TLjxicj4NCkNhcGl0YWwgU29j
aWFsIDogNjUzLjI0Mi4zMDYsMjAggDxicj4NClNJUkVOL1NJUkVUIDogNTUyIDExOCA0NjUgMDM2
NDQgLSBDb2RlIE5BRiA2MjAyQSA8L2ZvbnQ+DQo=
--=_alternative 004F403EC1257AFD_=--


--=_mixed 004F403EC1257AFD_=
Content-Type: text/plain; charset=us-ascii


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
--=_mixed 004F403EC1257AFD_=--


From java-user-return-54833-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jan 24 15:31:01 2013
Return-Path: <java-user-return-54833-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 5A61BE4F2
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 24 Jan 2013 15:31:01 +0000 (UTC)
Received: (qmail 5611 invoked by uid 500); 24 Jan 2013 15:30:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5266 invoked by uid 500); 24 Jan 2013 15:30:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5234 invoked by uid 99); 24 Jan 2013 15:30:56 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Jan 2013 15:30:56 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of rcmuir@gmail.com designates 209.85.216.170 as permitted sender)
Received: from [209.85.216.170] (HELO mail-qc0-f170.google.com) (209.85.216.170)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Jan 2013 15:30:49 +0000
Received: by mail-qc0-f170.google.com with SMTP id d42so4445962qca.15
        for <java-user@lucene.apache.org>; Thu, 24 Jan 2013 07:30:28 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=x-received:mime-version:in-reply-to:references:from:date:message-id
         :subject:to:content-type;
        bh=HZ9bEvcvtu6Qv2rvECxrsxIM1dD/8dNmnrlnTg40aFk=;
        b=ORIkg+3B8DPtqzudBpCF/X2hNV2fbrBwKtcQcqtQi79KajgDT6eDidu4PnogyYtmPk
         duovrkXiGic3uhosqMv9B5yfBaj7jJ8y6umcy4C3lgtG04mhzfGjsI7qtjhoYNQjo/KR
         qOy1Dnn1bhTR7zaSsbIBA2tbSuglH9oIY4uvkck+6jxefoDtAtl43AFaAlVAiPNCMHyy
         bIy3kRr5xmDCZ+nL8PvPZjjDT7xt44zYreFPiiB/BgaGhWTRFgR2pKFS3wqmPkgW7rmt
         3Z/zPa2IlnhxXzKsX+MIQOPrcdPYYGvsUYABKarg7eO5QEYbaQrAVLiaSXNya8BQOWz6
         6rew==
X-Received: by 10.224.199.131 with SMTP id es3mr2394602qab.81.1359041428007;
 Thu, 24 Jan 2013 07:30:28 -0800 (PST)
MIME-Version: 1.0
Received: by 10.49.103.198 with HTTP; Thu, 24 Jan 2013 07:30:07 -0800 (PST)
In-Reply-To: <OF4420813A.F438A161-ONC1257AFD.004A1B23-C1257AFD.004F4053@fr.ibm.com>
References: <OF4420813A.F438A161-ONC1257AFD.004A1B23-C1257AFD.004F4053@fr.ibm.com>
From: Robert Muir <rcmuir@gmail.com>
Date: Thu, 24 Jan 2013 10:30:07 -0500
Message-ID: <CAOdYfZXmg=d=k_uq2T=c707wP6SdZM1e5+-y-VtUf46fyrESuQ@mail.gmail.com>
Subject: Re: Chinese analyzer
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
X-Virus-Checked: Checked by ClamAV on apache.org

On Thu, Jan 24, 2013 at 9:25 AM, Jerome Lanneluc
<jerome_lanneluc@fr.ibm.com> wrote:
> Note the 2 tokens in the second sample when I would expect to have only one
> token with the (55401 57046) characters.
>
> I could not figure out if I'm doing something wrong, or if this is a bug in
> the Chinese analyzer.
>

Which analyzer specifically? there is more than one...

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54834-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jan 24 15:54:21 2013
Return-Path: <java-user-return-54834-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id F28CBE590
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 24 Jan 2013 15:54:20 +0000 (UTC)
Received: (qmail 1316 invoked by uid 500); 24 Jan 2013 15:54:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 959 invoked by uid 500); 24 Jan 2013 15:54:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 931 invoked by uid 99); 24 Jan 2013 15:54:17 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Jan 2013 15:54:17 +0000
X-ASF-Spam-Status: No, hits=-0.1 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of jerome_lanneluc@fr.ibm.com designates 195.75.94.107 as permitted sender)
Received: from [195.75.94.107] (HELO e06smtp11.uk.ibm.com) (195.75.94.107)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Jan 2013 15:54:06 +0000
Received: from /spool/local
	by e06smtp11.uk.ibm.com with IBM ESMTP SMTP Gateway: Authorized Use Only! Violators will be prosecuted
	for <java-user@lucene.apache.org> from <jerome_lanneluc@fr.ibm.com>;
	Thu, 24 Jan 2013 15:52:24 -0000
Received: from b06cxnps4074.portsmouth.uk.ibm.com (9.149.109.196)
	by e06smtp11.uk.ibm.com (192.168.101.141) with IBM ESMTP SMTP Gateway: Authorized Use Only! Violators will be prosecuted;
	Thu, 24 Jan 2013 15:52:22 -0000
Received: from d06av01.portsmouth.uk.ibm.com (d06av01.portsmouth.uk.ibm.com [9.149.37.212])
	by b06cxnps4074.portsmouth.uk.ibm.com (8.13.8/8.13.8/NCO v10.0) with ESMTP id r0OFrZlu13041822
	for <java-user@lucene.apache.org>; Thu, 24 Jan 2013 15:53:35 GMT
Received: from d06av01.portsmouth.uk.ibm.com (loopback [127.0.0.1])
	by d06av01.portsmouth.uk.ibm.com (8.14.4/8.13.1/NCO v10.0 AVout) with ESMTP id r0OFrhTH026895
	for <java-user@lucene.apache.org>; Thu, 24 Jan 2013 08:53:43 -0700
Received: from d06ml370.portsmouth.uk.ibm.com (d06ml370.portsmouth.uk.ibm.com [9.149.76.152])
	by d06av01.portsmouth.uk.ibm.com (8.14.4/8.13.1/NCO v10.0 AVin) with ESMTP id r0OFrhbE026892
	for <java-user@lucene.apache.org>; Thu, 24 Jan 2013 08:53:43 -0700
In-Reply-To: <CAOdYfZXmg=d=k_uq2T=c707wP6SdZM1e5+-y-VtUf46fyrESuQ@mail.gmail.com>
References: <OF4420813A.F438A161-ONC1257AFD.004A1B23-C1257AFD.004F4053@fr.ibm.com> <CAOdYfZXmg=d=k_uq2T=c707wP6SdZM1e5+-y-VtUf46fyrESuQ@mail.gmail.com>
X-Disclaimed: 50630
To: java-user@lucene.apache.org
MIME-Version: 1.0
Subject: Re: Chinese analyzer
X-KeepSent: B835DCE3:660E1D2C-C1257AFD:00572BAF;
 type=4; name=$KeepSent
X-Mailer: Lotus Notes Release 8.5.3FP2 SHF22 July 19, 2012
From: Jerome Lanneluc <jerome_lanneluc@fr.ibm.com>
Message-ID: <OFB835DCE3.660E1D2C-ONC1257AFD.00572BAF-C1257AFD.00574542@fr.ibm.com>
Date: Thu, 24 Jan 2013 16:53:32 +0100
X-MIMETrack: Serialize by Router on D06ML370/06/M/IBM(Release 8.5.3 ZX853HP5|January 12, 2012) at
 24/01/2013 16:53:34,
	Serialize complete at 24/01/2013 16:53:34
Content-Type: multipart/alternative; boundary="=_alternative 005744E5C1257AFD_="
x-cbid: 13012415-5024-0000-0000-00000507CD54
X-Virus-Checked: Checked by ClamAV on apache.org

--=_alternative 005744E5C1257AFD_=
Content-Type: text/plain; charset="GB2312"
Content-Transfer-Encoding: base64

SXQgbG9va3MgbGlrZSBteSBhdHRhY2htZW50IHdhcyBsb3N0LiBJdCByZWZlcnJlZCB0byANCm9y
Zy5hcGFjaGUubHVjZW5lLmFuYWx5c2lzLmNuLnNtYXJ0LlNtYXJ0Q2hpbmVzZUFuYWx5emVyLg0K
DQpJJ20gaW5saW5pbmcgaXQgaGVyZToNCg0KaW1wb3J0IGphdmEuaW8uSU9FeGNlcHRpb247DQpp
bXBvcnQgamF2YS5pby5TdHJpbmdSZWFkZXI7DQoNCmltcG9ydCBvcmcuYXBhY2hlLmx1Y2VuZS5h
bmFseXNpcy5Ub2tlblN0cmVhbTsNCmltcG9ydCBvcmcuYXBhY2hlLmx1Y2VuZS5hbmFseXNpcy5j
bi5zbWFydC5TbWFydENoaW5lc2VBbmFseXplcjsNCmltcG9ydCBvcmcuYXBhY2hlLmx1Y2VuZS5h
bmFseXNpcy50b2tlbmF0dHJpYnV0ZXMuQ2hhclRlcm1BdHRyaWJ1dGU7DQppbXBvcnQgb3JnLmFw
YWNoZS5sdWNlbmUudXRpbC5WZXJzaW9uOw0KDQpwdWJsaWMgY2xhc3MgQ2hpbmVzZVRva2VuaXpl
clRlc3Qgew0KICAgICAgICBwdWJsaWMgc3RhdGljIHZvaWQgbWFpbihTdHJpbmdbXSBhcmdzKSB0
aHJvd3MgSU9FeGNlcHRpb24gew0KICAgICAgICAgICAgICAgIHRva2VuaXplQ2hpbmVzZVdvcmRz
KCLO0srH1tC5+sjLIi8qIs7SIihJKSAiysciKGFtKSAi1tC5+iIgDQoiyMsiKENoaW5lc2UgPSBw
ZW9wbGUgb2YgQ2hpbmEpKi8pOw0KICAgICAgICAgICAgICAgIHRva2VuaXplQ2hpbmVzZVdvcmRz
KCI/Iik7DQogICAgICAgIH0NCg0KICAgICAgICBwcml2YXRlIHN0YXRpYyB2b2lkIHRva2VuaXpl
Q2hpbmVzZVdvcmRzKFN0cmluZyBjaGluZXNlV29yZHMpIA0KdGhyb3dzIElPRXhjZXB0aW9uIHsN
CiAgICAgICAgICAgICAgICBTbWFydENoaW5lc2VBbmFseXplciBhbmFseXplciA9IG5ldyANClNt
YXJ0Q2hpbmVzZUFuYWx5emVyKFZlcnNpb24uTFVDRU5FXzM2KTsNCiAgICAgICAgICAgICAgICBU
b2tlblN0cmVhbSB0b2tlbml6ZXIgPSBhbmFseXplci50b2tlblN0cmVhbShudWxsLypmaWVsZCAN
Cm5hbWUqLywgbmV3IFN0cmluZ1JlYWRlcihjaGluZXNlV29yZHMpKTsNCiAgICAgICAgICAgICAg
ICBTeXN0ZW0ub3V0LnByaW50KCJTZW50ZW5jZTogIik7DQogICAgICAgICAgICAgICAgcHJpbnQo
Y2hpbmVzZVdvcmRzKTsNCiAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oKTsNCiAg
ICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50KCJUb2tlbnM6IFsiKTsNCiAgICAgICAgICAg
ICAgICB3aGlsZSAodG9rZW5pemVyLmluY3JlbWVudFRva2VuKCkpIHsNCiAgICAgICAgICAgICAg
ICAgICAgICAgIENoYXJTZXF1ZW5jZSBjaGFyVGVybUF0dHJpYnV0ZSA9IA0KdG9rZW5pemVyLmdl
dEF0dHJpYnV0ZShDaGFyVGVybUF0dHJpYnV0ZS5jbGFzcyk7DQogICAgICAgICAgICAgICAgICAg
ICAgICBwcmludChjaGFyVGVybUF0dHJpYnV0ZSk7DQogICAgICAgICAgICAgICAgICAgICAgICBT
eXN0ZW0ub3V0LnByaW50KCIgIik7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAg
IFN5c3RlbS5vdXQucHJpbnRsbigiXSIpOw0KICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJp
bnRsbigpOw0KICAgICAgICB9DQoNCiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgdm9pZCBwcmludChD
aGFyU2VxdWVuY2UgY2hhclRlcm1BdHRyaWJ1dGUpIHsNCiAgICAgICAgICAgICAgICBTeXN0ZW0u
b3V0LnByaW50KGNoYXJUZXJtQXR0cmlidXRlKTsNCiAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0
LnByaW50KCIoIik7DQogICAgICAgICAgICAgICAgZm9yIChpbnQgaSA9IDAsIGxlbmd0aCA9IGNo
YXJUZXJtQXR0cmlidXRlLmxlbmd0aCgpOyBpIDwgDQpsZW5ndGg7IGkrKykgew0KICAgICAgICAg
ICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludCgoaW50KSANCmNoYXJUZXJtQXR0cmlidXRl
LmNoYXJBdChpKSk7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoaSA8IGxlbmd0aC0xKQ0K
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50KCIgIik7DQog
ICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnQoIikiKTsN
CiAgICAgICAgfQ0KfQ0KDQoNCg0KRnJvbTogICBSb2JlcnQgTXVpciA8cmNtdWlyQGdtYWlsLmNv
bT4NClRvOiAgICAgamF2YS11c2VyQGx1Y2VuZS5hcGFjaGUub3JnLCANCkRhdGU6ICAgMDEvMjQv
MjAxMyAwNDozMSBQTQ0KU3ViamVjdDogICAgICAgIFJlOiBDaGluZXNlIGFuYWx5emVyDQoNCg0K
DQpPbiBUaHUsIEphbiAyNCwgMjAxMyBhdCA5OjI1IEFNLCBKZXJvbWUgTGFubmVsdWMNCjxqZXJv
bWVfbGFubmVsdWNAZnIuaWJtLmNvbT4gd3JvdGU6DQo+IE5vdGUgdGhlIDIgdG9rZW5zIGluIHRo
ZSBzZWNvbmQgc2FtcGxlIHdoZW4gSSB3b3VsZCBleHBlY3QgdG8gaGF2ZSBvbmx5IA0Kb25lDQo+
IHRva2VuIHdpdGggdGhlICg1NTQwMSA1NzA0NikgY2hhcmFjdGVycy4NCj4NCj4gSSBjb3VsZCBu
b3QgZmlndXJlIG91dCBpZiBJJ20gZG9pbmcgc29tZXRoaW5nIHdyb25nLCBvciBpZiB0aGlzIGlz
IGEgYnVnIA0KaW4NCj4gdGhlIENoaW5lc2UgYW5hbHl6ZXIuDQo+DQoNCldoaWNoIGFuYWx5emVy
IHNwZWNpZmljYWxseT8gdGhlcmUgaXMgbW9yZSB0aGFuIG9uZS4uLg0KDQotLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0N
ClRvIHVuc3Vic2NyaWJlLCBlLW1haWw6IGphdmEtdXNlci11bnN1YnNjcmliZUBsdWNlbmUuYXBh
Y2hlLm9yZw0KRm9yIGFkZGl0aW9uYWwgY29tbWFuZHMsIGUtbWFpbDogamF2YS11c2VyLWhlbHBA
bHVjZW5lLmFwYWNoZS5vcmcNCg0KDQoNCg0KU2F1ZiBpbmRpY2F0aW9uIGNvbnRyYWlyZSBjaS1k
ZXNzdXM6LyBVbmxlc3Mgc3RhdGVkIG90aGVyd2lzZSBhYm92ZToNCkNvbXBhZ25pZSBJQk0gRnJh
bmNlDQpTaaioZ2UgU29jaWFsIDogMTcgYXZlbnVlIGRlIGwnRXVyb3BlLCA5MjI3NSBCb2lzLUNv
bG9tYmVzIENlZGV4DQpSQ1MgTmFudGVycmUgNTUyIDExOCA0NjUNCkZvcm1lIFNvY2lhbGUgOiBT
LkEuUy4NCkNhcGl0YWwgU29jaWFsIDogNjUzLjI0Mi4zMDYsMjAggA0KU0lSRU4vU0lSRVQgOiA1
NTIgMTE4IDQ2NSAwMzY0NCAtIENvZGUgTkFGIDYyMDJBIA0K
--=_alternative 005744E5C1257AFD_=--


From java-user-return-54835-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jan 24 16:42:18 2013
Return-Path: <java-user-return-54835-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 01C15E444
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 24 Jan 2013 16:42:18 +0000 (UTC)
Received: (qmail 60567 invoked by uid 500); 24 Jan 2013 16:42:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60369 invoked by uid 500); 24 Jan 2013 16:42:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60332 invoked by uid 99); 24 Jan 2013 16:42:14 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Jan 2013 16:42:14 +0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,SPF_NEUTRAL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: 216.139.236.26 is neither permitted nor denied by domain of saisantoshi76@gmail.com)
Received: from [216.139.236.26] (HELO sam.nabble.com) (216.139.236.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Jan 2013 16:42:09 +0000
Received: from ben.nabble.com ([192.168.236.152])
	by sam.nabble.com with esmtp (Exim 4.72)
	(envelope-from <saisantoshi76@gmail.com>)
	id 1TyPs4-0001YN-M6
	for java-user@lucene.apache.org; Thu, 24 Jan 2013 08:41:48 -0800
Date: Thu, 24 Jan 2013 08:41:48 -0800 (PST)
From: saisantoshi <saisantoshi76@gmail.com>
To: java-user@lucene.apache.org
Message-ID: <1359045708674-4035993.post@n3.nabble.com>
Subject: List of files that Lucene 4.0 generates during indexing
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Is there any doc on how many files that lucene generates during indexing
(with 4.0) and what are those files? Once we migrate to 4.0, we would need
to validate looking at the index directory if the files that needs to be
generated was created in the first place. It helps for debugging purposes.
Can someone post a link to the doc for 4.0 generated files?

Thanks,
Sai.



--
View this message in context: http://lucene.472066.n3.nabble.com/List-of-files-that-Lucene-4-0-generates-during-indexing-tp4035993.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54836-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jan 24 16:54:13 2013
Return-Path: <java-user-return-54836-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id B0827E487
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 24 Jan 2013 16:54:13 +0000 (UTC)
Received: (qmail 94045 invoked by uid 500); 24 Jan 2013 16:54:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93945 invoked by uid 500); 24 Jan 2013 16:54:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93935 invoked by uid 99); 24 Jan 2013 16:54:11 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Jan 2013 16:54:11 +0000
X-ASF-Spam-Status: No, hits=-2.3 required=5.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of nbuso@ebi.ac.uk designates 193.62.194.225 as permitted sender)
Received: from [193.62.194.225] (HELO smtp02.ebi.ac.uk) (193.62.194.225)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Jan 2013 16:54:05 +0000
Received: from [172.22.70.38] (linux.windows.ebi.ac.uk [172.22.70.38])
	by smtp02.ebi.ac.uk (8.13.8/8.13.8) with ESMTP id r0OGrhAZ017532
	for <java-user@lucene.apache.org>; Thu, 24 Jan 2013 16:53:43 GMT
Message-ID: <1359046405.2728.73.camel@linux.scoobydoo>
Subject: Re: FacetedSearch and MultiReader
From: Nicola Buso <nbuso@ebi.ac.uk>
Reply-To: nbuso@ebi.ac.uk
To: java-user@lucene.apache.org
Date: Thu, 24 Jan 2013 16:53:25 +0000
In-Reply-To: <CALfq-2R+qNdb34t-BYQvJyWZBo=tT0sE_pNieCOuRO7oSANGnA@mail.gmail.com>
References: <1358780365.2728.14.camel@linux.scoobydoo>
	 <007c01cdf7eb$1eba8d50$5c2fa7f0$@thetaphi.de>
	 <1358782771.2728.28.camel@linux.scoobydoo>
	 <CALfq-2QkLJaLtbaH7P1_XARJYQju_Nd6QUK1CdvGXXPTsjRPQA@mail.gmail.com>
	 <1358784492.2728.35.camel@linux.scoobydoo>
	 <8C30D9E4-B961-4A09-8FEA-343690A0BC56@gmail.com>
	 <CALfq-2R+qNdb34t-BYQvJyWZBo=tT0sE_pNieCOuRO7oSANGnA@mail.gmail.com>
Organization: EBI
Content-Type: text/plain; charset="UTF-8"
X-Mailer: Evolution 3.6.2 (3.6.2-3.fc18) 
Mime-Version: 1.0
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Shai,

I'd like just to give you a confirmation that your solution is working
after the tests I did.

Thanks again for the useful hints.


Nicola.

On Tue, 2013-01-22 at 06:20 +0200, Shai Erera wrote:
> Hi Nicola,
> 
> What I had in mind is something similar to this, which is possible starting
> with Lucene 4.1, due to changes done to facets (per-segment faceting):
> 
> DirTaxoWriter master = new DirTaxoWriter(masterDir);
> Directory[] origTaxoDirs = new Directory[numTaxoDirs]; // open Directories
> and store in that array
> OrdinalMap[] ordinalMaps = new OrdinalMap[numTaxoDirs]; // initialize
> OrdinalMap and store in that array
> 
> // now do the merge
> for (int i = 0; i < origTaxoDirs.length; i++) {
>   master.addTaxonomy(origTaxoDir[i], ordinalMaps[i]);
> }
> 
> // now open your readers, and create the important map
> Map<AtomicReader,OrdinalMap) readerOrdinals = new
> HashMap<AtomicReader,OrdinalMap>();
> DirectoryReader[] readers = new DirectoryReader[origTaxoDirs.length];
> for (int i = 0; i < origTaxoDirs.length; i++) {
>   DirectoryReader r = DirectoryReader.open(contentDirectories[i]);
>   OrdinalMap ordMap = ordinalMaps[i];
>   for (AtomicReaderContext ctx : r.leaves()) {
>     readerOrdinals.put(ctx.reader(), ordMap);
>   }
> }
> 
> MultiReader mr = new MultiReader(readers);
> 
> // create your FacetRequest (CountFacetRequest) with a custom Aggregator
> FacetRequest fr = new CountFacetRequest(cp, topK) {
>   @Override
>   public Aggregator createAggregator(...) {
>     return new OrdinalMappingAggregator() {
>       int[] ordMap;
> 
>       @Override
>       public void setNextReader(AtomicReaderContext context) {
>         ordMap = readerOrdinals.get(context.reader()).getMap();
>       }
> 
>       @Override
>       public void aggregate(int docID, float score, IntsRef ordinals) {
>         int upto = ordinals.offset + ordinals.length;
>         for (int i = ordinals.offset; i < upto; i++) {
>           int ordinal = ordinals[i]; // original ordinal read for the
> AtomicReader given to setNextReader
>           int mappedOrdinal = ordMap[ordinal]; // mapped ordinal, following
> the taxonomy merge
>           counts[mappedOrdinal]++; // count the mapped ordinal instead, so
> all AtomicReaders count that ordinal
>         }
>       }
>     };
>   }
> }
> 
> While it may look like I wrote actual code to do it, I didn't :). So I
> guess it should work, but I haven't tried it.
> That way, you don't touch the content indexes at all, just the taxonomy
> ones.
> 
> Note however that you'll need to do this step every time the taxonomy index
> is updated, and you refresh the TaxoReader instance.
> Also, this will only work if all your indexes are opened in the same JVM
> (which I assume that's the case, since you use MultiReader).
> 
> If you still don't want to do that, then what Dennis wrote above is another
> way to do distributed faceted search, either inside the same JVM or across
> multiple JVMs.
> You obtain the FacetResult from each search and merge the results
> (unfortunately, there's still no tool in Lucene to do that for you).
> Just make sure to ask for a larger K, to ensure that the correct top-K is
> returned (see my previous notes).
> 
> Shai
> 
> 
> 
> 
> On Tue, Jan 22, 2013 at 4:32 AM, Denis Bazhenov <dotsid@gmail.com> wrote:
> 
> > We have similar distribute search system and we have finished with the
> > following scheme. Search replicas (machines where index resides) are build
> > FacetResult's based on their index chunk (top N categories with document
> > counts). Later on the results are merged "by hands" with summing relevant
> > categories from different replicas.
> >
> > On Jan 22, 2013, at 3:08 AM, Nicola Buso <nbuso@ebi.ac.uk> wrote:
> >
> > > Hi Shai,
> > >
> > > I was thinking to that too, but I'm indexing all indexes in a custom
> > > distributed environment than I can't in this moment have a single
> > > categories index for all the content indexes at indexing time.
> > > A solution should be to merge all the categories indexes in one only
> > > index and use your solution but the merge code I see in the examples
> > > merge also the content index and I can't do that.
> > >
> > > I should share the taxonomy if is possible to merge (I see the resulting
> > > categories indexes are not that big currently), but I would prefer to
> > > have a solution where I can collect the facets over multiple categories
> > > indexes in this way I will be sure the solution will scale better.
> > >
> > >
> > > Nicola.
> > >
> > >
> > > On Mon, 2013-01-21 at 17:54 +0200, Shai Erera wrote:
> > >> Hi Nicola,
> > >>
> > >>
> > >> I think that what you're describing corresponds to distributed faceted
> > >> search. I.e., you have N content indexes, alongside N taxonomy
> > >> indexes.
> > >>
> > >> The information that's indexed in each of those sub-indexes does not
> > >> correlate with the other ones.
> > >> For example, say that you index the category "Movie/Drama", it may
> > >> receive ordinal 12 in index1 and 23 in index2.
> > >>
> > >> If you'll try to count ordinals using MultiReader, you'll just mess up
> > >> everything.
> > >>
> > >>
> > >> If you can share a single taxonomy index for all N content indexes,
> > >> then you'll be in a super-simple position:
> > >>
> > >> 1) Open one TaxonomyReader
> > >>
> > >> 2) Execute search with MultiReader and FacetsCollector
> > >>
> > >>
> > >>
> > >> It doesn't get simpler than that ! :)
> > >>
> > >>
> > >> Before I go into great length describing what you should do if you
> > >> cannot share the taxonomy, let me know if that's not an option for
> > >> you.
> > >>
> > >> Shai
> > >>
> > >>
> > >>
> > >> On Mon, Jan 21, 2013 at 5:39 PM, Nicola Buso <nbuso@ebi.ac.uk> wrote:
> > >>        Thanks for the reply Uwe,
> > >>
> > >>        we currently can search with MultiReader over all the indexes
> > >>        we have.
> > >>        Now I want to add the faceting search, than I created a
> > >>        categories index
> > >>        for every index I currently have.
> > >>        To accumulate the faceted results now I have a MultiReader
> > >>        pointing all
> > >>        the indexes and I can create a TaxonomyReader for every
> > >>        categories index
> > >>        I have; all the way I see to obtain FacetResults are:
> > >>        1 - FacetsCollector
> > >>        2 - a FacetsAccumulator implementation
> > >>
> > >>        suppose I use the second option. I should:
> > >>        - search as usual using the MultiReader
> > >>        - than try to collect all the facetresults iterating over my
> > >>        TaxonomyReaders; at every iteration:
> > >>          - I create a FacetsAccumulator using the MultiReader and a
> > >>        TaxonomyReader
> > >>          - I get a list of FacetResult from the accumulator.
> > >>        - as I finish I should in some way merge all the
> > >>        List<FacetResult> I
> > >>        have.
> > >>
> > >>        I think this solution is not correct because the docsids from
> > >>        the search
> > >>        are pointing the multireader instead the taxonomyreader is
> > >>        pointing to
> > >>        the categories index of a single reader.
> > >>        I neither like to merge all the List of FacetResult I retrieve
> > >>        from the
> > >>        Accumulators.
> > >>
> > >>        Probably I'm missing something, can somebody clarify to me how
> > >>        I should
> > >>        collect the facets in this case?
> > >>
> > >>
> > >>        Nicola.
> > >>
> > >>
> > >>
> > >>        On Mon, 2013-01-21 at 16:22 +0100, Uwe Schindler wrote:
> > >>> Just use MultiReader, it extends IndexReader, so you can
> > >>        pass it anywhere where IndexReader can be passed.
> > >>>
> > >>> -----
> > >>> Uwe Schindler
> > >>> H.-H.-Meier-Allee 63, D-28213 Bremen
> > >>> http://www.thetaphi.de
> > >>> eMail: uwe@thetaphi.de
> > >>>
> > >>>> -----Original Message-----
> > >>>> From: Nicola Buso [mailto:nbuso@ebi.ac.uk]
> > >>>> Sent: Monday, January 21, 2013 3:59 PM
> > >>>> To: java-user@lucene.apache.org
> > >>>> Subject: FacetedSearch and MultiReader
> > >>>>
> > >>>> Hi all,
> > >>>>
> > >>>> I'm trying to develop faceted search using lucene 4.0
> > >>        faceting framework.
> > >>>> In our project we are searching on multiple indexes using
> > >>        lucene
> > >>>> MultiReader. How should we use the faceted framework to
> > >>        obtain
> > >>>> FacetResults starting from a MultiReader? all the example
> > >>        I see are using a
> > >>>> "single" IndexReader.
> > >>>>
> > >>>>
> > >>>>
> > >>>> Nicola.
> > >>>>
> > >>>>
> > >>>>
> > >>
> >  ---------------------------------------------------------------------
> > >>>> To unsubscribe, e-mail:
> > >>        java-user-unsubscribe@lucene.apache.org
> > >>>> For additional commands, e-mail:
> > >>        java-user-help@lucene.apache.org
> > >>>
> > >>
> > >>
> > >>
> > >>
> >  ---------------------------------------------------------------------
> > >>        To unsubscribe, e-mail:
> > >>        java-user-unsubscribe@lucene.apache.org
> > >>        For additional commands, e-mail:
> > >>        java-user-help@lucene.apache.org
> > >>
> > >>
> > >>
> > >>
> > >
> > >
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> >
> > ---
> > Denis Bazhenov <dotsid@gmail.com>
> >
> >
> >
> >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54837-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jan 24 16:54:57 2013
Return-Path: <java-user-return-54837-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 87C06E489
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 24 Jan 2013 16:54:57 +0000 (UTC)
Received: (qmail 98907 invoked by uid 500); 24 Jan 2013 16:54:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98856 invoked by uid 500); 24 Jan 2013 16:54:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98848 invoked by uid 99); 24 Jan 2013 16:54:55 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Jan 2013 16:54:55 +0000
X-ASF-Spam-Status: No, hits=0.6 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of sarowe@gmail.com designates 209.85.220.181 as permitted sender)
Received: from [209.85.220.181] (HELO mail-vc0-f181.google.com) (209.85.220.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Jan 2013 16:54:48 +0000
Received: by mail-vc0-f181.google.com with SMTP id d16so6366042vcd.26
        for <java-user@lucene.apache.org>; Thu, 24 Jan 2013 08:54:28 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=x-received:content-type:mime-version:subject:from:in-reply-to:date
         :content-transfer-encoding:message-id:references:to:x-mailer;
        bh=MdGHs/dZySr0vcpo/WXdL9sxueZNw5859wOG9ddB+lU=;
        b=BmFRWtDNLHVc0LBebD7ZTYdJ6udVCFva+iPVT6wBwgsv33u3C6sONbnv14hkw2Y53q
         rYzJ8GO8a5O9RL+9ZPomfvxvshG+s8f/lBHPXT/d/X82mzjwFcZTqfSsN2nQlSsAB+8y
         zyz2RbzDJtXYPUMhaZi9yxbTyX1lRmgAuUgOUnmdZCst6zMW7OuHE+PnJvXAhWvYNCxw
         Q2S0rr+G5ToeOzbc+rYs74CZCdzvDRHqGrDg57RqjK/oFzHGbsYcJRoB3VjUjT1Si4Kg
         8IFFqDkCMkc35DDcTCFJPSfaMsB/KVhF86ueQfQmQnVfLW1pXAOoNZYf/RHUraMLY0GY
         T6uw==
X-Received: by 10.52.95.37 with SMTP id dh5mr668598vdb.26.1359046468025;
        Thu, 24 Jan 2013 08:54:28 -0800 (PST)
Received: from [192.168.1.204] (cpe-67-249-104-72.twcny.res.rr.com. [67.249.104.72])
        by mx.google.com with ESMTPS id t6sm13547483vdf.18.2013.01.24.08.54.26
        (version=TLSv1 cipher=ECDHE-RSA-RC4-SHA bits=128/128);
        Thu, 24 Jan 2013 08:54:27 -0800 (PST)
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Mac OS X Mail 6.2 \(1499\))
Subject: Re: List of files that Lucene 4.0 generates during indexing
From: Steve Rowe <sarowe@gmail.com>
In-Reply-To: <1359045708674-4035993.post@n3.nabble.com>
Date: Thu, 24 Jan 2013 11:54:25 -0500
Content-Transfer-Encoding: quoted-printable
Message-Id: <FEEEC59A-B6CA-4327-9106-D85394044D18@gmail.com>
References: <1359045708674-4035993.post@n3.nabble.com>
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.1499)
X-Virus-Checked: Checked by ClamAV on apache.org

Hi saisantoshi,

Check out the documentation: =
<http://lucene.apache.org/core/4_1_0/index.html> - particularly the =
"File Formats" link under "Reference Documents".

Steve

On Jan 24, 2013, at 11:41 AM, saisantoshi <saisantoshi76@gmail.com> =
wrote:

> Is there any doc on how many files that lucene generates during =
indexing
> (with 4.0) and what are those files? Once we migrate to 4.0, we would =
need
> to validate looking at the index directory if the files that needs to =
be
> generated was created in the first place. It helps for debugging =
purposes.
> Can someone post a link to the doc for 4.0 generated files?
>=20
> Thanks,
> Sai.
>=20
>=20
>=20
> --
> View this message in context: =
http://lucene.472066.n3.nabble.com/List-of-files-that-Lucene-4-0-generates=
-during-indexing-tp4035993.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54838-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jan 24 17:20:11 2013
Return-Path: <java-user-return-54838-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 39231E544
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 24 Jan 2013 17:20:11 +0000 (UTC)
Received: (qmail 82291 invoked by uid 500); 24 Jan 2013 17:20:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82224 invoked by uid 500); 24 Jan 2013 17:20:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82216 invoked by uid 99); 24 Jan 2013 17:20:09 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Jan 2013 17:20:09 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of rcmuir@gmail.com designates 209.85.216.172 as permitted sender)
Received: from [209.85.216.172] (HELO mail-qc0-f172.google.com) (209.85.216.172)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Jan 2013 17:20:02 +0000
Received: by mail-qc0-f172.google.com with SMTP id b25so4310319qca.31
        for <java-user@lucene.apache.org>; Thu, 24 Jan 2013 09:19:42 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=x-received:mime-version:in-reply-to:references:from:date:message-id
         :subject:to:content-type;
        bh=eKANtDCzONtRy+DEWUUbAdoosCYuvbqDg9a+W0vs+X4=;
        b=H5FR1kXq13UyU7cnDd4v4QmQFcNlHa+movVBIN2XIxn8G0qT00MOOk+jxR3VeGyjSv
         I90RCausM9DoPHD6+kUbpcEafkmPw0t3vbz2yIvc7BB8vuMsQR5c7NKbZRMIVMS3tUbS
         Fd3L11No2ErtMQiS4JO/hHpPmN/2m1hKmyhXz0asHWq33eEQpKr6s0LpZ5NMGXZunucW
         SRmMo+k1+4Igxr1OhgvKrPlAoG7GJ4O98aQ5GC4qB2nC2wSBggQsZ3m+8It6zdlLx5Q+
         w26KFzVOXwMYjNYCJUJZwgqOHeLEFa2LXCeC/xnHBIrv57PALiuXDPiKRPv/ZD02LpUQ
         0mNQ==
X-Received: by 10.229.111.159 with SMTP id s31mr678208qcp.67.1359047981855;
 Thu, 24 Jan 2013 09:19:41 -0800 (PST)
MIME-Version: 1.0
Received: by 10.49.103.198 with HTTP; Thu, 24 Jan 2013 09:19:21 -0800 (PST)
In-Reply-To: <OFB835DCE3.660E1D2C-ONC1257AFD.00572BAF-C1257AFD.00574542@fr.ibm.com>
References: <OF4420813A.F438A161-ONC1257AFD.004A1B23-C1257AFD.004F4053@fr.ibm.com>
 <CAOdYfZXmg=d=k_uq2T=c707wP6SdZM1e5+-y-VtUf46fyrESuQ@mail.gmail.com> <OFB835DCE3.660E1D2C-ONC1257AFD.00572BAF-C1257AFD.00574542@fr.ibm.com>
From: Robert Muir <rcmuir@gmail.com>
Date: Thu, 24 Jan 2013 12:19:21 -0500
Message-ID: <CAOdYfZW5SWq9c5ifKFZA=OhUduVk8iJ3xsp4RqJzGhTKCaDi2A@mail.gmail.com>
Subject: Re: Chinese analyzer
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
X-Virus-Checked: Checked by ClamAV on apache.org

On Thu, Jan 24, 2013 at 10:53 AM, Jerome Lanneluc
<jerome_lanneluc@fr.ibm.com> wrote:
> It looks like my attachment was lost. It referred to
> org.apache.lucene.analysis.cn.smart.SmartChineseAnalyzer.
>

I think this analyzer will not properly tokenize text outside of the
BMP: it pretty much only works for simplified text (e.g. chars from
GB2312 range)

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54839-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jan 24 17:23:22 2013
Return-Path: <java-user-return-54839-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 9629CE566
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 24 Jan 2013 17:23:22 +0000 (UTC)
Received: (qmail 95934 invoked by uid 500); 24 Jan 2013 17:23:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95874 invoked by uid 500); 24 Jan 2013 17:23:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95865 invoked by uid 99); 24 Jan 2013 17:23:20 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Jan 2013 17:23:20 +0000
X-ASF-Spam-Status: No, hits=-2.3 required=5.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of nbuso@ebi.ac.uk designates 193.62.194.225 as permitted sender)
Received: from [193.62.194.225] (HELO smtp01.ebi.ac.uk) (193.62.194.225)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Jan 2013 17:23:13 +0000
Received: from [172.22.70.38] (linux.windows.ebi.ac.uk [172.22.70.38])
	by smtp01.ebi.ac.uk (8.13.8/8.13.8) with ESMTP id r0OHMoEU010061
	for <java-user@lucene.apache.org>; Thu, 24 Jan 2013 17:22:50 GMT
Message-ID: <1359048152.2728.88.camel@linux.scoobydoo>
Subject: Faceted search in OR
From: Nicola Buso <nbuso@ebi.ac.uk>
Reply-To: nbuso@ebi.ac.uk
To: java-user <java-user@lucene.apache.org>
Date: Thu, 24 Jan 2013 17:22:32 +0000
Organization: EBI
Content-Type: text/plain; charset="UTF-8"
X-Mailer: Evolution 3.6.2 (3.6.2-3.fc18) 
Mime-Version: 1.0
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi all,

I'm introducing Lucene faceted search in our project and I need some
hints to achieve some functionalities:
- I want facet filtering in OR, how to?
  - obtain facets for the filtered results but also for the non filtered
one. i.e. I have facet A with values A/V1, A/V2, A/V3 and these values
are disjunct each other, than a document having field with value V1
can't have also value V2 and so on; I would like to let the user select
more of these facet values in OR; how can I accumulate all the facets
values also filtering by facet selection? Should it work in a way
similar to ComplementCountingAggregator?
  - Can I use DrillDown class to obtain the OR facet filtering or have I
to rewrite a similar class using the BooleanQuery in OR. It's not clear
to me by this comment in the API:
Wraps a given Query as a drill-down query over the given categories,
assuming all are required (e.g. AND). You can construct a query with
different modes (such as OR or AND of ORs) by creating a BooleanQuery
and call this method several times. Make sure to wrap the query in that
case by ConstantScoreQuery and set the boost to 0.0f, so that it doesn't
affect scoring. 


Do you have any examples doing this?

Regards

Nicola.





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54840-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jan 24 17:36:38 2013
Return-Path: <java-user-return-54840-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 978AFE2C2
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 24 Jan 2013 17:36:38 +0000 (UTC)
Received: (qmail 44966 invoked by uid 500); 24 Jan 2013 17:36:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44732 invoked by uid 500); 24 Jan 2013 17:36:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44724 invoked by uid 99); 24 Jan 2013 17:36:36 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Jan 2013 17:36:36 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of serera@gmail.com designates 209.85.212.174 as permitted sender)
Received: from [209.85.212.174] (HELO mail-wi0-f174.google.com) (209.85.212.174)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Jan 2013 17:36:31 +0000
Received: by mail-wi0-f174.google.com with SMTP id hq4so679405wib.1
        for <java-user@lucene.apache.org>; Thu, 24 Jan 2013 09:36:10 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:x-received:in-reply-to:references:date:message-id
         :subject:from:to:content-type;
        bh=36tv2JBD+GIpPLwnIVeRr0SjLZmDl4vhg+EF8uDrQlE=;
        b=G6u/Qm75KLf9T6TiL0nNCX8d0Utb6fkhiBB7n3HFW94zZC0wj6gkH5TXo4EBvAEZ6p
         l3en2U6npny7vNjsHdniA4BuDjKjp6mL18CfEv1wNgEnhjmixSnOGUcmt1McT+GNiIsF
         j9RnKFThJXKb8VHt1QCI1sjVsS+sztc8lnZ5v5N6BSCFSIrcOGFTG3s4vE7t1ipyeMkB
         QxoWjIYK2FCRZlOdFuuC1Rid+68/c0HHhdM1rSn6w23D2KmJHeWn2Rwpvj6jHwa4xGXT
         oAsW4rL7buUzWAQL0CJO8+FtxEcumr6XjTTp3wHOHmn9Sv7E6DlrHvHbSukd++BPEPRj
         SseA==
MIME-Version: 1.0
X-Received: by 10.180.88.40 with SMTP id bd8mr4420020wib.33.1359048970248;
 Thu, 24 Jan 2013 09:36:10 -0800 (PST)
Received: by 10.194.173.231 with HTTP; Thu, 24 Jan 2013 09:36:10 -0800 (PST)
In-Reply-To: <1359048152.2728.88.camel@linux.scoobydoo>
References: <1359048152.2728.88.camel@linux.scoobydoo>
Date: Thu, 24 Jan 2013 19:36:10 +0200
Message-ID: <CALfq-2SP=wiDnDsviy1fYT0mYmm8uN9BGEJxiG01J15Zb9yuKQ@mail.gmail.com>
Subject: Re: Faceted search in OR
From: Shai Erera <serera@gmail.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>, nbuso@ebi.ac.uk
Content-Type: multipart/alternative; boundary=f46d04428f121aa26b04d40c3fcc
X-Virus-Checked: Checked by ClamAV on apache.org

--f46d04428f121aa26b04d40c3fcc
Content-Type: text/plain; charset=ISO-8859-1

Hi Nicola,

Regarding the OR drill-down, yes you can construct your own BooleanQuery,
passing Occur.SHOULD instead of MUST. Currently DrillDown does not help you
do that, so you can copy the code from DrillDown.query and change SHOULD to
MUST. I opened LUCENE-4716 to add this support to DrillDown.

Not sure that I understand your second question. If you want to retrieve
counts for all descendants of A, then set your FR.setNumResults to
Integer.MAX_VALUE. But note, it's going to be costly, i.e. you'd get a
FacetResultNode per child of A, so depending how "wide" A is, this may have
some impact on RAM consumption.

If that's not what you meant, could you please clarify?

Shai


On Thu, Jan 24, 2013 at 7:22 PM, Nicola Buso <nbuso@ebi.ac.uk> wrote:

> Hi all,
>
> I'm introducing Lucene faceted search in our project and I need some
> hints to achieve some functionalities:
> - I want facet filtering in OR, how to?
>   - obtain facets for the filtered results but also for the non filtered
> one. i.e. I have facet A with values A/V1, A/V2, A/V3 and these values
> are disjunct each other, than a document having field with value V1
> can't have also value V2 and so on; I would like to let the user select
> more of these facet values in OR; how can I accumulate all the facets
> values also filtering by facet selection? Should it work in a way
> similar to ComplementCountingAggregator?
>   - Can I use DrillDown class to obtain the OR facet filtering or have I
> to rewrite a similar class using the BooleanQuery in OR. It's not clear
> to me by this comment in the API:
> Wraps a given Query as a drill-down query over the given categories,
> assuming all are required (e.g. AND). You can construct a query with
> different modes (such as OR or AND of ORs) by creating a BooleanQuery
> and call this method several times. Make sure to wrap the query in that
> case by ConstantScoreQuery and set the boost to 0.0f, so that it doesn't
> affect scoring.
>
>
> Do you have any examples doing this?
>
> Regards
>
> Nicola.
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--f46d04428f121aa26b04d40c3fcc--

From java-user-return-54841-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jan 24 18:22:39 2013
Return-Path: <java-user-return-54841-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 35E5EE46A
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 24 Jan 2013 18:22:39 +0000 (UTC)
Received: (qmail 38585 invoked by uid 500); 24 Jan 2013 18:22:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38515 invoked by uid 500); 24 Jan 2013 18:22:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38502 invoked by uid 99); 24 Jan 2013 18:22:37 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Jan 2013 18:22:37 +0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,SPF_NEUTRAL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: 216.139.236.26 is neither permitted nor denied by domain of saisantoshi76@gmail.com)
Received: from [216.139.236.26] (HELO sam.nabble.com) (216.139.236.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Jan 2013 18:22:31 +0000
Received: from ben.nabble.com ([192.168.236.152])
	by sam.nabble.com with esmtp (Exim 4.72)
	(envelope-from <saisantoshi76@gmail.com>)
	id 1TyRRD-0000ZK-55
	for java-user@lucene.apache.org; Thu, 24 Jan 2013 10:22:11 -0800
Date: Thu, 24 Jan 2013 10:22:11 -0800 (PST)
From: saisantoshi <saisantoshi76@gmail.com>
To: java-user@lucene.apache.org
Message-ID: <1359051731144-4036028.post@n3.nabble.com>
In-Reply-To: <FEEEC59A-B6CA-4327-9106-D85394044D18@gmail.com>
References: <1359045708674-4035993.post@n3.nabble.com> <FEEEC59A-B6CA-4327-9106-D85394044D18@gmail.com>
Subject: Re: List of files that Lucene 4.0 generates during indexing
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks. I checked it out.

Here are the list of files that has been generated:

        _0.fdt
	_0.fdx
	_0.fnm
	_0.si
	_0_Lucene40_0.frq
	_0_Lucene40_0.prx
	_0_Lucene40_0.tim
	_0_Lucene40_0.tip
	_0_nrm.cfe
	_0_nrm.cfs
	index.v0008
	segments.gen
	segments_1

My question is, are the above files are the right set of files that needs to
be generated? I just want to make sure if there is a check list to verify
what files must be there or any files that are missing from the above. I am
looking to validate the above. The docs says various number of different
file formats but does not explicit mention the necessary files for 4.0.

Thanks,
Sai.



--
View this message in context: http://lucene.472066.n3.nabble.com/List-of-files-that-Lucene-4-0-generates-during-indexing-tp4035993p4036028.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54842-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jan 24 18:41:36 2013
Return-Path: <java-user-return-54842-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 2E2B9E1E0
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 24 Jan 2013 18:41:36 +0000 (UTC)
Received: (qmail 95434 invoked by uid 500); 24 Jan 2013 18:41:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95377 invoked by uid 500); 24 Jan 2013 18:41:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95369 invoked by uid 99); 24 Jan 2013 18:41:34 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Jan 2013 18:41:34 +0000
X-ASF-Spam-Status: No, hits=1.9 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FROM_EXCESS_BASE64,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of zhoucheng2008@gmail.com designates 209.85.210.47 as permitted sender)
Received: from [209.85.210.47] (HELO mail-da0-f47.google.com) (209.85.210.47)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Jan 2013 18:41:25 +0000
Received: by mail-da0-f47.google.com with SMTP id s35so4385763dak.34
        for <java-user@lucene.apache.org>; Thu, 24 Jan 2013 10:41:04 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=x-received:x-qq-ssf:x-has-attach:x-qq-business-origin
         :x-originating-ip:x-qq-style:x-qq-mid:from:to:subject:mime-version
         :content-type:content-transfer-encoding:date:x-priority:message-id
         :x-qq-mime:x-mailer:x-qq-mailer:x-qq-replyhash;
        bh=dUB6gOqQxCK4xiTnPL5lYAu9dpkIMHJIOZ6VfGQYBeg=;
        b=bXT5FjUMxjVliqtM+kR8c0Ni/lew6FnP3HJBOAYDrg2PG30eVKNvCsMDIt2PTkjONy
         x19RXO8DXfcDaZAahppINcgNgZgYaDKUcwiRDGIE0cjlsfjR6Eyd4wdVrgAz/2fq3QKb
         51AzpjKmRwvZ66zKgboYIV1NTFm4sEgIQO+Q5PcpeaQs541dPVvEgCMI60YMTqwbzX4+
         uuvm4YAHIj6WzPHlKC1aZA31b6u0zP0LY31AbaVCZRUz1j4g9r8HHCqf7TASO18SfZEy
         GuKUCkDHTvPGnny9RHT2IPgXqo3PcOT+5szct88Q+JM98liO+2y/GbupXw6bsMofHzCY
         9SJQ==
X-Received: by 10.68.209.230 with SMTP id mp6mr7608743pbc.8.1359052864247;
        Thu, 24 Jan 2013 10:41:04 -0800 (PST)
Received: from smtpbg117.qq.com (smtpbg64.qq.com. [103.7.28.238])
        by mx.google.com with ESMTPS id ty4sm15300374pbc.57.2013.01.24.10.41.01
        (version=TLSv1 cipher=RC4-SHA bits=128/128);
        Thu, 24 Jan 2013 10:41:02 -0800 (PST)
X-QQ-SSF: 000000000000004000000000000000X
X-HAS-ATTACH: no
X-QQ-BUSINESS-ORIGIN: 2
X-Originating-IP: 218.73.89.35
X-QQ-STYLE: 
X-QQ-mid: webmail661t1359052858t579494
From: "=?utf-8?B?emhvdWNoZW5nMjAwOA==?=" <zhoucheng2008@gmail.com>
To: "=?utf-8?B?amF2YS11c2Vy?=" <java-user@lucene.apache.org>
Subject: =?utf-8?B?5Zue5aSN77yaIEluZGV4UmVhZGVyLm9wZW4gYW5k?=
 =?utf-8?B?IENvcnJ1cHRJbmRleEV4Y2VwdGlvbg==?=
Mime-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_5101803A_D6449420_46CDECE4"
Content-Transfer-Encoding: 8Bit
Date: Fri, 25 Jan 2013 02:40:58 +0800
X-Priority: 3
Message-ID: <tencent_3BFC10273212E0A629BB2FC7@qq.com>
X-QQ-MIME: TCMime 1.0 by Tencent
X-Mailer: QQMail 2.x
X-QQ-Mailer: QQMail 2.x
X-QQ-ReplyHash: 2106567813
X-Virus-Checked: Checked by ClamAV on apache.org

------=_NextPart_5101803A_D6449420_46CDECE4
Content-Type: text/plain;
	charset="utf-8"
Content-Transfer-Encoding: base64

V2hhdCBmaWxlIGhhbmRsZXJzIGRpZCB5b3UgZ3V5IHJlZmVyIHRvPyANCg0KDQpJIG9wZW5l
ZCB0aGUgaW5kZXggZGlyZWN0b3J5IG9ubHkuIElzIHRoaXMgdGhlIGZpbGUgaGFuZGxlcj8g
QWxzbywgaG93IHRvIHNhZmVseSBhbmQgZWZmZWN0aXZlbHkgY2xvc2UgdGhlIGluZGV4IGRp
cmVjdG9yeT8NCg0KDQpJIGZvdW5kIHRoZSBsaW5rJ3MgZXhwbGFuYXRpb24gc29tZXdoYXQg
c2VsZi1jb250cmFkaWN0b3J5LiBBZnRlciBJIHJlYWQgaXQsIEkgYW0gY29uZnVzZWQgaWYg
SSBzaG91bGQgY2xvc2UgdGhlIGZpbGUgaGFuZGxlcnMgaW4gdGhlIGZpbmFsbHkgYmxvY2sg
b3Igbm90LiBJIGFtIHVzaW5nIEphdmEuDQoNCg0KDQoNCi0tLS0tLS0tLS0tLS0tLS0tLSDl
jp/lp4vpgq7ku7YgLS0tLS0tLS0tLS0tLS0tLS0tDQrlj5Hku7bkuro6ICJJYW4gTGVhIjxp
YW4ubGVhQGdtYWlsLmNvbT47DQrlj5HpgIHml7bpl7Q6IDIwMTPlubQx5pyIMjTml6Uo5pif
5pyf5ZubKSDkuIvljYg1OjQ2DQrmlLbku7bkuro6ICJqYXZhLXVzZXIiPGphdmEtdXNlckBs
dWNlbmUuYXBhY2hlLm9yZz47IA0KDQrkuLvpopg6IFJlOiBJbmRleFJlYWRlci5vcGVuIGFu
ZCBDb3JydXB0SW5kZXhFeGNlcHRpb24NCg0KDQoNCldlbGwsIHJhaXNpbmcgdGhlIGxpbWl0
cyBpcyBvbmUgb3B0aW9uIGJ1dCB0aGVyZSBtYXkgYmUgYmV0dGVyIG9uZXMuDQoNClRoZXJl
J3MgYW4gRkFRIGVudHJ5IG9uIHRoaXM6DQpodHRwOi8vd2lraS5hcGFjaGUub3JnL2x1Y2Vu
ZS1qYXZhL0x1Y2VuZUZBUSNXaHlfYW1fSV9nZXR0aW5nX2FuX0lPRXhjZXB0aW9uX3RoYXRf
c2F5c18uMjJUb29fbWFueV9vcGVuX2ZpbGVzLjIyLjNGDQoNClRha2UgYSBsb29rIGF0IG9y
Zy5hcGFjaGUubHVjZW5lLnNlYXJjaC5TZWFyY2hlck1hbmFnZXIgIlV0aWxpdHkgY2xhc3MN
CnRvIHNhZmVseSBzaGFyZSBJbmRleFNlYXJjaGVyIGluc3RhbmNlcyBhY3Jvc3MgbXVsdGlw
bGUgdGhyZWFkcyIuDQoNCg0KLS0NCklhbi4NCg0KDQpPbiBUaHUsIEphbiAyNCwgMjAxMyBh
dCA5OjE4IEFNLCBSYWZhxYIgS3XEhyA8ci5rdWNAc29sci5wbD4gd3JvdGU6DQo+IEhlbGxv
IQ0KPg0KPiBZb3UgbmVlZCB0byBhbGxvdyB0aGUgdXNlciB0aGF0IGlzIHJ1bm5pbmcgTHVj
ZW5lIHRvIG9wZW4gbW9yZSBmaWxlcy4NCj4gVGhlcmUgYXJlIHBsZW50eSBvZiB0dXRvcmlh
bHMgYXZhaWxhYmxlIG9uIHRoZSB3ZWIuIE1vZGlmeSB5b3VyDQo+IC9ldGMvc2VjdXJpdHkv
bGltaXRzLmNvbmYgYW5kIGlmIGZvciBleGFtcGxlIHlvdXIgdXNlciBpcyBsdWNlbmUgYWRk
DQo+IHRoZSBmb2xsb3dpbmcgKG9yIG1vZGlmeSBpZiB0aG9zZSBhbHJlYWR5IGV4aXN0cyk6
DQo+DQo+IGx1Y2VuZSBzb2Z0IG5vZmlsZSA2NDAwMA0KPiBsdWNlbmUgaGFyZCBub2ZpbGUg
NjQwMDANCj4NCj4gUmVsb2cgYW5kIHJ1bjoNCj4NCj4gc3VkbyAtdSBsdWNlbmUgLXMgInVs
aW1pdCAtU24iDQo+DQo+IFRvIHNlZSBpZiB0aGUgbGltaXRzIGFyZSB0aGUgb25lcyB5b3Ug
c2V0LiBJZiB0aGV5IGFyZSBub3QsIGNoZWNrIGlmDQo+IHlvdSBkb24ndCBoYXZlIHBhbV9s
aW1pdHMuc28gY29tbWVudGVkIGluIHRoZSAvZXRjL3BhbS5kLw0KPg0KPiAtLQ0KPiBSZWdh
cmRzLA0KPiAgUmFmYcWCIEt1xIcNCj4gIFNlbWF0ZXh0IDo6IGh0dHA6Ly9zZW1hdGV4dC5j
b20vIDo6IFNvbHIgLSBMdWNlbmUgLSBOdXRjaA0KPg0KPj4gSGVyZSBpcyB0aGUgbG9nOg0K
Pg0KPj4gSmFuIDI0LCAyMDEzIDQ6MTA6MzMgQU0NCj4+IG9yZy5hcGFjaGUudG9tY2F0LnV0
aWwubmV0LkFwckVuZHBvaW50JEFjY2VwdG9yIHJ1bg0KPj4gU0VWRVJFOiBTb2NrZXQgYWNj
ZXB0IGZhaWxlZA0KPj4gb3JnLmFwYWNoZS50b21jYXQuam5pLkVycm9yOiAyNDogVG9vIG1h
bnkgb3BlbiBmaWxlcw0KPj4gYXQgb3JnLmFwYWNoZS50b21jYXQuam5pLlNvY2tldC5hY2Nl
cHQoTmF0aXZlIE1ldGhvZCkNCj4+IGF0DQo+PiBvcmcuYXBhY2hlLnRvbWNhdC51dGlsLm5l
dC5BcHJFbmRwb2ludCRBY2NlcHRvci5ydW4oQXByRW5kcG9pbnQuamF2YTo5OTApDQo+PiBh
dCBqYXZhLmxhbmcuVGhyZWFkLnJ1bihUaHJlYWQuamF2YTo3MjIpDQo+DQo+DQo+DQo+PiBU
b28gbWFueSBvcGVuIGZpbGVzLi4uIEhvdyB0byBzb2x2ZSBpdD8NCj4NCj4NCj4+IE9uIFR1
ZSwgSmFuIDIyLCAyMDEzIGF0IDEwOjUyIFBNLCBNaWNoYWVsIE1jQ2FuZGxlc3MgPA0KPj4g
bHVjZW5lQG1pa2VtY2NhbmRsZXNzLmNvbT4gd3JvdGU6DQo+DQo+Pj4gQ2FuIHlvdSBwb3N0
IHRoZSBmdWxsIHN0YWNrIHRyYWNlIG9mIHRoZSBDb3JydXB0SW5kZXhFeGNlcHRpb24/DQo+
Pj4NCj4+PiBNaWtlIE1jQ2FuZGxlc3MNCj4+Pg0KPj4+IGh0dHA6Ly9ibG9nLm1pa2VtY2Nh
bmRsZXNzLmNvbQ0KPj4+DQo+Pj4gT24gVHVlLCBKYW4gMjIsIDIwMTMgYXQgODoyMCBBTSwg
Q2hlbmcgPHpob3VjaGVuZzIwMDhAZ21haWwuY29tPiB3cm90ZToNCj4+PiA+IEhpLA0KPj4+
ID4NCj4+PiA+IEkgcnVuIGEgTHVjZW5lIGFwcGxpY2F0aW9uIG9uIFRvbWNhdC4gVGhlIGFw
cCB3aWxsIHRyeSB0byBvcGVuIGEgTGludXgNCj4+PiA+IGRpcmVjdG9yeSwgYW5kIHNvbWV0
aW1lIHJldHVybnMgQ29ycnVwdEluZGV4RXhjZXB0aW9uIGVycm9yLg0KPj4+ID4NCj4+PiA+
IFNob3J0bHkgYWZ0ZXIgSSByZXN0YXJ0IFRvbWNhdCAobm90aGluZyBlbHNlIGNoYW5nZXMp
LCB0aGUgYXBwIGNhbiBiZSBydW4NCj4+PiA+IG9uIHRoZSBmbHkuIEkgYW0gdXNpbmcgdGhl
IGZvbGxvd2luZyBzdGF0ZW1lbnRzIHRvIG9wZW4gYSBkaXJlY3Rvcnk6DQo+Pj4gPg0KPj4+
ID4NCj4+PiA+ICAgICB0cnkgew0KPj4+ID4gICAgICAgc2VhcmNoZXIgPSBuZXcgSW5kZXhT
ZWFyY2hlcihJbmRleFJlYWRlci5vcGVuKG5ldw0KPj4+IE5JT0ZTRGlyZWN0b3J5KG5ldw0K
Pj4+ID4gRmlsZSgiL2hvbWUvdXNlci8iKyB0eXBlKSkpKTsNCj4+PiA+ICAgICB9IGNhdGNo
IChJT0V4Y2VwdGlvbiBlKSB7DQo+Pj4gPiAgICAgICB0aHJvdyBuZXcgRXhjZXB0aW9uKCJb
IiArIHR5cGUgKyAiXSBDYW5ub3Qgb3BlbiBpbmRleCBmb2xkZXIuLi4iKTsNCj4+PiA+ICAg
ICB9DQo+Pj4gPg0KPj4+ID4gSSB3b3VsZCBsaWtlIHRvIGtub3cgaG93IHRvIHRhY2tsZSB0
aGlzIHByb2JsZW0uDQo+Pj4gPg0KPj4+ID4gTWFueSB0aGFua3MhDQo+Pj4NCj4+PiAtLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0NCj4+PiBUbyB1bnN1YnNjcmliZSwgZS1tYWlsOiBqYXZhLXVzZXItdW5z
dWJzY3JpYmVAbHVjZW5lLmFwYWNoZS5vcmcNCj4+PiBGb3IgYWRkaXRpb25hbCBjb21tYW5k
cywgZS1tYWlsOiBqYXZhLXVzZXItaGVscEBsdWNlbmUuYXBhY2hlLm9yZw0KPj4+DQo+Pj4N
Cj4NCj4NCj4gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQo+IFRvIHVuc3Vic2NyaWJlLCBlLW1haWw6IGph
dmEtdXNlci11bnN1YnNjcmliZUBsdWNlbmUuYXBhY2hlLm9yZw0KPiBGb3IgYWRkaXRpb25h
bCBjb21tYW5kcywgZS1tYWlsOiBqYXZhLXVzZXItaGVscEBsdWNlbmUuYXBhY2hlLm9yZw0K
Pg0KDQotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0NClRvIHVuc3Vic2NyaWJlLCBlLW1haWw6IGphdmEtdXNl
ci11bnN1YnNjcmliZUBsdWNlbmUuYXBhY2hlLm9yZw0KRm9yIGFkZGl0aW9uYWwgY29tbWFu
ZHMsIGUtbWFpbDogamF2YS11c2VyLWhlbHBAbHVjZW5lLmFwYWNoZS5vcmc=

------=_NextPart_5101803A_D6449420_46CDECE4--


From java-user-return-54843-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jan 24 19:59:55 2013
Return-Path: <java-user-return-54843-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id D9E22E13B
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 24 Jan 2013 19:59:55 +0000 (UTC)
Received: (qmail 44906 invoked by uid 500); 24 Jan 2013 19:59:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44849 invoked by uid 500); 24 Jan 2013 19:59:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44840 invoked by uid 99); 24 Jan 2013 19:59:53 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Jan 2013 19:59:53 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 74.125.82.43 as permitted sender)
Received: from [74.125.82.43] (HELO mail-wg0-f43.google.com) (74.125.82.43)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Jan 2013 19:59:49 +0000
Received: by mail-wg0-f43.google.com with SMTP id e12so4964928wge.10
        for <java-user@lucene.apache.org>; Thu, 24 Jan 2013 11:59:28 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=x-received:mime-version:in-reply-to:references:from:date:message-id
         :subject:to:content-type:content-transfer-encoding;
        bh=JNzLpF47AVyUyZ1Pdn/OWDW/EWR5pP1Rl+ZljmIULaM=;
        b=TdUKHg1DL1XH7qenkyQSq9MlsOaZdg+uzvpJs6lRmVDCgcDW71fGlnTgmHYKl7kzsr
         ePQfi5KkKLR8W7f8jSKgpDz/sMXy7Gj+sHHrLAVqkBY+GGY5ndAlYKOnlDgwUE2bFtes
         x8MafTTKHGposXt+qJHFL65D1nRwx0DVgY4WQkBk74sc3RtYHDvDXSbtOjkn8NZPSh4Q
         IKFzzLxupmvpXjt7hVksJYB7w9ICzvYY6qtDy45UJjAF2yr4QWBoBMo1F7bM7CkUWkJ2
         XkB+qibZjWS8UUMQdTdZzZeChzIZFvGGvdTYEm7rmSNcMpuO25PPUcZo59Bci08Ic3y+
         QvUg==
X-Received: by 10.180.85.226 with SMTP id k2mr5061300wiz.34.1359057568076;
 Thu, 24 Jan 2013 11:59:28 -0800 (PST)
MIME-Version: 1.0
Received: by 10.194.57.11 with HTTP; Thu, 24 Jan 2013 11:59:07 -0800 (PST)
In-Reply-To: <tencent_3BFC10273212E0A629BB2FC7@qq.com>
References: <tencent_3BFC10273212E0A629BB2FC7@qq.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Thu, 24 Jan 2013 19:59:07 +0000
Message-ID: <CAEY5pxVdrHsSJ8x66JE+qnY_S-E2JsQ_uJ8uqc5khRCWeJNC7w@mail.gmail.com>
Subject: =?GB2312?Q?Re=3A_=BB=D8=B8=B4=A3=BA_IndexReader=2Eopen_and_CorruptIndexExcep?=
	=?GB2312?Q?tion?=
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

There will be one file handle for every currently open file.

Use SearcherManager and this problem should go away.


--
Ian.


On Thu, Jan 24, 2013 at 6:40 PM, zhoucheng2008 <zhoucheng2008@gmail.com> wr=
ote:
> What file handlers did you guy refer to?
>
>
> I opened the index directory only. Is this the file handler? Also, how to=
 safely and effectively close the index directory?
>
>
> I found the link's explanation somewhat self-contradictory. After I read =
it, I am confused if I should close the file handlers in the finally block =
or not. I am using Java.
>
>
>
>
> ------------------ =E5=8E=9F=E5=A7=8B=E9=82=AE=E4=BB=B6 -----------------=
-
> =E5=8F=91=E4=BB=B6=E4=BA=BA: "Ian Lea"<ian.lea@gmail.com>;
> =E5=8F=91=E9=80=81=E6=97=B6=E9=97=B4: 2013=E5=B9=B41=E6=9C=8824=E6=97=A5(=
=E6=98=9F=E6=9C=9F=E5=9B=9B) =E4=B8=8B=E5=8D=885:46
> =E6=94=B6=E4=BB=B6=E4=BA=BA: "java-user"<java-user@lucene.apache.org>;
>
> =E4=B8=BB=E9=A2=98: Re: IndexReader.open and CorruptIndexException
>
>
>
> Well, raising the limits is one option but there may be better ones.
>
> There's an FAQ entry on this:
> http://wiki.apache.org/lucene-java/LuceneFAQ#Why_am_I_getting_an_IOExcept=
ion_that_says_.22Too_many_open_files.22.3F
>
> Take a look at org.apache.lucene.search.SearcherManager "Utility class
> to safely share IndexSearcher instances across multiple threads".
>
>
> --
> Ian.
>
>
> On Thu, Jan 24, 2013 at 9:18 AM, Rafa=C5=82 Ku=C4=87 <r.kuc@solr.pl> wrot=
e:
>> Hello!
>>
>> You need to allow the user that is running Lucene to open more files.
>> There are plenty of tutorials available on the web. Modify your
>> /etc/security/limits.conf and if for example your user is lucene add
>> the following (or modify if those already exists):
>>
>> lucene soft nofile 64000
>> lucene hard nofile 64000
>>
>> Relog and run:
>>
>> sudo -u lucene -s "ulimit -Sn"
>>
>> To see if the limits are the ones you set. If they are not, check if
>> you don't have pam_limits.so commented in the /etc/pam.d/
>>
>> --
>> Regards,
>>  Rafa=C5=82 Ku=C4=87
>>  Sematext :: http://sematext.com/ :: Solr - Lucene - Nutch
>>
>>> Here is the log:
>>
>>> Jan 24, 2013 4:10:33 AM
>>> org.apache.tomcat.util.net.AprEndpoint$Acceptor run
>>> SEVERE: Socket accept failed
>>> org.apache.tomcat.jni.Error: 24: Too many open files
>>> at org.apache.tomcat.jni.Socket.accept(Native Method)
>>> at
>>> org.apache.tomcat.util.net.AprEndpoint$Acceptor.run(AprEndpoint.java:99=
0)
>>> at java.lang.Thread.run(Thread.java:722)
>>
>>
>>
>>> Too many open files... How to solve it?
>>
>>
>>> On Tue, Jan 22, 2013 at 10:52 PM, Michael McCandless <
>>> lucene@mikemccandless.com> wrote:
>>
>>>> Can you post the full stack trace of the CorruptIndexException?
>>>>
>>>> Mike McCandless
>>>>
>>>> http://blog.mikemccandless.com
>>>>
>>>> On Tue, Jan 22, 2013 at 8:20 AM, Cheng <zhoucheng2008@gmail.com> wrote=
:
>>>> > Hi,
>>>> >
>>>> > I run a Lucene application on Tomcat. The app will try to open a Lin=
ux
>>>> > directory, and sometime returns CorruptIndexException error.
>>>> >
>>>> > Shortly after I restart Tomcat (nothing else changes), the app can b=
e run
>>>> > on the fly. I am using the following statements to open a directory:
>>>> >
>>>> >
>>>> >     try {
>>>> >       searcher =3D new IndexSearcher(IndexReader.open(new
>>>> NIOFSDirectory(new
>>>> > File("/home/user/"+ type))));
>>>> >     } catch (IOException e) {
>>>> >       throw new Exception("[" + type + "] Cannot open index folder..=
.");
>>>> >     }
>>>> >
>>>> > I would like to know how to tackle this problem.
>>>> >
>>>> > Many thanks!
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54844-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jan 24 20:29:36 2013
Return-Path: <java-user-return-54844-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 6A03BC1C9
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 24 Jan 2013 20:29:36 +0000 (UTC)
Received: (qmail 56760 invoked by uid 500); 24 Jan 2013 20:29:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56704 invoked by uid 500); 24 Jan 2013 20:29:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56696 invoked by uid 99); 24 Jan 2013 20:29:34 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Jan 2013 20:29:34 +0000
X-ASF-Spam-Status: No, hits=-2.3 required=5.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of nbuso@ebi.ac.uk designates 193.62.194.225 as permitted sender)
Received: from [193.62.194.225] (HELO smtp01.ebi.ac.uk) (193.62.194.225)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Jan 2013 20:29:29 +0000
Received: from [172.22.70.38] (linux.windows.ebi.ac.uk [172.22.70.38])
	by smtp01.ebi.ac.uk (8.13.8/8.13.8) with ESMTP id r0OKT7Gs027124;
	Thu, 24 Jan 2013 20:29:07 GMT
Message-ID: <1359059327.2728.96.camel@linux.scoobydoo>
Subject: Re: Faceted search in OR
From: Nicola Buso <nbuso@ebi.ac.uk>
Reply-To: nbuso@ebi.ac.uk
To: Shai Erera <serera@gmail.com>
Cc: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Thu, 24 Jan 2013 20:28:47 +0000
In-Reply-To: <CALfq-2SP=wiDnDsviy1fYT0mYmm8uN9BGEJxiG01J15Zb9yuKQ@mail.gmail.com>
References: <1359048152.2728.88.camel@linux.scoobydoo>
	 <CALfq-2SP=wiDnDsviy1fYT0mYmm8uN9BGEJxiG01J15Zb9yuKQ@mail.gmail.com>
Organization: EBI
Content-Type: text/plain; charset="UTF-8"
X-Mailer: Evolution 3.6.2 (3.6.2-3.fc18) 
Mime-Version: 1.0
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Shai,

the use case is simple. Suppose you want to buy an hi-fi on a online
shop. Go in the website in the Electronic department and write "hi-fi"
in the search box, the interface return you lots of results and a facet
on brands (10 brands values).
You select brand A and the results are filtered accordingly; suppose now
you want to filter adding to the results the brand D, you can't because
the filtered results by A don't contain values D for the brand facet.

Than how can I retrieve also the facets for the results not filtered?
I think it's a common use case when you permit to the user to filter in
OR by facets.


Nicola.

On Thu, 2013-01-24 at 19:36 +0200, Shai Erera wrote:
> Hi Nicola,
> 
> 
> Regarding the OR drill-down, yes you can construct your own
> BooleanQuery, passing Occur.SHOULD instead of MUST. Currently
> DrillDown does not help you do that, so you can copy the code from
> DrillDown.query and change SHOULD to MUST. I opened LUCENE-4716 to add
> this support to DrillDown.
> 
> 
> 
> Not sure that I understand your second question. If you want to
> retrieve counts for all descendants of A, then set your
> FR.setNumResults to Integer.MAX_VALUE. But note, it's going to be
> costly, i.e. you'd get a FacetResultNode per child of A, so depending
> how "wide" A is, this may have some impact on RAM consumption.
> 
> If that's not what you meant, could you please clarify?
> 
> 
> Shai
> 
> 
> 
> On Thu, Jan 24, 2013 at 7:22 PM, Nicola Buso <nbuso@ebi.ac.uk> wrote:
>         Hi all,
>         
>         I'm introducing Lucene faceted search in our project and I
>         need some
>         hints to achieve some functionalities:
>         - I want facet filtering in OR, how to?
>           - obtain facets for the filtered results but also for the
>         non filtered
>         one. i.e. I have facet A with values A/V1, A/V2, A/V3 and
>         these values
>         are disjunct each other, than a document having field with
>         value V1
>         can't have also value V2 and so on; I would like to let the
>         user select
>         more of these facet values in OR; how can I accumulate all the
>         facets
>         values also filtering by facet selection? Should it work in a
>         way
>         similar to ComplementCountingAggregator?
>           - Can I use DrillDown class to obtain the OR facet filtering
>         or have I
>         to rewrite a similar class using the BooleanQuery in OR. It's
>         not clear
>         to me by this comment in the API:
>         Wraps a given Query as a drill-down query over the given
>         categories,
>         assuming all are required (e.g. AND). You can construct a
>         query with
>         different modes (such as OR or AND of ORs) by creating a
>         BooleanQuery
>         and call this method several times. Make sure to wrap the
>         query in that
>         case by ConstantScoreQuery and set the boost to 0.0f, so that
>         it doesn't
>         affect scoring.
>         
>         
>         Do you have any examples doing this?
>         
>         Regards
>         
>         Nicola.
>         
>         
>         
>         
>         
>         ---------------------------------------------------------------------
>         To unsubscribe, e-mail:
>         java-user-unsubscribe@lucene.apache.org
>         For additional commands, e-mail:
>         java-user-help@lucene.apache.org
>         
> 
> 



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54845-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jan 24 21:26:05 2013
Return-Path: <java-user-return-54845-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id EA8A1E1BD
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 24 Jan 2013 21:26:05 +0000 (UTC)
Received: (qmail 31009 invoked by uid 500); 24 Jan 2013 21:26:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30943 invoked by uid 500); 24 Jan 2013 21:26:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30935 invoked by uid 99); 24 Jan 2013 21:26:03 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Jan 2013 21:26:03 +0000
X-ASF-Spam-Status: No, hits=3.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_NEUTRAL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.220.41] (HELO mail-pa0-f41.google.com) (209.85.220.41)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Jan 2013 21:25:57 +0000
Received: by mail-pa0-f41.google.com with SMTP id bj3so5799413pad.28
        for <java-user@lucene.apache.org>; Thu, 24 Jan 2013 13:25:36 -0800 (PST)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=x-received:mime-version:in-reply-to:references:from:date:message-id
         :subject:to:content-type:x-gm-message-state;
        bh=IhHsxD2XuI1hyFPxqFk8Z5N9PSEmKpHm4NyzVA3LGxE=;
        b=CykX/wxydg644luwly3Uioxqc2LQm89dOGdNvanCJSERu5kOzSGb8le/Wk98Yk9NaD
         vpwUIxfJs98x50neGfBroYAFYMkMut2MNOIoIeC/vql1votOB5LOxIe6DCdgya7zw1h+
         TwP4WprEljizae9+Fqkx9HtZlPSWSh2IBwxDf71TPzJYxHb2Ggqd8t90hi8qR6IQY5+U
         zB7bj5MKmPuCBFLSErC/KvG9B4nnMLsydayi/R3i3l+CF1QSZ2CvQtrRoTF85aBUI/cl
         IAgQI1SmJny6GNoEUZmWGSwACATX0AZnFV4xeLK2GOV4GVwXpYIVf67DQX4p+wLTpa39
         y4Cw==
X-Received: by 10.69.1.65 with SMTP id be1mr8773757pbd.66.1359062736008; Thu,
 24 Jan 2013 13:25:36 -0800 (PST)
MIME-Version: 1.0
Received: by 10.68.154.73 with HTTP; Thu, 24 Jan 2013 13:25:15 -0800 (PST)
In-Reply-To: <1359051731144-4036028.post@n3.nabble.com>
References: <1359045708674-4035993.post@n3.nabble.com> <FEEEC59A-B6CA-4327-9106-D85394044D18@gmail.com>
 <1359051731144-4036028.post@n3.nabble.com>
From: Michael McCandless <lucene@mikemccandless.com>
Date: Thu, 24 Jan 2013 16:25:15 -0500
Message-ID: <CAL8PwkaMDuhu6DjJhQiCno6VowsthVMO9r2b=ZzkrGo9E6V3Qg@mail.gmail.com>
Subject: Re: List of files that Lucene 4.0 generates during indexing
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=047d7b2e143f9b751704d40f7343
X-Gm-Message-State: ALoCoQlzXE5NbD0oG5ez9qY2yQcAbij3yVnFNMp5QYeqT784LJYnqkvnlCuXtjc9uPHMjUABjiZT
X-Virus-Checked: Checked by ClamAV on apache.org

--047d7b2e143f9b751704d40f7343
Content-Type: text/plain; charset=ISO-8859-1

That looks correct, except I don't know what index.v0008 is.

Mike McCandless

http://blog.mikemccandless.com


On Thu, Jan 24, 2013 at 1:22 PM, saisantoshi <saisantoshi76@gmail.com>wrote:

> Thanks. I checked it out.
>
> Here are the list of files that has been generated:
>
>         _0.fdt
>         _0.fdx
>         _0.fnm
>         _0.si
>         _0_Lucene40_0.frq
>         _0_Lucene40_0.prx
>         _0_Lucene40_0.tim
>         _0_Lucene40_0.tip
>         _0_nrm.cfe
>         _0_nrm.cfs
>         index.v0008
>         segments.gen
>         segments_1
>
> My question is, are the above files are the right set of files that needs
> to
> be generated? I just want to make sure if there is a check list to verify
> what files must be there or any files that are missing from the above. I am
> looking to validate the above. The docs says various number of different
> file formats but does not explicit mention the necessary files for 4.0.
>
> Thanks,
> Sai.
>
>
>
> --
> View this message in context:
> http://lucene.472066.n3.nabble.com/List-of-files-that-Lucene-4-0-generates-during-indexing-tp4035993p4036028.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--047d7b2e143f9b751704d40f7343--

From java-user-return-54846-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jan 24 21:40:12 2013
Return-Path: <java-user-return-54846-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id EDD41E4F8
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 24 Jan 2013 21:40:11 +0000 (UTC)
Received: (qmail 79346 invoked by uid 500); 24 Jan 2013 21:40:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79298 invoked by uid 500); 24 Jan 2013 21:40:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79289 invoked by uid 99); 24 Jan 2013 21:40:09 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Jan 2013 21:40:09 +0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,SPF_NEUTRAL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: 216.139.236.26 is neither permitted nor denied by domain of saisantoshi76@gmail.com)
Received: from [216.139.236.26] (HELO sam.nabble.com) (216.139.236.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Jan 2013 21:40:03 +0000
Received: from ben.nabble.com ([192.168.236.152])
	by sam.nabble.com with esmtp (Exim 4.72)
	(envelope-from <saisantoshi76@gmail.com>)
	id 1TyUWM-0005he-RX
	for java-user@lucene.apache.org; Thu, 24 Jan 2013 13:39:42 -0800
Date: Thu, 24 Jan 2013 13:39:42 -0800 (PST)
From: saisantoshi <saisantoshi76@gmail.com>
To: java-user@lucene.apache.org
Message-ID: <1359063582844-4036075.post@n3.nabble.com>
In-Reply-To: <CAL8PwkaMDuhu6DjJhQiCno6VowsthVMO9r2b=ZzkrGo9E6V3Qg@mail.gmail.com>
References: <1359045708674-4035993.post@n3.nabble.com> <FEEEC59A-B6CA-4327-9106-D85394044D18@gmail.com> <1359051731144-4036028.post@n3.nabble.com> <CAL8PwkaMDuhu6DjJhQiCno6VowsthVMO9r2b=ZzkrGo9E6V3Qg@mail.gmail.com>
Subject: Re: List of files that Lucene 4.0 generates during indexing
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks Michael. The additional file in the list is just a typo.

One more question is, we were using 2.4 before, and it only generated few
files

_0.cfs
_0.cfx
// segment files

I am assuming that the 2.4 version has the compound index structure enabled
by default. Do we need to set it explicitly with 4.0 version. Is it not
enabled by default? 4.0 seems to be using the multifile index structure. Is
there any change in the behavior with the latest version.

Thanks,
Sai.



--
View this message in context: http://lucene.472066.n3.nabble.com/List-of-files-that-Lucene-4-0-generates-during-indexing-tp4035993p4036075.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54847-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jan 24 21:55:18 2013
Return-Path: <java-user-return-54847-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id EAC46E565
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 24 Jan 2013 21:55:18 +0000 (UTC)
Received: (qmail 23596 invoked by uid 500); 24 Jan 2013 21:55:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23449 invoked by uid 500); 24 Jan 2013 21:55:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23440 invoked by uid 99); 24 Jan 2013 21:55:16 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Jan 2013 21:55:16 +0000
X-ASF-Spam-Status: No, hits=3.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_NEUTRAL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.220.44] (HELO mail-pa0-f44.google.com) (209.85.220.44)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Jan 2013 21:55:12 +0000
Received: by mail-pa0-f44.google.com with SMTP id hz11so5762786pad.3
        for <java-user@lucene.apache.org>; Thu, 24 Jan 2013 13:54:51 -0800 (PST)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=x-received:mime-version:in-reply-to:references:from:date:message-id
         :subject:to:content-type:x-gm-message-state;
        bh=hBHWAwb6bqk0O3kGai9akPxA/QGW8R5ZZjVDDKwuRiE=;
        b=RjFWBWEgoMI+Knw61SxISWr8azqk6y2A25T2e969U2hSyTCTgW318Y4BmYjZ9BZhOk
         PsI3PbcJ/kQxDsj9kymiTPQR/JN7gK7p8XKgUWoHIhFtLeiyHw51LSaf1ZRIFobPbrwf
         ElMbNhc0tNfjYqfBg/w9o98IOZMuroeqKetVUDnwknZ/NccWlSbi4XgDwJ+Mch9Nal9M
         e3kgSy2LAwAbgL0dnMX3Xm/LZMnmSJ0loa9CqSSf8D4rK+5VY+CZrYtW6onXiDerYGsI
         stzBDdnhyZblz6+pRr8XG1MzgodeWKMMtpl4r62G1Q3AHJxMjaV++ZOggiXTIyqGXlE6
         9wZA==
X-Received: by 10.66.88.6 with SMTP id bc6mr8483847pab.5.1359064491618; Thu,
 24 Jan 2013 13:54:51 -0800 (PST)
MIME-Version: 1.0
Received: by 10.68.154.73 with HTTP; Thu, 24 Jan 2013 13:54:30 -0800 (PST)
In-Reply-To: <1359063582844-4036075.post@n3.nabble.com>
References: <1359045708674-4035993.post@n3.nabble.com> <FEEEC59A-B6CA-4327-9106-D85394044D18@gmail.com>
 <1359051731144-4036028.post@n3.nabble.com> <CAL8PwkaMDuhu6DjJhQiCno6VowsthVMO9r2b=ZzkrGo9E6V3Qg@mail.gmail.com>
 <1359063582844-4036075.post@n3.nabble.com>
From: Michael McCandless <lucene@mikemccandless.com>
Date: Thu, 24 Jan 2013 16:54:30 -0500
Message-ID: <CAL8PwkZu6-iUoC+DU5zTZoBFahCDfBc707pE2UXcG7Zct678ag@mail.gmail.com>
Subject: Re: List of files that Lucene 4.0 generates during indexing
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=f46d042f9cfe3ff03f04d40fdcc8
X-Gm-Message-State: ALoCoQl1nwOvUqvDNCK3m76PO3o6kuBSX528EyiaNBnijwKuXPl2gI9GhY5g54a/DuDw0Ack0sck
X-Virus-Checked: Checked by ClamAV on apache.org

--f46d042f9cfe3ff03f04d40fdcc8
Content-Type: text/plain; charset=ISO-8859-1

4.0 has a hybrid approach by default: "big" segments (> 10% of index size,
by default) are non-compound-files and small segments are compound files.

See TieredMergePolicy.setNoCFSRatio if you want to always use compound file
format.

Mike McCandless

http://blog.mikemccandless.com


On Thu, Jan 24, 2013 at 4:39 PM, saisantoshi <saisantoshi76@gmail.com>wrote:

> Thanks Michael. The additional file in the list is just a typo.
>
> One more question is, we were using 2.4 before, and it only generated few
> files
>
> _0.cfs
> _0.cfx
> // segment files
>
> I am assuming that the 2.4 version has the compound index structure enabled
> by default. Do we need to set it explicitly with 4.0 version. Is it not
> enabled by default? 4.0 seems to be using the multifile index structure. Is
> there any change in the behavior with the latest version.
>
> Thanks,
> Sai.
>
>
>
> --
> View this message in context:
> http://lucene.472066.n3.nabble.com/List-of-files-that-Lucene-4-0-generates-during-indexing-tp4035993p4036075.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--f46d042f9cfe3ff03f04d40fdcc8--

From java-user-return-54848-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jan 24 21:59:21 2013
Return-Path: <java-user-return-54848-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 92686E58D
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 24 Jan 2013 21:59:21 +0000 (UTC)
Received: (qmail 38429 invoked by uid 500); 24 Jan 2013 21:59:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38367 invoked by uid 500); 24 Jan 2013 21:59:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38355 invoked by uid 99); 24 Jan 2013 21:59:19 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Jan 2013 21:59:19 +0000
X-ASF-Spam-Status: No, hits=-0.1 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of jerome_lanneluc@fr.ibm.com designates 195.75.94.113 as permitted sender)
Received: from [195.75.94.113] (HELO e06smtp17.uk.ibm.com) (195.75.94.113)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Jan 2013 21:59:08 +0000
Received: from /spool/local
	by e06smtp17.uk.ibm.com with IBM ESMTP SMTP Gateway: Authorized Use Only! Violators will be prosecuted
	for <java-user@lucene.apache.org> from <jerome_lanneluc@fr.ibm.com>;
	Thu, 24 Jan 2013 21:57:46 -0000
Received: from b06cxnps3074.portsmouth.uk.ibm.com (9.149.109.194)
	by e06smtp17.uk.ibm.com (192.168.101.147) with IBM ESMTP SMTP Gateway: Authorized Use Only! Violators will be prosecuted;
	Thu, 24 Jan 2013 21:57:44 -0000
Received: from d06av01.portsmouth.uk.ibm.com (d06av01.portsmouth.uk.ibm.com [9.149.37.212])
	by b06cxnps3074.portsmouth.uk.ibm.com (8.13.8/8.13.8/NCO v10.0) with ESMTP id r0OLwb2221430350
	for <java-user@lucene.apache.org>; Thu, 24 Jan 2013 21:58:37 GMT
Received: from d06av01.portsmouth.uk.ibm.com (loopback [127.0.0.1])
	by d06av01.portsmouth.uk.ibm.com (8.14.4/8.13.1/NCO v10.0 AVout) with ESMTP id r0OLwjIk009929
	for <java-user@lucene.apache.org>; Thu, 24 Jan 2013 14:58:45 -0700
Received: from d06ml370.portsmouth.uk.ibm.com (d06ml370.portsmouth.uk.ibm.com [9.149.76.152])
	by d06av01.portsmouth.uk.ibm.com (8.14.4/8.13.1/NCO v10.0 AVin) with ESMTP id r0OLwj10009926
	for <java-user@lucene.apache.org>; Thu, 24 Jan 2013 14:58:45 -0700
In-Reply-To: <CAOdYfZW5SWq9c5ifKFZA=OhUduVk8iJ3xsp4RqJzGhTKCaDi2A@mail.gmail.com>
References: <OF4420813A.F438A161-ONC1257AFD.004A1B23-C1257AFD.004F4053@fr.ibm.com> <CAOdYfZXmg=d=k_uq2T=c707wP6SdZM1e5+-y-VtUf46fyrESuQ@mail.gmail.com> <OFB835DCE3.660E1D2C-ONC1257AFD.00572BAF-C1257AFD.00574542@fr.ibm.com> <CAOdYfZW5SWq9c5ifKFZA=OhUduVk8iJ3xsp4RqJzGhTKCaDi2A@mail.gmail.com>
X-Disclaimed: 43206
To: java-user@lucene.apache.org
MIME-Version: 1.0
Subject: Re: Chinese analyzer
X-KeepSent: 0C5E77B3:25626073-C1257AFD:0078A341;
 type=4; name=$KeepSent
X-Mailer: Lotus Notes Release 8.5.3FP2 SHF22 July 19, 2012
From: Jerome Lanneluc <jerome_lanneluc@fr.ibm.com>
Message-ID: <OF0C5E77B3.25626073-ONC1257AFD.0078A341-C1257AFD.0078B0F8@fr.ibm.com>
Date: Thu, 24 Jan 2013 22:58:34 +0100
X-MIMETrack: Serialize by Router on D06ML370/06/M/IBM(Release 8.5.3 ZX853HP5|January 12, 2012) at
 24/01/2013 22:58:36,
	Serialize complete at 24/01/2013 22:58:36
Content-Type: multipart/alternative; boundary="=_alternative 0078B053C1257AFD_="
x-cbid: 13012421-0542-0000-0000-0000043B4E93
X-Virus-Checked: Checked by ClamAV on apache.org

--=_alternative 0078B053C1257AFD_=
Content-Type: text/plain; charset="ISO-8859-1"
Content-Transfer-Encoding: quoted-printable

Thanks Robert. Is there another analyzer I should use?

Jerome



From:   Robert Muir <rcmuir@gmail.com>
To:     java-user@lucene.apache.org,=20
Date:   01/24/2013 06:20 PM
Subject:        Re: Chinese analyzer



On Thu, Jan 24, 2013 at 10:53 AM, Jerome Lanneluc
<jerome=5Flanneluc@fr.ibm.com> wrote:
> It looks like my attachment was lost. It referred to
> org.apache.lucene.analysis.cn.smart.SmartChineseAnalyzer.
>

I think this analyzer will not properly tokenize text outside of the
BMP: it pretty much only works for simplified text (e.g. chars from
GB2312 range)

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org




Sauf indication contraire ci-dessus:/ Unless stated otherwise above:
Compagnie IBM France
Si=E8ge Social : 17 avenue de l'Europe, 92275 Bois-Colombes Cedex
RCS Nanterre 552 118 465
Forme Sociale : S.A.S.
Capital Social : 653.242.306,20 ?
SIREN/SIRET : 552 118 465 03644 - Code NAF 6202A=20
--=_alternative 0078B053C1257AFD_=--


From java-user-return-54849-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jan 24 22:28:50 2013
Return-Path: <java-user-return-54849-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id CC536E0CB
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 24 Jan 2013 22:28:50 +0000 (UTC)
Received: (qmail 24332 invoked by uid 500); 24 Jan 2013 22:28:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24155 invoked by uid 500); 24 Jan 2013 22:28:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24147 invoked by uid 99); 24 Jan 2013 22:28:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Jan 2013 22:28:48 +0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,SPF_NEUTRAL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: 216.139.236.26 is neither permitted nor denied by domain of saisantoshi76@gmail.com)
Received: from [216.139.236.26] (HELO sam.nabble.com) (216.139.236.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Jan 2013 22:28:43 +0000
Received: from ben.nabble.com ([192.168.236.152])
	by sam.nabble.com with esmtp (Exim 4.72)
	(envelope-from <saisantoshi76@gmail.com>)
	id 1TyVHS-0000gr-Ig
	for java-user@lucene.apache.org; Thu, 24 Jan 2013 14:28:22 -0800
Date: Thu, 24 Jan 2013 14:28:22 -0800 (PST)
From: saisantoshi <saisantoshi76@gmail.com>
To: java-user@lucene.apache.org
Message-ID: <1359066502561-4036086.post@n3.nabble.com>
In-Reply-To: <CAL8PwkZu6-iUoC+DU5zTZoBFahCDfBc707pE2UXcG7Zct678ag@mail.gmail.com>
References: <1359045708674-4035993.post@n3.nabble.com> <FEEEC59A-B6CA-4327-9106-D85394044D18@gmail.com> <1359051731144-4036028.post@n3.nabble.com> <CAL8PwkaMDuhu6DjJhQiCno6VowsthVMO9r2b=ZzkrGo9E6V3Qg@mail.gmail.com> <1359063582844-4036075.post@n3.nabble.com> <CAL8PwkZu6-iUoC+DU5zTZoBFahCDfBc707pE2UXcG7Zct678ag@mail.gmail.com>
Subject: Re: List of files that Lucene 4.0 generates during indexing
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks. Are there any best practices to follow here? or leave the the default
( which is hybrid approach as you mentioned).



--
View this message in context: http://lucene.472066.n3.nabble.com/List-of-files-that-Lucene-4-0-generates-during-indexing-tp4035993p4036086.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54850-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jan 24 22:32:49 2013
Return-Path: <java-user-return-54850-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 1632BE3C7
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 24 Jan 2013 22:32:49 +0000 (UTC)
Received: (qmail 41709 invoked by uid 500); 24 Jan 2013 22:32:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41545 invoked by uid 500); 24 Jan 2013 22:32:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41535 invoked by uid 99); 24 Jan 2013 22:32:47 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Jan 2013 22:32:46 +0000
X-ASF-Spam-Status: No, hits=3.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_NEUTRAL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.210.51] (HELO mail-da0-f51.google.com) (209.85.210.51)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Jan 2013 22:32:40 +0000
Received: by mail-da0-f51.google.com with SMTP id i30so4444122dad.38
        for <java-user@lucene.apache.org>; Thu, 24 Jan 2013 14:32:19 -0800 (PST)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=x-received:mime-version:in-reply-to:references:from:date:message-id
         :subject:to:content-type:x-gm-message-state;
        bh=Bn4QSIflfuxMf5oLmzZ3Un5TDmV70Gxubi6adJb37QI=;
        b=Ql8MXhZZvmu0u0cg1QAmG66xWFsNYBK1TRN83LBIw5wCeASdHO2jDB4qdXMmtKqJwP
         5TvQjJoqMFmlRYc83c74lZF03kzAHGxntUgQdKdLNcAeSlWHzrmciqo4j3w8BBgKaU7U
         M+y6bJvdsucXwYNZsPxk45xZ+nwhRJGJA75fdxVgmvPJkeoBzwJcVso7On2YD72XyKER
         N+dWoBtDL0NduPK6H0nJdRXG5yIv9mF1JYEsWP79MLsE7oRrhX0Q5nZAHv4RnwkqqhYX
         64qqmV6kP8FCP39XrCT/a3/9UQ4GEjIizQTvCl54IsjKMg3yJmaHhIh8zphReILBMkBi
         jQag==
X-Received: by 10.68.231.10 with SMTP id tc10mr9027232pbc.81.1359066739201;
 Thu, 24 Jan 2013 14:32:19 -0800 (PST)
MIME-Version: 1.0
Received: by 10.68.154.73 with HTTP; Thu, 24 Jan 2013 14:31:59 -0800 (PST)
In-Reply-To: <1359066502561-4036086.post@n3.nabble.com>
References: <1359045708674-4035993.post@n3.nabble.com> <FEEEC59A-B6CA-4327-9106-D85394044D18@gmail.com>
 <1359051731144-4036028.post@n3.nabble.com> <CAL8PwkaMDuhu6DjJhQiCno6VowsthVMO9r2b=ZzkrGo9E6V3Qg@mail.gmail.com>
 <1359063582844-4036075.post@n3.nabble.com> <CAL8PwkZu6-iUoC+DU5zTZoBFahCDfBc707pE2UXcG7Zct678ag@mail.gmail.com>
 <1359066502561-4036086.post@n3.nabble.com>
From: Michael McCandless <lucene@mikemccandless.com>
Date: Thu, 24 Jan 2013 17:31:59 -0500
Message-ID: <CAL8PwkapFdkd3ORpzfNRc55vnE2UHoU9vrTAK3=w1s__w0mV6w@mail.gmail.com>
Subject: Re: List of files that Lucene 4.0 generates during indexing
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=047d7b33d19e37584e04d41062ee
X-Gm-Message-State: ALoCoQl1W9TQvjG1F4UjB9tEGH9P+QRtjCWx2fwQ2v6bbkQ1W0t1oG0DBMCWf7uYJ4xDf96qeeV1
X-Virus-Checked: Checked by ClamAV on apache.org

--047d7b33d19e37584e04d41062ee
Content-Type: text/plain; charset=ISO-8859-1

I would leave the default until/unless something goes wrong ...

Mike McCandless

http://blog.mikemccandless.com

On Thu, Jan 24, 2013 at 5:28 PM, saisantoshi <saisantoshi76@gmail.com>wrote:

> Thanks. Are there any best practices to follow here? or leave the the
> default
> ( which is hybrid approach as you mentioned).
>
>
>
> --
> View this message in context:
> http://lucene.472066.n3.nabble.com/List-of-files-that-Lucene-4-0-generates-during-indexing-tp4035993p4036086.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--047d7b33d19e37584e04d41062ee--

From java-user-return-54851-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jan 24 22:36:08 2013
Return-Path: <java-user-return-54851-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 98A59E3EC
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 24 Jan 2013 22:36:08 +0000 (UTC)
Received: (qmail 58795 invoked by uid 500); 24 Jan 2013 22:36:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58732 invoked by uid 500); 24 Jan 2013 22:36:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58724 invoked by uid 99); 24 Jan 2013 22:36:06 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Jan 2013 22:36:06 +0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,SPF_NEUTRAL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: 216.139.236.26 is neither permitted nor denied by domain of saisantoshi76@gmail.com)
Received: from [216.139.236.26] (HELO sam.nabble.com) (216.139.236.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Jan 2013 22:36:01 +0000
Received: from ben.nabble.com ([192.168.236.152])
	by sam.nabble.com with esmtp (Exim 4.72)
	(envelope-from <saisantoshi76@gmail.com>)
	id 1TyVOW-0001Au-RI
	for java-user@lucene.apache.org; Thu, 24 Jan 2013 14:35:40 -0800
Date: Thu, 24 Jan 2013 14:35:40 -0800 (PST)
From: saisantoshi <saisantoshi76@gmail.com>
To: java-user@lucene.apache.org
Message-ID: <1359066940835-4036091.post@n3.nabble.com>
In-Reply-To: <CAL8PwkapFdkd3ORpzfNRc55vnE2UHoU9vrTAK3=w1s__w0mV6w@mail.gmail.com>
References: <1359045708674-4035993.post@n3.nabble.com> <FEEEC59A-B6CA-4327-9106-D85394044D18@gmail.com> <1359051731144-4036028.post@n3.nabble.com> <CAL8PwkaMDuhu6DjJhQiCno6VowsthVMO9r2b=ZzkrGo9E6V3Qg@mail.gmail.com> <1359063582844-4036075.post@n3.nabble.com> <CAL8PwkZu6-iUoC+DU5zTZoBFahCDfBc707pE2UXcG7Zct678ag@mail.gmail.com> <1359066502561-4036086.post@n3.nabble.com> <CAL8PwkapFdkd3ORpzfNRc55vnE2UHoU9vrTAK3=w1s__w0mV6w@mail.gmail.com>
Subject: Re: List of files that Lucene 4.0 generates during indexing
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks a lot. One last question, how do we set it? IndexWriter.???

Thanks,
Ranjith.



--
View this message in context: http://lucene.472066.n3.nabble.com/List-of-files-that-Lucene-4-0-generates-during-indexing-tp4035993p4036091.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54852-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jan 24 22:38:00 2013
Return-Path: <java-user-return-54852-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 1C8FEE407
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 24 Jan 2013 22:38:00 +0000 (UTC)
Received: (qmail 68563 invoked by uid 500); 24 Jan 2013 22:37:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68359 invoked by uid 500); 24 Jan 2013 22:37:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68344 invoked by uid 99); 24 Jan 2013 22:37:58 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Jan 2013 22:37:58 +0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,SPF_NEUTRAL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: 216.139.236.26 is neither permitted nor denied by domain of saisantoshi76@gmail.com)
Received: from [216.139.236.26] (HELO sam.nabble.com) (216.139.236.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Jan 2013 22:37:51 +0000
Received: from ben.nabble.com ([192.168.236.152])
	by sam.nabble.com with esmtp (Exim 4.72)
	(envelope-from <saisantoshi76@gmail.com>)
	id 1TyVQJ-0001JQ-3d
	for java-user@lucene.apache.org; Thu, 24 Jan 2013 14:37:31 -0800
Date: Thu, 24 Jan 2013 14:37:31 -0800 (PST)
From: saisantoshi <saisantoshi76@gmail.com>
To: java-user@lucene.apache.org
Message-ID: <1359067051103-4036093.post@n3.nabble.com>
In-Reply-To: <1359011456523-4035870.post@n3.nabble.com>
References: <1358983150658-4035806.post@n3.nabble.com> <001101cdf9c2$81b8dc80$852a9580$@thetaphi.de> <1359011456523-4035870.post@n3.nabble.com>
Subject: RE: TopDocCollector vs TopScoreDocCollector (semantics changed in
 4.0, not backward comptabile)
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Can someone please help us here to validate the above?

Thanks,
Sai.



--
View this message in context: http://lucene.472066.n3.nabble.com/TopDocCollector-vs-TopScoreDocCollector-semantics-changed-in-4-0-not-backward-comptabile-tp4035806p4036093.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54853-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jan 24 22:41:41 2013
Return-Path: <java-user-return-54853-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 4166FE430
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 24 Jan 2013 22:41:41 +0000 (UTC)
Received: (qmail 83141 invoked by uid 500); 24 Jan 2013 22:41:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83093 invoked by uid 500); 24 Jan 2013 22:41:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83085 invoked by uid 99); 24 Jan 2013 22:41:39 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Jan 2013 22:41:39 +0000
X-ASF-Spam-Status: No, hits=3.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_NEUTRAL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.160.49] (HELO mail-pb0-f49.google.com) (209.85.160.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Jan 2013 22:41:34 +0000
Received: by mail-pb0-f49.google.com with SMTP id un15so5679348pbc.8
        for <java-user@lucene.apache.org>; Thu, 24 Jan 2013 14:41:13 -0800 (PST)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=x-received:mime-version:in-reply-to:references:from:date:message-id
         :subject:to:content-type:x-gm-message-state;
        bh=ouodnLOkxCQuO16nuzoP7AdyqEkh4gsgu0jnG3YrScs=;
        b=SYnYCdFtNQyOOe3mt4AxmvKD1dcKylxEk2sitFKLI6B9uM6daWiw1ztBh3QqJ9fgh0
         ZYpH8nPXOzXm1SnGPjfT86scv3JTuzan5szM9EususcG3QIBRvOlvGc9t4FE5+rXkqk/
         r2BNenij9rJIbJTIDDKOmvHevEiltBNdzht5a6fXp/+rqwhN6W8/MTqIftvbu3fhY2yM
         aSe45byK09aY8cLdyJojTPBt7Fh1oJlKmwBr1wsSlF8vwivjeBvk0fYqiuaj64b32AHH
         g9JyZuiHafxE9JuLtgMa49f+ycdyXBP+owGaO8YfPFbPcx1eqf5VL8CjMFFnoJ8VHBiT
         eBPg==
X-Received: by 10.66.74.197 with SMTP id w5mr8564554pav.60.1359067273832; Thu,
 24 Jan 2013 14:41:13 -0800 (PST)
MIME-Version: 1.0
Received: by 10.68.154.73 with HTTP; Thu, 24 Jan 2013 14:40:53 -0800 (PST)
In-Reply-To: <1359066940835-4036091.post@n3.nabble.com>
References: <1359045708674-4035993.post@n3.nabble.com> <FEEEC59A-B6CA-4327-9106-D85394044D18@gmail.com>
 <1359051731144-4036028.post@n3.nabble.com> <CAL8PwkaMDuhu6DjJhQiCno6VowsthVMO9r2b=ZzkrGo9E6V3Qg@mail.gmail.com>
 <1359063582844-4036075.post@n3.nabble.com> <CAL8PwkZu6-iUoC+DU5zTZoBFahCDfBc707pE2UXcG7Zct678ag@mail.gmail.com>
 <1359066502561-4036086.post@n3.nabble.com> <CAL8PwkapFdkd3ORpzfNRc55vnE2UHoU9vrTAK3=w1s__w0mV6w@mail.gmail.com>
 <1359066940835-4036091.post@n3.nabble.com>
From: Michael McCandless <lucene@mikemccandless.com>
Date: Thu, 24 Jan 2013 17:40:53 -0500
Message-ID: <CAL8PwkZ2YM3knxZ58n=eXZBkvzpe-ave-jP8KkS05wnqUjyGew@mail.gmail.com>
Subject: Re: List of files that Lucene 4.0 generates during indexing
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=f46d042f949e1527bb04d41082a6
X-Gm-Message-State: ALoCoQmK8BExdop2MhydvN4CP5o3shLg5wH/WstuDZm8vtIhKDzcfj8IpNyb9vGpH4nx95xyYg/5
X-Virus-Checked: Checked by ClamAV on apache.org

--f46d042f949e1527bb04d41082a6
Content-Type: text/plain; charset=ISO-8859-1

You get/set the merge policy on IndexWriterConfig (which you pass to
IndexWriter).

And then you can set this CFS ratio via that merge policy.

Mike McCandless

http://blog.mikemccandless.com


On Thu, Jan 24, 2013 at 5:35 PM, saisantoshi <saisantoshi76@gmail.com>wrote:

> Thanks a lot. One last question, how do we set it? IndexWriter.???
>
> Thanks,
> Ranjith.
>
>
>
> --
> View this message in context:
> http://lucene.472066.n3.nabble.com/List-of-files-that-Lucene-4-0-generates-during-indexing-tp4035993p4036091.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--f46d042f949e1527bb04d41082a6--

From java-user-return-54854-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jan 24 22:58:13 2013
Return-Path: <java-user-return-54854-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id A40E8E4D3
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 24 Jan 2013 22:58:13 +0000 (UTC)
Received: (qmail 36944 invoked by uid 500); 24 Jan 2013 22:58:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36733 invoked by uid 500); 24 Jan 2013 22:58:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36724 invoked by uid 99); 24 Jan 2013 22:58:11 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Jan 2013 22:58:11 +0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,SPF_NEUTRAL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: 216.139.236.26 is neither permitted nor denied by domain of saisantoshi76@gmail.com)
Received: from [216.139.236.26] (HELO sam.nabble.com) (216.139.236.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Jan 2013 22:58:06 +0000
Received: from ben.nabble.com ([192.168.236.152])
	by sam.nabble.com with esmtp (Exim 4.72)
	(envelope-from <saisantoshi76@gmail.com>)
	id 1TyVjt-0002T6-Mn
	for java-user@lucene.apache.org; Thu, 24 Jan 2013 14:57:45 -0800
Date: Thu, 24 Jan 2013 14:57:45 -0800 (PST)
From: saisantoshi <saisantoshi76@gmail.com>
To: java-user@lucene.apache.org
Message-ID: <1359068265694-4036098.post@n3.nabble.com>
In-Reply-To: <CAL8PwkZ2YM3knxZ58n=eXZBkvzpe-ave-jP8KkS05wnqUjyGew@mail.gmail.com>
References: <1359045708674-4035993.post@n3.nabble.com> <FEEEC59A-B6CA-4327-9106-D85394044D18@gmail.com> <1359051731144-4036028.post@n3.nabble.com> <CAL8PwkaMDuhu6DjJhQiCno6VowsthVMO9r2b=ZzkrGo9E6V3Qg@mail.gmail.com> <1359063582844-4036075.post@n3.nabble.com> <CAL8PwkZu6-iUoC+DU5zTZoBFahCDfBc707pE2UXcG7Zct678ag@mail.gmail.com> <1359066502561-4036086.post@n3.nabble.com> <CAL8PwkapFdkd3ORpzfNRc55vnE2UHoU9vrTAK3=w1s__w0mV6w@mail.gmail.com> <1359066940835-4036091.post@n3.nabble.com> <CAL8PwkZ2YM3knxZ58n=eXZBkvzpe-ave-jP8KkS05wnqUjyGew@mail.gmail.com>
Subject: Re: List of files that Lucene 4.0 generates during indexing
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks. Could you please also comment on the following as well?

http://lucene.472066.n3.nabble.com/TopDocCollector-vs-TopScoreDocCollector-semantics-changed-in-4-0-not-backward-comptabile-td4035806.html

Thanks and really appreciate your help.

Thanks,
Sai.



--
View this message in context: http://lucene.472066.n3.nabble.com/List-of-files-that-Lucene-4-0-generates-during-indexing-tp4035993p4036098.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54855-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Jan 25 01:33:07 2013
Return-Path: <java-user-return-54855-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 8801BE574
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 25 Jan 2013 01:33:07 +0000 (UTC)
Received: (qmail 80659 invoked by uid 500); 25 Jan 2013 01:33:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80604 invoked by uid 500); 25 Jan 2013 01:33:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80596 invoked by uid 99); 25 Jan 2013 01:33:05 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Jan 2013 01:33:05 +0000
X-ASF-Spam-Status: No, hits=2.3 required=5.0
	tests=SPF_SOFTFAIL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: softfail (athena.apache.org: transitioning domain of wuqiu.main@qq.com does not designate 216.139.236.26 as permitted sender)
Received: from [216.139.236.26] (HELO sam.nabble.com) (216.139.236.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Jan 2013 01:32:59 +0000
Received: from ben.nabble.com ([192.168.236.152])
	by sam.nabble.com with esmtp (Exim 4.72)
	(envelope-from <wuqiu.main@qq.com>)
	id 1TyY9n-0003C8-GZ
	for java-user@lucene.apache.org; Thu, 24 Jan 2013 17:32:39 -0800
Date: Thu, 24 Jan 2013 17:32:39 -0800 (PST)
From: wgggfiy <wuqiu.main@qq.com>
To: java-user@lucene.apache.org
Message-ID: <1359077559506-4036128.post@n3.nabble.com>
In-Reply-To: <CALvfXiLFkcXDpNg5nqFTfCN-DmjrXC+FqJa_7b-qts1_stRPLA@mail.gmail.com>
References: <1357456703597-4031045.post@n3.nabble.com> <CALvfXiLFkcXDpNg5nqFTfCN-DmjrXC+FqJa_7b-qts1_stRPLA@mail.gmail.com>
Subject: Re: how to add attributes to a field just like term's payload ?
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

hello, but there is no getCommitUserData in IndexReader,
how can I get the userdata ??
thx



-----
--------------------------
Email: wuqiu.main@qq.com
--------------------------
--
View this message in context: http://lucene.472066.n3.nabble.com/how-to-add-attributes-to-a-field-just-like-term-s-payload-tp4031045p4036128.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54856-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Jan 25 09:14:03 2013
Return-Path: <java-user-return-54856-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 9679DDDBA
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 25 Jan 2013 09:14:03 +0000 (UTC)
Received: (qmail 75365 invoked by uid 500); 25 Jan 2013 09:14:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75295 invoked by uid 500); 25 Jan 2013 09:14:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75255 invoked by uid 99); 25 Jan 2013 09:13:59 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Jan 2013 09:13:59 +0000
X-ASF-Spam-Status: No, hits=0.6 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of simon.willnauer@gmail.com designates 209.85.217.182 as permitted sender)
Received: from [209.85.217.182] (HELO mail-lb0-f182.google.com) (209.85.217.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Jan 2013 09:13:52 +0000
Received: by mail-lb0-f182.google.com with SMTP id gg6so315443lbb.41
        for <java-user@lucene.apache.org>; Fri, 25 Jan 2013 01:13:32 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:x-received:reply-to:in-reply-to:references:date
         :message-id:subject:from:to:content-type;
        bh=l8L6yB/KQPGjKu6lhn/kLcJVeDJfrbpR1xUFka6XlCs=;
        b=y6cvnzJegLU/4VQgtYiFj7jqBgJec4Yij8fcDUd2Lp2dZp1EJdtC2YCdi9Vviclms9
         29mg59E3eWEoLYAorW3lpzqxl0j+sD0/FjVqtn8begK3DHlNIdUXnNR3zLeDEvpllBME
         jKigEaqjcjdNl+k5V3+OtSttXJJ47O89XBOrviThvXXpLYwclrcB0vbB0l/QQBq0Lk6e
         T923NMVyhUz7GtbY97B45Zi6/gk4YbpgLXzxd5go1bQ/xpkr9SHJvzuJhTkQRmI4+X6t
         jkC4rDZvQgr9Xo+DYw2J+0kIgT9t7Y0hif7/34hIXoo8itNp4Nlsh01LEOMHpdkr8OlH
         XPGQ==
MIME-Version: 1.0
X-Received: by 10.152.111.102 with SMTP id ih6mr4499563lab.20.1359105212353;
 Fri, 25 Jan 2013 01:13:32 -0800 (PST)
Received: by 10.112.134.74 with HTTP; Fri, 25 Jan 2013 01:13:32 -0800 (PST)
Reply-To: simon.willnauer@gmail.com
In-Reply-To: <1359067051103-4036093.post@n3.nabble.com>
References: <1358983150658-4035806.post@n3.nabble.com>
	<001101cdf9c2$81b8dc80$852a9580$@thetaphi.de>
	<1359011456523-4035870.post@n3.nabble.com>
	<1359067051103-4036093.post@n3.nabble.com>
Date: Fri, 25 Jan 2013 10:13:32 +0100
Message-ID: <CAAHmpkg-pa=Sc=ShG1yfnPLxg6G1ik5nqWXgQVvyWJmT0f9rRw@mail.gmail.com>
Subject: Re: TopDocCollector vs TopScoreDocCollector (semantics changed in
 4.0, not backward comptabile)
From: Simon Willnauer <simon.willnauer@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
X-Virus-Checked: Checked by ClamAV on apache.org

hey,

you don't need to set the indexreader in the constructor. An
AtomicReader is passed in for each segment to
Collector#setNextReader(AtomicReaderContext)
If you want to use a given collector and extend it with some custom
code in collect I would likely write a delegate Collector like this:

public class DelegatingCollector extends Collector {

  private final Collector delegate;

  public DelegatingCollector(Collector delegate) {
    this.delegate = delegate;
  }

 public Collector getDelegate() {
    return delegate;
  }

  @Override
  public void setScorer(Scorer scorer) throws IOException {
    delegate.setScorer(scorer);
  }

  @Override
  public void collect(int doc) throws IOException {
    // ADD YOUR CUSTOM LOGIC HERE
    delegate.collect(doc);
  }

  @Override
  public void setNextReader(AtomicReaderContext context) throws IOException {
    // THIS IS WHERE YOU GET THE READER --> context.reader()
    delegate.setNextReader(context);
  }

  @Override
  public boolean acceptsDocsOutOfOrder() {
    return delegate.acceptsDocsOutOfOrder();
  }
}

maybe this is easier for you? then you can simply call
TopScoreDocCollector.create(int numHits, boolean docsScoredInOrder);
and use the specialized collector for your settings in the delegate?

simon

On Thu, Jan 24, 2013 at 11:37 PM, saisantoshi <saisantoshi76@gmail.com> wrote:
> Can someone please help us here to validate the above?
>
> Thanks,
> Sai.
>
>
>
> --
> View this message in context: http://lucene.472066.n3.nabble.com/TopDocCollector-vs-TopScoreDocCollector-semantics-changed-in-4-0-not-backward-comptabile-tp4035806p4036093.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54857-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Jan 25 09:18:06 2013
Return-Path: <java-user-return-54857-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 0CA96DDEB
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 25 Jan 2013 09:18:06 +0000 (UTC)
Received: (qmail 94765 invoked by uid 500); 25 Jan 2013 09:18:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94327 invoked by uid 500); 25 Jan 2013 09:18:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94301 invoked by uid 99); 25 Jan 2013 09:18:01 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Jan 2013 09:18:01 +0000
X-ASF-Spam-Status: No, hits=0.6 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of simon.willnauer@gmail.com designates 209.85.217.171 as permitted sender)
Received: from [209.85.217.171] (HELO mail-lb0-f171.google.com) (209.85.217.171)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Jan 2013 09:17:56 +0000
Received: by mail-lb0-f171.google.com with SMTP id gg13so330037lbb.30
        for <java-user@lucene.apache.org>; Fri, 25 Jan 2013 01:17:35 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:x-received:reply-to:in-reply-to:references:date
         :message-id:subject:from:to:content-type;
        bh=SYCUc4u4YHJj6dQJXi2BG2/+WszulmLtAfs9u+KuZnU=;
        b=bd8E4BFW9qn2fPcGAOm42xypy7iiztndmkhpF9lzNK8iFSxT+kG6/ULS6VryWQzhV6
         Ctrjy43lO6+aIRfGYipqFNaG21zygPlazkbipWPpzNIcMuz4HdGEMA3nDRjXd0FufdCa
         d+IZGwnPlQPVCaowQjKhqHwJtELSf2mJqnWclAjjs/lZhUwTYvqxdRqPrJsfP2cg1lxN
         MxtBH/7OEWnh0VWwwAcye2bzgKeqxkn8dfXxzl7F5SuDO/6vlzXD5lxP886Z0jo4KnDr
         Unhx3Xx69rt/dch8gGeDJRludsMAEuhbjiuMnfY2+CrsRwcQbS/nCUSZj5hb1BRTuWKo
         SeIQ==
MIME-Version: 1.0
X-Received: by 10.112.40.129 with SMTP id x1mr1932548lbk.95.1359105455683;
 Fri, 25 Jan 2013 01:17:35 -0800 (PST)
Received: by 10.112.134.74 with HTTP; Fri, 25 Jan 2013 01:17:35 -0800 (PST)
Reply-To: simon.willnauer@gmail.com
In-Reply-To: <1359077559506-4036128.post@n3.nabble.com>
References: <1357456703597-4031045.post@n3.nabble.com>
	<CALvfXiLFkcXDpNg5nqFTfCN-DmjrXC+FqJa_7b-qts1_stRPLA@mail.gmail.com>
	<1359077559506-4036128.post@n3.nabble.com>
Date: Fri, 25 Jan 2013 10:17:35 +0100
Message-ID: <CAAHmpki9Q0AWvfveCfn+0K5WN0yNHFrm48bkcNoWg-aOXVKysA@mail.gmail.com>
Subject: Re: how to add attributes to a field just like term's payload ?
From: Simon Willnauer <simon.willnauer@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
X-Virus-Checked: Checked by ClamAV on apache.org

Directory directory = ...
final SegmentInfos sis = new SegmentInfos();
sis.read(directory);
Map<String, String> commitUserData = sis.getUserData();

simon

On Fri, Jan 25, 2013 at 2:32 AM, wgggfiy <wuqiu.main@qq.com> wrote:
> hello, but there is no getCommitUserData in IndexReader,
> how can I get the userdata ??
> thx
>
>
>
> -----
> --------------------------
> Email: wuqiu.main@qq.com
> --------------------------
> --
> View this message in context: http://lucene.472066.n3.nabble.com/how-to-add-attributes-to-a-field-just-like-term-s-payload-tp4031045p4036128.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54858-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Jan 25 09:51:57 2013
Return-Path: <java-user-return-54858-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id CA432EC54
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 25 Jan 2013 09:51:57 +0000 (UTC)
Received: (qmail 94287 invoked by uid 500); 25 Jan 2013 09:51:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94224 invoked by uid 500); 25 Jan 2013 09:51:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94201 invoked by uid 99); 25 Jan 2013 09:51:54 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Jan 2013 09:51:54 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 209.85.212.181 as permitted sender)
Received: from [209.85.212.181] (HELO mail-wi0-f181.google.com) (209.85.212.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Jan 2013 09:51:48 +0000
Received: by mail-wi0-f181.google.com with SMTP id hq4so146999wib.8
        for <java-user@lucene.apache.org>; Fri, 25 Jan 2013 01:51:26 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=x-received:mime-version:in-reply-to:references:from:date:message-id
         :subject:to:content-type;
        bh=ruFHuTLRHfkARnD9a56MqQ4gMqql5u89dcgRlUMpwmk=;
        b=O/yZ4kjiifGiFcB0JQJ6A0D+SR5AEHOQC79Cmr+AByi5/Tb5vXbMBewo4zWLtJgHFm
         kqKydfcm0lPdyIy+KNpvkHqoEvhdcUf40b8WnPPjuP2Q1QCg3ygc4SFJYAJGcR78XXKI
         OM2SzisNrkE7yMkHZxTpysTT933lAd9rD/7+TVvWN5wltYxnkQSOZPwtO+1cI/tblLJN
         oiJc6sHxIjKEc59joEBOTfpRNGGjatrMzvvDEKUbh3PDlHxkG4rIskkY1gLU9W8YvQVy
         6ON/hyVWnj9uIyb27FQJ71W/WOMPC8tsBZ90Sa/vgd63DidiLlm5VCrbRu22F3ai8q1l
         gYVQ==
X-Received: by 10.194.108.101 with SMTP id hj5mr7771339wjb.6.1359107486639;
 Fri, 25 Jan 2013 01:51:26 -0800 (PST)
MIME-Version: 1.0
Received: by 10.194.57.11 with HTTP; Fri, 25 Jan 2013 01:51:05 -0800 (PST)
In-Reply-To: <CAL0=0H33AtnsNYxB+WseQXvSmLn_2UJ7QZ3p9vJMcJ8UUZi9Eg@mail.gmail.com>
References: <CAL0=0H33AtnsNYxB+WseQXvSmLn_2UJ7QZ3p9vJMcJ8UUZi9Eg@mail.gmail.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Fri, 25 Jan 2013 09:51:05 +0000
Message-ID: <CAEY5pxVY6jEsqYGR1xzxKx8H1agbVuyzXZ5NiJ=cjH6Rih-ZGA@mail.gmail.com>
Subject: Re: How do I best store my IRC log data in lucene indexes?
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

Unless there's good reason not to (massive size?  different systems?
conflicting update schedules?) I'd store everything in the one index.

Consider a cached filter for fast restriction of searches to
particular message types.


--
Ian.


On Thu, Jan 24, 2013 at 1:06 PM, crocket <crockabiscuit@gmail.com> wrote:
> I have three data I want to store, search, and restore.
> It is for logging IRC messages.
>
> NICK
>   time=the number of seconds passed since the epoch, 1970-01-01 00:00:00
> UTC+0
>   network=
>   me=0 or 1
>   old=
>   new=
>
> KICKED
>   time=the number of seconds passed since the epoch, 1970-01-01 00:00:00
> UTC+0
>   network=
>   chan=
>   msg=
>   kicker=
>   mynick=
>
> MSG
>   time=the number of seconds passed since the epoch, 1970-01-01 00:00:00
> UTC+0
>   network=
>   chan=
>   msg=
>   me=0 or 1
>   nick=
>
> Below are ideas for IRC log search web UI.
>
> [] Main UI : network("", freenode, ...) | channel("", ...) | nick | message
>   1) network and channel have dropdown boxes. nick and message are text
> boxes.
>   2) duration, network, and nick can be applied to every data.
>   3) channel and message are applicable to KICKED and MSG.
>
> [] Facets
>   1) duration(1day, 1 week, 1 month, 1 year, all) <-- just like google
> search tools
>   2) ...
>
> [] Category search(categories registered as facets)
>   1) network
>   2) channel
>
> Is it better to store NICK, KICKED, and MSG in one index directory or to
> store them in separate index directories?
>
> Are there other things that I should know or consider?

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54859-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Jan 25 10:13:02 2013
Return-Path: <java-user-return-54859-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id D4619ECE3
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 25 Jan 2013 10:13:02 +0000 (UTC)
Received: (qmail 60132 invoked by uid 500); 25 Jan 2013 10:13:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59634 invoked by uid 500); 25 Jan 2013 10:13:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59601 invoked by uid 99); 25 Jan 2013 10:12:59 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Jan 2013 10:12:59 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of youngestachiever@gmail.com designates 209.85.217.171 as permitted sender)
Received: from [209.85.217.171] (HELO mail-lb0-f171.google.com) (209.85.217.171)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Jan 2013 10:12:54 +0000
Received: by mail-lb0-f171.google.com with SMTP id gg13so410586lbb.16
        for <java-user@lucene.apache.org>; Fri, 25 Jan 2013 02:12:32 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:x-received:date:message-id:subject:from:to
         :content-type;
        bh=tMuNMPdPRxv+I+jSoiLZO1qdlhOnXBAdG5Z4pU/CCv8=;
        b=pJvGnRFKADa/6FAl4/QpUs6/S5ElU7BTCgTlgRKuMDJsWePQ39OqPqWrlQYkdLKzDF
         qtx7JwAos3FaCdBiUF12jaU2D7SkCQ+Y1gyCO0u4UgcBwQMDHJ+7Wt9Uih6ufj2WnQss
         w1Qs+ttRArrbMjLJZAC4GhPu6t9sA/HK6gGcEp/GigiEkavh0FA09X8uYYUeZxQwfTUg
         vLxzNSU9ad0p0bZbUCYTq353XqjbqRb7MdoFtjLnpoasxfmkb1xlEaQ0LFk+8D03hAoA
         ouA0Seef0gstqP8jpsSgIOQwDYy+OEhUvfcATnjROny/Om3mo0dykOKBBRmu9k/JvcHN
         AkbA==
MIME-Version: 1.0
X-Received: by 10.112.9.37 with SMTP id w5mr1990904lba.62.1359108752858; Fri,
 25 Jan 2013 02:12:32 -0800 (PST)
Received: by 10.114.4.39 with HTTP; Fri, 25 Jan 2013 02:12:32 -0800 (PST)
Date: Fri, 25 Jan 2013 15:42:32 +0530
Message-ID: <CAPzrt-3WgcmEv+AnovKzbsFsGXoDs+_Z=ph3jGP=4psJfCt_-g@mail.gmail.com>
Subject: Multiple faceting in lucene
From: Ramprakash Ramamoorthy <youngestachiever@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=485b390f7b266ce06c04d41a2abe
X-Virus-Checked: Checked by ClamAV on apache.org

--485b390f7b266ce06c04d41a2abe
Content-Type: text/plain; charset=ISO-8859-1

Hello,

        After reading the facet help document of Lucene 4, I can see it
helps for a folder structure like faceting. I would like to have a
multi-level/multiple faceting in my application.

        Let me explain, we have a requirement of something like a
contingency table
(wikipedia<http://en.wikipedia.org/wiki/Contingency_table> link).
Say we are having two fields a and b, I need to know the facet counts of b,
for each distinct value in a. Also apart from contingency matrix, this
could expand to more than 2 fields as well.

        Is there a way/work around lucene can help me with such multi level
faceting. Please advice. Thanks in advance.

-- 
With Thanks and Regards,
Ramprakash Ramamoorthy,
India.

--485b390f7b266ce06c04d41a2abe--

From java-user-return-54860-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Jan 25 11:03:03 2013
Return-Path: <java-user-return-54860-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 0D9ABEAE3
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 25 Jan 2013 11:03:03 +0000 (UTC)
Received: (qmail 98472 invoked by uid 500); 25 Jan 2013 11:03:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97944 invoked by uid 500); 25 Jan 2013 11:03:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97888 invoked by uid 99); 25 Jan 2013 11:02:58 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Jan 2013 11:02:58 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of vigneshklncit@gmail.com designates 209.85.216.179 as permitted sender)
Received: from [209.85.216.179] (HELO mail-qc0-f179.google.com) (209.85.216.179)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Jan 2013 11:02:52 +0000
Received: by mail-qc0-f179.google.com with SMTP id b40so104785qcq.24
        for <java-user@lucene.apache.org>; Fri, 25 Jan 2013 03:02:31 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:x-received:date:message-id:subject:from:to
         :content-type;
        bh=kET04hVYhYgqQAgojezeKrvwE6eXhVvKW0jStlWiv0U=;
        b=O9ayAW2g1uA1yT/Fqf2oC7jCKFDtNXS5YjEQIl80mvzgfikTpQpSiasZbN3uYTUdRK
         nN14uWpe5yrvjHXlMCuRfTJGUqOsiFVAgCl7UFIYjSvX4xhEceCDKaS1PGnVi44/BMtJ
         HUKw8YZxltIWVJRh1ZXKyp8s6GjwmSGVWzmPcZ4tXDwWvZmbPVE7TfhshqAqfbM0IuF9
         URy8h16eoZ0Ee8DOZSqmOoWTh0id01MPwr4FOiao5t3Hrn1+/wJTGFnvqF1T0zZ7TfCi
         vPfxuO5vsyBMlEqolUuQ4e8JgoK32DBQm6mudn/wtRAs5yX3NQ4iyAqQ+7C/sPcsQ2TY
         4JfA==
MIME-Version: 1.0
X-Received: by 10.229.136.129 with SMTP id r1mr1280325qct.54.1359111751505;
 Fri, 25 Jan 2013 03:02:31 -0800 (PST)
Received: by 10.49.71.143 with HTTP; Fri, 25 Jan 2013 03:02:31 -0800 (PST)
Date: Fri, 25 Jan 2013 16:32:31 +0530
Message-ID: <CAMMjTZyQY8CDS1X+Bk8furAMRpi2U=0RqSMn=nz5EXFjqMt2iQ@mail.gmail.com>
Subject: Need help regarding understanding internals of Lucene Index.
From: VIGNESH S <vigneshklncit@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

I recently started using Lucene. There are lot of  articles and news
about undestanding Lucene at the API levels .

Can anyone help me understanding in depth  what happens internally
inside a lucene index how it stores and details about the which
Datastructure lucene uses for inverted index.

-- 
Thanks and Regards
Vignesh Srinivasan
9739135640

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54861-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Jan 25 12:29:42 2013
Return-Path: <java-user-return-54861-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 58030C17E
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 25 Jan 2013 12:29:42 +0000 (UTC)
Received: (qmail 34699 invoked by uid 500); 25 Jan 2013 12:29:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34406 invoked by uid 500); 25 Jan 2013 12:29:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34357 invoked by uid 99); 25 Jan 2013 12:29:38 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Jan 2013 12:29:38 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of serera@gmail.com designates 74.125.82.42 as permitted sender)
Received: from [74.125.82.42] (HELO mail-wg0-f42.google.com) (74.125.82.42)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Jan 2013 12:29:26 +0000
Received: by mail-wg0-f42.google.com with SMTP id 12so1034063wgh.1
        for <java-user@lucene.apache.org>; Fri, 25 Jan 2013 04:29:04 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:x-received:in-reply-to:references:date:message-id
         :subject:from:to:content-type;
        bh=QiTlkD8BzV9mcH+tj0wsJp75bzJzEhP/kECvpqbhLp4=;
        b=OscWwhnPzjU1SN5bTlSjE9OD+2WKcjB4J46g/b8skgiYm+L/T98z86/duFaEExEcE5
         YeMhAv7dIQqLB7ZPGUshLX3SEs07JHcSfIIU+vlhM0HsDMN9ZfGfYVNyA4X/VyVbsqf9
         37kFI+j+Gmcc/Tz37efAEJIzDJapxlKxQiFgm0MFYK+BA68AybN6xhOgc3YLFGHfP6s2
         qaR0hq6pzp1gL0mXiT0W3jcqQk6bli38NJ4rN5DQLUlTn3kBGmcYxp/5D0bCgZwqn/Py
         um6fkgH/fvM2KAEsN0q/bFWBc0nH6i2eHgqWoD567Ad1Fm2alNwU+/0Jct5dMnbRJqfA
         xnwg==
MIME-Version: 1.0
X-Received: by 10.194.123.105 with SMTP id lz9mr8617155wjb.43.1359116944788;
 Fri, 25 Jan 2013 04:29:04 -0800 (PST)
Received: by 10.194.173.231 with HTTP; Fri, 25 Jan 2013 04:29:04 -0800 (PST)
In-Reply-To: <CALfq-2SC5pzQfQDomhmqpRRDPzJQbSSV2pQ0V3RHwxBY4WrUSQ@mail.gmail.com>
References: <1359048152.2728.88.camel@linux.scoobydoo>
	<CALfq-2SP=wiDnDsviy1fYT0mYmm8uN9BGEJxiG01J15Zb9yuKQ@mail.gmail.com>
	<1359059327.2728.96.camel@linux.scoobydoo>
	<CALfq-2QV1-mknbPp39K9uNvwrgnu1Rda2EJ9p7MP1Mx_jMHWBg@mail.gmail.com>
	<1359106763.2728.106.camel@linux.scoobydoo>
	<CALfq-2SC5pzQfQDomhmqpRRDPzJQbSSV2pQ0V3RHwxBY4WrUSQ@mail.gmail.com>
Date: Fri, 25 Jan 2013 14:29:04 +0200
Message-ID: <CALfq-2Rp0YMZ3nzyAVhQHOw8imJHpvGugXpxfy5_efoqL8K=6Q@mail.gmail.com>
Subject: Re: Faceted search in OR
From: Shai Erera <serera@gmail.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Content-Type: multipart/alternative; boundary=089e01177699b3cc4604d41c124c
X-Virus-Checked: Checked by ClamAV on apache.org

--089e01177699b3cc4604d41c124c
Content-Type: text/plain; charset=ISO-8859-1

Ooops, I just realized that at some point java-user was removed from the CC
:).
Fixing that.

Shai


On Fri, Jan 25, 2013 at 2:27 PM, Shai Erera <serera@gmail.com> wrote:

> Hi Nicola,
>
> Indeed, if it's a URL with parameters, it's not a UI trick :). I think
> that you can do what you want with the package, but before I explain what I
> think you should do, I'd like to use a concrete example, to better
> understand:
>
> Suppose that you have facets A/1, A/2 ... A/6 associated with documents. A
> document is associated with exactly one "A" facet, but the same facet may
> be associated with many documents.
> You query for X and it matches some documents that are collectively
> associated with facets A/1, A/2, A/3 and A/4. So A/5 and A/6 are associated
> with documents that do not match your query.
> However, your FacetRequest sets its numResults (what we call top-K) to 2,
> so you only get back A/1 and A/3, since they have the highest counts.
>
> So what we have now are:
> * Facets A/1, A/3 returned to the user, since they belong to the result
> set and have the highest counts
> * Facets A/2, A/4 are not returned to the user, even though they belong to
> the result set, but did not make it to the top-K
> * Facets A/5, A/6 are not returned because they don't belong to the result
> set at all.
>
> If this makes sense to you, and is similar to the scenario that you have,
> which of these facets would u like to show in addition to A/1 and A/2?
>
> Shai
>
>
> On Fri, Jan 25, 2013 at 11:39 AM, Nicola Buso <nbuso@ebi.ac.uk> wrote:
>
>> Hi Shai,
>>
>> thanks, again you are helping me a lot introducing faceted search.
>>
>> I'm not sure it's a UI trick. Suppose you have a URL with query params
>> that lead you to:
>> - the electronic department
>> - query on "hi-fi"
>> - brand facet selection on "A"
>>
>> which trick should the UI use? As a trick I should immagine:
>> - don't filter on facet with lucene but do it in the UI (now is tricky
>> to do the facet counting without lucene)
>> - execute 2 query one filtered and one not; pick the selected facets
>> from the filtered query and the other from the non filtered one
>> (filtered = filtered by facet selection, we can argue here)
>>
>> Note also I have some services that should return the results together
>> the facets if needed.
>>
>>
>>
>> Nicola.
>>
>> On Thu, 2013-01-24 at 22:47 +0200, Shai Erera wrote:
>> > That's sounds more like a UI trick to me. When I do that, I don't
>> > modify the brand facet (in the UI). I.e., continue to display it, with
>> > the original counts and if the user now wants to filter by A + D, then
>> > your UI somehow allows that (maybe checkboxes). Of if the user wants
>> > to quickly switch from brand A to D, he can do so w/ a single click,
>> > without running the original query again.
>> >
>> >
>> > Shai
>> >
>> >
>> >
>> > On Thu, Jan 24, 2013 at 10:28 PM, Nicola Buso <nbuso@ebi.ac.uk> wrote:
>> >         Hi Shai,
>> >
>> >         the use case is simple. Suppose you want to buy an hi-fi on a
>> >         online
>> >         shop. Go in the website in the Electronic department and write
>> >         "hi-fi"
>> >         in the search box, the interface return you lots of results
>> >         and a facet
>> >         on brands (10 brands values).
>> >         You select brand A and the results are filtered accordingly;
>> >         suppose now
>> >         you want to filter adding to the results the brand D, you
>> >         can't because
>> >         the filtered results by A don't contain values D for the brand
>> >         facet.
>> >
>> >         Than how can I retrieve also the facets for the results not
>> >         filtered?
>> >         I think it's a common use case when you permit to the user to
>> >         filter in
>> >         OR by facets.
>> >
>> >
>> >         Nicola.
>> >
>> >         On Thu, 2013-01-24 at 19:36 +0200, Shai Erera wrote:
>> >         > Hi Nicola,
>> >         >
>> >         >
>> >         > Regarding the OR drill-down, yes you can construct your own
>> >         > BooleanQuery, passing Occur.SHOULD instead of MUST.
>> >         Currently
>> >         > DrillDown does not help you do that, so you can copy the
>> >         code from
>> >         > DrillDown.query and change SHOULD to MUST. I opened
>> >         LUCENE-4716 to add
>> >         > this support to DrillDown.
>> >         >
>> >         >
>> >         >
>> >         > Not sure that I understand your second question. If you want
>> >         to
>> >         > retrieve counts for all descendants of A, then set your
>> >         > FR.setNumResults to Integer.MAX_VALUE. But note, it's going
>> >         to be
>> >         > costly, i.e. you'd get a FacetResultNode per child of A, so
>> >         depending
>> >         > how "wide" A is, this may have some impact on RAM
>> >         consumption.
>> >         >
>> >         > If that's not what you meant, could you please clarify?
>> >         >
>> >         >
>> >         > Shai
>> >         >
>> >         >
>> >         >
>> >         > On Thu, Jan 24, 2013 at 7:22 PM, Nicola Buso
>> >         <nbuso@ebi.ac.uk> wrote:
>> >         >         Hi all,
>> >         >
>> >         >         I'm introducing Lucene faceted search in our project
>> >         and I
>> >         >         need some
>> >         >         hints to achieve some functionalities:
>> >         >         - I want facet filtering in OR, how to?
>> >         >           - obtain facets for the filtered results but also
>> >         for the
>> >         >         non filtered
>> >         >         one. i.e. I have facet A with values A/V1, A/V2,
>> >         A/V3 and
>> >         >         these values
>> >         >         are disjunct each other, than a document having
>> >         field with
>> >         >         value V1
>> >         >         can't have also value V2 and so on; I would like to
>> >         let the
>> >         >         user select
>> >         >         more of these facet values in OR; how can I
>> >         accumulate all the
>> >         >         facets
>> >         >         values also filtering by facet selection? Should it
>> >         work in a
>> >         >         way
>> >         >         similar to ComplementCountingAggregator?
>> >         >           - Can I use DrillDown class to obtain the OR facet
>> >         filtering
>> >         >         or have I
>> >         >         to rewrite a similar class using the BooleanQuery in
>> >         OR. It's
>> >         >         not clear
>> >         >         to me by this comment in the API:
>> >         >         Wraps a given Query as a drill-down query over the
>> >         given
>> >         >         categories,
>> >         >         assuming all are required (e.g. AND). You can
>> >         construct a
>> >         >         query with
>> >         >         different modes (such as OR or AND of ORs) by
>> >         creating a
>> >         >         BooleanQuery
>> >         >         and call this method several times. Make sure to
>> >         wrap the
>> >         >         query in that
>> >         >         case by ConstantScoreQuery and set the boost to
>> >         0.0f, so that
>> >         >         it doesn't
>> >         >         affect scoring.
>> >         >
>> >         >
>> >         >         Do you have any examples doing this?
>> >         >
>> >         >         Regards
>> >         >
>> >         >         Nicola.
>> >         >
>> >         >
>> >         >
>> >         >
>> >         >
>> >         >
>> >
>> ---------------------------------------------------------------------
>> >         >         To unsubscribe, e-mail:
>> >         >         java-user-unsubscribe@lucene.apache.org
>> >         >         For additional commands, e-mail:
>> >         >         java-user-help@lucene.apache.org
>> >         >
>> >         >
>> >         >
>> >
>> >
>> >
>> >
>>
>>
>>
>

--089e01177699b3cc4604d41c124c--

From java-user-return-54862-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Jan 25 12:40:43 2013
Return-Path: <java-user-return-54862-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 06BA6C1AB
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 25 Jan 2013 12:40:43 +0000 (UTC)
Received: (qmail 65315 invoked by uid 500); 25 Jan 2013 12:40:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65253 invoked by uid 500); 25 Jan 2013 12:40:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65135 invoked by uid 99); 25 Jan 2013 12:40:34 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Jan 2013 12:40:34 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of crockabiscuit@gmail.com designates 209.85.212.41 as permitted sender)
Received: from [209.85.212.41] (HELO mail-vb0-f41.google.com) (209.85.212.41)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Jan 2013 12:40:28 +0000
Received: by mail-vb0-f41.google.com with SMTP id l22so217807vbn.28
        for <java-user@lucene.apache.org>; Fri, 25 Jan 2013 04:40:07 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:x-received:in-reply-to:references:date:message-id
         :subject:from:to:content-type;
        bh=C2E2+SZ4GteVoK6WyDMUvlMlxdO2+58TsBiYTF/U1uA=;
        b=hZMWhApkQWHPHSrYYuB0sqXZDUKoIqSl+H49fnYMrIHq0Ja/XCeKCrTUOPOJ3NhcJE
         BCUWRoSTskImXVpw5C91Mz+RfQvp2s9CSQhQdLhl2Qvo1IhdOBOloppVYcKan72xMjCG
         95ECFFfHineJfInfSp5FX5Lc7B1fyatJU6GgFq9lsOpoPrMyayhUlzm/aoRAYg32oDoX
         dlvApocXfykMgEgD5xJ3FunkcBVwScajU5aKZaE7ughDeeAc8QX2cyduyd8g12Zbz6uC
         O9vLMGvR3v7PQywEsRTOF/UzTumAoFeaT4iaS6BC58iEcUDLZuqxxasW1qA2EIxbKZye
         +j9g==
MIME-Version: 1.0
X-Received: by 10.52.16.35 with SMTP id c3mr5074557vdd.90.1359117607434; Fri,
 25 Jan 2013 04:40:07 -0800 (PST)
Received: by 10.220.37.140 with HTTP; Fri, 25 Jan 2013 04:40:07 -0800 (PST)
In-Reply-To: <CAEY5pxVY6jEsqYGR1xzxKx8H1agbVuyzXZ5NiJ=cjH6Rih-ZGA@mail.gmail.com>
References: <CAL0=0H33AtnsNYxB+WseQXvSmLn_2UJ7QZ3p9vJMcJ8UUZi9Eg@mail.gmail.com>
	<CAEY5pxVY6jEsqYGR1xzxKx8H1agbVuyzXZ5NiJ=cjH6Rih-ZGA@mail.gmail.com>
Date: Fri, 25 Jan 2013 21:40:07 +0900
Message-ID: <CAL0=0H0U1L7y_=vovWnCs+r8gs6r2zZK813UDJ9iCVq2vH+OYg@mail.gmail.com>
Subject: Re: How do I best store my IRC log data in lucene indexes?
From: crocket <crockabiscuit@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=bcaec5040d7232fb6404d41c3a8c
X-Virus-Checked: Checked by ClamAV on apache.org

--bcaec5040d7232fb6404d41c3a8c
Content-Type: text/plain; charset=ISO-8859-1

How do you propose I differentiate different message types if I put all of
them in one index directory?
I thought of adding a message type field, but it doesn't seem to be a good
way.


On Fri, Jan 25, 2013 at 6:51 PM, Ian Lea <ian.lea@gmail.com> wrote:

> Unless there's good reason not to (massive size?  different systems?
> conflicting update schedules?) I'd store everything in the one index.
>
> Consider a cached filter for fast restriction of searches to
> particular message types.
>
>
> --
> Ian.
>
>
> On Thu, Jan 24, 2013 at 1:06 PM, crocket <crockabiscuit@gmail.com> wrote:
> > I have three data I want to store, search, and restore.
> > It is for logging IRC messages.
> >
> > NICK
> >   time=the number of seconds passed since the epoch, 1970-01-01 00:00:00
> > UTC+0
> >   network=
> >   me=0 or 1
> >   old=
> >   new=
> >
> > KICKED
> >   time=the number of seconds passed since the epoch, 1970-01-01 00:00:00
> > UTC+0
> >   network=
> >   chan=
> >   msg=
> >   kicker=
> >   mynick=
> >
> > MSG
> >   time=the number of seconds passed since the epoch, 1970-01-01 00:00:00
> > UTC+0
> >   network=
> >   chan=
> >   msg=
> >   me=0 or 1
> >   nick=
> >
> > Below are ideas for IRC log search web UI.
> >
> > [] Main UI : network("", freenode, ...) | channel("", ...) | nick |
> message
> >   1) network and channel have dropdown boxes. nick and message are text
> > boxes.
> >   2) duration, network, and nick can be applied to every data.
> >   3) channel and message are applicable to KICKED and MSG.
> >
> > [] Facets
> >   1) duration(1day, 1 week, 1 month, 1 year, all) <-- just like google
> > search tools
> >   2) ...
> >
> > [] Category search(categories registered as facets)
> >   1) network
> >   2) channel
> >
> > Is it better to store NICK, KICKED, and MSG in one index directory or to
> > store them in separate index directories?
> >
> > Are there other things that I should know or consider?
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--bcaec5040d7232fb6404d41c3a8c--

From java-user-return-54863-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Jan 25 12:53:50 2013
Return-Path: <java-user-return-54863-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 3CC6CC1E5
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 25 Jan 2013 12:53:50 +0000 (UTC)
Received: (qmail 3434 invoked by uid 500); 25 Jan 2013 12:53:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3333 invoked by uid 500); 25 Jan 2013 12:53:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3303 invoked by uid 99); 25 Jan 2013 12:53:46 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Jan 2013 12:53:46 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of serera@gmail.com designates 209.85.212.169 as permitted sender)
Received: from [209.85.212.169] (HELO mail-wi0-f169.google.com) (209.85.212.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Jan 2013 12:53:40 +0000
Received: by mail-wi0-f169.google.com with SMTP id hq12so1420642wib.0
        for <java-user@lucene.apache.org>; Fri, 25 Jan 2013 04:53:20 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:x-received:in-reply-to:references:date:message-id
         :subject:from:to:content-type;
        bh=fbNPzgJ5gGtW8WDqTBHjAlCEzeecqUaNd7ckMRxpXh0=;
        b=t0QYk4AZwfhwRaL7GfH4nFJiYPUza4Z507uETcjFyc8vXWlHsy6zL9+K0CgxGbT4wN
         rIQ9Yhvtk0wskiYETSTNUACyUVYaiDGg2GWyQWxqIWHI/aFsIsi8APaAGiuUg9F2gKTW
         mCtq8BZ8vsIwc/MBLHt9cymyyWmJ1HcTCRVDCYPgfKpLpOPUAm9NtyAk9bzRz6J7Q9ZH
         TrA91c29gdAmc0ATQXPjyqcBuGfHKwMzIpnEpRyNL17HBZkmLsiOL2l3T3EWdeBQxiPi
         8PRWwRViNjeIyWXpaN4a5r99KVc4nmbM5VDixThE+wXHVGYCDsrzyjG5bZiOQVoelJeF
         AjZg==
MIME-Version: 1.0
X-Received: by 10.194.171.198 with SMTP id aw6mr8835227wjc.3.1359118399918;
 Fri, 25 Jan 2013 04:53:19 -0800 (PST)
Received: by 10.194.173.231 with HTTP; Fri, 25 Jan 2013 04:53:19 -0800 (PST)
In-Reply-To: <CAPzrt-3WgcmEv+AnovKzbsFsGXoDs+_Z=ph3jGP=4psJfCt_-g@mail.gmail.com>
References: <CAPzrt-3WgcmEv+AnovKzbsFsGXoDs+_Z=ph3jGP=4psJfCt_-g@mail.gmail.com>
Date: Fri, 25 Jan 2013 14:53:19 +0200
Message-ID: <CALfq-2T2oOZCVCDy64m+GPNQdo9+hDB4taeN+1b7ZpQ+Yc8JpA@mail.gmail.com>
Subject: Re: Multiple faceting in lucene
From: Shai Erera <serera@gmail.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Content-Type: multipart/alternative; boundary=089e0122f58e6f53f404d41c6958
X-Virus-Checked: Checked by ClamAV on apache.org

--089e0122f58e6f53f404d41c6958
Content-Type: text/plain; charset=ISO-8859-1

Hi

Are the values of 'a' and 'b' known in advance? Is it a limited set of
values? Are you always interested in a table which covers all values?

If so, one way to do that is to each value of 'a' against all values of
'b'. Of course, pick as pivot the dimension with the least values. Note
however that if the number of values of 'a' and 'b' are big, it may be
costly to run N searches (even if you optimize the query processing).

If the cardinality of 'a' and 'b' is small, and if you index for each
document only one value of 'a' and one value of 'b' (maybe some documents
only have 'a' or 'b'...), then there is another way.
You can run the query 'a AND b', where 'a' and 'b' are the facet dimensions
and for every matching document count a "fake" facet which is a pair of
ordinals, e.g. [1,45], [1,23] ...
In the end, you'll have the counts of the pair of ordinals and you can use
TaxonomyReader to label the ordinals of each pair and return the table.
That will work as long as the cardinality of 'a' and 'b' is sane :-)

Shai


On Fri, Jan 25, 2013 at 12:12 PM, Ramprakash Ramamoorthy <
youngestachiever@gmail.com> wrote:

> Hello,
>
>         After reading the facet help document of Lucene 4, I can see it
> helps for a folder structure like faceting. I would like to have a
> multi-level/multiple faceting in my application.
>
>         Let me explain, we have a requirement of something like a
> contingency table
> (wikipedia<http://en.wikipedia.org/wiki/Contingency_table> link).
> Say we are having two fields a and b, I need to know the facet counts of b,
> for each distinct value in a. Also apart from contingency matrix, this
> could expand to more than 2 fields as well.
>
>         Is there a way/work around lucene can help me with such multi level
> faceting. Please advice. Thanks in advance.
>
> --
> With Thanks and Regards,
> Ramprakash Ramamoorthy,
> India.
>

--089e0122f58e6f53f404d41c6958--

From java-user-return-54864-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Jan 25 12:55:52 2013
Return-Path: <java-user-return-54864-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 3759FC22F
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 25 Jan 2013 12:55:52 +0000 (UTC)
Received: (qmail 21075 invoked by uid 500); 25 Jan 2013 12:55:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21017 invoked by uid 500); 25 Jan 2013 12:55:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21002 invoked by uid 99); 25 Jan 2013 12:55:49 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Jan 2013 12:55:49 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of crockabiscuit@gmail.com designates 209.85.212.41 as permitted sender)
Received: from [209.85.212.41] (HELO mail-vb0-f41.google.com) (209.85.212.41)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Jan 2013 12:55:41 +0000
Received: by mail-vb0-f41.google.com with SMTP id l22so230938vbn.0
        for <java-user@lucene.apache.org>; Fri, 25 Jan 2013 04:55:20 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:x-received:in-reply-to:references:date:message-id
         :subject:from:to:content-type;
        bh=fUj/s7J1NA6u7DcPPsfFK7tuPHhw19082r08gaWBc5g=;
        b=ojdpocdsW1gqvTa49lqmqlRRWSrQfj5ygbrmdi9cWs287LG9kukGwicXvxVrhEEDIp
         B4OT2iAOqe0Sz7QjR7CAHC8+a+wRpzPlH0lWygxmzh6EiUEaQii2SkiFpHWOrre4z7jV
         ZelufIxdWoR6G+L43j1xF1j+gCKsCthI3yYL3h8widaz7uDgBMsxv5dNbRRCK9kYTQUZ
         pnN3jXxVXcG0LKK9ckrVuKQyCS7c8k1hJK1oHi/ls6TBuIX+y40HlkyIhZLMXQlgMn7P
         DDRwqj2QkILpjL6Qg4K72UeHZkhKxESLc64UPGPJCzsGQRDY/CfAuHBF5LMPXJDxIorH
         RaBw==
MIME-Version: 1.0
X-Received: by 10.220.153.143 with SMTP id k15mr5833881vcw.13.1359118520355;
 Fri, 25 Jan 2013 04:55:20 -0800 (PST)
Received: by 10.220.37.140 with HTTP; Fri, 25 Jan 2013 04:55:20 -0800 (PST)
In-Reply-To: <CAEY5pxVY6jEsqYGR1xzxKx8H1agbVuyzXZ5NiJ=cjH6Rih-ZGA@mail.gmail.com>
References: <CAL0=0H33AtnsNYxB+WseQXvSmLn_2UJ7QZ3p9vJMcJ8UUZi9Eg@mail.gmail.com>
	<CAEY5pxVY6jEsqYGR1xzxKx8H1agbVuyzXZ5NiJ=cjH6Rih-ZGA@mail.gmail.com>
Date: Fri, 25 Jan 2013 21:55:20 +0900
Message-ID: <CAL0=0H2Ede22RsN8=wAegBiDEApfbQeue50i0iYkz-TRXgHt6w@mail.gmail.com>
Subject: Re: How do I best store my IRC log data in lucene indexes?
From: crocket <crockabiscuit@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=f46d043d67719d0be204d41c70eb
X-Virus-Checked: Checked by ClamAV on apache.org

--f46d043d67719d0be204d41c70eb
Content-Type: text/plain; charset=ISO-8859-1

Do you mean
http://lucene.apache.org/core/4_1_0/core/org/apache/lucene/analysis/CachingTokenFilter.htmlby
a cached filter?
And how would you restrict searches to particular message types fast with a
cached filter?
I'm a beginner.


On Fri, Jan 25, 2013 at 6:51 PM, Ian Lea <ian.lea@gmail.com> wrote:

> Unless there's good reason not to (massive size?  different systems?
> conflicting update schedules?) I'd store everything in the one index.
>
> Consider a cached filter for fast restriction of searches to
> particular message types.
>
>
> --
> Ian.
>
>
> On Thu, Jan 24, 2013 at 1:06 PM, crocket <crockabiscuit@gmail.com> wrote:
> > I have three data I want to store, search, and restore.
> > It is for logging IRC messages.
> >
> > NICK
> >   time=the number of seconds passed since the epoch, 1970-01-01 00:00:00
> > UTC+0
> >   network=
> >   me=0 or 1
> >   old=
> >   new=
> >
> > KICKED
> >   time=the number of seconds passed since the epoch, 1970-01-01 00:00:00
> > UTC+0
> >   network=
> >   chan=
> >   msg=
> >   kicker=
> >   mynick=
> >
> > MSG
> >   time=the number of seconds passed since the epoch, 1970-01-01 00:00:00
> > UTC+0
> >   network=
> >   chan=
> >   msg=
> >   me=0 or 1
> >   nick=
> >
> > Below are ideas for IRC log search web UI.
> >
> > [] Main UI : network("", freenode, ...) | channel("", ...) | nick |
> message
> >   1) network and channel have dropdown boxes. nick and message are text
> > boxes.
> >   2) duration, network, and nick can be applied to every data.
> >   3) channel and message are applicable to KICKED and MSG.
> >
> > [] Facets
> >   1) duration(1day, 1 week, 1 month, 1 year, all) <-- just like google
> > search tools
> >   2) ...
> >
> > [] Category search(categories registered as facets)
> >   1) network
> >   2) channel
> >
> > Is it better to store NICK, KICKED, and MSG in one index directory or to
> > store them in separate index directories?
> >
> > Are there other things that I should know or consider?
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--f46d043d67719d0be204d41c70eb--

From java-user-return-54865-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Jan 25 12:59:26 2013
Return-Path: <java-user-return-54865-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 2AB98C244
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 25 Jan 2013 12:59:26 +0000 (UTC)
Received: (qmail 33159 invoked by uid 500); 25 Jan 2013 12:59:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33114 invoked by uid 500); 25 Jan 2013 12:59:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33090 invoked by uid 99); 25 Jan 2013 12:59:22 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Jan 2013 12:59:22 +0000
X-ASF-Spam-Status: No, hits=1.7 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of zhoucheng2008@gmail.com designates 209.85.220.171 as permitted sender)
Received: from [209.85.220.171] (HELO mail-vc0-f171.google.com) (209.85.220.171)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Jan 2013 12:59:16 +0000
Received: by mail-vc0-f171.google.com with SMTP id p1so234163vcq.2
        for <java-user@lucene.apache.org>; Fri, 25 Jan 2013 04:58:55 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:x-received:in-reply-to:references:date:message-id
         :subject:from:to:content-type;
        bh=ePBl3/ezGXLEft7e+wRT075L6weQUNNaDYJeta1gHQ0=;
        b=krRh5M1ky8N7YmFoEZhqjuoHh07LkvxIFvYraxBKV5eEZmc4EX+Enb94CnwgVnvq2E
         3luDndyS7TgadGT+FywmGRCyNXS30N6/ByXLbYO7WHpjWdRG5C/bIsYmkKT9KeHgsnuB
         C/bDCZ1nrknaRIEzkp9fWi5/nQDFA+IcoOWaO3JYPcqXjCIb0s+XGLqkmC94RjWbMNUw
         h+jqMknz9fYgaDlBfXH3Z6Pk+6+ZXKtsULcshbnzOtYs+CCNgtPjCpjCfHGaLwGUh4kM
         asM45dfM5GGyJ3qrl+QKqrIciEcsd3LiXwGnltt+3B22CXxLZe2S54ptmsryTr5wo1Z/
         Zvxw==
MIME-Version: 1.0
X-Received: by 10.220.219.77 with SMTP id ht13mr5671644vcb.66.1359118735391;
 Fri, 25 Jan 2013 04:58:55 -0800 (PST)
Received: by 10.58.76.8 with HTTP; Fri, 25 Jan 2013 04:58:55 -0800 (PST)
In-Reply-To: <CAEY5pxVdrHsSJ8x66JE+qnY_S-E2JsQ_uJ8uqc5khRCWeJNC7w@mail.gmail.com>
References: <tencent_3BFC10273212E0A629BB2FC7@qq.com>
	<CAEY5pxVdrHsSJ8x66JE+qnY_S-E2JsQ_uJ8uqc5khRCWeJNC7w@mail.gmail.com>
Date: Fri, 25 Jan 2013 20:58:55 +0800
Message-ID: <CA+huq0A2QtbPYsZynd4_Q_5LCCLHpPC8dFFZ-eDRznn0-Y5n+w@mail.gmail.com>
Subject: =?GB2312?Q?Re=3A_=BB=D8=B8=B4=A3=BA_IndexReader=2Eopen_and_CorruptIndexExcep?=
	=?GB2312?Q?tion?=
From: Cheng <zhoucheng2008@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=14dae9cfc8a86e3cf404d41c7de5
X-Virus-Checked: Checked by ClamAV on apache.org

--14dae9cfc8a86e3cf404d41c7de5
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

Any example code for this SearcherManager?

On Fri, Jan 25, 2013 at 3:59 AM, Ian Lea <ian.lea@gmail.com> wrote:

> There will be one file handle for every currently open file.
>
> Use SearcherManager and this problem should go away.
>
>
> --
> Ian.
>
>
> On Thu, Jan 24, 2013 at 6:40 PM, zhoucheng2008 <zhoucheng2008@gmail.com>
> wrote:
> > What file handlers did you guy refer to?
> >
> >
> > I opened the index directory only. Is this the file handler? Also, how
> to safely and effectively close the index directory?
> >
> >
> > I found the link's explanation somewhat self-contradictory. After I rea=
d
> it, I am confused if I should close the file handlers in the finally bloc=
k
> or not. I am using Java.
> >
> >
> >
> >
> > ------------------ =E5=8E=9F=E5=A7=8B=E9=82=AE=E4=BB=B6 ---------------=
---
> > =E5=8F=91=E4=BB=B6=E4=BA=BA: "Ian Lea"<ian.lea@gmail.com>;
> > =E5=8F=91=E9=80=81=E6=97=B6=E9=97=B4: 2013=E5=B9=B41=E6=9C=8824=E6=97=
=A5(=E6=98=9F=E6=9C=9F=E5=9B=9B) =E4=B8=8B=E5=8D=885:46
> > =E6=94=B6=E4=BB=B6=E4=BA=BA: "java-user"<java-user@lucene.apache.org>;
> >
> > =E4=B8=BB=E9=A2=98: Re: IndexReader.open and CorruptIndexException
> >
> >
> >
> > Well, raising the limits is one option but there may be better ones.
> >
> > There's an FAQ entry on this:
> >
> http://wiki.apache.org/lucene-java/LuceneFAQ#Why_am_I_getting_an_IOExcept=
ion_that_says_.22Too_many_open_files.22.3F
> >
> > Take a look at org.apache.lucene.search.SearcherManager "Utility class
> > to safely share IndexSearcher instances across multiple threads".
> >
> >
> > --
> > Ian.
> >
> >
> > On Thu, Jan 24, 2013 at 9:18 AM, Rafa=C5=82 Ku=C4=87 <r.kuc@solr.pl> wr=
ote:
> >> Hello!
> >>
> >> You need to allow the user that is running Lucene to open more files.
> >> There are plenty of tutorials available on the web. Modify your
> >> /etc/security/limits.conf and if for example your user is lucene add
> >> the following (or modify if those already exists):
> >>
> >> lucene soft nofile 64000
> >> lucene hard nofile 64000
> >>
> >> Relog and run:
> >>
> >> sudo -u lucene -s "ulimit -Sn"
> >>
> >> To see if the limits are the ones you set. If they are not, check if
> >> you don't have pam_limits.so commented in the /etc/pam.d/
> >>
> >> --
> >> Regards,
> >>  Rafa=C5=82 Ku=C4=87
> >>  Sematext :: http://sematext.com/ :: Solr - Lucene - Nutch
> >>
> >>> Here is the log:
> >>
> >>> Jan 24, 2013 4:10:33 AM
> >>> org.apache.tomcat.util.net.AprEndpoint$Acceptor run
> >>> SEVERE: Socket accept failed
> >>> org.apache.tomcat.jni.Error: 24: Too many open files
> >>> at org.apache.tomcat.jni.Socket.accept(Native Method)
> >>> at
> >>>
> org.apache.tomcat.util.net.AprEndpoint$Acceptor.run(AprEndpoint.java:990)
> >>> at java.lang.Thread.run(Thread.java:722)
> >>
> >>
> >>
> >>> Too many open files... How to solve it?
> >>
> >>
> >>> On Tue, Jan 22, 2013 at 10:52 PM, Michael McCandless <
> >>> lucene@mikemccandless.com> wrote:
> >>
> >>>> Can you post the full stack trace of the CorruptIndexException?
> >>>>
> >>>> Mike McCandless
> >>>>
> >>>> http://blog.mikemccandless.com
> >>>>
> >>>> On Tue, Jan 22, 2013 at 8:20 AM, Cheng <zhoucheng2008@gmail.com>
> wrote:
> >>>> > Hi,
> >>>> >
> >>>> > I run a Lucene application on Tomcat. The app will try to open a
> Linux
> >>>> > directory, and sometime returns CorruptIndexException error.
> >>>> >
> >>>> > Shortly after I restart Tomcat (nothing else changes), the app can
> be run
> >>>> > on the fly. I am using the following statements to open a director=
y:
> >>>> >
> >>>> >
> >>>> >     try {
> >>>> >       searcher =3D new IndexSearcher(IndexReader.open(new
> >>>> NIOFSDirectory(new
> >>>> > File("/home/user/"+ type))));
> >>>> >     } catch (IOException e) {
> >>>> >       throw new Exception("[" + type + "] Cannot open index
> folder...");
> >>>> >     }
> >>>> >
> >>>> > I would like to know how to tackle this problem.
> >>>> >
> >>>> > Many thanks!
> >>>>
> >>>> --------------------------------------------------------------------=
-
> >>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >>>> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>>>
> >>>>
> >>
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--14dae9cfc8a86e3cf404d41c7de5--

From java-user-return-54866-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Jan 25 13:26:35 2013
Return-Path: <java-user-return-54866-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 8758AE206
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 25 Jan 2013 13:26:35 +0000 (UTC)
Received: (qmail 15116 invoked by uid 500); 25 Jan 2013 13:26:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14581 invoked by uid 500); 25 Jan 2013 13:26:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14548 invoked by uid 99); 25 Jan 2013 13:26:31 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Jan 2013 13:26:31 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of jpountz@gmail.com designates 209.85.214.47 as permitted sender)
Received: from [209.85.214.47] (HELO mail-bk0-f47.google.com) (209.85.214.47)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Jan 2013 13:26:23 +0000
Received: by mail-bk0-f47.google.com with SMTP id jc3so239181bkc.34
        for <java-user@lucene.apache.org>; Fri, 25 Jan 2013 05:26:03 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=x-received:mime-version:in-reply-to:references:from:date:message-id
         :subject:to:content-type;
        bh=qYKn9eWQZQ7uXtJShnLBSAyAFff3RbUckp9Mq3p9IJs=;
        b=hMCdz8VqsUXQQruAzHOJhxtBlK50QpzPWX0UhmCNf5aNxr8xLlqwIONJ7aQn/1ltjk
         akxldoPcbouP1uJ4x7byB7ti/DQx/RNiy9sEBf/OgYrY6m+MxamrWb2uXTjc9vs8nU4P
         Otzwgda1Hubejh3oeSHN4lkpXN8/o9zXYqee5Ye/qJ5Du9LcpTmxSuSESniVpzh6+kwR
         lr2nDIIFeKNgA9GCwiMU7hyA7s9Dq8W0CfplK1GE2WV+xBX/e3ASsKWyrn3J/iPPZnhu
         zZY9lWknUhkS1PPewj6eacWG1ukz3ipKDlLJGRGQiJj8Hv44M+9KClAq3g9/1Y4ZjP1g
         ULYg==
X-Received: by 10.204.10.88 with SMTP id o24mr1835727bko.19.1359120363394;
 Fri, 25 Jan 2013 05:26:03 -0800 (PST)
MIME-Version: 1.0
Received: by 10.204.253.138 with HTTP; Fri, 25 Jan 2013 05:25:43 -0800 (PST)
In-Reply-To: <CAMMjTZyQY8CDS1X+Bk8furAMRpi2U=0RqSMn=nz5EXFjqMt2iQ@mail.gmail.com>
References: <CAMMjTZyQY8CDS1X+Bk8furAMRpi2U=0RqSMn=nz5EXFjqMt2iQ@mail.gmail.com>
From: Adrien Grand <jpountz@gmail.com>
Date: Fri, 25 Jan 2013 14:25:43 +0100
Message-ID: <CAPsWd+NU73YF-BmGQnWUgu1O1xXiutxRT-dCjcHzGzjSA3dZNA@mail.gmail.com>
Subject: Re: Need help regarding understanding internals of Lucene Index.
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Vignesh,

This is a very broad question! The following links might help you:
 - Lucene documentation: http://lucene.apache.org/core/4_1_0/index.html
 - File formats:
http://lucene.apache.org/core/4_1_0/core/org/apache/lucene/codecs/lucene41/package-summary.html#package_description
 - The block tree terms dictionary:
https://issues.apache.org/jira/browse/LUCENE-3030 (data structure used
to lookup terms)

-- 
Adrien

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54867-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Jan 25 13:26:59 2013
Return-Path: <java-user-return-54867-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id C3E05E40B
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 25 Jan 2013 13:26:59 +0000 (UTC)
Received: (qmail 17124 invoked by uid 500); 25 Jan 2013 13:26:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17092 invoked by uid 500); 25 Jan 2013 13:26:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17081 invoked by uid 99); 25 Jan 2013 13:26:57 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Jan 2013 13:26:57 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.210.51] (HELO mail-da0-f51.google.com) (209.85.210.51)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Jan 2013 13:26:51 +0000
Received: by mail-da0-f51.google.com with SMTP id i30so173553dad.24
        for <java-user@lucene.apache.org>; Fri, 25 Jan 2013 05:26:29 -0800 (PST)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=x-received:mime-version:in-reply-to:references:from:date:message-id
         :subject:to:content-type:content-transfer-encoding
         :x-gm-message-state;
        bh=myF0DiiEhkODuD1XzRNb1M+usoCapKBuc4mMJi5UyoY=;
        b=kDDy0jXTTCWKONPdVI0WCnJ/8ijak4txAyePQfZJQx4gTQidjZUySpMlClVRXoEvex
         Bm7EfzE1qo87oGcBepiKbQKze5Wew0oGXDq7G9E9tVdtDtmMe4GcuOgfoDta2HZ5VZpU
         BXGTYg1vXZtLtVVBw4s5398FPG6RYNWkLEi3qEak+Rv/OXQ8tCfeDiuTV4R5q0oAh2Gp
         nesHZVhpW7xXi2oKVeKyt+FuEtUKEB8SzQ7oodOrFvCgmLIhAZOdyHHPJ4F2XyRxmHn8
         blMnmxGcbolRMzCNXlrtQqKCtvcL4k4k+bavYCzMGhMbEuQQRf3E4SByq6dXHrlIZi0q
         qIUg==
X-Received: by 10.68.238.136 with SMTP id vk8mr14237764pbc.86.1359120389630;
 Fri, 25 Jan 2013 05:26:29 -0800 (PST)
MIME-Version: 1.0
Received: by 10.68.154.73 with HTTP; Fri, 25 Jan 2013 05:26:09 -0800 (PST)
In-Reply-To: <CA+huq0A2QtbPYsZynd4_Q_5LCCLHpPC8dFFZ-eDRznn0-Y5n+w@mail.gmail.com>
References: <tencent_3BFC10273212E0A629BB2FC7@qq.com> <CAEY5pxVdrHsSJ8x66JE+qnY_S-E2JsQ_uJ8uqc5khRCWeJNC7w@mail.gmail.com>
 <CA+huq0A2QtbPYsZynd4_Q_5LCCLHpPC8dFFZ-eDRznn0-Y5n+w@mail.gmail.com>
From: Michael McCandless <lucene@mikemccandless.com>
Date: Fri, 25 Jan 2013 08:26:09 -0500
Message-ID: <CAL8PwkbpTOiCZ6_7ZhP_2pC06PqMwBe+7Wv=mYzz6MNJkVpXYQ@mail.gmail.com>
Subject: =?GB2312?Q?Re=3A_=BB=D8=B8=B4=A3=BA_IndexReader=2Eopen_and_CorruptIndexExcep?=
	=?GB2312?Q?tion?=
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Gm-Message-State: ALoCoQm8twI0ECnqsiu4mr1NK3GyBUl7PK5mDL+gjCD3thbYEdNMmi/dR+7cXrtGteU4L9GVHL/d
X-Virus-Checked: Checked by ClamAV on apache.org

Maybe here?:

    http://blog.mikemccandless.com/2011/11/near-real-time-readers-with-luce=
nes.html

Mike McCandless

http://blog.mikemccandless.com

On Fri, Jan 25, 2013 at 7:58 AM, Cheng <zhoucheng2008@gmail.com> wrote:
> Any example code for this SearcherManager?
>
> On Fri, Jan 25, 2013 at 3:59 AM, Ian Lea <ian.lea@gmail.com> wrote:
>
>> There will be one file handle for every currently open file.
>>
>> Use SearcherManager and this problem should go away.
>>
>>
>> --
>> Ian.
>>
>>
>> On Thu, Jan 24, 2013 at 6:40 PM, zhoucheng2008 <zhoucheng2008@gmail.com>
>> wrote:
>> > What file handlers did you guy refer to?
>> >
>> >
>> > I opened the index directory only. Is this the file handler? Also, how
>> to safely and effectively close the index directory?
>> >
>> >
>> > I found the link's explanation somewhat self-contradictory. After I re=
ad
>> it, I am confused if I should close the file handlers in the finally blo=
ck
>> or not. I am using Java.
>> >
>> >
>> >
>> >
>> > ------------------ =E5=8E=9F=E5=A7=8B=E9=82=AE=E4=BB=B6 --------------=
----
>> > =E5=8F=91=E4=BB=B6=E4=BA=BA: "Ian Lea"<ian.lea@gmail.com>;
>> > =E5=8F=91=E9=80=81=E6=97=B6=E9=97=B4: 2013=E5=B9=B41=E6=9C=8824=E6=97=
=A5(=E6=98=9F=E6=9C=9F=E5=9B=9B) =E4=B8=8B=E5=8D=885:46
>> > =E6=94=B6=E4=BB=B6=E4=BA=BA: "java-user"<java-user@lucene.apache.org>;
>> >
>> > =E4=B8=BB=E9=A2=98: Re: IndexReader.open and CorruptIndexException
>> >
>> >
>> >
>> > Well, raising the limits is one option but there may be better ones.
>> >
>> > There's an FAQ entry on this:
>> >
>> http://wiki.apache.org/lucene-java/LuceneFAQ#Why_am_I_getting_an_IOExcep=
tion_that_says_.22Too_many_open_files.22.3F
>> >
>> > Take a look at org.apache.lucene.search.SearcherManager "Utility class
>> > to safely share IndexSearcher instances across multiple threads".
>> >
>> >
>> > --
>> > Ian.
>> >
>> >
>> > On Thu, Jan 24, 2013 at 9:18 AM, Rafa=C5=82 Ku=C4=87 <r.kuc@solr.pl> w=
rote:
>> >> Hello!
>> >>
>> >> You need to allow the user that is running Lucene to open more files.
>> >> There are plenty of tutorials available on the web. Modify your
>> >> /etc/security/limits.conf and if for example your user is lucene add
>> >> the following (or modify if those already exists):
>> >>
>> >> lucene soft nofile 64000
>> >> lucene hard nofile 64000
>> >>
>> >> Relog and run:
>> >>
>> >> sudo -u lucene -s "ulimit -Sn"
>> >>
>> >> To see if the limits are the ones you set. If they are not, check if
>> >> you don't have pam_limits.so commented in the /etc/pam.d/
>> >>
>> >> --
>> >> Regards,
>> >>  Rafa=C5=82 Ku=C4=87
>> >>  Sematext :: http://sematext.com/ :: Solr - Lucene - Nutch
>> >>
>> >>> Here is the log:
>> >>
>> >>> Jan 24, 2013 4:10:33 AM
>> >>> org.apache.tomcat.util.net.AprEndpoint$Acceptor run
>> >>> SEVERE: Socket accept failed
>> >>> org.apache.tomcat.jni.Error: 24: Too many open files
>> >>> at org.apache.tomcat.jni.Socket.accept(Native Method)
>> >>> at
>> >>>
>> org.apache.tomcat.util.net.AprEndpoint$Acceptor.run(AprEndpoint.java:990=
)
>> >>> at java.lang.Thread.run(Thread.java:722)
>> >>
>> >>
>> >>
>> >>> Too many open files... How to solve it?
>> >>
>> >>
>> >>> On Tue, Jan 22, 2013 at 10:52 PM, Michael McCandless <
>> >>> lucene@mikemccandless.com> wrote:
>> >>
>> >>>> Can you post the full stack trace of the CorruptIndexException?
>> >>>>
>> >>>> Mike McCandless
>> >>>>
>> >>>> http://blog.mikemccandless.com
>> >>>>
>> >>>> On Tue, Jan 22, 2013 at 8:20 AM, Cheng <zhoucheng2008@gmail.com>
>> wrote:
>> >>>> > Hi,
>> >>>> >
>> >>>> > I run a Lucene application on Tomcat. The app will try to open a
>> Linux
>> >>>> > directory, and sometime returns CorruptIndexException error.
>> >>>> >
>> >>>> > Shortly after I restart Tomcat (nothing else changes), the app ca=
n
>> be run
>> >>>> > on the fly. I am using the following statements to open a directo=
ry:
>> >>>> >
>> >>>> >
>> >>>> >     try {
>> >>>> >       searcher =3D new IndexSearcher(IndexReader.open(new
>> >>>> NIOFSDirectory(new
>> >>>> > File("/home/user/"+ type))));
>> >>>> >     } catch (IOException e) {
>> >>>> >       throw new Exception("[" + type + "] Cannot open index
>> folder...");
>> >>>> >     }
>> >>>> >
>> >>>> > I would like to know how to tackle this problem.
>> >>>> >
>> >>>> > Many thanks!
>> >>>>
>> >>>> -------------------------------------------------------------------=
--
>> >>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>> >>>>
>> >>>>
>> >>
>> >>
>> >> ---------------------------------------------------------------------
>> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >> For additional commands, e-mail: java-user-help@lucene.apache.org
>> >>
>> >
>> > ---------------------------------------------------------------------
>> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> > For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54868-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Jan 25 13:38:44 2013
Return-Path: <java-user-return-54868-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id F26D6E2B5
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 25 Jan 2013 13:38:44 +0000 (UTC)
Received: (qmail 47636 invoked by uid 500); 25 Jan 2013 13:38:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47596 invoked by uid 500); 25 Jan 2013 13:38:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47582 invoked by uid 99); 25 Jan 2013 13:38:42 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Jan 2013 13:38:42 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.210.51] (HELO mail-da0-f51.google.com) (209.85.210.51)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Jan 2013 13:38:35 +0000
Received: by mail-da0-f51.google.com with SMTP id i30so175707dad.38
        for <java-user@lucene.apache.org>; Fri, 25 Jan 2013 05:38:14 -0800 (PST)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=x-received:mime-version:in-reply-to:references:from:date:message-id
         :subject:to:content-type:x-gm-message-state;
        bh=OKKuW4ojxr5BhnFO9sIgw1jV6leeoQs8+PoBhlRqIrg=;
        b=CcmL5P4Mbdne2oDqHWWQ9rVyVaLwuSAHFalvZhK9/o7qIJiVrARbtXj18EsHV9qDR0
         cTHAYZm52bKe70CHuBZmhbgmkmfpo6L2g2IQIMFj8J7JLXYVQ4nenLSYbGCqb0kvziAR
         Aa8QxQrx5awVFkjHeLSJaCPOEweFkT+QwC+/EGtny5SuJe4Dxc7WDtoNPwoBpu0vaspC
         5m74Io1mnGMmCsMUPftSFCfPMSWBpSDS1P6ubxQ1YydTz52SESWMeb6W5P/JJLZxC+rr
         BFp7VdkzeF3nu2b78RuLRpO4Uvv2XMRDcnmGAu++hP8sYenzHG4LrIWFHE+cdu8g4P89
         7IJQ==
X-Received: by 10.68.222.232 with SMTP id qp8mr14151066pbc.99.1359121094200;
 Fri, 25 Jan 2013 05:38:14 -0800 (PST)
MIME-Version: 1.0
Received: by 10.68.154.73 with HTTP; Fri, 25 Jan 2013 05:37:54 -0800 (PST)
In-Reply-To: <CALfq-2Rp0YMZ3nzyAVhQHOw8imJHpvGugXpxfy5_efoqL8K=6Q@mail.gmail.com>
References: <1359048152.2728.88.camel@linux.scoobydoo> <CALfq-2SP=wiDnDsviy1fYT0mYmm8uN9BGEJxiG01J15Zb9yuKQ@mail.gmail.com>
 <1359059327.2728.96.camel@linux.scoobydoo> <CALfq-2QV1-mknbPp39K9uNvwrgnu1Rda2EJ9p7MP1Mx_jMHWBg@mail.gmail.com>
 <1359106763.2728.106.camel@linux.scoobydoo> <CALfq-2SC5pzQfQDomhmqpRRDPzJQbSSV2pQ0V3RHwxBY4WrUSQ@mail.gmail.com>
 <CALfq-2Rp0YMZ3nzyAVhQHOw8imJHpvGugXpxfy5_efoqL8K=6Q@mail.gmail.com>
From: Michael McCandless <lucene@mikemccandless.com>
Date: Fri, 25 Jan 2013 08:37:54 -0500
Message-ID: <CAL8Pwkaz=gvapAb6JjvR77WUhQ=0i+TTv=29SgROew1eAWQvZg@mail.gmail.com>
Subject: Re: Faceted search in OR
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Gm-Message-State: ALoCoQluTN+7P8Hp6DrX9LfiHszbkgSWcl7VKetVE+bVMOe8SQTfaiMUFp8J6Pbz3z/hsQWEOSZB
X-Virus-Checked: Checked by ClamAV on apache.org

I think that was supposed to be A/1 and A/3 in the last sentence below?

But, anyway, I think the question (and it's a good one!) is how, after
having drilled down on one of these, eg A/1, would you then still show
the counts for the other A/N categories?

Ie the counts would show how many hits the user would see if they
changed A/1 drilldown to A/N instead.

I call this "drill sideways"...

Mike McCandless

http://blog.mikemccandless.com

On Fri, Jan 25, 2013 at 7:29 AM, Shai Erera <serera@gmail.com> wrote:
> Ooops, I just realized that at some point java-user was removed from the CC
> :).
> Fixing that.
>
> Shai
>
>
> On Fri, Jan 25, 2013 at 2:27 PM, Shai Erera <serera@gmail.com> wrote:
>
>> Hi Nicola,
>>
>> Indeed, if it's a URL with parameters, it's not a UI trick :). I think
>> that you can do what you want with the package, but before I explain what I
>> think you should do, I'd like to use a concrete example, to better
>> understand:
>>
>> Suppose that you have facets A/1, A/2 ... A/6 associated with documents. A
>> document is associated with exactly one "A" facet, but the same facet may
>> be associated with many documents.
>> You query for X and it matches some documents that are collectively
>> associated with facets A/1, A/2, A/3 and A/4. So A/5 and A/6 are associated
>> with documents that do not match your query.
>> However, your FacetRequest sets its numResults (what we call top-K) to 2,
>> so you only get back A/1 and A/3, since they have the highest counts.
>>
>> So what we have now are:
>> * Facets A/1, A/3 returned to the user, since they belong to the result
>> set and have the highest counts
>> * Facets A/2, A/4 are not returned to the user, even though they belong to
>> the result set, but did not make it to the top-K
>> * Facets A/5, A/6 are not returned because they don't belong to the result
>> set at all.
>>
>> If this makes sense to you, and is similar to the scenario that you have,
>> which of these facets would u like to show in addition to A/1 and A/2?
>>
>> Shai
>>
>>
>> On Fri, Jan 25, 2013 at 11:39 AM, Nicola Buso <nbuso@ebi.ac.uk> wrote:
>>
>>> Hi Shai,
>>>
>>> thanks, again you are helping me a lot introducing faceted search.
>>>
>>> I'm not sure it's a UI trick. Suppose you have a URL with query params
>>> that lead you to:
>>> - the electronic department
>>> - query on "hi-fi"
>>> - brand facet selection on "A"
>>>
>>> which trick should the UI use? As a trick I should immagine:
>>> - don't filter on facet with lucene but do it in the UI (now is tricky
>>> to do the facet counting without lucene)
>>> - execute 2 query one filtered and one not; pick the selected facets
>>> from the filtered query and the other from the non filtered one
>>> (filtered = filtered by facet selection, we can argue here)
>>>
>>> Note also I have some services that should return the results together
>>> the facets if needed.
>>>
>>>
>>>
>>> Nicola.
>>>
>>> On Thu, 2013-01-24 at 22:47 +0200, Shai Erera wrote:
>>> > That's sounds more like a UI trick to me. When I do that, I don't
>>> > modify the brand facet (in the UI). I.e., continue to display it, with
>>> > the original counts and if the user now wants to filter by A + D, then
>>> > your UI somehow allows that (maybe checkboxes). Of if the user wants
>>> > to quickly switch from brand A to D, he can do so w/ a single click,
>>> > without running the original query again.
>>> >
>>> >
>>> > Shai
>>> >
>>> >
>>> >
>>> > On Thu, Jan 24, 2013 at 10:28 PM, Nicola Buso <nbuso@ebi.ac.uk> wrote:
>>> >         Hi Shai,
>>> >
>>> >         the use case is simple. Suppose you want to buy an hi-fi on a
>>> >         online
>>> >         shop. Go in the website in the Electronic department and write
>>> >         "hi-fi"
>>> >         in the search box, the interface return you lots of results
>>> >         and a facet
>>> >         on brands (10 brands values).
>>> >         You select brand A and the results are filtered accordingly;
>>> >         suppose now
>>> >         you want to filter adding to the results the brand D, you
>>> >         can't because
>>> >         the filtered results by A don't contain values D for the brand
>>> >         facet.
>>> >
>>> >         Than how can I retrieve also the facets for the results not
>>> >         filtered?
>>> >         I think it's a common use case when you permit to the user to
>>> >         filter in
>>> >         OR by facets.
>>> >
>>> >
>>> >         Nicola.
>>> >
>>> >         On Thu, 2013-01-24 at 19:36 +0200, Shai Erera wrote:
>>> >         > Hi Nicola,
>>> >         >
>>> >         >
>>> >         > Regarding the OR drill-down, yes you can construct your own
>>> >         > BooleanQuery, passing Occur.SHOULD instead of MUST.
>>> >         Currently
>>> >         > DrillDown does not help you do that, so you can copy the
>>> >         code from
>>> >         > DrillDown.query and change SHOULD to MUST. I opened
>>> >         LUCENE-4716 to add
>>> >         > this support to DrillDown.
>>> >         >
>>> >         >
>>> >         >
>>> >         > Not sure that I understand your second question. If you want
>>> >         to
>>> >         > retrieve counts for all descendants of A, then set your
>>> >         > FR.setNumResults to Integer.MAX_VALUE. But note, it's going
>>> >         to be
>>> >         > costly, i.e. you'd get a FacetResultNode per child of A, so
>>> >         depending
>>> >         > how "wide" A is, this may have some impact on RAM
>>> >         consumption.
>>> >         >
>>> >         > If that's not what you meant, could you please clarify?
>>> >         >
>>> >         >
>>> >         > Shai
>>> >         >
>>> >         >
>>> >         >
>>> >         > On Thu, Jan 24, 2013 at 7:22 PM, Nicola Buso
>>> >         <nbuso@ebi.ac.uk> wrote:
>>> >         >         Hi all,
>>> >         >
>>> >         >         I'm introducing Lucene faceted search in our project
>>> >         and I
>>> >         >         need some
>>> >         >         hints to achieve some functionalities:
>>> >         >         - I want facet filtering in OR, how to?
>>> >         >           - obtain facets for the filtered results but also
>>> >         for the
>>> >         >         non filtered
>>> >         >         one. i.e. I have facet A with values A/V1, A/V2,
>>> >         A/V3 and
>>> >         >         these values
>>> >         >         are disjunct each other, than a document having
>>> >         field with
>>> >         >         value V1
>>> >         >         can't have also value V2 and so on; I would like to
>>> >         let the
>>> >         >         user select
>>> >         >         more of these facet values in OR; how can I
>>> >         accumulate all the
>>> >         >         facets
>>> >         >         values also filtering by facet selection? Should it
>>> >         work in a
>>> >         >         way
>>> >         >         similar to ComplementCountingAggregator?
>>> >         >           - Can I use DrillDown class to obtain the OR facet
>>> >         filtering
>>> >         >         or have I
>>> >         >         to rewrite a similar class using the BooleanQuery in
>>> >         OR. It's
>>> >         >         not clear
>>> >         >         to me by this comment in the API:
>>> >         >         Wraps a given Query as a drill-down query over the
>>> >         given
>>> >         >         categories,
>>> >         >         assuming all are required (e.g. AND). You can
>>> >         construct a
>>> >         >         query with
>>> >         >         different modes (such as OR or AND of ORs) by
>>> >         creating a
>>> >         >         BooleanQuery
>>> >         >         and call this method several times. Make sure to
>>> >         wrap the
>>> >         >         query in that
>>> >         >         case by ConstantScoreQuery and set the boost to
>>> >         0.0f, so that
>>> >         >         it doesn't
>>> >         >         affect scoring.
>>> >         >
>>> >         >
>>> >         >         Do you have any examples doing this?
>>> >         >
>>> >         >         Regards
>>> >         >
>>> >         >         Nicola.
>>> >         >
>>> >         >
>>> >         >
>>> >         >
>>> >         >
>>> >         >
>>> >
>>> ---------------------------------------------------------------------
>>> >         >         To unsubscribe, e-mail:
>>> >         >         java-user-unsubscribe@lucene.apache.org
>>> >         >         For additional commands, e-mail:
>>> >         >         java-user-help@lucene.apache.org
>>> >         >
>>> >         >
>>> >         >
>>> >
>>> >
>>> >
>>> >
>>>
>>>
>>>
>>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54869-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Jan 25 13:41:25 2013
Return-Path: <java-user-return-54869-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 46693E2D2
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 25 Jan 2013 13:41:25 +0000 (UTC)
Received: (qmail 59967 invoked by uid 500); 25 Jan 2013 13:41:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59928 invoked by uid 500); 25 Jan 2013 13:41:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59894 invoked by uid 99); 25 Jan 2013 13:41:21 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Jan 2013 13:41:21 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ian.lea@gmail.com designates 74.125.82.178 as permitted sender)
Received: from [74.125.82.178] (HELO mail-we0-f178.google.com) (74.125.82.178)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Jan 2013 13:41:13 +0000
Received: by mail-we0-f178.google.com with SMTP id x48so183693wey.37
        for <java-user@lucene.apache.org>; Fri, 25 Jan 2013 05:40:53 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=x-received:mime-version:in-reply-to:references:from:date:message-id
         :subject:to:content-type;
        bh=WvoDgcVeJZczG+urGs8Ld0oeMe3LnrF2l2pKUw/TA0s=;
        b=wBAOQ/kF/TwHPf3tkyqJiFEXK5l6E7yVzgpstBMTBGfhZiALYlQ1D3sCUl76ene7XX
         /YkTT2HFWMgqo819DrEmK2efuv0hd/ncOKWvEqPxDmzJFBqz7l/IKooBtZpxRwyaxvvT
         0pEK5edCjEJ5FGCZMJ3M3p09vQy6oh973qM+uNPrIAHwpqSvzQdElyPOAzoyhlrPD0Xs
         KGOZVp7327lSFC5s/EerTd26H8aYFyOWu1S8T/Gn54JeDH55JlipCcqpvLoqrYBhSswP
         VPpR33ZQ925MNkYFht4Udco1CYu+iJXr6N4w+yWaA2/0C3yjxOGJA1qSyawGGuRVD5Lx
         qQrw==
X-Received: by 10.194.108.101 with SMTP id hj5mr9127110wjb.6.1359121253233;
 Fri, 25 Jan 2013 05:40:53 -0800 (PST)
MIME-Version: 1.0
Received: by 10.194.57.11 with HTTP; Fri, 25 Jan 2013 05:40:33 -0800 (PST)
In-Reply-To: <CAL0=0H2Ede22RsN8=wAegBiDEApfbQeue50i0iYkz-TRXgHt6w@mail.gmail.com>
References: <CAL0=0H33AtnsNYxB+WseQXvSmLn_2UJ7QZ3p9vJMcJ8UUZi9Eg@mail.gmail.com>
 <CAEY5pxVY6jEsqYGR1xzxKx8H1agbVuyzXZ5NiJ=cjH6Rih-ZGA@mail.gmail.com> <CAL0=0H2Ede22RsN8=wAegBiDEApfbQeue50i0iYkz-TRXgHt6w@mail.gmail.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Fri, 25 Jan 2013 13:40:33 +0000
Message-ID: <CAEY5pxWUFC2pMh7n_19vbNrgJd_ajaaReN-Gku5zq=kU+DKF8Q@mail.gmail.com>
Subject: Re: How do I best store my IRC log data in lucene indexes?
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

Adding a message type field is the way to do it.

Then you can use QueryWrapperFilter and CachingWrapperFilter, something like

Term t = new Term("messtype", messtype);
TermQuery tq = new TermQuery(t);
QueryWrapperFilter qwf = new QueryWrapperFilter(tq);
CachingWrapperFilter cwf = new CachingWrapperFilter(qwf);

and use cwf as the filter in your searches.  Make sure that the values
for messtype in the query are specified as they are stored in the
index. "NICK" != "nick".


All beginners should read Lucene In Action.


--
Ian.


On Fri, Jan 25, 2013 at 12:55 PM, crocket <crockabiscuit@gmail.com> wrote:
> Do you mean
> http://lucene.apache.org/core/4_1_0/core/org/apache/lucene/analysis/CachingTokenFilter.htmlby
> a cached filter?
> And how would you restrict searches to particular message types fast with a
> cached filter?
> I'm a beginner.
>
>
> On Fri, Jan 25, 2013 at 6:51 PM, Ian Lea <ian.lea@gmail.com> wrote:
>
>> Unless there's good reason not to (massive size?  different systems?
>> conflicting update schedules?) I'd store everything in the one index.
>>
>> Consider a cached filter for fast restriction of searches to
>> particular message types.
>>
>>
>> --
>> Ian.
>>
>>
>> On Thu, Jan 24, 2013 at 1:06 PM, crocket <crockabiscuit@gmail.com> wrote:
>> > I have three data I want to store, search, and restore.
>> > It is for logging IRC messages.
>> >
>> > NICK
>> >   time=the number of seconds passed since the epoch, 1970-01-01 00:00:00
>> > UTC+0
>> >   network=
>> >   me=0 or 1
>> >   old=
>> >   new=
>> >
>> > KICKED
>> >   time=the number of seconds passed since the epoch, 1970-01-01 00:00:00
>> > UTC+0
>> >   network=
>> >   chan=
>> >   msg=
>> >   kicker=
>> >   mynick=
>> >
>> > MSG
>> >   time=the number of seconds passed since the epoch, 1970-01-01 00:00:00
>> > UTC+0
>> >   network=
>> >   chan=
>> >   msg=
>> >   me=0 or 1
>> >   nick=
>> >
>> > Below are ideas for IRC log search web UI.
>> >
>> > [] Main UI : network("", freenode, ...) | channel("", ...) | nick |
>> message
>> >   1) network and channel have dropdown boxes. nick and message are text
>> > boxes.
>> >   2) duration, network, and nick can be applied to every data.
>> >   3) channel and message are applicable to KICKED and MSG.
>> >
>> > [] Facets
>> >   1) duration(1day, 1 week, 1 month, 1 year, all) <-- just like google
>> > search tools
>> >   2) ...
>> >
>> > [] Category search(categories registered as facets)
>> >   1) network
>> >   2) channel
>> >
>> > Is it better to store NICK, KICKED, and MSG in one index directory or to
>> > store them in separate index directories?
>> >
>> > Are there other things that I should know or consider?
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54870-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Jan 25 14:30:27 2013
Return-Path: <java-user-return-54870-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id E828CE4B9
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 25 Jan 2013 14:30:27 +0000 (UTC)
Received: (qmail 17098 invoked by uid 500); 25 Jan 2013 14:30:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16874 invoked by uid 500); 25 Jan 2013 14:30:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16840 invoked by uid 99); 25 Jan 2013 14:30:24 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Jan 2013 14:30:24 +0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,SPF_NEUTRAL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: 216.139.236.26 is neither permitted nor denied by domain of saisantoshi76@gmail.com)
Received: from [216.139.236.26] (HELO sam.nabble.com) (216.139.236.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Jan 2013 14:30:19 +0000
Received: from ben.nabble.com ([192.168.236.152])
	by sam.nabble.com with esmtp (Exim 4.72)
	(envelope-from <saisantoshi76@gmail.com>)
	id 1TykI2-0000qd-MS
	for java-user@lucene.apache.org; Fri, 25 Jan 2013 06:29:58 -0800
Date: Fri, 25 Jan 2013 06:29:58 -0800 (PST)
From: saisantoshi <saisantoshi76@gmail.com>
To: java-user@lucene.apache.org
Message-ID: <1359124198682-4036240.post@n3.nabble.com>
In-Reply-To: <CAAHmpkg-pa=Sc=ShG1yfnPLxg6G1ik5nqWXgQVvyWJmT0f9rRw@mail.gmail.com>
References: <1358983150658-4035806.post@n3.nabble.com> <001101cdf9c2$81b8dc80$852a9580$@thetaphi.de> <1359011456523-4035870.post@n3.nabble.com> <1359067051103-4036093.post@n3.nabble.com> <CAAHmpkg-pa=Sc=ShG1yfnPLxg6G1ik5nqWXgQVvyWJmT0f9rRw@mail.gmail.com>
Subject: Re: TopDocCollector vs TopScoreDocCollector (semantics changed in
 4.0, not backward comptabile)
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks a lot. If we want to wrap TopScoreDocCollector into
PositiveScoresOnlyCollector. Can we do that?
I need only positive scores and I dont think topscore collector can handle
by itself right?


Thanks,
Sai



--
View this message in context: http://lucene.472066.n3.nabble.com/TopDocCollector-vs-TopScoreDocCollector-semantics-changed-in-4-0-not-backward-comptabile-tp4035806p4036240.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54871-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Jan 25 14:30:58 2013
Return-Path: <java-user-return-54871-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 8611EE75F
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 25 Jan 2013 14:30:58 +0000 (UTC)
Received: (qmail 20489 invoked by uid 500); 25 Jan 2013 14:30:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20450 invoked by uid 500); 25 Jan 2013 14:30:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20439 invoked by uid 99); 25 Jan 2013 14:30:56 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Jan 2013 14:30:56 +0000
X-ASF-Spam-Status: No, hits=1.9 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FROM_EXCESS_BASE64,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of zhoucheng2008@gmail.com designates 209.85.160.44 as permitted sender)
Received: from [209.85.160.44] (HELO mail-pb0-f44.google.com) (209.85.160.44)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Jan 2013 14:30:50 +0000
Received: by mail-pb0-f44.google.com with SMTP id uo1so241680pbc.31
        for <java-user@lucene.apache.org>; Fri, 25 Jan 2013 06:30:30 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=x-received:x-qq-ssf:x-has-attach:x-qq-business-origin
         :x-originating-ip:x-qq-style:x-qq-mid:from:to:subject:mime-version
         :content-type:content-transfer-encoding:date:x-priority:message-id
         :x-qq-mime:x-mailer:x-qq-mailer:x-qq-replyhash;
        bh=+AZxeEkwll7RkU9OPm4y+h6eDAZMORTLo3hwWWZflis=;
        b=cE2PPynRhy6vcl8faetUdkXjbUW3n+DJut3cKIs4bTCI3WwDr/vZcmvSwXAubErneq
         GeASrjmcEEG+++Oakncr026sIFlWudDy45Oy8TAThfiavM5DlSg7JHMNs87WFz+41Ktp
         kgK0nFTbb6/2WeMUSaRmkTEKxFOUjBzojHUm+AwdDJMmBlSqqtFkceGw4/NV6zoGlxEU
         kNb4V2X6WfxtNv+7rvYMsIWCH1WK3MT/OWd34jNUvm9d5dKdL87Z5z4d9NKn1tpREyxi
         0bo2+991z/jL55cPCxLT/lUFQCgoG2BkvurQ5nnj3HUQcfb4+kqFFTULplrGYZbXWO/U
         DhDg==
X-Received: by 10.69.0.40 with SMTP id av8mr14635350pbd.117.1359124230045;
        Fri, 25 Jan 2013 06:30:30 -0800 (PST)
Received: from smtpbg115.qq.com (smtpbg62.qq.com. [103.7.29.139])
        by mx.google.com with ESMTPS id az8sm975414pab.3.2013.01.25.06.30.28
        (version=TLSv1 cipher=RC4-SHA bits=128/128);
        Fri, 25 Jan 2013 06:30:29 -0800 (PST)
X-QQ-SSF: 000000000000004000000000000000X
X-HAS-ATTACH: no
X-QQ-BUSINESS-ORIGIN: 2
X-Originating-IP: 122.231.199.49
X-QQ-STYLE: 
X-QQ-mid: webmail661t1359124225t4536950
From: "=?utf-8?B?emhvdWNoZW5nMjAwOA==?=" <zhoucheng2008@gmail.com>
To: "=?utf-8?B?amF2YS11c2Vy?=" <java-user@lucene.apache.org>
Subject: =?utf-8?B?5Zue5aSN77yaIOWbnuWkje+8miBJbmRleFJlYWRl?=
 =?utf-8?B?ci5vcGVuIGFuZCBDb3JydXB0SW5kZXhFeGNlcHRp?=
 =?utf-8?B?b24=?=
Mime-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_51029701_08DC13B8_51BB83C7"
Content-Transfer-Encoding: 8Bit
Date: Fri, 25 Jan 2013 22:30:25 +0800
X-Priority: 3
Message-ID: <tencent_510F3E2834535CD24EB1FAB6@qq.com>
X-QQ-MIME: TCMime 1.0 by Tencent
X-Mailer: QQMail 2.x
X-QQ-Mailer: QQMail 2.x
X-QQ-ReplyHash: 1528918118
X-Virus-Checked: Checked by ClamAV on apache.org

------=_NextPart_51029701_08DC13B8_51BB83C7
Content-Type: text/plain;
	charset="utf-8"
Content-Transfer-Encoding: base64

U2VhcmNoZXJNYW5hZ2VyIG1nciA9IG5ldyBTZWFyY2hlck1hbmFnZXIoZGlyLCBuZXcgTXlT
ZWFyY2hXYXJtZXIoKSk7Q2FuIEkgcHV0IG51bGwgYXMgdGhlIHNlY29uZCBwYXJhbWV0ZXIg
aW4gdGhlIFNlYXJjaGVyTWFuYWdlciBjb25zdHJ1Y3Rvcj9JZiBub3QsIGhvdyB0byBjcmVh
dGUgYSBNeVNlYXJjaFdhcm1lciBpbnN0YW5jZT8gVGhlIGZvbGxvd2luZyBleHBsYW5hdGlv
biBkb2Vzbid0IHByb3ZpZGUgc3VmZmljaWVudCBpbmZvOg0KIGNsYXNzIE15U2VhcmNoV2Fy
bWVyIGltcGxlbWVudHMgU2VhcmNoV2FybWVyIHsgICAgIEBPdmVycmlkZSAgICAgcHVibGlj
IHZvaWQgd2FybShJbmRleFNlYXJjaGVyIHNlYXJjaGVyKSB0aHJvd3MgSU9FeGNlcHRpb24g
eyAgICAgICAvLyBSdW4gc29tZSBkaXZlcnNlIHNlYXJjaGVzLCBzZWFyY2hpbmcgYW5kIHNv
cnRpbmcgYWdhaW5zdCBhbGwgICAgICAgLy8gZmllbGRzIHRoYXQgYXJlIHVzZWQgYnkgeW91
ciBhcHBsaWNhdGlvbiAgICAgfSAgIH0NCg0KDQoNCg0KDQoNCi0tLS0tLS0tLS0tLS0tLS0t
LSDljp/lp4vpgq7ku7YgLS0tLS0tLS0tLS0tLS0tLS0tDQrlj5Hku7bkuro6ICJNaWNoYWVs
IE1jQ2FuZGxlc3MiPGx1Y2VuZUBtaWtlbWNjYW5kbGVzcy5jb20+Ow0K5Y+R6YCB5pe26Ze0
OiAyMDEz5bm0MeaciDI15pelKOaYn+acn+S6lCkg5pma5LiKOToyNg0K5pS25Lu25Lq6OiAi
amF2YS11c2VyIjxqYXZhLXVzZXJAbHVjZW5lLmFwYWNoZS5vcmc+OyANCg0K5Li76aKYOiBS
ZTog5Zue5aSN77yaIEluZGV4UmVhZGVyLm9wZW4gYW5kIENvcnJ1cHRJbmRleEV4Y2VwdGlv
bg0KDQoNCg0KTWF5YmUgaGVyZT86DQoNCiAgICBodHRwOi8vYmxvZy5taWtlbWNjYW5kbGVz
cy5jb20vMjAxMS8xMS9uZWFyLXJlYWwtdGltZS1yZWFkZXJzLXdpdGgtbHVjZW5lcy5odG1s
DQoNCk1pa2UgTWNDYW5kbGVzcw0KDQpodHRwOi8vYmxvZy5taWtlbWNjYW5kbGVzcy5jb20N
Cg0KT24gRnJpLCBKYW4gMjUsIDIwMTMgYXQgNzo1OCBBTSwgQ2hlbmcgPHpob3VjaGVuZzIw
MDhAZ21haWwuY29tPiB3cm90ZToNCj4gQW55IGV4YW1wbGUgY29kZSBmb3IgdGhpcyBTZWFy
Y2hlck1hbmFnZXI/DQo+DQo+IE9uIEZyaSwgSmFuIDI1LCAyMDEzIGF0IDM6NTkgQU0sIElh
biBMZWEgPGlhbi5sZWFAZ21haWwuY29tPiB3cm90ZToNCj4NCj4+IFRoZXJlIHdpbGwgYmUg
b25lIGZpbGUgaGFuZGxlIGZvciBldmVyeSBjdXJyZW50bHkgb3BlbiBmaWxlLg0KPj4NCj4+
IFVzZSBTZWFyY2hlck1hbmFnZXIgYW5kIHRoaXMgcHJvYmxlbSBzaG91bGQgZ28gYXdheS4N
Cj4+DQo+Pg0KPj4gLS0NCj4+IElhbi4NCj4+DQo+Pg0KPj4gT24gVGh1LCBKYW4gMjQsIDIw
MTMgYXQgNjo0MCBQTSwgemhvdWNoZW5nMjAwOCA8emhvdWNoZW5nMjAwOEBnbWFpbC5jb20+
DQo+PiB3cm90ZToNCj4+ID4gV2hhdCBmaWxlIGhhbmRsZXJzIGRpZCB5b3UgZ3V5IHJlZmVy
IHRvPw0KPj4gPg0KPj4gPg0KPj4gPiBJIG9wZW5lZCB0aGUgaW5kZXggZGlyZWN0b3J5IG9u
bHkuIElzIHRoaXMgdGhlIGZpbGUgaGFuZGxlcj8gQWxzbywgaG93DQo+PiB0byBzYWZlbHkg
YW5kIGVmZmVjdGl2ZWx5IGNsb3NlIHRoZSBpbmRleCBkaXJlY3Rvcnk/DQo+PiA+DQo+PiA+
DQo+PiA+IEkgZm91bmQgdGhlIGxpbmsncyBleHBsYW5hdGlvbiBzb21ld2hhdCBzZWxmLWNv
bnRyYWRpY3RvcnkuIEFmdGVyIEkgcmVhZA0KPj4gaXQsIEkgYW0gY29uZnVzZWQgaWYgSSBz
aG91bGQgY2xvc2UgdGhlIGZpbGUgaGFuZGxlcnMgaW4gdGhlIGZpbmFsbHkgYmxvY2sNCj4+
IG9yIG5vdC4gSSBhbSB1c2luZyBKYXZhLg0KPj4gPg0KPj4gPg0KPj4gPg0KPj4gPg0KPj4g
PiAtLS0tLS0tLS0tLS0tLS0tLS0g5Y6f5aeL6YKu5Lu2IC0tLS0tLS0tLS0tLS0tLS0tLQ0K
Pj4gPiDlj5Hku7bkuro6ICJJYW4gTGVhIjxpYW4ubGVhQGdtYWlsLmNvbT47DQo+PiA+IOWP
kemAgeaXtumXtDogMjAxM+W5tDHmnIgyNOaXpSjmmJ/mnJ/lm5spIOS4i+WNiDU6NDYNCj4+
ID4g5pS25Lu25Lq6OiAiamF2YS11c2VyIjxqYXZhLXVzZXJAbHVjZW5lLmFwYWNoZS5vcmc+
Ow0KPj4gPg0KPj4gPiDkuLvpopg6IFJlOiBJbmRleFJlYWRlci5vcGVuIGFuZCBDb3JydXB0
SW5kZXhFeGNlcHRpb24NCj4+ID4NCj4+ID4NCj4+ID4NCj4+ID4gV2VsbCwgcmFpc2luZyB0
aGUgbGltaXRzIGlzIG9uZSBvcHRpb24gYnV0IHRoZXJlIG1heSBiZSBiZXR0ZXIgb25lcy4N
Cj4+ID4NCj4+ID4gVGhlcmUncyBhbiBGQVEgZW50cnkgb24gdGhpczoNCj4+ID4NCj4+IGh0
dHA6Ly93aWtpLmFwYWNoZS5vcmcvbHVjZW5lLWphdmEvTHVjZW5lRkFRI1doeV9hbV9JX2dl
dHRpbmdfYW5fSU9FeGNlcHRpb25fdGhhdF9zYXlzXy4yMlRvb19tYW55X29wZW5fZmlsZXMu
MjIuM0YNCj4+ID4NCj4+ID4gVGFrZSBhIGxvb2sgYXQgb3JnLmFwYWNoZS5sdWNlbmUuc2Vh
cmNoLlNlYXJjaGVyTWFuYWdlciAiVXRpbGl0eSBjbGFzcw0KPj4gPiB0byBzYWZlbHkgc2hh
cmUgSW5kZXhTZWFyY2hlciBpbnN0YW5jZXMgYWNyb3NzIG11bHRpcGxlIHRocmVhZHMiLg0K
Pj4gPg0KPj4gPg0KPj4gPiAtLQ0KPj4gPiBJYW4uDQo+PiA+DQo+PiA+DQo+PiA+IE9uIFRo
dSwgSmFuIDI0LCAyMDEzIGF0IDk6MTggQU0sIFJhZmHFgiBLdcSHIDxyLmt1Y0Bzb2xyLnBs
PiB3cm90ZToNCj4+ID4+IEhlbGxvIQ0KPj4gPj4NCj4+ID4+IFlvdSBuZWVkIHRvIGFsbG93
IHRoZSB1c2VyIHRoYXQgaXMgcnVubmluZyBMdWNlbmUgdG8gb3BlbiBtb3JlIGZpbGVzLg0K
Pj4gPj4gVGhlcmUgYXJlIHBsZW50eSBvZiB0dXRvcmlhbHMgYXZhaWxhYmxlIG9uIHRoZSB3
ZWIuIE1vZGlmeSB5b3VyDQo+PiA+PiAvZXRjL3NlY3VyaXR5L2xpbWl0cy5jb25mIGFuZCBp
ZiBmb3IgZXhhbXBsZSB5b3VyIHVzZXIgaXMgbHVjZW5lIGFkZA0KPj4gPj4gdGhlIGZvbGxv
d2luZyAob3IgbW9kaWZ5IGlmIHRob3NlIGFscmVhZHkgZXhpc3RzKToNCj4+ID4+DQo+PiA+
PiBsdWNlbmUgc29mdCBub2ZpbGUgNjQwMDANCj4+ID4+IGx1Y2VuZSBoYXJkIG5vZmlsZSA2
NDAwMA0KPj4gPj4NCj4+ID4+IFJlbG9nIGFuZCBydW46DQo+PiA+Pg0KPj4gPj4gc3VkbyAt
dSBsdWNlbmUgLXMgInVsaW1pdCAtU24iDQo+PiA+Pg0KPj4gPj4gVG8gc2VlIGlmIHRoZSBs
aW1pdHMgYXJlIHRoZSBvbmVzIHlvdSBzZXQuIElmIHRoZXkgYXJlIG5vdCwgY2hlY2sgaWYN
Cj4+ID4+IHlvdSBkb24ndCBoYXZlIHBhbV9saW1pdHMuc28gY29tbWVudGVkIGluIHRoZSAv
ZXRjL3BhbS5kLw0KPj4gPj4NCj4+ID4+IC0tDQo+PiA+PiBSZWdhcmRzLA0KPj4gPj4gIFJh
ZmHFgiBLdcSHDQo+PiA+PiAgU2VtYXRleHQgOjogaHR0cDovL3NlbWF0ZXh0LmNvbS8gOjog
U29sciAtIEx1Y2VuZSAtIE51dGNoDQo+PiA+Pg0KPj4gPj4+IEhlcmUgaXMgdGhlIGxvZzoN
Cj4+ID4+DQo+PiA+Pj4gSmFuIDI0LCAyMDEzIDQ6MTA6MzMgQU0NCj4+ID4+PiBvcmcuYXBh
Y2hlLnRvbWNhdC51dGlsLm5ldC5BcHJFbmRwb2ludCRBY2NlcHRvciBydW4NCj4+ID4+PiBT
RVZFUkU6IFNvY2tldCBhY2NlcHQgZmFpbGVkDQo+PiA+Pj4gb3JnLmFwYWNoZS50b21jYXQu
am5pLkVycm9yOiAyNDogVG9vIG1hbnkgb3BlbiBmaWxlcw0KPj4gPj4+IGF0IG9yZy5hcGFj
aGUudG9tY2F0LmpuaS5Tb2NrZXQuYWNjZXB0KE5hdGl2ZSBNZXRob2QpDQo+PiA+Pj4gYXQN
Cj4+ID4+Pg0KPj4gb3JnLmFwYWNoZS50b21jYXQudXRpbC5uZXQuQXByRW5kcG9pbnQkQWNj
ZXB0b3IucnVuKEFwckVuZHBvaW50LmphdmE6OTkwKQ0KPj4gPj4+IGF0IGphdmEubGFuZy5U
aHJlYWQucnVuKFRocmVhZC5qYXZhOjcyMikNCj4+ID4+DQo+PiA+Pg0KPj4gPj4NCj4+ID4+
PiBUb28gbWFueSBvcGVuIGZpbGVzLi4uIEhvdyB0byBzb2x2ZSBpdD8NCj4+ID4+DQo+PiA+
Pg0KPj4gPj4+IE9uIFR1ZSwgSmFuIDIyLCAyMDEzIGF0IDEwOjUyIFBNLCBNaWNoYWVsIE1j
Q2FuZGxlc3MgPA0KPj4gPj4+IGx1Y2VuZUBtaWtlbWNjYW5kbGVzcy5jb20+IHdyb3RlOg0K
Pj4gPj4NCj4+ID4+Pj4gQ2FuIHlvdSBwb3N0IHRoZSBmdWxsIHN0YWNrIHRyYWNlIG9mIHRo
ZSBDb3JydXB0SW5kZXhFeGNlcHRpb24/DQo+PiA+Pj4+DQo+PiA+Pj4+IE1pa2UgTWNDYW5k
bGVzcw0KPj4gPj4+Pg0KPj4gPj4+PiBodHRwOi8vYmxvZy5taWtlbWNjYW5kbGVzcy5jb20N
Cj4+ID4+Pj4NCj4+ID4+Pj4gT24gVHVlLCBKYW4gMjIsIDIwMTMgYXQgODoyMCBBTSwgQ2hl
bmcgPHpob3VjaGVuZzIwMDhAZ21haWwuY29tPg0KPj4gd3JvdGU6DQo+PiA+Pj4+ID4gSGks
DQo+PiA+Pj4+ID4NCj4+ID4+Pj4gPiBJIHJ1biBhIEx1Y2VuZSBhcHBsaWNhdGlvbiBvbiBU
b21jYXQuIFRoZSBhcHAgd2lsbCB0cnkgdG8gb3BlbiBhDQo+PiBMaW51eA0KPj4gPj4+PiA+
IGRpcmVjdG9yeSwgYW5kIHNvbWV0aW1lIHJldHVybnMgQ29ycnVwdEluZGV4RXhjZXB0aW9u
IGVycm9yLg0KPj4gPj4+PiA+DQo+PiA+Pj4+ID4gU2hvcnRseSBhZnRlciBJIHJlc3RhcnQg
VG9tY2F0IChub3RoaW5nIGVsc2UgY2hhbmdlcyksIHRoZSBhcHAgY2FuDQo+PiBiZSBydW4N
Cj4+ID4+Pj4gPiBvbiB0aGUgZmx5LiBJIGFtIHVzaW5nIHRoZSBmb2xsb3dpbmcgc3RhdGVt
ZW50cyB0byBvcGVuIGEgZGlyZWN0b3J5Og0KPj4gPj4+PiA+DQo+PiA+Pj4+ID4NCj4+ID4+
Pj4gPiAgICAgdHJ5IHsNCj4+ID4+Pj4gPiAgICAgICBzZWFyY2hlciA9IG5ldyBJbmRleFNl
YXJjaGVyKEluZGV4UmVhZGVyLm9wZW4obmV3DQo+PiA+Pj4+IE5JT0ZTRGlyZWN0b3J5KG5l
dw0KPj4gPj4+PiA+IEZpbGUoIi9ob21lL3VzZXIvIisgdHlwZSkpKSk7DQo+PiA+Pj4+ID4g
ICAgIH0gY2F0Y2ggKElPRXhjZXB0aW9uIGUpIHsNCj4+ID4+Pj4gPiAgICAgICB0aHJvdyBu
ZXcgRXhjZXB0aW9uKCJbIiArIHR5cGUgKyAiXSBDYW5ub3Qgb3BlbiBpbmRleA0KPj4gZm9s
ZGVyLi4uIik7DQo+PiA+Pj4+ID4gICAgIH0NCj4+ID4+Pj4gPg0KPj4gPj4+PiA+IEkgd291
bGQgbGlrZSB0byBrbm93IGhvdyB0byB0YWNrbGUgdGhpcyBwcm9ibGVtLg0KPj4gPj4+PiA+
DQo+PiA+Pj4+ID4gTWFueSB0aGFua3MhDQo+PiA+Pj4+DQo+PiA+Pj4+IC0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLQ0KPj4gPj4+PiBUbyB1bnN1YnNjcmliZSwgZS1tYWlsOiBqYXZhLXVzZXItdW5zdWJz
Y3JpYmVAbHVjZW5lLmFwYWNoZS5vcmcNCj4+ID4+Pj4gRm9yIGFkZGl0aW9uYWwgY29tbWFu
ZHMsIGUtbWFpbDogamF2YS11c2VyLWhlbHBAbHVjZW5lLmFwYWNoZS5vcmcNCj4+ID4+Pj4N
Cj4+ID4+Pj4NCj4+ID4+DQo+PiA+Pg0KPj4gPj4gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQo+PiA+PiBU
byB1bnN1YnNjcmliZSwgZS1tYWlsOiBqYXZhLXVzZXItdW5zdWJzY3JpYmVAbHVjZW5lLmFw
YWNoZS5vcmcNCj4+ID4+IEZvciBhZGRpdGlvbmFsIGNvbW1hbmRzLCBlLW1haWw6IGphdmEt
dXNlci1oZWxwQGx1Y2VuZS5hcGFjaGUub3JnDQo+PiA+Pg0KPj4gPg0KPj4gPiAtLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0NCj4+ID4gVG8gdW5zdWJzY3JpYmUsIGUtbWFpbDogamF2YS11c2VyLXVuc3Vi
c2NyaWJlQGx1Y2VuZS5hcGFjaGUub3JnDQo+PiA+IEZvciBhZGRpdGlvbmFsIGNvbW1hbmRz
LCBlLW1haWw6IGphdmEtdXNlci1oZWxwQGx1Y2VuZS5hcGFjaGUub3JnDQo+Pg0KPj4gLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tDQo+PiBUbyB1bnN1YnNjcmliZSwgZS1tYWlsOiBqYXZhLXVzZXItdW5z
dWJzY3JpYmVAbHVjZW5lLmFwYWNoZS5vcmcNCj4+IEZvciBhZGRpdGlvbmFsIGNvbW1hbmRz
LCBlLW1haWw6IGphdmEtdXNlci1oZWxwQGx1Y2VuZS5hcGFjaGUub3JnDQo+Pg0KPj4NCg0K
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tDQpUbyB1bnN1YnNjcmliZSwgZS1tYWlsOiBqYXZhLXVzZXItdW5z
dWJzY3JpYmVAbHVjZW5lLmFwYWNoZS5vcmcNCkZvciBhZGRpdGlvbmFsIGNvbW1hbmRzLCBl
LW1haWw6IGphdmEtdXNlci1oZWxwQGx1Y2VuZS5hcGFjaGUub3Jn

------=_NextPart_51029701_08DC13B8_51BB83C7--


From java-user-return-54872-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Jan 25 16:11:12 2013
Return-Path: <java-user-return-54872-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 0A448E213
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 25 Jan 2013 16:11:12 +0000 (UTC)
Received: (qmail 46868 invoked by uid 500); 25 Jan 2013 16:11:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46452 invoked by uid 500); 25 Jan 2013 16:11:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46195 invoked by uid 99); 25 Jan 2013 16:11:07 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Jan 2013 16:11:07 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 209.85.210.178 as permitted sender)
Received: from [209.85.210.178] (HELO mail-ia0-f178.google.com) (209.85.210.178)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Jan 2013 16:10:17 +0000
Received: by mail-ia0-f178.google.com with SMTP id y26so824941iab.23
        for <java-user@lucene.apache.org>; Fri, 25 Jan 2013 08:09:56 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=x-received:mime-version:in-reply-to:references:from:date:message-id
         :subject:to:content-type:content-transfer-encoding;
        bh=kug3IHZNJeNc1t1KZjPyLlJKr5NJT7UvK8SZ6QqHq14=;
        b=huMjP9dQ5WSut5onW89Ox38FLsxeZcrShbl0le1HD+TT/4rN8e8DuLozrUzPm0TTNd
         q2UioS5RZMQ3p90lSFhrQF0+J3krOl4B8NnoIVWt5Fl1uKE8BGZ0SdKtMxYNzndK4vlc
         AmFx6G3dxViIZKtTcqQ2/y0P8kjyILaR+CruYO2SO9DQHH8SnBrs/Q+VTQESbxGUirME
         SwQamnSMJeVPKn//VI/XpgDgf5CHsn6DJebNzi5v+P7KZOZXYb6s8frTYpNKCWWAuU46
         q7PcxNZ/177IModv4+DR1EqrVjkae06FtXLB2WCGkoGgBvIfEJe5rxKG+9HdBa/6+TUk
         RDLA==
X-Received: by 10.50.57.225 with SMTP id l1mr4256182igq.37.1359130196249; Fri,
 25 Jan 2013 08:09:56 -0800 (PST)
MIME-Version: 1.0
Received: by 10.50.184.232 with HTTP; Fri, 25 Jan 2013 08:09:36 -0800 (PST)
In-Reply-To: <tencent_510F3E2834535CD24EB1FAB6@qq.com>
References: <tencent_510F3E2834535CD24EB1FAB6@qq.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Fri, 25 Jan 2013 16:09:36 +0000
Message-ID: <CAEY5pxXKReWGm2R8bggEeT6a=k_a-4bLtmNmT2Yxi1juEA7-jg@mail.gmail.com>
Subject: =?GB2312?B?UmU6ILvYuLSjuiC72Li0o7ogSW5kZXhSZWFkZXIub3BlbiBhbmQgQ29ycnVwdA==?=
	=?GB2312?B?SW5kZXhFeGNlcHRpb24=?=
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

What version of lucene are you on?  For 4.x and, as far as I can
recall, 3.x, I've just got

	SearcherManager sm =3D new SearcherManager(dir, new SearcherFactory());


--
Ian.


On Fri, Jan 25, 2013 at 2:30 PM, zhoucheng2008 <zhoucheng2008@gmail.com> wr=
ote:
> SearcherManager mgr =3D new SearcherManager(dir, new MySearchWarmer());Ca=
n I put null as the second parameter in the SearcherManager constructor?If =
not, how to create a MySearchWarmer instance? The following explanation doe=
sn't provide sufficient info:
>  class MySearchWarmer implements SearchWarmer {     @Override     public =
void warm(IndexSearcher searcher) throws IOException {       // Run some di=
verse searches, searching and sorting against all       // fields that are =
used by your application     }   }
>
>
>
>
>
>
> ------------------ =E5=8E=9F=E5=A7=8B=E9=82=AE=E4=BB=B6 -----------------=
-
> =E5=8F=91=E4=BB=B6=E4=BA=BA: "Michael McCandless"<lucene@mikemccandless.c=
om>;
> =E5=8F=91=E9=80=81=E6=97=B6=E9=97=B4: 2013=E5=B9=B41=E6=9C=8825=E6=97=A5(=
=E6=98=9F=E6=9C=9F=E4=BA=94) =E6=99=9A=E4=B8=8A9:26
> =E6=94=B6=E4=BB=B6=E4=BA=BA: "java-user"<java-user@lucene.apache.org>;
>
> =E4=B8=BB=E9=A2=98: Re: =E5=9B=9E=E5=A4=8D=EF=BC=9A IndexReader.open and =
CorruptIndexException
>
>
>
> Maybe here?:
>
>     http://blog.mikemccandless.com/2011/11/near-real-time-readers-with-lu=
cenes.html
>
> Mike McCandless
>
> http://blog.mikemccandless.com
>
> On Fri, Jan 25, 2013 at 7:58 AM, Cheng <zhoucheng2008@gmail.com> wrote:
>> Any example code for this SearcherManager?
>>
>> On Fri, Jan 25, 2013 at 3:59 AM, Ian Lea <ian.lea@gmail.com> wrote:
>>
>>> There will be one file handle for every currently open file.
>>>
>>> Use SearcherManager and this problem should go away.
>>>
>>>
>>> --
>>> Ian.
>>>
>>>
>>> On Thu, Jan 24, 2013 at 6:40 PM, zhoucheng2008 <zhoucheng2008@gmail.com=
>
>>> wrote:
>>> > What file handlers did you guy refer to?
>>> >
>>> >
>>> > I opened the index directory only. Is this the file handler? Also, ho=
w
>>> to safely and effectively close the index directory?
>>> >
>>> >
>>> > I found the link's explanation somewhat self-contradictory. After I r=
ead
>>> it, I am confused if I should close the file handlers in the finally bl=
ock
>>> or not. I am using Java.
>>> >
>>> >
>>> >
>>> >
>>> > ------------------ =E5=8E=9F=E5=A7=8B=E9=82=AE=E4=BB=B6 -------------=
-----
>>> > =E5=8F=91=E4=BB=B6=E4=BA=BA: "Ian Lea"<ian.lea@gmail.com>;
>>> > =E5=8F=91=E9=80=81=E6=97=B6=E9=97=B4: 2013=E5=B9=B41=E6=9C=8824=E6=97=
=A5(=E6=98=9F=E6=9C=9F=E5=9B=9B) =E4=B8=8B=E5=8D=885:46
>>> > =E6=94=B6=E4=BB=B6=E4=BA=BA: "java-user"<java-user@lucene.apache.org>=
;
>>> >
>>> > =E4=B8=BB=E9=A2=98: Re: IndexReader.open and CorruptIndexException
>>> >
>>> >
>>> >
>>> > Well, raising the limits is one option but there may be better ones.
>>> >
>>> > There's an FAQ entry on this:
>>> >
>>> http://wiki.apache.org/lucene-java/LuceneFAQ#Why_am_I_getting_an_IOExce=
ption_that_says_.22Too_many_open_files.22.3F
>>> >
>>> > Take a look at org.apache.lucene.search.SearcherManager "Utility clas=
s
>>> > to safely share IndexSearcher instances across multiple threads".
>>> >
>>> >
>>> > --
>>> > Ian.
>>> >
>>> >
>>> > On Thu, Jan 24, 2013 at 9:18 AM, Rafa=C5=82 Ku=C4=87 <r.kuc@solr.pl> =
wrote:
>>> >> Hello!
>>> >>
>>> >> You need to allow the user that is running Lucene to open more files=
.
>>> >> There are plenty of tutorials available on the web. Modify your
>>> >> /etc/security/limits.conf and if for example your user is lucene add
>>> >> the following (or modify if those already exists):
>>> >>
>>> >> lucene soft nofile 64000
>>> >> lucene hard nofile 64000
>>> >>
>>> >> Relog and run:
>>> >>
>>> >> sudo -u lucene -s "ulimit -Sn"
>>> >>
>>> >> To see if the limits are the ones you set. If they are not, check if
>>> >> you don't have pam_limits.so commented in the /etc/pam.d/
>>> >>
>>> >> --
>>> >> Regards,
>>> >>  Rafa=C5=82 Ku=C4=87
>>> >>  Sematext :: http://sematext.com/ :: Solr - Lucene - Nutch
>>> >>
>>> >>> Here is the log:
>>> >>
>>> >>> Jan 24, 2013 4:10:33 AM
>>> >>> org.apache.tomcat.util.net.AprEndpoint$Acceptor run
>>> >>> SEVERE: Socket accept failed
>>> >>> org.apache.tomcat.jni.Error: 24: Too many open files
>>> >>> at org.apache.tomcat.jni.Socket.accept(Native Method)
>>> >>> at
>>> >>>
>>> org.apache.tomcat.util.net.AprEndpoint$Acceptor.run(AprEndpoint.java:99=
0)
>>> >>> at java.lang.Thread.run(Thread.java:722)
>>> >>
>>> >>
>>> >>
>>> >>> Too many open files... How to solve it?
>>> >>
>>> >>
>>> >>> On Tue, Jan 22, 2013 at 10:52 PM, Michael McCandless <
>>> >>> lucene@mikemccandless.com> wrote:
>>> >>
>>> >>>> Can you post the full stack trace of the CorruptIndexException?
>>> >>>>
>>> >>>> Mike McCandless
>>> >>>>
>>> >>>> http://blog.mikemccandless.com
>>> >>>>
>>> >>>> On Tue, Jan 22, 2013 at 8:20 AM, Cheng <zhoucheng2008@gmail.com>
>>> wrote:
>>> >>>> > Hi,
>>> >>>> >
>>> >>>> > I run a Lucene application on Tomcat. The app will try to open a
>>> Linux
>>> >>>> > directory, and sometime returns CorruptIndexException error.
>>> >>>> >
>>> >>>> > Shortly after I restart Tomcat (nothing else changes), the app c=
an
>>> be run
>>> >>>> > on the fly. I am using the following statements to open a direct=
ory:
>>> >>>> >
>>> >>>> >
>>> >>>> >     try {
>>> >>>> >       searcher =3D new IndexSearcher(IndexReader.open(new
>>> >>>> NIOFSDirectory(new
>>> >>>> > File("/home/user/"+ type))));
>>> >>>> >     } catch (IOException e) {
>>> >>>> >       throw new Exception("[" + type + "] Cannot open index
>>> folder...");
>>> >>>> >     }
>>> >>>> >
>>> >>>> > I would like to know how to tackle this problem.
>>> >>>> >
>>> >>>> > Many thanks!
>>> >>>>
>>> >>>> ------------------------------------------------------------------=
---
>>> >>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> >>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>> >>>>
>>> >>>>
>>> >>
>>> >>
>>> >> --------------------------------------------------------------------=
-
>>> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> >> For additional commands, e-mail: java-user-help@lucene.apache.org
>>> >>
>>> >
>>> > ---------------------------------------------------------------------
>>> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> > For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54873-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Jan 25 16:11:31 2013
Return-Path: <java-user-return-54873-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id AA6BCE21A
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 25 Jan 2013 16:11:31 +0000 (UTC)
Received: (qmail 51815 invoked by uid 500); 25 Jan 2013 16:11:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51751 invoked by uid 500); 25 Jan 2013 16:11:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51739 invoked by uid 99); 25 Jan 2013 16:11:29 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Jan 2013 16:11:29 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.160.44] (HELO mail-pb0-f44.google.com) (209.85.160.44)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Jan 2013 16:11:24 +0000
Received: by mail-pb0-f44.google.com with SMTP id uo1so293773pbc.3
        for <java-user@lucene.apache.org>; Fri, 25 Jan 2013 08:11:04 -0800 (PST)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=x-received:mime-version:in-reply-to:references:from:date:message-id
         :subject:to:content-type:content-transfer-encoding
         :x-gm-message-state;
        bh=zfYfFBtZGSIYoY/Y+PwbQJv8GUH/NJe0tDXAF9BhY3c=;
        b=ekWbaNxSL0vK78ABQdKzUcP83xx0kkVAG1FyCZ0M22VE7p3l/E20XAyaCIFkm08d+I
         367Zbrymi/RZqbBrUu3tD2YMdGZwt/NyyxY33n6lS9t2FSDyjG0iRnl8l/eNY6QudcLA
         foXsqU0dIaczzkut9DgGnIRAoAJf1zS7v6hVu1o0iWSoq4EjKAXmNk0KXP+pg087chJE
         YURsbm3DV7KxaVEWc1fzm6ScN9f4CsC3y2GTeNEejmoAacvOp0smSbfQy8jG6FjR1fV7
         pG0w4SVtLX1NCZ6IF0WJb77XhLz6OT6qffDeYQJx8ns9FlYfHHzwq/I7fAGxE9EIJz6U
         z0JA==
X-Received: by 10.69.1.65 with SMTP id be1mr15551779pbd.66.1359130264106; Fri,
 25 Jan 2013 08:11:04 -0800 (PST)
MIME-Version: 1.0
Received: by 10.68.154.73 with HTTP; Fri, 25 Jan 2013 08:10:43 -0800 (PST)
In-Reply-To: <tencent_510F3E2834535CD24EB1FAB6@qq.com>
References: <tencent_510F3E2834535CD24EB1FAB6@qq.com>
From: Michael McCandless <lucene@mikemccandless.com>
Date: Fri, 25 Jan 2013 11:10:43 -0500
Message-ID: <CAL8PwkYzsFPwT=nqnWQvdGy7m801on2H9P5z2_+Ae=S5dqqwfQ@mail.gmail.com>
Subject: =?GB2312?B?UmU6ILvYuLSjuiC72Li0o7ogSW5kZXhSZWFkZXIub3BlbiBhbmQgQ29ycnVwdA==?=
	=?GB2312?B?SW5kZXhFeGNlcHRpb24=?=
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Gm-Message-State: ALoCoQkatjwSiBM850FcKAM6y+H/HLDGPppcyz+cGNI8U/+km9lvspFY/JsjqrYAeiCGPDdYL5q/
X-Virus-Checked: Checked by ClamAV on apache.org

You can pass null for the SearcherFactory ... then SearcherManager
will just do new IndexSearcher(reader) for you.

Mike McCandless

http://blog.mikemccandless.com

On Fri, Jan 25, 2013 at 9:30 AM, zhoucheng2008 <zhoucheng2008@gmail.com> wr=
ote:
> SearcherManager mgr =3D new SearcherManager(dir, new MySearchWarmer());Ca=
n I put null as the second parameter in the SearcherManager constructor?If =
not, how to create a MySearchWarmer instance? The following explanation doe=
sn't provide sufficient info:
>  class MySearchWarmer implements SearchWarmer {     @Override     public =
void warm(IndexSearcher searcher) throws IOException {       // Run some di=
verse searches, searching and sorting against all       // fields that are =
used by your application     }   }
>
>
>
>
>
>
> ------------------ =E5=8E=9F=E5=A7=8B=E9=82=AE=E4=BB=B6 -----------------=
-
> =E5=8F=91=E4=BB=B6=E4=BA=BA: "Michael McCandless"<lucene@mikemccandless.c=
om>;
> =E5=8F=91=E9=80=81=E6=97=B6=E9=97=B4: 2013=E5=B9=B41=E6=9C=8825=E6=97=A5(=
=E6=98=9F=E6=9C=9F=E4=BA=94) =E6=99=9A=E4=B8=8A9:26
> =E6=94=B6=E4=BB=B6=E4=BA=BA: "java-user"<java-user@lucene.apache.org>;
>
> =E4=B8=BB=E9=A2=98: Re: =E5=9B=9E=E5=A4=8D=EF=BC=9A IndexReader.open and =
CorruptIndexException
>
>
>
> Maybe here?:
>
>     http://blog.mikemccandless.com/2011/11/near-real-time-readers-with-lu=
cenes.html
>
> Mike McCandless
>
> http://blog.mikemccandless.com
>
> On Fri, Jan 25, 2013 at 7:58 AM, Cheng <zhoucheng2008@gmail.com> wrote:
>> Any example code for this SearcherManager?
>>
>> On Fri, Jan 25, 2013 at 3:59 AM, Ian Lea <ian.lea@gmail.com> wrote:
>>
>>> There will be one file handle for every currently open file.
>>>
>>> Use SearcherManager and this problem should go away.
>>>
>>>
>>> --
>>> Ian.
>>>
>>>
>>> On Thu, Jan 24, 2013 at 6:40 PM, zhoucheng2008 <zhoucheng2008@gmail.com=
>
>>> wrote:
>>> > What file handlers did you guy refer to?
>>> >
>>> >
>>> > I opened the index directory only. Is this the file handler? Also, ho=
w
>>> to safely and effectively close the index directory?
>>> >
>>> >
>>> > I found the link's explanation somewhat self-contradictory. After I r=
ead
>>> it, I am confused if I should close the file handlers in the finally bl=
ock
>>> or not. I am using Java.
>>> >
>>> >
>>> >
>>> >
>>> > ------------------ =E5=8E=9F=E5=A7=8B=E9=82=AE=E4=BB=B6 -------------=
-----
>>> > =E5=8F=91=E4=BB=B6=E4=BA=BA: "Ian Lea"<ian.lea@gmail.com>;
>>> > =E5=8F=91=E9=80=81=E6=97=B6=E9=97=B4: 2013=E5=B9=B41=E6=9C=8824=E6=97=
=A5(=E6=98=9F=E6=9C=9F=E5=9B=9B) =E4=B8=8B=E5=8D=885:46
>>> > =E6=94=B6=E4=BB=B6=E4=BA=BA: "java-user"<java-user@lucene.apache.org>=
;
>>> >
>>> > =E4=B8=BB=E9=A2=98: Re: IndexReader.open and CorruptIndexException
>>> >
>>> >
>>> >
>>> > Well, raising the limits is one option but there may be better ones.
>>> >
>>> > There's an FAQ entry on this:
>>> >
>>> http://wiki.apache.org/lucene-java/LuceneFAQ#Why_am_I_getting_an_IOExce=
ption_that_says_.22Too_many_open_files.22.3F
>>> >
>>> > Take a look at org.apache.lucene.search.SearcherManager "Utility clas=
s
>>> > to safely share IndexSearcher instances across multiple threads".
>>> >
>>> >
>>> > --
>>> > Ian.
>>> >
>>> >
>>> > On Thu, Jan 24, 2013 at 9:18 AM, Rafa=C5=82 Ku=C4=87 <r.kuc@solr.pl> =
wrote:
>>> >> Hello!
>>> >>
>>> >> You need to allow the user that is running Lucene to open more files=
.
>>> >> There are plenty of tutorials available on the web. Modify your
>>> >> /etc/security/limits.conf and if for example your user is lucene add
>>> >> the following (or modify if those already exists):
>>> >>
>>> >> lucene soft nofile 64000
>>> >> lucene hard nofile 64000
>>> >>
>>> >> Relog and run:
>>> >>
>>> >> sudo -u lucene -s "ulimit -Sn"
>>> >>
>>> >> To see if the limits are the ones you set. If they are not, check if
>>> >> you don't have pam_limits.so commented in the /etc/pam.d/
>>> >>
>>> >> --
>>> >> Regards,
>>> >>  Rafa=C5=82 Ku=C4=87
>>> >>  Sematext :: http://sematext.com/ :: Solr - Lucene - Nutch
>>> >>
>>> >>> Here is the log:
>>> >>
>>> >>> Jan 24, 2013 4:10:33 AM
>>> >>> org.apache.tomcat.util.net.AprEndpoint$Acceptor run
>>> >>> SEVERE: Socket accept failed
>>> >>> org.apache.tomcat.jni.Error: 24: Too many open files
>>> >>> at org.apache.tomcat.jni.Socket.accept(Native Method)
>>> >>> at
>>> >>>
>>> org.apache.tomcat.util.net.AprEndpoint$Acceptor.run(AprEndpoint.java:99=
0)
>>> >>> at java.lang.Thread.run(Thread.java:722)
>>> >>
>>> >>
>>> >>
>>> >>> Too many open files... How to solve it?
>>> >>
>>> >>
>>> >>> On Tue, Jan 22, 2013 at 10:52 PM, Michael McCandless <
>>> >>> lucene@mikemccandless.com> wrote:
>>> >>
>>> >>>> Can you post the full stack trace of the CorruptIndexException?
>>> >>>>
>>> >>>> Mike McCandless
>>> >>>>
>>> >>>> http://blog.mikemccandless.com
>>> >>>>
>>> >>>> On Tue, Jan 22, 2013 at 8:20 AM, Cheng <zhoucheng2008@gmail.com>
>>> wrote:
>>> >>>> > Hi,
>>> >>>> >
>>> >>>> > I run a Lucene application on Tomcat. The app will try to open a
>>> Linux
>>> >>>> > directory, and sometime returns CorruptIndexException error.
>>> >>>> >
>>> >>>> > Shortly after I restart Tomcat (nothing else changes), the app c=
an
>>> be run
>>> >>>> > on the fly. I am using the following statements to open a direct=
ory:
>>> >>>> >
>>> >>>> >
>>> >>>> >     try {
>>> >>>> >       searcher =3D new IndexSearcher(IndexReader.open(new
>>> >>>> NIOFSDirectory(new
>>> >>>> > File("/home/user/"+ type))));
>>> >>>> >     } catch (IOException e) {
>>> >>>> >       throw new Exception("[" + type + "] Cannot open index
>>> folder...");
>>> >>>> >     }
>>> >>>> >
>>> >>>> > I would like to know how to tackle this problem.
>>> >>>> >
>>> >>>> > Many thanks!
>>> >>>>
>>> >>>> ------------------------------------------------------------------=
---
>>> >>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> >>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>> >>>>
>>> >>>>
>>> >>
>>> >>
>>> >> --------------------------------------------------------------------=
-
>>> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> >> For additional commands, e-mail: java-user-help@lucene.apache.org
>>> >>
>>> >
>>> > ---------------------------------------------------------------------
>>> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> > For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54874-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Jan 25 16:12:35 2013
Return-Path: <java-user-return-54874-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 3E473E21D
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 25 Jan 2013 16:12:35 +0000 (UTC)
Received: (qmail 56052 invoked by uid 500); 25 Jan 2013 16:12:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55989 invoked by uid 500); 25 Jan 2013 16:12:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55845 invoked by uid 99); 25 Jan 2013 16:12:27 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Jan 2013 16:12:27 +0000
X-ASF-Spam-Status: No, hits=2.9 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [77.238.189.90] (HELO nm10-vm0.bullet.mail.ird.yahoo.com) (77.238.189.90)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 25 Jan 2013 16:12:17 +0000
Received: from [77.238.189.57] by nm10.bullet.mail.ird.yahoo.com with NNFMP; 25 Jan 2013 16:11:55 -0000
Received: from [212.82.108.236] by tm10.bullet.mail.ird.yahoo.com with NNFMP; 25 Jan 2013 16:11:55 -0000
Received: from [127.0.0.1] by omp1001.mail.ird.yahoo.com with NNFMP; 25 Jan 2013 16:11:55 -0000
X-Yahoo-Newman-Property: ymail-3
X-Yahoo-Newman-Id: 339364.14146.bm@omp1001.mail.ird.yahoo.com
Received: (qmail 81213 invoked by uid 60001); 25 Jan 2013 16:11:55 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.co.uk; s=s1024; t=1359130315; bh=XH9mr1vc3PPUHPe/N8yxJRmNe5L1UdPLXb2ik6he/e8=; h=X-YMail-OSG:Received:X-Rocket-MIMEInfo:X-Mailer:Message-ID:Date:From:Reply-To:Subject:To:MIME-Version:Content-Type; b=uMYFQmBfNFAulhkmVnCrOEoIYANqoxCFZ/08XEjdshJv/Y0GayrsF0wbttkYuQWgjh+/8guoc1qd717PtH4NFmvis7arZiiiboMBWhxPDfP5exoxUReuRbC1kUmhwxZFQl6smw3NEmVGTQy1ltQDmlsh2O+hlayRQ/a9NJJboyw=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=X-YMail-OSG:Received:X-Rocket-MIMEInfo:X-Mailer:Message-ID:Date:From:Reply-To:Subject:To:MIME-Version:Content-Type;
  b=qYW3GSPYfLzft/JKI0wjxTXiLhYLjz68ntdRbK44dFZafu4EMF3HToTNfxDUAZz8Gr934l+ychL0HvirsXFc+nPgQfAi/Zh+OOV6HPjzQqPLR+UoVcvwoyxkpMJ6p8LKfvYTxDi15diBApsWvpFVU+R8Dlb6FEG3pKt07E7P/VU=;
X-YMail-OSG: 4r4gQ7sVM1k24EHyWU_2Q298UfvEWoowiJtZ71YNLSBvbBr
 9l.UhDFFmNRqMWSN1tI.Po_PwdGEwxS7YqbK36uPzIoxbCrni88y5wX8Rhxb
 YKPiDcwFySB8KhnWJx0hFOwmpuhk8mMnVAA4_mm4HgfmEs_x_zwdS_A828xO
 sopppDdhTugdjMya28xWQTrhBbCsBaNYpc.OIzunlLfu.5rDzeQ3uBnb7S2n
 BPWf_8Iid6h75smxzn7dBVi._V6RRcUE2.E.JE5V0Zq16QPN_RZwlr56dckM
 lEeGk3wVhexGM51AUuCxbLDzGILWt_9_BwzHLitbB1vsstNhcEpC96lGT1xe
 bSa9gBJVwPRxP3G3EriEeFZ6M80MmiAxv1AtekI4u8gWnW38QX8XehUkV1Qh
 PvCyRNJqP6uNjIiaA0nphdUWq5QzlXIS19fQ7d67sYy65uIzlFnnKNopiWg4
 zzsDb0SY.v1uvwPa3FPzx0E2qng9pAq7PPQBhFvaH
Received: from [194.116.198.185] by web171301.mail.ir2.yahoo.com via HTTP; Fri, 25 Jan 2013 16:11:55 GMT
X-Rocket-MIMEInfo: 001.001,SSBoYXZlIGEgMy42IGluZGV4IHdpdGggbWFueSBuby1ub3JtcyBmaWVsZHMgYW5kIGEgc2luZ2xlIHRleHQgZmllbGQgd2l0aCBub3JtcyAoYSBmYWlybHkgY29tbW9uIGNvbmZpZ3VyYXRpb24pLiBUaGVyZSBpcyBhIGRvY3VtZW50IGJvb3N0IEkgaGF2ZSBzZXQgYXQgaW5kZXgtdGltZSB0aGF0IHdpbGwgaGF2ZSBiZWVuIGVuY29kZWQgaW50byB0aGUgdGV4dCBmaWVsZCdzIG5vcm1zLgoKSWYgSSBxdWVyeSBzb2xlbHkgb24gYSBub24tdGV4dCBmaWVsZCB0aGVuIHRoZSByYW5raW5nIGRvZXMgbm90IGFwcGwBMAEBAQE-
X-Mailer: YahooMailWebService/0.8.130.494
Message-ID: <1359130315.61749.YahooMailNeo@web171301.mail.ir2.yahoo.com>
Date: Fri, 25 Jan 2013 16:11:55 +0000 (GMT)
From: mark harwood <markharw00d@yahoo.co.uk>
Reply-To: mark harwood <markharw00d@yahoo.co.uk>
Subject: 3.6 - querying a no-norms field and getting document boost
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="862858767-196633830-1359130315=:61749"
X-Virus-Checked: Checked by ClamAV on apache.org

--862858767-196633830-1359130315=:61749
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable

I have a 3.6 index with many no-norms fields and a single text field with n=
orms (a fairly common configuration). There is a document boost I have set =
at index-time that will have been encoded into the text field's norms.=0A=
=0AIf I query solely on a non-text field then the ranking does not apply th=
e document-level boost.=0A=0AWithout re-indexing and adding norms where I d=
on't want them, how do I most elegantly query field "A" and factor in the d=
oc-boost already recorded in the "text" field's norms?=0AI appreciate DocVa=
lues in 4.x helps in this regard but looking for a clean/fast 3.6-based sol=
ution.=0A=0AAny suggestions?
--862858767-196633830-1359130315=:61749--

From java-user-return-54875-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Jan 25 16:15:33 2013
Return-Path: <java-user-return-54875-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 0AFFFE228
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 25 Jan 2013 16:15:33 +0000 (UTC)
Received: (qmail 64797 invoked by uid 500); 25 Jan 2013 16:15:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64647 invoked by uid 500); 25 Jan 2013 16:15:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64617 invoked by uid 99); 25 Jan 2013 16:15:30 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Jan 2013 16:15:30 +0000
X-ASF-Spam-Status: No, hits=1.9 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FROM_EXCESS_BASE64,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of zhoucheng2008@gmail.com designates 209.85.210.53 as permitted sender)
Received: from [209.85.210.53] (HELO mail-da0-f53.google.com) (209.85.210.53)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Jan 2013 16:15:22 +0000
Received: by mail-da0-f53.google.com with SMTP id x6so235813dac.26
        for <java-user@lucene.apache.org>; Fri, 25 Jan 2013 08:15:01 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=x-received:x-qq-ssf:x-has-attach:x-qq-business-origin
         :x-originating-ip:x-qq-style:x-qq-mid:from:to:subject:mime-version
         :content-type:content-transfer-encoding:date:x-priority:message-id
         :x-qq-mime:x-mailer:x-qq-mailer;
        bh=fKab/SfUIHbAO2TPCU3051XsU6JZnfLXv3IuKjVfOW0=;
        b=exn5PvyoS3EIdyT+pWjZ/bBBin80nwGsJ53QPYceFJ6zONksM/rfYy3HQ6hc7kBvum
         kj6CNt3v+HpueZM/c8SHZZRMdQ6hUEmglq+B7CwFZbzz/GSgZ1F0g9TxwFVT7Z2mwLba
         GxmP2zCLsvzif9vJ0pCrqXwqW0xq5d2zQO9VzPAgE/8l+T2BE7+VzK0JR5VLuh2r7BM6
         NmZHwnzcO2bO95s7FOGa046UOvBJaSXxdtaS3sRuYnLMhHnzI6qwQ9QjFEPhKTfcRMLk
         vPCF7H7kCgIWA+/MhiCy6ESa1J2pIz8n1KjMMh/VdWpLqfn5DJDSgv/sTpzNCGcrzw2r
         2AvQ==
X-Received: by 10.68.132.34 with SMTP id or2mr15452220pbb.133.1359130500912;
        Fri, 25 Jan 2013 08:15:00 -0800 (PST)
Received: from smtpbg56.qq.com (smtpbg56.qq.com. [64.71.138.45])
        by mx.google.com with ESMTPS id k4sm1110164paz.26.2013.01.25.08.14.59
        (version=TLSv1 cipher=RC4-SHA bits=128/128);
        Fri, 25 Jan 2013 08:14:59 -0800 (PST)
X-QQ-SSF: 000000000000004000000000000000X
X-HAS-ATTACH: no
X-QQ-BUSINESS-ORIGIN: 2
X-Originating-IP: 122.231.199.49
X-QQ-STYLE: 
X-QQ-mid: webmail661t1359130494t5758194
From: "=?utf-8?B?ZHl6YzIwMTA=?=" <zhoucheng2008@gmail.com>
To: "=?utf-8?B?amF2YS11c2Vy?=" <java-user@lucene.apache.org>
Subject: =?utf-8?B?5Zue5aSN77yaIOWbnuWkje+8miDlm57lpI3vvJog?=
 =?utf-8?B?SW5kZXhSZWFkZXIub3BlbiBhbmQgQ29ycnVwdElu?=
 =?utf-8?B?ZGV4RXhjZXB0aW9u?=
Mime-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_5102AF7E_0942F1A0_778D3B9F"
Content-Transfer-Encoding: 8Bit
Date: Sat, 26 Jan 2013 00:14:54 +0800
X-Priority: 3
Message-ID: <tencent_41B8B7E13C5AFC5F3A7976D3@qq.com>
X-QQ-MIME: TCMime 1.0 by Tencent
X-Mailer: QQMail 2.x
X-QQ-Mailer: QQMail 2.x
X-Virus-Checked: Checked by ClamAV on apache.org

------=_NextPart_5102AF7E_0942F1A0_778D3B9F
Content-Type: text/plain;
	charset="utf-8"
Content-Transfer-Encoding: base64

SXMgU2VhcmNoZXJGYWN0b3J5IHRoZSBzYW1lIGFzIFNlYXJjaGVyTWFuYWdlcj8NCg0KDQpJ
YW4gbWVudGlvbmVkIGEgbmV3IHdhcm1lcigpIHNvbHV0aW9uLiBNYXliZSBJIGNhbiB0cnkg
dGhhdCBmaXJzdC4NCg0KDQotLS0tLS0tLS0tLS0tLS0tLS0g5Y6f5aeL6YKu5Lu2IC0tLS0t
LS0tLS0tLS0tLS0tLQ0K5Y+R5Lu25Lq6OiAiTWljaGFlbCBNY0NhbmRsZXNzIjxsdWNlbmVA
bWlrZW1jY2FuZGxlc3MuY29tPjsNCuWPkemAgeaXtumXtDogMjAxM+W5tDHmnIgyNuaXpSjm
mJ/mnJ/lha0pIOWHjOaZqDA6MTANCuaUtuS7tuS6ujogImphdmEtdXNlciI8amF2YS11c2Vy
QGx1Y2VuZS5hcGFjaGUub3JnPjsgDQoNCuS4u+mimDogUmU6IOWbnuWkje+8miDlm57lpI3v
vJogSW5kZXhSZWFkZXIub3BlbiBhbmQgQ29ycnVwdEluZGV4RXhjZXB0aW9uDQoNCg0KDQpZ
b3UgY2FuIHBhc3MgbnVsbCBmb3IgdGhlIFNlYXJjaGVyRmFjdG9yeSAuLi4gdGhlbiBTZWFy
Y2hlck1hbmFnZXINCndpbGwganVzdCBkbyBuZXcgSW5kZXhTZWFyY2hlcihyZWFkZXIpIGZv
ciB5b3UuDQoNCk1pa2UgTWNDYW5kbGVzcw0KDQpodHRwOi8vYmxvZy5taWtlbWNjYW5kbGVz
cy5jb20NCg0KT24gRnJpLCBKYW4gMjUsIDIwMTMgYXQgOTozMCBBTSwgemhvdWNoZW5nMjAw
OCA8emhvdWNoZW5nMjAwOEBnbWFpbC5jb20+IHdyb3RlOg0KPiBTZWFyY2hlck1hbmFnZXIg
bWdyID0gbmV3IFNlYXJjaGVyTWFuYWdlcihkaXIsIG5ldyBNeVNlYXJjaFdhcm1lcigpKTtD
YW4gSSBwdXQgbnVsbCBhcyB0aGUgc2Vjb25kIHBhcmFtZXRlciBpbiB0aGUgU2VhcmNoZXJN
YW5hZ2VyIGNvbnN0cnVjdG9yP0lmIG5vdCwgaG93IHRvIGNyZWF0ZSBhIE15U2VhcmNoV2Fy
bWVyIGluc3RhbmNlPyBUaGUgZm9sbG93aW5nIGV4cGxhbmF0aW9uIGRvZXNuJ3QgcHJvdmlk
ZSBzdWZmaWNpZW50IGluZm86DQo+ICBjbGFzcyBNeVNlYXJjaFdhcm1lciBpbXBsZW1lbnRz
IFNlYXJjaFdhcm1lciB7ICAgICBAT3ZlcnJpZGUgICAgIHB1YmxpYyB2b2lkIHdhcm0oSW5k
ZXhTZWFyY2hlciBzZWFyY2hlcikgdGhyb3dzIElPRXhjZXB0aW9uIHsgICAgICAgLy8gUnVu
IHNvbWUgZGl2ZXJzZSBzZWFyY2hlcywgc2VhcmNoaW5nIGFuZCBzb3J0aW5nIGFnYWluc3Qg
YWxsICAgICAgIC8vIGZpZWxkcyB0aGF0IGFyZSB1c2VkIGJ5IHlvdXIgYXBwbGljYXRpb24g
ICAgIH0gICB9DQo+DQo+DQo+DQo+DQo+DQo+DQo+IC0tLS0tLS0tLS0tLS0tLS0tLSDljp/l
p4vpgq7ku7YgLS0tLS0tLS0tLS0tLS0tLS0tDQo+IOWPkeS7tuS6ujogIk1pY2hhZWwgTWND
YW5kbGVzcyI8bHVjZW5lQG1pa2VtY2NhbmRsZXNzLmNvbT47DQo+IOWPkemAgeaXtumXtDog
MjAxM+W5tDHmnIgyNeaXpSjmmJ/mnJ/kupQpIOaZmuS4ijk6MjYNCj4g5pS25Lu25Lq6OiAi
amF2YS11c2VyIjxqYXZhLXVzZXJAbHVjZW5lLmFwYWNoZS5vcmc+Ow0KPg0KPiDkuLvpopg6
IFJlOiDlm57lpI3vvJogSW5kZXhSZWFkZXIub3BlbiBhbmQgQ29ycnVwdEluZGV4RXhjZXB0
aW9uDQo+DQo+DQo+DQo+IE1heWJlIGhlcmU/Og0KPg0KPiAgICAgaHR0cDovL2Jsb2cubWlr
ZW1jY2FuZGxlc3MuY29tLzIwMTEvMTEvbmVhci1yZWFsLXRpbWUtcmVhZGVycy13aXRoLWx1
Y2VuZXMuaHRtbA0KPg0KPiBNaWtlIE1jQ2FuZGxlc3MNCj4NCj4gaHR0cDovL2Jsb2cubWlr
ZW1jY2FuZGxlc3MuY29tDQo+DQo+IE9uIEZyaSwgSmFuIDI1LCAyMDEzIGF0IDc6NTggQU0s
IENoZW5nIDx6aG91Y2hlbmcyMDA4QGdtYWlsLmNvbT4gd3JvdGU6DQo+PiBBbnkgZXhhbXBs
ZSBjb2RlIGZvciB0aGlzIFNlYXJjaGVyTWFuYWdlcj8NCj4+DQo+PiBPbiBGcmksIEphbiAy
NSwgMjAxMyBhdCAzOjU5IEFNLCBJYW4gTGVhIDxpYW4ubGVhQGdtYWlsLmNvbT4gd3JvdGU6
DQo+Pg0KPj4+IFRoZXJlIHdpbGwgYmUgb25lIGZpbGUgaGFuZGxlIGZvciBldmVyeSBjdXJy
ZW50bHkgb3BlbiBmaWxlLg0KPj4+DQo+Pj4gVXNlIFNlYXJjaGVyTWFuYWdlciBhbmQgdGhp
cyBwcm9ibGVtIHNob3VsZCBnbyBhd2F5Lg0KPj4+DQo+Pj4NCj4+PiAtLQ0KPj4+IElhbi4N
Cj4+Pg0KPj4+DQo+Pj4gT24gVGh1LCBKYW4gMjQsIDIwMTMgYXQgNjo0MCBQTSwgemhvdWNo
ZW5nMjAwOCA8emhvdWNoZW5nMjAwOEBnbWFpbC5jb20+DQo+Pj4gd3JvdGU6DQo+Pj4gPiBX
aGF0IGZpbGUgaGFuZGxlcnMgZGlkIHlvdSBndXkgcmVmZXIgdG8/DQo+Pj4gPg0KPj4+ID4N
Cj4+PiA+IEkgb3BlbmVkIHRoZSBpbmRleCBkaXJlY3Rvcnkgb25seS4gSXMgdGhpcyB0aGUg
ZmlsZSBoYW5kbGVyPyBBbHNvLCBob3cNCj4+PiB0byBzYWZlbHkgYW5kIGVmZmVjdGl2ZWx5
IGNsb3NlIHRoZSBpbmRleCBkaXJlY3Rvcnk/DQo+Pj4gPg0KPj4+ID4NCj4+PiA+IEkgZm91
bmQgdGhlIGxpbmsncyBleHBsYW5hdGlvbiBzb21ld2hhdCBzZWxmLWNvbnRyYWRpY3Rvcnku
IEFmdGVyIEkgcmVhZA0KPj4+IGl0LCBJIGFtIGNvbmZ1c2VkIGlmIEkgc2hvdWxkIGNsb3Nl
IHRoZSBmaWxlIGhhbmRsZXJzIGluIHRoZSBmaW5hbGx5IGJsb2NrDQo+Pj4gb3Igbm90LiBJ
IGFtIHVzaW5nIEphdmEuDQo+Pj4gPg0KPj4+ID4NCj4+PiA+DQo+Pj4gPg0KPj4+ID4gLS0t
LS0tLS0tLS0tLS0tLS0tIOWOn+Wni+mCruS7tiAtLS0tLS0tLS0tLS0tLS0tLS0NCj4+PiA+
IOWPkeS7tuS6ujogIklhbiBMZWEiPGlhbi5sZWFAZ21haWwuY29tPjsNCj4+PiA+IOWPkemA
geaXtumXtDogMjAxM+W5tDHmnIgyNOaXpSjmmJ/mnJ/lm5spIOS4i+WNiDU6NDYNCj4+PiA+
IOaUtuS7tuS6ujogImphdmEtdXNlciI8amF2YS11c2VyQGx1Y2VuZS5hcGFjaGUub3JnPjsN
Cj4+PiA+DQo+Pj4gPiDkuLvpopg6IFJlOiBJbmRleFJlYWRlci5vcGVuIGFuZCBDb3JydXB0
SW5kZXhFeGNlcHRpb24NCj4+PiA+DQo+Pj4gPg0KPj4+ID4NCj4+PiA+IFdlbGwsIHJhaXNp
bmcgdGhlIGxpbWl0cyBpcyBvbmUgb3B0aW9uIGJ1dCB0aGVyZSBtYXkgYmUgYmV0dGVyIG9u
ZXMuDQo+Pj4gPg0KPj4+ID4gVGhlcmUncyBhbiBGQVEgZW50cnkgb24gdGhpczoNCj4+PiA+
DQo+Pj4gaHR0cDovL3dpa2kuYXBhY2hlLm9yZy9sdWNlbmUtamF2YS9MdWNlbmVGQVEjV2h5
X2FtX0lfZ2V0dGluZ19hbl9JT0V4Y2VwdGlvbl90aGF0X3NheXNfLjIyVG9vX21hbnlfb3Bl
bl9maWxlcy4yMi4zRg0KPj4+ID4NCj4+PiA+IFRha2UgYSBsb29rIGF0IG9yZy5hcGFjaGUu
bHVjZW5lLnNlYXJjaC5TZWFyY2hlck1hbmFnZXIgIlV0aWxpdHkgY2xhc3MNCj4+PiA+IHRv
IHNhZmVseSBzaGFyZSBJbmRleFNlYXJjaGVyIGluc3RhbmNlcyBhY3Jvc3MgbXVsdGlwbGUg
dGhyZWFkcyIuDQo+Pj4gPg0KPj4+ID4NCj4+PiA+IC0tDQo+Pj4gPiBJYW4uDQo+Pj4gPg0K
Pj4+ID4NCj4+PiA+IE9uIFRodSwgSmFuIDI0LCAyMDEzIGF0IDk6MTggQU0sIFJhZmHFgiBL
dcSHIDxyLmt1Y0Bzb2xyLnBsPiB3cm90ZToNCj4+PiA+PiBIZWxsbyENCj4+PiA+Pg0KPj4+
ID4+IFlvdSBuZWVkIHRvIGFsbG93IHRoZSB1c2VyIHRoYXQgaXMgcnVubmluZyBMdWNlbmUg
dG8gb3BlbiBtb3JlIGZpbGVzLi4NCj4+PiA+PiBUaGVyZSBhcmUgcGxlbnR5IG9mIHR1dG9y
aWFscyBhdmFpbGFibGUgb24gdGhlIHdlYi4gTW9kaWZ5IHlvdXINCj4+PiA+PiAvZXRjL3Nl
Y3VyaXR5L2xpbWl0cy5jb25mIGFuZCBpZiBmb3IgZXhhbXBsZSB5b3VyIHVzZXIgaXMgbHVj
ZW5lIGFkZA0KPj4+ID4+IHRoZSBmb2xsb3dpbmcgKG9yIG1vZGlmeSBpZiB0aG9zZSBhbHJl
YWR5IGV4aXN0cyk6DQo+Pj4gPj4NCj4+PiA+PiBsdWNlbmUgc29mdCBub2ZpbGUgNjQwMDAN
Cj4+PiA+PiBsdWNlbmUgaGFyZCBub2ZpbGUgNjQwMDANCj4+PiA+Pg0KPj4+ID4+IFJlbG9n
IGFuZCBydW46DQo+Pj4gPj4NCj4+PiA+PiBzdWRvIC11IGx1Y2VuZSAtcyAidWxpbWl0IC1T
biINCj4+PiA+Pg0KPj4+ID4+IFRvIHNlZSBpZiB0aGUgbGltaXRzIGFyZSB0aGUgb25lcyB5
b3Ugc2V0LiBJZiB0aGV5IGFyZSBub3QsIGNoZWNrIGlmDQo+Pj4gPj4geW91IGRvbid0IGhh
dmUgcGFtX2xpbWl0cy5zbyBjb21tZW50ZWQgaW4gdGhlIC9ldGMvcGFtLmQvDQo+Pj4gPj4N
Cj4+PiA+PiAtLQ0KPj4+ID4+IFJlZ2FyZHMsDQo+Pj4gPj4gIFJhZmHFgiBLdcSHDQo+Pj4g
Pj4gIFNlbWF0ZXh0IDo6IGh0dHA6Ly9zZW1hdGV4dC5jb20vIDo6IFNvbHIgLSBMdWNlbmUg
LSBOdXRjaA0KPj4+ID4+DQo+Pj4gPj4+IEhlcmUgaXMgdGhlIGxvZzoNCj4+PiA+Pg0KPj4+
ID4+PiBKYW4gMjQsIDIwMTMgNDoxMDozMyBBTQ0KPj4+ID4+PiBvcmcuYXBhY2hlLnRvbWNh
dC51dGlsLm5ldC5BcHJFbmRwb2ludCRBY2NlcHRvciBydW4NCj4+PiA+Pj4gU0VWRVJFOiBT
b2NrZXQgYWNjZXB0IGZhaWxlZA0KPj4+ID4+PiBvcmcuYXBhY2hlLnRvbWNhdC5qbmkuRXJy
b3I6IDI0OiBUb28gbWFueSBvcGVuIGZpbGVzDQo+Pj4gPj4+IGF0IG9yZy5hcGFjaGUudG9t
Y2F0LmpuaS5Tb2NrZXQuYWNjZXB0KE5hdGl2ZSBNZXRob2QpDQo+Pj4gPj4+IGF0DQo+Pj4g
Pj4+DQo+Pj4gb3JnLmFwYWNoZS50b21jYXQudXRpbC5uZXQuQXByRW5kcG9pbnQkQWNjZXB0
b3IucnVuKEFwckVuZHBvaW50LmphdmE6OTkwKQ0KPj4+ID4+PiBhdCBqYXZhLmxhbmcuVGhy
ZWFkLnJ1bihUaHJlYWQuamF2YTo3MjIpDQo+Pj4gPj4NCj4+PiA+Pg0KPj4+ID4+DQo+Pj4g
Pj4+IFRvbyBtYW55IG9wZW4gZmlsZXMuLi4gSG93IHRvIHNvbHZlIGl0Pw0KPj4+ID4+DQo+
Pj4gPj4NCj4+PiA+Pj4gT24gVHVlLCBKYW4gMjIsIDIwMTMgYXQgMTA6NTIgUE0sIE1pY2hh
ZWwgTWNDYW5kbGVzcyA8DQo+Pj4gPj4+IGx1Y2VuZUBtaWtlbWNjYW5kbGVzcy5jb20+IHdy
b3RlOg0KPj4+ID4+DQo+Pj4gPj4+PiBDYW4geW91IHBvc3QgdGhlIGZ1bGwgc3RhY2sgdHJh
Y2Ugb2YgdGhlIENvcnJ1cHRJbmRleEV4Y2VwdGlvbj8NCj4+PiA+Pj4+DQo+Pj4gPj4+PiBN
aWtlIE1jQ2FuZGxlc3MNCj4+PiA+Pj4+DQo+Pj4gPj4+PiBodHRwOi8vYmxvZy5taWtlbWNj
YW5kbGVzcy5jb20NCj4+PiA+Pj4+DQo+Pj4gPj4+PiBPbiBUdWUsIEphbiAyMiwgMjAxMyBh
dCA4OjIwIEFNLCBDaGVuZyA8emhvdWNoZW5nMjAwOEBnbWFpbC5jb20+DQo+Pj4gd3JvdGU6
DQo+Pj4gPj4+PiA+IEhpLA0KPj4+ID4+Pj4gPg0KPj4+ID4+Pj4gPiBJIHJ1biBhIEx1Y2Vu
ZSBhcHBsaWNhdGlvbiBvbiBUb21jYXQuIFRoZSBhcHAgd2lsbCB0cnkgdG8gb3BlbiBhDQo+
Pj4gTGludXgNCj4+PiA+Pj4+ID4gZGlyZWN0b3J5LCBhbmQgc29tZXRpbWUgcmV0dXJucyBD
b3JydXB0SW5kZXhFeGNlcHRpb24gZXJyb3IuDQo+Pj4gPj4+PiA+DQo+Pj4gPj4+PiA+IFNo
b3J0bHkgYWZ0ZXIgSSByZXN0YXJ0IFRvbWNhdCAobm90aGluZyBlbHNlIGNoYW5nZXMpLCB0
aGUgYXBwIGNhbg0KPj4+IGJlIHJ1bg0KPj4+ID4+Pj4gPiBvbiB0aGUgZmx5LiBJIGFtIHVz
aW5nIHRoZSBmb2xsb3dpbmcgc3RhdGVtZW50cyB0byBvcGVuIGEgZGlyZWN0b3J5Og0KPj4+
ID4+Pj4gPg0KPj4+ID4+Pj4gPg0KPj4+ID4+Pj4gPiAgICAgdHJ5IHsNCj4+PiA+Pj4+ID4g
ICAgICAgc2VhcmNoZXIgPSBuZXcgSW5kZXhTZWFyY2hlcihJbmRleFJlYWRlci5vcGVuKG5l
dw0KPj4+ID4+Pj4gTklPRlNEaXJlY3RvcnkobmV3DQo+Pj4gPj4+PiA+IEZpbGUoIi9ob21l
L3VzZXIvIisgdHlwZSkpKSk7DQo+Pj4gPj4+PiA+ICAgICB9IGNhdGNoIChJT0V4Y2VwdGlv
biBlKSB7DQo+Pj4gPj4+PiA+ICAgICAgIHRocm93IG5ldyBFeGNlcHRpb24oIlsiICsgdHlw
ZSArICJdIENhbm5vdCBvcGVuIGluZGV4DQo+Pj4gZm9sZGVyLi4uIik7DQo+Pj4gPj4+PiA+
ICAgICB9DQo+Pj4gPj4+PiA+DQo+Pj4gPj4+PiA+IEkgd291bGQgbGlrZSB0byBrbm93IGhv
dyB0byB0YWNrbGUgdGhpcyBwcm9ibGVtLg0KPj4+ID4+Pj4gPg0KPj4+ID4+Pj4gPiBNYW55
IHRoYW5rcyENCj4+PiA+Pj4+DQo+Pj4gPj4+PiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCj4+PiA+Pj4+
IFRvIHVuc3Vic2NyaWJlLCBlLW1haWw6IGphdmEtdXNlci11bnN1YnNjcmliZUBsdWNlbmUu
YXBhY2hlLm9yZw0KPj4+ID4+Pj4gRm9yIGFkZGl0aW9uYWwgY29tbWFuZHMsIGUtbWFpbDog
amF2YS11c2VyLWhlbHBAbHVjZW5lLmFwYWNoZS5vcmcNCj4+PiA+Pj4+DQo+Pj4gPj4+Pg0K
Pj4+ID4+DQo+Pj4gPj4NCj4+PiA+PiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCj4+PiA+PiBUbyB1bnN1
YnNjcmliZSwgZS1tYWlsOiBqYXZhLXVzZXItdW5zdWJzY3JpYmVAbHVjZW5lLmFwYWNoZS5v
cmcNCj4+PiA+PiBGb3IgYWRkaXRpb25hbCBjb21tYW5kcywgZS1tYWlsOiBqYXZhLXVzZXIt
aGVscEBsdWNlbmUuYXBhY2hlLm9yZw0KPj4+ID4+DQo+Pj4gPg0KPj4+ID4gLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tDQo+Pj4gPiBUbyB1bnN1YnNjcmliZSwgZS1tYWlsOiBqYXZhLXVzZXItdW5zdWJz
Y3JpYmVAbHVjZW5lLmFwYWNoZS5vcmcNCj4+PiA+IEZvciBhZGRpdGlvbmFsIGNvbW1hbmRz
LCBlLW1haWw6IGphdmEtdXNlci1oZWxwQGx1Y2VuZS5hcGFjaGUub3JnDQo+Pj4NCj4+PiAt
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0NCj4+PiBUbyB1bnN1YnNjcmliZSwgZS1tYWlsOiBqYXZhLXVzZXIt
dW5zdWJzY3JpYmVAbHVjZW5lLmFwYWNoZS5vcmcNCj4+PiBGb3IgYWRkaXRpb25hbCBjb21t
YW5kcywgZS1tYWlsOiBqYXZhLXVzZXItaGVscEBsdWNlbmUuYXBhY2hlLm9yZw0KPj4+DQo+
Pj4NCj4NCj4gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQo+IFRvIHVuc3Vic2NyaWJlLCBlLW1haWw6IGph
dmEtdXNlci11bnN1YnNjcmliZUBsdWNlbmUuYXBhY2hlLm9yZw0KPiBGb3IgYWRkaXRpb25h
bCBjb21tYW5kcywgZS1tYWlsOiBqYXZhLXVzZXItaGVscEBsdWNlbmUuYXBhY2hlLm9yZw0K
DQotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0NClRvIHVuc3Vic2NyaWJlLCBlLW1haWw6IGphdmEtdXNlci11
bnN1YnNjcmliZUBsdWNlbmUuYXBhY2hlLm9yZw0KRm9yIGFkZGl0aW9uYWwgY29tbWFuZHMs
IGUtbWFpbDogamF2YS11c2VyLWhlbHBAbHVjZW5lLmFwYWNoZS5vcmc=

------=_NextPart_5102AF7E_0942F1A0_778D3B9F--


From java-user-return-54876-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Jan 25 16:16:17 2013
Return-Path: <java-user-return-54876-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 9D852E22A
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 25 Jan 2013 16:16:16 +0000 (UTC)
Received: (qmail 67819 invoked by uid 500); 25 Jan 2013 16:16:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67707 invoked by uid 500); 25 Jan 2013 16:16:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67691 invoked by uid 99); 25 Jan 2013 16:16:14 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Jan 2013 16:16:14 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.160.45] (HELO mail-pb0-f45.google.com) (209.85.160.45)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Jan 2013 16:16:06 +0000
Received: by mail-pb0-f45.google.com with SMTP id rq13so295037pbb.4
        for <java-user@lucene.apache.org>; Fri, 25 Jan 2013 08:15:45 -0800 (PST)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=x-received:message-id:date:from:user-agent:mime-version:to:subject
         :content-type:content-transfer-encoding:x-gm-message-state;
        bh=i+Kf9Wju3yNivCSTktvUDhJiYIZLbd6HeGMBv8oHrBw=;
        b=Wi2E0WlTl6Gz57dYLxmQQQjp6aHHimSSV73g1H7xLbN18+wT98Hyg+8CmeKUSbusgF
         2w+Oj2gZP1ukAhNQx61YPFhlTbVLp80paMNusqWtfK5PsYxp7t+kqC1Vpxwtn2Z9/1qP
         NncsaAg99vEVtl2LPWNEA6tazq5Q5/enSRT9955JXBSFOVRXReNt3VWZLGHJWeJrgZN/
         7382fE/CJbXgaiyK3TANwE2DrVZUP32r3kRVl3V1/hKf1HWxdLRzcHRJ7o4oaWzXPK2h
         P1+hBZHY4xnlvyIaGVD80eY+EDBI3thyvdoZIO+a+MCM/ireP4X72aK0U0lZd7IBhNy9
         djwA==
X-Received: by 10.66.89.132 with SMTP id bo4mr14580113pab.62.1359130545050;
        Fri, 25 Jan 2013 08:15:45 -0800 (PST)
Received: from jajo.local (ip68-226-93-53.ri.ri.cox.net. [68.226.93.53])
        by mx.google.com with ESMTPS id wg3sm912503pbc.28.2013.01.25.08.15.43
        (version=TLSv1 cipher=ECDHE-RSA-RC4-SHA bits=128/128);
        Fri, 25 Jan 2013 08:15:44 -0800 (PST)
Message-ID: <5102AFAD.6080502@andrewgilmartin.com>
Date: Fri, 25 Jan 2013 11:15:41 -0500
From: Andrew Gilmartin <andrew@andrewgilmartin.com>
User-Agent: Postbox 3.0.7 (Macintosh/20130119)
MIME-Version: 1.0
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Subject: Filtering top hits based on stored field? And Lucene 1.x -> 3.x for
 Dummies
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Gm-Message-State: ALoCoQmHlfDZNAmpisGdXXbadiVP0MLlSYHhAaeHKbF3gg3b5c7fj4pBpgm3t/sk5/Ing7wrQXQo
X-Virus-Checked: Checked by ClamAV on apache.org

I have been using Lucene since 1.x days, but that also means I am 
carrying around some information that is no longer relevant and using 
techniques that are antiquated. I am currently using 3.0 but I am sure I 
am using it in 1.0 fashion. I have two questions -- one general and one 
specific.

The specific question is how, in Lucene 3.x, can I filter the 
IndexSeacher.search() results based on stored fields within candidate 
hits? It is not acceptable to perform the filter post search as now my 
hits list is too short. In the past calling doc() during a search (with 
my own collector) resulted in a severe performance hit. Is that still 
the case? If not, great I will just do that. If it still is, how would 
you suggest I implement the filtering?

The general question is how can I best come up to speed with Lucene 3.6 
and/or 4.0? Should I just consider my existing knowledge redundant and 
learn Lucene and Solr anew? Or are there documents that can better 
direct my re-education?

-- Andrew

-- 
Andrew Gilmartin
andrew@andrewgilmartin.com
401-441-2062


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54877-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Jan 25 16:17:39 2013
Return-Path: <java-user-return-54877-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 87FD9E231
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 25 Jan 2013 16:17:39 +0000 (UTC)
Received: (qmail 73702 invoked by uid 500); 25 Jan 2013 16:17:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73652 invoked by uid 500); 25 Jan 2013 16:17:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73642 invoked by uid 99); 25 Jan 2013 16:17:37 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Jan 2013 16:17:37 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 209.85.214.177 as permitted sender)
Received: from [209.85.214.177] (HELO mail-ob0-f177.google.com) (209.85.214.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Jan 2013 16:17:32 +0000
Received: by mail-ob0-f177.google.com with SMTP id wc20so606075obb.22
        for <java-user@lucene.apache.org>; Fri, 25 Jan 2013 08:17:11 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=x-received:mime-version:in-reply-to:references:from:date:message-id
         :subject:to:content-type:content-transfer-encoding;
        bh=SusGoWLi2cjHyx2191nxsFYcWsAend2zRJtEJ9Bda74=;
        b=YWerDqsQRGMjZGcndoz7oXWWAfGmpnu+zrgFd2HFBPNkRFaXNXEIJnuxHUA/hxg9yk
         32NwswplVLWuVKlJJ7TFPy0KpO94Q/iWYQ9Uiyud7T1SdcADe2Qa2wW/mQlKMxGF4xNN
         vhzjJ3blhu50nR/eR3Mo9uXPGuNHDC3IOeMtGmkvzw4MJF0xb9wKgsrI3AE99xW28/Co
         denmDzf+D4aTAGRj1ywx7a5+R7IwBPQiW5yLl/EKRdBZR++oSMnv2MVqyfwn7EAuOi31
         9Hor09eeGth/SdZK1JXMcvZXd2FlAxZK90LF3Eea4cJNfNuNGs7JKyY6a9fq0hvinDwR
         j/Bg==
X-Received: by 10.50.57.225 with SMTP id l1mr4271275igq.37.1359130631775; Fri,
 25 Jan 2013 08:17:11 -0800 (PST)
MIME-Version: 1.0
Received: by 10.50.184.232 with HTTP; Fri, 25 Jan 2013 08:16:50 -0800 (PST)
In-Reply-To: <tencent_41B8B7E13C5AFC5F3A7976D3@qq.com>
References: <tencent_41B8B7E13C5AFC5F3A7976D3@qq.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Fri, 25 Jan 2013 16:16:50 +0000
Message-ID: <CAEY5pxWUfZ4V_262P-cs4Wk2dVedifz-=UNfPBC_nwStZHGjhw@mail.gmail.com>
Subject: =?GB2312?B?UmU6ILvYuLSjuiC72Li0o7ogu9i4tKO6IEluZGV4UmVhZGVyLm9wZW4gYQ==?=
	=?GB2312?B?bmQgQ29ycnVwdEluZGV4RXhjZXB0aW9u?=
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

> Is SearcherFactory the same as SearcherManager?

No.

> Ian mentioned a new warmer() solution. Maybe I can try that first.

Really?  Don't remember that.


--
Ian.

> ------------------ =E5=8E=9F=E5=A7=8B=E9=82=AE=E4=BB=B6 -----------------=
-
> =E5=8F=91=E4=BB=B6=E4=BA=BA: "Michael McCandless"<lucene@mikemccandless.c=
om>;
> =E5=8F=91=E9=80=81=E6=97=B6=E9=97=B4: 2013=E5=B9=B41=E6=9C=8826=E6=97=A5(=
=E6=98=9F=E6=9C=9F=E5=85=AD) =E5=87=8C=E6=99=A80:10
> =E6=94=B6=E4=BB=B6=E4=BA=BA: "java-user"<java-user@lucene.apache.org>;
>
> =E4=B8=BB=E9=A2=98: Re: =E5=9B=9E=E5=A4=8D=EF=BC=9A =E5=9B=9E=E5=A4=8D=EF=
=BC=9A IndexReader.open and CorruptIndexException
>
>
>
> You can pass null for the SearcherFactory ... then SearcherManager
> will just do new IndexSearcher(reader) for you.
>
> Mike McCandless
>
> http://blog.mikemccandless.com
>
> On Fri, Jan 25, 2013 at 9:30 AM, zhoucheng2008 <zhoucheng2008@gmail.com> =
wrote:
>> SearcherManager mgr =3D new SearcherManager(dir, new MySearchWarmer());C=
an I put null as the second parameter in the SearcherManager constructor?If=
 not, how to create a MySearchWarmer instance? The following explanation do=
esn't provide sufficient info:
>>  class MySearchWarmer implements SearchWarmer {     @Override     public=
 void warm(IndexSearcher searcher) throws IOException {       // Run some d=
iverse searches, searching and sorting against all       // fields that are=
 used by your application     }   }
>>
>>
>>
>>
>>
>>
>> ------------------ =E5=8E=9F=E5=A7=8B=E9=82=AE=E4=BB=B6 ----------------=
--
>> =E5=8F=91=E4=BB=B6=E4=BA=BA: "Michael McCandless"<lucene@mikemccandless.=
com>;
>> =E5=8F=91=E9=80=81=E6=97=B6=E9=97=B4: 2013=E5=B9=B41=E6=9C=8825=E6=97=A5=
(=E6=98=9F=E6=9C=9F=E4=BA=94) =E6=99=9A=E4=B8=8A9:26
>> =E6=94=B6=E4=BB=B6=E4=BA=BA: "java-user"<java-user@lucene.apache.org>;
>>
>> =E4=B8=BB=E9=A2=98: Re: =E5=9B=9E=E5=A4=8D=EF=BC=9A IndexReader.open and=
 CorruptIndexException
>>
>>
>>
>> Maybe here?:
>>
>>     http://blog.mikemccandless.com/2011/11/near-real-time-readers-with-l=
ucenes.html
>>
>> Mike McCandless
>>
>> http://blog.mikemccandless.com
>>
>> On Fri, Jan 25, 2013 at 7:58 AM, Cheng <zhoucheng2008@gmail.com> wrote:
>>> Any example code for this SearcherManager?
>>>
>>> On Fri, Jan 25, 2013 at 3:59 AM, Ian Lea <ian.lea@gmail.com> wrote:
>>>
>>>> There will be one file handle for every currently open file.
>>>>
>>>> Use SearcherManager and this problem should go away.
>>>>
>>>>
>>>> --
>>>> Ian.
>>>>
>>>>
>>>> On Thu, Jan 24, 2013 at 6:40 PM, zhoucheng2008 <zhoucheng2008@gmail.co=
m>
>>>> wrote:
>>>> > What file handlers did you guy refer to?
>>>> >
>>>> >
>>>> > I opened the index directory only. Is this the file handler? Also, h=
ow
>>>> to safely and effectively close the index directory?
>>>> >
>>>> >
>>>> > I found the link's explanation somewhat self-contradictory. After I =
read
>>>> it, I am confused if I should close the file handlers in the finally b=
lock
>>>> or not. I am using Java.
>>>> >
>>>> >
>>>> >
>>>> >
>>>> > ------------------ =E5=8E=9F=E5=A7=8B=E9=82=AE=E4=BB=B6 ------------=
------
>>>> > =E5=8F=91=E4=BB=B6=E4=BA=BA: "Ian Lea"<ian.lea@gmail.com>;
>>>> > =E5=8F=91=E9=80=81=E6=97=B6=E9=97=B4: 2013=E5=B9=B41=E6=9C=8824=E6=
=97=A5(=E6=98=9F=E6=9C=9F=E5=9B=9B) =E4=B8=8B=E5=8D=885:46
>>>> > =E6=94=B6=E4=BB=B6=E4=BA=BA: "java-user"<java-user@lucene.apache.org=
>;
>>>> >
>>>> > =E4=B8=BB=E9=A2=98: Re: IndexReader.open and CorruptIndexException
>>>> >
>>>> >
>>>> >
>>>> > Well, raising the limits is one option but there may be better ones.
>>>> >
>>>> > There's an FAQ entry on this:
>>>> >
>>>> http://wiki.apache.org/lucene-java/LuceneFAQ#Why_am_I_getting_an_IOExc=
eption_that_says_.22Too_many_open_files.22.3F
>>>> >
>>>> > Take a look at org.apache.lucene.search.SearcherManager "Utility cla=
ss
>>>> > to safely share IndexSearcher instances across multiple threads".
>>>> >
>>>> >
>>>> > --
>>>> > Ian.
>>>> >
>>>> >
>>>> > On Thu, Jan 24, 2013 at 9:18 AM, Rafa=C5=82 Ku=C4=87 <r.kuc@solr.pl>=
 wrote:
>>>> >> Hello!
>>>> >>
>>>> >> You need to allow the user that is running Lucene to open more file=
s..
>>>> >> There are plenty of tutorials available on the web. Modify your
>>>> >> /etc/security/limits.conf and if for example your user is lucene ad=
d
>>>> >> the following (or modify if those already exists):
>>>> >>
>>>> >> lucene soft nofile 64000
>>>> >> lucene hard nofile 64000
>>>> >>
>>>> >> Relog and run:
>>>> >>
>>>> >> sudo -u lucene -s "ulimit -Sn"
>>>> >>
>>>> >> To see if the limits are the ones you set. If they are not, check i=
f
>>>> >> you don't have pam_limits.so commented in the /etc/pam.d/
>>>> >>
>>>> >> --
>>>> >> Regards,
>>>> >>  Rafa=C5=82 Ku=C4=87
>>>> >>  Sematext :: http://sematext.com/ :: Solr - Lucene - Nutch
>>>> >>
>>>> >>> Here is the log:
>>>> >>
>>>> >>> Jan 24, 2013 4:10:33 AM
>>>> >>> org.apache.tomcat.util.net.AprEndpoint$Acceptor run
>>>> >>> SEVERE: Socket accept failed
>>>> >>> org.apache.tomcat.jni.Error: 24: Too many open files
>>>> >>> at org.apache.tomcat.jni.Socket.accept(Native Method)
>>>> >>> at
>>>> >>>
>>>> org.apache.tomcat.util.net.AprEndpoint$Acceptor.run(AprEndpoint.java:9=
90)
>>>> >>> at java.lang.Thread.run(Thread.java:722)
>>>> >>
>>>> >>
>>>> >>
>>>> >>> Too many open files... How to solve it?
>>>> >>
>>>> >>
>>>> >>> On Tue, Jan 22, 2013 at 10:52 PM, Michael McCandless <
>>>> >>> lucene@mikemccandless.com> wrote:
>>>> >>
>>>> >>>> Can you post the full stack trace of the CorruptIndexException?
>>>> >>>>
>>>> >>>> Mike McCandless
>>>> >>>>
>>>> >>>> http://blog.mikemccandless.com
>>>> >>>>
>>>> >>>> On Tue, Jan 22, 2013 at 8:20 AM, Cheng <zhoucheng2008@gmail.com>
>>>> wrote:
>>>> >>>> > Hi,
>>>> >>>> >
>>>> >>>> > I run a Lucene application on Tomcat. The app will try to open =
a
>>>> Linux
>>>> >>>> > directory, and sometime returns CorruptIndexException error.
>>>> >>>> >
>>>> >>>> > Shortly after I restart Tomcat (nothing else changes), the app =
can
>>>> be run
>>>> >>>> > on the fly. I am using the following statements to open a direc=
tory:
>>>> >>>> >
>>>> >>>> >
>>>> >>>> >     try {
>>>> >>>> >       searcher =3D new IndexSearcher(IndexReader.open(new
>>>> >>>> NIOFSDirectory(new
>>>> >>>> > File("/home/user/"+ type))));
>>>> >>>> >     } catch (IOException e) {
>>>> >>>> >       throw new Exception("[" + type + "] Cannot open index
>>>> folder...");
>>>> >>>> >     }
>>>> >>>> >
>>>> >>>> > I would like to know how to tackle this problem.
>>>> >>>> >
>>>> >>>> > Many thanks!
>>>> >>>>
>>>> >>>> -----------------------------------------------------------------=
----
>>>> >>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> >>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>> >>>>
>>>> >>>>
>>>> >>
>>>> >>
>>>> >> -------------------------------------------------------------------=
--
>>>> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> >> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>> >>
>>>> >
>>>> > --------------------------------------------------------------------=
-
>>>> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> > For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54878-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Jan 25 16:28:02 2013
Return-Path: <java-user-return-54878-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id AF95DE8A4
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 25 Jan 2013 16:28:02 +0000 (UTC)
Received: (qmail 3636 invoked by uid 500); 25 Jan 2013 16:28:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3472 invoked by uid 500); 25 Jan 2013 16:28:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3459 invoked by uid 99); 25 Jan 2013 16:27:59 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Jan 2013 16:27:59 +0000
X-ASF-Spam-Status: No, hits=1.9 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FROM_EXCESS_BASE64,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of zhoucheng2008@gmail.com designates 209.85.160.42 as permitted sender)
Received: from [209.85.160.42] (HELO mail-pb0-f42.google.com) (209.85.160.42)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Jan 2013 16:27:53 +0000
Received: by mail-pb0-f42.google.com with SMTP id rp2so301663pbb.15
        for <java-user@lucene.apache.org>; Fri, 25 Jan 2013 08:27:33 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=x-received:x-qq-ssf:x-has-attach:x-qq-business-origin
         :x-originating-ip:x-qq-style:x-qq-mid:from:to:subject:mime-version
         :content-type:content-transfer-encoding:date:x-priority:message-id
         :x-qq-mime:x-mailer:x-qq-mailer:x-qq-replyhash;
        bh=tlu2By2D4BHiVi/glgEmLPiA5xQKacYmxKmbf9PzdLw=;
        b=uu9j9IA4h7BzAIGdUtJ7GnPwf7LG6t1WSV2E2K1mrGqDLFFPBN/pHijq9wCsE7izrw
         AEHi5P3zd6BSl+2DlW4kaBrh3W3RSyxJXi5jcU2MNEA7czeZQvJSb7soHu+iTY+saTif
         l5kB+sxAOuKxlLdiBVr4SoVEcJa3ltFShklyInn7pWt59TDR9vsv/J1AwdnX9aBiJvdx
         YLvdYnFihU7JYQ35mVpE/mcX3AGyDMwLxa/grgo+cx7tdFx6y3ddaETy85HWckysNe3g
         CMq02fpsXvcuMHKORN3/8d8xZCwC3UdsDYEQGNHN4HAnEMGmuXw7M5F6E3QmBbHb2gD3
         HfSA==
X-Received: by 10.66.80.202 with SMTP id t10mr14586477pax.81.1359131253572;
        Fri, 25 Jan 2013 08:27:33 -0800 (PST)
Received: from smtpbg299.qq.com (smtpbg299.qq.com. [184.105.67.99])
        by mx.google.com with ESMTPS id k4sm1127599paz.26.2013.01.25.08.27.32
        (version=TLSv1 cipher=RC4-SHA bits=128/128);
        Fri, 25 Jan 2013 08:27:32 -0800 (PST)
X-QQ-SSF: 000000000000004000000000000000X
X-HAS-ATTACH: no
X-QQ-BUSINESS-ORIGIN: 2
X-Originating-IP: 122.231.199.49
X-QQ-STYLE: 
X-QQ-mid: webmail661t1359131247t3427475
From: "=?utf-8?B?emhvdWNoZW5nMjAwOA==?=" <zhoucheng2008@gmail.com>
To: "=?utf-8?B?amF2YS11c2Vy?=" <java-user@lucene.apache.org>
Subject: =?utf-8?B?5Zue5aSN77yaIOWbnuWkje+8miDlm57lpI3vvJog?=
 =?utf-8?B?5Zue5aSN77yaIEluZGV4UmVhZGVyLm9wZW4gYW5k?=
 =?utf-8?B?IENvcnJ1cHRJbmRleEV4Y2VwdGlvbg==?=
Mime-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_5102B26F_09545490_6A6E3D45"
Content-Transfer-Encoding: 8Bit
Date: Sat, 26 Jan 2013 00:27:27 +0800
X-Priority: 3
Message-ID: <tencent_61B34FEB679965637E9276D4@qq.com>
X-QQ-MIME: TCMime 1.0 by Tencent
X-Mailer: QQMail 2.x
X-QQ-Mailer: QQMail 2.x
X-QQ-ReplyHash: 2796800697
X-Virus-Checked: Checked by ClamAV on apache.org

------=_NextPart_5102B26F_09545490_6A6E3D45
Content-Type: text/plain;
	charset="utf-8"
Content-Transfer-Encoding: base64

U29ycnksIEkgbWVhbnQgdGhpczoNCg0KDQpTZWFyY2hlck1hbmFnZXIgc20gPSBuZXcgU2Vh
cmNoZXJNYW5hZ2VyKGRpciwgbmV3IFNlYXJjaGVyRmFjdG9yeSgpKTsNCg0KDQoNCg0KLS0t
LS0tLS0tLS0tLS0tLS0tIOWOn+Wni+mCruS7tiAtLS0tLS0tLS0tLS0tLS0tLS0NCuWPkeS7
tuS6ujogIklhbiBMZWEiPGlhbi5sZWFAZ21haWwuY29tPjsNCuWPkemAgeaXtumXtDogMjAx
M+W5tDHmnIgyNuaXpSjmmJ/mnJ/lha0pIOWHjOaZqDA6MTYNCuaUtuS7tuS6ujogImphdmEt
dXNlciI8amF2YS11c2VyQGx1Y2VuZS5hcGFjaGUub3JnPjsgDQoNCuS4u+mimDogUmU6IOWb
nuWkje+8miDlm57lpI3vvJog5Zue5aSN77yaIEluZGV4UmVhZGVyLm9wZW4gYW5kIENvcnJ1
cHRJbmRleEV4Y2VwdGlvbg0KDQoNCg0KPiBJcyBTZWFyY2hlckZhY3RvcnkgdGhlIHNhbWUg
YXMgU2VhcmNoZXJNYW5hZ2VyPw0KDQpOby4NCg0KPiBJYW4gbWVudGlvbmVkIGEgbmV3IHdh
cm1lcigpIHNvbHV0aW9uLiBNYXliZSBJIGNhbiB0cnkgdGhhdCBmaXJzdC4NCg0KUmVhbGx5
PyAgRG9uJ3QgcmVtZW1iZXIgdGhhdC4NCg0KDQotLQ0KSWFuLg0KDQo+IC0tLS0tLS0tLS0t
LS0tLS0tLSDljp/lp4vpgq7ku7YgLS0tLS0tLS0tLS0tLS0tLS0tDQo+IOWPkeS7tuS6ujog
Ik1pY2hhZWwgTWNDYW5kbGVzcyI8bHVjZW5lQG1pa2VtY2NhbmRsZXNzLmNvbT47DQo+IOWP
kemAgeaXtumXtDogMjAxM+W5tDHmnIgyNuaXpSjmmJ/mnJ/lha0pIOWHjOaZqDA6MTANCj4g
5pS25Lu25Lq6OiAiamF2YS11c2VyIjxqYXZhLXVzZXJAbHVjZW5lLmFwYWNoZS5vcmc+Ow0K
Pg0KPiDkuLvpopg6IFJlOiDlm57lpI3vvJog5Zue5aSN77yaIEluZGV4UmVhZGVyLm9wZW4g
YW5kIENvcnJ1cHRJbmRleEV4Y2VwdGlvbg0KPg0KPg0KPg0KPiBZb3UgY2FuIHBhc3MgbnVs
bCBmb3IgdGhlIFNlYXJjaGVyRmFjdG9yeSAuLi4gdGhlbiBTZWFyY2hlck1hbmFnZXINCj4g
d2lsbCBqdXN0IGRvIG5ldyBJbmRleFNlYXJjaGVyKHJlYWRlcikgZm9yIHlvdS4NCj4NCj4g
TWlrZSBNY0NhbmRsZXNzDQo+DQo+IGh0dHA6Ly9ibG9nLm1pa2VtY2NhbmRsZXNzLmNvbQ0K
Pg0KPiBPbiBGcmksIEphbiAyNSwgMjAxMyBhdCA5OjMwIEFNLCB6aG91Y2hlbmcyMDA4IDx6
aG91Y2hlbmcyMDA4QGdtYWlsLmNvbT4gd3JvdGU6DQo+PiBTZWFyY2hlck1hbmFnZXIgbWdy
ID0gbmV3IFNlYXJjaGVyTWFuYWdlcihkaXIsIG5ldyBNeVNlYXJjaFdhcm1lcigpKTtDYW4g
SSBwdXQgbnVsbCBhcyB0aGUgc2Vjb25kIHBhcmFtZXRlciBpbiB0aGUgU2VhcmNoZXJNYW5h
Z2VyIGNvbnN0cnVjdG9yP0lmIG5vdCwgaG93IHRvIGNyZWF0ZSBhIE15U2VhcmNoV2FybWVy
IGluc3RhbmNlPyBUaGUgZm9sbG93aW5nIGV4cGxhbmF0aW9uIGRvZXNuJ3QgcHJvdmlkZSBz
dWZmaWNpZW50IGluZm86DQo+PiAgY2xhc3MgTXlTZWFyY2hXYXJtZXIgaW1wbGVtZW50cyBT
ZWFyY2hXYXJtZXIgeyAgICAgQE92ZXJyaWRlICAgICBwdWJsaWMgdm9pZCB3YXJtKEluZGV4
U2VhcmNoZXIgc2VhcmNoZXIpIHRocm93cyBJT0V4Y2VwdGlvbiB7ICAgICAgIC8vIFJ1biBz
b21lIGRpdmVyc2Ugc2VhcmNoZXMsIHNlYXJjaGluZyBhbmQgc29ydGluZyBhZ2FpbnN0IGFs
bCAgICAgICAvLyBmaWVsZHMgdGhhdCBhcmUgdXNlZCBieSB5b3VyIGFwcGxpY2F0aW9uICAg
ICB9ICAgfQ0KPj4NCj4+DQo+Pg0KPj4NCj4+DQo+Pg0KPj4gLS0tLS0tLS0tLS0tLS0tLS0t
IOWOn+Wni+mCruS7tiAtLS0tLS0tLS0tLS0tLS0tLS0NCj4+IOWPkeS7tuS6ujogIk1pY2hh
ZWwgTWNDYW5kbGVzcyI8bHVjZW5lQG1pa2VtY2NhbmRsZXNzLmNvbT47DQo+PiDlj5HpgIHm
l7bpl7Q6IDIwMTPlubQx5pyIMjXml6Uo5pif5pyf5LqUKSDmmZrkuIo5OjI2DQo+PiDmlLbk
u7bkuro6ICJqYXZhLXVzZXIiPGphdmEtdXNlckBsdWNlbmUuYXBhY2hlLm9yZz47DQo+Pg0K
Pj4g5Li76aKYOiBSZTog5Zue5aSN77yaIEluZGV4UmVhZGVyLm9wZW4gYW5kIENvcnJ1cHRJ
bmRleEV4Y2VwdGlvbg0KPj4NCj4+DQo+Pg0KPj4gTWF5YmUgaGVyZT86DQo+Pg0KPj4gICAg
IGh0dHA6Ly9ibG9nLm1pa2VtY2NhbmRsZXNzLmNvbS8yMDExLzExL25lYXItcmVhbC10aW1l
LXJlYWRlcnMtd2l0aC1sdWNlbmVzLmh0bWwNCj4+DQo+PiBNaWtlIE1jQ2FuZGxlc3MNCj4+
DQo+PiBodHRwOi8vYmxvZy5taWtlbWNjYW5kbGVzcy5jb20NCj4+DQo+PiBPbiBGcmksIEph
biAyNSwgMjAxMyBhdCA3OjU4IEFNLCBDaGVuZyA8emhvdWNoZW5nMjAwOEBnbWFpbC5jb20+
IHdyb3RlOg0KPj4+IEFueSBleGFtcGxlIGNvZGUgZm9yIHRoaXMgU2VhcmNoZXJNYW5hZ2Vy
Pw0KPj4+DQo+Pj4gT24gRnJpLCBKYW4gMjUsIDIwMTMgYXQgMzo1OSBBTSwgSWFuIExlYSA8
aWFuLmxlYUBnbWFpbC5jb20+IHdyb3RlOg0KPj4+DQo+Pj4+IFRoZXJlIHdpbGwgYmUgb25l
IGZpbGUgaGFuZGxlIGZvciBldmVyeSBjdXJyZW50bHkgb3BlbiBmaWxlLg0KPj4+Pg0KPj4+
PiBVc2UgU2VhcmNoZXJNYW5hZ2VyIGFuZCB0aGlzIHByb2JsZW0gc2hvdWxkIGdvIGF3YXku
DQo+Pj4+DQo+Pj4+DQo+Pj4+IC0tDQo+Pj4+IElhbi4NCj4+Pj4NCj4+Pj4NCj4+Pj4gT24g
VGh1LCBKYW4gMjQsIDIwMTMgYXQgNjo0MCBQTSwgemhvdWNoZW5nMjAwOCA8emhvdWNoZW5n
MjAwOEBnbWFpbC5jb20+DQo+Pj4+IHdyb3RlOg0KPj4+PiA+IFdoYXQgZmlsZSBoYW5kbGVy
cyBkaWQgeW91IGd1eSByZWZlciB0bz8NCj4+Pj4gPg0KPj4+PiA+DQo+Pj4+ID4gSSBvcGVu
ZWQgdGhlIGluZGV4IGRpcmVjdG9yeSBvbmx5LiBJcyB0aGlzIHRoZSBmaWxlIGhhbmRsZXI/
IEFsc28sIGhvdw0KPj4+PiB0byBzYWZlbHkgYW5kIGVmZmVjdGl2ZWx5IGNsb3NlIHRoZSBp
bmRleCBkaXJlY3Rvcnk/DQo+Pj4+ID4NCj4+Pj4gPg0KPj4+PiA+IEkgZm91bmQgdGhlIGxp
bmsncyBleHBsYW5hdGlvbiBzb21ld2hhdCBzZWxmLWNvbnRyYWRpY3RvcnkuIEFmdGVyIEkg
cmVhZA0KPj4+PiBpdCwgSSBhbSBjb25mdXNlZCBpZiBJIHNob3VsZCBjbG9zZSB0aGUgZmls
ZSBoYW5kbGVycyBpbiB0aGUgZmluYWxseSBibG9jaw0KPj4+PiBvciBub3QuIEkgYW0gdXNp
bmcgSmF2YS4NCj4+Pj4gPg0KPj4+PiA+DQo+Pj4+ID4NCj4+Pj4gPg0KPj4+PiA+IC0tLS0t
LS0tLS0tLS0tLS0tLSDljp/lp4vpgq7ku7YgLS0tLS0tLS0tLS0tLS0tLS0tDQo+Pj4+ID4g
5Y+R5Lu25Lq6OiAiSWFuIExlYSI8aWFuLmxlYUBnbWFpbC5jb20+Ow0KPj4+PiA+IOWPkemA
geaXtumXtDogMjAxM+W5tDHmnIgyNOaXpSjmmJ/mnJ/lm5spIOS4i+WNiDU6NDYNCj4+Pj4g
PiDmlLbku7bkuro6ICJqYXZhLXVzZXIiPGphdmEtdXNlckBsdWNlbmUuYXBhY2hlLm9yZz47
DQo+Pj4+ID4NCj4+Pj4gPiDkuLvpopg6IFJlOiBJbmRleFJlYWRlci5vcGVuIGFuZCBDb3Jy
dXB0SW5kZXhFeGNlcHRpb24NCj4+Pj4gPg0KPj4+PiA+DQo+Pj4+ID4NCj4+Pj4gPiBXZWxs
LCByYWlzaW5nIHRoZSBsaW1pdHMgaXMgb25lIG9wdGlvbiBidXQgdGhlcmUgbWF5IGJlIGJl
dHRlciBvbmVzLg0KPj4+PiA+DQo+Pj4+ID4gVGhlcmUncyBhbiBGQVEgZW50cnkgb24gdGhp
czoNCj4+Pj4gPg0KPj4+PiBodHRwOi8vd2lraS5hcGFjaGUub3JnL2x1Y2VuZS1qYXZhL0x1
Y2VuZUZBUSNXaHlfYW1fSV9nZXR0aW5nX2FuX0lPRXhjZXB0aW9uX3RoYXRfc2F5c18uMjJU
b29fbWFueV9vcGVuX2ZpbGVzLjIyLjNGDQo+Pj4+ID4NCj4+Pj4gPiBUYWtlIGEgbG9vayBh
dCBvcmcuYXBhY2hlLmx1Y2VuZS5zZWFyY2guU2VhcmNoZXJNYW5hZ2VyICJVdGlsaXR5IGNs
YXNzDQo+Pj4+ID4gdG8gc2FmZWx5IHNoYXJlIEluZGV4U2VhcmNoZXIgaW5zdGFuY2VzIGFj
cm9zcyBtdWx0aXBsZSB0aHJlYWRzIi4NCj4+Pj4gPg0KPj4+PiA+DQo+Pj4+ID4gLS0NCj4+
Pj4gPiBJYW4uDQo+Pj4+ID4NCj4+Pj4gPg0KPj4+PiA+IE9uIFRodSwgSmFuIDI0LCAyMDEz
IGF0IDk6MTggQU0sIFJhZmHFgiBLdcSHIDxyLmt1Y0Bzb2xyLnBsPiB3cm90ZToNCj4+Pj4g
Pj4gSGVsbG8hDQo+Pj4+ID4+DQo+Pj4+ID4+IFlvdSBuZWVkIHRvIGFsbG93IHRoZSB1c2Vy
IHRoYXQgaXMgcnVubmluZyBMdWNlbmUgdG8gb3BlbiBtb3JlIGZpbGVzLi4NCj4+Pj4gPj4g
VGhlcmUgYXJlIHBsZW50eSBvZiB0dXRvcmlhbHMgYXZhaWxhYmxlIG9uIHRoZSB3ZWIuIE1v
ZGlmeSB5b3VyDQo+Pj4+ID4+IC9ldGMvc2VjdXJpdHkvbGltaXRzLmNvbmYgYW5kIGlmIGZv
ciBleGFtcGxlIHlvdXIgdXNlciBpcyBsdWNlbmUgYWRkDQo+Pj4+ID4+IHRoZSBmb2xsb3dp
bmcgKG9yIG1vZGlmeSBpZiB0aG9zZSBhbHJlYWR5IGV4aXN0cyk6DQo+Pj4+ID4+DQo+Pj4+
ID4+IGx1Y2VuZSBzb2Z0IG5vZmlsZSA2NDAwMA0KPj4+PiA+PiBsdWNlbmUgaGFyZCBub2Zp
bGUgNjQwMDANCj4+Pj4gPj4NCj4+Pj4gPj4gUmVsb2cgYW5kIHJ1bjoNCj4+Pj4gPj4NCj4+
Pj4gPj4gc3VkbyAtdSBsdWNlbmUgLXMgInVsaW1pdCAtU24iDQo+Pj4+ID4+DQo+Pj4+ID4+
IFRvIHNlZSBpZiB0aGUgbGltaXRzIGFyZSB0aGUgb25lcyB5b3Ugc2V0LiBJZiB0aGV5IGFy
ZSBub3QsIGNoZWNrIGlmDQo+Pj4+ID4+IHlvdSBkb24ndCBoYXZlIHBhbV9saW1pdHMuc28g
Y29tbWVudGVkIGluIHRoZSAvZXRjL3BhbS5kLw0KPj4+PiA+Pg0KPj4+PiA+PiAtLQ0KPj4+
PiA+PiBSZWdhcmRzLA0KPj4+PiA+PiAgUmFmYcWCIEt1xIcNCj4+Pj4gPj4gIFNlbWF0ZXh0
IDo6IGh0dHA6Ly9zZW1hdGV4dC5jb20vIDo6IFNvbHIgLSBMdWNlbmUgLSBOdXRjaA0KPj4+
PiA+Pg0KPj4+PiA+Pj4gSGVyZSBpcyB0aGUgbG9nOg0KPj4+PiA+Pg0KPj4+PiA+Pj4gSmFu
IDI0LCAyMDEzIDQ6MTA6MzMgQU0NCj4+Pj4gPj4+IG9yZy5hcGFjaGUudG9tY2F0LnV0aWwu
bmV0LkFwckVuZHBvaW50JEFjY2VwdG9yIHJ1bg0KPj4+PiA+Pj4gU0VWRVJFOiBTb2NrZXQg
YWNjZXB0IGZhaWxlZA0KPj4+PiA+Pj4gb3JnLmFwYWNoZS50b21jYXQuam5pLkVycm9yOiAy
NDogVG9vIG1hbnkgb3BlbiBmaWxlcw0KPj4+PiA+Pj4gYXQgb3JnLmFwYWNoZS50b21jYXQu
am5pLlNvY2tldC5hY2NlcHQoTmF0aXZlIE1ldGhvZCkNCj4+Pj4gPj4+IGF0DQo+Pj4+ID4+
Pg0KPj4+PiBvcmcuYXBhY2hlLnRvbWNhdC51dGlsLm5ldC5BcHJFbmRwb2ludCRBY2NlcHRv
ci5ydW4oQXByRW5kcG9pbnQuamF2YTo5OTApDQo+Pj4+ID4+PiBhdCBqYXZhLmxhbmcuVGhy
ZWFkLnJ1bihUaHJlYWQuamF2YTo3MjIpDQo+Pj4+ID4+DQo+Pj4+ID4+DQo+Pj4+ID4+DQo+
Pj4+ID4+PiBUb28gbWFueSBvcGVuIGZpbGVzLi4uIEhvdyB0byBzb2x2ZSBpdD8NCj4+Pj4g
Pj4NCj4+Pj4gPj4NCj4+Pj4gPj4+IE9uIFR1ZSwgSmFuIDIyLCAyMDEzIGF0IDEwOjUyIFBN
LCBNaWNoYWVsIE1jQ2FuZGxlc3MgPA0KPj4+PiA+Pj4gbHVjZW5lQG1pa2VtY2NhbmRsZXNz
LmNvbT4gd3JvdGU6DQo+Pj4+ID4+DQo+Pj4+ID4+Pj4gQ2FuIHlvdSBwb3N0IHRoZSBmdWxs
IHN0YWNrIHRyYWNlIG9mIHRoZSBDb3JydXB0SW5kZXhFeGNlcHRpb24/DQo+Pj4+ID4+Pj4N
Cj4+Pj4gPj4+PiBNaWtlIE1jQ2FuZGxlc3MNCj4+Pj4gPj4+Pg0KPj4+PiA+Pj4+IGh0dHA6
Ly9ibG9nLm1pa2VtY2NhbmRsZXNzLmNvbQ0KPj4+PiA+Pj4+DQo+Pj4+ID4+Pj4gT24gVHVl
LCBKYW4gMjIsIDIwMTMgYXQgODoyMCBBTSwgQ2hlbmcgPHpob3VjaGVuZzIwMDhAZ21haWwu
Y29tPg0KPj4+PiB3cm90ZToNCj4+Pj4gPj4+PiA+IEhpLA0KPj4+PiA+Pj4+ID4NCj4+Pj4g
Pj4+PiA+IEkgcnVuIGEgTHVjZW5lIGFwcGxpY2F0aW9uIG9uIFRvbWNhdC4gVGhlIGFwcCB3
aWxsIHRyeSB0byBvcGVuIGENCj4+Pj4gTGludXgNCj4+Pj4gPj4+PiA+IGRpcmVjdG9yeSwg
YW5kIHNvbWV0aW1lIHJldHVybnMgQ29ycnVwdEluZGV4RXhjZXB0aW9uIGVycm9yLg0KPj4+
PiA+Pj4+ID4NCj4+Pj4gPj4+PiA+IFNob3J0bHkgYWZ0ZXIgSSByZXN0YXJ0IFRvbWNhdCAo
bm90aGluZyBlbHNlIGNoYW5nZXMpLCB0aGUgYXBwIGNhbg0KPj4+PiBiZSBydW4NCj4+Pj4g
Pj4+PiA+IG9uIHRoZSBmbHkuIEkgYW0gdXNpbmcgdGhlIGZvbGxvd2luZyBzdGF0ZW1lbnRz
IHRvIG9wZW4gYSBkaXJlY3Rvcnk6DQo+Pj4+ID4+Pj4gPg0KPj4+PiA+Pj4+ID4NCj4+Pj4g
Pj4+PiA+ICAgICB0cnkgew0KPj4+PiA+Pj4+ID4gICAgICAgc2VhcmNoZXIgPSBuZXcgSW5k
ZXhTZWFyY2hlcihJbmRleFJlYWRlci5vcGVuKG5ldw0KPj4+PiA+Pj4+IE5JT0ZTRGlyZWN0
b3J5KG5ldw0KPj4+PiA+Pj4+ID4gRmlsZSgiL2hvbWUvdXNlci8iKyB0eXBlKSkpKTsNCj4+
Pj4gPj4+PiA+ICAgICB9IGNhdGNoIChJT0V4Y2VwdGlvbiBlKSB7DQo+Pj4+ID4+Pj4gPiAg
ICAgICB0aHJvdyBuZXcgRXhjZXB0aW9uKCJbIiArIHR5cGUgKyAiXSBDYW5ub3Qgb3BlbiBp
bmRleA0KPj4+PiBmb2xkZXIuLi4iKTsNCj4+Pj4gPj4+PiA+ICAgICB9DQo+Pj4+ID4+Pj4g
Pg0KPj4+PiA+Pj4+ID4gSSB3b3VsZCBsaWtlIHRvIGtub3cgaG93IHRvIHRhY2tsZSB0aGlz
IHByb2JsZW0uDQo+Pj4+ID4+Pj4gPg0KPj4+PiA+Pj4+ID4gTWFueSB0aGFua3MhDQo+Pj4+
ID4+Pj4NCj4+Pj4gPj4+PiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCj4+Pj4gPj4+PiBUbyB1bnN1YnNj
cmliZSwgZS1tYWlsOiBqYXZhLXVzZXItdW5zdWJzY3JpYmVAbHVjZW5lLmFwYWNoZS5vcmcN
Cj4+Pj4gPj4+PiBGb3IgYWRkaXRpb25hbCBjb21tYW5kcywgZS1tYWlsOiBqYXZhLXVzZXIt
aGVscEBsdWNlbmUuYXBhY2hlLm9yZw0KPj4+PiA+Pj4+DQo+Pj4+ID4+Pj4NCj4+Pj4gPj4N
Cj4+Pj4gPj4NCj4+Pj4gPj4gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQo+Pj4+ID4+IFRvIHVuc3Vic2Ny
aWJlLCBlLW1haWw6IGphdmEtdXNlci11bnN1YnNjcmliZUBsdWNlbmUuYXBhY2hlLm9yZw0K
Pj4+PiA+PiBGb3IgYWRkaXRpb25hbCBjb21tYW5kcywgZS1tYWlsOiBqYXZhLXVzZXItaGVs
cEBsdWNlbmUuYXBhY2hlLm9yZw0KPj4+PiA+Pg0KPj4+PiA+DQo+Pj4+ID4gLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tDQo+Pj4+ID4gVG8gdW5zdWJzY3JpYmUsIGUtbWFpbDogamF2YS11c2VyLXVuc3Vi
c2NyaWJlQGx1Y2VuZS5hcGFjaGUub3JnDQo+Pj4+ID4gRm9yIGFkZGl0aW9uYWwgY29tbWFu
ZHMsIGUtbWFpbDogamF2YS11c2VyLWhlbHBAbHVjZW5lLmFwYWNoZS5vcmcNCj4+Pj4NCj4+
Pj4gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tDQo+Pj4+IFRvIHVuc3Vic2NyaWJlLCBlLW1haWw6IGphdmEt
dXNlci11bnN1YnNjcmliZUBsdWNlbmUuYXBhY2hlLm9yZw0KPj4+PiBGb3IgYWRkaXRpb25h
bCBjb21tYW5kcywgZS1tYWlsOiBqYXZhLXVzZXItaGVscEBsdWNlbmUuYXBhY2hlLm9yZw0K
Pj4+Pg0KPj4+Pg0KPj4NCj4+IC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KPj4gVG8gdW5zdWJzY3JpYmUs
IGUtbWFpbDogamF2YS11c2VyLXVuc3Vic2NyaWJlQGx1Y2VuZS5hcGFjaGUub3JnDQo+PiBG
b3IgYWRkaXRpb25hbCBjb21tYW5kcywgZS1tYWlsOiBqYXZhLXVzZXItaGVscEBsdWNlbmUu
YXBhY2hlLm9yZw0KPg0KPiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCj4gVG8gdW5zdWJzY3JpYmUsIGUt
bWFpbDogamF2YS11c2VyLXVuc3Vic2NyaWJlQGx1Y2VuZS5hcGFjaGUub3JnDQo+IEZvciBh
ZGRpdGlvbmFsIGNvbW1hbmRzLCBlLW1haWw6IGphdmEtdXNlci1oZWxwQGx1Y2VuZS5hcGFj
aGUub3JnDQoNCi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KVG8gdW5zdWJzY3JpYmUsIGUtbWFpbDogamF2
YS11c2VyLXVuc3Vic2NyaWJlQGx1Y2VuZS5hcGFjaGUub3JnDQpGb3IgYWRkaXRpb25hbCBj
b21tYW5kcywgZS1tYWlsOiBqYXZhLXVzZXItaGVscEBsdWNlbmUuYXBhY2hlLm9yZw==

------=_NextPart_5102B26F_09545490_6A6E3D45--


From java-user-return-54879-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Jan 25 16:28:58 2013
Return-Path: <java-user-return-54879-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id E5892EDDC
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 25 Jan 2013 16:28:57 +0000 (UTC)
Received: (qmail 7018 invoked by uid 500); 25 Jan 2013 16:28:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6807 invoked by uid 500); 25 Jan 2013 16:28:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6792 invoked by uid 99); 25 Jan 2013 16:28:55 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Jan 2013 16:28:55 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [216.70.64.92] (HELO n31.mail01.mtsvc.net) (216.70.64.92)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Jan 2013 16:28:47 +0000
Received: from n23.c09.mtsvc.net ([205.186.172.23]:42244)
	by n31.mail01.mtsvc.net with esmtps (TLSv1:AES128-SHA:128)
	(Exim 4.72)
	(envelope-from <jriquelme@totex.cl>)
	id 1Tym8e-00006A-62
	for java-user@lucene.apache.org; Fri, 25 Jan 2013 11:28:27 -0500
Received: from mail-pa0-f46.google.com ([209.85.220.46]:35379)
	by n23.c09.mtsvc.net with esmtpsa (TLS1.0:RSA_ARCFOUR_SHA1:128)
	(Exim 4.80.1)
	(envelope-from <jriquelme@totex.cl>)
	id 1Tym8a-0003dK-TE
	for java-user@lucene.apache.org; Fri, 25 Jan 2013 08:28:23 -0800
Received: by mail-pa0-f46.google.com with SMTP id kp14so346457pab.19
        for <java-user@lucene.apache.org>; Fri, 25 Jan 2013 08:28:20 -0800 (PST)
MIME-Version: 1.0
X-Received: by 10.68.228.34 with SMTP id sf2mr15592729pbc.85.1359131300360;
 Fri, 25 Jan 2013 08:28:20 -0800 (PST)
Received: by 10.68.219.196 with HTTP; Fri, 25 Jan 2013 08:28:20 -0800 (PST)
Date: Fri, 25 Jan 2013 13:28:20 -0300
Message-ID: <CAD86vg7T93KNaaCVX6L_RY_iDfb92m4jpAtXB=Ot4P5eYUu1LQ@mail.gmail.com>
Subject: About doc and taxo index updates
From: Jorge Riquelme <jriquelme@totex.cl>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
X-Authenticated-User: 139336 jriquelme@totex.cl
X-MT-ID: f4259db4591ca14bff41514f554b8b601684e5c1
X-MT-INTERNAL-ID: f4259db4591ca14bff41514f554b8b601684e5c1
X-Virus-Checked: Checked by ClamAV on apache.org

Hi people,

I'm pretty new to Lucene, but with the help of the mighty  google
(wich knows everything) I was able to implement a text+faceted search,
with progressive refinement. The problem is that I built the document
and taxo index in a batch process, and since then the searches have
been running with those indexes without any modification. Now, I need
to re-index some documents, and update the document and taxo index,
keeping the searches active for the users (and reflecting the changes
immediately... or as soon as possible).

I've been struggling with the javadocs, but I haven't found any way to
achieve what I want (because I don't know where to look for sure).
Besides that, I read some posts in http://blog.mikemccandless.com;
specifically the SearcherManager class seems to be a partial solution
to my problem, but I don't how to make it work with the facets. I'm
aware of LUCENE-3786, but I couldn't find the class or anything
related in the Lucene version with which I'm working with (4.0.0).

I would appreciate some advice, maybe an example (xD), or at least
some tips of which classes I have to look.

best regards

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54880-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Jan 25 16:33:50 2013
Return-Path: <java-user-return-54880-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 65238EFE0
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 25 Jan 2013 16:33:50 +0000 (UTC)
Received: (qmail 19698 invoked by uid 500); 25 Jan 2013 16:33:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19519 invoked by uid 500); 25 Jan 2013 16:33:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19507 invoked by uid 99); 25 Jan 2013 16:33:47 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Jan 2013 16:33:47 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.160.51] (HELO mail-pb0-f51.google.com) (209.85.160.51)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Jan 2013 16:33:42 +0000
Received: by mail-pb0-f51.google.com with SMTP id ro12so302901pbb.24
        for <java-user@lucene.apache.org>; Fri, 25 Jan 2013 08:33:20 -0800 (PST)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=x-received:mime-version:in-reply-to:references:from:date:message-id
         :subject:to:content-type:x-gm-message-state;
        bh=AVb5Gz7ozRpWedaY32lAZ7SBtIWQ+CQK2ZhzRgBJKwc=;
        b=a+uarTRdVtO5wPoqM0DG7yBv1G9nuO8FZ+uAfGSVgDDw0kOp8yyY0tFKa+1a+/GdGn
         RNs9fh8aI7InCAsp8bo22QZLB31ma4TqXGfHpyW2Y7FgJ1PWQ98vgBDD7+lBZWIgWWsU
         rRU67UzYnufGuqJkkjNAfuOtL+hd7aJKL0HIkULxbw7crFodL56gLgUq9xRwQXKJe8YA
         xdeqzGpGLXVNiGm4erFRToWodsYkncbCjhWodYyB05v1MpThoeRaXOQnE8LPUkmmb1rU
         d4YkB5EnFAKlu4Kctoq4mr7/WkZQFMpbgxZa9CLIfQz585zgnbJPz9wDKJihRD/h5Z/4
         E+vw==
X-Received: by 10.69.1.65 with SMTP id be1mr15715001pbd.66.1359131600605; Fri,
 25 Jan 2013 08:33:20 -0800 (PST)
MIME-Version: 1.0
Received: by 10.68.154.73 with HTTP; Fri, 25 Jan 2013 08:33:00 -0800 (PST)
In-Reply-To: <CAD86vg7T93KNaaCVX6L_RY_iDfb92m4jpAtXB=Ot4P5eYUu1LQ@mail.gmail.com>
References: <CAD86vg7T93KNaaCVX6L_RY_iDfb92m4jpAtXB=Ot4P5eYUu1LQ@mail.gmail.com>
From: Michael McCandless <lucene@mikemccandless.com>
Date: Fri, 25 Jan 2013 11:33:00 -0500
Message-ID: <CAL8Pwka+RhWjt+8mRXMPO45ZSr91x8bUUBSPh1fAKRjb=8=Tdw@mail.gmail.com>
Subject: Re: About doc and taxo index updates
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Gm-Message-State: ALoCoQkiflvxKtCzNnxprCkGhnyg+DobdMMIEiZJ6hK8SfwXkjNuOEs+Sqx1wkmctWtkeqJ8Oovx
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

As of Lucene 4.1, DirectoryTaxonomyReader has been fixed to also be
near-real-time; see https://issues.apache.org/jira/browse/LUCENE-3441

Are you able to upgrade to 4.1?

Mike McCandless

http://blog.mikemccandless.com

On Fri, Jan 25, 2013 at 11:28 AM, Jorge Riquelme <jriquelme@totex.cl> wrote:
> Hi people,
>
> I'm pretty new to Lucene, but with the help of the mighty  google
> (wich knows everything) I was able to implement a text+faceted search,
> with progressive refinement. The problem is that I built the document
> and taxo index in a batch process, and since then the searches have
> been running with those indexes without any modification. Now, I need
> to re-index some documents, and update the document and taxo index,
> keeping the searches active for the users (and reflecting the changes
> immediately... or as soon as possible).
>
> I've been struggling with the javadocs, but I haven't found any way to
> achieve what I want (because I don't know where to look for sure).
> Besides that, I read some posts in http://blog.mikemccandless.com;
> specifically the SearcherManager class seems to be a partial solution
> to my problem, but I don't how to make it work with the facets. I'm
> aware of LUCENE-3786, but I couldn't find the class or anything
> related in the Lucene version with which I'm working with (4.0.0).
>
> I would appreciate some advice, maybe an example (xD), or at least
> some tips of which classes I have to look.
>
> best regards
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54881-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Jan 25 16:36:34 2013
Return-Path: <java-user-return-54881-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id ECE47EFEC
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 25 Jan 2013 16:36:34 +0000 (UTC)
Received: (qmail 27436 invoked by uid 500); 25 Jan 2013 16:36:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27314 invoked by uid 500); 25 Jan 2013 16:36:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27298 invoked by uid 99); 25 Jan 2013 16:36:32 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Jan 2013 16:36:32 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.220.46] (HELO mail-pa0-f46.google.com) (209.85.220.46)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Jan 2013 16:36:19 +0000
Received: by mail-pa0-f46.google.com with SMTP id kp14so351662pab.33
        for <java-user@lucene.apache.org>; Fri, 25 Jan 2013 08:35:57 -0800 (PST)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=x-received:mime-version:in-reply-to:references:from:date:message-id
         :subject:to:content-type:content-transfer-encoding
         :x-gm-message-state;
        bh=2vW92YRx1T5t7n4cwMWGuYKTeNW8kY9vj9h2/B64bQE=;
        b=O5hIwmUxCOGEuc+sZlIvdG7dMCONYRl5TGkLL34juWSsxLnkvH+cFOW+bUCduq7ShH
         5WpLhLVz6FOKX2XWEUvulVB2TRDCfW8BvFd+YCgw5MIBRsG26GI7TvM8P9PCexRt63Pu
         c0u6wsAPt32OdALe6Adv8K3HEcN4xO9B9GrflkkMNZbGJBBB4tqXAmFypB3qKkkbwfG7
         I43QISL+bQ6q5HJJnZjtMOnHgbZsPjGKfmKiGp67H7yfZmqHvK+5xpGqCmawI2ZqwexP
         6ap/mFMsgkKYvovL5XA3A6dY/VfkY0jYsubQ/ZlbgrkpyuF6yqBJSMYnLDHa+q7jBwJo
         MtCA==
X-Received: by 10.66.72.201 with SMTP id f9mr14803329pav.38.1359131757799;
 Fri, 25 Jan 2013 08:35:57 -0800 (PST)
MIME-Version: 1.0
Received: by 10.68.154.73 with HTTP; Fri, 25 Jan 2013 08:35:37 -0800 (PST)
In-Reply-To: <tencent_61B34FEB679965637E9276D4@qq.com>
References: <tencent_61B34FEB679965637E9276D4@qq.com>
From: Michael McCandless <lucene@mikemccandless.com>
Date: Fri, 25 Jan 2013 11:35:37 -0500
Message-ID: <CAL8PwkbR=cbsz2QHyHbm+k12a7=3RXpL3nh2zXRSS+w0oVudXQ@mail.gmail.com>
Subject: =?GB2312?B?UmU6ILvYuLSjuiC72Li0o7ogu9i4tKO6ILvYuLSjuiBJbmRleFJlYQ==?=
	=?GB2312?B?ZGVyLm9wZW4gYW5kIENvcnJ1cHRJbmRleEV4Y2VwdGlvbg==?=
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Gm-Message-State: ALoCoQlYtz9G0Gn+1dIbkklfwEAPNvLl1o9jnnJsm6Il8EweS/uP4uStxAyoPthzSOzmsbgNLVLO
X-Virus-Checked: Checked by ClamAV on apache.org

That should work.

Mike McCandless

http://blog.mikemccandless.com


On Fri, Jan 25, 2013 at 11:27 AM, zhoucheng2008 <zhoucheng2008@gmail.com> w=
rote:
> Sorry, I meant this:
>
>
> SearcherManager sm =3D new SearcherManager(dir, new SearcherFactory());
>
>
>
>
> ------------------ =E5=8E=9F=E5=A7=8B=E9=82=AE=E4=BB=B6 -----------------=
-
> =E5=8F=91=E4=BB=B6=E4=BA=BA: "Ian Lea"<ian.lea@gmail.com>;
> =E5=8F=91=E9=80=81=E6=97=B6=E9=97=B4: 2013=E5=B9=B41=E6=9C=8826=E6=97=A5(=
=E6=98=9F=E6=9C=9F=E5=85=AD) =E5=87=8C=E6=99=A80:16
> =E6=94=B6=E4=BB=B6=E4=BA=BA: "java-user"<java-user@lucene.apache.org>;
>
> =E4=B8=BB=E9=A2=98: Re: =E5=9B=9E=E5=A4=8D=EF=BC=9A =E5=9B=9E=E5=A4=8D=EF=
=BC=9A =E5=9B=9E=E5=A4=8D=EF=BC=9A IndexReader.open and CorruptIndexExcepti=
on
>
>
>
>> Is SearcherFactory the same as SearcherManager?
>
> No.
>
>> Ian mentioned a new warmer() solution. Maybe I can try that first.
>
> Really?  Don't remember that.
>
>
> --
> Ian.
>
>> ------------------ =E5=8E=9F=E5=A7=8B=E9=82=AE=E4=BB=B6 ----------------=
--
>> =E5=8F=91=E4=BB=B6=E4=BA=BA: "Michael McCandless"<lucene@mikemccandless.=
com>;
>> =E5=8F=91=E9=80=81=E6=97=B6=E9=97=B4: 2013=E5=B9=B41=E6=9C=8826=E6=97=A5=
(=E6=98=9F=E6=9C=9F=E5=85=AD) =E5=87=8C=E6=99=A80:10
>> =E6=94=B6=E4=BB=B6=E4=BA=BA: "java-user"<java-user@lucene.apache.org>;
>>
>> =E4=B8=BB=E9=A2=98: Re: =E5=9B=9E=E5=A4=8D=EF=BC=9A =E5=9B=9E=E5=A4=8D=
=EF=BC=9A IndexReader.open and CorruptIndexException
>>
>>
>>
>> You can pass null for the SearcherFactory ... then SearcherManager
>> will just do new IndexSearcher(reader) for you.
>>
>> Mike McCandless
>>
>> http://blog.mikemccandless.com
>>
>> On Fri, Jan 25, 2013 at 9:30 AM, zhoucheng2008 <zhoucheng2008@gmail.com>=
 wrote:
>>> SearcherManager mgr =3D new SearcherManager(dir, new MySearchWarmer());=
Can I put null as the second parameter in the SearcherManager constructor?I=
f not, how to create a MySearchWarmer instance? The following explanation d=
oesn't provide sufficient info:
>>>  class MySearchWarmer implements SearchWarmer {     @Override     publi=
c void warm(IndexSearcher searcher) throws IOException {       // Run some =
diverse searches, searching and sorting against all       // fields that ar=
e used by your application     }   }
>>>
>>>
>>>
>>>
>>>
>>>
>>> ------------------ =E5=8E=9F=E5=A7=8B=E9=82=AE=E4=BB=B6 ---------------=
---
>>> =E5=8F=91=E4=BB=B6=E4=BA=BA: "Michael McCandless"<lucene@mikemccandless=
.com>;
>>> =E5=8F=91=E9=80=81=E6=97=B6=E9=97=B4: 2013=E5=B9=B41=E6=9C=8825=E6=97=
=A5(=E6=98=9F=E6=9C=9F=E4=BA=94) =E6=99=9A=E4=B8=8A9:26
>>> =E6=94=B6=E4=BB=B6=E4=BA=BA: "java-user"<java-user@lucene.apache.org>;
>>>
>>> =E4=B8=BB=E9=A2=98: Re: =E5=9B=9E=E5=A4=8D=EF=BC=9A IndexReader.open an=
d CorruptIndexException
>>>
>>>
>>>
>>> Maybe here?:
>>>
>>>     http://blog.mikemccandless.com/2011/11/near-real-time-readers-with-=
lucenes.html
>>>
>>> Mike McCandless
>>>
>>> http://blog.mikemccandless.com
>>>
>>> On Fri, Jan 25, 2013 at 7:58 AM, Cheng <zhoucheng2008@gmail.com> wrote:
>>>> Any example code for this SearcherManager?
>>>>
>>>> On Fri, Jan 25, 2013 at 3:59 AM, Ian Lea <ian.lea@gmail.com> wrote:
>>>>
>>>>> There will be one file handle for every currently open file.
>>>>>
>>>>> Use SearcherManager and this problem should go away.
>>>>>
>>>>>
>>>>> --
>>>>> Ian.
>>>>>
>>>>>
>>>>> On Thu, Jan 24, 2013 at 6:40 PM, zhoucheng2008 <zhoucheng2008@gmail.c=
om>
>>>>> wrote:
>>>>> > What file handlers did you guy refer to?
>>>>> >
>>>>> >
>>>>> > I opened the index directory only. Is this the file handler? Also, =
how
>>>>> to safely and effectively close the index directory?
>>>>> >
>>>>> >
>>>>> > I found the link's explanation somewhat self-contradictory. After I=
 read
>>>>> it, I am confused if I should close the file handlers in the finally =
block
>>>>> or not. I am using Java.
>>>>> >
>>>>> >
>>>>> >
>>>>> >
>>>>> > ------------------ =E5=8E=9F=E5=A7=8B=E9=82=AE=E4=BB=B6 -----------=
-------
>>>>> > =E5=8F=91=E4=BB=B6=E4=BA=BA: "Ian Lea"<ian.lea@gmail.com>;
>>>>> > =E5=8F=91=E9=80=81=E6=97=B6=E9=97=B4: 2013=E5=B9=B41=E6=9C=8824=E6=
=97=A5(=E6=98=9F=E6=9C=9F=E5=9B=9B) =E4=B8=8B=E5=8D=885:46
>>>>> > =E6=94=B6=E4=BB=B6=E4=BA=BA: "java-user"<java-user@lucene.apache.or=
g>;
>>>>> >
>>>>> > =E4=B8=BB=E9=A2=98: Re: IndexReader.open and CorruptIndexException
>>>>> >
>>>>> >
>>>>> >
>>>>> > Well, raising the limits is one option but there may be better ones=
.
>>>>> >
>>>>> > There's an FAQ entry on this:
>>>>> >
>>>>> http://wiki.apache.org/lucene-java/LuceneFAQ#Why_am_I_getting_an_IOEx=
ception_that_says_.22Too_many_open_files.22.3F
>>>>> >
>>>>> > Take a look at org.apache.lucene.search.SearcherManager "Utility cl=
ass
>>>>> > to safely share IndexSearcher instances across multiple threads".
>>>>> >
>>>>> >
>>>>> > --
>>>>> > Ian.
>>>>> >
>>>>> >
>>>>> > On Thu, Jan 24, 2013 at 9:18 AM, Rafa=C5=82 Ku=C4=87 <r.kuc@solr.pl=
> wrote:
>>>>> >> Hello!
>>>>> >>
>>>>> >> You need to allow the user that is running Lucene to open more fil=
es..
>>>>> >> There are plenty of tutorials available on the web. Modify your
>>>>> >> /etc/security/limits.conf and if for example your user is lucene a=
dd
>>>>> >> the following (or modify if those already exists):
>>>>> >>
>>>>> >> lucene soft nofile 64000
>>>>> >> lucene hard nofile 64000
>>>>> >>
>>>>> >> Relog and run:
>>>>> >>
>>>>> >> sudo -u lucene -s "ulimit -Sn"
>>>>> >>
>>>>> >> To see if the limits are the ones you set. If they are not, check =
if
>>>>> >> you don't have pam_limits.so commented in the /etc/pam.d/
>>>>> >>
>>>>> >> --
>>>>> >> Regards,
>>>>> >>  Rafa=C5=82 Ku=C4=87
>>>>> >>  Sematext :: http://sematext.com/ :: Solr - Lucene - Nutch
>>>>> >>
>>>>> >>> Here is the log:
>>>>> >>
>>>>> >>> Jan 24, 2013 4:10:33 AM
>>>>> >>> org.apache.tomcat.util.net.AprEndpoint$Acceptor run
>>>>> >>> SEVERE: Socket accept failed
>>>>> >>> org.apache.tomcat.jni.Error: 24: Too many open files
>>>>> >>> at org.apache.tomcat.jni.Socket.accept(Native Method)
>>>>> >>> at
>>>>> >>>
>>>>> org.apache.tomcat.util.net.AprEndpoint$Acceptor.run(AprEndpoint.java:=
990)
>>>>> >>> at java.lang.Thread.run(Thread.java:722)
>>>>> >>
>>>>> >>
>>>>> >>
>>>>> >>> Too many open files... How to solve it?
>>>>> >>
>>>>> >>
>>>>> >>> On Tue, Jan 22, 2013 at 10:52 PM, Michael McCandless <
>>>>> >>> lucene@mikemccandless.com> wrote:
>>>>> >>
>>>>> >>>> Can you post the full stack trace of the CorruptIndexException?
>>>>> >>>>
>>>>> >>>> Mike McCandless
>>>>> >>>>
>>>>> >>>> http://blog.mikemccandless.com
>>>>> >>>>
>>>>> >>>> On Tue, Jan 22, 2013 at 8:20 AM, Cheng <zhoucheng2008@gmail.com>
>>>>> wrote:
>>>>> >>>> > Hi,
>>>>> >>>> >
>>>>> >>>> > I run a Lucene application on Tomcat. The app will try to open=
 a
>>>>> Linux
>>>>> >>>> > directory, and sometime returns CorruptIndexException error.
>>>>> >>>> >
>>>>> >>>> > Shortly after I restart Tomcat (nothing else changes), the app=
 can
>>>>> be run
>>>>> >>>> > on the fly. I am using the following statements to open a dire=
ctory:
>>>>> >>>> >
>>>>> >>>> >
>>>>> >>>> >     try {
>>>>> >>>> >       searcher =3D new IndexSearcher(IndexReader.open(new
>>>>> >>>> NIOFSDirectory(new
>>>>> >>>> > File("/home/user/"+ type))));
>>>>> >>>> >     } catch (IOException e) {
>>>>> >>>> >       throw new Exception("[" + type + "] Cannot open index
>>>>> folder...");
>>>>> >>>> >     }
>>>>> >>>> >
>>>>> >>>> > I would like to know how to tackle this problem.
>>>>> >>>> >
>>>>> >>>> > Many thanks!
>>>>> >>>>
>>>>> >>>> ----------------------------------------------------------------=
-----
>>>>> >>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> >>>> For additional commands, e-mail: java-user-help@lucene.apache.or=
g
>>>>> >>>>
>>>>> >>>>
>>>>> >>
>>>>> >>
>>>>> >> ------------------------------------------------------------------=
---
>>>>> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> >> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>> >>
>>>>> >
>>>>> > -------------------------------------------------------------------=
--
>>>>> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> > For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>> ---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54882-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Jan 25 16:52:31 2013
Return-Path: <java-user-return-54882-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 9A766E07A
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 25 Jan 2013 16:52:31 +0000 (UTC)
Received: (qmail 64687 invoked by uid 500); 25 Jan 2013 16:52:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64601 invoked by uid 500); 25 Jan 2013 16:52:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64446 invoked by uid 99); 25 Jan 2013 16:52:22 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Jan 2013 16:52:22 +0000
X-ASF-Spam-Status: No, hits=2.9 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [212.82.109.195] (HELO nm24-vm4.bullet.mail.ird.yahoo.com) (212.82.109.195)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 25 Jan 2013 16:52:13 +0000
Received: from [212.82.105.224] by nm24.bullet.mail.ird.yahoo.com with NNFMP; 25 Jan 2013 16:51:51 -0000
Received: from [212.82.108.238] by tm20.bullet.mail.ird.yahoo.com with NNFMP; 25 Jan 2013 16:51:51 -0000
Received: from [127.0.0.1] by omp1003.mail.ird.yahoo.com with NNFMP; 25 Jan 2013 16:51:50 -0000
X-Yahoo-Newman-Property: ymail-3
X-Yahoo-Newman-Id: 979037.79079.bm@omp1003.mail.ird.yahoo.com
Received: (qmail 84909 invoked by uid 60001); 25 Jan 2013 16:51:50 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.co.uk; s=s1024; t=1359132710; bh=W3rFKgtePXOq9tWG/YaPbVZijlSkKXrHmUrzbApbXac=; h=X-YMail-OSG:Received:X-Rocket-MIMEInfo:X-Mailer:References:Message-ID:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type; b=XNEmzteIm51MJfjkkhaVwhXE0Upe2cnSPmwZ9O4SWAFcH12++RckjK1Ck4Zabzh+wRixCtP6gj6uyka8dmhJmXFoJ0KCNdEQwRlGTWwm1oASIDLRNImB1cKrvbD4Hx1z5xDgGTKPpEFQZ8h2WH6peHBUOcOQrQIvCqiFhPT4gN8=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=X-YMail-OSG:Received:X-Rocket-MIMEInfo:X-Mailer:References:Message-ID:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=O6TT+7Xqm410Iy2CMsVM7hjXOZvkUoE4rFQ73nB+RZHaUkCHWmuAc70L3caATk96iNqp/kVMk05UIERkzvll1BGRoh0kgNLyWZOqXZ9BJSmMIdH9MKjE5MvneYw2znSHjVeZdfywm7+jraHo5GjFBpnM5S44u3b6wedXGm9HImc=;
X-YMail-OSG: fGcO2jAVM1l9u2eBHlH4qmexsLirLxh0R33GPmH4M3L.e6x
 nWR90wH_72YDtyLGV0wmul8A9HWSmJjD7mi16o3.VLMZyatkYoY9gT6imjVg
 _7BoafaDmBaeu2dr3L_kOz36KQvcvwCCRZjmMeGhLKhEyP2rzOCAuY13_VPu
 _9ET0T1qib6_t1xI1lOIhhaafY..rNsJVBgwVDz57A21k.Ql6.VS4YHXOE40
 1ZlOUm7c4A4gwn3qPSaBZ0bTgJA8VpFhFQy_LK4NOcLwAnoEWIuJ5LCokpSy
 lr56NTQripo81Enw.SdPIXpM.arBnRDNgImbYlUwMlFFKxTiFBRVg6bh1Hsb
 fpmJ4I3xrc4PVI_3nsk_YXZc3xOSnmdn2krEwmdmA6Jn9dN8.Jr4W787ST34
 1.wuroCXBHL0be3jgG_s8N8Pls73fLo0cR1j3vAIcdgNQKVF9EjWljuxdk1I
 Edx_UTTpR_HD6_bYdAAHRTocOKm0PrHJbBWtWgBtaFs_HLvSHxZZYTJVh_39
 4kQ--
Received: from [194.116.198.185] by web171306.mail.ir2.yahoo.com via HTTP; Fri, 25 Jan 2013 16:51:50 GMT
X-Rocket-MIMEInfo: 001.001,QW5zd2VyaW5nIG15IG93biBxdWVzdGlvbiAtIGFkZCBvcHRpb25hbCBuZXcgTWF0Y2hBbGxEb2NzUXVlcnkoInRleHQiKSBjbGF1c2UgdG8gZmFjdG9yIGluIHRoZSBlbmNvZGVkIG5vcm1zIGZyb20gdGhlICJ0ZXh0IiBmaWVsZC4KCgpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwogRnJvbTogbWFyayBoYXJ3b29kIDxtYXJraGFydzAwZEB5YWhvby5jby51az4KVG86ICJqYXZhLXVzZXJAbHVjZW5lLmFwYWNoZS5vcmciIDxqYXZhLXVzZXJAbHVjZW5lLmFwYWNoZS5vcmc.IApTZW50OiBGcmlkYXkBMAEBAQE-
X-Mailer: YahooMailWebService/0.8.130.494
References: <1359130315.61749.YahooMailNeo@web171301.mail.ir2.yahoo.com>
Message-ID: <1359132710.83774.YahooMailNeo@web171306.mail.ir2.yahoo.com>
Date: Fri, 25 Jan 2013 16:51:50 +0000 (GMT)
From: mark harwood <markharw00d@yahoo.co.uk>
Reply-To: mark harwood <markharw00d@yahoo.co.uk>
Subject: Re: 3.6 - querying a no-norms field and getting document boost
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>,
  mark harwood <markharw00d@yahoo.co.uk>
In-Reply-To: <1359130315.61749.YahooMailNeo@web171301.mail.ir2.yahoo.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="-1132928367-1854086181-1359132710=:83774"
X-Virus-Checked: Checked by ClamAV on apache.org

---1132928367-1854086181-1359132710=:83774
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable

Answering my own question - add optional new MatchAllDocsQuery("text") clau=
se to factor in the encoded norms from the "text" field.=0A=0A=0A__________=
______________________=0A From: mark harwood <markharw00d@yahoo.co.uk>=0ATo=
: "java-user@lucene.apache.org" <java-user@lucene.apache.org> =0ASent: Frid=
ay, 25 January 2013, 16:11=0ASubject: 3.6 - querying a no-norms field and g=
etting document boost=0A =0AI have a 3.6 index with many no-norms fields an=
d a single text field with norms (a fairly common configuration). There is =
a document boost I have set at index-time that will have been encoded into =
the text field's norms.=0A=0AIf I query solely on a non-text field then the=
 ranking does not apply the document-level boost.=0A=0AWithout re-indexing =
and adding norms where I don't want them, how do I most elegantly query fie=
ld "A" and factor in the doc-boost already recorded in the "text" field's n=
orms?=0AI appreciate DocValues in 4.x helps in this regard but looking for =
a clean/fast 3.6-based solution.=0A=0AAny suggestions?
---1132928367-1854086181-1359132710=:83774--

From java-user-return-54883-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Jan 25 16:59:20 2013
Return-Path: <java-user-return-54883-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id D8DDDE0A2
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 25 Jan 2013 16:59:20 +0000 (UTC)
Received: (qmail 84315 invoked by uid 500); 25 Jan 2013 16:59:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84263 invoked by uid 500); 25 Jan 2013 16:59:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84255 invoked by uid 99); 25 Jan 2013 16:59:18 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Jan 2013 16:59:18 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of linlma@gmail.com designates 209.85.220.180 as permitted sender)
Received: from [209.85.220.180] (HELO mail-vc0-f180.google.com) (209.85.220.180)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Jan 2013 16:59:12 +0000
Received: by mail-vc0-f180.google.com with SMTP id fo13so430088vcb.39
        for <java-user@lucene.apache.org>; Fri, 25 Jan 2013 08:58:51 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:x-received:date:message-id:subject:from:to
         :content-type;
        bh=aVy+5wUWMTKyLz8cMnnhWgx9ZP2ZJibOpyYpDNgLSw8=;
        b=SgcsWYuE/FRtwrZUv8iDlJri+fOXJ0pczgSIPPOPqyeIttfXtTjkVqtCXyVa+bpHJn
         V7mk6eroRUx0aM5oarzMVk3TNm3q5bpaSYglKBRiAQycg/xFCktHArA4SsGmSsWZk6jT
         u7Ldl/t5l+fT1BKJEvuqgdX8T74KaQeNHbayjJht4LMsx7j9NafoMBwEo8IzAorzYPAd
         yzz6hBGKdenpEOgCLFx4C2wslyxarKbp/xakjl1TTAwvvBEyeElUm11DrXzlqp5XXqOh
         gK0eN4L+GsaSsAB6VtGrCh8Pgr55DSKD33tvvFZtj925C/KyRNtHacr3tzhsBGZEoCMV
         CXzg==
MIME-Version: 1.0
X-Received: by 10.220.156.197 with SMTP id y5mr6655560vcw.17.1359133110472;
 Fri, 25 Jan 2013 08:58:30 -0800 (PST)
Received: by 10.58.156.39 with HTTP; Fri, 25 Jan 2013 08:58:30 -0800 (PST)
Date: Sat, 26 Jan 2013 00:58:30 +0800
Message-ID: <CAK_MoSvqp=fH+Bq=1GERs_4+F526VUAxBeY3tjq7mWWqr6R-Fw@mail.gmail.com>
Subject: about isStored method
From: Lin Ma <linlma@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=f46d042f9110408e5904d41fd674
X-Virus-Checked: Checked by ClamAV on apache.org

--f46d042f9110408e5904d41fd674
Content-Type: text/plain; charset=ISO-8859-1

Hi guys,

I am new to Lucene and for isStored method for interface Fieldable (
http://lucene.apache.org/core/old_versioned_docs/versions/3_0_3/api/core/index.html),
what are the logical meanings for stored and not stored? It is appreciate
if anyone could show me an example. I searched many tutorials but not found
description for what means stored and what means not stored.

thanks in advance,
Lin

--f46d042f9110408e5904d41fd674--

From java-user-return-54884-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Jan 25 17:19:34 2013
Return-Path: <java-user-return-54884-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 28B2BE12B
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 25 Jan 2013 17:19:34 +0000 (UTC)
Received: (qmail 38564 invoked by uid 500); 25 Jan 2013 17:19:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38520 invoked by uid 500); 25 Jan 2013 17:19:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38512 invoked by uid 99); 25 Jan 2013 17:19:31 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Jan 2013 17:19:31 +0000
X-ASF-Spam-Status: No, hits=1.9 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FROM_EXCESS_BASE64,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of zhoucheng2008@gmail.com designates 209.85.220.42 as permitted sender)
Received: from [209.85.220.42] (HELO mail-pa0-f42.google.com) (209.85.220.42)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Jan 2013 17:19:25 +0000
Received: by mail-pa0-f42.google.com with SMTP id rl6so377103pac.29
        for <java-user@lucene.apache.org>; Fri, 25 Jan 2013 09:19:05 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=x-received:x-qq-ssf:x-has-attach:x-qq-business-origin
         :x-originating-ip:x-qq-style:x-qq-mid:from:to:subject:mime-version
         :content-type:content-transfer-encoding:date:x-priority:message-id
         :x-qq-mime:x-mailer:x-qq-mailer:x-qq-replyhash;
        bh=AChDr+BSDMO3a0Cx745cGXYXApElLquGxxnFmoLsNeI=;
        b=H5d313oBLrcCNBlFOIL4n2IIGqcMHJxN9E3Ct5fdj7W+j8xE9HCkMGT0ugox3zvlU0
         crRHJwXsGpl0jfuEpWaeRtZskbq4u40Q8sXZCiHGsqYeaSP/vCZrrysvfuFvQ1xPyA9y
         Kb6JgFu2G1/dEj08yRg9mU6L+TqeQVqRGH4ODI2SYVksq2TawCWseGiBtSIkjtoUgCE9
         QrSKrgTdAwoKN36wRVRmaF4dCX246lTeqkhTJZAYez6+yG2qpdtWEBTlsM79446G7qtv
         62joFCuD7Iwx0F1o/uBgsUFP7v1U4bCxzue1A6Vry3eSdQYuVJkFZ62jW/bvN3G7noWe
         NTqQ==
X-Received: by 10.68.203.137 with SMTP id kq9mr15667769pbc.115.1359134345549;
        Fri, 25 Jan 2013 09:19:05 -0800 (PST)
Received: from smtpbg297.qq.com (smtpbg297.qq.com. [184.105.67.100])
        by mx.google.com with ESMTPS id pl10sm987958pbc.60.2013.01.25.09.19.03
        (version=TLSv1 cipher=RC4-SHA bits=128/128);
        Fri, 25 Jan 2013 09:19:04 -0800 (PST)
X-QQ-SSF: 000000000000004000000000000000X
X-HAS-ATTACH: no
X-QQ-BUSINESS-ORIGIN: 2
X-Originating-IP: 122.231.199.49
X-QQ-STYLE: 
X-QQ-mid: webmail661t1359134338t8371287
From: "=?utf-8?B?emhvdWNoZW5nMjAwOA==?=" <zhoucheng2008@gmail.com>
To: "=?utf-8?B?amF2YS11c2Vy?=" <java-user@lucene.apache.org>
Subject: =?utf-8?B?5Zue5aSN77yaIOWbnuWkje+8miDlm57lpI3vvJog?=
 =?utf-8?B?5Zue5aSN77yaIOWbnuWkje+8miBJbmRleFJlYWRl?=
 =?utf-8?B?ci5vcGVuIGFuZCBDb3JydXB0SW5kZXhFeGNlcHRp?=
 =?utf-8?B?b24=?=
Mime-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_5102BE82_08B95370_680B2A68"
Content-Transfer-Encoding: 8Bit
Date: Sat, 26 Jan 2013 01:18:58 +0800
X-Priority: 3
Message-ID: <tencent_6671F023402EE46C211E2B14@qq.com>
X-QQ-MIME: TCMime 1.0 by Tencent
X-Mailer: QQMail 2.x
X-QQ-Mailer: QQMail 2.x
X-QQ-ReplyHash: 3384500446
X-Virus-Checked: Checked by ClamAV on apache.org

------=_NextPart_5102BE82_08B95370_680B2A68
Content-Type: text/plain;
	charset="utf-8"
Content-Transfer-Encoding: base64

U2VhcmNoZXJNYW5hZ2VyIHNtID0gbmV3IFNlYXJjaGVyTWFuYWdlcihkaXIsIG5ldyBTZWFy
Y2hlckZhY3RvcnkoKSk7DQoNCg0KbmV3IFNlYXJjaEZhY3RvcnkoKSBpcyBub3QgcmVjb2du
aXplZCBpbiBteSBsdWNlbmUuIGFza2VkIHRvIGNoYW5nZSB0byBTZWFyY2hlcldhcm1lci4g
V2h5Pw0KDQoNCkkgaGF2ZSAzLjUNCg0KDQoNCg0KLS0tLS0tLS0tLS0tLS0tLS0tIOWOn+Wn
i+mCruS7tiAtLS0tLS0tLS0tLS0tLS0tLS0NCuWPkeS7tuS6ujogIk1pY2hhZWwgTWNDYW5k
bGVzcyI8bHVjZW5lQG1pa2VtY2NhbmRsZXNzLmNvbT47DQrlj5HpgIHml7bpl7Q6IDIwMTPl
ubQx5pyIMjbml6Uo5pif5pyf5YWtKSDlh4zmmagwOjM1DQrmlLbku7bkuro6ICJqYXZhLXVz
ZXIiPGphdmEtdXNlckBsdWNlbmUuYXBhY2hlLm9yZz47IA0KDQrkuLvpopg6IFJlOiDlm57l
pI3vvJog5Zue5aSN77yaIOWbnuWkje+8miDlm57lpI3vvJogSW5kZXhSZWFkZXIub3BlbiBh
bmQgQ29ycnVwdEluZGV4RXhjZXB0aW9uDQoNCg0KDQpUaGF0IHNob3VsZCB3b3JrLg0KDQpN
aWtlIE1jQ2FuZGxlc3MNCg0KaHR0cDovL2Jsb2cubWlrZW1jY2FuZGxlc3MuY29tDQoNCg0K
T24gRnJpLCBKYW4gMjUsIDIwMTMgYXQgMTE6MjcgQU0sIHpob3VjaGVuZzIwMDggPHpob3Vj
aGVuZzIwMDhAZ21haWwuY29tPiB3cm90ZToNCj4gU29ycnksIEkgbWVhbnQgdGhpczoNCj4N
Cj4NCj4gU2VhcmNoZXJNYW5hZ2VyIHNtID0gbmV3IFNlYXJjaGVyTWFuYWdlcihkaXIsIG5l
dyBTZWFyY2hlckZhY3RvcnkoKSk7DQo+DQo+DQo+DQo+DQo+IC0tLS0tLS0tLS0tLS0tLS0t
LSDljp/lp4vpgq7ku7YgLS0tLS0tLS0tLS0tLS0tLS0tDQo+IOWPkeS7tuS6ujogIklhbiBM
ZWEiPGlhbi5sZWFAZ21haWwuY29tPjsNCj4g5Y+R6YCB5pe26Ze0OiAyMDEz5bm0MeaciDI2
5pelKOaYn+acn+WFrSkg5YeM5pmoMDoxNg0KPiDmlLbku7bkuro6ICJqYXZhLXVzZXIiPGph
dmEtdXNlckBsdWNlbmUuYXBhY2hlLm9yZz47DQo+DQo+IOS4u+mimDogUmU6IOWbnuWkje+8
miDlm57lpI3vvJog5Zue5aSN77yaIEluZGV4UmVhZGVyLm9wZW4gYW5kIENvcnJ1cHRJbmRl
eEV4Y2VwdGlvbg0KPg0KPg0KPg0KPj4gSXMgU2VhcmNoZXJGYWN0b3J5IHRoZSBzYW1lIGFz
IFNlYXJjaGVyTWFuYWdlcj8NCj4NCj4gTm8uDQo+DQo+PiBJYW4gbWVudGlvbmVkIGEgbmV3
IHdhcm1lcigpIHNvbHV0aW9uLiBNYXliZSBJIGNhbiB0cnkgdGhhdCBmaXJzdC4NCj4NCj4g
UmVhbGx5PyAgRG9uJ3QgcmVtZW1iZXIgdGhhdC4NCj4NCj4NCj4gLS0NCj4gSWFuLg0KPg0K
Pj4gLS0tLS0tLS0tLS0tLS0tLS0tIOWOn+Wni+mCruS7tiAtLS0tLS0tLS0tLS0tLS0tLS0N
Cj4+IOWPkeS7tuS6ujogIk1pY2hhZWwgTWNDYW5kbGVzcyI8bHVjZW5lQG1pa2VtY2NhbmRs
ZXNzLmNvbT47DQo+PiDlj5HpgIHml7bpl7Q6IDIwMTPlubQx5pyIMjbml6Uo5pif5pyf5YWt
KSDlh4zmmagwOjEwDQo+PiDmlLbku7bkuro6ICJqYXZhLXVzZXIiPGphdmEtdXNlckBsdWNl
bmUuYXBhY2hlLm9yZz47DQo+Pg0KPj4g5Li76aKYOiBSZTog5Zue5aSN77yaIOWbnuWkje+8
miBJbmRleFJlYWRlci5vcGVuIGFuZCBDb3JydXB0SW5kZXhFeGNlcHRpb24NCj4+DQo+Pg0K
Pj4NCj4+IFlvdSBjYW4gcGFzcyBudWxsIGZvciB0aGUgU2VhcmNoZXJGYWN0b3J5IC4uLiB0
aGVuIFNlYXJjaGVyTWFuYWdlcg0KPj4gd2lsbCBqdXN0IGRvIG5ldyBJbmRleFNlYXJjaGVy
KHJlYWRlcikgZm9yIHlvdS4NCj4+DQo+PiBNaWtlIE1jQ2FuZGxlc3MNCj4+DQo+PiBodHRw
Oi8vYmxvZy5taWtlbWNjYW5kbGVzcy5jb20NCj4+DQo+PiBPbiBGcmksIEphbiAyNSwgMjAx
MyBhdCA5OjMwIEFNLCB6aG91Y2hlbmcyMDA4IDx6aG91Y2hlbmcyMDA4QGdtYWlsLmNvbT4g
d3JvdGU6DQo+Pj4gU2VhcmNoZXJNYW5hZ2VyIG1nciA9IG5ldyBTZWFyY2hlck1hbmFnZXIo
ZGlyLCBuZXcgTXlTZWFyY2hXYXJtZXIoKSk7Q2FuIEkgcHV0IG51bGwgYXMgdGhlIHNlY29u
ZCBwYXJhbWV0ZXIgaW4gdGhlIFNlYXJjaGVyTWFuYWdlciBjb25zdHJ1Y3Rvcj9JZiBub3Qs
IGhvdyB0byBjcmVhdGUgYSBNeVNlYXJjaFdhcm1lciBpbnN0YW5jZT8gVGhlIGZvbGxvd2lu
ZyBleHBsYW5hdGlvbiBkb2Vzbid0IHByb3ZpZGUgc3VmZmljaWVudCBpbmZvOg0KPj4+ICBj
bGFzcyBNeVNlYXJjaFdhcm1lciBpbXBsZW1lbnRzIFNlYXJjaFdhcm1lciB7ICAgICBAT3Zl
cnJpZGUgICAgIHB1YmxpYyB2b2lkIHdhcm0oSW5kZXhTZWFyY2hlciBzZWFyY2hlcikgdGhy
b3dzIElPRXhjZXB0aW9uIHsgICAgICAgLy8gUnVuIHNvbWUgZGl2ZXJzZSBzZWFyY2hlcywg
c2VhcmNoaW5nIGFuZCBzb3J0aW5nIGFnYWluc3QgYWxsICAgICAgIC8vIGZpZWxkcyB0aGF0
IGFyZSB1c2VkIGJ5IHlvdXIgYXBwbGljYXRpb24gICAgIH0gICB9DQo+Pj4NCj4+Pg0KPj4+
DQo+Pj4NCj4+Pg0KPj4+DQo+Pj4gLS0tLS0tLS0tLS0tLS0tLS0tIOWOn+Wni+mCruS7tiAt
LS0tLS0tLS0tLS0tLS0tLS0NCj4+PiDlj5Hku7bkuro6ICJNaWNoYWVsIE1jQ2FuZGxlc3Mi
PGx1Y2VuZUBtaWtlbWNjYW5kbGVzcy4uY29tPjsNCj4+PiDlj5HpgIHml7bpl7Q6IDIwMTPl
ubQx5pyIMjXml6Uo5pif5pyf5LqUKSDmmZrkuIo5OjI2DQo+Pj4g5pS25Lu25Lq6OiAiamF2
YS11c2VyIjxqYXZhLXVzZXJAbHVjZW5lLmFwYWNoZS5vcmc+Ow0KPj4+DQo+Pj4g5Li76aKY
OiBSZTog5Zue5aSN77yaIEluZGV4UmVhZGVyLm9wZW4gYW5kIENvcnJ1cHRJbmRleEV4Y2Vw
dGlvbg0KPj4+DQo+Pj4NCj4+Pg0KPj4+IE1heWJlIGhlcmU/Og0KPj4+DQo+Pj4gICAgIGh0
dHA6Ly9ibG9nLm1pa2VtY2NhbmRsZXNzLmNvbS8yMDExLzExL25lYXItcmVhbC10aW1lLXJl
YWRlcnMtd2l0aC1sdWNlbmVzLmh0bWwNCj4+Pg0KPj4+IE1pa2UgTWNDYW5kbGVzcw0KPj4+
DQo+Pj4gaHR0cDovL2Jsb2cubWlrZW1jY2FuZGxlc3MuY29tDQo+Pj4NCj4+PiBPbiBGcmks
IEphbiAyNSwgMjAxMyBhdCA3OjU4IEFNLCBDaGVuZyA8emhvdWNoZW5nMjAwOEBnbWFpbC5j
b20+IHdyb3RlOg0KPj4+PiBBbnkgZXhhbXBsZSBjb2RlIGZvciB0aGlzIFNlYXJjaGVyTWFu
YWdlcj8NCj4+Pj4NCj4+Pj4gT24gRnJpLCBKYW4gMjUsIDIwMTMgYXQgMzo1OSBBTSwgSWFu
IExlYSA8aWFuLmxlYUBnbWFpbC5jb20+IHdyb3RlOg0KPj4+Pg0KPj4+Pj4gVGhlcmUgd2ls
bCBiZSBvbmUgZmlsZSBoYW5kbGUgZm9yIGV2ZXJ5IGN1cnJlbnRseSBvcGVuIGZpbGUuDQo+
Pj4+Pg0KPj4+Pj4gVXNlIFNlYXJjaGVyTWFuYWdlciBhbmQgdGhpcyBwcm9ibGVtIHNob3Vs
ZCBnbyBhd2F5Lg0KPj4+Pj4NCj4+Pj4+DQo+Pj4+PiAtLQ0KPj4+Pj4gSWFuLg0KPj4+Pj4N
Cj4+Pj4+DQo+Pj4+PiBPbiBUaHUsIEphbiAyNCwgMjAxMyBhdCA2OjQwIFBNLCB6aG91Y2hl
bmcyMDA4IDx6aG91Y2hlbmcyMDA4QGdtYWlsLmNvbT4NCj4+Pj4+IHdyb3RlOg0KPj4+Pj4g
PiBXaGF0IGZpbGUgaGFuZGxlcnMgZGlkIHlvdSBndXkgcmVmZXIgdG8/DQo+Pj4+PiA+DQo+
Pj4+PiA+DQo+Pj4+PiA+IEkgb3BlbmVkIHRoZSBpbmRleCBkaXJlY3Rvcnkgb25seS4gSXMg
dGhpcyB0aGUgZmlsZSBoYW5kbGVyPyBBbHNvLCBob3cNCj4+Pj4+IHRvIHNhZmVseSBhbmQg
ZWZmZWN0aXZlbHkgY2xvc2UgdGhlIGluZGV4IGRpcmVjdG9yeT8NCj4+Pj4+ID4NCj4+Pj4+
ID4NCj4+Pj4+ID4gSSBmb3VuZCB0aGUgbGluaydzIGV4cGxhbmF0aW9uIHNvbWV3aGF0IHNl
bGYtY29udHJhZGljdG9yeS4gQWZ0ZXIgSSByZWFkDQo+Pj4+PiBpdCwgSSBhbSBjb25mdXNl
ZCBpZiBJIHNob3VsZCBjbG9zZSB0aGUgZmlsZSBoYW5kbGVycyBpbiB0aGUgZmluYWxseSBi
bG9jaw0KPj4+Pj4gb3Igbm90LiBJIGFtIHVzaW5nIEphdmEuDQo+Pj4+PiA+DQo+Pj4+PiA+
DQo+Pj4+PiA+DQo+Pj4+PiA+DQo+Pj4+PiA+IC0tLS0tLS0tLS0tLS0tLS0tLSDljp/lp4vp
gq7ku7YgLS0tLS0tLS0tLS0tLS0tLS0tDQo+Pj4+PiA+IOWPkeS7tuS6ujogIklhbiBMZWEi
PGlhbi5sZWFAZ21haWwuY29tPjsNCj4+Pj4+ID4g5Y+R6YCB5pe26Ze0OiAyMDEz5bm0Meac
iDI05pelKOaYn+acn+Wbmykg5LiL5Y2INTo0Ng0KPj4+Pj4gPiDmlLbku7bkuro6ICJqYXZh
LXVzZXIiPGphdmEtdXNlckBsdWNlbmUuYXBhY2hlLm9yZz47DQo+Pj4+PiA+DQo+Pj4+PiA+
IOS4u+mimDogUmU6IEluZGV4UmVhZGVyLm9wZW4gYW5kIENvcnJ1cHRJbmRleEV4Y2VwdGlv
bg0KPj4+Pj4gPg0KPj4+Pj4gPg0KPj4+Pj4gPg0KPj4+Pj4gPiBXZWxsLCByYWlzaW5nIHRo
ZSBsaW1pdHMgaXMgb25lIG9wdGlvbiBidXQgdGhlcmUgbWF5IGJlIGJldHRlciBvbmVzLi4N
Cj4+Pj4+ID4NCj4+Pj4+ID4gVGhlcmUncyBhbiBGQVEgZW50cnkgb24gdGhpczoNCj4+Pj4+
ID4NCj4+Pj4+IGh0dHA6Ly93aWtpLmFwYWNoZS5vcmcvbHVjZW5lLWphdmEvTHVjZW5lRkFR
I1doeV9hbV9JX2dldHRpbmdfYW5fSU9FeGNlcHRpb25fdGhhdF9zYXlzXy4yMlRvb19tYW55
X29wZW5fZmlsZXMuMjIuM0YNCj4+Pj4+ID4NCj4+Pj4+ID4gVGFrZSBhIGxvb2sgYXQgb3Jn
LmFwYWNoZS5sdWNlbmUuc2VhcmNoLlNlYXJjaGVyTWFuYWdlciAiVXRpbGl0eSBjbGFzcw0K
Pj4+Pj4gPiB0byBzYWZlbHkgc2hhcmUgSW5kZXhTZWFyY2hlciBpbnN0YW5jZXMgYWNyb3Nz
IG11bHRpcGxlIHRocmVhZHMiLg0KPj4+Pj4gPg0KPj4+Pj4gPg0KPj4+Pj4gPiAtLQ0KPj4+
Pj4gPiBJYW4uDQo+Pj4+PiA+DQo+Pj4+PiA+DQo+Pj4+PiA+IE9uIFRodSwgSmFuIDI0LCAy
MDEzIGF0IDk6MTggQU0sIFJhZmHFgiBLdcSHIDxyLmt1Y0Bzb2xyLnBsPiB3cm90ZToNCj4+
Pj4+ID4+IEhlbGxvIQ0KPj4+Pj4gPj4NCj4+Pj4+ID4+IFlvdSBuZWVkIHRvIGFsbG93IHRo
ZSB1c2VyIHRoYXQgaXMgcnVubmluZyBMdWNlbmUgdG8gb3BlbiBtb3JlIGZpbGVzLi4NCj4+
Pj4+ID4+IFRoZXJlIGFyZSBwbGVudHkgb2YgdHV0b3JpYWxzIGF2YWlsYWJsZSBvbiB0aGUg
d2ViLiBNb2RpZnkgeW91cg0KPj4+Pj4gPj4gL2V0Yy9zZWN1cml0eS9saW1pdHMuY29uZiBh
bmQgaWYgZm9yIGV4YW1wbGUgeW91ciB1c2VyIGlzIGx1Y2VuZSBhZGQNCj4+Pj4+ID4+IHRo
ZSBmb2xsb3dpbmcgKG9yIG1vZGlmeSBpZiB0aG9zZSBhbHJlYWR5IGV4aXN0cyk6DQo+Pj4+
PiA+Pg0KPj4+Pj4gPj4gbHVjZW5lIHNvZnQgbm9maWxlIDY0MDAwDQo+Pj4+PiA+PiBsdWNl
bmUgaGFyZCBub2ZpbGUgNjQwMDANCj4+Pj4+ID4+DQo+Pj4+PiA+PiBSZWxvZyBhbmQgcnVu
Og0KPj4+Pj4gPj4NCj4+Pj4+ID4+IHN1ZG8gLXUgbHVjZW5lIC1zICJ1bGltaXQgLVNuIg0K
Pj4+Pj4gPj4NCj4+Pj4+ID4+IFRvIHNlZSBpZiB0aGUgbGltaXRzIGFyZSB0aGUgb25lcyB5
b3Ugc2V0LiBJZiB0aGV5IGFyZSBub3QsIGNoZWNrIGlmDQo+Pj4+PiA+PiB5b3UgZG9uJ3Qg
aGF2ZSBwYW1fbGltaXRzLnNvIGNvbW1lbnRlZCBpbiB0aGUgL2V0Yy9wYW0uZC8NCj4+Pj4+
ID4+DQo+Pj4+PiA+PiAtLQ0KPj4+Pj4gPj4gUmVnYXJkcywNCj4+Pj4+ID4+ICBSYWZhxYIg
S3XEhw0KPj4+Pj4gPj4gIFNlbWF0ZXh0IDo6IGh0dHA6Ly9zZW1hdGV4dC5jb20vIDo6IFNv
bHIgLSBMdWNlbmUgLSBOdXRjaA0KPj4+Pj4gPj4NCj4+Pj4+ID4+PiBIZXJlIGlzIHRoZSBs
b2c6DQo+Pj4+PiA+Pg0KPj4+Pj4gPj4+IEphbiAyNCwgMjAxMyA0OjEwOjMzIEFNDQo+Pj4+
PiA+Pj4gb3JnLmFwYWNoZS50b21jYXQudXRpbC5uZXQuQXByRW5kcG9pbnQkQWNjZXB0b3Ig
cnVuDQo+Pj4+PiA+Pj4gU0VWRVJFOiBTb2NrZXQgYWNjZXB0IGZhaWxlZA0KPj4+Pj4gPj4+
IG9yZy5hcGFjaGUudG9tY2F0LmpuaS5FcnJvcjogMjQ6IFRvbyBtYW55IG9wZW4gZmlsZXMN
Cj4+Pj4+ID4+PiBhdCBvcmcuYXBhY2hlLnRvbWNhdC5qbmkuU29ja2V0LmFjY2VwdChOYXRp
dmUgTWV0aG9kKQ0KPj4+Pj4gPj4+IGF0DQo+Pj4+PiA+Pj4NCj4+Pj4+IG9yZy5hcGFjaGUu
dG9tY2F0LnV0aWwubmV0LkFwckVuZHBvaW50JEFjY2VwdG9yLnJ1bihBcHJFbmRwb2ludC5q
YXZhOjk5MCkNCj4+Pj4+ID4+PiBhdCBqYXZhLmxhbmcuVGhyZWFkLnJ1bihUaHJlYWQuamF2
YTo3MjIpDQo+Pj4+PiA+Pg0KPj4+Pj4gPj4NCj4+Pj4+ID4+DQo+Pj4+PiA+Pj4gVG9vIG1h
bnkgb3BlbiBmaWxlcy4uLiBIb3cgdG8gc29sdmUgaXQ/DQo+Pj4+PiA+Pg0KPj4+Pj4gPj4N
Cj4+Pj4+ID4+PiBPbiBUdWUsIEphbiAyMiwgMjAxMyBhdCAxMDo1MiBQTSwgTWljaGFlbCBN
Y0NhbmRsZXNzIDwNCj4+Pj4+ID4+PiBsdWNlbmVAbWlrZW1jY2FuZGxlc3MuY29tPiB3cm90
ZToNCj4+Pj4+ID4+DQo+Pj4+PiA+Pj4+IENhbiB5b3UgcG9zdCB0aGUgZnVsbCBzdGFjayB0
cmFjZSBvZiB0aGUgQ29ycnVwdEluZGV4RXhjZXB0aW9uPw0KPj4+Pj4gPj4+Pg0KPj4+Pj4g
Pj4+PiBNaWtlIE1jQ2FuZGxlc3MNCj4+Pj4+ID4+Pj4NCj4+Pj4+ID4+Pj4gaHR0cDovL2Js
b2cubWlrZW1jY2FuZGxlc3MuY29tDQo+Pj4+PiA+Pj4+DQo+Pj4+PiA+Pj4+IE9uIFR1ZSwg
SmFuIDIyLCAyMDEzIGF0IDg6MjAgQU0sIENoZW5nIDx6aG91Y2hlbmcyMDA4QGdtYWlsLmNv
bT4NCj4+Pj4+IHdyb3RlOg0KPj4+Pj4gPj4+PiA+IEhpLA0KPj4+Pj4gPj4+PiA+DQo+Pj4+
PiA+Pj4+ID4gSSBydW4gYSBMdWNlbmUgYXBwbGljYXRpb24gb24gVG9tY2F0LiBUaGUgYXBw
IHdpbGwgdHJ5IHRvIG9wZW4gYQ0KPj4+Pj4gTGludXgNCj4+Pj4+ID4+Pj4gPiBkaXJlY3Rv
cnksIGFuZCBzb21ldGltZSByZXR1cm5zIENvcnJ1cHRJbmRleEV4Y2VwdGlvbiBlcnJvci4N
Cj4+Pj4+ID4+Pj4gPg0KPj4+Pj4gPj4+PiA+IFNob3J0bHkgYWZ0ZXIgSSByZXN0YXJ0IFRv
bWNhdCAobm90aGluZyBlbHNlIGNoYW5nZXMpLCB0aGUgYXBwIGNhbg0KPj4+Pj4gYmUgcnVu
DQo+Pj4+PiA+Pj4+ID4gb24gdGhlIGZseS4gSSBhbSB1c2luZyB0aGUgZm9sbG93aW5nIHN0
YXRlbWVudHMgdG8gb3BlbiBhIGRpcmVjdG9yeToNCj4+Pj4+ID4+Pj4gPg0KPj4+Pj4gPj4+
PiA+DQo+Pj4+PiA+Pj4+ID4gICAgIHRyeSB7DQo+Pj4+PiA+Pj4+ID4gICAgICAgc2VhcmNo
ZXIgPSBuZXcgSW5kZXhTZWFyY2hlcihJbmRleFJlYWRlci5vcGVuKG5ldw0KPj4+Pj4gPj4+
PiBOSU9GU0RpcmVjdG9yeShuZXcNCj4+Pj4+ID4+Pj4gPiBGaWxlKCIvaG9tZS91c2VyLyIr
IHR5cGUpKSkpOw0KPj4+Pj4gPj4+PiA+ICAgICB9IGNhdGNoIChJT0V4Y2VwdGlvbiBlKSB7
DQo+Pj4+PiA+Pj4+ID4gICAgICAgdGhyb3cgbmV3IEV4Y2VwdGlvbigiWyIgKyB0eXBlICsg
Il0gQ2Fubm90IG9wZW4gaW5kZXgNCj4+Pj4+IGZvbGRlci4uLiIpOw0KPj4+Pj4gPj4+PiA+
ICAgICB9DQo+Pj4+PiA+Pj4+ID4NCj4+Pj4+ID4+Pj4gPiBJIHdvdWxkIGxpa2UgdG8ga25v
dyBob3cgdG8gdGFja2xlIHRoaXMgcHJvYmxlbS4NCj4+Pj4+ID4+Pj4gPg0KPj4+Pj4gPj4+
PiA+IE1hbnkgdGhhbmtzIQ0KPj4+Pj4gPj4+Pg0KPj4+Pj4gPj4+PiAtLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0NCj4+Pj4+ID4+Pj4gVG8gdW5zdWJzY3JpYmUsIGUtbWFpbDogamF2YS11c2VyLXVuc3Vi
c2NyaWJlQGx1Y2VuZS5hcGFjaGUub3JnDQo+Pj4+PiA+Pj4+IEZvciBhZGRpdGlvbmFsIGNv
bW1hbmRzLCBlLW1haWw6IGphdmEtdXNlci1oZWxwQGx1Y2VuZS5hcGFjaGUub3JnDQo+Pj4+
PiA+Pj4+DQo+Pj4+PiA+Pj4+DQo+Pj4+PiA+Pg0KPj4+Pj4gPj4NCj4+Pj4+ID4+IC0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLQ0KPj4+Pj4gPj4gVG8gdW5zdWJzY3JpYmUsIGUtbWFpbDogamF2YS11c2Vy
LXVuc3Vic2NyaWJlQGx1Y2VuZS5hcGFjaGUub3JnDQo+Pj4+PiA+PiBGb3IgYWRkaXRpb25h
bCBjb21tYW5kcywgZS1tYWlsOiBqYXZhLXVzZXItaGVscEBsdWNlbmUuYXBhY2hlLm9yZw0K
Pj4+Pj4gPj4NCj4+Pj4+ID4NCj4+Pj4+ID4gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQo+Pj4+PiA+IFRv
IHVuc3Vic2NyaWJlLCBlLW1haWw6IGphdmEtdXNlci11bnN1YnNjcmliZUBsdWNlbmUuYXBh
Y2hlLm9yZw0KPj4+Pj4gPiBGb3IgYWRkaXRpb25hbCBjb21tYW5kcywgZS1tYWlsOiBqYXZh
LXVzZXItaGVscEBsdWNlbmUuYXBhY2hlLm9yZw0KPj4+Pj4NCj4+Pj4+IC0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLQ0KPj4+Pj4gVG8gdW5zdWJzY3JpYmUsIGUtbWFpbDogamF2YS11c2VyLXVuc3Vic2Ny
aWJlQGx1Y2VuZS5hcGFjaGUub3JnDQo+Pj4+PiBGb3IgYWRkaXRpb25hbCBjb21tYW5kcywg
ZS1tYWlsOiBqYXZhLXVzZXItaGVscEBsdWNlbmUuYXBhY2hlLm9yZw0KPj4+Pj4NCj4+Pj4+
DQo+Pj4NCj4+PiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCj4+PiBUbyB1bnN1YnNjcmliZSwgZS1tYWls
OiBqYXZhLXVzZXItdW5zdWJzY3JpYmVAbHVjZW5lLmFwYWNoZS5vcmcNCj4+PiBGb3IgYWRk
aXRpb25hbCBjb21tYW5kcywgZS1tYWlsOiBqYXZhLXVzZXItaGVscEBsdWNlbmUuYXBhY2hl
Lm9yZw0KPj4NCj4+IC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KPj4gVG8gdW5zdWJzY3JpYmUsIGUtbWFp
bDogamF2YS11c2VyLXVuc3Vic2NyaWJlQGx1Y2VuZS5hcGFjaGUub3JnDQo+PiBGb3IgYWRk
aXRpb25hbCBjb21tYW5kcywgZS1tYWlsOiBqYXZhLXVzZXItaGVscEBsdWNlbmUuYXBhY2hl
Lm9yZw0KPg0KPiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCj4gVG8gdW5zdWJzY3JpYmUsIGUtbWFpbDog
amF2YS11c2VyLXVuc3Vic2NyaWJlQGx1Y2VuZS5hcGFjaGUub3JnDQo+IEZvciBhZGRpdGlv
bmFsIGNvbW1hbmRzLCBlLW1haWw6IGphdmEtdXNlci1oZWxwQGx1Y2VuZS5hcGFjaGUub3Jn
DQoNCi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLQ0KVG8gdW5zdWJzY3JpYmUsIGUtbWFpbDogamF2YS11c2Vy
LXVuc3Vic2NyaWJlQGx1Y2VuZS5hcGFjaGUub3JnDQpGb3IgYWRkaXRpb25hbCBjb21tYW5k
cywgZS1tYWlsOiBqYXZhLXVzZXItaGVscEBsdWNlbmUuYXBhY2hlLm9yZw==

------=_NextPart_5102BE82_08B95370_680B2A68--


From java-user-return-54885-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Jan 25 19:49:24 2013
Return-Path: <java-user-return-54885-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id D5153D435
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 25 Jan 2013 19:49:24 +0000 (UTC)
Received: (qmail 19950 invoked by uid 500); 25 Jan 2013 19:49:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19875 invoked by uid 500); 25 Jan 2013 19:49:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19867 invoked by uid 99); 25 Jan 2013 19:49:22 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Jan 2013 19:49:22 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ian.lea@gmail.com designates 74.125.82.180 as permitted sender)
Received: from [74.125.82.180] (HELO mail-we0-f180.google.com) (74.125.82.180)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Jan 2013 19:49:16 +0000
Received: by mail-we0-f180.google.com with SMTP id k14so361559wer.11
        for <java-user@lucene.apache.org>; Fri, 25 Jan 2013 11:48:56 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=x-received:mime-version:in-reply-to:references:from:date:message-id
         :subject:to:content-type:content-transfer-encoding;
        bh=EXCE7DpBwbVKmwc2enUDZboMXoNM7/djI8JNerHXlzg=;
        b=SyF+o70DvrLoLPfnd5WAZm40SHOM5Dph0tXlzAf2I0oDimIl/dpbvIjHftiXy0AIHh
         JadNfUpg2XE1KWDlUOcXKNV2CmE+kFPCKOb6JOT9BXeEuRKjT7DmO+mkQkYEGm5sA0Dw
         ZghI0l4xtQfWEDsRCU+O3Fz8FrJLuqivsWP/VLu3nZMOM9ZRVsdaivehRE/xKOADEeF/
         5bbF6IKuFNds4iH1pSiNjyStyPEUTKv+j3A3Y19QjFeSTqT2ahMt18owDkqIaNdMNlOb
         P0RxcZjbZUCEOSGV2KmsyxFohhpmI6oA3wbZdpSi0f+Zo8J8EK5In5m21t6jH8cRJ0DH
         6qzw==
X-Received: by 10.180.87.228 with SMTP id bb4mr10567883wib.31.1359143336383;
 Fri, 25 Jan 2013 11:48:56 -0800 (PST)
MIME-Version: 1.0
Received: by 10.194.57.11 with HTTP; Fri, 25 Jan 2013 11:48:36 -0800 (PST)
In-Reply-To: <tencent_6671F023402EE46C211E2B14@qq.com>
References: <tencent_6671F023402EE46C211E2B14@qq.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Fri, 25 Jan 2013 19:48:36 +0000
Message-ID: <CAEY5pxXTFBfYVvyNGD4kC3mZkaUEfJGk1_ya59bQKb7V2MWQBg@mail.gmail.com>
Subject: =?GB2312?B?UmU6ILvYuLSjuiC72Li0o7ogu9i4tKO6ILvYuLSjuiC72Li0?=
	=?GB2312?B?o7ogSW5kZXhSZWFkZXIub3BlbiBhbmQgQ29ycnVwdEluZGV4RXhjZXB0aW9u?=
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

You didn't tell us until now that you were running an old version of
lucene.  Read the 3.5.0 javadocs for SearcherManager: "warmer - An
optional SearcherWarmer. Pass null if you don't require ...".

Or upgrade.


--
Ian.


On Fri, Jan 25, 2013 at 5:18 PM, zhoucheng2008 <zhoucheng2008@gmail.com> wr=
ote:
> SearcherManager sm =3D new SearcherManager(dir, new SearcherFactory());
>
>
> new SearchFactory() is not recognized in my lucene. asked to change to Se=
archerWarmer. Why?
>
>
> I have 3.5
>
>
>
>
> ------------------ =E5=8E=9F=E5=A7=8B=E9=82=AE=E4=BB=B6 -----------------=
-
> =E5=8F=91=E4=BB=B6=E4=BA=BA: "Michael McCandless"<lucene@mikemccandless.c=
om>;
> =E5=8F=91=E9=80=81=E6=97=B6=E9=97=B4: 2013=E5=B9=B41=E6=9C=8826=E6=97=A5(=
=E6=98=9F=E6=9C=9F=E5=85=AD) =E5=87=8C=E6=99=A80:35
> =E6=94=B6=E4=BB=B6=E4=BA=BA: "java-user"<java-user@lucene.apache.org>;
>
> =E4=B8=BB=E9=A2=98: Re: =E5=9B=9E=E5=A4=8D=EF=BC=9A =E5=9B=9E=E5=A4=8D=EF=
=BC=9A =E5=9B=9E=E5=A4=8D=EF=BC=9A =E5=9B=9E=E5=A4=8D=EF=BC=9A IndexReader.=
open and CorruptIndexException
>
>
>
> That should work.
>
> Mike McCandless
>
> http://blog.mikemccandless.com
>
>
> On Fri, Jan 25, 2013 at 11:27 AM, zhoucheng2008 <zhoucheng2008@gmail.com>=
 wrote:
>> Sorry, I meant this:
>>
>>
>> SearcherManager sm =3D new SearcherManager(dir, new SearcherFactory());
>>
>>
>>
>>
>> ------------------ =E5=8E=9F=E5=A7=8B=E9=82=AE=E4=BB=B6 ----------------=
--
>> =E5=8F=91=E4=BB=B6=E4=BA=BA: "Ian Lea"<ian.lea@gmail.com>;
>> =E5=8F=91=E9=80=81=E6=97=B6=E9=97=B4: 2013=E5=B9=B41=E6=9C=8826=E6=97=A5=
(=E6=98=9F=E6=9C=9F=E5=85=AD) =E5=87=8C=E6=99=A80:16
>> =E6=94=B6=E4=BB=B6=E4=BA=BA: "java-user"<java-user@lucene.apache.org>;
>>
>> =E4=B8=BB=E9=A2=98: Re: =E5=9B=9E=E5=A4=8D=EF=BC=9A =E5=9B=9E=E5=A4=8D=
=EF=BC=9A =E5=9B=9E=E5=A4=8D=EF=BC=9A IndexReader.open and CorruptIndexExce=
ption
>>
>>
>>
>>> Is SearcherFactory the same as SearcherManager?
>>
>> No.
>>
>>> Ian mentioned a new warmer() solution. Maybe I can try that first.
>>
>> Really?  Don't remember that.
>>
>>
>> --
>> Ian.
>>
>>> ------------------ =E5=8E=9F=E5=A7=8B=E9=82=AE=E4=BB=B6 ---------------=
---
>>> =E5=8F=91=E4=BB=B6=E4=BA=BA: "Michael McCandless"<lucene@mikemccandless=
.com>;
>>> =E5=8F=91=E9=80=81=E6=97=B6=E9=97=B4: 2013=E5=B9=B41=E6=9C=8826=E6=97=
=A5(=E6=98=9F=E6=9C=9F=E5=85=AD) =E5=87=8C=E6=99=A80:10
>>> =E6=94=B6=E4=BB=B6=E4=BA=BA: "java-user"<java-user@lucene.apache.org>;
>>>
>>> =E4=B8=BB=E9=A2=98: Re: =E5=9B=9E=E5=A4=8D=EF=BC=9A =E5=9B=9E=E5=A4=8D=
=EF=BC=9A IndexReader.open and CorruptIndexException
>>>
>>>
>>>
>>> You can pass null for the SearcherFactory ... then SearcherManager
>>> will just do new IndexSearcher(reader) for you.
>>>
>>> Mike McCandless
>>>
>>> http://blog.mikemccandless.com
>>>
>>> On Fri, Jan 25, 2013 at 9:30 AM, zhoucheng2008 <zhoucheng2008@gmail.com=
> wrote:
>>>> SearcherManager mgr =3D new SearcherManager(dir, new MySearchWarmer())=
;Can I put null as the second parameter in the SearcherManager constructor?=
If not, how to create a MySearchWarmer instance? The following explanation =
doesn't provide sufficient info:
>>>>  class MySearchWarmer implements SearchWarmer {     @Override     publ=
ic void warm(IndexSearcher searcher) throws IOException {       // Run some=
 diverse searches, searching and sorting against all       // fields that a=
re used by your application     }   }
>>>>
>>>>
>>>>
>>>>
>>>>
>>>>
>>>> ------------------ =E5=8E=9F=E5=A7=8B=E9=82=AE=E4=BB=B6 --------------=
----
>>>> =E5=8F=91=E4=BB=B6=E4=BA=BA: "Michael McCandless"<lucene@mikemccandles=
s..com>;
>>>> =E5=8F=91=E9=80=81=E6=97=B6=E9=97=B4: 2013=E5=B9=B41=E6=9C=8825=E6=97=
=A5(=E6=98=9F=E6=9C=9F=E4=BA=94) =E6=99=9A=E4=B8=8A9:26
>>>> =E6=94=B6=E4=BB=B6=E4=BA=BA: "java-user"<java-user@lucene.apache.org>;
>>>>
>>>> =E4=B8=BB=E9=A2=98: Re: =E5=9B=9E=E5=A4=8D=EF=BC=9A IndexReader.open a=
nd CorruptIndexException
>>>>
>>>>
>>>>
>>>> Maybe here?:
>>>>
>>>>     http://blog.mikemccandless.com/2011/11/near-real-time-readers-with=
-lucenes.html
>>>>
>>>> Mike McCandless
>>>>
>>>> http://blog.mikemccandless.com
>>>>
>>>> On Fri, Jan 25, 2013 at 7:58 AM, Cheng <zhoucheng2008@gmail.com> wrote=
:
>>>>> Any example code for this SearcherManager?
>>>>>
>>>>> On Fri, Jan 25, 2013 at 3:59 AM, Ian Lea <ian.lea@gmail.com> wrote:
>>>>>
>>>>>> There will be one file handle for every currently open file.
>>>>>>
>>>>>> Use SearcherManager and this problem should go away.
>>>>>>
>>>>>>
>>>>>> --
>>>>>> Ian.
>>>>>>
>>>>>>
>>>>>> On Thu, Jan 24, 2013 at 6:40 PM, zhoucheng2008 <zhoucheng2008@gmail.=
com>
>>>>>> wrote:
>>>>>> > What file handlers did you guy refer to?
>>>>>> >
>>>>>> >
>>>>>> > I opened the index directory only. Is this the file handler? Also,=
 how
>>>>>> to safely and effectively close the index directory?
>>>>>> >
>>>>>> >
>>>>>> > I found the link's explanation somewhat self-contradictory. After =
I read
>>>>>> it, I am confused if I should close the file handlers in the finally=
 block
>>>>>> or not. I am using Java.
>>>>>> >
>>>>>> >
>>>>>> >
>>>>>> >
>>>>>> > ------------------ =E5=8E=9F=E5=A7=8B=E9=82=AE=E4=BB=B6 ----------=
--------
>>>>>> > =E5=8F=91=E4=BB=B6=E4=BA=BA: "Ian Lea"<ian.lea@gmail.com>;
>>>>>> > =E5=8F=91=E9=80=81=E6=97=B6=E9=97=B4: 2013=E5=B9=B41=E6=9C=8824=E6=
=97=A5(=E6=98=9F=E6=9C=9F=E5=9B=9B) =E4=B8=8B=E5=8D=885:46
>>>>>> > =E6=94=B6=E4=BB=B6=E4=BA=BA: "java-user"<java-user@lucene.apache.o=
rg>;
>>>>>> >
>>>>>> > =E4=B8=BB=E9=A2=98: Re: IndexReader.open and CorruptIndexException
>>>>>> >
>>>>>> >
>>>>>> >
>>>>>> > Well, raising the limits is one option but there may be better one=
s..
>>>>>> >
>>>>>> > There's an FAQ entry on this:
>>>>>> >
>>>>>> http://wiki.apache.org/lucene-java/LuceneFAQ#Why_am_I_getting_an_IOE=
xception_that_says_.22Too_many_open_files.22.3F
>>>>>> >
>>>>>> > Take a look at org.apache.lucene.search.SearcherManager "Utility c=
lass
>>>>>> > to safely share IndexSearcher instances across multiple threads".
>>>>>> >
>>>>>> >
>>>>>> > --
>>>>>> > Ian.
>>>>>> >
>>>>>> >
>>>>>> > On Thu, Jan 24, 2013 at 9:18 AM, Rafa=C5=82 Ku=C4=87 <r.kuc@solr.p=
l> wrote:
>>>>>> >> Hello!
>>>>>> >>
>>>>>> >> You need to allow the user that is running Lucene to open more fi=
les..
>>>>>> >> There are plenty of tutorials available on the web. Modify your
>>>>>> >> /etc/security/limits.conf and if for example your user is lucene =
add
>>>>>> >> the following (or modify if those already exists):
>>>>>> >>
>>>>>> >> lucene soft nofile 64000
>>>>>> >> lucene hard nofile 64000
>>>>>> >>
>>>>>> >> Relog and run:
>>>>>> >>
>>>>>> >> sudo -u lucene -s "ulimit -Sn"
>>>>>> >>
>>>>>> >> To see if the limits are the ones you set. If they are not, check=
 if
>>>>>> >> you don't have pam_limits.so commented in the /etc/pam.d/
>>>>>> >>
>>>>>> >> --
>>>>>> >> Regards,
>>>>>> >>  Rafa=C5=82 Ku=C4=87
>>>>>> >>  Sematext :: http://sematext.com/ :: Solr - Lucene - Nutch
>>>>>> >>
>>>>>> >>> Here is the log:
>>>>>> >>
>>>>>> >>> Jan 24, 2013 4:10:33 AM
>>>>>> >>> org.apache.tomcat.util.net.AprEndpoint$Acceptor run
>>>>>> >>> SEVERE: Socket accept failed
>>>>>> >>> org.apache.tomcat.jni.Error: 24: Too many open files
>>>>>> >>> at org.apache.tomcat.jni.Socket.accept(Native Method)
>>>>>> >>> at
>>>>>> >>>
>>>>>> org.apache.tomcat.util.net.AprEndpoint$Acceptor.run(AprEndpoint.java=
:990)
>>>>>> >>> at java.lang.Thread.run(Thread.java:722)
>>>>>> >>
>>>>>> >>
>>>>>> >>
>>>>>> >>> Too many open files... How to solve it?
>>>>>> >>
>>>>>> >>
>>>>>> >>> On Tue, Jan 22, 2013 at 10:52 PM, Michael McCandless <
>>>>>> >>> lucene@mikemccandless.com> wrote:
>>>>>> >>
>>>>>> >>>> Can you post the full stack trace of the CorruptIndexException?
>>>>>> >>>>
>>>>>> >>>> Mike McCandless
>>>>>> >>>>
>>>>>> >>>> http://blog.mikemccandless.com
>>>>>> >>>>
>>>>>> >>>> On Tue, Jan 22, 2013 at 8:20 AM, Cheng <zhoucheng2008@gmail.com=
>
>>>>>> wrote:
>>>>>> >>>> > Hi,
>>>>>> >>>> >
>>>>>> >>>> > I run a Lucene application on Tomcat. The app will try to ope=
n a
>>>>>> Linux
>>>>>> >>>> > directory, and sometime returns CorruptIndexException error.
>>>>>> >>>> >
>>>>>> >>>> > Shortly after I restart Tomcat (nothing else changes), the ap=
p can
>>>>>> be run
>>>>>> >>>> > on the fly. I am using the following statements to open a dir=
ectory:
>>>>>> >>>> >
>>>>>> >>>> >
>>>>>> >>>> >     try {
>>>>>> >>>> >       searcher =3D new IndexSearcher(IndexReader.open(new
>>>>>> >>>> NIOFSDirectory(new
>>>>>> >>>> > File("/home/user/"+ type))));
>>>>>> >>>> >     } catch (IOException e) {
>>>>>> >>>> >       throw new Exception("[" + type + "] Cannot open index
>>>>>> folder...");
>>>>>> >>>> >     }
>>>>>> >>>> >
>>>>>> >>>> > I would like to know how to tackle this problem.
>>>>>> >>>> >
>>>>>> >>>> > Many thanks!
>>>>>> >>>>
>>>>>> >>>> ---------------------------------------------------------------=
------
>>>>>> >>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>> >>>> For additional commands, e-mail: java-user-help@lucene.apache.o=
rg
>>>>>> >>>>
>>>>>> >>>>
>>>>>> >>
>>>>>> >>
>>>>>> >> -----------------------------------------------------------------=
----
>>>>>> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>> >> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>> >>
>>>>>> >
>>>>>> > ------------------------------------------------------------------=
---
>>>>>> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>> > For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>
>>>>>> --------------------------------------------------------------------=
-
>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>
>>>>>>
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54886-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Jan 25 20:32:30 2013
Return-Path: <java-user-return-54886-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 925B5C7CC
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 25 Jan 2013 20:32:30 +0000 (UTC)
Received: (qmail 60571 invoked by uid 500); 25 Jan 2013 20:32:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60497 invoked by uid 500); 25 Jan 2013 20:32:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60489 invoked by uid 99); 25 Jan 2013 20:32:28 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Jan 2013 20:32:28 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ian.lea@gmail.com designates 74.125.82.46 as permitted sender)
Received: from [74.125.82.46] (HELO mail-wg0-f46.google.com) (74.125.82.46)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Jan 2013 20:32:22 +0000
Received: by mail-wg0-f46.google.com with SMTP id fg15so475561wgb.13
        for <java-user@lucene.apache.org>; Fri, 25 Jan 2013 12:32:02 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=x-received:mime-version:in-reply-to:references:from:date:message-id
         :subject:to:content-type;
        bh=TrljdZzQVUKLAq/gwmxxkkQsXc09OyE8q4Dl+rGYd5I=;
        b=jsTwgIUtr75rHfufe4I8UOz3spkllfGY9afsjD6I9THJebdzMul8GXrUTwUxOofpsd
         lWAL2+NNYKz6VfmYpmqDkwLPuwPIiVcDrfORSXNoMKrexb39yXPmm9xBNBjM2Iw5BT9U
         igIefsUfwfBIw8w/LO3i6xWMZ7WlJt3+ynsxh15SP1tZ8BzO0NyQb6c8GQn0VXbuCPAb
         lt/q3AKXNWWnBJ7lg6W6JkHDqx2YiO2p9YkwMeTz2MnmIP7mXLHRRjRmfdGcVMDRIDrp
         4TMMsxoS4+dg/FqS9XKiQJsbc6vK/iQoYztp25fzOzr+5KREYkZZiwNk+eFfQIrK8HnU
         dHvQ==
X-Received: by 10.194.108.101 with SMTP id hj5mr10981922wjb.6.1359145922525;
 Fri, 25 Jan 2013 12:32:02 -0800 (PST)
MIME-Version: 1.0
Received: by 10.194.57.11 with HTTP; Fri, 25 Jan 2013 12:31:42 -0800 (PST)
In-Reply-To: <5102AFAD.6080502@andrewgilmartin.com>
References: <5102AFAD.6080502@andrewgilmartin.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Fri, 25 Jan 2013 20:31:42 +0000
Message-ID: <CAEY5pxUtQcYHQhAstd6vBBar=g2pkqesEm7XyFuJFvGq5u8VKQ@mail.gmail.com>
Subject: Re: Filtering top hits based on stored field? And Lucene 1.x -> 3.x
 for Dummies
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

On the specific question, calling doc() is still expensive.  You could
look at the FieldCache or the new DocValues stuff. See
http://www.searchworkings.org/blog/-/blogs/introducing-lucene-index-doc-values
for info on the latter.

On the general question, much of your lucene knowledge will still be
relevant.  There'll be some new stuff you've never heard of, and loads
of changes behind the scenes you may be able to ignore, but the basic
concepts and techniques haven't changed that much.  I suggest reading
the Changes doc from 4.1.


--
Ian.


On Fri, Jan 25, 2013 at 4:15 PM, Andrew Gilmartin
<andrew@andrewgilmartin.com> wrote:
> I have been using Lucene since 1.x days, but that also means I am carrying
> around some information that is no longer relevant and using techniques that
> are antiquated. I am currently using 3.0 but I am sure I am using it in 1.0
> fashion. I have two questions -- one general and one specific.
>
> The specific question is how, in Lucene 3.x, can I filter the
> IndexSeacher.search() results based on stored fields within candidate hits?
> It is not acceptable to perform the filter post search as now my hits list
> is too short. In the past calling doc() during a search (with my own
> collector) resulted in a severe performance hit. Is that still the case? If
> not, great I will just do that. If it still is, how would you suggest I
> implement the filtering?
>
> The general question is how can I best come up to speed with Lucene 3.6
> and/or 4.0? Should I just consider my existing knowledge redundant and learn
> Lucene and Solr anew? Or are there documents that can better direct my
> re-education?
>
> -- Andrew
>
> --
> Andrew Gilmartin
> andrew@andrewgilmartin.com
> 401-441-2062
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54887-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Jan 25 20:38:40 2013
Return-Path: <java-user-return-54887-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 160BEC810
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 25 Jan 2013 20:38:40 +0000 (UTC)
Received: (qmail 85240 invoked by uid 500); 25 Jan 2013 20:38:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85197 invoked by uid 500); 25 Jan 2013 20:38:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85188 invoked by uid 99); 25 Jan 2013 20:38:37 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Jan 2013 20:38:37 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ian.lea@gmail.com designates 74.125.82.172 as permitted sender)
Received: from [74.125.82.172] (HELO mail-we0-f172.google.com) (74.125.82.172)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Jan 2013 20:38:30 +0000
Received: by mail-we0-f172.google.com with SMTP id x10so394494wey.17
        for <java-user@lucene.apache.org>; Fri, 25 Jan 2013 12:38:10 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=x-received:mime-version:in-reply-to:references:from:date:message-id
         :subject:to:content-type;
        bh=yVaA+tOp6e8/UjURSZ4uYRmHPd5yD3WJpDeO4kInSH8=;
        b=FpUxXjMyYg/UlEsoVi7SXwOoVgVc2rZ8p5BGC+cN9MJ0dJhqyDLmr23Sa3TZj44YwF
         +s46MrcHSsv5g+AvLiYGf2yNng2iidmbLGR9xNXV8/dCrRPnjm7yDs36T2wNNKwSVu1F
         8AU053IjZoGwFMfUy24OfJp20cV8Lf4OA8K+63FQ7wlrZNSGO110aruXnzIfV8oaIdao
         PkCLpI0Yl+hBLM72zgnzAXxz4BKIhuq5lvgqEVoK72OMz8il2HB/vea+OADaINkMyQln
         HkUOdNsVi4eqSC+xbV9aBGJ4EyHU7Eu35d0X55mEEUIuv3ZbPRl4jWN9VsuvAjaWrme8
         vs8w==
X-Received: by 10.194.172.228 with SMTP id bf4mr10953656wjc.38.1359146290133;
 Fri, 25 Jan 2013 12:38:10 -0800 (PST)
MIME-Version: 1.0
Received: by 10.194.57.11 with HTTP; Fri, 25 Jan 2013 12:37:50 -0800 (PST)
In-Reply-To: <CAK_MoSvqp=fH+Bq=1GERs_4+F526VUAxBeY3tjq7mWWqr6R-Fw@mail.gmail.com>
References: <CAK_MoSvqp=fH+Bq=1GERs_4+F526VUAxBeY3tjq7mWWqr6R-Fw@mail.gmail.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Fri, 25 Jan 2013 20:37:50 +0000
Message-ID: <CAEY5pxXwMCRRnf5Aty__v8LpFcfmyhU2R8SCQJMQ55XcseSxdg@mail.gmail.com>
Subject: Re: about isStored method
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

If you're new to lucene why are you using such an old version?  Stored
means the value is stored in the index and can be retrieved later e.g.
for displaying on a search results page. Not stored means it isn't and
can't be.

There was a similar question not long ago on this list - check the archives.

And read Lucene In Action.


--
Ian.


On Fri, Jan 25, 2013 at 4:58 PM, Lin Ma <linlma@gmail.com> wrote:
> Hi guys,
>
> I am new to Lucene and for isStored method for interface Fieldable (
> http://lucene.apache.org/core/old_versioned_docs/versions/3_0_3/api/core/index.html),
> what are the logical meanings for stored and not stored? It is appreciate
> if anyone could show me an example. I searched many tutorials but not found
> description for what means stored and what means not stored.
>
> thanks in advance,
> Lin

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54888-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Jan 25 20:49:31 2013
Return-Path: <java-user-return-54888-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 0C823C8BA
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 25 Jan 2013 20:49:31 +0000 (UTC)
Received: (qmail 19783 invoked by uid 500); 25 Jan 2013 20:49:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19731 invoked by uid 500); 25 Jan 2013 20:49:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19723 invoked by uid 99); 25 Jan 2013 20:49:28 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Jan 2013 20:49:28 +0000
X-ASF-Spam-Status: No, hits=-2.3 required=5.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of nbuso@ebi.ac.uk designates 193.62.194.225 as permitted sender)
Received: from [193.62.194.225] (HELO smtp01.ebi.ac.uk) (193.62.194.225)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Jan 2013 20:49:24 +0000
Received: from [172.22.70.38] (linux.windows.ebi.ac.uk [172.22.70.38])
	by smtp01.ebi.ac.uk (8.13.8/8.13.8) with ESMTP id r0PKmw0S006665
	for <java-user@lucene.apache.org>; Fri, 25 Jan 2013 20:48:58 GMT
Message-ID: <1359146935.1949.22.camel@linux.scoobydoo>
Subject: Re: Faceted search in OR
From: Nicola Buso <nbuso@ebi.ac.uk>
Reply-To: nbuso@ebi.ac.uk
To: java-user@lucene.apache.org
Date: Fri, 25 Jan 2013 20:48:55 +0000
In-Reply-To: <CAL8Pwkaz=gvapAb6JjvR77WUhQ=0i+TTv=29SgROew1eAWQvZg@mail.gmail.com>
References: <1359048152.2728.88.camel@linux.scoobydoo>
	 <CALfq-2SP=wiDnDsviy1fYT0mYmm8uN9BGEJxiG01J15Zb9yuKQ@mail.gmail.com>
	 <1359059327.2728.96.camel@linux.scoobydoo>
	 <CALfq-2QV1-mknbPp39K9uNvwrgnu1Rda2EJ9p7MP1Mx_jMHWBg@mail.gmail.com>
	 <1359106763.2728.106.camel@linux.scoobydoo>
	 <CALfq-2SC5pzQfQDomhmqpRRDPzJQbSSV2pQ0V3RHwxBY4WrUSQ@mail.gmail.com>
	 <CALfq-2Rp0YMZ3nzyAVhQHOw8imJHpvGugXpxfy5_efoqL8K=6Q@mail.gmail.com>
	 <CAL8Pwkaz=gvapAb6JjvR77WUhQ=0i+TTv=29SgROew1eAWQvZg@mail.gmail.com>
Organization: EBI
Content-Type: text/plain; charset="UTF-8"
X-Mailer: Evolution 3.6.2 (3.6.2-3.fc18) 
Mime-Version: 1.0
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Mike,

if you have experiences in this use case can you share solutions? What
is reusable from Lucene 4.x implementation?
Reading some books I just noticed that the expected behaviour for an
user filtering by facets is:
- facet values in the same facet group (category in lucene) are added in
OR
- facet values from different facet groups are added in AND
- another interesting aspect is how the selection affect the counting in
other facets

Should be interesting to evaluate if some of these facet navigation
patterns can be implemented or supported with some utilities in Lucene
4.0


Nicola.



On Fri, 2013-01-25 at 08:37 -0500, Michael McCandless wrote:
> I think that was supposed to be A/1 and A/3 in the last sentence below?
> 
> But, anyway, I think the question (and it's a good one!) is how, after
> having drilled down on one of these, eg A/1, would you then still show
> the counts for the other A/N categories?
> 
> Ie the counts would show how many hits the user would see if they
> changed A/1 drilldown to A/N instead.
> 
> I call this "drill sideways"...
> 
> Mike McCandless
> 
> http://blog.mikemccandless.com
> 
> On Fri, Jan 25, 2013 at 7:29 AM, Shai Erera <serera@gmail.com> wrote:
> > Ooops, I just realized that at some point java-user was removed from the CC
> > :).
> > Fixing that.
> >
> > Shai
> >
> >
> > On Fri, Jan 25, 2013 at 2:27 PM, Shai Erera <serera@gmail.com> wrote:
> >
> >> Hi Nicola,
> >>
> >> Indeed, if it's a URL with parameters, it's not a UI trick :). I think
> >> that you can do what you want with the package, but before I explain what I
> >> think you should do, I'd like to use a concrete example, to better
> >> understand:
> >>
> >> Suppose that you have facets A/1, A/2 ... A/6 associated with documents. A
> >> document is associated with exactly one "A" facet, but the same facet may
> >> be associated with many documents.
> >> You query for X and it matches some documents that are collectively
> >> associated with facets A/1, A/2, A/3 and A/4. So A/5 and A/6 are associated
> >> with documents that do not match your query.
> >> However, your FacetRequest sets its numResults (what we call top-K) to 2,
> >> so you only get back A/1 and A/3, since they have the highest counts.
> >>
> >> So what we have now are:
> >> * Facets A/1, A/3 returned to the user, since they belong to the result
> >> set and have the highest counts
> >> * Facets A/2, A/4 are not returned to the user, even though they belong to
> >> the result set, but did not make it to the top-K
> >> * Facets A/5, A/6 are not returned because they don't belong to the result
> >> set at all.
> >>
> >> If this makes sense to you, and is similar to the scenario that you have,
> >> which of these facets would u like to show in addition to A/1 and A/2?
> >>
> >> Shai
> >>
> >>
> >> On Fri, Jan 25, 2013 at 11:39 AM, Nicola Buso <nbuso@ebi.ac.uk> wrote:
> >>
> >>> Hi Shai,
> >>>
> >>> thanks, again you are helping me a lot introducing faceted search.
> >>>
> >>> I'm not sure it's a UI trick. Suppose you have a URL with query params
> >>> that lead you to:
> >>> - the electronic department
> >>> - query on "hi-fi"
> >>> - brand facet selection on "A"
> >>>
> >>> which trick should the UI use? As a trick I should immagine:
> >>> - don't filter on facet with lucene but do it in the UI (now is tricky
> >>> to do the facet counting without lucene)
> >>> - execute 2 query one filtered and one not; pick the selected facets
> >>> from the filtered query and the other from the non filtered one
> >>> (filtered = filtered by facet selection, we can argue here)
> >>>
> >>> Note also I have some services that should return the results together
> >>> the facets if needed.
> >>>
> >>>
> >>>
> >>> Nicola.
> >>>
> >>> On Thu, 2013-01-24 at 22:47 +0200, Shai Erera wrote:
> >>> > That's sounds more like a UI trick to me. When I do that, I don't
> >>> > modify the brand facet (in the UI). I.e., continue to display it, with
> >>> > the original counts and if the user now wants to filter by A + D, then
> >>> > your UI somehow allows that (maybe checkboxes). Of if the user wants
> >>> > to quickly switch from brand A to D, he can do so w/ a single click,
> >>> > without running the original query again.
> >>> >
> >>> >
> >>> > Shai
> >>> >
> >>> >
> >>> >
> >>> > On Thu, Jan 24, 2013 at 10:28 PM, Nicola Buso <nbuso@ebi.ac.uk> wrote:
> >>> >         Hi Shai,
> >>> >
> >>> >         the use case is simple. Suppose you want to buy an hi-fi on a
> >>> >         online
> >>> >         shop. Go in the website in the Electronic department and write
> >>> >         "hi-fi"
> >>> >         in the search box, the interface return you lots of results
> >>> >         and a facet
> >>> >         on brands (10 brands values).
> >>> >         You select brand A and the results are filtered accordingly;
> >>> >         suppose now
> >>> >         you want to filter adding to the results the brand D, you
> >>> >         can't because
> >>> >         the filtered results by A don't contain values D for the brand
> >>> >         facet.
> >>> >
> >>> >         Than how can I retrieve also the facets for the results not
> >>> >         filtered?
> >>> >         I think it's a common use case when you permit to the user to
> >>> >         filter in
> >>> >         OR by facets.
> >>> >
> >>> >
> >>> >         Nicola.
> >>> >
> >>> >         On Thu, 2013-01-24 at 19:36 +0200, Shai Erera wrote:
> >>> >         > Hi Nicola,
> >>> >         >
> >>> >         >
> >>> >         > Regarding the OR drill-down, yes you can construct your own
> >>> >         > BooleanQuery, passing Occur.SHOULD instead of MUST.
> >>> >         Currently
> >>> >         > DrillDown does not help you do that, so you can copy the
> >>> >         code from
> >>> >         > DrillDown.query and change SHOULD to MUST. I opened
> >>> >         LUCENE-4716 to add
> >>> >         > this support to DrillDown.
> >>> >         >
> >>> >         >
> >>> >         >
> >>> >         > Not sure that I understand your second question. If you want
> >>> >         to
> >>> >         > retrieve counts for all descendants of A, then set your
> >>> >         > FR.setNumResults to Integer.MAX_VALUE. But note, it's going
> >>> >         to be
> >>> >         > costly, i.e. you'd get a FacetResultNode per child of A, so
> >>> >         depending
> >>> >         > how "wide" A is, this may have some impact on RAM
> >>> >         consumption.
> >>> >         >
> >>> >         > If that's not what you meant, could you please clarify?
> >>> >         >
> >>> >         >
> >>> >         > Shai
> >>> >         >
> >>> >         >
> >>> >         >
> >>> >         > On Thu, Jan 24, 2013 at 7:22 PM, Nicola Buso
> >>> >         <nbuso@ebi.ac.uk> wrote:
> >>> >         >         Hi all,
> >>> >         >
> >>> >         >         I'm introducing Lucene faceted search in our project
> >>> >         and I
> >>> >         >         need some
> >>> >         >         hints to achieve some functionalities:
> >>> >         >         - I want facet filtering in OR, how to?
> >>> >         >           - obtain facets for the filtered results but also
> >>> >         for the
> >>> >         >         non filtered
> >>> >         >         one. i.e. I have facet A with values A/V1, A/V2,
> >>> >         A/V3 and
> >>> >         >         these values
> >>> >         >         are disjunct each other, than a document having
> >>> >         field with
> >>> >         >         value V1
> >>> >         >         can't have also value V2 and so on; I would like to
> >>> >         let the
> >>> >         >         user select
> >>> >         >         more of these facet values in OR; how can I
> >>> >         accumulate all the
> >>> >         >         facets
> >>> >         >         values also filtering by facet selection? Should it
> >>> >         work in a
> >>> >         >         way
> >>> >         >         similar to ComplementCountingAggregator?
> >>> >         >           - Can I use DrillDown class to obtain the OR facet
> >>> >         filtering
> >>> >         >         or have I
> >>> >         >         to rewrite a similar class using the BooleanQuery in
> >>> >         OR. It's
> >>> >         >         not clear
> >>> >         >         to me by this comment in the API:
> >>> >         >         Wraps a given Query as a drill-down query over the
> >>> >         given
> >>> >         >         categories,
> >>> >         >         assuming all are required (e.g. AND). You can
> >>> >         construct a
> >>> >         >         query with
> >>> >         >         different modes (such as OR or AND of ORs) by
> >>> >         creating a
> >>> >         >         BooleanQuery
> >>> >         >         and call this method several times. Make sure to
> >>> >         wrap the
> >>> >         >         query in that
> >>> >         >         case by ConstantScoreQuery and set the boost to
> >>> >         0.0f, so that
> >>> >         >         it doesn't
> >>> >         >         affect scoring.
> >>> >         >
> >>> >         >
> >>> >         >         Do you have any examples doing this?
> >>> >         >
> >>> >         >         Regards
> >>> >         >
> >>> >         >         Nicola.
> >>> >         >
> >>> >         >
> >>> >         >
> >>> >         >
> >>> >         >
> >>> >         >
> >>> >
> >>> ---------------------------------------------------------------------
> >>> >         >         To unsubscribe, e-mail:
> >>> >         >         java-user-unsubscribe@lucene.apache.org
> >>> >         >         For additional commands, e-mail:
> >>> >         >         java-user-help@lucene.apache.org
> >>> >         >
> >>> >         >
> >>> >         >
> >>> >
> >>> >
> >>> >
> >>> >
> >>>
> >>>
> >>>
> >>
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54889-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Jan 25 21:21:15 2013
Return-Path: <java-user-return-54889-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id BD0B9CA08
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 25 Jan 2013 21:21:15 +0000 (UTC)
Received: (qmail 36345 invoked by uid 500); 25 Jan 2013 21:21:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36301 invoked by uid 500); 25 Jan 2013 21:21:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36293 invoked by uid 99); 25 Jan 2013 21:21:13 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Jan 2013 21:21:13 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.210.52] (HELO mail-da0-f52.google.com) (209.85.210.52)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Jan 2013 21:21:06 +0000
Received: by mail-da0-f52.google.com with SMTP id f10so348670dak.11
        for <java-user@lucene.apache.org>; Fri, 25 Jan 2013 13:20:44 -0800 (PST)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=x-received:message-id:date:from:user-agent:mime-version:to:subject
         :references:in-reply-to:content-type:content-transfer-encoding
         :x-gm-message-state;
        bh=iieYN7QJFlNXbjDfEv4iSl3n2yyGRWXAfnN6nfe9hnA=;
        b=RYZewxYhdg2RZ3b8oJ9z8KGGhp2nlmxzxLdxxlH9nMkkAEAF6LiMHUFdP85Efvc1WD
         dKiklj3yvWXzmylVv657Dab8ZukWAUelPFMS4VEdS0mBhMCwSy+YVrN80RrenYOrZU52
         23086qnZKObOOehrf6nedijGcKC6063dCTpiAHMO0WGdw5d4nM7ujYmNbXwVCNZhZCYV
         tkgF6HfZDkKGOcF7S/Y0gKXbVI+zM61miTW76vp31iYnBx6g0uCv/6rccI49r7o5R6n+
         v57qC94cG3vzZ1vcZCdgQNO3QBxuuLxsjZ4wzs2UZC6gZ5eoO6s2G2LEZF3lugLcOrTm
         lJfw==
X-Received: by 10.68.254.137 with SMTP id ai9mr17351747pbd.21.1359148844828;
        Fri, 25 Jan 2013 13:20:44 -0800 (PST)
Received: from jajo.local (ip68-226-93-53.ri.ri.cox.net. [68.226.93.53])
        by mx.google.com with ESMTPS id i1sm1507092pav.35.2013.01.25.13.20.43
        (version=TLSv1 cipher=ECDHE-RSA-RC4-SHA bits=128/128);
        Fri, 25 Jan 2013 13:20:44 -0800 (PST)
Message-ID: <5102F729.4010806@andrewgilmartin.com>
Date: Fri, 25 Jan 2013 16:20:41 -0500
From: Andrew Gilmartin <andrew@andrewgilmartin.com>
User-Agent: Postbox 3.0.7 (Macintosh/20130119)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Filtering top hits based on stored field? And Lucene 1.x -> 3.x
 for Dummies
References: <5102AFAD.6080502@andrewgilmartin.com> <CAEY5pxUtQcYHQhAstd6vBBar=g2pkqesEm7XyFuJFvGq5u8VKQ@mail.gmail.com>
In-Reply-To: <CAEY5pxUtQcYHQhAstd6vBBar=g2pkqesEm7XyFuJFvGq5u8VKQ@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Gm-Message-State: ALoCoQmhjhfXkcnWq7ZLA7f6aX3OE/YhxoPYSR51uQ0KHz3rOAZq+eeF1zJA77hCXblZm8x1TWVN
X-Virus-Checked: Checked by ClamAV on apache.org

Ian Lea wrote:

Thank you for the quick and helpful reply. I had forgotten that Lucene's change document was one of best example of change documents around. I will read it.

> On the specific question, calling doc() is still expensive.  You could
> look at the FieldCache or the new DocValues stuff. See
> http://www.searchworkings.org/blog/-/blogs/introducing-lucene-index-doc-values
> for info on the latter.

I will explore that.

I occurred to me that I do not know why the search performance degrades when doc() is called within the Collector. Is it simply that Lucene will present, for example, thousands of candidate hits (from millions of indexed documents) to the Collector even though the collector might only return the top handful? And so the Collector will need to load thousands of documents and it is this document loading that causes the performance degradation? Or is it more complex -- perhaps having to do with caches and other internals?

-- Andrew




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54890-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Jan 25 21:24:16 2013
Return-Path: <java-user-return-54890-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id A2138CBE6
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 25 Jan 2013 21:24:16 +0000 (UTC)
Received: (qmail 46140 invoked by uid 500); 25 Jan 2013 21:24:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46090 invoked by uid 500); 25 Jan 2013 21:24:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46075 invoked by uid 99); 25 Jan 2013 21:24:14 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Jan 2013 21:24:14 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.160.47] (HELO mail-pb0-f47.google.com) (209.85.160.47)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Jan 2013 21:24:08 +0000
Received: by mail-pb0-f47.google.com with SMTP id wz17so438934pbc.6
        for <java-user@lucene.apache.org>; Fri, 25 Jan 2013 13:23:46 -0800 (PST)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=x-received:mime-version:in-reply-to:references:from:date:message-id
         :subject:to:content-type:x-gm-message-state;
        bh=DPHLOovc+/pvdLSrmFm1OFRUuEYh6HN2r05t0Cnflpc=;
        b=T90lbM2wD3cyHfd7+CURnm1CI0JQDdBuSlLxSNBP+ybKI6rUBDICiHWsKAvuAyX9gr
         70E9P0ulIl3t4yuWchJbxYCY6+5OzG2l+GbYqU/mRE7faOjOcejSnXIC/rZp04k2Annd
         R8j3HoUefqQBObuwKSrm86T85kobJXfe3d/Kce3IFN7AGLo85SHeOMqph1Rkvon4NmDV
         ahqSKKRQKMeDNnUXjp1JF4dB7pGJjkF8FePkk3+h038kBg1si6os6rD/kXepTuv0du1l
         5tmlYQSBZwXW5+Kjs2bljcpin6Kmlf1uR95JXt5UPuJj8oUUR7s5SfQdOylQLkKpXhFd
         nrrg==
X-Received: by 10.66.72.201 with SMTP id f9mr16591077pav.38.1359149026775;
 Fri, 25 Jan 2013 13:23:46 -0800 (PST)
MIME-Version: 1.0
Received: by 10.68.154.73 with HTTP; Fri, 25 Jan 2013 13:23:26 -0800 (PST)
In-Reply-To: <1359146935.1949.22.camel@linux.scoobydoo>
References: <1359048152.2728.88.camel@linux.scoobydoo> <CALfq-2SP=wiDnDsviy1fYT0mYmm8uN9BGEJxiG01J15Zb9yuKQ@mail.gmail.com>
 <1359059327.2728.96.camel@linux.scoobydoo> <CALfq-2QV1-mknbPp39K9uNvwrgnu1Rda2EJ9p7MP1Mx_jMHWBg@mail.gmail.com>
 <1359106763.2728.106.camel@linux.scoobydoo> <CALfq-2SC5pzQfQDomhmqpRRDPzJQbSSV2pQ0V3RHwxBY4WrUSQ@mail.gmail.com>
 <CALfq-2Rp0YMZ3nzyAVhQHOw8imJHpvGugXpxfy5_efoqL8K=6Q@mail.gmail.com>
 <CAL8Pwkaz=gvapAb6JjvR77WUhQ=0i+TTv=29SgROew1eAWQvZg@mail.gmail.com> <1359146935.1949.22.camel@linux.scoobydoo>
From: Michael McCandless <lucene@mikemccandless.com>
Date: Fri, 25 Jan 2013 16:23:26 -0500
Message-ID: <CAL8Pwka-xpO5Rz2CnvmVoADU_3Lwtn3-Y6fnqi_Fy1PuuEo6Og@mail.gmail.com>
Subject: Re: Faceted search in OR
To: java-user@lucene.apache.org, nbuso@ebi.ac.uk
Content-Type: text/plain; charset=ISO-8859-1
X-Gm-Message-State: ALoCoQnjbLMIkg0Q64YIF6R9CrI8SHmD4yYXn2CihoXBNPvEhPyCyUUsuAMAkmjawOo82u5N1uXL
X-Virus-Checked: Checked by ClamAV on apache.org

On Fri, Jan 25, 2013 at 3:48 PM, Nicola Buso <nbuso@ebi.ac.uk> wrote:

> if you have experiences in this use case can you share solutions? What
> is reusable from Lucene 4.x implementation?

Sorry, no experience doing drill sideways w/ Lucene facets ... just in
a prior life (another search engine).

One conceptual way to get the counts is to do "hold one out" query for
each dimension you need the sideways counts on.  EG if user searched
for "cameras", then drilled down on "Manufacturer = Sony" and drilled
down again on "FormFactor = SLR", you could do 3 queries:

  * cameras AND Manufacturer=Sony --> sideways counts for "FormFactor"

  * cameras AND FormFactor=SLR -> sideways counts for "Manufacturer"

  * cameras AND FormFactor=SLR AND Manufacturer=Sony -> query results

I believe that will work?  But it's sort of costly ... you could "save
the facet counts from the last query" to save on one of these query
executions.

Conceptually, the query divides all documents into 3 sets: document
matches (add to drill-down counts), document is a near miss (would
match except for exactly one of drill-down constraints), document
doesn't match.  The sideways counts amounts to tallying up the near
miss hits against the dimension that was the near miss.

Like if you could run a query for cameras AND (Manufacturer=Sony OR
FormFactor=SLR minShouldMatch=N-1 (1 in this case)), which would match
the "matches" and the near misses, and then during collection
determine whether it was a hit or a near miss (hmm this isn't so hard:
use Scorer.getChildren()), and collect and/or tally up the appropriate
counts (drill down or sideways), then you'd get the right counts I
think?

I think this could be a reasonable way to do drill sideways!

> Reading some books I just noticed that the expected behaviour for an
> user filtering by facets is:
> - facet values in the same facet group (category in lucene) are added in
> OR
> - facet values from different facet groups are added in AND

Right.

> - another interesting aspect is how the selection affect the counting in
> other facets

This is why you have to do the N-1 queries I think.

> Should be interesting to evaluate if some of these facet navigation
> patterns can be implemented or supported with some utilities in Lucene
> 4.0

I think drill sideways is possible!  Just not implemented yet ...

Mike McCandless

http://blog.mikemccandless.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54891-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Jan 25 21:39:30 2013
Return-Path: <java-user-return-54891-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 4400AE8A8
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 25 Jan 2013 21:39:30 +0000 (UTC)
Received: (qmail 6212 invoked by uid 500); 25 Jan 2013 21:39:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6123 invoked by uid 500); 25 Jan 2013 21:39:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6006 invoked by uid 99); 25 Jan 2013 21:39:27 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Jan 2013 21:39:27 +0000
X-ASF-Spam-Status: No, hits=0.6 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of simon.willnauer@gmail.com designates 209.85.210.178 as permitted sender)
Received: from [209.85.210.178] (HELO mail-ia0-f178.google.com) (209.85.210.178)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Jan 2013 21:39:21 +0000
Received: by mail-ia0-f178.google.com with SMTP id y26so1307175iab.23
        for <java-user@lucene.apache.org>; Fri, 25 Jan 2013 13:39:00 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:x-received:reply-to:in-reply-to:references:date
         :message-id:subject:from:to:content-type;
        bh=3hyY8bHycH6YOVOw1Z9BbLsvK3DZ9YobOQCUvEAAhNw=;
        b=gYVS77V6jzQK+LG409Omy1txeFMfQZAJr9QIewi/BrwPZbxtLMSDs/TKAKeeDwK0eQ
         7kvUVUe8svEQQPLW+hG2+YsWp1BaK7vVHT/Vf2rrO0+LNycr3Up9K8FhUu/3hWq7gJID
         aHteewGHsTEisILLSzz3iLBTsPNLiot3PiNjc0HkSwCD4Sn5dN8DRgpPBrI1O8cYRdHT
         4A4AwNgk0E2Ht2lZ011e0fx7RDGqL8tja82tvqotQpgWr1AVQnWR9F9WbNijdZz9akhm
         N3F1E4vtlfPNPOMIjsNZZEwZVihH0C+KS4xAYbw78CCqS/sJtB6G1g4fApWO0DEAz4mB
         LBiw==
MIME-Version: 1.0
X-Received: by 10.50.171.42 with SMTP id ar10mr5169374igc.64.1359149940044;
 Fri, 25 Jan 2013 13:39:00 -0800 (PST)
Received: by 10.50.158.135 with HTTP; Fri, 25 Jan 2013 13:38:59 -0800 (PST)
Reply-To: simon.willnauer@gmail.com
In-Reply-To: <1359124198682-4036240.post@n3.nabble.com>
References: <1358983150658-4035806.post@n3.nabble.com>
	<001101cdf9c2$81b8dc80$852a9580$@thetaphi.de>
	<1359011456523-4035870.post@n3.nabble.com>
	<1359067051103-4036093.post@n3.nabble.com>
	<CAAHmpkg-pa=Sc=ShG1yfnPLxg6G1ik5nqWXgQVvyWJmT0f9rRw@mail.gmail.com>
	<1359124198682-4036240.post@n3.nabble.com>
Date: Fri, 25 Jan 2013 22:38:59 +0100
Message-ID: <CAAHmpkhW0PyZzD7Gc0prpVxC5CrhEcm97shJc-BxfFa1=2mGzA@mail.gmail.com>
Subject: Re: TopDocCollector vs TopScoreDocCollector (semantics changed in
 4.0, not backward comptabile)
From: Simon Willnauer <simon.willnauer@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
X-Virus-Checked: Checked by ClamAV on apache.org

On Fri, Jan 25, 2013 at 3:29 PM, saisantoshi <saisantoshi76@gmail.com> wrote:
> Thanks a lot. If we want to wrap TopScoreDocCollector into
> PositiveScoresOnlyCollector. Can we do that?
> I need only positive scores and I dont think topscore collector can handle
> by itself right?
>

I guess so! But how do you get neg. scores?
>
> Thanks,
> Sai
>
>
>
> --
> View this message in context: http://lucene.472066.n3.nabble.com/TopDocCollector-vs-TopScoreDocCollector-semantics-changed-in-4-0-not-backward-comptabile-tp4035806p4036240.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54892-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Jan 25 21:57:27 2013
Return-Path: <java-user-return-54892-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id DD807E90E
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 25 Jan 2013 21:57:26 +0000 (UTC)
Received: (qmail 64062 invoked by uid 500); 25 Jan 2013 21:57:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64021 invoked by uid 500); 25 Jan 2013 21:57:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64013 invoked by uid 99); 25 Jan 2013 21:57:24 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Jan 2013 21:57:24 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 74.125.82.177 as permitted sender)
Received: from [74.125.82.177] (HELO mail-we0-f177.google.com) (74.125.82.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Jan 2013 21:57:20 +0000
Received: by mail-we0-f177.google.com with SMTP id d7so412499wer.8
        for <java-user@lucene.apache.org>; Fri, 25 Jan 2013 13:56:58 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=x-received:mime-version:in-reply-to:references:from:date:message-id
         :subject:to:content-type;
        bh=7MuWXpqiCRFcau8Ukj8WrFvv1uR5x1FOm7hF6tVWjwI=;
        b=VJmVeyfcOlt0NRNXiT+x5kOw7sRRFBNNF/Ba5I4//sd8fEmNG7B2quNxigS5viHkC7
         UMV9pRmaCI7By/1XUegxsBxtIeCZCSQT0V6YADBf/AMAdx9+eHFBEoxeY+LTj9AACmn3
         M5U//ERTbRluGDq28zcJis1+eJ3HyITd4PRT01y+bAAPTGFH8M+OMF4xoxsj/xCpy1hh
         VdifnMC+ZJ2cD8gHFDZL0YxqOCOZTOhXp+JuQc3Zvp0xFK0TZJJixPimEQZ2O2m7ZdwM
         Iw+8BKr3wtPsK3gMl/SNQ36ogbDzbijBk+vNvp6fQI30Io5vQfbpRVEQ4yc3bmoq0l91
         +cVw==
X-Received: by 10.194.236.68 with SMTP id us4mr11226933wjc.11.1359151018741;
 Fri, 25 Jan 2013 13:56:58 -0800 (PST)
MIME-Version: 1.0
Received: by 10.194.57.11 with HTTP; Fri, 25 Jan 2013 13:56:38 -0800 (PST)
In-Reply-To: <5102F729.4010806@andrewgilmartin.com>
References: <5102AFAD.6080502@andrewgilmartin.com> <CAEY5pxUtQcYHQhAstd6vBBar=g2pkqesEm7XyFuJFvGq5u8VKQ@mail.gmail.com>
 <5102F729.4010806@andrewgilmartin.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Fri, 25 Jan 2013 21:56:38 +0000
Message-ID: <CAEY5pxW5w+uAs7Qo+PtpQ=B--oCaUUc5hD6y1m=gFn_4DwV_cA@mail.gmail.com>
Subject: Re: Filtering top hits based on stored field? And Lucene 1.x -> 3.x
 for Dummies
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

To the best of my understanding you are spot on about the degradation.
 Loading fields is costly, loading for thousands of docs is liable to
be very costly.  You can mitigate it by only loading the fields you
want with (in 4.x) reader.doc(id, fields) but it will still be costly.


--
Ian.


On Fri, Jan 25, 2013 at 9:20 PM, Andrew Gilmartin
<andrew@andrewgilmartin.com> wrote:
> Ian Lea wrote:
>
> Thank you for the quick and helpful reply. I had forgotten that Lucene's
> change document was one of best example of change documents around. I will
> read it.
>
>> On the specific question, calling doc() is still expensive.  You could
>> look at the FieldCache or the new DocValues stuff. See
>>
>> http://www.searchworkings.org/blog/-/blogs/introducing-lucene-index-doc-values
>> for info on the latter.
>
>
> I will explore that.
>
> I occurred to me that I do not know why the search performance degrades when
> doc() is called within the Collector. Is it simply that Lucene will present,
> for example, thousands of candidate hits (from millions of indexed
> documents) to the Collector even though the collector might only return the
> top handful? And so the Collector will need to load thousands of documents
> and it is this document loading that causes the performance degradation? Or
> is it more complex -- perhaps having to do with caches and other internals?
>
> -- Andrew
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54893-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Jan 25 22:49:39 2013
Return-Path: <java-user-return-54893-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 70241E7EE
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 25 Jan 2013 22:49:39 +0000 (UTC)
Received: (qmail 7104 invoked by uid 500); 25 Jan 2013 22:49:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7030 invoked by uid 500); 25 Jan 2013 22:49:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7021 invoked by uid 99); 25 Jan 2013 22:49:37 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Jan 2013 22:49:37 +0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,SPF_NEUTRAL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: 216.139.236.26 is neither permitted nor denied by domain of saisantoshi76@gmail.com)
Received: from [216.139.236.26] (HELO sam.nabble.com) (216.139.236.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Jan 2013 22:49:30 +0000
Received: from ben.nabble.com ([192.168.236.152])
	by sam.nabble.com with esmtp (Exim 4.72)
	(envelope-from <saisantoshi76@gmail.com>)
	id 1Tys58-0001TM-4L
	for java-user@lucene.apache.org; Fri, 25 Jan 2013 14:49:10 -0800
Date: Fri, 25 Jan 2013 14:49:10 -0800 (PST)
From: saisantoshi <saisantoshi76@gmail.com>
To: java-user@lucene.apache.org
Message-ID: <1359154150120-4036378.post@n3.nabble.com>
In-Reply-To: <CAAHmpkhW0PyZzD7Gc0prpVxC5CrhEcm97shJc-BxfFa1=2mGzA@mail.gmail.com>
References: <1358983150658-4035806.post@n3.nabble.com> <001101cdf9c2$81b8dc80$852a9580$@thetaphi.de> <1359011456523-4035870.post@n3.nabble.com> <1359067051103-4036093.post@n3.nabble.com> <CAAHmpkg-pa=Sc=ShG1yfnPLxg6G1ik5nqWXgQVvyWJmT0f9rRw@mail.gmail.com> <1359124198682-4036240.post@n3.nabble.com> <CAAHmpkhW0PyZzD7Gc0prpVxC5CrhEcm97shJc-BxfFa1=2mGzA@mail.gmail.com>
Subject: Re: TopDocCollector vs TopScoreDocCollector (semantics changed in
 4.0, not backward comptabile)
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

I am not looking for negative scores and want to skip it.

Thanks,
Sai



--
View this message in context: http://lucene.472066.n3.nabble.com/TopDocCollector-vs-TopScoreDocCollector-semantics-changed-in-4-0-not-backward-comptabile-tp4035806p4036378.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54894-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Jan 25 22:54:58 2013
Return-Path: <java-user-return-54894-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id BCE6DE832
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 25 Jan 2013 22:54:58 +0000 (UTC)
Received: (qmail 21839 invoked by uid 500); 25 Jan 2013 22:54:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21793 invoked by uid 500); 25 Jan 2013 22:54:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21784 invoked by uid 99); 25 Jan 2013 22:54:56 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Jan 2013 22:54:56 +0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,SPF_NEUTRAL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: 216.139.236.26 is neither permitted nor denied by domain of saisantoshi76@gmail.com)
Received: from [216.139.236.26] (HELO sam.nabble.com) (216.139.236.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Jan 2013 22:54:50 +0000
Received: from ben.nabble.com ([192.168.236.152])
	by sam.nabble.com with esmtp (Exim 4.72)
	(envelope-from <saisantoshi76@gmail.com>)
	id 1TysAH-0001nN-KC
	for java-user@lucene.apache.org; Fri, 25 Jan 2013 14:54:29 -0800
Date: Fri, 25 Jan 2013 14:54:29 -0800 (PST)
From: saisantoshi <saisantoshi76@gmail.com>
To: java-user@lucene.apache.org
Message-ID: <1359154469616-4036379.post@n3.nabble.com>
Subject: Readers for extracting textual info from pd/doc/excel for indexing
 the actual content
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

I want to index the document content( such as PDF/word/excel) and am just
wondering if there are any good readers that I can use to integrate into
Lucene 4.0. Any pointers/example code is appreciated..

Lucene In Action book mentions "tika" as the library to use but not sure if
this is the preferred approach. Anyone who used this, if they could share
some experiences in using this library is greatly appreciated.

AN example of how a pdf document can be indexed using either the tika
framework or any other reader is much appreciated.

Thanks,
Sai.



--
View this message in context: http://lucene.472066.n3.nabble.com/Readers-for-extracting-textual-info-from-pd-doc-excel-for-indexing-the-actual-content-tp4036379.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54895-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Sat Jan 26 05:01:58 2013
Return-Path: <java-user-return-54895-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 51E7EE316
	for <apmail-lucene-java-user-archive@www.apache.org>; Sat, 26 Jan 2013 05:01:58 +0000 (UTC)
Received: (qmail 23564 invoked by uid 500); 26 Jan 2013 05:01:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22785 invoked by uid 500); 26 Jan 2013 05:01:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22736 invoked by uid 99); 26 Jan 2013 05:01:51 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 26 Jan 2013 05:01:51 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of linlma@gmail.com designates 209.85.128.174 as permitted sender)
Received: from [209.85.128.174] (HELO mail-ve0-f174.google.com) (209.85.128.174)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 26 Jan 2013 05:01:43 +0000
Received: by mail-ve0-f174.google.com with SMTP id c13so529316vea.5
        for <java-user@lucene.apache.org>; Fri, 25 Jan 2013 21:01:22 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:x-received:in-reply-to:references:date:message-id
         :subject:from:to:content-type;
        bh=t1ZgMrkSRO9WoaWSbcVD238/5O0LqlqWP84DxK8baTw=;
        b=dSlyV7hf+YI25T1Pz5oWgCvZW5Mt1sN82XLeJXiVo105JNTKIVjPXVsKLpDQBPNBwB
         r6TMFQJcVGWf6Bp53q9nQoKqPMK0wmeCiWiFOOLrHPjy3+Qvv4Sv3/vYdc/G64yYp5kf
         oNmbsYDebL4sB0RHHbU/2PPgD8E4TV5HcSJrj+BMoJjJC/go0nqxMC0W9pyFZt4jxkNF
         FTlgN9cmnhUK4y+2HuavcpiWV9tKDWqtih7Ncp8r2e+YOAgyH4U4fJXM6wmDuJxQbdNs
         CGynU3VnZQyw189Z9GfHExP3IhigYaFYe8KM9hBMCra7OAxJRr01CY9vrPeoTNb5C+V2
         1hww==
MIME-Version: 1.0
X-Received: by 10.220.156.197 with SMTP id y5mr8454604vcw.17.1359176482800;
 Fri, 25 Jan 2013 21:01:22 -0800 (PST)
Received: by 10.58.156.39 with HTTP; Fri, 25 Jan 2013 21:01:22 -0800 (PST)
In-Reply-To: <CAEY5pxXwMCRRnf5Aty__v8LpFcfmyhU2R8SCQJMQ55XcseSxdg@mail.gmail.com>
References: <CAK_MoSvqp=fH+Bq=1GERs_4+F526VUAxBeY3tjq7mWWqr6R-Fw@mail.gmail.com>
	<CAEY5pxXwMCRRnf5Aty__v8LpFcfmyhU2R8SCQJMQ55XcseSxdg@mail.gmail.com>
Date: Sat, 26 Jan 2013 13:01:22 +0800
Message-ID: <CAK_MoSupe0VnC2-QHH506eagDQ+K586=LtMnrzzKcOmztjHBsg@mail.gmail.com>
Subject: Re: about isStored method
From: Lin Ma <linlma@gmail.com>
To: java-user@lucene.apache.org, ian.lea@gmail.com
Content-Type: multipart/alternative; boundary=f46d042f911071c2e304d429ef1c
X-Virus-Checked: Checked by ClamAV on apache.org

--f46d042f911071c2e304d429ef1c
Content-Type: text/plain; charset=ISO-8859-1

Thanks Ian,

If the value is not stored in index, it cannot be retrieved on search
results? My confusion is, if a field will not be in search result (isStored
== false), why we need such field in Document?

regards,
Lin

On Sat, Jan 26, 2013 at 4:37 AM, Ian Lea <ian.lea@gmail.com> wrote:

> If you're new to lucene why are you using such an old version?  Stored
> means the value is stored in the index and can be retrieved later e.g.
> for displaying on a search results page. Not stored means it isn't and
> can't be.
>
> There was a similar question not long ago on this list - check the
> archives.
>
> And read Lucene In Action.
>
>
> --
> Ian.
>
>
> On Fri, Jan 25, 2013 at 4:58 PM, Lin Ma <linlma@gmail.com> wrote:
> > Hi guys,
> >
> > I am new to Lucene and for isStored method for interface Fieldable (
> >
> http://lucene.apache.org/core/old_versioned_docs/versions/3_0_3/api/core/index.html
> ),
> > what are the logical meanings for stored and not stored? It is appreciate
> > if anyone could show me an example. I searched many tutorials but not
> found
> > description for what means stored and what means not stored.
> >
> > thanks in advance,
> > Lin
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--f46d042f911071c2e304d429ef1c--

From java-user-return-54896-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Sat Jan 26 06:17:11 2013
Return-Path: <java-user-return-54896-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 36625E1B7
	for <apmail-lucene-java-user-archive@www.apache.org>; Sat, 26 Jan 2013 06:17:10 +0000 (UTC)
Received: (qmail 82240 invoked by uid 500); 26 Jan 2013 06:17:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82023 invoked by uid 500); 26 Jan 2013 06:17:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81969 invoked by uid 99); 26 Jan 2013 06:17:05 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 26 Jan 2013 06:17:05 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of uwe@thetaphi.de designates 188.138.97.18 as permitted sender)
Received: from [188.138.97.18] (HELO mail.sd-datasolutions.de) (188.138.97.18)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 26 Jan 2013 06:16:58 +0000
Received: from VEGA (84-73-68-61.dclient.hispeed.ch [84.73.68.61])
	by mail.sd-datasolutions.de (Postfix) with ESMTPSA id D890B14AA017
	for <java-user@lucene.apache.org>; Sat, 26 Jan 2013 06:16:36 +0000 (UTC)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <CAK_MoSvqp=fH+Bq=1GERs_4+F526VUAxBeY3tjq7mWWqr6R-Fw@mail.gmail.com>	<CAEY5pxXwMCRRnf5Aty__v8LpFcfmyhU2R8SCQJMQ55XcseSxdg@mail.gmail.com> <CAK_MoSupe0VnC2-QHH506eagDQ+K586=LtMnrzzKcOmztjHBsg@mail.gmail.com>
In-Reply-To: <CAK_MoSupe0VnC2-QHH506eagDQ+K586=LtMnrzzKcOmztjHBsg@mail.gmail.com>
Subject: RE: about isStored method
Date: Sat, 26 Jan 2013 07:16:36 +0100
Message-ID: <007e01cdfb8c$b24e94e0$16ebbea0$@thetaphi.de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="utf-8"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Outlook 14.0
Thread-Index: AQFLTx+WSg5sUSpMBtiK4FLsb6gVDgImYqqqAhLf7J6ZPq9boA==
Content-Language: de
X-Virus-Checked: Checked by ClamAV on apache.org

Because you can search on it? The stored fields are only those that =
should be displayed to the user with search results. Imagine e.g. =
Google: Google displays in its search results the title of the document =
and some "description", but it does not display the whole document text. =
So in their case, they would "store" the title and some description of =
every document. On the other hand you can search on the whole document, =
so the whole document text, which could be megabytes of text data (like =
books), is "indexed".  Other cases where you have indexed-only field =
that are not stored are:
- phonetic fields: Often, some fields are indexed a second time as a =
duplicate, but with a phonetic filter assigned (that converts all tokens =
to phonetic representations). You can then do a phonetic serach in =
addition to the exact matching search, but it makes absolutely no sense =
to "store" the field 2 times.
- fields only used for faceting or sorting
- ...and many more

"stored fields" are for display to the user, "indexed fields" are for =
retrieval. They have nothing to do with each other.

Uwe

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de


> -----Original Message-----
> From: Lin Ma [mailto:linlma@gmail.com]
> Sent: Saturday, January 26, 2013 6:01 AM
> To: java-user@lucene.apache.org; ian.lea@gmail.com
> Subject: Re: about isStored method
>=20
> Thanks Ian,
>=20
> If the value is not stored in index, it cannot be retrieved on search =
results?
> My confusion is, if a field will not be in search result (isStored =
=3D=3D false), why
> we need such field in Document?
>=20
> regards,
> Lin
>=20
> On Sat, Jan 26, 2013 at 4:37 AM, Ian Lea <ian.lea@gmail.com> wrote:
>=20
> > If you're new to lucene why are you using such an old version?  =
Stored
> > means the value is stored in the index and can be retrieved later =
e.g.
> > for displaying on a search results page. Not stored means it isn't =
and
> > can't be.
> >
> > There was a similar question not long ago on this list - check the
> > archives.
> >
> > And read Lucene In Action.
> >
> >
> > --
> > Ian.
> >
> >
> > On Fri, Jan 25, 2013 at 4:58 PM, Lin Ma <linlma@gmail.com> wrote:
> > > Hi guys,
> > >
> > > I am new to Lucene and for isStored method for interface Fieldable =
(
> > >
> >
> http://lucene.apache.org/core/old_versioned_docs/versions/3_0_3/api/co
> > re/index.html
> > ),
> > > what are the logical meanings for stored and not stored? It is
> > > appreciate if anyone could show me an example. I searched many
> > > tutorials but not
> > found
> > > description for what means stored and what means not stored.
> > >
> > > thanks in advance,
> > > Lin
> >
> > =
---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54897-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Sat Jan 26 07:39:53 2013
Return-Path: <java-user-return-54897-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 7E792EC6F
	for <apmail-lucene-java-user-archive@www.apache.org>; Sat, 26 Jan 2013 07:39:53 +0000 (UTC)
Received: (qmail 44153 invoked by uid 500); 26 Jan 2013 07:39:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43831 invoked by uid 500); 26 Jan 2013 07:39:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43790 invoked by uid 99); 26 Jan 2013 07:39:48 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 26 Jan 2013 07:39:48 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of xekoukou@gmail.com designates 74.125.82.173 as permitted sender)
Received: from [74.125.82.173] (HELO mail-we0-f173.google.com) (74.125.82.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 26 Jan 2013 07:39:41 +0000
Received: by mail-we0-f173.google.com with SMTP id r5so541095wey.18
        for <java-user@lucene.apache.org>; Fri, 25 Jan 2013 23:39:21 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:x-received:in-reply-to:references:date:message-id
         :subject:from:to:content-type;
        bh=ALZsxcpfI4+HDsTDs3Wr0HfHiXD66OC0ubU/SoX4SIg=;
        b=VlQ5/NhYUKr3QakuCvF/WJVmPh3am3x0ChtvinsRs4CXdQK8wlDzmUnaZBrBKyJ6WM
         KVGBN0O/DImZtCK5+w1OdBJa5uQOAWSN1mj28wueJRc+566Uvk+rc4ZpnI53nKHPSmyS
         ySoQMHUIa6hqowoWADjhI0jd41HWMJGlBvPLBHzVzqQdsvf8mJtGHbt68BYFQf4ImNPd
         oaHe3W+YBEvUNITCiIsO69U8crHoClwYmpcWWCNEJoq++CtvuRnybUiUWHWv0z6EWlv6
         QI3YWgo+xTOyG+UgcIRIlONv+hS2mZlS5P1Z0raHMYF3tNKVJIrZgutaKdlls9+4KFM1
         10Xw==
MIME-Version: 1.0
X-Received: by 10.194.84.68 with SMTP id w4mr12517465wjy.51.1359185961545;
 Fri, 25 Jan 2013 23:39:21 -0800 (PST)
Received: by 10.217.70.72 with HTTP; Fri, 25 Jan 2013 23:39:21 -0800 (PST)
In-Reply-To: <007e01cdfb8c$b24e94e0$16ebbea0$@thetaphi.de>
References: <CAK_MoSvqp=fH+Bq=1GERs_4+F526VUAxBeY3tjq7mWWqr6R-Fw@mail.gmail.com>
	<CAEY5pxXwMCRRnf5Aty__v8LpFcfmyhU2R8SCQJMQ55XcseSxdg@mail.gmail.com>
	<CAK_MoSupe0VnC2-QHH506eagDQ+K586=LtMnrzzKcOmztjHBsg@mail.gmail.com>
	<007e01cdfb8c$b24e94e0$16ebbea0$@thetaphi.de>
Date: Sat, 26 Jan 2013 09:39:21 +0200
Message-ID: <CAOX4E5GROd000gtU+y7MuRQ5Eg6gj39+y_tR3Qy9VFdfRQ-Tdg@mail.gmail.com>
Subject: Re: about isStored method
From: Apostolis Xekoukoulotakis <xekoukou@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=047d7bb047546bf0fe04d42c2444
X-Virus-Checked: Checked by ClamAV on apache.org

--047d7bb047546bf0fe04d42c2444
Content-Type: text/plain; charset=ISO-8859-1

Fields that are not stored do store information in Lucene, but not the
original information, only what it is required so as to search that field.
That is, i suppose why you are confused.

2013/1/26 Uwe Schindler <uwe@thetaphi.de>

> Because you can search on it? The stored fields are only those that should
> be displayed to the user with search results. Imagine e.g. Google: Google
> displays in its search results the title of the document and some
> "description", but it does not display the whole document text. So in their
> case, they would "store" the title and some description of every document.
> On the other hand you can search on the whole document, so the whole
> document text, which could be megabytes of text data (like books), is
> "indexed".  Other cases where you have indexed-only field that are not
> stored are:
> - phonetic fields: Often, some fields are indexed a second time as a
> duplicate, but with a phonetic filter assigned (that converts all tokens to
> phonetic representations). You can then do a phonetic serach in addition to
> the exact matching search, but it makes absolutely no sense to "store" the
> field 2 times.
> - fields only used for faceting or sorting
> - ...and many more
>
> "stored fields" are for display to the user, "indexed fields" are for
> retrieval. They have nothing to do with each other.
>
> Uwe
>
> -----
> Uwe Schindler
> H.-H.-Meier-Allee 63, D-28213 Bremen
> http://www.thetaphi.de
> eMail: uwe@thetaphi.de
>
>
> > -----Original Message-----
> > From: Lin Ma [mailto:linlma@gmail.com]
> > Sent: Saturday, January 26, 2013 6:01 AM
> > To: java-user@lucene.apache.org; ian.lea@gmail.com
> > Subject: Re: about isStored method
> >
> > Thanks Ian,
> >
> > If the value is not stored in index, it cannot be retrieved on search
> results?
> > My confusion is, if a field will not be in search result (isStored ==
> false), why
> > we need such field in Document?
> >
> > regards,
> > Lin
> >
> > On Sat, Jan 26, 2013 at 4:37 AM, Ian Lea <ian.lea@gmail.com> wrote:
> >
> > > If you're new to lucene why are you using such an old version?  Stored
> > > means the value is stored in the index and can be retrieved later e.g.
> > > for displaying on a search results page. Not stored means it isn't and
> > > can't be.
> > >
> > > There was a similar question not long ago on this list - check the
> > > archives.
> > >
> > > And read Lucene In Action.
> > >
> > >
> > > --
> > > Ian.
> > >
> > >
> > > On Fri, Jan 25, 2013 at 4:58 PM, Lin Ma <linlma@gmail.com> wrote:
> > > > Hi guys,
> > > >
> > > > I am new to Lucene and for isStored method for interface Fieldable (
> > > >
> > >
> > http://lucene.apache.org/core/old_versioned_docs/versions/3_0_3/api/co
> > > re/index.html
> > > ),
> > > > what are the logical meanings for stored and not stored? It is
> > > > appreciate if anyone could show me an example. I searched many
> > > > tutorials but not
> > > found
> > > > description for what means stored and what means not stored.
> > > >
> > > > thanks in advance,
> > > > Lin
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 


Sincerely yours,

     Apostolis Xekoukoulotakis

--047d7bb047546bf0fe04d42c2444--

From java-user-return-54898-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Sat Jan 26 15:33:21 2013
Return-Path: <java-user-return-54898-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 06FC9E493
	for <apmail-lucene-java-user-archive@www.apache.org>; Sat, 26 Jan 2013 15:33:21 +0000 (UTC)
Received: (qmail 90521 invoked by uid 500); 26 Jan 2013 15:33:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90289 invoked by uid 500); 26 Jan 2013 15:33:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90259 invoked by uid 99); 26 Jan 2013 15:33:16 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 26 Jan 2013 15:33:16 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of linlma@gmail.com designates 209.85.212.47 as permitted sender)
Received: from [209.85.212.47] (HELO mail-vb0-f47.google.com) (209.85.212.47)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 26 Jan 2013 15:33:11 +0000
Received: by mail-vb0-f47.google.com with SMTP id e21so969055vbm.6
        for <java-user@lucene.apache.org>; Sat, 26 Jan 2013 07:32:50 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:x-received:in-reply-to:references:date:message-id
         :subject:from:to:content-type;
        bh=S3v6l6lF+wPt0FeQcojYGRZN+XtqsYwINUd7AUbDags=;
        b=ELxdmWrafzB1sqUemfzEAjU6dosE5tuKAX2N6MLcCRa8GBd5upZMd6dta7lDlyS32n
         LrJQtq5/42ZZbdV7ywtOmGNv0t8l3OeYxgyiZdskpY+7S266Fwewuc78Ynl6Gv6pJz+B
         z3pEO9iQkSkUJugzAXzAPtKx7B1t+mr6IAZlBZHYDiLpiDES8zzBIWKeEz/6cr0wp87f
         pFeepSCQyJ0wuc6tiMzlutBqmhG13lV4ZUfLJsibJbJJ8d5m6FV338mDV98YbUOE4MLr
         oetKj7Zx45rFbHza8UoLI1f7v1tzZyH3M2R1X0uur6jwOEwNUrFijzTJwjB6+IXkxZE1
         W6Bg==
MIME-Version: 1.0
X-Received: by 10.220.40.9 with SMTP id i9mr4483373vce.23.1359214370318; Sat,
 26 Jan 2013 07:32:50 -0800 (PST)
Received: by 10.58.156.39 with HTTP; Sat, 26 Jan 2013 07:32:50 -0800 (PST)
In-Reply-To: <007e01cdfb8c$b24e94e0$16ebbea0$@thetaphi.de>
References: <CAK_MoSvqp=fH+Bq=1GERs_4+F526VUAxBeY3tjq7mWWqr6R-Fw@mail.gmail.com>
	<CAEY5pxXwMCRRnf5Aty__v8LpFcfmyhU2R8SCQJMQ55XcseSxdg@mail.gmail.com>
	<CAK_MoSupe0VnC2-QHH506eagDQ+K586=LtMnrzzKcOmztjHBsg@mail.gmail.com>
	<007e01cdfb8c$b24e94e0$16ebbea0$@thetaphi.de>
Date: Sat, 26 Jan 2013 23:32:50 +0800
Message-ID: <CAK_MoSsd-Stj9LaS94Zv44KySihgsb9sOoEyd4YdXBHOOYq2=Q@mail.gmail.com>
Subject: Re: about isStored method
From: Lin Ma <linlma@gmail.com>
To: java-user@lucene.apache.org, uwe@thetaphi.de
Content-Type: multipart/alternative; boundary=bcaec54a3788b76a6304d432c1bb
X-Virus-Checked: Checked by ClamAV on apache.org

--bcaec54a3788b76a6304d432c1bb
Content-Type: text/plain; charset=ISO-8859-1

Thanks Uwe,

The information you provided is very informative. Two more
questions/comments,

   - For stored field, it means its original information/structure is kept
   for search results (I think for an indexed field it means means lost its
   original form to indexed form), correct?
   - What means "phonetic fields", "phonetic serach" and "phonetic filter"?
   Appreciate if you could show an example?

regards,
Lin

On Sat, Jan 26, 2013 at 2:16 PM, Uwe Schindler <uwe@thetaphi.de> wrote:

> Because you can search on it? The stored fields are only those that should
> be displayed to the user with search results. Imagine e.g. Google: Google
> displays in its search results the title of the document and some
> "description", but it does not display the whole document text. So in their
> case, they would "store" the title and some description of every document.
> On the other hand you can search on the whole document, so the whole
> document text, which could be megabytes of text data (like books), is
> "indexed".  Other cases where you have indexed-only field that are not
> stored are:
> - phonetic fields: Often, some fields are indexed a second time as a
> duplicate, but with a phonetic filter assigned (that converts all tokens to
> phonetic representations). You can then do a phonetic serach in addition to
> the exact matching search, but it makes absolutely no sense to "store" the
> field 2 times.
> - fields only used for faceting or sorting
> - ...and many more
>
> "stored fields" are for display to the user, "indexed fields" are for
> retrieval. They have nothing to do with each other.
>
> Uwe
>
> -----
> Uwe Schindler
> H.-H.-Meier-Allee 63, D-28213 Bremen
> http://www.thetaphi.de
> eMail: uwe@thetaphi.de
>
>
> > -----Original Message-----
> > From: Lin Ma [mailto:linlma@gmail.com]
> > Sent: Saturday, January 26, 2013 6:01 AM
> > To: java-user@lucene.apache.org; ian.lea@gmail.com
> > Subject: Re: about isStored method
> >
> > Thanks Ian,
> >
> > If the value is not stored in index, it cannot be retrieved on search
> results?
> > My confusion is, if a field will not be in search result (isStored ==
> false), why
> > we need such field in Document?
> >
> > regards,
> > Lin
> >
> > On Sat, Jan 26, 2013 at 4:37 AM, Ian Lea <ian.lea@gmail.com> wrote:
> >
> > > If you're new to lucene why are you using such an old version?  Stored
> > > means the value is stored in the index and can be retrieved later e.g.
> > > for displaying on a search results page. Not stored means it isn't and
> > > can't be.
> > >
> > > There was a similar question not long ago on this list - check the
> > > archives.
> > >
> > > And read Lucene In Action.
> > >
> > >
> > > --
> > > Ian.
> > >
> > >
> > > On Fri, Jan 25, 2013 at 4:58 PM, Lin Ma <linlma@gmail.com> wrote:
> > > > Hi guys,
> > > >
> > > > I am new to Lucene and for isStored method for interface Fieldable (
> > > >
> > >
> > http://lucene.apache.org/core/old_versioned_docs/versions/3_0_3/api/co
> > > re/index.html
> > > ),
> > > > what are the logical meanings for stored and not stored? It is
> > > > appreciate if anyone could show me an example. I searched many
> > > > tutorials but not
> > > found
> > > > description for what means stored and what means not stored.
> > > >
> > > > thanks in advance,
> > > > Lin
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--bcaec54a3788b76a6304d432c1bb--

From java-user-return-54899-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Sat Jan 26 16:03:49 2013
Return-Path: <java-user-return-54899-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 6DF09E527
	for <apmail-lucene-java-user-archive@www.apache.org>; Sat, 26 Jan 2013 16:03:49 +0000 (UTC)
Received: (qmail 68877 invoked by uid 500); 26 Jan 2013 16:03:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68684 invoked by uid 500); 26 Jan 2013 16:03:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68647 invoked by uid 99); 26 Jan 2013 16:03:46 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 26 Jan 2013 16:03:46 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.220.42] (HELO mail-pa0-f42.google.com) (209.85.220.42)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 26 Jan 2013 16:03:40 +0000
Received: by mail-pa0-f42.google.com with SMTP id rl6so782375pac.1
        for <java-user@lucene.apache.org>; Sat, 26 Jan 2013 08:03:19 -0800 (PST)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=x-received:message-id:date:from:user-agent:mime-version:to:subject
         :references:in-reply-to:content-type:content-transfer-encoding
         :x-gm-message-state;
        bh=jFK0vJxtG+cP59DKYMtomoiVnONuRHtLdW+MSjV7yxc=;
        b=C/1m1SNwIMxohRXj4rPQDG6ZERk3YFnUp+C5M9eT1TCaW7o/RPOxr49DnSH6lcyZCu
         8viSs2DShokuC9jIU1bjKZp6LJmw5QTco0BHGl2cfU/zp0AwFttF2xjpD/xAkDrP1yf5
         zys3rxY3BaVY/aTL5RQk3IeCGTp/JZXDqhzYGhG5XYm1SqCMpJmvtY/pqCjN/QZgL3XN
         9iqxk6KqkORJFf5VtPZpiuBsh3059VhYC9LMX2BDDx4dMuohymqgJai5EbDuqLyKGTPI
         vUodeU5h9mW5HDzfkS7XKSlHJjq8Z+DABP4K4PcuZ3Q4m/4//GY7vQ4sKK5HtxlVR0II
         FH6w==
X-Received: by 10.68.143.195 with SMTP id sg3mr1940473pbb.137.1359216199606;
        Sat, 26 Jan 2013 08:03:19 -0800 (PST)
Received: from jajo.local (ip68-226-93-53.ri.ri.cox.net. [68.226.93.53])
        by mx.google.com with ESMTPS id qo10sm2771701pbc.58.2013.01.26.08.03.18
        (version=TLSv1 cipher=ECDHE-RSA-RC4-SHA bits=128/128);
        Sat, 26 Jan 2013 08:03:18 -0800 (PST)
Message-ID: <5103FE43.1060203@andrewgilmartin.com>
Date: Sat, 26 Jan 2013 11:03:15 -0500
From: Andrew Gilmartin <andrew@andrewgilmartin.com>
User-Agent: Postbox 3.0.7 (Macintosh/20130119)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: about isStored method
References: <CAK_MoSvqp=fH+Bq=1GERs_4+F526VUAxBeY3tjq7mWWqr6R-Fw@mail.gmail.com> <CAEY5pxXwMCRRnf5Aty__v8LpFcfmyhU2R8SCQJMQ55XcseSxdg@mail.gmail.com> <CAK_MoSupe0VnC2-QHH506eagDQ+K586=LtMnrzzKcOmztjHBsg@mail.gmail.com> <007e01cdfb8c$b24e94e0$16ebbea0$@thetaphi.de> <CAK_MoSsd-Stj9LaS94Zv44KySihgsb9sOoEyd4YdXBHOOYq2=Q@mail.gmail.com>
In-Reply-To: <CAK_MoSsd-Stj9LaS94Zv44KySihgsb9sOoEyd4YdXBHOOYq2=Q@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Gm-Message-State: ALoCoQnjguuNVxGfH85Q7CClTXDeOZm9CTTrSw050fpPyJilVICKfF0Ia9xIspP0Wz/wpg5PobBT
X-Virus-Checked: Checked by ClamAV on apache.org

I seems that you would benefit from reading at least one of the great 
books on Lucene. Lucene in Action is a good place to start. Until the, 
perhaps the following will be helpful

Lin Ma wrote:

>     - For stored field, it means its original information/structure is kept
>     for search results (I think for an indexed field it means means lost its
>     original form to indexed form), correct?

A document can have one or more fields. A field has a name and a value.

A field's value can be both stored and analyzed.

A field's value that is ONLY stored may not be used in a search query. 
It may only be used as a place to hold data about the document found. A 
document can have any number of stored fields.

A field's value that is ONLY analyzed can be used in a search query. It 
is of no use other than for searching. A document can have nay number of 
analyzed fields.

A field's value that is stored + analyzed may be used in a search query 
and it's value may be retrieved from the document. A document can have 
any number of stored + analyzed fields.

It must be noted that a field's value is often not useful for both 
analyzing and utility after the search. In my experience the only common 
reason to have a field both stored + analyzed is that during development 
having the filed's value available for debugging greatly aids 
discovering root problems.

>     - What means "phonetic fields", "phonetic serach" and "phonetic filter"?
>     Appreciate if you could show an example?

I don't any experience with this side Lucene. When Google fails to find 
something relevant try a Delicious search. For example,

https://delicious.com/search?p=lucene%2Cphonetic

Good luck.

-- Andrew

-- 
Andrew Gilmartin
andrew@andrewgilmartin.com
401-441-2062


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54900-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Sat Jan 26 17:39:19 2013
Return-Path: <java-user-return-54900-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id D2957E0D3
	for <apmail-lucene-java-user-archive@www.apache.org>; Sat, 26 Jan 2013 17:39:19 +0000 (UTC)
Received: (qmail 77187 invoked by uid 500); 26 Jan 2013 17:39:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77017 invoked by uid 500); 26 Jan 2013 17:39:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 82876 invoked by uid 99); 26 Jan 2013 12:46:25 -0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of gilinachum@gmail.com designates 209.85.214.179 as permitted sender)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:x-received:date:message-id:subject:from:to
         :content-type;
        bh=p7NsyRnmzEv2F2yJwkLOVlqlKDg5ugDz+UvX8PnE6F0=;
        b=Y7OsGrEBtfussJ7+4ILFKtgwOOuVfwImeWN8pk7Y/ju4/uLk1aPgiVx/Q+/WfFQ9w/
         Bb1jIzAnhhHVNq/lPaRQxG5uSsXR6poR3s3RshxsnOnbo06hyVR/mN0Kj1okS1U2fDrN
         ObtzikPOCXYgo5OIonENqfMvFDmvyjcCzcQhKKO73ZssQidLqJ1XfFsEsBamh7qBcnXR
         NnlkTrn/kSGm/xk9p/AR8mqFiT+z8GhuqXPPfgqIYKM5czMbvaTSbaeXGmpYE/M7P/ST
         quNbvHvD6QxasSssOdYAGFGLdTVFQ/Kp3xRoH1Zst00lYkWKDHyMkLDW/ll+tUqofT8l
         nXaA==
MIME-Version: 1.0
X-Received: by 10.60.6.199 with SMTP id d7mr1456324oea.137.1359204356859; Sat,
 26 Jan 2013 04:45:56 -0800 (PST)
Date: Sat, 26 Jan 2013 14:45:56 +0200
Message-ID: <CAKFGv-Fzd8VvgvA6e-wmSS2K+GRBJrpvhgxzMCJEJrCRAOo8tA@mail.gmail.com>
Subject: MMapDirectory performance - Are searchable field values contiguously
 stored in FS block?
From: Gili Nachum <gilinachum@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=e89a8fb1fd74de276604d4306c1c
X-Virus-Checked: Checked by ClamAV on apache.org

--e89a8fb1fd74de276604d4306c1c
Content-Type: text/plain; charset=ISO-8859-1

Hi,

I have a search workload that focuses on two fields in my 1GB index. I get
very good performance when loaded the index via MMapDirectory. I attribute
this performance to the Operating System File System (FS OS) cache, that
keeps the most recently used FS blocks RAM resident.

*I would like to add 50 more fields to the index, increasing it size to
~50GB, A key factor is that these additional fields will be queried very
rarely.
Given this increase in index size, should I expect lower Queries/Sec rate
for the original search workload (that doesn't use the new fields)?*

I would assume that if the values of each searchable field are stored in a
different set of FS blocks, then the 50 additional fields would make no
difference for the OS FS cache, as it would continue to behave like before,
keeping in RAM those most used FS blocks.
On the other hand, if values from different fields share the same FS
blocks, then the hot 2 fields values will be to scattered across the FS the
OS cache useless. degradating performance back to I/O bounded.

Which is the case with Lucene 3.6?

Thanks.
Gili Nachum.

--e89a8fb1fd74de276604d4306c1c--

From java-user-return-54901-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Sat Jan 26 18:00:36 2013
Return-Path: <java-user-return-54901-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id E1F2FE110
	for <apmail-lucene-java-user-archive@www.apache.org>; Sat, 26 Jan 2013 18:00:35 +0000 (UTC)
Received: (qmail 13382 invoked by uid 500); 26 Jan 2013 18:00:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13329 invoked by uid 500); 26 Jan 2013 18:00:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13321 invoked by uid 99); 26 Jan 2013 18:00:33 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 26 Jan 2013 18:00:33 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.210.173] (HELO mail-ia0-f173.google.com) (209.85.210.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 26 Jan 2013 18:00:28 +0000
Received: by mail-ia0-f173.google.com with SMTP id l29so2304137iag.18
        for <java-user@lucene.apache.org>; Sat, 26 Jan 2013 10:00:06 -0800 (PST)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=x-received:mime-version:in-reply-to:references:from:date:message-id
         :subject:to:content-type:x-gm-message-state;
        bh=9RydFLZPDlJGbSrkXRRwtXLfwpSkGrgq+0v2Go1AEIs=;
        b=EHngGousPx6zCmrNBQfv6CSlN8Wrh8jxIx7uEASadJi5fNNDBaKKhug+RDuTFNViJZ
         +QfFEHIBs0arj39bs1hG2lH5gABkX1FzIx9xhPKhZ0g1E7PPwVOTMhP6UeQ8YuVWI6yS
         NROudful91NAlebpD53axBD3c+DJ18z+6Tr4nJvL3J+CxPf18bfl614wPitJyYrDKnil
         tGoU4/rS491Q/0STHbM9RdpymniHdACN6lLBiyyuMtodLWU+JuC1GGl1ZUlQfr2F1mp4
         LQcj/5su8xS6UO+wl912G74SZSezvkblUt06tgbO/L5KwjawqzWfP1zlrPLKEPSZ+C9G
         7Kcg==
X-Received: by 10.50.40.133 with SMTP id x5mr1470378igk.32.1359223206834; Sat,
 26 Jan 2013 10:00:06 -0800 (PST)
MIME-Version: 1.0
Received: by 10.64.91.229 with HTTP; Sat, 26 Jan 2013 09:59:46 -0800 (PST)
In-Reply-To: <CAKFGv-Fzd8VvgvA6e-wmSS2K+GRBJrpvhgxzMCJEJrCRAOo8tA@mail.gmail.com>
References: <CAKFGv-Fzd8VvgvA6e-wmSS2K+GRBJrpvhgxzMCJEJrCRAOo8tA@mail.gmail.com>
From: Michael McCandless <lucene@mikemccandless.com>
Date: Sat, 26 Jan 2013 12:59:46 -0500
Message-ID: <CAL8PwkayofO55zvOpxufm8ifRtKfZPcfsd==_j4UtP4PCOp-4w@mail.gmail.com>
Subject: Re: MMapDirectory performance - Are searchable field values
 contiguously stored in FS block?
To: java-user@lucene.apache.org, gilinachum@gmail.com
Content-Type: text/plain; charset=ISO-8859-1
X-Gm-Message-State: ALoCoQnh4fkVhMQuQCvwM2MMd77gdXJSaWNeEOPtdLdu+OU31X4g+oWgwziPDj0PphvbrxAPUE/2
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Gili,

I responded last time you asked this:

    http://lucene.markmail.org/thread/svun5cdtgiy4hnjg

Maybe you are not subscribed to the list?

Mike McCandless

http://blog.mikemccandless.com

On Sat, Jan 26, 2013 at 7:45 AM, Gili Nachum <gilinachum@gmail.com> wrote:
> Hi,
>
> I have a search workload that focuses on two fields in my 1GB index. I get
> very good performance when loaded the index via MMapDirectory. I attribute
> this performance to the Operating System File System (FS OS) cache, that
> keeps the most recently used FS blocks RAM resident.
>
> *I would like to add 50 more fields to the index, increasing it size to
> ~50GB, A key factor is that these additional fields will be queried very
> rarely.
> Given this increase in index size, should I expect lower Queries/Sec rate
> for the original search workload (that doesn't use the new fields)?*
>
> I would assume that if the values of each searchable field are stored in a
> different set of FS blocks, then the 50 additional fields would make no
> difference for the OS FS cache, as it would continue to behave like before,
> keeping in RAM those most used FS blocks.
> On the other hand, if values from different fields share the same FS
> blocks, then the hot 2 fields values will be to scattered across the FS the
> OS cache useless. degradating performance back to I/O bounded.
>
> Which is the case with Lucene 3.6?
>
> Thanks.
> Gili Nachum.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54902-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Sun Jan 27 04:39:53 2013
Return-Path: <java-user-return-54902-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 0C423E1FD
	for <apmail-lucene-java-user-archive@www.apache.org>; Sun, 27 Jan 2013 04:39:52 +0000 (UTC)
Received: (qmail 1494 invoked by uid 500); 27 Jan 2013 04:39:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1156 invoked by uid 500); 27 Jan 2013 04:39:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1056 invoked by uid 99); 27 Jan 2013 04:39:40 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 27 Jan 2013 04:39:40 +0000
X-ASF-Spam-Status: No, hits=2.3 required=5.0
	tests=SPF_SOFTFAIL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: softfail (athena.apache.org: transitioning domain of wuqiu.main@qq.com does not designate 216.139.236.26 as permitted sender)
Received: from [216.139.236.26] (HELO sam.nabble.com) (216.139.236.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 27 Jan 2013 04:39:36 +0000
Received: from ben.nabble.com ([192.168.236.152])
	by sam.nabble.com with esmtp (Exim 4.72)
	(envelope-from <wuqiu.main@qq.com>)
	id 1TzK1P-0007hP-3I
	for java-user@lucene.apache.org; Sat, 26 Jan 2013 20:39:11 -0800
Date: Sat, 26 Jan 2013 20:39:11 -0800 (PST)
From: wgggfiy <wuqiu.main@qq.com>
To: java-user@lucene.apache.org
Message-ID: <1359261551090-4036484.post@n3.nabble.com>
Subject: how to avoid OutOfMemoryError while indexing ?
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

I found it is very easy to come into OutOfMemoryError.
My idea is that lucene could set the RAM memory Automatically=EF=BC=8C
but I couldn't find the API. My code:=20

IndexWriterConfig iwc =3D new IndexWriterConfig(Version.LUCENE_40, analyzer=
);
int mb =3D 1024 * 1024;
double ram =3D Runtime.getRuntime().maxMemory() / mb;
iwc.setRAMBufferSizeMB(ram);

but still OutOfMemoryError, can anyone help me ? thx



-----
--------------------------
Email: wuqiu.main@qq.com
--------------------------
--
View this message in context: http://lucene.472066.n3.nabble.com/how-to-avo=
id-OutOfMemoryError-while-indexing-tp4036484.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54903-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Sun Jan 27 13:59:16 2013
Return-Path: <java-user-return-54903-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id C5A30DF62
	for <apmail-lucene-java-user-archive@www.apache.org>; Sun, 27 Jan 2013 13:59:16 +0000 (UTC)
Received: (qmail 33984 invoked by uid 500); 27 Jan 2013 13:59:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33863 invoked by uid 500); 27 Jan 2013 13:59:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33845 invoked by uid 99); 27 Jan 2013 13:59:12 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 27 Jan 2013 13:59:12 +0000
X-ASF-Spam-Status: No, hits=1.3 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.210.170] (HELO mail-ia0-f170.google.com) (209.85.210.170)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 27 Jan 2013 13:59:07 +0000
Received: by mail-ia0-f170.google.com with SMTP id k20so3054327iak.29
        for <java-user@lucene.apache.org>; Sun, 27 Jan 2013 05:58:46 -0800 (PST)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=x-received:mime-version:in-reply-to:references:from:date:message-id
         :subject:to:content-type:content-transfer-encoding
         :x-gm-message-state;
        bh=Z3eFmzuyAcvWo2oqHUcDu82j4faiTpiBAclz0Mk7qFY=;
        b=DWPvwQ2jAAeUE3ZIm8A814Zqk9urQpq7e2pGiSuF6UwSW+EJ0vsehosjdwDNMQ1XCc
         8zSEEGR1NvUCSlnN1Aa/h4nSd/5RkE9wDrVWTsIlBG/QWSmPo5Z7Obdfkp/HowKx45WP
         GzDAHKQC4Ge46/XogbwAg9LsG06QnavsaBmjXEKXorKfYo+uDC6Ay2XoNxMXrNUmQ/mP
         +Li/HORUZzdfTHGFYaL75dQJV2m0ss/3AwYPRVfu5wbcCdROeqptkMz7RqYkDv8zKYKi
         AbjEtyqRiGYKyTX8eWqRAEtiVLwy1IQZrbV77d87Eo+iohJXKgLG4lSMCUK8tbVKRsXv
         YiTQ==
X-Received: by 10.50.77.133 with SMTP id s5mr2863947igw.110.1359295126045;
 Sun, 27 Jan 2013 05:58:46 -0800 (PST)
MIME-Version: 1.0
Received: by 10.64.91.229 with HTTP; Sun, 27 Jan 2013 05:58:25 -0800 (PST)
In-Reply-To: <1359261551090-4036484.post@n3.nabble.com>
References: <1359261551090-4036484.post@n3.nabble.com>
From: Michael McCandless <lucene@mikemccandless.com>
Date: Sun, 27 Jan 2013 08:58:25 -0500
Message-ID: <CAL8PwkYJaaB=-NT_XX6wHL1Mx-ypR+KkuACwjpXMFJm64-U_bQ@mail.gmail.com>
Subject: Re: how to avoid OutOfMemoryError while indexing ?
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Gm-Message-State: ALoCoQk2h0JScbhybViby/uDxhissaB7FrwhglrilVLGu92/T8j2zwt1AdiC7szp3ytJZNQfs3N8
X-Virus-Checked: Checked by ClamAV on apache.org

You should set your RAMBufferSizeMB to something smaller than the full
heap size of your JVM.

Mike McCandless

http://blog.mikemccandless.com

On Sat, Jan 26, 2013 at 11:39 PM, wgggfiy <wuqiu.main@qq.com> wrote:
> I found it is very easy to come into OutOfMemoryError.
> My idea is that lucene could set the RAM memory Automatically=EF=BC=8C
> but I couldn't find the API. My code:
>
> IndexWriterConfig iwc =3D new IndexWriterConfig(Version.LUCENE_40, analyz=
er);
> int mb =3D 1024 * 1024;
> double ram =3D Runtime.getRuntime().maxMemory() / mb;
> iwc.setRAMBufferSizeMB(ram);
>
> but still OutOfMemoryError, can anyone help me ? thx
>
>
>
> -----
> --------------------------
> Email: wuqiu.main@qq.com
> --------------------------
> --
> View this message in context: http://lucene.472066.n3.nabble.com/how-to-a=
void-OutOfMemoryError-while-indexing-tp4036484.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54904-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Sun Jan 27 17:27:23 2013
Return-Path: <java-user-return-54904-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 94823EB18
	for <apmail-lucene-java-user-archive@www.apache.org>; Sun, 27 Jan 2013 17:27:23 +0000 (UTC)
Received: (qmail 67410 invoked by uid 500); 27 Jan 2013 17:27:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67327 invoked by uid 500); 27 Jan 2013 17:27:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67306 invoked by uid 99); 27 Jan 2013 17:27:20 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 27 Jan 2013 17:27:20 +0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,SPF_NEUTRAL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: 216.139.236.26 is neither permitted nor denied by domain of saisantoshi76@gmail.com)
Received: from [216.139.236.26] (HELO sam.nabble.com) (216.139.236.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 27 Jan 2013 17:27:15 +0000
Received: from ben.nabble.com ([192.168.236.152])
	by sam.nabble.com with esmtp (Exim 4.72)
	(envelope-from <saisantoshi76@gmail.com>)
	id 1TzW0M-0000wQ-QX
	for java-user@lucene.apache.org; Sun, 27 Jan 2013 09:26:54 -0800
Date: Sun, 27 Jan 2013 09:26:54 -0800 (PST)
From: saisantoshi <saisantoshi76@gmail.com>
To: java-user@lucene.apache.org
Message-ID: <1359307614797-4036538.post@n3.nabble.com>
In-Reply-To: <1359154469616-4036379.post@n3.nabble.com>
References: <1359154469616-4036379.post@n3.nabble.com>
Subject: Re: Readers for extracting textual info from pd/doc/excel for
 indexing the actual content
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Can some one please help here?

Thanks,
Sai



--
View this message in context: http://lucene.472066.n3.nabble.com/Readers-for-extracting-textual-info-from-pd-doc-excel-for-indexing-the-actual-content-tp4036379p4036538.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54905-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Sun Jan 27 17:54:01 2013
Return-Path: <java-user-return-54905-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id A79EEE7FE
	for <apmail-lucene-java-user-archive@www.apache.org>; Sun, 27 Jan 2013 17:54:01 +0000 (UTC)
Received: (qmail 30344 invoked by uid 500); 27 Jan 2013 17:53:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30231 invoked by uid 500); 27 Jan 2013 17:53:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30221 invoked by uid 99); 27 Jan 2013 17:53:59 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 27 Jan 2013 17:53:59 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jpountz@gmail.com designates 209.85.214.46 as permitted sender)
Received: from [209.85.214.46] (HELO mail-bk0-f46.google.com) (209.85.214.46)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 27 Jan 2013 17:53:53 +0000
Received: by mail-bk0-f46.google.com with SMTP id j5so963834bkw.5
        for <java-user@lucene.apache.org>; Sun, 27 Jan 2013 09:53:31 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=x-received:mime-version:in-reply-to:references:from:date:message-id
         :subject:to:content-type;
        bh=lai35UMRPYQOX6B0hDK2ThBHOI0CZ7/99U7D00PQnKk=;
        b=MJtvDqb72HOZKIQTpxc40CV8gh5+QAQwmjMmy8jdN8ZVTDwmYYd6tw1l1Ia+rOQim+
         mEtcKP9H+s3mJn/cv8jQRtetMmzmMrF8cjuC9niIn5W4c6DfmN1vbG6LM/fQhSPRUvKT
         qFfyQEY6sdZfbpn1b6+VqFgvH5Vet12hEqtcVZR22svvznw0E9ZJdn6FOdqH5rj3xTmr
         kR3KNFCPd5RF1Jf1oP3jPskah+qnRYHBYys8J/wxls63MmNxuVyD0TRqJM/w60S8KM8g
         nJkKSFjsix7At1YZ/aVQXm9y5M43X/PYkolm0ht3h+Y7xd2FxpwJOKUUOstcudjuwCe2
         jzBg==
X-Received: by 10.204.8.207 with SMTP id i15mr1349034bki.19.1359309211708;
 Sun, 27 Jan 2013 09:53:31 -0800 (PST)
MIME-Version: 1.0
Received: by 10.204.253.138 with HTTP; Sun, 27 Jan 2013 09:53:11 -0800 (PST)
In-Reply-To: <1359307614797-4036538.post@n3.nabble.com>
References: <1359154469616-4036379.post@n3.nabble.com> <1359307614797-4036538.post@n3.nabble.com>
From: Adrien Grand <jpountz@gmail.com>
Date: Sun, 27 Jan 2013 18:53:11 +0100
Message-ID: <CAPsWd+N0ssbvdDXnMc5JptkyesDy=juKSRtwpYxx1VK_ZfMQkQ@mail.gmail.com>
Subject: Re: Readers for extracting textual info from pd/doc/excel for
 indexing the actual content
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
X-Virus-Checked: Checked by ClamAV on apache.org

Have you tried using the PDFParser [1] and the OfficeParser [2]
classes from Tika?

This question seems to be more appropriate for the Tika user mailing list [3]?

[1] http://tika.apache.org/1.3/api/org/apache/tika/parser/pdf/PDFParser.html#parse(java.io.InputStream,
org.xml.sax.ContentHandler, org.apache.tika.metadata.Metadata,
org.apache.tika.parser.ParseContext)
[2] http://tika.apache.org/1.3/api/org/apache/tika/parser/microsoft/OfficeParser.html#parse(java.io.InputStream,
org.xml.sax.ContentHandler, org.apache.tika.metadata.Metadata,
org.apache.tika.parser.ParseContext)
[3] http://tika.apache.org/mail-lists.html

-- 
Adrien

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54906-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Sun Jan 27 18:18:02 2013
Return-Path: <java-user-return-54906-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 51EDFE8B2
	for <apmail-lucene-java-user-archive@www.apache.org>; Sun, 27 Jan 2013 18:18:02 +0000 (UTC)
Received: (qmail 86753 invoked by uid 500); 27 Jan 2013 18:18:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86703 invoked by uid 500); 27 Jan 2013 18:18:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86693 invoked by uid 99); 27 Jan 2013 18:18:00 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 27 Jan 2013 18:18:00 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of SRS0=QE/jJr=LU=basetechnology.com=jack@yourhostingaccount.com designates 65.254.253.121 as permitted sender)
Received: from [65.254.253.121] (HELO mailout15.yourhostingaccount.com) (65.254.253.121)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 27 Jan 2013 18:17:50 +0000
Received: from mailscan21.yourhostingaccount.com ([10.1.15.21] helo=mailscan21.yourhostingaccount.com)
	by mailout15.yourhostingaccount.com with esmtp (Exim)
	id 1TzWnJ-00015X-KF
	for java-user@lucene.apache.org; Sun, 27 Jan 2013 13:17:29 -0500
Received: from impout02.yourhostingaccount.com ([10.1.55.2] helo=impout02.yourhostingaccount.com)
	by mailscan21.yourhostingaccount.com with esmtp (Exim)
	id 1TzWnJ-0002dk-Rt
	for java-user@lucene.apache.org; Sun, 27 Jan 2013 13:17:29 -0500
Received: from authsmtp16.yourhostingaccount.com ([10.1.18.16])
	by impout02.yourhostingaccount.com with NO UCE
	id t6HV1k0050LoD9W016HVbL; Sun, 27 Jan 2013 13:17:29 -0500
X-Authority-Analysis: v=2.0 cv=HIVB5/Rv c=1 sm=1
 a=yH02RjTyxywMAIqhn74x1Q==:17 a=aQzbgH187woA:10 a=K5ageQ27sWEA:10
 a=3jZET7lWBKwA:10 a=IkcTkHD0fZMA:10 a=jvYhGVW7AAAA:8 a=JTii-4Zg3XIA:10
 a=mV9VRH-2AAAA:8 a=2rRheMzWK6s9bORpZ4gA:9 a=QEXdDO2ut3YA:10 a=1r3R_6l1K50A:10
 a=b4MAt-FMg-sA:10 a=jp1NmGtarakA:10 a=ltXMujfcukYoTVgNOHxvog==:117
X-EN-OrigOutIP: 10.1.18.16
X-EN-IMPSID: t6HV1k0050LoD9W016HVbL
Received: from 207-237-113-14.c3-0.nyr-ubr1.nyr.ny.cable.rcn.com ([207.237.113.14] helo=JackKrupansky)
	by authsmtp16.yourhostingaccount.com with esmtpa (Exim)
	id 1TzWnJ-00081r-F8
	for java-user@lucene.apache.org; Sun, 27 Jan 2013 13:17:29 -0500
Message-ID: <5CD664A389DD40E1B4DE050CCA4D6C50@JackKrupansky>
From: "Jack Krupansky" <jack@basetechnology.com>
To: <java-user@lucene.apache.org>
References: <1359154469616-4036379.post@n3.nabble.com> <1359307614797-4036538.post@n3.nabble.com> <CAPsWd+N0ssbvdDXnMc5JptkyesDy=juKSRtwpYxx1VK_ZfMQkQ@mail.gmail.com>
In-Reply-To: <CAPsWd+N0ssbvdDXnMc5JptkyesDy=juKSRtwpYxx1VK_ZfMQkQ@mail.gmail.com>
Subject: Re: Readers for extracting textual info from pd/doc/excel for indexing the actual content
Date: Sun, 27 Jan 2013 13:17:27 -0500
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="utf-8";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
Importance: Normal
X-Mailer: Microsoft Windows Live Mail 15.4.3555.308
X-MimeOLE: Produced By Microsoft MimeOLE V15.4.3555.308
X-EN-UserInfo: e0a4b55451ed9f27313ebf02e3d4348d:fc4a93e1349e680c52bdd723c0ab3ef6
X-EN-AuthUser: jack@basetechnology.com
Sender:  "Jack Krupansky" <jack@basetechnology.com>
X-EN-OrigIP: 207.237.113.14
X-EN-OrigHost: 207-237-113-14.c3-0.nyr-ubr1.nyr.ny.cable.rcn.com
X-Virus-Checked: Checked by ClamAV on apache.org

You may be able to use Tika directly without needing to choose the specific 
classes, although the latter may give you the specific data you need without 
the extra overhead.

You could take a look at the Solr Extracting Request Handler source for an 
example:
http://svn.apache.org/viewvc/lucene/dev/tags/lucene_solr_4_1_0/solr/contrib/extraction/src/java/org/apache/solr/handler/extraction/

Basically, Tika extracts a bunch of "metadata" and then you will have to add 
selected metadata to your Lucene documents. "content" is the main document 
body text.

You could try Solr itself to see how it works:
http://wiki.apache.org/solr/ExtractingRequestHandler

-- Jack Krupansky

-----Original Message----- 
From: Adrien Grand
Sent: Sunday, January 27, 2013 12:53 PM
To: java-user@lucene.apache.org
Subject: Re: Readers for extracting textual info from pd/doc/excel for 
indexing the actual content

Have you tried using the PDFParser [1] and the OfficeParser [2]
classes from Tika?

This question seems to be more appropriate for the Tika user mailing list 
[3]?

[1] 
http://tika.apache.org/1.3/api/org/apache/tika/parser/pdf/PDFParser.html#parse(java.io.InputStream,
org.xml.sax.ContentHandler, org.apache.tika.metadata.Metadata,
org.apache.tika.parser.ParseContext)
[2] 
http://tika.apache.org/1.3/api/org/apache/tika/parser/microsoft/OfficeParser.html#parse(java.io.InputStream,
org.xml.sax.ContentHandler, org.apache.tika.metadata.Metadata,
org.apache.tika.parser.ParseContext)
[3] http://tika.apache.org/mail-lists.html

-- 
Adrien

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54907-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Sun Jan 27 19:10:21 2013
Return-Path: <java-user-return-54907-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id F1D48DAF7
	for <apmail-lucene-java-user-archive@www.apache.org>; Sun, 27 Jan 2013 19:10:21 +0000 (UTC)
Received: (qmail 86237 invoked by uid 500); 27 Jan 2013 19:10:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86191 invoked by uid 500); 27 Jan 2013 19:10:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86182 invoked by uid 99); 27 Jan 2013 19:10:19 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 27 Jan 2013 19:10:19 +0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,SPF_NEUTRAL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: 216.139.236.26 is neither permitted nor denied by domain of saisantoshi76@gmail.com)
Received: from [216.139.236.26] (HELO sam.nabble.com) (216.139.236.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 27 Jan 2013 19:10:13 +0000
Received: from ben.nabble.com ([192.168.236.152])
	by sam.nabble.com with esmtp (Exim 4.72)
	(envelope-from <saisantoshi76@gmail.com>)
	id 1TzXc0-0007Pz-Hs
	for java-user@lucene.apache.org; Sun, 27 Jan 2013 11:09:52 -0800
Date: Sun, 27 Jan 2013 11:09:52 -0800 (PST)
From: saisantoshi <saisantoshi76@gmail.com>
To: java-user@lucene.apache.org
Message-ID: <1359313792541-4036557.post@n3.nabble.com>
In-Reply-To: <5CD664A389DD40E1B4DE050CCA4D6C50@JackKrupansky>
References: <1359154469616-4036379.post@n3.nabble.com> <1359307614797-4036538.post@n3.nabble.com> <CAPsWd+N0ssbvdDXnMc5JptkyesDy=juKSRtwpYxx1VK_ZfMQkQ@mail.gmail.com> <5CD664A389DD40E1B4DE050CCA4D6C50@JackKrupansky>
Subject: Re: Readers for extracting textual info from pd/doc/excel for
 indexing the actual content
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

We are not using Solr and using just Lucene core 4.0 engine. I am trying to
see if we can use tika library to extract textual information from
pdf/word/excel documents. I am mainly interested in reading the contents
inside the documents and index using lucene. My question here is , is tika
framework good enough or is there any other better library. Any
issues/experiences in using the tika framework.

Thanks,
Sai.



--
View this message in context: http://lucene.472066.n3.nabble.com/Readers-for-extracting-textual-info-from-pd-doc-excel-for-indexing-the-actual-content-tp4036379p4036557.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54908-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Sun Jan 27 19:49:52 2013
Return-Path: <java-user-return-54908-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 27132E93D
	for <apmail-lucene-java-user-archive@www.apache.org>; Sun, 27 Jan 2013 19:49:52 +0000 (UTC)
Received: (qmail 69080 invoked by uid 500); 27 Jan 2013 19:49:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68885 invoked by uid 500); 27 Jan 2013 19:49:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68877 invoked by uid 99); 27 Jan 2013 19:49:50 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 27 Jan 2013 19:49:49 +0000
X-ASF-Spam-Status: No, hits=1.3 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_PASS,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of SRS0=QE/jJr=LU=basetechnology.com=jack@yourhostingaccount.com designates 65.254.254.75 as permitted sender)
Received: from [65.254.254.75] (HELO mailout08.yourhostingaccount.com) (65.254.254.75)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 27 Jan 2013 19:49:43 +0000
Received: from mailscan07.yourhostingaccount.com ([10.1.15.7] helo=mailscan07.yourhostingaccount.com)
	by mailout08.yourhostingaccount.com with esmtp (Exim)
	id 1TzYEE-0007RH-3e
	for java-user@lucene.apache.org; Sun, 27 Jan 2013 14:49:22 -0500
Received: from impout02.yourhostingaccount.com ([10.1.55.2] helo=impout02.yourhostingaccount.com)
	by mailscan07.yourhostingaccount.com with esmtp (Exim)
	id 1TzYED-0003O4-Ov
	for java-user@lucene.apache.org; Sun, 27 Jan 2013 14:49:21 -0500
Received: from authsmtp13.yourhostingaccount.com ([10.1.18.13])
	by impout02.yourhostingaccount.com with NO UCE
	id t7pM1k0040GvC8i017pMxi; Sun, 27 Jan 2013 14:49:21 -0500
X-Authority-Analysis: v=2.0 cv=HIVB5/Rv c=1 sm=1
 a=yH02RjTyxywMAIqhn74x1Q==:17 a=aQzbgH187woA:10 a=K5ageQ27sWEA:10
 a=3jZET7lWBKwA:10 a=8nJEP1OIZ-IA:10 a=jvYhGVW7AAAA:8 a=JTii-4Zg3XIA:10
 a=mV9VRH-2AAAA:8 a=9I5xiGouAAAA:8 a=OmBbNxAREYTifAZ6xqkA:9 a=wPNLvfGTeEIA:10
 a=JGh3vMD2rnUA:10 a=2fPOlPt4dusA:10 a=98qOcNyB16KL63Z3hZrGug==:117
X-EN-OrigOutIP: 10.1.18.13
X-EN-IMPSID: t7pM1k0040GvC8i017pMxi
Received: from 207-237-113-14.c3-0.nyr-ubr1.nyr.ny.cable.rcn.com ([207.237.113.14] helo=JackKrupansky)
	by authsmtp13.yourhostingaccount.com with esmtpa (Exim)
	id 1TzYED-0006zv-Lg
	for java-user@lucene.apache.org; Sun, 27 Jan 2013 14:49:21 -0500
Message-ID: <999DD06314AF44D38CE6B12EFDDAD714@JackKrupansky>
From: "Jack Krupansky" <jack@basetechnology.com>
To: <java-user@lucene.apache.org>
References: <1359154469616-4036379.post@n3.nabble.com> <1359307614797-4036538.post@n3.nabble.com> <CAPsWd+N0ssbvdDXnMc5JptkyesDy=juKSRtwpYxx1VK_ZfMQkQ@mail.gmail.com> <5CD664A389DD40E1B4DE050CCA4D6C50@JackKrupansky> <1359313792541-4036557.post@n3.nabble.com>
In-Reply-To: <1359313792541-4036557.post@n3.nabble.com>
Subject: Re: Readers for extracting textual info from pd/doc/excel for indexing the actual content
Date: Sun, 27 Jan 2013 14:49:18 -0500
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
Importance: Normal
X-Mailer: Microsoft Windows Live Mail 15.4.3555.308
X-MimeOLE: Produced By Microsoft MimeOLE V15.4.3555.308
X-EN-UserInfo: e0a4b55451ed9f27313ebf02e3d4348d:fc4a93e1349e680c52bdd723c0ab3ef6
X-EN-AuthUser: jack@basetechnology.com
Sender:  "Jack Krupansky" <jack@basetechnology.com>
X-EN-OrigIP: 207.237.113.14
X-EN-OrigHost: 207-237-113-14.c3-0.nyr-ubr1.nyr.ny.cable.rcn.com
X-Virus-Checked: Checked by ClamAV on apache.org

Re-read my last message - and then take a look at that Solr source code, 
which will give you an idea how to use Tika, even though you are using 
Lucene only. If you have specific questions, please be specific.

To answer your latest question, yes, Tika is good enough. Solr 
/update/extract uses it, and Solr is based on Lucene.

-- Jack Krupansky

-----Original Message----- 
From: saisantoshi
Sent: Sunday, January 27, 2013 2:09 PM
To: java-user@lucene.apache.org
Subject: Re: Readers for extracting textual info from pd/doc/excel for 
indexing the actual content

We are not using Solr and using just Lucene core 4.0 engine. I am trying to
see if we can use tika library to extract textual information from
pdf/word/excel documents. I am mainly interested in reading the contents
inside the documents and index using lucene. My question here is , is tika
framework good enough or is there any other better library. Any
issues/experiences in using the tika framework.

Thanks,
Sai.



--
View this message in context: 
http://lucene.472066.n3.nabble.com/Readers-for-extracting-textual-info-from-pd-doc-excel-for-indexing-the-actual-content-tp4036379p4036557.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54909-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Jan 28 14:37:23 2013
Return-Path: <java-user-return-54909-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 25677EBDA
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon, 28 Jan 2013 14:37:23 +0000 (UTC)
Received: (qmail 15680 invoked by uid 500); 28 Jan 2013 14:37:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15383 invoked by uid 500); 28 Jan 2013 14:37:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15251 invoked by uid 99); 28 Jan 2013 14:37:17 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Jan 2013 14:37:17 +0000
X-ASF-Spam-Status: No, hits=0.6 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of vigneshklncit@gmail.com designates 209.85.216.173 as permitted sender)
Received: from [209.85.216.173] (HELO mail-qc0-f173.google.com) (209.85.216.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Jan 2013 14:37:11 +0000
Received: by mail-qc0-f173.google.com with SMTP id b12so1310955qca.18
        for <java-user@lucene.apache.org>; Mon, 28 Jan 2013 06:36:50 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:x-received:in-reply-to:references:date:message-id
         :subject:from:to:content-type;
        bh=Cu86jRXPe2aGGl20OD9L2U8wmKVe2t0mV3LRoyLzQEk=;
        b=f86yM9wSLOw1bmLyXHUimqZ5see/i4jZ8dpB7G4bdf7P7R7L90+cMntFHJRoS8/16X
         8jCDI+FOd2k3xLkfwSgroLfvxUzBkdWwjVvGKE2np802w+dTCYStOYIMk2NcnyuHEUBu
         BaaBawSj1jdYVcz8wVEkzQwgC+rtaBfdAoCjYFRthf6JxKQYwFF6Mge83ksMWV0SJKqU
         DLIzhvZmbHoJ4/S7fbI+knFeNsAWhO+JTHm9Sn7mrvnQ7gg751x4Mp+9b4DHmN8ITQSM
         hsSKjI4WX3f2Qks31nInlAhLLBfaNGrWfEVvLfSeoyeD8KhZAA7i5uXryNhQkhbUO8Hq
         YQdA==
MIME-Version: 1.0
X-Received: by 10.224.184.130 with SMTP id ck2mr15829954qab.41.1359383810383;
 Mon, 28 Jan 2013 06:36:50 -0800 (PST)
Received: by 10.49.71.143 with HTTP; Mon, 28 Jan 2013 06:36:50 -0800 (PST)
In-Reply-To: <1359154469616-4036379.post@n3.nabble.com>
References: <1359154469616-4036379.post@n3.nabble.com>
Date: Mon, 28 Jan 2013 20:06:50 +0530
Message-ID: <CAMMjTZzth902Hmxb=WT3aky_UbT9Odg1ipuNwbEc3abc3Kpz+Q@mail.gmail.com>
Subject: Re: Readers for extracting textual info from pd/doc/excel for
 indexing the actual content
From: VIGNESH S <vigneshklncit@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

Apache Tika:-You can Use to Extract text from PDF,word Documents.

It internally uses Apache POI for Extraction of text from office documents..

It uses PDFBOX for Extraction of text from PDF Documents..



On Sat, Jan 26, 2013 at 4:24 AM, saisantoshi <saisantoshi76@gmail.com> wrote:
> I want to index the document content( such as PDF/word/excel) and am just
> wondering if there are any good readers that I can use to integrate into
> Lucene 4.0. Any pointers/example code is appreciated..
>
> Lucene In Action book mentions "tika" as the library to use but not sure if
> this is the preferred approach. Anyone who used this, if they could share
> some experiences in using this library is greatly appreciated.
>
> AN example of how a pdf document can be indexed using either the tika
> framework or any other reader is much appreciated.
>
> Thanks,
> Sai.
>
>
>
> --
> View this message in context: http://lucene.472066.n3.nabble.com/Readers-for-extracting-textual-info-from-pd-doc-excel-for-indexing-the-actual-content-tp4036379.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>



-- 
Thanks and Regards
Vignesh Srinivasan
9739135640

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54910-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Jan 28 15:44:56 2013
Return-Path: <java-user-return-54910-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id B26CBEAFE
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon, 28 Jan 2013 15:44:56 +0000 (UTC)
Received: (qmail 39676 invoked by uid 500); 28 Jan 2013 15:44:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39452 invoked by uid 500); 28 Jan 2013 15:44:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38196 invoked by uid 99); 28 Jan 2013 15:44:47 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Jan 2013 15:44:47 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [193.196.8.10] (HELO linux3.ids-mannheim.de) (193.196.8.10)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Jan 2013 15:44:41 +0000
Received: from linux2.ids-mannheim.de ([10.0.1.1])
	by linux3.ids-mannheim.de with smtp (Exim 4.72)
	(envelope-from <schnober@ids-mannheim.de>)
	id 1Tzqse-0006SF-95
	for java-user@lucene.apache.org; Mon, 28 Jan 2013 16:44:20 +0100
Received: (qmail 22553 invoked from network); 28 Jan 2013 15:44:24 -0000
Received: from unknown (HELO ?10.99.1.49?) (10.99.1.49)
  by linux2.ids-mannheim.de with SMTP; 28 Jan 2013 15:44:24 -0000
Message-ID: <51069CD3.9060209@ids-mannheim.de>
Date: Mon, 28 Jan 2013 16:44:19 +0100
From: Carsten Schnober <schnober@ids-mannheim.de>
Organization: Institut =?ISO-8859-15?Q?f=FCr_Deutsche_Sprache?=
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:17.0) Gecko/20130106 Thunderbird/17.0.2
MIME-Version: 1.0
To: java-user <java-user@lucene.apache.org>
Content-Type: text/plain; charset=ISO-8859-15
Content-Transfer-Encoding: 8bit
X-SA-Do-Not-Run: Yes
X-SA-Exim-Connect-IP: 10.0.1.1
X-SA-Exim-Rcpt-To: java-user@lucene.apache.org
X-SA-Exim-Mail-From: schnober@ids-mannheim.de
X-Spam-Checker-Version: SpamAssassin 3.3.2 (2011-06-06) on
	linux3.ids-mannheim.de
X-Spam-Level: 
Subject: Custom Query Syntax/Parser
X-SA-Exim-Version: 4.2.1 (built Mon, 03 Jul 2006 09:34:15 +0200)
X-SA-Exim-Scanned: Yes (on linux3.ids-mannheim.de)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-1.1 required=3.0 tests=BAYES_00,RDNS_NONE
	autolearn=no version=3.3.2

Hi,
for our project, we have to implement a custom query language that does
have much in common with the built-in Lucene query language. We have a
formal grammar for that language, formalized with Antlr.

I am not sure about the best way to build/generate a Lucene-based
QueryParser object that is pluggable into our project because some of
the query language's properties refer to information we have stored in
payloads, i.e. require SpanQueries. Unfortunately, it is not as simple
as calling a SpanTermQuery because we would like to allows queries for
e.g. tokens that have the same payload, but not specified in advance.

Ideally, I would like to apply a typical Lucene query processing step as in:
StandardQueryParser parser = new StandardQueryParser(new
WhitespaceAnalyzer(Version.LUCENE_40));
Query q = parser.parse("text", query);

>From that point of view, the only change should be
CustomParser parser = new CustomParser(...);

Unfortunately, I couldn't find much documentation on that. The "Lucene
in Action" textbook refers to building custom query parsers with Antlr
or JavaCC, but does not go into any details. The Lucene query syntax
definition in JavaCC would probably be a valuable source, but going
through that is very tedious. That is why I would like to know whether
you might know of a tutorial or less complex examples.

Thank you very much!
Carsten Schnober

-- 
Institut fr Deutsche Sprache | http://www.ids-mannheim.de
Projekt KorAP                 | http://korap.ids-mannheim.de
Tel. +49-(0)621-43740789      | schnober@ids-mannheim.de
Korpusanalyseplattform der nchsten Generation
Next Generation Corpus Analysis Platform

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54911-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Jan 28 16:12:35 2013
Return-Path: <java-user-return-54911-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 16B07ECCE
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon, 28 Jan 2013 16:12:35 +0000 (UTC)
Received: (qmail 90703 invoked by uid 500); 28 Jan 2013 16:12:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90656 invoked by uid 500); 28 Jan 2013 16:12:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90645 invoked by uid 99); 28 Jan 2013 16:12:32 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Jan 2013 16:12:32 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of uwe@thetaphi.de designates 188.138.97.18 as permitted sender)
Received: from [188.138.97.18] (HELO mail.sd-datasolutions.de) (188.138.97.18)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Jan 2013 16:12:26 +0000
Received: from VEGA (port-92-196-61-239.dynamic.qsc.de [92.196.61.239])
	by mail.sd-datasolutions.de (Postfix) with ESMTPSA id 89A2F14AA03E
	for <java-user@lucene.apache.org>; Mon, 28 Jan 2013 16:12:05 +0000 (UTC)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <51069CD3.9060209@ids-mannheim.de>
In-Reply-To: <51069CD3.9060209@ids-mannheim.de>
Subject: RE: Custom Query Syntax/Parser
Date: Mon, 28 Jan 2013 17:12:04 +0100
Message-ID: <006b01cdfd72$36f2bff0$a4d83fd0$@thetaphi.de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="UTF-8"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Outlook 14.0
Thread-Index: AQJl+17AwQLsKDfvk6CBcrCHKMiniZcu7OTw
Content-Language: de
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

there is no need to extend Lucene's QueryParser. Lucene by itself does =
not need a Query Parser at all and it does not use it, it is just a =
convenience class. If you have worked with Antlr to generate a grammar, =
just use it and build the final org.apache.lucene.search.Query in your =
code.=20

Uwe

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de


> -----Original Message-----
> From: Carsten Schnober [mailto:schnober@ids-mannheim.de]
> Sent: Monday, January 28, 2013 4:44 PM
> To: java-user
> Subject: Custom Query Syntax/Parser
>=20
> Hi,
> for our project, we have to implement a custom query language that =
does
> have much in common with the built-in Lucene query language. We have a
> formal grammar for that language, formalized with Antlr.
>=20
> I am not sure about the best way to build/generate a Lucene-based
> QueryParser object that is pluggable into our project because some of =
the
> query language's properties refer to information we have stored in =
payloads,
> i.e. require SpanQueries. Unfortunately, it is not as simple as =
calling a
> SpanTermQuery because we would like to allows queries for e.g. tokens =
that
> have the same payload, but not specified in advance.
>=20
> Ideally, I would like to apply a typical Lucene query processing step =
as in:
> StandardQueryParser parser =3D new StandardQueryParser(new
> WhitespaceAnalyzer(Version.LUCENE_40));
> Query q =3D parser.parse("text", query);
>=20
> From that point of view, the only change should be CustomParser parser =
=3D
> new CustomParser(...);
>=20
> Unfortunately, I couldn't find much documentation on that. The "Lucene =
in
> Action" textbook refers to building custom query parsers with Antlr or
> JavaCC, but does not go into any details. The Lucene query syntax =
definition
> in JavaCC would probably be a valuable source, but going through that =
is very
> tedious. That is why I would like to know whether you might know of a
> tutorial or less complex examples.
>=20
> Thank you very much!
> Carsten Schnober
>=20
> --
> Institut f=C3=BCr Deutsche Sprache | http://www.ids-mannheim.de
> Projekt KorAP                 | http://korap.ids-mannheim.de
> Tel. +49-(0)621-43740789      | schnober@ids-mannheim.de
> Korpusanalyseplattform der n=C3=A4chsten Generation Next Generation =
Corpus
> Analysis Platform
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54912-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Jan 28 16:43:11 2013
Return-Path: <java-user-return-54912-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 51325EAC7
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon, 28 Jan 2013 16:43:11 +0000 (UTC)
Received: (qmail 18679 invoked by uid 500); 28 Jan 2013 16:43:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18565 invoked by uid 500); 28 Jan 2013 16:43:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18556 invoked by uid 99); 28 Jan 2013 16:43:09 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Jan 2013 16:43:09 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.219.51] (HELO mail-oa0-f51.google.com) (209.85.219.51)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Jan 2013 16:43:01 +0000
Received: by mail-oa0-f51.google.com with SMTP id n12so2956251oag.24
        for <java-user@lucene.apache.org>; Mon, 28 Jan 2013 08:42:40 -0800 (PST)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=x-received:message-id:date:from:user-agent:mime-version:to:subject
         :references:in-reply-to:content-type:content-transfer-encoding
         :x-gm-message-state;
        bh=AwD+e6EgyUn00esq1sDbos4fxmRBHx8cD4Byo2ihTWw=;
        b=oOCViCBfaJuClCR3UaDC0yintKf7cEt2KX3Lrsa/4uXlE/rKuYGbB0BXS5DkZvObqP
         dlZ0qBdPdsGueayylGLMIiEG998dbP3okTGoz17q/XJsaosFmhJI54AWOYeu8QHXVAEs
         jILfqSa2L91O1+EtkJ2DGAo8QZiq8a8EX5hxlNON1OXurFoz6C4Ie4asX3Gk4af8QbCW
         FXgBBXbCQ7uwq841CQzS5AFtYCV9uVG8N4AEe5j7q2c0kmr5FXqA8sxN4hAj373EbzYP
         adNzRaQll2Flx6lRtadMQy9NPROLxGk1GwRNVXKsFOPCcd+AHCJDmrgNYM0UnKhuG0V3
         crmg==
X-Received: by 10.182.227.33 with SMTP id rx1mr11541135obc.69.1359391360009;
        Mon, 28 Jan 2013 08:42:40 -0800 (PST)
Received: from jajo.local (ip68-226-93-53.ri.ri.cox.net. [68.226.93.53])
        by mx.google.com with ESMTPS id ow7sm6480212obc.20.2013.01.28.08.42.38
        (version=TLSv1 cipher=ECDHE-RSA-RC4-SHA bits=128/128);
        Mon, 28 Jan 2013 08:42:39 -0800 (PST)
Message-ID: <5106AA7C.3000104@andrewgilmartin.com>
Date: Mon, 28 Jan 2013 11:42:36 -0500
From: Andrew Gilmartin <andrew@andrewgilmartin.com>
User-Agent: Postbox 3.0.7 (Macintosh/20130119)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Custom Query Syntax/Parser
References: <51069CD3.9060209@ids-mannheim.de> <006b01cdfd72$36f2bff0$a4d83fd0$@thetaphi.de>
In-Reply-To: <006b01cdfd72$36f2bff0$a4d83fd0$@thetaphi.de>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Gm-Message-State: ALoCoQlCed2t5vjdw5VWVoVQ40eOefqQ5gB6YNjloAPNxzygMeEHNbdhCFUISG4hH0BJEdyVApl0
X-Virus-Checked: Checked by ClamAV on apache.org

Uwe Schindler wrote:

> there is no need to extend Lucene's QueryParser. Lucene by 
> itself does not need a Query Parser at all and it does not 
> use it, it is just a convenience class. If you have worked 
> with Antlr to generate a grammar, just use it and build 
> the final org.apache.lucene.search.Query in your code.

I would only add to that is that you might also consider being able to apply a Visitor pattern to your resulting query. I do this so that applying query transformations -- like broadening terms (w/ a lower boost) or adding bigrams -- is done consistently across all expression syntaxes.

When I first started using Lucene, Lucene's Query classes where not suitable for use with the Visitor pattern and so I created my own query class equivalants and other more specialized ones. Lucene's classes might have changed since then (I do not know), but I continue to use my own set and several visitor implementations. The final visitor that I apply is the "convert to Lucene query" transformation.

-- Andrew

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54913-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Jan 28 22:37:05 2013
Return-Path: <java-user-return-54913-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 70570D25E
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon, 28 Jan 2013 22:37:05 +0000 (UTC)
Received: (qmail 58303 invoked by uid 500); 28 Jan 2013 22:37:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58253 invoked by uid 500); 28 Jan 2013 22:37:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 43387 invoked by uid 99); 28 Jan 2013 22:32:15 -0000
X-ASF-Spam-Status: No, hits=1.7 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of george.kelvin738@gmail.com designates 209.85.214.195 as permitted sender)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:x-received:date:message-id:subject:from:to
         :content-type;
        bh=AiqZdBuVobw6jkFZ+7ub6wTq95aVK0iJHp/jdWzXCYY=;
        b=mwvPmOkZYR7gnDp9HiKEP7CRA010OlEb724xPMqF140G/FJU2PXH73G1aHYJ2OY06Z
         mhdfjFRB4IqFkOjAC19CtRamejOhJFVNmtvAKRX62xTAyCMqEnTJqRUGkgKJjxXBmMjW
         STlGZJr2RJqSMWlK0ORCeSvutc/HRDlWNZ+qf5xVhApZI8WwFqteK/3gV9jsnwl6w05A
         bCPL07HHaBgmQZrzBUQmsAyqjBIlbLnQ1wtP4gBTMnd7jBT4XwSwLJdT3m4+4v3tl9vp
         IwlykFEuj8qY6P/qFD1WsoU4PzHqGV8KUxPF/Z9TvHC9Gd9l6yWUajEL0CtHWieGzhNW
         5Q4A==
MIME-Version: 1.0
X-Received: by 10.60.30.131 with SMTP id s3mr3640979oeh.106.1359412309834;
 Mon, 28 Jan 2013 14:31:49 -0800 (PST)
Date: Mon, 28 Jan 2013 14:31:49 -0800
Message-ID: <CAFh=WLgY_B-O8mWVeMeG5e46_pf_vUOWq9LOYv7EnBLdEjOXFg@mail.gmail.com>
Subject: Questions about FuzzyQuery in Lucene 4.x
From: George Kelvin <george.kelvin738@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=e89a8ff1c036d4bd7c04d460d78e
X-Virus-Checked: Checked by ClamAV on apache.org

--e89a8ff1c036d4bd7c04d460d78e
Content-Type: text/plain; charset=windows-1252
Content-Transfer-Encoding: quoted-printable

Hi All,

I=92m working on several projects requiring powerful search features. I=92v=
e
been waiting for Lucene 4 since I read Michael McCandless's blog post about
Lucene=92s new FuzzyQuery and finally I got the chance to test it. The
improvement on the fuzzy search is really impressive!

However, I=92ve encountered a problem today:

In my data, there are some records with keywords =93star=94 and =93wars=94.=
 But
when I issued a fuzzy query with two keywords =93ster=94 and =93wats=94, th=
e engine
failed to find the records.

I=92m wondering if you can provide any inputs on that. Maybe I=92m not doin=
g
fuzzy search in the right way. But all my other fuzzy queries with single
keyword and with longer double keywords worked perfectly.

Another issue is that I=92m also exploring the possibility to do
wildcard+fuzzy search using Lucene. I couldn=92t find any related document
for this on Lucene's website, but I found a stackoverfow thread talking
about this.

http://stackoverflow.com/questions/2631206/lucene-query-bla-match-words-tha=
t-start-with-something-fuzzy-how

I tried the way suggested by the second answer their, and it worked.
However the scoring is strange: all results were assigned with the exactly
same score. Is there anything I can do to get the scoring right?

Can you tell me what=92s the best way to do wildcard fuzzy search?

Any help will be appreciated!

Thanks,

George

--e89a8ff1c036d4bd7c04d460d78e--

From java-user-return-54914-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Jan 28 22:54:37 2013
Return-Path: <java-user-return-54914-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 41E4AD301
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon, 28 Jan 2013 22:54:37 +0000 (UTC)
Received: (qmail 21530 invoked by uid 500); 28 Jan 2013 22:54:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21386 invoked by uid 500); 28 Jan 2013 22:54:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21377 invoked by uid 99); 28 Jan 2013 22:54:35 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Jan 2013 22:54:35 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [216.70.64.92] (HELO n31.mail01.mtsvc.net) (216.70.64.92)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Jan 2013 22:54:28 +0000
Received: from n25.c09.mtsvc.net ([205.186.172.25]:53945)
	by n31.mail01.mtsvc.net with esmtps (TLSv1:AES128-SHA:128)
	(Exim 4.72)
	(envelope-from <jriquelme@totex.cl>)
	id 1TzxaX-00020E-QX
	for java-user@lucene.apache.org; Mon, 28 Jan 2013 17:54:07 -0500
Received: from mail-pa0-f54.google.com ([209.85.220.54]:44817)
	by n25.c09.mtsvc.net with esmtpsa (TLS1.0:RSA_ARCFOUR_SHA1:128)
	(Exim 4.80.1)
	(envelope-from <jriquelme@totex.cl>)
	id 1TzxaV-0003IZ-On
	for java-user@lucene.apache.org; Mon, 28 Jan 2013 14:54:05 -0800
Received: by mail-pa0-f54.google.com with SMTP id bi5so1806840pad.27
        for <java-user@lucene.apache.org>; Mon, 28 Jan 2013 14:54:03 -0800 (PST)
MIME-Version: 1.0
X-Received: by 10.66.74.2 with SMTP id p2mr39826776pav.55.1359413643108; Mon,
 28 Jan 2013 14:54:03 -0800 (PST)
Received: by 10.68.219.196 with HTTP; Mon, 28 Jan 2013 14:54:03 -0800 (PST)
In-Reply-To: <CAL8Pwka+RhWjt+8mRXMPO45ZSr91x8bUUBSPh1fAKRjb=8=Tdw@mail.gmail.com>
References: <CAD86vg7T93KNaaCVX6L_RY_iDfb92m4jpAtXB=Ot4P5eYUu1LQ@mail.gmail.com>
	<CAL8Pwka+RhWjt+8mRXMPO45ZSr91x8bUUBSPh1fAKRjb=8=Tdw@mail.gmail.com>
Date: Mon, 28 Jan 2013 19:54:03 -0300
Message-ID: <CAD86vg4VgT1-n98ubeS67dTo=Tw=zM1Z4ajkLEMjQVcrcXv_Cw@mail.gmail.com>
Subject: Re: About doc and taxo index updates
From: Jorge Riquelme <jriquelme@totex.cl>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
X-Authenticated-User: 139336 jriquelme@totex.cl
X-MT-ID: f4259db4591ca14bff41514f554b8b601684e5c1
X-MT-INTERNAL-ID: f4259db4591ca14bff41514f554b8b601684e5c1
X-Virus-Checked: Checked by ClamAV on apache.org

Hi again, I made the upgrade to lucene 4.1 and everything is working ok now.

thanks

2013/1/25 Michael McCandless <lucene@mikemccandless.com>:
> Hi,
>
> As of Lucene 4.1, DirectoryTaxonomyReader has been fixed to also be
> near-real-time; see https://issues.apache.org/jira/browse/LUCENE-3441
>
> Are you able to upgrade to 4.1?
>
> Mike McCandless
>
> http://blog.mikemccandless.com
>
> On Fri, Jan 25, 2013 at 11:28 AM, Jorge Riquelme <jriquelme@totex.cl> wrote:
>> Hi people,
>>
>> I'm pretty new to Lucene, but with the help of the mighty  google
>> (wich knows everything) I was able to implement a text+faceted search,
>> with progressive refinement. The problem is that I built the document
>> and taxo index in a batch process, and since then the searches have
>> been running with those indexes without any modification. Now, I need
>> to re-index some documents, and update the document and taxo index,
>> keeping the searches active for the users (and reflecting the changes
>> immediately... or as soon as possible).
>>
>> I've been struggling with the javadocs, but I haven't found any way to
>> achieve what I want (because I don't know where to look for sure).
>> Besides that, I read some posts in http://blog.mikemccandless.com;
>> specifically the SearcherManager class seems to be a partial solution
>> to my problem, but I don't how to make it work with the facets. I'm
>> aware of LUCENE-3786, but I couldn't find the class or anything
>> related in the Lucene version with which I'm working with (4.0.0).
>>
>> I would appreciate some advice, maybe an example (xD), or at least
>> some tips of which classes I have to look.
>>
>> best regards
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54915-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Jan 28 23:03:33 2013
Return-Path: <java-user-return-54915-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id A0A6CD356
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon, 28 Jan 2013 23:03:33 +0000 (UTC)
Received: (qmail 45261 invoked by uid 500); 28 Jan 2013 23:03:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45213 invoked by uid 500); 28 Jan 2013 23:03:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45201 invoked by uid 99); 28 Jan 2013 23:03:31 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Jan 2013 23:03:31 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of SRS0=bxIVRo=LV=basetechnology.com=jack@yourhostingaccount.com designates 65.254.253.138 as permitted sender)
Received: from [65.254.253.138] (HELO mailout17.yourhostingaccount.com) (65.254.253.138)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Jan 2013 23:03:23 +0000
Received: from mailscan19.yourhostingaccount.com ([10.1.15.19] helo=mailscan19.yourhostingaccount.com)
	by mailout17.yourhostingaccount.com with esmtp (Exim)
	id 1TzxjC-0002Jr-GS
	for java-user@lucene.apache.org; Mon, 28 Jan 2013 18:03:02 -0500
Received: from impout02.yourhostingaccount.com ([10.1.55.2] helo=impout02.yourhostingaccount.com)
	by mailscan19.yourhostingaccount.com with esmtp (Exim)
	id 1TzxjC-0008O0-5p
	for java-user@lucene.apache.org; Mon, 28 Jan 2013 18:03:02 -0500
Received: from authsmtp13.yourhostingaccount.com ([10.1.18.13])
	by impout02.yourhostingaccount.com with NO UCE
	id tb311k00h0GvC8i01b31xP; Mon, 28 Jan 2013 18:03:01 -0500
X-Authority-Analysis: v=2.0 cv=HIVB5/Rv c=1 sm=1
 a=yH02RjTyxywMAIqhn74x1Q==:17 a=aQzbgH187woA:10 a=nJUqsKCoQKQA:10
 a=3jZET7lWBKwA:10 a=N659UExz7-8A:10 a=jvYhGVW7AAAA:8 a=HVxvFpnHpOUA:10
 a=mV9VRH-2AAAA:8 a=uPZiAMpXAAAA:8 a=HXHfygGpjPKtac9-YNwA:9 a=pILNOxqGKmIA:10
 a=98qOcNyB16KL63Z3hZrGug==:117
X-EN-OrigOutIP: 10.1.18.13
X-EN-IMPSID: tb311k00h0GvC8i01b31xP
Received: from 207-237-113-14.c3-0.nyr-ubr1.nyr.ny.cable.rcn.com ([207.237.113.14] helo=JackKrupansky)
	by authsmtp13.yourhostingaccount.com with esmtpa (Exim)
	id 1TzxjB-0004w9-Ct
	for java-user@lucene.apache.org; Mon, 28 Jan 2013 18:03:01 -0500
Message-ID: <7FF082874BA9462F9B14F4C57FE46F46@JackKrupansky>
From: "Jack Krupansky" <jack@basetechnology.com>
To: <java-user@lucene.apache.org>
References: <CAFh=WLgY_B-O8mWVeMeG5e46_pf_vUOWq9LOYv7EnBLdEjOXFg@mail.gmail.com>
In-Reply-To: <CAFh=WLgY_B-O8mWVeMeG5e46_pf_vUOWq9LOYv7EnBLdEjOXFg@mail.gmail.com>
Subject: Re: Questions about FuzzyQuery in Lucene 4.x
Date: Mon, 28 Jan 2013 18:02:58 -0500
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="Windows-1252";
	reply-type=original
Content-Transfer-Encoding: 8bit
X-Priority: 3
X-MSMail-Priority: Normal
Importance: Normal
X-Mailer: Microsoft Windows Live Mail 15.4.3555.308
X-MimeOLE: Produced By Microsoft MimeOLE V15.4.3555.308
X-EN-UserInfo: e0a4b55451ed9f27313ebf02e3d4348d:fc4a93e1349e680c52bdd723c0ab3ef6
X-EN-AuthUser: jack@basetechnology.com
Sender:  "Jack Krupansky" <jack@basetechnology.com>
X-EN-OrigIP: 207.237.113.14
X-EN-OrigHost: 207-237-113-14.c3-0.nyr-ubr1.nyr.ny.cable.rcn.com
X-Virus-Checked: Checked by ClamAV on apache.org

Let's see your code that calls FuzzyQuery . If you happen to pass a 
prefixLength (3rd parameter) of 3 or more, then "ster" would not match 
"star" (but prefixLength of 2 would match).

-- Jack Krupansky

-----Original Message----- 
From: George Kelvin
Sent: Monday, January 28, 2013 5:31 PM
To: java-user@lucene.apache.org
Subject: Questions about FuzzyQuery in Lucene 4.x

Hi All,

Im working on several projects requiring powerful search features. Ive
been waiting for Lucene 4 since I read Michael McCandless's blog post about
Lucenes new FuzzyQuery and finally I got the chance to test it. The
improvement on the fuzzy search is really impressive!

However, Ive encountered a problem today:

In my data, there are some records with keywords star and wars. But
when I issued a fuzzy query with two keywords ster and wats, the engine
failed to find the records.

Im wondering if you can provide any inputs on that. Maybe Im not doing
fuzzy search in the right way. But all my other fuzzy queries with single
keyword and with longer double keywords worked perfectly.

Another issue is that Im also exploring the possibility to do
wildcard+fuzzy search using Lucene. I couldnt find any related document
for this on Lucene's website, but I found a stackoverfow thread talking
about this.

http://stackoverflow.com/questions/2631206/lucene-query-bla-match-words-that-start-with-something-fuzzy-how

I tried the way suggested by the second answer their, and it worked.
However the scoring is strange: all results were assigned with the exactly
same score. Is there anything I can do to get the scoring right?

Can you tell me whats the best way to do wildcard fuzzy search?

Any help will be appreciated!

Thanks,

George 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54916-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Jan 28 23:25:14 2013
Return-Path: <java-user-return-54916-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id AF644DC36
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon, 28 Jan 2013 23:25:14 +0000 (UTC)
Received: (qmail 15266 invoked by uid 500); 28 Jan 2013 23:25:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15204 invoked by uid 500); 28 Jan 2013 23:25:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15194 invoked by uid 99); 28 Jan 2013 23:25:12 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Jan 2013 23:25:12 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of trejkaz@trypticon.org designates 209.85.212.43 as permitted sender)
Received: from [209.85.212.43] (HELO mail-vb0-f43.google.com) (209.85.212.43)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Jan 2013 23:25:04 +0000
Received: by mail-vb0-f43.google.com with SMTP id fr13so2205752vbb.16
        for <java-user@lucene.apache.org>; Mon, 28 Jan 2013 15:24:43 -0800 (PST)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=x-received:mime-version:x-received:in-reply-to:references:date
         :message-id:subject:from:to:content-type:x-gm-message-state;
        bh=E24dcUzuZkbchCkjjeQ3MAKzL+SmYy7HA+O9HVlo9cM=;
        b=OV/oAPHv4N5+3HgBLcjOYJIeGKmPy/Gsb94a9h25a7agP/Pp0TZOFCJXUd+K04WYbg
         9YKCVXWacpIsTlGsyHV+BOV60wRpkzGDyAXCgY1Tdgn5q8FszesqOXVULTpn8RnDlsea
         X6wQTOWL6X5CjWRWgpblvHMpWwsuBRNN0ZyQ9JNdriWen5uKU0ahxNfjNHda0Omay56C
         fOr8uzU7bDpdkEZ+y8873wtxglMSie0/Vz6ykPwiKBNr1jS7YjUMv3aThiJ+SahmKt6Q
         WqmldJIDgvZtePPXS9a3hdKdUjGcn4o34PKIA4UB4Fu1gprc9+2aR+GRoQ5+u219S91t
         h4dA==
X-Received: by 10.52.69.39 with SMTP id b7mr14622722vdu.124.1359415483441;
        Mon, 28 Jan 2013 15:24:43 -0800 (PST)
Received: from mail-ve0-f171.google.com (mail-ve0-f171.google.com [209.85.128.171])
        by mx.google.com with ESMTPS id p10sm7293416vdh.4.2013.01.28.15.24.42
        (version=TLSv1 cipher=ECDHE-RSA-RC4-SHA bits=128/128);
        Mon, 28 Jan 2013 15:24:42 -0800 (PST)
Received: by mail-ve0-f171.google.com with SMTP id b10so251993vea.2
        for <java-user@lucene.apache.org>; Mon, 28 Jan 2013 15:24:41 -0800 (PST)
MIME-Version: 1.0
X-Received: by 10.52.96.134 with SMTP id ds6mr5720147vdb.107.1359415481383;
 Mon, 28 Jan 2013 15:24:41 -0800 (PST)
Received: by 10.220.138.77 with HTTP; Mon, 28 Jan 2013 15:24:41 -0800 (PST)
In-Reply-To: <5106AA7C.3000104@andrewgilmartin.com>
References: <51069CD3.9060209@ids-mannheim.de>
	<006b01cdfd72$36f2bff0$a4d83fd0$@thetaphi.de>
	<5106AA7C.3000104@andrewgilmartin.com>
Date: Tue, 29 Jan 2013 10:24:41 +1100
Message-ID: <CADuAvzf4NU2vBLpgxf5P4BSv=8VGvNebTpsfxT2OoVdHCEMPaQ@mail.gmail.com>
Subject: Re: Custom Query Syntax/Parser
From: Trejkaz <trejkaz@trypticon.org>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
X-Gm-Message-State: ALoCoQnD4ZUmnD67sNb4BKb6LHBVyIdlOc1O2fDVGC+QbzgAb54vTmCL7uOBRyT0PrqAiCzTpX6w
X-Virus-Checked: Checked by ClamAV on apache.org

On Tue, Jan 29, 2013 at 3:42 AM, Andrew Gilmartin
<andrew@andrewgilmartin.com> wrote:
> When I first started using Lucene, Lucene's Query classes where not suitable
> for use with the Visitor pattern and so I created my own query class
> equivalants and other more specialized ones. Lucene's classes might have
> changed since then (I do not know)

On that subject, the infrastructure behind StandardQueryParser is
along those lines. Query itself is still not very flexible, but
QueryNode is much more convenient and there are processors for walking
the tree to do transformations.

We ended up using ANTLR to do the syntax parsing for our stuff and
then using most of the standard transformations as-is, decorated in
some cases (either to customise or to work around bugs.) Of course we
had to add our own for all the new features, but we got a fair bit of
reuse out of the new framework.

TX

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54917-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Jan 29 01:02:24 2013
Return-Path: <java-user-return-54917-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 71278E2AC
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 29 Jan 2013 01:02:24 +0000 (UTC)
Received: (qmail 94877 invoked by uid 500); 29 Jan 2013 01:02:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94825 invoked by uid 500); 29 Jan 2013 01:02:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94804 invoked by uid 99); 29 Jan 2013 01:02:21 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Jan 2013 01:02:21 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.223.172] (HELO mail-ie0-f172.google.com) (209.85.223.172)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Jan 2013 01:02:15 +0000
Received: by mail-ie0-f172.google.com with SMTP id c10so1446430ieb.3
        for <java-user@lucene.apache.org>; Mon, 28 Jan 2013 17:01:54 -0800 (PST)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=x-received:mime-version:in-reply-to:references:from:date:message-id
         :subject:to:content-type:x-gm-message-state;
        bh=MrKumOzGWPSSKOfmxb3XgTt1NkvSxHIC42K1emXXvEM=;
        b=KEdQz/oAb/bsx9SejoUKmjpbGBAoC6/ghPJAeMecrWvllHTYDSjw//fHVdmcrwyk1P
         kWsVjT+tiiU177X4b8D0N2NPDPAJjVoc9LoP1mZQhgmMuCMhxW3nGIi5/EIXN6ZE7XQ0
         ApLI8/J+DnDlNMBMAn6X5e/WTxsXD9r20AzeGtmitHNgIeXiWLderNMcqftTnBa7pT8a
         LZbUo5nleZjKOimt/HQeiUEqPuzUJxwBz3nscG48nMk6X6Ej7Dt0mjrvYD6EkS/DOFSE
         sd+Eysc/OykQ+wKNylQkXrTflUg5G69ssJuG/fDHjn8BISBGeAQvRvGbqpnk6YpFRzMW
         1gDw==
X-Received: by 10.50.33.146 with SMTP id r18mr6490355igi.110.1359421314027;
 Mon, 28 Jan 2013 17:01:54 -0800 (PST)
MIME-Version: 1.0
Received: by 10.64.91.229 with HTTP; Mon, 28 Jan 2013 17:01:33 -0800 (PST)
In-Reply-To: <CAD86vg4VgT1-n98ubeS67dTo=Tw=zM1Z4ajkLEMjQVcrcXv_Cw@mail.gmail.com>
References: <CAD86vg7T93KNaaCVX6L_RY_iDfb92m4jpAtXB=Ot4P5eYUu1LQ@mail.gmail.com>
 <CAL8Pwka+RhWjt+8mRXMPO45ZSr91x8bUUBSPh1fAKRjb=8=Tdw@mail.gmail.com> <CAD86vg4VgT1-n98ubeS67dTo=Tw=zM1Z4ajkLEMjQVcrcXv_Cw@mail.gmail.com>
From: Michael McCandless <lucene@mikemccandless.com>
Date: Mon, 28 Jan 2013 20:01:33 -0500
Message-ID: <CAL8Pwkapk=PTWjJMwsuU1KCgohqs_Df09g2sULJfVgjdDkUtCQ@mail.gmail.com>
Subject: Re: About doc and taxo index updates
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Gm-Message-State: ALoCoQlpIeqFibqdYXuWms+UoKe+j6w6y+Qszu5GMjTKZ5ocujqSw29uGtalI2U22Cw6FHRYZzVF
X-Virus-Checked: Checked by ClamAV on apache.org

Excellent!

Thanks for bringing closure.

Mike McCandless

http://blog.mikemccandless.com


On Mon, Jan 28, 2013 at 5:54 PM, Jorge Riquelme <jriquelme@totex.cl> wrote:
> Hi again, I made the upgrade to lucene 4.1 and everything is working ok now.
>
> thanks
>
> 2013/1/25 Michael McCandless <lucene@mikemccandless.com>:
>> Hi,
>>
>> As of Lucene 4.1, DirectoryTaxonomyReader has been fixed to also be
>> near-real-time; see https://issues.apache.org/jira/browse/LUCENE-3441
>>
>> Are you able to upgrade to 4.1?
>>
>> Mike McCandless
>>
>> http://blog.mikemccandless.com
>>
>> On Fri, Jan 25, 2013 at 11:28 AM, Jorge Riquelme <jriquelme@totex.cl> wrote:
>>> Hi people,
>>>
>>> I'm pretty new to Lucene, but with the help of the mighty  google
>>> (wich knows everything) I was able to implement a text+faceted search,
>>> with progressive refinement. The problem is that I built the document
>>> and taxo index in a batch process, and since then the searches have
>>> been running with those indexes without any modification. Now, I need
>>> to re-index some documents, and update the document and taxo index,
>>> keeping the searches active for the users (and reflecting the changes
>>> immediately... or as soon as possible).
>>>
>>> I've been struggling with the javadocs, but I haven't found any way to
>>> achieve what I want (because I don't know where to look for sure).
>>> Besides that, I read some posts in http://blog.mikemccandless.com;
>>> specifically the SearcherManager class seems to be a partial solution
>>> to my problem, but I don't how to make it work with the facets. I'm
>>> aware of LUCENE-3786, but I couldn't find the class or anything
>>> related in the Lucene version with which I'm working with (4.0.0).
>>>
>>> I would appreciate some advice, maybe an example (xD), or at least
>>> some tips of which classes I have to look.
>>>
>>> best regards
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54918-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Jan 29 03:14:19 2013
Return-Path: <java-user-return-54918-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 549A0C8CD
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 29 Jan 2013 03:14:19 +0000 (UTC)
Received: (qmail 34658 invoked by uid 500); 29 Jan 2013 03:14:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34164 invoked by uid 500); 29 Jan 2013 03:14:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34116 invoked by uid 99); 29 Jan 2013 03:14:14 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Jan 2013 03:14:14 +0000
X-ASF-Spam-Status: No, hits=2.0 required=5.0
	tests=SPF_NEUTRAL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: 216.139.236.26 is neither permitted nor denied by domain of mr.pnnp@gmail.com)
Received: from [216.139.236.26] (HELO sam.nabble.com) (216.139.236.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Jan 2013 03:14:07 +0000
Received: from ben.nabble.com ([192.168.236.152])
	by sam.nabble.com with esmtp (Exim 4.72)
	(envelope-from <mr.pnnp@gmail.com>)
	id 1U01dr-0004C0-53
	for java-user@lucene.apache.org; Mon, 28 Jan 2013 19:13:47 -0800
Date: Mon, 28 Jan 2013 19:13:47 -0800 (PST)
From: solruser13 <mr.pnnp@gmail.com>
To: java-user@lucene.apache.org
Message-ID: <1359429227142-4036943.post@n3.nabble.com>
Subject: update index for user defined types
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

how to update the index for the fields of user defined type.
we are using oracle database , stored procedure to return user defined type.

i dont find a field to map the fields returned.

please let me know for the same.

thanks



--
View this message in context: http://lucene.472066.n3.nabble.com/update-index-for-user-defined-types-tp4036943.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54919-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Jan 29 05:52:14 2013
Return-Path: <java-user-return-54919-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id AB9DCE344
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 29 Jan 2013 05:52:14 +0000 (UTC)
Received: (qmail 59498 invoked by uid 500); 29 Jan 2013 05:52:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59291 invoked by uid 500); 29 Jan 2013 05:52:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59257 invoked by uid 99); 29 Jan 2013 05:52:09 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Jan 2013 05:52:09 +0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [210.83.25.69] (HELO mailgate.neusoft.com) (210.83.25.69)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Jan 2013 05:52:03 +0000
X-IronPort-AV: E=McAfee;i="5400,1158,6969"; a="92268812"
Received: from unknown (HELO mailgate8.neusoft.com) ([192.168.1.132])
  by mailgate.neusoft.com with ESMTP/TLS/DES-CBC3-SHA; 29 Jan 2013 13:51:39 +0800
Received: from unknown (HELO smtp.neusoft.com) ([192.168.2.141])
  by mailgate8.neusoft.com with ESMTP/TLS/AES128-SHA; 29 Jan 2013 13:51:39 +0800
Received: from DIZH (192.168.1.130) by smtp.neusoft.com (192.168.2.141) with
 Microsoft SMTP Server (TLS) id 14.2.247.3; Tue, 29 Jan 2013 13:51:39 +0800
Date: Tue, 29 Jan 2013 13:54:28 +0800
From: dizh <dizh@neusoft.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Reply-To: dizh <dizh@neusoft.com>
Subject: Large Index Query Help!
References: <1359429227142-4036943.post@n3.nabble.com>
X-Priority: 3
X-Has-Attach: no
X-Mailer: Foxmail 7.0.1.87[cn]
MIME-Version: 1.0
Message-ID: <201301291354182967951@neusoft.com>
Content-Type: multipart/alternative;
	boundary="----=_001_NextPart714520410342_=----"
X-Originating-IP: [192.168.1.130]
X-Virus-Checked: Checked by ClamAV on apache.org

------=_001_NextPart714520410342_=----
Content-Type: text/plain; charset="gb2312"
MIME-Version: 1.0
Content-Transfer-Encoding: base64

SGkgQWxsOg0KDQpJIGhhdmEgYSBsYXJnZSBJbmRleCByZXBvLCBzaXplIGlzIDQ3RywgeWVzIDQ3
RyAsIHdoZW4gSSBsb29rIHVwIGZvciBzb21ldGhpbmcgaW4gaXQgLCBhbmQgdGhlbiBpdCBpcyBk
ZWFkLCBJIHRyYWNlIGl0cyBleGVjdXRpb24gYXMgZm9sbG93czoNCg0KICAgICAgICBhdCBvcmcu
YXBhY2hlLmx1Y2VuZS5zZWFyY2guVG9wRmllbGRDb2xsZWN0b3IuYWRkKFRvcEZpZWxkQ29sbGVj
dG9yLmphdmE6MTE3OCkNCiAgICAgICAgYXQgb3JnLmFwYWNoZS5sdWNlbmUuc2VhcmNoLlRvcEZp
ZWxkQ29sbGVjdG9yJE9uZUNvbXBhcmF0b3JOb25TY29yaW5nQ29sbGVjdG9yLmNvbGxlY3QoVG9w
RmllbGRDb2xsZWN0b3IuamF2YTo4NykNCiAgICAgICAgYXQgb3JnLmFwYWNoZS5sdWNlbmUuc2Vh
cmNoLlNjb3Jlci5zY29yZShTY29yZXIuamF2YTo2MikNCiAgICAgICAgYXQgb3JnLmFwYWNoZS5s
dWNlbmUuc2VhcmNoLkNvbnN0YW50U2NvcmVRdWVyeSRDb25zdGFudFNjb3Jlci5zY29yZShDb25z
dGFudFNjb3JlUXVlcnkuamF2YToyMzgpDQogICAgICAgIGF0IG9yZy5hcGFjaGUubHVjZW5lLnNl
YXJjaC5JbmRleFNlYXJjaGVyLnNlYXJjaChJbmRleFNlYXJjaGVyLmphdmE6NTg4KQ0KICAgICAg
ICBhdCBvcmcuYXBhY2hlLmx1Y2VuZS5zZWFyY2guSW5kZXhTZWFyY2hlci5zZWFyY2goSW5kZXhT
ZWFyY2hlci5qYXZhOjU1NSkNCiAgICAgICAgYXQgb3JnLmFwYWNoZS5sdWNlbmUuc2VhcmNoLklu
ZGV4U2VhcmNoZXIuc2VhcmNoKEluZGV4U2VhcmNoZXIuamF2YTo1MDcpDQogICAgICAgIGF0IG9y
Zy5hcGFjaGUubHVjZW5lLnNlYXJjaC5JbmRleFNlYXJjaGVyLnNlYXJjaChJbmRleFNlYXJjaGVy
LmphdmE6NDg0KQ0KICAgICAgICBhdCBvcmcuYXBhY2hlLmx1Y2VuZS5zZWFyY2guSW5kZXhTZWFy
Y2hlci5zZWFyY2goSW5kZXhTZWFyY2hlci5qYXZhOjMwOSkNCg0KSSB0aGluayBpdCBpcyBiZWNh
dXNlIG15IEluZGV4IGlzIHRvbyBsYXJnZSAsIGFuZCBhbGwganZtIGhlYXBzIGFyZSB1c2VkLCBh
bmQgSSB3YW50IHRvIGFzayBmb3Igc29tZSBhbnN3ZXJzOg0KDQpIb3cgSSBjYW4gcmVkdWNlIHRo
ZSBtZW1vcnkgd2hpY2ggbHVjZW5lIHVzZWQsIExpbnV4IFRvcCBjb21tYW5kIHJlc3VsdCBpcyBh
cyBmb2xsb3c6DQoNCnRvcCAtIDEzOjQ1OjExIHVwICAyOjU2LCAgMyB1c2VycywgIGxvYWQgYXZl
cmFnZTogMC41OSwgMC4zMywgMC41MQ0KVGFza3M6IDE5MyB0b3RhbCwgICAxIHJ1bm5pbmcsIDE5
MiBzbGVlcGluZywgICAwIHN0b3BwZWQsICAgMCB6b21iaWUNCkNwdShzKTogMTMuMiV1cywgIDAu
MiVzeSwgIDAuMCVuaSwgODYuNSVpZCwgIDAuMSV3YSwgIDAuMCVoaSwgIDAuMCVzaSwgIDAuMCVz
dA0KTWVtOiAgIDM5MzM2ODRrIHRvdGFsLCAgMzc5MzkwMGsgdXNlZCwgICAxMzk3ODRrIGZyZWUs
ICAgIDIxNzA0ayBidWZmZXJzDQpTd2FwOiAyMDQ4Mjg2NGsgdG90YWwsICAgNDkwNjQ0ayB1c2Vk
LCAxOTk5MjIyMGsgZnJlZSwgIDE0MDgxNzJrIGNhY2hlZA0KDQogIFBJRCBVU0VSICAgICAgUFIg
IE5JICBWSVJUICBSRVMgIFNIUiBTICVDUFUgJU1FTSAgICBUSU1FKyAgQ09NTUFORCAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAN
CiA1MzE4IHJvb3QgICAgICAyMSAgIDAgNDcuN2cgMS42ZyAyNjdtIFMgOTkuOSA0MS40ICAgMDo1
MC44NCBqYXZhICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgIA0KIDU1MzYgcm9vdCAgICAgIDE1ICAgMCAgNTk2bSAgNjdtIDU4
NTYgUyAgMy4wICAxLjggICAwOjI2LjIyIHB5dGhvbiAgICANCg0KaXQgaXMgY2xlYXJseSBMdWNl
bmUgbG9hZCBhbGwgaW5kZXggaW50byBtZW1vcnksIGFuZCBJIGFsc28ga25vdyBhZnRlciB0aGlz
IHF1ZXJ5IHRoZSBtZW1vcnkgaXMgcmV0dXJuZWQgdG8gT1MsIGJ1dCBqdXN0IGluIHRoaXMgcXVl
cnksIGl0IGlzIGh1bmcuDQoNCkNvdWxkIGFueW9uZSBnaXZlIHNvbWUgc3VnZ2VzdGlvbnMgYWJv
dXQgaG93IHRvIHF1ZXJ5IGxhcmdlIEluZGV4IG9uIGEgc2luZ2xlIG1hY2hpbmUgIG5vdCBkaXN0
cmlidXRlZD8NCg0KIAotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0K
Q29uZmlkZW50aWFsaXR5IE5vdGljZTogVGhlIGluZm9ybWF0aW9uIGNvbnRhaW5lZCBpbiB0aGlz
IGUtbWFpbCBhbmQgYW55IGFjY29tcGFueWluZyBhdHRhY2htZW50KHMpIAppcyBpbnRlbmRlZCBv
bmx5IGZvciB0aGUgdXNlIG9mIHRoZSBpbnRlbmRlZCByZWNpcGllbnQgYW5kIG1heSBiZSBjb25m
aWRlbnRpYWwgYW5kL29yIHByaXZpbGVnZWQgb2YgCk5ldXNvZnQgQ29ycG9yYXRpb24sIGl0cyBz
dWJzaWRpYXJpZXMgYW5kL29yIGl0cyBhZmZpbGlhdGVzLiBJZiBhbnkgcmVhZGVyIG9mIHRoaXMg
Y29tbXVuaWNhdGlvbiBpcyAKbm90IHRoZSBpbnRlbmRlZCByZWNpcGllbnQsIHVuYXV0aG9yaXpl
ZCB1c2UsIGZvcndhcmRpbmcsIHByaW50aW5nLCAgc3RvcmluZywgZGlzY2xvc3VyZSBvciBjb3B5
aW5nIAppcyBzdHJpY3RseSBwcm9oaWJpdGVkLCBhbmQgbWF5IGJlIHVubGF3ZnVsLklmIHlvdSBo
YXZlIHJlY2VpdmVkIHRoaXMgY29tbXVuaWNhdGlvbiBpbiBlcnJvcixwbGVhc2UgCmltbWVkaWF0
ZWx5IG5vdGlmeSB0aGUgc2VuZGVyIGJ5IHJldHVybiBlLW1haWwsIGFuZCBkZWxldGUgdGhlIG9y
aWdpbmFsIG1lc3NhZ2UgYW5kIGFsbCBjb3BpZXMgZnJvbSAKeW91ciBzeXN0ZW0uIFRoYW5rIHlv
dS4gCi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQo=

------=_001_NextPart714520410342_=------


From java-user-return-54920-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Jan 29 09:03:20 2013
Return-Path: <java-user-return-54920-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 91E7BE153
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 29 Jan 2013 09:03:20 +0000 (UTC)
Received: (qmail 76835 invoked by uid 500); 29 Jan 2013 09:03:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76664 invoked by uid 500); 29 Jan 2013 09:03:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76626 invoked by uid 99); 29 Jan 2013 09:03:17 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Jan 2013 09:03:17 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ian.lea@gmail.com designates 209.85.212.176 as permitted sender)
Received: from [209.85.212.176] (HELO mail-wi0-f176.google.com) (209.85.212.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Jan 2013 09:03:11 +0000
Received: by mail-wi0-f176.google.com with SMTP id hm14so1151389wib.15
        for <java-user@lucene.apache.org>; Tue, 29 Jan 2013 01:02:51 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=x-received:mime-version:in-reply-to:references:from:date:message-id
         :subject:to:content-type;
        bh=//J47OzlFP+KEc4Nk68uE6/21MDWCWzP/e17hvcma7s=;
        b=Ah4B6g1EciXcxKIGMSomx4G7iUicYH57vTMYd1D73sKjXLAHlWtY43vduOnvPZ5CBc
         mAxIMQXlnemvM/wBhnd2IoWkCYTevbEMEvX8QHk+K+PepSzPWUvVi9ShwPc6moGSvbBL
         oeGLfVwEHpQ8GsJFsIWuyHlymA5KbZSrfsrI1Bv27U3zJ4ouePPiUM1ZzsH7jHP/DiD+
         jgAHHSM94sl1OBpc0u3PH4Y9xMKapqvZ+22et8bJkouGdWVhpb5JfoRRbLhrjutuYhVs
         XVmMDmrLv5QJNZ3m2nZG/0L9hi+z2mUNxGT2bs7ajBnI8YKRMW3zMocIs8uqL7WWzohi
         E24A==
X-Received: by 10.180.101.133 with SMTP id fg5mr941244wib.31.1359450171115;
 Tue, 29 Jan 2013 01:02:51 -0800 (PST)
MIME-Version: 1.0
Received: by 10.194.57.11 with HTTP; Tue, 29 Jan 2013 01:02:31 -0800 (PST)
In-Reply-To: <201301291354182967951@neusoft.com>
References: <1359429227142-4036943.post@n3.nabble.com> <201301291354182967951@neusoft.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Tue, 29 Jan 2013 09:02:31 +0000
Message-ID: <CAEY5pxXtMJHDwOsKQ6W1A4Ymn0eBzXnKpjoxyzekFF1ODraxhA@mail.gmail.com>
Subject: Re: Large Index Query Help!
To: java-user@lucene.apache.org, dizh <dizh@neusoft.com>
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

Lucene won't load the whole index into memory.  See
http://blog.thetaphi.de/2012/07/use-lucenes-mmapdirectory-on-64bit.html

What version of lucene?

How are you opening index readers?

How are you searching?

How much memory are you giving the jvm?

What else in your app is using all the memory?

What else is going on on your server?


--
Ian.


On Tue, Jan 29, 2013 at 5:54 AM, dizh <dizh@neusoft.com> wrote:
> Hi All:
>
> I hava a large Index repo, size is 47G, yes 47G , when I look up for something in it , and then it is dead, I trace its execution as follows:
>
>         at org.apache.lucene.search.TopFieldCollector.add(TopFieldCollector.java:1178)
>         at org.apache.lucene.search.TopFieldCollector$OneComparatorNonScoringCollector.collect(TopFieldCollector.java:87)
>         at org.apache.lucene.search.Scorer.score(Scorer.java:62)
>         at org.apache.lucene.search.ConstantScoreQuery$ConstantScorer.score(ConstantScoreQuery.java:238)
>         at org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:588)
>         at org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:555)
>         at org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:507)
>         at org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:484)
>         at org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:309)
>
> I think it is because my Index is too large , and all jvm heaps are used, and I want to ask for some answers:
>
> How I can reduce the memory which lucene used, Linux Top command result is as follow:
>
> top - 13:45:11 up  2:56,  3 users,  load average: 0.59, 0.33, 0.51
> Tasks: 193 total,   1 running, 192 sleeping,   0 stopped,   0 zombie
> Cpu(s): 13.2%us,  0.2%sy,  0.0%ni, 86.5%id,  0.1%wa,  0.0%hi,  0.0%si,  0.0%st
> Mem:   3933684k total,  3793900k used,   139784k free,    21704k buffers
> Swap: 20482864k total,   490644k used, 19992220k free,  1408172k cached
>
>   PID USER      PR  NI  VIRT  RES  SHR S %CPU %MEM    TIME+  COMMAND
>  5318 root      21   0 47.7g 1.6g 267m S 99.9 41.4   0:50.84 java
>  5536 root      15   0  596m  67m 5856 S  3.0  1.8   0:26.22 python
>
> it is clearly Lucene load all index into memory, and I also know after this query the memory is returned to OS, but just in this query, it is hung.
>
> Could anyone give some suggestions about how to query large Index on a single machine  not distributed?
>
>
> ---------------------------------------------------------------------------------------------------
> Confidentiality Notice: The information contained in this e-mail and any accompanying attachment(s)
> is intended only for the use of the intended recipient and may be confidential and/or privileged of
> Neusoft Corporation, its subsidiaries and/or its affiliates. If any reader of this communication is
> not the intended recipient, unauthorized use, forwarding, printing,  storing, disclosure or copying
> is strictly prohibited, and may be unlawful.If you have received this communication in error,please
> immediately notify the sender by return e-mail, and delete the original message and all copies from
> your system. Thank you.
> ---------------------------------------------------------------------------------------------------

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54921-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Jan 29 09:10:55 2013
Return-Path: <java-user-return-54921-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 5C607E191
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 29 Jan 2013 09:10:55 +0000 (UTC)
Received: (qmail 99556 invoked by uid 500); 29 Jan 2013 09:10:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99243 invoked by uid 500); 29 Jan 2013 09:10:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99212 invoked by uid 99); 29 Jan 2013 09:10:50 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Jan 2013 09:10:50 +0000
X-ASF-Spam-Status: No, hits=0.6 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 74.125.82.170 as permitted sender)
Received: from [74.125.82.170] (HELO mail-we0-f170.google.com) (74.125.82.170)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Jan 2013 09:10:29 +0000
Received: by mail-we0-f170.google.com with SMTP id z53so136499wey.15
        for <java-user@lucene.apache.org>; Tue, 29 Jan 2013 01:10:05 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=x-received:mime-version:in-reply-to:references:from:date:message-id
         :subject:to:content-type;
        bh=WG6yHw4irs3VwVnJ+cpSxk+kId4TpbDucIfxZMdEkNk=;
        b=Q4gJxpW75TnHYV8K6sFotNyfGLFLFE7wyPp4KV07uDJ/HJHaxSNEGUOLoItaVsWZCx
         sngHeExZIN9W6uPObeuBK0tsEXcf5bC1tKQUYbIYuc9iv+EzVDcACsgxuBlD/Lvxr/Gk
         t01OTLv9s+E5ZH34xcCvtDYDTgBh1vznZFZ+i1CEMtwl7TI6MWGTQ2/VjWCraLhMlhYH
         fbXT/S/ZYDC0QnbMLpBK0zPgGXNOFncOtSmxV+i4yFMD94Orko9I/2+24TI5YAFColRZ
         x0I5779pvBdJfejxwhpSla1OGipVOqPRov8zcCZcsNgg/Ye2WXBTUP8d/rW3dwP4JnGw
         O8tA==
X-Received: by 10.194.172.228 with SMTP id bf4mr782116wjc.38.1359450605776;
 Tue, 29 Jan 2013 01:10:05 -0800 (PST)
MIME-Version: 1.0
Received: by 10.194.57.11 with HTTP; Tue, 29 Jan 2013 01:09:45 -0800 (PST)
In-Reply-To: <1359429227142-4036943.post@n3.nabble.com>
References: <1359429227142-4036943.post@n3.nabble.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Tue, 29 Jan 2013 09:09:45 +0000
Message-ID: <CAEY5pxXNefDnL8Rz-c2uS7shMczJOMUG2VF+6GsDVKHSxsFnGQ@mail.gmail.com>
Subject: Re: update index for user defined types
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

Please try and phrase your question in terms of lucene.  Oracle?
What's that? User defined type?  What's that?

IndexWriter has various updateDocuments() methods.  I usually give all
docs in my indexes a unique id, supplied by me (primary key in
database terminology) and use the method that "Updates a document by
first deleting the document(s) containing term and then adding the new
document.".

You can't update individual fields in a document if that's what you
were asking - you have to replace the whole document.


--
Ian.


On Tue, Jan 29, 2013 at 3:13 AM, solruser13 <mr.pnnp@gmail.com> wrote:
> Hi,
>
> how to update the index for the fields of user defined type.
> we are using oracle database , stored procedure to return user defined type.
>
> i dont find a field to map the fields returned.
>
> please let me know for the same.
>
> thanks
>
>
>
> --
> View this message in context: http://lucene.472066.n3.nabble.com/update-index-for-user-defined-types-tp4036943.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54922-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Jan 29 09:14:16 2013
Return-Path: <java-user-return-54922-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 5488DE1AD
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 29 Jan 2013 09:14:16 +0000 (UTC)
Received: (qmail 13187 invoked by uid 500); 29 Jan 2013 09:14:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12954 invoked by uid 500); 29 Jan 2013 09:14:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12931 invoked by uid 99); 29 Jan 2013 09:14:13 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Jan 2013 09:14:13 +0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [210.83.25.69] (HELO mailgate.neusoft.com) (210.83.25.69)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Jan 2013 09:14:08 +0000
X-IronPort-AV: E=McAfee;i="5400,1158,6969"; a="92290980"
Received: from unknown (HELO mailgate8.neusoft.com) ([192.168.1.132])
  by mailgate.neusoft.com with ESMTP/TLS/DES-CBC3-SHA; 29 Jan 2013 17:13:43 +0800
Received: from unknown (HELO smtp.neusoft.com) ([192.168.2.143])
  by mailgate8.neusoft.com with ESMTP/TLS/AES128-SHA; 29 Jan 2013 17:13:42 +0800
Received: from DIZH (192.168.1.130) by MPS-SYHUB03.neusoft.internal
 (192.168.2.143) with Microsoft SMTP Server (TLS) id 14.2.247.3; Tue, 29 Jan
 2013 17:13:42 +0800
Date: Tue, 29 Jan 2013 17:16:30 +0800
From: dizh <dizh@neusoft.com>
To: Ian Lea <ian.lea@gmail.com>, "java-user@lucene.apache.org"
	<java-user@lucene.apache.org>
Reply-To: dizh <dizh@neusoft.com>
Subject: Re: Re: Large Index Query Help!
References: <1359429227142-4036943.post@n3.nabble.com> <201301291354182967951@neusoft.com>, 
	<CAEY5pxXtMJHDwOsKQ6W1A4Ymn0eBzXnKpjoxyzekFF1ODraxhA@mail.gmail.com>
X-Priority: 3
X-Has-Attach: no
X-Mailer: Foxmail 7.0.1.87[cn]
MIME-Version: 1.0
Message-ID: <2013012917162254625610@neusoft.com>
Content-Type: multipart/alternative;
	boundary="----=_001_NextPart675614635005_=----"
X-Originating-IP: [192.168.1.130]
X-Virus-Checked: Checked by ClamAV on apache.org

------=_001_NextPart675614635005_=----
Content-Type: text/plain; charset="utf-8"
MIME-Version: 1.0
Content-Transfer-Encoding: base64

T0vvvIwgSSB3aWxsIHNob3cgdGhlIHNjZW5lLg0KDQoxIE9TIDogUmVkaGF0NQ0KMiBKVk0gNjRi
aXQgamRrMS43DQozIEx1Y2VuZTQuMA0KNCBKVk0gRmxhZyA6IC1YbXM1MTJtIC1YbXgxNTc2bQ0K
NSBPdGhlciBhcHAgZG9uJ3Qgb2NjdXB5IHRvbyBtdWNoIG1lbW9yeQ0KDQoNCk15IENvZGUgaXMg
YXMgZm9sbG93Og0KDQogIHB1YmxpYyBzeW5jaHJvbml6ZWQgSW5kZXhTZWFyY2hlciBvcGVuU2Vh
cmNoZXIoKSB7DQogICAgICAgIGlmIChRdWVyeVV0aWwuaW5kZXhFeGlzdChTZWFyY2hFbnYuc2Vh
cmNoRW52LmluZGV4RGlyKQ0KICAgICAgICAgICAgJiYgU2VhcmNoRW52LnNlYXJjaEVudi5zdGF0
dXMgIT0gSW5kZXhTdGF0dXMuU3RvcFdvcmtpbmcpIHsNCiAgICAgICAgICAgIHRyeSB7DQovLyBU
aGlzIGlzIEhvdyBJIGdldCBMdWNlbmUgU2VhcmNoZXINCiAgICAgICAgICAgICAgICBJbmRleFNl
YXJjaGVyIHNlYXJjaGVyID0gU2VhcmNoRW52LnNlYXJjaEVudi5pbmRleEJ1aWxkZXINCiAgICAg
ICAgICAgICAgICAgICAgLmdldE5SVE1hbmFnZXIoKS5hY3F1aXJlKCk7DQogICAgICAgICAgICAg
ICAgcmV0dXJuIHNlYXJjaGVyOw0KICAgICAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHsN
CiAgICAgICAgICAgICAgICBsb2dnZXIuZXJyb3IoZS5nZXRNZXNzYWdlKCksIGUpOw0KICAgICAg
ICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIHJldHVybiBudWxsOw0KICAgIH0NCg0KSSB1c2Ug
THVjZW5lIE5SVE1hbmFnZXIgdG8gZ2V0IHNlYXJjaGVyLCBJIHRoaW5rIGl0IGlzIE9LLg0KDQpN
eSBTZWFyY2hlciBvbmx5IHVzZXMgb25lIGRpcmVjdG9yeSwgQWxsIG15IGxvZyBhcmUgaW5kZXhl
ZCBpbnRvIHRoYXQgZGlyZWN0b3J5Lg0KDQogICAgICAgICAgICAgICAgVG9wRG9jcyBkb2NzID0g
c2VhcmNoZXIuc2VhcmNoKHF1ZXJ5LCBudWxsLCBudW1iZXIsIHNvcnQpOw0KICAgICAgICAgICAg
ICAgIGludCB0b3RhbCA9IGRvY3MudG90YWxIaXRzOw0KICAgICAgICAgICAgICAgIGlmICh0b3Rh
bCA9PSAwKSB7DQogICAgICAgICAgICAgICAgICAgIHJldHVybiAwOw0KICAgICAgICAgICAgICAg
IH0NCiAgICAgICAgICAgICAgICBpbnQgbnVtYmVyMiA9IGVuZCAtIHN0YXJ0ICsgMTsNCiAgICAg
ICAgICAgICAgICBUb3BEb2NzIHRvcHMgPSBudWxsOw0KICAgICAgICAgICAgICAgIGlmIChkb2Nz
LnNjb3JlRG9jcy5sZW5ndGggPiAxKSB7DQogICAgICAgICAgICAgICAgICAgIGlmIChzdGFydCA9
PSAwKQ0KICAgICAgICAgICAgICAgICAgICAgICAgdG9wcyA9IHNlYXJjaGVyLnNlYXJjaEFmdGVy
KGRvY3Muc2NvcmVEb2NzW3N0YXJ0XSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBxdWVy
eSwgbnVtYmVyMiwgc29ydCk7DQogICAgICAgICAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAg
ICAgICAgICAgICAgIHRvcHMgPSBzZWFyY2hlci5zZWFyY2hBZnRlcihkb2NzLnNjb3JlRG9jc1tz
dGFydCAtIDFdLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXJ5LCBudW1iZXIyLCBz
b3J0KTsNCiAgICAgICAgICAgICAgICB9DQpzdGFydCBhbmQgZW5kIGlzIHVzZWQgdG8gZG8gcGFn
aW5nICwgbGlrZSBTUUwgbGltaXQuDQoNCkkgdGhpbmsgaXQgaXMgYmVjYXVzZSBJIHVzZSBzZWFy
Y2hlci5zZWFyY2ggdG8gZmluZCB0b3RhbCwgYW5kIHRoZW4gdXNlIHNlYXJjaEFmdGVyIHRvIGRv
IHBhZ2UuDQoNCmJ1dCBpZiBJIGRvbid0IGRvIHRoZSBmaXJzdCBzdGVwLCBIb3cgSSBjYW4gZG8g
cGFnaW5nIGVmZmNpZW50bHkgPyBvciBJIHVzZSBjdXN0b20gQ29sbGVjdG9yID8NCg0KSSBhbSBu
ZXcgdG8gTHVjZW5lICwgZm9yZ2l2ZSBtZSBmb3IgbXkgaWdub3JpbmcuDQoNCg0KDQoNCg0KDQpG
cm9tOiBJYW4gTGVhDQpEYXRlOiAyMDEzLTAxLTI5IDE3OjAyDQpUbzogamF2YS11c2VyQGx1Y2Vu
ZS5hcGFjaGUub3JnOyBkaXpoDQpTdWJqZWN0OiBSZTogTGFyZ2UgSW5kZXggUXVlcnkgSGVscCEN
Ckx1Y2VuZSB3b24ndCBsb2FkIHRoZSB3aG9sZSBpbmRleCBpbnRvIG1lbW9yeS4gIFNlZQ0KaHR0
cDovL2Jsb2cudGhldGFwaGkuZGUvMjAxMi8wNy91c2UtbHVjZW5lcy1tbWFwZGlyZWN0b3J5LW9u
LTY0Yml0Lmh0bWwNCg0KV2hhdCB2ZXJzaW9uIG9mIGx1Y2VuZT8NCg0KSG93IGFyZSB5b3Ugb3Bl
bmluZyBpbmRleCByZWFkZXJzPw0KDQpIb3cgYXJlIHlvdSBzZWFyY2hpbmc/DQoNCkhvdyBtdWNo
IG1lbW9yeSBhcmUgeW91IGdpdmluZyB0aGUganZtPw0KDQpXaGF0IGVsc2UgaW4geW91ciBhcHAg
aXMgdXNpbmcgYWxsIHRoZSBtZW1vcnk/DQoNCldoYXQgZWxzZSBpcyBnb2luZyBvbiBvbiB5b3Vy
IHNlcnZlcj8NCg0KDQotLQ0KSWFuLg0KDQoNCk9uIFR1ZSwgSmFuIDI5LCAyMDEzIGF0IDU6NTQg
QU0sIGRpemggPGRpemhAbmV1c29mdC5jb20+IHdyb3RlOg0KPiBIaSBBbGw6DQo+DQo+IEkgaGF2
YSBhIGxhcmdlIEluZGV4IHJlcG8sIHNpemUgaXMgNDdHLCB5ZXMgNDdHICwgd2hlbiBJIGxvb2sg
dXAgZm9yIHNvbWV0aGluZyBpbiBpdCAsIGFuZCB0aGVuIGl0IGlzIGRlYWQsIEkgdHJhY2UgaXRz
IGV4ZWN1dGlvbiBhcyBmb2xsb3dzOg0KPg0KPiAgICAgICAgIGF0IG9yZy5hcGFjaGUubHVjZW5l
LnNlYXJjaC5Ub3BGaWVsZENvbGxlY3Rvci5hZGQoVG9wRmllbGRDb2xsZWN0b3IuamF2YToxMTc4
KQ0KPiAgICAgICAgIGF0IG9yZy5hcGFjaGUubHVjZW5lLnNlYXJjaC5Ub3BGaWVsZENvbGxlY3Rv
ciRPbmVDb21wYXJhdG9yTm9uU2NvcmluZ0NvbGxlY3Rvci5jb2xsZWN0KFRvcEZpZWxkQ29sbGVj
dG9yLmphdmE6ODcpDQo+ICAgICAgICAgYXQgb3JnLmFwYWNoZS5sdWNlbmUuc2VhcmNoLlNjb3Jl
ci5zY29yZShTY29yZXIuamF2YTo2MikNCj4gICAgICAgICBhdCBvcmcuYXBhY2hlLmx1Y2VuZS5z
ZWFyY2guQ29uc3RhbnRTY29yZVF1ZXJ5JENvbnN0YW50U2NvcmVyLnNjb3JlKENvbnN0YW50U2Nv
cmVRdWVyeS5qYXZhOjIzOCkNCj4gICAgICAgICBhdCBvcmcuYXBhY2hlLmx1Y2VuZS5zZWFyY2gu
SW5kZXhTZWFyY2hlci5zZWFyY2goSW5kZXhTZWFyY2hlci5qYXZhOjU4OCkNCj4gICAgICAgICBh
dCBvcmcuYXBhY2hlLmx1Y2VuZS5zZWFyY2guSW5kZXhTZWFyY2hlci5zZWFyY2goSW5kZXhTZWFy
Y2hlci5qYXZhOjU1NSkNCj4gICAgICAgICBhdCBvcmcuYXBhY2hlLmx1Y2VuZS5zZWFyY2guSW5k
ZXhTZWFyY2hlci5zZWFyY2goSW5kZXhTZWFyY2hlci5qYXZhOjUwNykNCj4gICAgICAgICBhdCBv
cmcuYXBhY2hlLmx1Y2VuZS5zZWFyY2guSW5kZXhTZWFyY2hlci5zZWFyY2goSW5kZXhTZWFyY2hl
ci5qYXZhOjQ4NCkNCj4gICAgICAgICBhdCBvcmcuYXBhY2hlLmx1Y2VuZS5zZWFyY2guSW5kZXhT
ZWFyY2hlci5zZWFyY2goSW5kZXhTZWFyY2hlci5qYXZhOjMwOSkNCj4NCj4gSSB0aGluayBpdCBp
cyBiZWNhdXNlIG15IEluZGV4IGlzIHRvbyBsYXJnZSAsIGFuZCBhbGwganZtIGhlYXBzIGFyZSB1
c2VkLCBhbmQgSSB3YW50IHRvIGFzayBmb3Igc29tZSBhbnN3ZXJzOg0KPg0KPiBIb3cgSSBjYW4g
cmVkdWNlIHRoZSBtZW1vcnkgd2hpY2ggbHVjZW5lIHVzZWQsIExpbnV4IFRvcCBjb21tYW5kIHJl
c3VsdCBpcyBhcyBmb2xsb3c6DQo+DQo+IHRvcCAtIDEzOjQ1OjExIHVwICAyOjU2LCAgMyB1c2Vy
cywgIGxvYWQgYXZlcmFnZTogMC41OSwgMC4zMywgMC41MQ0KPiBUYXNrczogMTkzIHRvdGFsLCAg
IDEgcnVubmluZywgMTkyIHNsZWVwaW5nLCAgIDAgc3RvcHBlZCwgICAwIHpvbWJpZQ0KPiBDcHUo
cyk6IDEzLjIldXMsICAwLjIlc3ksICAwLjAlbmksIDg2LjUlaWQsICAwLjEld2EsICAwLjAlaGks
ICAwLjAlc2ksICAwLjAlc3QNCj4gTWVtOiAgIDM5MzM2ODRrIHRvdGFsLCAgMzc5MzkwMGsgdXNl
ZCwgICAxMzk3ODRrIGZyZWUsICAgIDIxNzA0ayBidWZmZXJzDQo+IFN3YXA6IDIwNDgyODY0ayB0
b3RhbCwgICA0OTA2NDRrIHVzZWQsIDE5OTkyMjIwayBmcmVlLCAgMTQwODE3MmsgY2FjaGVkDQo+
DQo+ICAgUElEIFVTRVIgICAgICBQUiAgTkkgIFZJUlQgIFJFUyAgU0hSIFMgJUNQVSAlTUVNICAg
IFRJTUUrICBDT01NQU5EDQo+ICA1MzE4IHJvb3QgICAgICAyMSAgIDAgNDcuN2cgMS42ZyAyNjdt
IFMgOTkuOSA0MS40ICAgMDo1MC44NCBqYXZhDQo+ICA1NTM2IHJvb3QgICAgICAxNSAgIDAgIDU5
Nm0gIDY3bSA1ODU2IFMgIDMuMCAgMS44ICAgMDoyNi4yMiBweXRob24NCj4NCj4gaXQgaXMgY2xl
YXJseSBMdWNlbmUgbG9hZCBhbGwgaW5kZXggaW50byBtZW1vcnksIGFuZCBJIGFsc28ga25vdyBh
ZnRlciB0aGlzIHF1ZXJ5IHRoZSBtZW1vcnkgaXMgcmV0dXJuZWQgdG8gT1MsIGJ1dCBqdXN0IGlu
IHRoaXMgcXVlcnksIGl0IGlzIGh1bmcuDQo+DQo+IENvdWxkIGFueW9uZSBnaXZlIHNvbWUgc3Vn
Z2VzdGlvbnMgYWJvdXQgaG93IHRvIHF1ZXJ5IGxhcmdlIEluZGV4IG9uIGEgc2luZ2xlIG1hY2hp
bmUgIG5vdCBkaXN0cmlidXRlZD8NCj4NCj4NCj4gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tDQo+IENvbmZpZGVudGlhbGl0eSBOb3RpY2U6IFRoZSBpbmZvcm1hdGlv
biBjb250YWluZWQgaW4gdGhpcyBlLW1haWwgYW5kIGFueSBhY2NvbXBhbnlpbmcgYXR0YWNobWVu
dChzKQ0KPiBpcyBpbnRlbmRlZCBvbmx5IGZvciB0aGUgdXNlIG9mIHRoZSBpbnRlbmRlZCByZWNp
cGllbnQgYW5kIG1heSBiZSBjb25maWRlbnRpYWwgYW5kL29yIHByaXZpbGVnZWQgb2YNCj4gTmV1
c29mdCBDb3Jwb3JhdGlvbiwgaXRzIHN1YnNpZGlhcmllcyBhbmQvb3IgaXRzIGFmZmlsaWF0ZXMu
IElmIGFueSByZWFkZXIgb2YgdGhpcyBjb21tdW5pY2F0aW9uIGlzDQo+IG5vdCB0aGUgaW50ZW5k
ZWQgcmVjaXBpZW50LCB1bmF1dGhvcml6ZWQgdXNlLCBmb3J3YXJkaW5nLCBwcmludGluZywgIHN0
b3JpbmcsIGRpc2Nsb3N1cmUgb3IgY29weWluZw0KPiBpcyBzdHJpY3RseSBwcm9oaWJpdGVkLCBh
bmQgbWF5IGJlIHVubGF3ZnVsLklmIHlvdSBoYXZlIHJlY2VpdmVkIHRoaXMgY29tbXVuaWNhdGlv
biBpbiBlcnJvcixwbGVhc2UNCj4gaW1tZWRpYXRlbHkgbm90aWZ5IHRoZSBzZW5kZXIgYnkgcmV0
dXJuIGUtbWFpbCwgYW5kIGRlbGV0ZSB0aGUgb3JpZ2luYWwgbWVzc2FnZSBhbmQgYWxsIGNvcGll
cyBmcm9tDQo+IHlvdXIgc3lzdGVtLiBUaGFuayB5b3UuDQo+IC0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLQotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0KQ29uZmlkZW50aWFsaXR5IE5vdGljZTogVGhlIGluZm9ybWF0aW9uIGNvbnRhaW5l
ZCBpbiB0aGlzIGUtbWFpbCBhbmQgYW55IGFjY29tcGFueWluZyBhdHRhY2htZW50KHMpIAppcyBp
bnRlbmRlZCBvbmx5IGZvciB0aGUgdXNlIG9mIHRoZSBpbnRlbmRlZCByZWNpcGllbnQgYW5kIG1h
eSBiZSBjb25maWRlbnRpYWwgYW5kL29yIHByaXZpbGVnZWQgb2YgCk5ldXNvZnQgQ29ycG9yYXRp
b24sIGl0cyBzdWJzaWRpYXJpZXMgYW5kL29yIGl0cyBhZmZpbGlhdGVzLiBJZiBhbnkgcmVhZGVy
IG9mIHRoaXMgY29tbXVuaWNhdGlvbiBpcyAKbm90IHRoZSBpbnRlbmRlZCByZWNpcGllbnQsIHVu
YXV0aG9yaXplZCB1c2UsIGZvcndhcmRpbmcsIHByaW50aW5nLCAgc3RvcmluZywgZGlzY2xvc3Vy
ZSBvciBjb3B5aW5nIAppcyBzdHJpY3RseSBwcm9oaWJpdGVkLCBhbmQgbWF5IGJlIHVubGF3ZnVs
LklmIHlvdSBoYXZlIHJlY2VpdmVkIHRoaXMgY29tbXVuaWNhdGlvbiBpbiBlcnJvcixwbGVhc2Ug
CmltbWVkaWF0ZWx5IG5vdGlmeSB0aGUgc2VuZGVyIGJ5IHJldHVybiBlLW1haWwsIGFuZCBkZWxl
dGUgdGhlIG9yaWdpbmFsIG1lc3NhZ2UgYW5kIGFsbCBjb3BpZXMgZnJvbSAKeW91ciBzeXN0ZW0u
IFRoYW5rIHlvdS4gCi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQo=

------=_001_NextPart675614635005_=------


From java-user-return-54923-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Jan 29 09:34:55 2013
Return-Path: <java-user-return-54923-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 1D282EEE6
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 29 Jan 2013 09:34:55 +0000 (UTC)
Received: (qmail 72309 invoked by uid 500); 29 Jan 2013 09:34:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71929 invoked by uid 500); 29 Jan 2013 09:34:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71904 invoked by uid 99); 29 Jan 2013 09:34:52 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Jan 2013 09:34:52 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of uwe@thetaphi.de designates 188.138.97.18 as permitted sender)
Received: from [188.138.97.18] (HELO mail.sd-datasolutions.de) (188.138.97.18)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Jan 2013 09:34:46 +0000
Received: from VEGA (port-92-196-61-239.dynamic.qsc.de [92.196.61.239])
	by mail.sd-datasolutions.de (Postfix) with ESMTPSA id 0640614AA03E;
	Tue, 29 Jan 2013 09:34:23 +0000 (UTC)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>,
	"'dizh'" <dizh@neusoft.com>,
	"'Ian Lea'" <ian.lea@gmail.com>
References: <1359429227142-4036943.post@n3.nabble.com> <201301291354182967951@neusoft.com>, 	<CAEY5pxXtMJHDwOsKQ6W1A4Ymn0eBzXnKpjoxyzekFF1ODraxhA@mail.gmail.com> <2013012917162254625610@neusoft.com>
In-Reply-To: <2013012917162254625610@neusoft.com>
Subject: RE: Re: Large Index Query Help!
Date: Tue, 29 Jan 2013 10:34:24 +0100
Message-ID: <001901cdfe03$d36597e0$7a30c7a0$@thetaphi.de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="UTF-8"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Outlook 14.0
Thread-Index: AQGqaM+wyHGQHHi8OsvsUyJL7HIJXAFWPq9sAhJA+aACs1i0h5h2VPtg
Content-Language: de
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

> 4 JVM Flag : -Xms512m -Xmx1576m
> 5 Other app don't occupy too much memory

As said by Ian, read this blog post and you will understand that Lucene =
is not eating your memory. The "RES" column in TOP shows the actual =
memory usage (resident memory):

  PID USER      PR  NI  VIRT  RES  SHR S %CPU %MEM    TIME+  COMMAND     =
                                                          =20
 5318 root      21   0 47.7g 1.6g 267m S 99.9 41.4   0:50.84 java        =
                                                          =20

And that is only 1.6 GB which is your -Xmx. The "VIRT" column only shows =
address space and that=E2=80=99s more or less unlimited on 64 bit =
operating systems. Please  read (that's important to understand your top =
output): =
http://blog.thetaphi.de/2012/07/use-lucenes-mmapdirectory-on-64bit.html

The problem that your system stops responding may be a deadlock in your =
openSearcher method. I think there may be too much synchronization. =
Aquire() needs no synchronization. This is as bad as synchronizing =
IndexWriter calls. Those classes are documented to be thread safe and =
using it with extra synchronization is hurting performance or make it =
stop working. Can you post the thread stack when it is hung. The trace =
you posted has no locks involved.

Uwe

> My Code is as follow:
>=20
>   public synchronized IndexSearcher openSearcher() {
>         if (QueryUtil.indexExist(SearchEnv.searchEnv.indexDir)
>             && SearchEnv.searchEnv.status !=3D =
IndexStatus.StopWorking) {
>             try {
> // This is How I get Lucene Searcher
>                 IndexSearcher searcher =3D =
SearchEnv.searchEnv.indexBuilder
>                     .getNRTManager().acquire();
>                 return searcher;
>             } catch (Exception e) {
>                 logger.error(e.getMessage(), e);
>             }
>         }
>         return null;
>     }
>=20
> I use Lucene NRTManager to get searcher, I think it is OK.
>=20
> My Searcher only uses one directory, All my log are indexed into that
> directory.
>=20
>                 TopDocs docs =3D searcher.search(query, null, number, =
sort);
>                 int total =3D docs.totalHits;
>                 if (total =3D=3D 0) {
>                     return 0;
>                 }
>                 int number2 =3D end - start + 1;
>                 TopDocs tops =3D null;
>                 if (docs.scoreDocs.length > 1) {
>                     if (start =3D=3D 0)
>                         tops =3D =
searcher.searchAfter(docs.scoreDocs[start],
>                             query, number2, sort);
>                     else
>                         tops =3D =
searcher.searchAfter(docs.scoreDocs[start - 1],
>                             query, number2, sort);
>                 }
> start and end is used to do paging , like SQL limit.
>=20
> I think it is because I use searcher.search to find total, and then =
use
> searchAfter to do page.
>=20
> but if I don't do the first step, How I can do paging effciently ? or =
I use custom
> Collector ?
>=20
> I am new to Lucene , forgive me for my ignoring.
>=20
>=20
>=20
>=20
>=20
>=20
> From: Ian Lea
> Date: 2013-01-29 17:02
> To: java-user@lucene.apache.org; dizh
> Subject: Re: Large Index Query Help!
> Lucene won't load the whole index into memory.  See
> =
http://blog.thetaphi.de/2012/07/use-lucenes-mmapdirectory-on-64bit.html
>=20
> What version of lucene?
>=20
> How are you opening index readers?
>=20
> How are you searching?
>=20
> How much memory are you giving the jvm?
>=20
> What else in your app is using all the memory?
>=20
> What else is going on on your server?
>=20
>=20
> --
> Ian.
>=20
>=20
> On Tue, Jan 29, 2013 at 5:54 AM, dizh <dizh@neusoft.com> wrote:
> > Hi All:
> >
> > I hava a large Index repo, size is 47G, yes 47G , when I look up for
> something in it , and then it is dead, I trace its execution as =
follows:
> >
> >         at
> =
org.apache.lucene.search.TopFieldCollector.add(TopFieldCollector.java:117=
8
> )
> >         at
> org.apache.lucene.search.TopFieldCollector$OneComparatorNonScoringColl
> ector.collect(TopFieldCollector.java:87)
> >         at org.apache.lucene.search.Scorer.score(Scorer.java:62)
> >         at
> org.apache.lucene.search.ConstantScoreQuery$ConstantScorer.score(Const
> antScoreQuery.java:238)
> >         at
> org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:588)
> >         at
> org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:555)
> >         at
> org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:507)
> >         at
> org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:484)
> >         at
> > =
org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:309)
> >
> > I think it is because my Index is too large , and all jvm heaps are =
used, and I
> want to ask for some answers:
> >
> > How I can reduce the memory which lucene used, Linux Top command
> result is as follow:
> >
> > top - 13:45:11 up  2:56,  3 users,  load average: 0.59, 0.33, 0.51
> > Tasks: 193 total,   1 running, 192 sleeping,   0 stopped,   0 zombie
> > Cpu(s): 13.2%us,  0.2%sy,  0.0%ni, 86.5%id,  0.1%wa,  0.0%hi,  =
0.0%si,  0.0%st
> > Mem:   3933684k total,  3793900k used,   139784k free,    21704k =
buffers
> > Swap: 20482864k total,   490644k used, 19992220k free,  1408172k =
cached
> >
> >   PID USER      PR  NI  VIRT  RES  SHR S %CPU %MEM    TIME+  COMMAND
> >  5318 root      21   0 47.7g 1.6g 267m S 99.9 41.4   0:50.84 java
> >  5536 root      15   0  596m  67m 5856 S  3.0  1.8   0:26.22 python
> >
> > it is clearly Lucene load all index into memory, and I also know =
after this
> query the memory is returned to OS, but just in this query, it is =
hung.
> >
> > Could anyone give some suggestions about how to query large Index on =
a
> single machine  not distributed?
> >
> >
> > =
----------------------------------------------------------------------
> > ----------------------------- Confidentiality Notice: The =
information
> > contained in this e-mail and any accompanying attachment(s) is
> > intended only for the use of the intended recipient and may be
> > confidential and/or privileged of Neusoft Corporation, its
> > subsidiaries and/or its affiliates. If any reader of this
> > communication is not the intended recipient, unauthorized use,
> > forwarding, printing,  storing, disclosure or copying is strictly
> > prohibited, and may be unlawful.If you have received this =
communication
> in error,please immediately notify the sender by return e-mail, and =
delete
> the original message and all copies from your system. Thank you.
> > =
----------------------------------------------------------------------
> > -----------------------------
> =
-------------------------------------------------------------------------=
---------------------
> -----
> Confidentiality Notice: The information contained in this e-mail and =
any
> accompanying attachment(s) is intended only for the use of the =
intended
> recipient and may be confidential and/or privileged of Neusoft =
Corporation,
> its subsidiaries and/or its affiliates. If any reader of this =
communication is not
> the intended recipient, unauthorized use, forwarding, printing,  =
storing,
> disclosure or copying is strictly prohibited, and may be unlawful.If =
you have
> received this communication in error,please immediately notify the =
sender
> by return e-mail, and delete the original message and all copies from =
your
> system. Thank you.
> =
-------------------------------------------------------------------------=
---------------------
> -----


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54924-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Jan 29 13:00:24 2013
Return-Path: <java-user-return-54924-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 52419E5AE
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 29 Jan 2013 13:00:24 +0000 (UTC)
Received: (qmail 69932 invoked by uid 500); 29 Jan 2013 13:00:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69471 invoked by uid 500); 29 Jan 2013 13:00:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69416 invoked by uid 99); 29 Jan 2013 13:00:15 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Jan 2013 13:00:15 +0000
X-ASF-Spam-Status: No, hits=2.0 required=5.0
	tests=SPF_NEUTRAL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: 216.139.236.26 is neither permitted nor denied by domain of mr.pnnp@gmail.com)
Received: from [216.139.236.26] (HELO sam.nabble.com) (216.139.236.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Jan 2013 13:00:09 +0000
Received: from ben.nabble.com ([192.168.236.152])
	by sam.nabble.com with esmtp (Exim 4.72)
	(envelope-from <mr.pnnp@gmail.com>)
	id 1U0Amz-0007YS-FM
	for java-user@lucene.apache.org; Tue, 29 Jan 2013 04:59:49 -0800
Date: Tue, 29 Jan 2013 04:59:49 -0800 (PST)
From: solruser13 <mr.pnnp@gmail.com>
To: java-user@lucene.apache.org
Message-ID: <1359464389457-4037014.post@n3.nabble.com>
In-Reply-To: <CAEY5pxXNefDnL8Rz-c2uS7shMczJOMUG2VF+6GsDVKHSxsFnGQ@mail.gmail.com>
References: <1359429227142-4036943.post@n3.nabble.com> <CAEY5pxXNefDnL8Rz-c2uS7shMczJOMUG2VF+6GsDVKHSxsFnGQ@mail.gmail.com>
Subject: Re: update index for user defined types
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi

we are using oracle stored procedure which accepts UDT ( java object ) and
returns the results as UDT ( java object ).
we want to use this SP to update the index. Does lucene allows updating
index in such a scenario.

we plan to use solr ( solr uses lucene library ) for building index and
search functionality.

thanks,



--
View this message in context: http://lucene.472066.n3.nabble.com/update-index-for-user-defined-types-tp4036943p4037014.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54925-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Jan 29 13:21:06 2013
Return-Path: <java-user-return-54925-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 60952E657
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 29 Jan 2013 13:21:06 +0000 (UTC)
Received: (qmail 25156 invoked by uid 500); 29 Jan 2013 13:21:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25114 invoked by uid 500); 29 Jan 2013 13:21:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25091 invoked by uid 99); 29 Jan 2013 13:21:03 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Jan 2013 13:21:03 +0000
X-ASF-Spam-Status: No, hits=1.7 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of arunk786@gmail.com designates 209.85.210.180 as permitted sender)
Received: from [209.85.210.180] (HELO mail-ia0-f180.google.com) (209.85.210.180)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Jan 2013 13:20:57 +0000
Received: by mail-ia0-f180.google.com with SMTP id f27so518094iae.39
        for <java-user@lucene.apache.org>; Tue, 29 Jan 2013 05:20:36 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=x-received:mime-version:from:date:message-id:subject:to
         :content-type;
        bh=7Lryg4kl5/f4wciEnytQkvZOrfvBYZuQtBwKrZSAZiY=;
        b=gn36Oz3Dly6d/7AEWqPRJTEoR3uaaNB90DpS0VcQ1DfBd4/zOEA9dgHv1hIeYnxTp2
         ZHCLR4FaVhAWcY4emfvNJj7mAsb3AALQMgDVwbyPALS8MnaDACMBCD54mgHNl/7aB1rb
         vUxJERn2m13XV0yu/njo1tFcaVtdvI5NiSskLgbYbwEzGL04PA85Rj+1Bbz0ks68Agtv
         qsL8kS4rr9YekJRaANeGqGzf9IegZC9/Z03HNR1xi03xA5Je9dx+n5a8U+ei8XoWm91E
         0E77X/iVnrCJKtNIeVTfUEYe5WggOL6WOO4tPFEeCcutNYXmweibrLtFKjss81M0zida
         mCDA==
X-Received: by 10.50.185.196 with SMTP id fe4mr687031igc.17.1359465636454;
 Tue, 29 Jan 2013 05:20:36 -0800 (PST)
MIME-Version: 1.0
Received: by 10.42.254.136 with HTTP; Tue, 29 Jan 2013 05:20:16 -0800 (PST)
From: arun k <arunk786@gmail.com>
Date: Tue, 29 Jan 2013 18:50:16 +0530
Message-ID: <CAO7gJeizV5m43D_QaQaho24PjawfC217PeMwqD+KF-01UY26HA@mail.gmail.com>
Subject: CompressingStoredFieldsFormat doesn't show improvement
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=14dae9340665585ff304d46d422b
X-Virus-Checked: Checked by ClamAV on apache.org

--14dae9340665585ff304d46d422b
Content-Type: text/plain; charset=ISO-8859-1

Hi guys,

After hearing a lot about the CompressingStoredFieldsFormat i have done
some tests to find whether it has benefits for my indexes.

I have around 40 Stored fields of each say 40 chars and have around 10,000
docs in an index.

I have compared the index sizes and creation time for both Lucene 3.0.2 and
Lucene 4.1 and i see that Index size has not reduced much (only 1MB or so)
and index creation time has in fact doubled.

Does this mean it doesn't work for my scenario or did i miss out something ?

Thanks,
Arun

--14dae9340665585ff304d46d422b--

From java-user-return-54926-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Jan 29 13:40:41 2013
Return-Path: <java-user-return-54926-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 89238E3C8
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 29 Jan 2013 13:40:41 +0000 (UTC)
Received: (qmail 73365 invoked by uid 500); 29 Jan 2013 13:40:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73063 invoked by uid 500); 29 Jan 2013 13:40:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73051 invoked by uid 99); 29 Jan 2013 13:40:38 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Jan 2013 13:40:38 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 209.85.212.178 as permitted sender)
Received: from [209.85.212.178] (HELO mail-wi0-f178.google.com) (209.85.212.178)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Jan 2013 13:40:32 +0000
Received: by mail-wi0-f178.google.com with SMTP id hn3so399767wib.11
        for <java-user@lucene.apache.org>; Tue, 29 Jan 2013 05:40:11 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=x-received:mime-version:in-reply-to:references:from:date:message-id
         :subject:to:content-type;
        bh=d9U/wueMSNkA4YIpfbvmCijbZzqunF9wTVVNgVaiPVA=;
        b=TlNL/boFw0xFHlfVS97KAyC83ffBqjiVYBPKKj+lIWAUFuyhtm6uZPLT9J7hvDfl/b
         H6HclCPqEKgkPUtTYZuf5W/222OG01yhuGMiOVbYKHbkjJNrD5btI3EeBXSf6ucPg6Xb
         Bv3SCnBF2EWovN1N9JazjXFNUj3xAE0y+0k4zBfeOKxeeXgSsyamroBJkWV3PVYgHBgl
         cz1U6NwNdCmoEajlEA9oc4hc8p34PJM1X+mvBpQkhhC1ed3MnwO0U5CHO3YgCzbQcYa2
         57fnKr+I0L0O3XX3Uvho22HU34Bm+v2LhSyphdewMceEPLnNLdTtsWFKga0/DcrGVodG
         lzlQ==
X-Received: by 10.180.101.133 with SMTP id fg5mr2621199wib.31.1359466805027;
 Tue, 29 Jan 2013 05:40:05 -0800 (PST)
MIME-Version: 1.0
Received: by 10.194.57.11 with HTTP; Tue, 29 Jan 2013 05:39:44 -0800 (PST)
In-Reply-To: <CAO7gJeizV5m43D_QaQaho24PjawfC217PeMwqD+KF-01UY26HA@mail.gmail.com>
References: <CAO7gJeizV5m43D_QaQaho24PjawfC217PeMwqD+KF-01UY26HA@mail.gmail.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Tue, 29 Jan 2013 13:39:44 +0000
Message-ID: <CAEY5pxXtJCFrPgk8SkdK9ivuxZst-4eOvVNM4=0xsgcEgDJGzA@mail.gmail.com>
Subject: Re: CompressingStoredFieldsFormat doesn't show improvement
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

I make that about 15Mb of data - trivial.  What happens if you make
each field 400 chars and index a million or two?  If you really have
that few docs, what are you worrying about?

A doubling of indexing time from 3.0.2 to 4.1 is surprising, but for
40k docs are we talking about it taking 2 seconds rather than 1?  What
happens if ... as above.


--
Ian.



On Tue, Jan 29, 2013 at 1:20 PM, arun k <arunk786@gmail.com> wrote:
> Hi guys,
>
> After hearing a lot about the CompressingStoredFieldsFormat i have done
> some tests to find whether it has benefits for my indexes.
>
> I have around 40 Stored fields of each say 40 chars and have around 10,000
> docs in an index.
>
> I have compared the index sizes and creation time for both Lucene 3.0.2 and
> Lucene 4.1 and i see that Index size has not reduced much (only 1MB or so)
> and index creation time has in fact doubled.
>
> Does this mean it doesn't work for my scenario or did i miss out something ?
>
> Thanks,
> Arun

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54927-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Jan 29 13:46:13 2013
Return-Path: <java-user-return-54927-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id EF852E3F2
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 29 Jan 2013 13:46:12 +0000 (UTC)
Received: (qmail 89767 invoked by uid 500); 29 Jan 2013 13:46:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89527 invoked by uid 500); 29 Jan 2013 13:46:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89506 invoked by uid 99); 29 Jan 2013 13:46:10 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Jan 2013 13:46:10 +0000
X-ASF-Spam-Status: No, hits=0.6 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ian.lea@gmail.com designates 209.85.212.181 as permitted sender)
Received: from [209.85.212.181] (HELO mail-wi0-f181.google.com) (209.85.212.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Jan 2013 13:46:03 +0000
Received: by mail-wi0-f181.google.com with SMTP id c10so405477wiw.14
        for <java-user@lucene.apache.org>; Tue, 29 Jan 2013 05:45:43 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=x-received:mime-version:in-reply-to:references:from:date:message-id
         :subject:to:content-type;
        bh=UZNR1NoP3EHIK6k0cnDVXGeDEIz6CtsSJZQ0vRD2uGQ=;
        b=CmXhVzoZDBph2KkU26dRYn4is3FkiHbj4qcRkjE5Sba2yF8uV6g9SYAawI+AMTcCN8
         HMwG0w9TJBRsDBmMEZ7te+uKQkK5/ZmHgCLRHFtien354yn1Z2fVF5Xk++iIc2TRHKvm
         0dzi+Yr1HGB0WiLmHHIpfwbKMalta3UtFMEY2qRojo1L9hsnZvhE6QMuK7eDvpj3ZKkE
         WjKYKmXL33Gjz0LcEtyipimjOOvc8Dtc7r0uglWbUAjtnbHapbu6jOj14SBC1u8E+u1Z
         S4XttJsAeIl/5S016Xg6LEqIpgDjjva+O94KXOyZ6ky7qMgub+Vg9po6ihzE4Hv5/e/j
         TNvA==
X-Received: by 10.180.101.133 with SMTP id fg5mr2653672wib.31.1359467143573;
 Tue, 29 Jan 2013 05:45:43 -0800 (PST)
MIME-Version: 1.0
Received: by 10.194.57.11 with HTTP; Tue, 29 Jan 2013 05:45:23 -0800 (PST)
In-Reply-To: <1359464389457-4037014.post@n3.nabble.com>
References: <1359429227142-4036943.post@n3.nabble.com> <CAEY5pxXNefDnL8Rz-c2uS7shMczJOMUG2VF+6GsDVKHSxsFnGQ@mail.gmail.com>
 <1359464389457-4037014.post@n3.nabble.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Tue, 29 Jan 2013 13:45:23 +0000
Message-ID: <CAEY5pxW9_G_=oAs6EOr0oOQBJMnpd96_BBbvOzh159JiOUbygA@mail.gmail.com>
Subject: Re: update index for user defined types
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

Well, lucene is a java API so if you can make java calls from an
Oracle stored procedure, maybe you can make it work.  Sounds a
terrible idea to me, but then using Oracle is, in my opinion, a
terrible idea, as are stored procedures.

How about using the stored procedure to set some "reindexthisrecord"
column on the database row and have a separate chunk of code that does
the index updates driven by that.  If you're using solr you should
surely update the index via solr calls.


--
Ian.


On Tue, Jan 29, 2013 at 12:59 PM, solruser13 <mr.pnnp@gmail.com> wrote:
> Hi
>
> we are using oracle stored procedure which accepts UDT ( java object ) and
> returns the results as UDT ( java object ).
> we want to use this SP to update the index. Does lucene allows updating
> index in such a scenario.
>
> we plan to use solr ( solr uses lucene library ) for building index and
> search functionality.
>
> thanks,
>
>
>
> --
> View this message in context: http://lucene.472066.n3.nabble.com/update-index-for-user-defined-types-tp4036943p4037014.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54928-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Jan 29 13:57:15 2013
Return-Path: <java-user-return-54928-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 016C4E428
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 29 Jan 2013 13:57:15 +0000 (UTC)
Received: (qmail 20660 invoked by uid 500); 29 Jan 2013 13:57:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20429 invoked by uid 500); 29 Jan 2013 13:57:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20319 invoked by uid 99); 29 Jan 2013 13:57:07 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Jan 2013 13:57:07 +0000
X-ASF-Spam-Status: No, hits=1.7 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of arunk786@gmail.com designates 209.85.210.170 as permitted sender)
Received: from [209.85.210.170] (HELO mail-ia0-f170.google.com) (209.85.210.170)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Jan 2013 13:56:59 +0000
Received: by mail-ia0-f170.google.com with SMTP id k20so591929iak.29
        for <java-user@lucene.apache.org>; Tue, 29 Jan 2013 05:56:38 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=x-received:mime-version:in-reply-to:references:from:date:message-id
         :subject:to:content-type;
        bh=xGsJ/57G6qvcBQCoo+L4FGvuhLZnOiY7fwQHcaleWes=;
        b=Ax5Z0THBbwhpkwLyKGhG08mRsbFhD4wkFfHpHwMSizhiy5EJFT8mbiv1x+3Va6NkNb
         cEhIXd5II14ogr/vDKUDIkoqOaFGqNuq/GTo6j5Xgg2EC6QhDsY3ZHXj1011YPom52+a
         hc5uNcU+0jaaW+3saQwHy3wLyvtqEgRDlD/FJ3QvB+nFRy1Su/jOmAMxhuRotOEf5cLd
         T0n4qqFhdCxpyGNm9kUVEkSAewFUfzosceM6uX2MPFS6Q5iOYOwt94zvIODGuj2m+FOW
         pWaWVCR9TfOE6I0GkJiP4IyLa5PAGNYGgPC0ujjHBnU8uml2mh9RgqIoYIiedRZ4JpEB
         94KQ==
X-Received: by 10.43.82.72 with SMTP id ab8mr640512icc.33.1359467798477; Tue,
 29 Jan 2013 05:56:38 -0800 (PST)
MIME-Version: 1.0
Received: by 10.42.254.136 with HTTP; Tue, 29 Jan 2013 05:56:18 -0800 (PST)
In-Reply-To: <CAEY5pxXtJCFrPgk8SkdK9ivuxZst-4eOvVNM4=0xsgcEgDJGzA@mail.gmail.com>
References: <CAO7gJeizV5m43D_QaQaho24PjawfC217PeMwqD+KF-01UY26HA@mail.gmail.com>
 <CAEY5pxXtJCFrPgk8SkdK9ivuxZst-4eOvVNM4=0xsgcEgDJGzA@mail.gmail.com>
From: arun k <arunk786@gmail.com>
Date: Tue, 29 Jan 2013 19:26:18 +0530
Message-ID: <CAO7gJeg3AGsN=+GcKwpPdFyTTvAUku9bgPwQgP_JE6-p+HXyEw@mail.gmail.com>
Subject: Re: CompressingStoredFieldsFormat doesn't show improvement
To: java-user <java-user@lucene.apache.org>
Content-Type: multipart/alternative; boundary=bcaec51866d8363ba404d46dc361
X-Virus-Checked: Checked by ClamAV on apache.org

--bcaec51866d8363ba404d46dc361
Content-Type: text/plain; charset=ISO-8859-1

Hi Ian,

you r right in that if we have 1 index of say 15 Mb there is no prob but i
have thousands of such indexes.
So the time will add up with the number of such indexes being open
simultaneously and parallel indexing.

Arun


On Tue, Jan 29, 2013 at 7:09 PM, Ian Lea <ian.lea@gmail.com> wrote:

> I make that about 15Mb of data - trivial.  What happens if you make
> each field 400 chars and index a million or two?  If you really have
> that few docs, what are you worrying about?
>
> A doubling of indexing time from 3.0.2 to 4.1 is surprising, but for
> 40k docs are we talking about it taking 2 seconds rather than 1?  What
> happens if ... as above.
>
>
> --
> Ian.
>
>
>
> On Tue, Jan 29, 2013 at 1:20 PM, arun k <arunk786@gmail.com> wrote:
> > Hi guys,
> >
> > After hearing a lot about the CompressingStoredFieldsFormat i have done
> > some tests to find whether it has benefits for my indexes.
> >
> > I have around 40 Stored fields of each say 40 chars and have around
> 10,000
> > docs in an index.
> >
> > I have compared the index sizes and creation time for both Lucene 3.0.2
> and
> > Lucene 4.1 and i see that Index size has not reduced much (only 1MB or
> so)
> > and index creation time has in fact doubled.
> >
> > Does this mean it doesn't work for my scenario or did i miss out
> something ?
> >
> > Thanks,
> > Arun
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--bcaec51866d8363ba404d46dc361--

From java-user-return-54929-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Jan 29 14:11:02 2013
Return-Path: <java-user-return-54929-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id B33DCE496
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 29 Jan 2013 14:11:02 +0000 (UTC)
Received: (qmail 62402 invoked by uid 500); 29 Jan 2013 14:11:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62315 invoked by uid 500); 29 Jan 2013 14:11:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62285 invoked by uid 99); 29 Jan 2013 14:10:59 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Jan 2013 14:10:59 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 209.85.212.176 as permitted sender)
Received: from [209.85.212.176] (HELO mail-wi0-f176.google.com) (209.85.212.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Jan 2013 14:10:52 +0000
Received: by mail-wi0-f176.google.com with SMTP id hm14so1416607wib.9
        for <java-user@lucene.apache.org>; Tue, 29 Jan 2013 06:10:31 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=x-received:mime-version:in-reply-to:references:from:date:message-id
         :subject:to:content-type;
        bh=IR7rQ6zaf3eu7ZY6dvrlbKdWDWNFDWLojXc4p0fVLks=;
        b=kC0CFakZmwHaRLm1nesyGw3bK8smRBDWuD3KcPeBhM2ustPrsjTWEOzArzmvBoDz/R
         GwJJIVzI/kh28+pDhdPm5jF2zOIMiogj3bsYqn5uCAYiHCuDZhbcgJGV2bvQooPRv+3g
         ECjaWbf6O1NElvKna7eojjNDdsgRBPjLGuVHxptH6Oy6w1U4T2lYXMH6H1GuGYE+xvtj
         /IaoQpXb55U4JXOHt4qoSAft90ugq9D+oEiGgGzNclBv0kGA7qgaQ/+hrGeVZs5xqlPW
         7EPxRIYiXzgq8sBQGDKtEvV6fyZUqwv9H9PU4hNUnm/OnBYjkWDlAOuJTf2vmTzu8YKd
         CfWg==
X-Received: by 10.194.108.101 with SMTP id hj5mr2778394wjb.6.1359468621372;
 Tue, 29 Jan 2013 06:10:21 -0800 (PST)
MIME-Version: 1.0
Received: by 10.194.57.11 with HTTP; Tue, 29 Jan 2013 06:10:01 -0800 (PST)
In-Reply-To: <CAO7gJeg3AGsN=+GcKwpPdFyTTvAUku9bgPwQgP_JE6-p+HXyEw@mail.gmail.com>
References: <CAO7gJeizV5m43D_QaQaho24PjawfC217PeMwqD+KF-01UY26HA@mail.gmail.com>
 <CAEY5pxXtJCFrPgk8SkdK9ivuxZst-4eOvVNM4=0xsgcEgDJGzA@mail.gmail.com> <CAO7gJeg3AGsN=+GcKwpPdFyTTvAUku9bgPwQgP_JE6-p+HXyEw@mail.gmail.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Tue, 29 Jan 2013 14:10:01 +0000
Message-ID: <CAEY5pxVUEM5NPgYfH=d7WCapL=ZfYxOjTy2yr1tNbqskBwSudw@mail.gmail.com>
Subject: Re: CompressingStoredFieldsFormat doesn't show improvement
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

Fair point, but with such small numbers per index any variation
between versions is likely to just be noise.  It is also certainly
possible that on your index the compressing format may not help.

An aside: have you considered merging the thousands of small indexes
into one, with some field to identify which "index" a doc belongs to?
Working with one large index is often easier and faster than lots of
little ones.



--
Ian.


On Tue, Jan 29, 2013 at 1:56 PM, arun k <arunk786@gmail.com> wrote:
> Hi Ian,
>
> you r right in that if we have 1 index of say 15 Mb there is no prob but i
> have thousands of such indexes.
> So the time will add up with the number of such indexes being open
> simultaneously and parallel indexing.
>
> Arun
>
>
> On Tue, Jan 29, 2013 at 7:09 PM, Ian Lea <ian.lea@gmail.com> wrote:
>
>> I make that about 15Mb of data - trivial.  What happens if you make
>> each field 400 chars and index a million or two?  If you really have
>> that few docs, what are you worrying about?
>>
>> A doubling of indexing time from 3.0.2 to 4.1 is surprising, but for
>> 40k docs are we talking about it taking 2 seconds rather than 1?  What
>> happens if ... as above.
>>
>>
>> --
>> Ian.
>>
>>
>>
>> On Tue, Jan 29, 2013 at 1:20 PM, arun k <arunk786@gmail.com> wrote:
>> > Hi guys,
>> >
>> > After hearing a lot about the CompressingStoredFieldsFormat i have done
>> > some tests to find whether it has benefits for my indexes.
>> >
>> > I have around 40 Stored fields of each say 40 chars and have around
>> 10,000
>> > docs in an index.
>> >
>> > I have compared the index sizes and creation time for both Lucene 3.0.2
>> and
>> > Lucene 4.1 and i see that Index size has not reduced much (only 1MB or
>> so)
>> > and index creation time has in fact doubled.
>> >
>> > Does this mean it doesn't work for my scenario or did i miss out
>> something ?
>> >
>> > Thanks,
>> > Arun
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54930-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Jan 29 14:24:37 2013
Return-Path: <java-user-return-54930-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 82C2EE7A5
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 29 Jan 2013 14:24:37 +0000 (UTC)
Received: (qmail 3363 invoked by uid 500); 29 Jan 2013 14:24:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3194 invoked by uid 500); 29 Jan 2013 14:24:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3169 invoked by uid 99); 29 Jan 2013 14:24:34 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Jan 2013 14:24:34 +0000
X-ASF-Spam-Status: No, hits=4.2 required=5.0
	tests=HTML_MESSAGE,SPF_NEUTRAL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: 216.139.236.26 is neither permitted nor denied by domain of mr.pnnp@gmail.com)
Received: from [216.139.236.26] (HELO sam.nabble.com) (216.139.236.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Jan 2013 14:24:29 +0000
Received: from ben.nabble.com ([192.168.236.152])
	by sam.nabble.com with esmtp (Exim 4.72)
	(envelope-from <mr.pnnp@gmail.com>)
	id 1U0C6a-00058R-LW
	for java-user@lucene.apache.org; Tue, 29 Jan 2013 06:24:08 -0800
Date: Tue, 29 Jan 2013 06:24:08 -0800 (PST)
From: solruser13 <mr.pnnp@gmail.com>
To: java-user@lucene.apache.org
Message-ID: <CAC4LvyJkSKNnLeg8Vh1b4W_14JVh3PyRDaZLzQZksq_Jaw2+Tw@mail.gmail.com>
In-Reply-To: <CAEY5pxW9_G_=oAs6EOr0oOQBJMnpd96_BBbvOzh159JiOUbygA@mail.gmail.com>
References: <1359429227142-4036943.post@n3.nabble.com> <CAEY5pxXNefDnL8Rz-c2uS7shMczJOMUG2VF+6GsDVKHSxsFnGQ@mail.gmail.com> <1359464389457-4037014.post@n3.nabble.com> <CAEY5pxW9_G_=oAs6EOr0oOQBJMnpd96_BBbvOzh159JiOUbygA@mail.gmail.com>
Subject: Re: update index for user defined types
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_242709_31820661.1359469448637"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_242709_31820661.1359469448637
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit

Thanks.

My objective is to :
1 create index using solr... my current database is oracle. I have large
number of database tables to join to create index. To update index i want
to use DIH of solr which uses oracle sp instead.
I plan to update index via this DIH in a scheduler for a known time period
interval
2. Use solr to search the data.




--
View this message in context: http://lucene.472066.n3.nabble.com/update-index-for-user-defined-types-tp4036943p4037030.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.
------=_Part_242709_31820661.1359469448637--

From java-user-return-54931-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Jan 29 15:06:32 2013
Return-Path: <java-user-return-54931-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id BC6DBE356
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 29 Jan 2013 15:06:32 +0000 (UTC)
Received: (qmail 53546 invoked by uid 500); 29 Jan 2013 15:06:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53241 invoked by uid 500); 29 Jan 2013 15:06:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53191 invoked by uid 99); 29 Jan 2013 15:06:28 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Jan 2013 15:06:28 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of jpountz@gmail.com designates 209.85.214.43 as permitted sender)
Received: from [209.85.214.43] (HELO mail-bk0-f43.google.com) (209.85.214.43)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Jan 2013 15:06:20 +0000
Received: by mail-bk0-f43.google.com with SMTP id jm19so331736bkc.30
        for <java-user@lucene.apache.org>; Tue, 29 Jan 2013 07:06:00 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=x-received:mime-version:in-reply-to:references:from:date:message-id
         :subject:to:content-type;
        bh=G2Scc6KcZIfDyOayppDw3Q8HGLsLdDm01PsXCdxN+Eo=;
        b=UeTWwNIesONkkYofsVUa1ee+EJZJoP1zXc2JgeHksJdyxE7VLsYoGyEOk4tny81+fK
         +pSFvwujZPvLOUzYM6ckz9OJny98XmpjgAxv7iulfPfAFDPw58FoJBfvLPpa1e7qoDJM
         HVVCaPczslmxquGrL2poDWDL/mEiMfTRhCDJywBut3ghCGK06CpMBemWBJ02OQb8VCxW
         7URuFLRQDruvt2Si/NozNIU0jRn487Jx92Zh4AZX2vT4xlr5RjZM7Klq0PmUJphgW48g
         TaR1D4mZ2eY2/j2gPlAHd8D9yREVQs7J/1gOeu/TEqwvWdzWmSFIGu/e9qz4OkzeOxpp
         M/2A==
X-Received: by 10.204.3.206 with SMTP id 14mr426606bko.120.1359471960725; Tue,
 29 Jan 2013 07:06:00 -0800 (PST)
MIME-Version: 1.0
Received: by 10.204.253.138 with HTTP; Tue, 29 Jan 2013 07:05:40 -0800 (PST)
In-Reply-To: <CAEY5pxVUEM5NPgYfH=d7WCapL=ZfYxOjTy2yr1tNbqskBwSudw@mail.gmail.com>
References: <CAO7gJeizV5m43D_QaQaho24PjawfC217PeMwqD+KF-01UY26HA@mail.gmail.com>
 <CAEY5pxXtJCFrPgk8SkdK9ivuxZst-4eOvVNM4=0xsgcEgDJGzA@mail.gmail.com>
 <CAO7gJeg3AGsN=+GcKwpPdFyTTvAUku9bgPwQgP_JE6-p+HXyEw@mail.gmail.com> <CAEY5pxVUEM5NPgYfH=d7WCapL=ZfYxOjTy2yr1tNbqskBwSudw@mail.gmail.com>
From: Adrien Grand <jpountz@gmail.com>
Date: Tue, 29 Jan 2013 16:05:40 +0100
Message-ID: <CAPsWd+NPdvXeqot_hTvad-15VfFZC-whjUivbRSHCGC=Qsy3UA@mail.gmail.com>
Subject: Re: CompressingStoredFieldsFormat doesn't show improvement
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
X-Virus-Checked: Checked by ClamAV on apache.org

Arun,

Lucene uses a very light compression algorithm so I'm a little
surprised it can make indexing 2x slower. Could you run indexing under
a profiler to make sure it really is what makes indexing slower?

Thanks!

-- 
Adrien

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54932-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Jan 29 16:50:18 2013
Return-Path: <java-user-return-54932-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 2A062E1C4
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 29 Jan 2013 16:50:18 +0000 (UTC)
Received: (qmail 15047 invoked by uid 500); 29 Jan 2013 16:50:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14859 invoked by uid 500); 29 Jan 2013 16:50:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14530 invoked by uid 99); 29 Jan 2013 16:50:02 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Jan 2013 16:50:02 +0000
X-ASF-Spam-Status: No, hits=1.7 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of george.kelvin738@gmail.com designates 209.85.210.42 as permitted sender)
Received: from [209.85.210.42] (HELO mail-da0-f42.google.com) (209.85.210.42)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Jan 2013 16:49:56 +0000
Received: by mail-da0-f42.google.com with SMTP id z17so307797dal.29
        for <java-user@lucene.apache.org>; Tue, 29 Jan 2013 08:49:35 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:x-received:date:message-id:subject:from:to
         :content-type;
        bh=PjpdP+mtr6PBQPJg/im42vKPMvoFXj+ga30K+g7anGg=;
        b=PoK9sjTBRqspTAiXYx7zrst1Zpcph9A+IqPmYtTWrvTu/rm6GmB0Lle8JEGGYLYE5W
         uHDR7B1pkLSINbBuKOk8MvP9bg11lL1bkoRcWIJvDiWeCGvUqMbeYTmQ+AveaFD6XCu3
         RKaxzVV1ItEAUQ2JljXT3UAMjwXxm1MxhcwB7gb6xMp2HEPAQkC20F3f+ActVrX0WHhI
         uw/r5rP9KB/qimYyQb0sIlwqzLnLhBrBb4je2E7xYdeiguucYX72jpWz0g2KyZGtYNJD
         F22v44Js0Uw0cnBqMiF24KBo52C83YTtDI2u2BDDFtKy01KxDt5/F8SCT088lO+mWyEe
         M8Bg==
MIME-Version: 1.0
X-Received: by 10.68.220.198 with SMTP id py6mr4039826pbc.119.1359478175618;
 Tue, 29 Jan 2013 08:49:35 -0800 (PST)
Received: by 10.68.64.196 with HTTP; Tue, 29 Jan 2013 08:49:35 -0800 (PST)
Date: Tue, 29 Jan 2013 08:49:35 -0800
Message-ID: <CAFh=WLgJq2FC2LzgZhOf8mKC=1x=7A3krQktCOSKTMSvD2=3jg@mail.gmail.com>
Subject: Re: Questions about FuzzyQuery in Lucene 4.x
From: George Kelvin <george.kelvin738@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=047d7b163707bcd6e004d4702d74
X-Virus-Checked: Checked by ClamAV on apache.org

--047d7b163707bcd6e004d4702d74
Content-Type: text/plain; charset=ISO-8859-1

Hi Jack,

Thanks for your reply!

I don't think I passed the prefixLength parameter in.

Here is the code I used to build the FuzzyQuery:

            String[] words = str.split("\\+");
            BooleanQuery query = new BooleanQuery();

            for (int i=0; i<words.length; i++)
            {
                Term t = new Term(field, words[i]);
                FuzzyQuery fq = new FuzzyQuery(t, ed);
                query.add(fq, BooleanClause.Occur.MUST);
            }

            int k = 10;
            TopDocs results = searcher.search(query, k);

Does it look right to you?

Thanks!

George

--047d7b163707bcd6e004d4702d74--

From java-user-return-54933-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Jan 29 17:00:03 2013
Return-Path: <java-user-return-54933-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 5F631E209
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 29 Jan 2013 17:00:03 +0000 (UTC)
Received: (qmail 45316 invoked by uid 500); 29 Jan 2013 17:00:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45257 invoked by uid 500); 29 Jan 2013 17:00:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45249 invoked by uid 99); 29 Jan 2013 17:00:01 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Jan 2013 17:00:01 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.160.49] (HELO mail-pb0-f49.google.com) (209.85.160.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Jan 2013 16:59:54 +0000
Received: by mail-pb0-f49.google.com with SMTP id xa12so390165pbc.36
        for <java-user@lucene.apache.org>; Tue, 29 Jan 2013 08:59:34 -0800 (PST)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=x-received:date:from:to:subject:in-reply-to:message-id:references
         :user-agent:mime-version:content-type:x-gm-message-state;
        bh=aO5GvkE7VosKTU/1Gsq12p65pve1IGm2gpTW9mo4gFY=;
        b=hIbt9liJ98T1hzbpVdEFBgADlze/75uon0QUXXEwKRVoNxDJC+yv6s3fHsQJQ2KfHe
         UPK1+wwn1guwfJyZyBmELElBDINFcBZKqitgK/oB63TOqy/7bYNBr84Y9BfJYK4YdHKA
         IdFH8uZ+K0L/Ho9MIZjohms7Tzjz6sfXaXBf0BxRK3ebhUL8cSgnViwlIJFZthCMyb0w
         RzmjbSUpMp2SFc0UlsJqLZN/Y8nqa1P3Bvf75cHxE7iybOZPylsnF7RuCpVj3nsFCXa0
         swiii1Xw3MBVVLjpJZx9VVCQbCzzYVx1b3nUiVdo2ztYG7PimEXhsy4ov9Wk/oze5tt5
         J0TA==
X-Received: by 10.66.76.194 with SMTP id m2mr4423915paw.14.1359478773946;
        Tue, 29 Jan 2013 08:59:33 -0800 (PST)
Received: from frisbee.local (250.185-62-69.ftth.swbr.surewest.net. [69.62.185.250])
        by mx.google.com with ESMTPS id a9sm9236607pav.24.2013.01.29.08.59.32
        (version=TLSv1.1 cipher=ECDHE-RSA-RC4-SHA bits=128/128);
        Tue, 29 Jan 2013 08:59:33 -0800 (PST)
Date: Tue, 29 Jan 2013 08:59:31 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>, 
    dizh <dizh@neusoft.com>
Subject: Re: Large Index Query Help!
In-Reply-To: <201301291354182967951@neusoft.com>
Message-ID: <alpine.DEB.2.02.1301290858570.20717@frisbee>
References: <1359429227142-4036943.post@n3.nabble.com> <201301291354182967951@neusoft.com>
User-Agent: Alpine 2.02 (DEB 1266 2009-07-14)
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Gm-Message-State: ALoCoQkj64Sl879k86Al3Jn0PcLHFROskmnGb49cjgb7svLyb8h4etzag3bNYapYlw64FUooSlRT
X-Virus-Checked: Checked by ClamAV on apache.org


: Subject: Large Index Query Help!
: References: <1359429227142-4036943.post@n3.nabble.com>

https://people.apache.org/~hossman/#threadhijack
Thread Hijacking on Mailing Lists

When starting a new discussion on a mailing list, please do not reply to 
an existing message, instead start a fresh email.  Even if you change the 
subject line of your email, other mail headers still track which thread 
you replied to and your question is "hidden" in that thread and gets less 
attention.   It makes following discussions in the mailing list archives 
particularly difficult.



-Hoss

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54934-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Jan 29 17:11:00 2013
Return-Path: <java-user-return-54934-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 52C9DE279
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 29 Jan 2013 17:11:00 +0000 (UTC)
Received: (qmail 87119 invoked by uid 500); 29 Jan 2013 17:10:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87073 invoked by uid 500); 29 Jan 2013 17:10:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87063 invoked by uid 99); 29 Jan 2013 17:10:58 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Jan 2013 17:10:58 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of SRS0=LUcghr=LW=basetechnology.com=jack@yourhostingaccount.com designates 65.254.253.104 as permitted sender)
Received: from [65.254.253.104] (HELO mailout13.yourhostingaccount.com) (65.254.253.104)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Jan 2013 17:10:50 +0000
Received: from mailscan10.yourhostingaccount.com ([10.1.15.10] helo=mailscan10.yourhostingaccount.com)
	by mailout13.yourhostingaccount.com with esmtp (Exim)
	id 1U0EhU-00059T-IP
	for java-user@lucene.apache.org; Tue, 29 Jan 2013 12:10:24 -0500
Received: from impout02.yourhostingaccount.com ([10.1.55.2] helo=impout02.yourhostingaccount.com)
	by mailscan10.yourhostingaccount.com with esmtp (Exim)
	id 1U0EhU-0004cT-5W
	for java-user@lucene.apache.org; Tue, 29 Jan 2013 12:10:24 -0500
Received: from authsmtp14.yourhostingaccount.com ([10.1.18.14])
	by impout02.yourhostingaccount.com with NO UCE
	id ttAQ1k0030JCsUy01tAQc7; Tue, 29 Jan 2013 12:10:24 -0500
X-Authority-Analysis: v=2.0 cv=HIVB5/Rv c=1 sm=1
 a=yH02RjTyxywMAIqhn74x1Q==:17 a=aQzbgH187woA:10 a=nJUqsKCoQKQA:10
 a=3jZET7lWBKwA:10 a=8nJEP1OIZ-IA:10 a=jvYhGVW7AAAA:8 a=HVxvFpnHpOUA:10
 a=mV9VRH-2AAAA:8 a=2emk_a0-o3RSjWbGFBcA:9 a=wPNLvfGTeEIA:10
 a=rcbtdQGuPFtN9R+ZKREELQ==:117
X-EN-OrigOutIP: 10.1.18.14
X-EN-IMPSID: ttAQ1k0030JCsUy01tAQc7
Received: from 207-237-113-14.c3-0.nyr-ubr1.nyr.ny.cable.rcn.com ([207.237.113.14] helo=JackKrupansky)
	by authsmtp14.yourhostingaccount.com with esmtpa (Exim)
	id 1U0EhS-0006Xh-HJ
	for java-user@lucene.apache.org; Tue, 29 Jan 2013 12:10:23 -0500
Message-ID: <7BFFE07077B64238BF94592798403F43@JackKrupansky>
From: "Jack Krupansky" <jack@basetechnology.com>
To: <java-user@lucene.apache.org>
References: <CAFh=WLgJq2FC2LzgZhOf8mKC=1x=7A3krQktCOSKTMSvD2=3jg@mail.gmail.com>
In-Reply-To: <CAFh=WLgJq2FC2LzgZhOf8mKC=1x=7A3krQktCOSKTMSvD2=3jg@mail.gmail.com>
Subject: Re: Questions about FuzzyQuery in Lucene 4.x
Date: Tue, 29 Jan 2013 12:10:19 -0500
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
Importance: Normal
X-Mailer: Microsoft Windows Live Mail 15.4.3555.308
X-MimeOLE: Produced By Microsoft MimeOLE V15.4.3555.308
X-EN-UserInfo: e0a4b55451ed9f27313ebf02e3d4348d:fc4a93e1349e680c52bdd723c0ab3ef6
X-EN-AuthUser: jack@basetechnology.com
Sender:  "Jack Krupansky" <jack@basetechnology.com>
X-EN-OrigIP: 207.237.113.14
X-EN-OrigHost: 207-237-113-14.c3-0.nyr-ubr1.nyr.ny.cable.rcn.com
X-Virus-Checked: Checked by ClamAV on apache.org

That depends on the value of "ed", and the indexed data.

Another factor to take into consideration is that a case change ("Star" vs. 
"star") also counts as an edit.

-- Jack Krupansky

-----Original Message----- 
From: George Kelvin
Sent: Tuesday, January 29, 2013 11:49 AM
To: java-user@lucene.apache.org
Subject: Re: Questions about FuzzyQuery in Lucene 4.x

Hi Jack,

Thanks for your reply!

I don't think I passed the prefixLength parameter in.

Here is the code I used to build the FuzzyQuery:

            String[] words = str.split("\\+");
            BooleanQuery query = new BooleanQuery();

            for (int i=0; i<words.length; i++)
            {
                Term t = new Term(field, words[i]);
                FuzzyQuery fq = new FuzzyQuery(t, ed);
                query.add(fq, BooleanClause.Occur.MUST);
            }

            int k = 10;
            TopDocs results = searcher.search(query, k);

Does it look right to you?

Thanks!

George 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54935-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Jan 29 17:16:50 2013
Return-Path: <java-user-return-54935-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id B3F23E2A7
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 29 Jan 2013 17:16:50 +0000 (UTC)
Received: (qmail 16282 invoked by uid 500); 29 Jan 2013 17:16:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16209 invoked by uid 500); 29 Jan 2013 17:16:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16201 invoked by uid 99); 29 Jan 2013 17:16:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Jan 2013 17:16:48 +0000
X-ASF-Spam-Status: No, hits=-2.3 required=5.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of nbuso@ebi.ac.uk designates 193.62.194.225 as permitted sender)
Received: from [193.62.194.225] (HELO smtp01.ebi.ac.uk) (193.62.194.225)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Jan 2013 17:16:43 +0000
Received: from [172.22.70.38] (linux.windows.ebi.ac.uk [172.22.70.38])
	by smtp01.ebi.ac.uk (8.13.8/8.13.8) with ESMTP id r0THGLbC026870;
	Tue, 29 Jan 2013 17:16:21 GMT
Message-ID: <1359479771.2115.48.camel@linux.scoobydoo>
Subject: Re: Faceted search in OR
From: Nicola Buso <nbuso@ebi.ac.uk>
Reply-To: nbuso@ebi.ac.uk
To: Michael McCandless <lucene@mikemccandless.com>
Cc: java-user@lucene.apache.org
Date: Tue, 29 Jan 2013 17:16:11 +0000
In-Reply-To: <CAL8Pwka-xpO5Rz2CnvmVoADU_3Lwtn3-Y6fnqi_Fy1PuuEo6Og@mail.gmail.com>
References: <1359048152.2728.88.camel@linux.scoobydoo>
	 <CALfq-2SP=wiDnDsviy1fYT0mYmm8uN9BGEJxiG01J15Zb9yuKQ@mail.gmail.com>
	 <1359059327.2728.96.camel@linux.scoobydoo>
	 <CALfq-2QV1-mknbPp39K9uNvwrgnu1Rda2EJ9p7MP1Mx_jMHWBg@mail.gmail.com>
	 <1359106763.2728.106.camel@linux.scoobydoo>
	 <CALfq-2SC5pzQfQDomhmqpRRDPzJQbSSV2pQ0V3RHwxBY4WrUSQ@mail.gmail.com>
	 <CALfq-2Rp0YMZ3nzyAVhQHOw8imJHpvGugXpxfy5_efoqL8K=6Q@mail.gmail.com>
	 <CAL8Pwkaz=gvapAb6JjvR77WUhQ=0i+TTv=29SgROew1eAWQvZg@mail.gmail.com>
	 <1359146935.1949.22.camel@linux.scoobydoo>
	 <CAL8Pwka-xpO5Rz2CnvmVoADU_3Lwtn3-Y6fnqi_Fy1PuuEo6Og@mail.gmail.com>
Organization: EBI
Content-Type: text/plain; charset="UTF-8"
X-Mailer: Evolution 3.6.2 (3.6.2-3.fc18) 
Mime-Version: 1.0
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Michael,

I'm looking into implementing a solution.

On Fri, 2013-01-25 at 16:23 -0500, Michael McCandless wrote:
> On Fri, Jan 25, 2013 at 3:48 PM, Nicola Buso <nbuso@ebi.ac.uk> wrote:
> 
> > if you have experiences in this use case can you share solutions? What
> > is reusable from Lucene 4.x implementation?
> 
> Sorry, no experience doing drill sideways w/ Lucene facets ... just in
> a prior life (another search engine).
> 
> One conceptual way to get the counts is to do "hold one out" query for
> each dimension you need the sideways counts on.  EG if user searched
> for "cameras", then drilled down on "Manufacturer = Sony" and drilled
> down again on "FormFactor = SLR", you could do 3 queries:
> 
>   * cameras AND Manufacturer=Sony --> sideways counts for "FormFactor"
> 
>   * cameras AND FormFactor=SLR -> sideways counts for "Manufacturer"
> 
>   * cameras AND FormFactor=SLR AND Manufacturer=Sony -> query results
> 
> I believe that will work?  But it's sort of costly ... you could "save
> the facet counts from the last query" to save on one of these query
> executions.
I agree this will retrieve the facets but is too costly; Fn+1 queries
where Fn is the number of facets; supposing to have 4-6 facets to show
to the user it's really too much.

> 
> Conceptually, the query divides all documents into 3 sets: document
> matches (add to drill-down counts), document is a near miss (would
> match except for exactly one of drill-down constraints), document
> doesn't match.  The sideways counts amounts to tallying up the near
> miss hits against the dimension that was the near miss.
> 
> Like if you could run a query for cameras AND (Manufacturer=Sony OR
> FormFactor=SLR minShouldMatch=N-1 (1 in this case)), which would match
> the "matches" and the near misses, and then during collection
> determine whether it was a hit or a near miss (hmm this isn't so hard:
> use Scorer.getChildren()), and collect and/or tally up the appropriate
> counts (drill down or sideways), then you'd get the right counts I
> think?
Sorry I'm quite new to Lucene, I have some questions...

Are you supposing I can use only one query to obtain all the
informations? Am I dreaming? :-)

BooleanQuery.setMinimumNumberShouldMatch(int min) permit you to skip a
number of clauses? if yes how to ensure it's skipping a particular facet
clause?

Scorer.getChildren() return sub scores for a children, how are
hierarchically organized the scores in this class?

Do you think rewriting a Collector that discriminate from Scorer.score()
and Scorer.getChildren()...score() I can collect different set of result
needed for facet counting?

Sorry for all these questions, that are just to better understand
lucene.


Nicola.

> 
> I think this could be a reasonable way to do drill sideways!
> 
> > Reading some books I just noticed that the expected behaviour for an
> > user filtering by facets is:
> > - facet values in the same facet group (category in lucene) are added in
> > OR
> > - facet values from different facet groups are added in AND
> 
> Right.
> 
> > - another interesting aspect is how the selection affect the counting in
> > other facets
> 
> This is why you have to do the N-1 queries I think.
> 
> > Should be interesting to evaluate if some of these facet navigation
> > patterns can be implemented or supported with some utilities in Lucene
> > 4.0
> 
> I think drill sideways is possible!  Just not implemented yet ...
> 
> Mike McCandless
> 
> http://blog.mikemccandless.com



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54936-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Jan 29 17:28:34 2013
Return-Path: <java-user-return-54936-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id A2313EBE1
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 29 Jan 2013 17:28:34 +0000 (UTC)
Received: (qmail 65293 invoked by uid 500); 29 Jan 2013 17:28:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65226 invoked by uid 500); 29 Jan 2013 17:28:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65218 invoked by uid 99); 29 Jan 2013 17:28:32 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Jan 2013 17:28:32 +0000
X-ASF-Spam-Status: No, hits=1.7 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of george.kelvin738@gmail.com designates 209.85.220.52 as permitted sender)
Received: from [209.85.220.52] (HELO mail-pa0-f52.google.com) (209.85.220.52)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Jan 2013 17:28:27 +0000
Received: by mail-pa0-f52.google.com with SMTP id kp6so522666pab.39
        for <java-user@lucene.apache.org>; Tue, 29 Jan 2013 09:28:07 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:x-received:in-reply-to:references:date:message-id
         :subject:from:to:content-type;
        bh=h1JrH2CjSO/Kut2Ib3gA5fubL2+M9CDebt8jDv5wsis=;
        b=Qi1qHt6NU9RAPoS+jkCQ6FxcyKOs9ynqjGmbqUiNOT83c30JaYyOLgH/Qg8wbkHenu
         wPgsBwyp8g+j94HBbaCibZGAmwTxIwb6/rHzf7cLr6BXCuBk4qukUN29aCEd7YD79YL1
         jyFWLG6XanJ/JZpaxn5KW4GJ8VL0wJTKAiotXNbvxYTJWjpns4O3xZi82XLSJJAP12oi
         LBrAvtLzj73QR/97+ZDWaqUgaKAmq3yyIu9EV9UbZLeifH7vK/Qv4BAJwFX30l1GYYZ5
         sBBXkB4tKiWjmld+n4gKbweodPAsKu/L7EJyVCO8Q8AsYRp8hUjvk/hAPUACx4ju8EeJ
         ZcfA==
MIME-Version: 1.0
X-Received: by 10.68.220.198 with SMTP id py6mr4331894pbc.119.1359480487329;
 Tue, 29 Jan 2013 09:28:07 -0800 (PST)
Received: by 10.68.64.196 with HTTP; Tue, 29 Jan 2013 09:28:07 -0800 (PST)
In-Reply-To: <7BFFE07077B64238BF94592798403F43@JackKrupansky>
References: <CAFh=WLgJq2FC2LzgZhOf8mKC=1x=7A3krQktCOSKTMSvD2=3jg@mail.gmail.com>
	<7BFFE07077B64238BF94592798403F43@JackKrupansky>
Date: Tue, 29 Jan 2013 09:28:07 -0800
Message-ID: <CAFh=WLgF0A4bq7VLOUuz0QxxHefUN_0Er2puG0D3nbSFt-oYLQ@mail.gmail.com>
Subject: Re: Questions about FuzzyQuery in Lucene 4.x
From: George Kelvin <george.kelvin738@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=047d7b16370786be7504d470b7ec
X-Virus-Checked: Checked by ClamAV on apache.org

--047d7b16370786be7504d470b7ec
Content-Type: text/plain; charset=ISO-8859-1

Hi Jack,

ed is set to 1 here and I have lowercased all the data and queries.

Regarding the indexed data factor you mentioned, can you elaborate more?

Thanks!

George


On Tue, Jan 29, 2013 at 9:10 AM, Jack Krupansky <jack@basetechnology.com>wrote:

> That depends on the value of "ed", and the indexed data.
>
> Another factor to take into consideration is that a case change ("Star"
> vs. "star") also counts as an edit.
>
> -- Jack Krupansky
>
> -----Original Message----- From: George Kelvin
> Sent: Tuesday, January 29, 2013 11:49 AM
> To: java-user@lucene.apache.org
> Subject: Re: Questions about FuzzyQuery in Lucene 4.x
>
>
> Hi Jack,
>
> Thanks for your reply!
>
> I don't think I passed the prefixLength parameter in.
>
> Here is the code I used to build the FuzzyQuery:
>
>            String[] words = str.split("\\+");
>            BooleanQuery query = new BooleanQuery();
>
>            for (int i=0; i<words.length; i++)
>            {
>                Term t = new Term(field, words[i]);
>                FuzzyQuery fq = new FuzzyQuery(t, ed);
>                query.add(fq, BooleanClause.Occur.MUST);
>            }
>
>            int k = 10;
>            TopDocs results = searcher.search(query, k);
>
> Does it look right to you?
>
> Thanks!
>
> George
>
> ------------------------------**------------------------------**---------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.**apache.org<java-user-unsubscribe@lucene.apache.org>
> For additional commands, e-mail: java-user-help@lucene.apache.**org<java-user-help@lucene.apache.org>
>
>

--047d7b16370786be7504d470b7ec--

From java-user-return-54937-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Jan 29 17:30:27 2013
Return-Path: <java-user-return-54937-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id BA4AEEFEC
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 29 Jan 2013 17:30:27 +0000 (UTC)
Received: (qmail 71203 invoked by uid 500); 29 Jan 2013 17:30:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71153 invoked by uid 500); 29 Jan 2013 17:30:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71145 invoked by uid 99); 29 Jan 2013 17:30:25 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Jan 2013 17:30:25 +0000
X-ASF-Spam-Status: No, hits=-2.3 required=5.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of nbuso@ebi.ac.uk designates 193.62.194.225 as permitted sender)
Received: from [193.62.194.225] (HELO smtp02.ebi.ac.uk) (193.62.194.225)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Jan 2013 17:30:18 +0000
Received: from [172.22.70.38] (linux.windows.ebi.ac.uk [172.22.70.38])
	by smtp02.ebi.ac.uk (8.13.8/8.13.8) with ESMTP id r0THTuZo029585
	for <java-user@lucene.apache.org>; Tue, 29 Jan 2013 17:29:56 GMT
Message-ID: <1359480586.2115.55.camel@linux.scoobydoo>
Subject: FacetRequest include residue
From: Nicola Buso <nbuso@ebi.ac.uk>
Reply-To: nbuso@ebi.ac.uk
To: java-user <java-user@lucene.apache.org>
Date: Tue, 29 Jan 2013 17:29:46 +0000
Organization: EBI
Content-Type: text/plain; charset="UTF-8"
X-Mailer: Evolution 3.6.2 (3.6.2-3.fc18) 
Mime-Version: 1.0
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

I have a FacetRequest with numResults setted to 10, how can I specify
additional facets value to add to the FacetResult?

I try to explain the use-case:
- the user view 10 facet result
- the interface permit the user to choose a facet value not from the
top-10 results
- the user execute the query with the facet value not in the top-10
- I'd like to show in the list of facet value also the value selected by
the user.

The only way I see I can obtain this value is execute a query where I'm
not restricting the number of facet values returned and I "cherry pick"
the facet with the value I need. Obviously it's costly.



Nicola.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54938-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Jan 29 17:56:11 2013
Return-Path: <java-user-return-54938-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 540C9E102
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 29 Jan 2013 17:56:11 +0000 (UTC)
Received: (qmail 82493 invoked by uid 500); 29 Jan 2013 17:56:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82444 invoked by uid 500); 29 Jan 2013 17:56:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82434 invoked by uid 99); 29 Jan 2013 17:56:09 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Jan 2013 17:56:09 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of serera@gmail.com designates 74.125.82.53 as permitted sender)
Received: from [74.125.82.53] (HELO mail-wg0-f53.google.com) (74.125.82.53)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Jan 2013 17:56:04 +0000
Received: by mail-wg0-f53.google.com with SMTP id fn15so513267wgb.32
        for <java-user@lucene.apache.org>; Tue, 29 Jan 2013 09:55:43 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:x-received:in-reply-to:references:date:message-id
         :subject:from:to:content-type;
        bh=1NavU0Lr8nlbMUwkNz7pEjK2KqbavV04ASEA0B9Y8x0=;
        b=xzYg7gIVMjlUo47hiPS6wXUJx3BvA2t5qHlTubbLzraL9xCKe7Q8pHEZI3zJajNip/
         uAP42hF3+TBn2zJHKLKm41Un/H9RlUb/1QR3aO7qI46oGLLT6J7IY2NZyeJt877sIUO/
         lQmMn1NPab9fDxhcwsavAmzXWPjpk2Li+Rl+nD47A0IV4viqewkMc8tcqogCSnwX8jTA
         y4gVSHWNcfcFqpYr7eylRO/exzetqG/6ciDv0kl0VarX80uohUGg7dLy3fkzfjYpCpg8
         7FfTXF39977bzxpOWGMvv+jEnv1das6yDf9U01fzIlVklsuOJe9QmAVrsKf/WDgHnfEe
         NLjg==
MIME-Version: 1.0
X-Received: by 10.194.171.198 with SMTP id aw6mr4194670wjc.3.1359482143054;
 Tue, 29 Jan 2013 09:55:43 -0800 (PST)
Received: by 10.194.172.39 with HTTP; Tue, 29 Jan 2013 09:55:42 -0800 (PST)
In-Reply-To: <1359480586.2115.55.camel@linux.scoobydoo>
References: <1359480586.2115.55.camel@linux.scoobydoo>
Date: Tue, 29 Jan 2013 19:55:42 +0200
Message-ID: <CALfq-2Tj1MER8pj0NmNWRUu2WJmM9kyC4qFr6nN4Rz6mPZXC5A@mail.gmail.com>
Subject: Re: FacetRequest include residue
From: Shai Erera <serera@gmail.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>, nbuso@ebi.ac.uk
Content-Type: multipart/alternative; boundary=089e0122f58e371cd104d4711a32
X-Virus-Checked: Checked by ClamAV on apache.org

--089e0122f58e371cd104d4711a32
Content-Type: text/plain; charset=ISO-8859-1

Hi Nicola,

How does the interface allow the user to select a facet values not from the
top-10? How does the interface know which other facet values are there?
Does it query the taxonomy somehow?

One thing you can do is to set numResults to Integer.MAX_VALUE and
numToLabel to 10. That way your FacetResult will have all the children up
to the specified depth, but only the top-10 will be labeled (which can
sometimes be costly). I'm not sure if that's what you're looking for?

And again, this might be something that you can do in the UI -- add the
value that the user selected to the list of values that are displayed,
irregardless of what the top-10 are?

Shai


On Tue, Jan 29, 2013 at 7:29 PM, Nicola Buso <nbuso@ebi.ac.uk> wrote:

> Hi,
>
> I have a FacetRequest with numResults setted to 10, how can I specify
> additional facets value to add to the FacetResult?
>
> I try to explain the use-case:
> - the user view 10 facet result
> - the interface permit the user to choose a facet value not from the
> top-10 results
> - the user execute the query with the facet value not in the top-10
> - I'd like to show in the list of facet value also the value selected by
> the user.
>
> The only way I see I can obtain this value is execute a query where I'm
> not restricting the number of facet values returned and I "cherry pick"
> the facet with the value I need. Obviously it's costly.
>
>
>
> Nicola.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--089e0122f58e371cd104d4711a32--

From java-user-return-54939-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Jan 29 18:03:17 2013
Return-Path: <java-user-return-54939-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 36E15E157
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 29 Jan 2013 18:03:17 +0000 (UTC)
Received: (qmail 7642 invoked by uid 500); 29 Jan 2013 18:03:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7576 invoked by uid 500); 29 Jan 2013 18:03:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7534 invoked by uid 99); 29 Jan 2013 18:03:14 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Jan 2013 18:03:14 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of SRS0=LUcghr=LW=basetechnology.com=jack@yourhostingaccount.com designates 65.254.253.45 as permitted sender)
Received: from [65.254.253.45] (HELO mailout05.yourhostingaccount.com) (65.254.253.45)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Jan 2013 18:03:07 +0000
Received: from mailscan21.yourhostingaccount.com ([10.1.15.21] helo=mailscan21.yourhostingaccount.com)
	by mailout05.yourhostingaccount.com with esmtp (Exim)
	id 1U0FWB-0004jX-2H
	for java-user@lucene.apache.org; Tue, 29 Jan 2013 13:02:47 -0500
Received: from impout01.yourhostingaccount.com ([10.1.55.1] helo=impout01.yourhostingaccount.com)
	by mailscan21.yourhostingaccount.com with esmtp (Exim)
	id 1U0FWA-0002rv-O2
	for java-user@lucene.apache.org; Tue, 29 Jan 2013 13:02:46 -0500
Received: from authsmtp11.yourhostingaccount.com ([10.1.18.11])
	by impout01.yourhostingaccount.com with NO UCE
	id tu2m1k0090EKrUA01u2mFR; Tue, 29 Jan 2013 13:02:46 -0500
X-Authority-Analysis: v=2.0 cv=EJGEIilC c=1 sm=1
 a=yH02RjTyxywMAIqhn74x1Q==:17 a=aQzbgH187woA:10 a=nJUqsKCoQKQA:10
 a=3jZET7lWBKwA:10 a=8nJEP1OIZ-IA:10 a=jvYhGVW7AAAA:8 a=HVxvFpnHpOUA:10
 a=mV9VRH-2AAAA:8 a=3_i700F9o-xN_q6_hOAA:9 a=wPNLvfGTeEIA:10 a=EMlJoiak7gQA:10
 a=88iI8knYSJUA:10 a=5bnIr+R+vs56oWgm0tidcA==:117
X-EN-OrigOutIP: 10.1.18.11
X-EN-IMPSID: tu2m1k0090EKrUA01u2mFR
Received: from 207-237-113-14.c3-0.nyr-ubr1.nyr.ny.cable.rcn.com ([207.237.113.14] helo=JackKrupansky)
	by authsmtp11.yourhostingaccount.com with esmtpa (Exim)
	id 1U0FWA-0004dY-4p
	for java-user@lucene.apache.org; Tue, 29 Jan 2013 13:02:46 -0500
Message-ID: <18CE550667164D328619C39B3BA871E1@JackKrupansky>
From: "Jack Krupansky" <jack@basetechnology.com>
To: <java-user@lucene.apache.org>
References: <CAFh=WLgJq2FC2LzgZhOf8mKC=1x=7A3krQktCOSKTMSvD2=3jg@mail.gmail.com><7BFFE07077B64238BF94592798403F43@JackKrupansky> <CAFh=WLgF0A4bq7VLOUuz0QxxHefUN_0Er2puG0D3nbSFt-oYLQ@mail.gmail.com>
In-Reply-To: <CAFh=WLgF0A4bq7VLOUuz0QxxHefUN_0Er2puG0D3nbSFt-oYLQ@mail.gmail.com>
Subject: Re: Questions about FuzzyQuery in Lucene 4.x
Date: Tue, 29 Jan 2013 13:02:43 -0500
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
Importance: Normal
X-Mailer: Microsoft Windows Live Mail 15.4.3555.308
X-MimeOLE: Produced By Microsoft MimeOLE V15.4.3555.308
X-EN-UserInfo: e0a4b55451ed9f27313ebf02e3d4348d:fc4a93e1349e680c52bdd723c0ab3ef6
X-EN-AuthUser: jack@basetechnology.com
Sender:  "Jack Krupansky" <jack@basetechnology.com>
X-EN-OrigIP: 207.237.113.14
X-EN-OrigHost: 207-237-113-14.c3-0.nyr-ubr1.nyr.ny.cable.rcn.com
X-Virus-Checked: Checked by ClamAV on apache.org

I also noticed that you have "MUST" for your full string of fuzzy terms - 
that means everyone of them must appear in an indexed document to be 
matched. Is it possible that maybe even one term was not in the same indexed 
document?

Try to provide a complete example that shows the input data and the query - 
all the literals. In other words, construct a minimal test case that shows 
the failure.

-- Jack Krupansky

-----Original Message----- 
From: George Kelvin
Sent: Tuesday, January 29, 2013 12:28 PM
To: java-user@lucene.apache.org
Subject: Re: Questions about FuzzyQuery in Lucene 4.x

Hi Jack,

ed is set to 1 here and I have lowercased all the data and queries.

Regarding the indexed data factor you mentioned, can you elaborate more?

Thanks!

George


On Tue, Jan 29, 2013 at 9:10 AM, Jack Krupansky 
<jack@basetechnology.com>wrote:

> That depends on the value of "ed", and the indexed data.
>
> Another factor to take into consideration is that a case change ("Star"
> vs. "star") also counts as an edit.
>
> -- Jack Krupansky
>
> -----Original Message----- From: George Kelvin
> Sent: Tuesday, January 29, 2013 11:49 AM
> To: java-user@lucene.apache.org
> Subject: Re: Questions about FuzzyQuery in Lucene 4.x
>
>
> Hi Jack,
>
> Thanks for your reply!
>
> I don't think I passed the prefixLength parameter in.
>
> Here is the code I used to build the FuzzyQuery:
>
>            String[] words = str.split("\\+");
>            BooleanQuery query = new BooleanQuery();
>
>            for (int i=0; i<words.length; i++)
>            {
>                Term t = new Term(field, words[i]);
>                FuzzyQuery fq = new FuzzyQuery(t, ed);
>                query.add(fq, BooleanClause.Occur.MUST);
>            }
>
>            int k = 10;
>            TopDocs results = searcher.search(query, k);
>
> Does it look right to you?
>
> Thanks!
>
> George
>
> ------------------------------**------------------------------**---------
> To unsubscribe, e-mail: 
> java-user-unsubscribe@lucene.**apache.org<java-user-unsubscribe@lucene.apache.org>
> For additional commands, e-mail: 
> java-user-help@lucene.apache.**org<java-user-help@lucene.apache.org>
>
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54940-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Jan 29 19:31:05 2013
Return-Path: <java-user-return-54940-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 1E430E111
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 29 Jan 2013 19:31:05 +0000 (UTC)
Received: (qmail 49839 invoked by uid 500); 29 Jan 2013 19:31:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49802 invoked by uid 500); 29 Jan 2013 19:31:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49792 invoked by uid 99); 29 Jan 2013 19:31:02 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Jan 2013 19:31:02 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of sitowitz@gmail.com designates 209.85.210.180 as permitted sender)
Received: from [209.85.210.180] (HELO mail-ia0-f180.google.com) (209.85.210.180)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Jan 2013 19:30:56 +0000
Received: by mail-ia0-f180.google.com with SMTP id f27so1070873iae.39
        for <java-user@lucene.apache.org>; Tue, 29 Jan 2013 11:30:35 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:x-received:date:message-id:subject:from:to
         :content-type;
        bh=SI6XfahZ8wQsmtqQPt4GHzTrPnAZUz8TNwuddL2D8VE=;
        b=BunuM7xcsVBtx+cmlVoDojaME1RLurcqgPuzQIVCgLzdQzNX8ZBDGwE1cwfcNcXbKU
         PHrvyEMW8k+TpO+PGRmq/R65rDQGRlVx718mv6V14Vzg+zytfVO8f6vsA9TX03nmO+fE
         l+mP6xDRNAayjwLPlIfOKsgADJeSyIn/xpW+sm7HCZEYb+JoYVk7jVuInMY3x1nW94Py
         4Sml/FN/n0d2SeJTxXywQqnMAEs31LXRMmQ8KsOwvL5qB2w3myoYlpaHotq/wevVM53K
         r1uRgb1zV5mV7RqGSMYefDq7A8FKfOZuekH96bliDiDy9AdqPYFGPou0CqvPKwBMneVS
         sOgQ==
MIME-Version: 1.0
X-Received: by 10.50.208.41 with SMTP id mb9mr1819645igc.42.1359487835825;
 Tue, 29 Jan 2013 11:30:35 -0800 (PST)
Received: by 10.43.3.193 with HTTP; Tue, 29 Jan 2013 11:30:35 -0800 (PST)
Date: Tue, 29 Jan 2013 14:30:35 -0500
Message-ID: <CAEsoGCrPLQyhSytUom=PrdA9+ZWz0C=s078C_tWK0N-WgjLYHg@mail.gmail.com>
Subject: Migration to Lucene 4.1
From: Paul Sitowitz <sitowitz@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=14dae9340f7d87e73804d4726d99
X-Virus-Checked: Checked by ClamAV on apache.org

--14dae9340f7d87e73804d4726d99
Content-Type: text/plain; charset=ISO-8859-1

Hello,

I currently have the following production code which currently works with
Lucene 3.0:

this.luceneWriter = new IndexWriter( directory, analyzer, true,
MaxFieldLength.UNLIMITED );
this.fs.delete( this.finalOutput, true );
this.luceneWriter.setUseCompoundFile( true );
this.luceneWriter.setMergeFactor( job.getInt( "indexer.mergeFactor", 1000 )
);
this.luceneWriter.setMaxBufferedDocs( job.getInt( "indexer.minMergeDocs",
1000 ) );
this.luceneWriter.setMaxMergeDocs( job.getInt( "indexer.maxMergeDocs",
Integer.MAX_VALUE ) );

LuceneMergeRecordWriter.this.setStatus( "Adding indexes" );
LuceneMergeRecordWriter.this.luceneWriter.addIndexesNoOptimize(
LuceneMergeRecordWriter.this.luceneIndexes
                                        .toArray( new
Directory[LuceneMergeRecordWriter.this.luceneIndexes.size()] ) );

LuceneMergeRecordWriter.this.setStatus( "Optimizing index" );
LuceneMergeRecordWriter.this.luceneWriter.optimize()

I am in the process of upgrading to Lucene 4.1 but have run into some
unknown API issues. Can someone help to point out what the equivalent 4.1
code would look like?

Here is some of the partial 4.1 code that I have thus far:

        this.fs.delete( this.finalOutput, true );
        IndexWriterConfig iwconf = new IndexWriterConfig(Version.LUCENE_41,
analyzer);
        iwconf.setOpenMode( IndexWriterConfig.OpenMode.CREATE );
        iwconf.setMaxBufferedDocs( conf.getInt( "indexer.minMergeDocs",
1000 ) );
        ..................
        this.luceneWriter = new IndexWriter( directory, iwconf );

Thanks,

Paul

-- 
------------------------------------------
Paul Sitowitz
sitowitz@gmail.com
703-626-3593

--14dae9340f7d87e73804d4726d99--

From java-user-return-54941-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Jan 29 19:43:34 2013
Return-Path: <java-user-return-54941-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 1F1AFE16A
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 29 Jan 2013 19:43:34 +0000 (UTC)
Received: (qmail 98340 invoked by uid 500); 29 Jan 2013 19:43:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98277 invoked by uid 500); 29 Jan 2013 19:43:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98267 invoked by uid 99); 29 Jan 2013 19:43:32 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Jan 2013 19:43:32 +0000
X-ASF-Spam-Status: No, hits=1.7 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of george.kelvin738@gmail.com designates 209.85.160.43 as permitted sender)
Received: from [209.85.160.43] (HELO mail-pb0-f43.google.com) (209.85.160.43)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Jan 2013 19:43:25 +0000
Received: by mail-pb0-f43.google.com with SMTP id jt11so475280pbb.30
        for <java-user@lucene.apache.org>; Tue, 29 Jan 2013 11:43:04 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:x-received:in-reply-to:references:date:message-id
         :subject:from:to:content-type;
        bh=C/1CPUNNHtUQw0iMLmvqoskzQgfklQ/eguLWOcNTkvc=;
        b=THLDfi4o7x6jArJzB4tIDl7olD+Fjs5DQ/RbJPPRAQiWCELjXL+FFUtstu6ASFZW/h
         HW6ybdXP6iABlllT+aQ8aIF6o45kYE23Wbqy+Em1SALGpT1q/e6k5IbBj8SsnsZs22fc
         HMM9eM0+gz+0nbjY7P6maBR64tcunu3o5WliFa1jbVDXFybQhFVlYjJNbuEIHr2llWc7
         AtfcirbUMtS8F5U4z7NrasMWZJQAO5tIJrFyIbJx6uxH7UA8pLoTh5nUinlwMYSJwycT
         1Gbttb1We2UR+dv2mBn4jhRV8BwIrDUlFcR71S/EMuDuUcYIgsC3mH38/bidOK2RiDve
         6Wug==
MIME-Version: 1.0
X-Received: by 10.68.228.74 with SMTP id sg10mr5160695pbc.162.1359488583905;
 Tue, 29 Jan 2013 11:43:03 -0800 (PST)
Received: by 10.68.64.196 with HTTP; Tue, 29 Jan 2013 11:43:03 -0800 (PST)
In-Reply-To: <18CE550667164D328619C39B3BA871E1@JackKrupansky>
References: <CAFh=WLgJq2FC2LzgZhOf8mKC=1x=7A3krQktCOSKTMSvD2=3jg@mail.gmail.com>
	<7BFFE07077B64238BF94592798403F43@JackKrupansky>
	<CAFh=WLgF0A4bq7VLOUuz0QxxHefUN_0Er2puG0D3nbSFt-oYLQ@mail.gmail.com>
	<18CE550667164D328619C39B3BA871E1@JackKrupansky>
Date: Tue, 29 Jan 2013 11:43:03 -0800
Message-ID: <CAFh=WLjwACFHSbOR9M2e4yYCpRVY0b8G12VDDCDzz4TLWHgf3A@mail.gmail.com>
Subject: Re: Questions about FuzzyQuery in Lucene 4.x
From: George Kelvin <george.kelvin738@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=e89a8ffba0211eb21604d4729abc
X-Virus-Checked: Checked by ClamAV on apache.org

--e89a8ffba0211eb21604d4729abc
Content-Type: text/plain; charset=ISO-8859-1

Hi Jack,

The problematic query is "scar"+"wads".

There are several (more than 10) documents in the data with the content
"star wars", so I think that query should be able to find all these
documents.

I was trying to provide a minimal test case, but I couldn't reduce the size
of data showing the failure.

The size of the minimal data showing the failure I got so far is around 2
million.

However, I found a suspicious document with content "scor". If I remove it
from the 2 million documents data, that query can find all the "star wars"
documents. If I add it back, then the query can't find any.

I tried to reduce the size of the data to 1 million further and add that
"scor" document, but now the query can still find all the "star wars"
documents.

Is it possible that Lucene somehow fail to find all the valid terms within
the edit distance?

Thanks!

George


On Tue, Jan 29, 2013 at 10:02 AM, Jack Krupansky <jack@basetechnology.com>wrote:

> I also noticed that you have "MUST" for your full string of fuzzy terms -
> that means everyone of them must appear in an indexed document to be
> matched. Is it possible that maybe even one term was not in the same
> indexed document?
>
> Try to provide a complete example that shows the input data and the query
> - all the literals. In other words, construct a minimal test case that
> shows the failure.
>
>
> -- Jack Krupansky
>
> -----Original Message----- From: George Kelvin
> Sent: Tuesday, January 29, 2013 12:28 PM
>
> To: java-user@lucene.apache.org
> Subject: Re: Questions about FuzzyQuery in Lucene 4.x
>
> Hi Jack,
>
> ed is set to 1 here and I have lowercased all the data and queries.
>
> Regarding the indexed data factor you mentioned, can you elaborate more?
>
> Thanks!
>
> George
>
>
> On Tue, Jan 29, 2013 at 9:10 AM, Jack Krupansky <jack@basetechnology.com>*
> *wrote:
>
>  That depends on the value of "ed", and the indexed data.
>>
>> Another factor to take into consideration is that a case change ("Star"
>> vs. "star") also counts as an edit.
>>
>> -- Jack Krupansky
>>
>> -----Original Message----- From: George Kelvin
>> Sent: Tuesday, January 29, 2013 11:49 AM
>> To: java-user@lucene.apache.org
>> Subject: Re: Questions about FuzzyQuery in Lucene 4.x
>>
>>
>> Hi Jack,
>>
>> Thanks for your reply!
>>
>> I don't think I passed the prefixLength parameter in.
>>
>> Here is the code I used to build the FuzzyQuery:
>>
>>            String[] words = str.split("\\+");
>>            BooleanQuery query = new BooleanQuery();
>>
>>            for (int i=0; i<words.length; i++)
>>            {
>>                Term t = new Term(field, words[i]);
>>                FuzzyQuery fq = new FuzzyQuery(t, ed);
>>                query.add(fq, BooleanClause.Occur.MUST);
>>            }
>>
>>            int k = 10;
>>            TopDocs results = searcher.search(query, k);
>>
>> Does it look right to you?
>>
>> Thanks!
>>
>> George
>>
>> ------------------------------****----------------------------**
>> --**---------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.****apache.org<
>> java-user-**unsubscribe@lucene.apache.org<java-user-unsubscribe@lucene.apache.org>
>> >
>> For additional commands, e-mail: java-user-help@lucene.apache.****org<
>> java-user-help@lucene.**apache.org <java-user-help@lucene.apache.org>>
>>
>>
>>
>
> ------------------------------**------------------------------**---------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.**apache.org<java-user-unsubscribe@lucene.apache.org>
> For additional commands, e-mail: java-user-help@lucene.apache.**org<java-user-help@lucene.apache.org>
>
>

--e89a8ffba0211eb21604d4729abc--

From java-user-return-54942-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Jan 29 19:50:56 2013
Return-Path: <java-user-return-54942-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 94E9CE1A4
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 29 Jan 2013 19:50:56 +0000 (UTC)
Received: (qmail 30302 invoked by uid 500); 29 Jan 2013 19:50:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30099 invoked by uid 500); 29 Jan 2013 19:50:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30089 invoked by uid 99); 29 Jan 2013 19:50:54 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Jan 2013 19:50:54 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of SRS0=LUcghr=LW=basetechnology.com=jack@yourhostingaccount.com designates 65.254.253.56 as permitted sender)
Received: from [65.254.253.56] (HELO mailout07.yourhostingaccount.com) (65.254.253.56)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Jan 2013 19:50:48 +0000
Received: from mailscan07.yourhostingaccount.com ([10.1.15.7] helo=mailscan07.yourhostingaccount.com)
	by mailout07.yourhostingaccount.com with esmtp (Exim)
	id 1U0HCN-0006G6-Pj
	for java-user@lucene.apache.org; Tue, 29 Jan 2013 14:50:27 -0500
Received: from impout01.yourhostingaccount.com ([10.1.55.1] helo=impout01.yourhostingaccount.com)
	by mailscan07.yourhostingaccount.com with esmtp (Exim)
	id 1U0HCM-0002qm-RX
	for java-user@lucene.apache.org; Tue, 29 Jan 2013 14:50:26 -0500
Received: from authsmtp17.yourhostingaccount.com ([10.1.18.17])
	by impout01.yourhostingaccount.com with NO UCE
	id tvqS1k00C0N5tVm01vqSV2; Tue, 29 Jan 2013 14:50:26 -0500
X-Authority-Analysis: v=2.0 cv=EJGEIilC c=1 sm=1
 a=yH02RjTyxywMAIqhn74x1Q==:17 a=aQzbgH187woA:10 a=nJUqsKCoQKQA:10
 a=3jZET7lWBKwA:10 a=8nJEP1OIZ-IA:10 a=jvYhGVW7AAAA:8 a=HVxvFpnHpOUA:10
 a=mV9VRH-2AAAA:8 a=WYUekVgCEsT9cHySOYcA:9 a=wPNLvfGTeEIA:10 a=EMlJoiak7gQA:10
 a=88iI8knYSJUA:10 a=8LujXawukIK26S7H:21 a=ff861PcC_JKwyr4i:21
 a=ayZJSlMgWVhgG3n+ZwULew==:117
X-EN-OrigOutIP: 10.1.18.17
X-EN-IMPSID: tvqS1k00C0N5tVm01vqSV2
Received: from 207-237-113-14.c3-0.nyr-ubr1.nyr.ny.cable.rcn.com ([207.237.113.14] helo=JackKrupansky)
	by authsmtp17.yourhostingaccount.com with esmtpa (Exim)
	id 1U0HCL-0002Vf-So
	for java-user@lucene.apache.org; Tue, 29 Jan 2013 14:50:26 -0500
Message-ID: <8B5235E8060F4FE6B78BEC5275B6FCA1@JackKrupansky>
From: "Jack Krupansky" <jack@basetechnology.com>
To: <java-user@lucene.apache.org>
References: <CAFh=WLgJq2FC2LzgZhOf8mKC=1x=7A3krQktCOSKTMSvD2=3jg@mail.gmail.com><7BFFE07077B64238BF94592798403F43@JackKrupansky><CAFh=WLgF0A4bq7VLOUuz0QxxHefUN_0Er2puG0D3nbSFt-oYLQ@mail.gmail.com><18CE550667164D328619C39B3BA871E1@JackKrupansky> <CAFh=WLjwACFHSbOR9M2e4yYCpRVY0b8G12VDDCDzz4TLWHgf3A@mail.gmail.com>
In-Reply-To: <CAFh=WLjwACFHSbOR9M2e4yYCpRVY0b8G12VDDCDzz4TLWHgf3A@mail.gmail.com>
Subject: Re: Questions about FuzzyQuery in Lucene 4.x
Date: Tue, 29 Jan 2013 14:50:23 -0500
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
Importance: Normal
X-Mailer: Microsoft Windows Live Mail 15.4.3555.308
X-MimeOLE: Produced By Microsoft MimeOLE V15.4.3555.308
X-EN-UserInfo: e0a4b55451ed9f27313ebf02e3d4348d:fc4a93e1349e680c52bdd723c0ab3ef6
X-EN-AuthUser: jack@basetechnology.com
Sender:  "Jack Krupansky" <jack@basetechnology.com>
X-EN-OrigIP: 207.237.113.14
X-EN-OrigHost: 207-237-113-14.c3-0.nyr-ubr1.nyr.ny.cable.rcn.com
X-Virus-Checked: Checked by ClamAV on apache.org

I'm sorry, but for anybody to help you here, you really need to be able to 
provide a concise test case, like 10-20 lines of code, completely 
self-contained. If you think you need a million documents to repro what you 
claimed was a simple scenario, then you leave me very, very confused - and 
unable to help you any further.

-- Jack Krupansky

-----Original Message----- 
From: George Kelvin
Sent: Tuesday, January 29, 2013 2:43 PM
To: java-user@lucene.apache.org
Subject: Re: Questions about FuzzyQuery in Lucene 4.x

Hi Jack,

The problematic query is "scar"+"wads".

There are several (more than 10) documents in the data with the content
"star wars", so I think that query should be able to find all these
documents.

I was trying to provide a minimal test case, but I couldn't reduce the size
of data showing the failure.

The size of the minimal data showing the failure I got so far is around 2
million.

However, I found a suspicious document with content "scor". If I remove it
from the 2 million documents data, that query can find all the "star wars"
documents. If I add it back, then the query can't find any.

I tried to reduce the size of the data to 1 million further and add that
"scor" document, but now the query can still find all the "star wars"
documents.

Is it possible that Lucene somehow fail to find all the valid terms within
the edit distance?

Thanks!

George


On Tue, Jan 29, 2013 at 10:02 AM, Jack Krupansky 
<jack@basetechnology.com>wrote:

> I also noticed that you have "MUST" for your full string of fuzzy terms -
> that means everyone of them must appear in an indexed document to be
> matched. Is it possible that maybe even one term was not in the same
> indexed document?
>
> Try to provide a complete example that shows the input data and the query
> - all the literals. In other words, construct a minimal test case that
> shows the failure.
>
>
> -- Jack Krupansky
>
> -----Original Message----- From: George Kelvin
> Sent: Tuesday, January 29, 2013 12:28 PM
>
> To: java-user@lucene.apache.org
> Subject: Re: Questions about FuzzyQuery in Lucene 4.x
>
> Hi Jack,
>
> ed is set to 1 here and I have lowercased all the data and queries.
>
> Regarding the indexed data factor you mentioned, can you elaborate more?
>
> Thanks!
>
> George
>
>
> On Tue, Jan 29, 2013 at 9:10 AM, Jack Krupansky <jack@basetechnology.com>*
> *wrote:
>
>  That depends on the value of "ed", and the indexed data.
>>
>> Another factor to take into consideration is that a case change ("Star"
>> vs. "star") also counts as an edit.
>>
>> -- Jack Krupansky
>>
>> -----Original Message----- From: George Kelvin
>> Sent: Tuesday, January 29, 2013 11:49 AM
>> To: java-user@lucene.apache.org
>> Subject: Re: Questions about FuzzyQuery in Lucene 4.x
>>
>>
>> Hi Jack,
>>
>> Thanks for your reply!
>>
>> I don't think I passed the prefixLength parameter in.
>>
>> Here is the code I used to build the FuzzyQuery:
>>
>>            String[] words = str.split("\\+");
>>            BooleanQuery query = new BooleanQuery();
>>
>>            for (int i=0; i<words.length; i++)
>>            {
>>                Term t = new Term(field, words[i]);
>>                FuzzyQuery fq = new FuzzyQuery(t, ed);
>>                query.add(fq, BooleanClause.Occur.MUST);
>>            }
>>
>>            int k = 10;
>>            TopDocs results = searcher.search(query, k);
>>
>> Does it look right to you?
>>
>> Thanks!
>>
>> George
>>
>> ------------------------------****----------------------------**
>> --**---------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.****apache.org<
>> java-user-**unsubscribe@lucene.apache.org<java-user-unsubscribe@lucene.apache.org>
>> >
>> For additional commands, e-mail: java-user-help@lucene.apache.****org<
>> java-user-help@lucene.**apache.org <java-user-help@lucene.apache.org>>
>>
>>
>>
>
> ------------------------------**------------------------------**---------
> To unsubscribe, e-mail: 
> java-user-unsubscribe@lucene.**apache.org<java-user-unsubscribe@lucene.apache.org>
> For additional commands, e-mail: 
> java-user-help@lucene.apache.**org<java-user-help@lucene.apache.org>
>
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54943-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Jan 29 22:49:31 2013
Return-Path: <java-user-return-54943-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 4830BE653
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 29 Jan 2013 22:49:31 +0000 (UTC)
Received: (qmail 20170 invoked by uid 500); 29 Jan 2013 22:49:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20115 invoked by uid 500); 29 Jan 2013 22:49:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20107 invoked by uid 99); 29 Jan 2013 22:49:29 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Jan 2013 22:49:29 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of sean.bridges@gmail.com designates 209.85.215.179 as permitted sender)
Received: from [209.85.215.179] (HELO mail-ea0-f179.google.com) (209.85.215.179)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Jan 2013 22:49:21 +0000
Received: by mail-ea0-f179.google.com with SMTP id d12so415499eaa.10
        for <java-user@lucene.apache.org>; Tue, 29 Jan 2013 14:49:01 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=x-received:mime-version:from:date:message-id:subject:to
         :content-type;
        bh=XueevnxDaOl+Ge+93CioEJ9sxgG3pdMc0LiWIq8Z9O4=;
        b=JNlnHyaEi6szneR8v+12w0fxvukg8kSydEXszNXGJCIkDDEm4r4lKT1U9bcvcrId2e
         +rsxzx70hPZJwMuUYQwroDyAEXTElPuisqddgbC8wQGZYEcsaVyEFplTeq9jql/9uLPu
         ohg7lJjNwchSCQBcEPYBV23TX3eb99Es8z2EahW7iPsBgehj+EgsxtyHNkYJSZe6crXk
         544aZHjpu2I4nox+dHEiMBryC1LydWJsI7R7uqTtjPpHcj4QEQySl754aQFfDuvGTkMr
         cQAlS7uPgyiSwkViuH0uYTIta76qD8WnFQ/33JmlUUNfBadYTS59YTTDZPqlABR/Mw9I
         iAtw==
X-Received: by 10.14.211.137 with SMTP id w9mr7646464eeo.39.1359499741452;
 Tue, 29 Jan 2013 14:49:01 -0800 (PST)
MIME-Version: 1.0
Received: by 10.14.178.66 with HTTP; Tue, 29 Jan 2013 14:48:31 -0800 (PST)
From: Sean Bridges <sean.bridges@gmail.com>
Date: Tue, 29 Jan 2013 14:48:31 -0800
Message-ID: <CAOD+0FJSikpVj0Hn9QeXOOhyUbVMtAU8WraoyBDipN09_=mgzw@mail.gmail.com>
Subject: Pulsing40PostingsFormat in lucene 4.1
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=047d7b624ab8295bad04d47533b2
X-Virus-Checked: Checked by ClamAV on apache.org

--047d7b624ab8295bad04d47533b2
Content-Type: text/plain; charset=ISO-8859-1

Hello,

We are trying to upgrade from lucene 4.0 to 4.1.  Our indexes were written
using Pulsing40PostingsFormat, which doesn't seem to be supported in 4.1.
 For writing new indexes, we can switch to Pulsing41PostingsFormat, but is
there an easy way to read our old indexes using Lucene 4.1?

What are the best practices for compatibility when using
PostingFormat/Codecs.  Pulsing40PostingsFormat was marked @experimental, so
perhaps we shouldn't have used it.  But every PostingFormat/Codec shipped
in 4.1 is either @experimental or @deprecated.

Thanks,

Sean

--047d7b624ab8295bad04d47533b2--

From java-user-return-54944-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Jan 29 22:54:12 2013
Return-Path: <java-user-return-54944-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 338DBE693
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 29 Jan 2013 22:54:12 +0000 (UTC)
Received: (qmail 45397 invoked by uid 500); 29 Jan 2013 22:54:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45259 invoked by uid 500); 29 Jan 2013 22:54:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45251 invoked by uid 99); 29 Jan 2013 22:54:10 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Jan 2013 22:54:10 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.212.41] (HELO mail-vb0-f41.google.com) (209.85.212.41)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Jan 2013 22:54:03 +0000
Received: by mail-vb0-f41.google.com with SMTP id l22so650211vbn.0
        for <java-user@lucene.apache.org>; Tue, 29 Jan 2013 14:53:42 -0800 (PST)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=x-received:mime-version:in-reply-to:references:from:date:message-id
         :subject:to:content-type:x-gm-message-state;
        bh=1/RbKTzbjiW7xNYRxqjmbq4/+8oWvFCi/n6X08SSyR8=;
        b=eo7P+2a2F/G2g0Cut1ziKgph0DHID8+VVStAPGCQWLzDBzxISzYbEJG2LghL67ayab
         9gs3sgTFlnY7JWEDPUvNFaG/ToOy/LmKZchMgOoSgoxfM18gaVVqCdLskVo9+mwkAjDM
         tI3e4c0OB90UPaaRfB0H3ocyw6bvm+9I2CQG/VN+qsxAcaC8n9A889jH403hzURRmN4x
         p1R+3mU9p268fY59eulWFGJDbssh4+urLb/70JGMxYy36uKgCrTpB9btGp1g8RTG2c19
         ImrrsmC5cngQ34+SPJVEB0FF9MbKDLMtVM00IojlxVrsL0qsDD3dc8xEF3KZ/TIVwrca
         ybpg==
X-Received: by 10.52.96.232 with SMTP id dv8mr2533079vdb.132.1359500022632;
 Tue, 29 Jan 2013 14:53:42 -0800 (PST)
MIME-Version: 1.0
Received: by 10.220.63.77 with HTTP; Tue, 29 Jan 2013 14:53:22 -0800 (PST)
In-Reply-To: <CAOD+0FJSikpVj0Hn9QeXOOhyUbVMtAU8WraoyBDipN09_=mgzw@mail.gmail.com>
References: <CAOD+0FJSikpVj0Hn9QeXOOhyUbVMtAU8WraoyBDipN09_=mgzw@mail.gmail.com>
From: Michael McCandless <lucene@mikemccandless.com>
Date: Tue, 29 Jan 2013 17:53:22 -0500
Message-ID: <CAL8PwkYbWrCMJSxJuZLV12SA6nmsvFG8tBDZ4ccCS+TpqP_APQ@mail.gmail.com>
Subject: Re: Pulsing40PostingsFormat in lucene 4.1
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Gm-Message-State: ALoCoQlPIhHu2IRVj5BzJ0ah3E2QsZBPOmdwf+BvRqVrBpAeYx/YPOtCNigP9BSSXbTUzLhgsO+U
X-Virus-Checked: Checked by ClamAV on apache.org

Pulsing41PostingsFormat was just moved out of core to the "codecs" module.

Still, the worst case (had it been deleted) would be to revive the
code from the past release and put it in your classpath, so old
indices could be read.

Mike McCandless

http://blog.mikemccandless.com

On Tue, Jan 29, 2013 at 5:48 PM, Sean Bridges <sean.bridges@gmail.com> wrote:
> Hello,
>
> We are trying to upgrade from lucene 4.0 to 4.1.  Our indexes were written
> using Pulsing40PostingsFormat, which doesn't seem to be supported in 4.1.
>  For writing new indexes, we can switch to Pulsing41PostingsFormat, but is
> there an easy way to read our old indexes using Lucene 4.1?
>
> What are the best practices for compatibility when using
> PostingFormat/Codecs.  Pulsing40PostingsFormat was marked @experimental, so
> perhaps we shouldn't have used it.  But every PostingFormat/Codec shipped
> in 4.1 is either @experimental or @deprecated.
>
> Thanks,
>
> Sean

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54945-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Jan 29 23:12:09 2013
Return-Path: <java-user-return-54945-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id DC833E82B
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 29 Jan 2013 23:12:09 +0000 (UTC)
Received: (qmail 30108 invoked by uid 500); 29 Jan 2013 23:12:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30067 invoked by uid 500); 29 Jan 2013 23:12:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30059 invoked by uid 99); 29 Jan 2013 23:12:07 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Jan 2013 23:12:07 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of sean.bridges@gmail.com designates 74.125.83.54 as permitted sender)
Received: from [74.125.83.54] (HELO mail-ee0-f54.google.com) (74.125.83.54)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Jan 2013 23:12:02 +0000
Received: by mail-ee0-f54.google.com with SMTP id c41so528300eek.13
        for <java-user@lucene.apache.org>; Tue, 29 Jan 2013 15:11:41 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=x-received:mime-version:in-reply-to:references:from:date:message-id
         :subject:to:content-type;
        bh=zYmR4nYtjuJavBuwddAHagb9oWWOAOfOi2tx/ICHT8M=;
        b=LSG2Hbk2rEc5mmyxZgpLFPYxrUmQ0ajBXhSJY89g3x1aNhQhM8+NKAPfaV/JuqunUw
         qJavMlDIR+ILUnQcLFk4cnvYg0lEGaZbsCemyMP5ceUekModBvWaiCcnKAJeQm1cK2S4
         IsqmILpQm0ZiWaua7xKnhnCpVtgIE2fY05Sfgs8dIyNfBjHsehi1pi7RFFkWtZj9rzLX
         VJ+Rw6qvFaGOSRZXTG4nXw39KYBn54bD/dBbFJ38n4Tcd3HDFbD6iqkK6jNmuH/yKf1J
         7AtKIsI+ZLmGLmcyUCCB4LG6T4yD5rxMeiOua/J4EGboPXRJRPLmRLGrBdfzFxMAuJte
         xWpQ==
X-Received: by 10.14.194.195 with SMTP id m43mr8033932een.44.1359501101319;
 Tue, 29 Jan 2013 15:11:41 -0800 (PST)
MIME-Version: 1.0
Received: by 10.14.178.66 with HTTP; Tue, 29 Jan 2013 15:11:10 -0800 (PST)
In-Reply-To: <CAL8PwkYbWrCMJSxJuZLV12SA6nmsvFG8tBDZ4ccCS+TpqP_APQ@mail.gmail.com>
References: <CAOD+0FJSikpVj0Hn9QeXOOhyUbVMtAU8WraoyBDipN09_=mgzw@mail.gmail.com>
 <CAL8PwkYbWrCMJSxJuZLV12SA6nmsvFG8tBDZ4ccCS+TpqP_APQ@mail.gmail.com>
From: Sean Bridges <sean.bridges@gmail.com>
Date: Tue, 29 Jan 2013 15:11:10 -0800
Message-ID: <CAOD+0FKKFjF66z94eH5H5LP89ytC8AsbJhZ4Fk5pwjjXh04Y5Q@mail.gmail.com>
Subject: Re: Pulsing40PostingsFormat in lucene 4.1
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=047d7b342c4c37468704d475847f
X-Virus-Checked: Checked by ClamAV on apache.org

--047d7b342c4c37468704d475847f
Content-Type: text/plain; charset=ISO-8859-1

Do I need the Pulsing40PostingsFormat class to read my indexes though?
Pulsing40PostingsFormat isn't shipped with lucene 4.1.

I have index files with names like _0_Pulsing40_0.frq.  When I try to open
my index I get,

java.lang.IllegalArgumentException: A SPI class of type
org.apache.lucene.codecs.PostingsFormat with name 'Pulsing40' does not
exist. You need to add the corresponding JAR file supporting this SPI to
your classpath.The current classpath supports the following names:
[Lucene40, Lucene41, Pulsing41, SimpleText, Memory, BloomFilter, Direct]

Thanks,

Sean


On Tue, Jan 29, 2013 at 2:53 PM, Michael McCandless <
lucene@mikemccandless.com> wrote:

> Pulsing41PostingsFormat was just moved out of core to the "codecs" module.
>
> Still, the worst case (had it been deleted) would be to revive the
> code from the past release and put it in your classpath, so old
> indices could be read.
>
> Mike McCandless
>
> http://blog.mikemccandless.com
>
> On Tue, Jan 29, 2013 at 5:48 PM, Sean Bridges <sean.bridges@gmail.com>
> wrote:
> > Hello,
> >
> > We are trying to upgrade from lucene 4.0 to 4.1.  Our indexes were
> written
> > using Pulsing40PostingsFormat, which doesn't seem to be supported in 4.1.
> >  For writing new indexes, we can switch to Pulsing41PostingsFormat, but
> is
> > there an easy way to read our old indexes using Lucene 4.1?
> >
> > What are the best practices for compatibility when using
> > PostingFormat/Codecs.  Pulsing40PostingsFormat was marked @experimental,
> so
> > perhaps we shouldn't have used it.  But every PostingFormat/Codec shipped
> > in 4.1 is either @experimental or @deprecated.
> >
> > Thanks,
> >
> > Sean
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--047d7b342c4c37468704d475847f--

From java-user-return-54946-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Jan 29 23:19:13 2013
Return-Path: <java-user-return-54946-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 17AA5E8E5
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 29 Jan 2013 23:19:13 +0000 (UTC)
Received: (qmail 62491 invoked by uid 500); 29 Jan 2013 23:19:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62444 invoked by uid 500); 29 Jan 2013 23:19:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62434 invoked by uid 99); 29 Jan 2013 23:19:10 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Jan 2013 23:19:10 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.220.179] (HELO mail-vc0-f179.google.com) (209.85.220.179)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Jan 2013 23:19:05 +0000
Received: by mail-vc0-f179.google.com with SMTP id gb23so645691vcb.24
        for <java-user@lucene.apache.org>; Tue, 29 Jan 2013 15:18:44 -0800 (PST)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=x-received:mime-version:in-reply-to:references:from:date:message-id
         :subject:to:content-type:x-gm-message-state;
        bh=aVzb+PInyrfaUV21jJS2H2uv2cumOUdyJvznImePR74=;
        b=YBCNdzPcPhCX2YWiG0SQQQVpmDo6aDb4klPwt3WcZ11GzN7tIV34J9KiW9i0VVzHmh
         94Zt3L2YtguP+VniAO3awHK8UpzcfbMKHK6eHv6er1gNladQINKJ6m+2ohUtUhrt/d9B
         3PiaYEGa8Kv8boUFMrWbz9F5t5I7MCK3ktVpJucYvPeQnh/U2lE8ukYmEoOCxcPOUs8N
         TW9utq3u+WwCiX/x+rsIpDov80tWyQhFcFkTBf9HqthXSbawdpbdhGER0GkR7nv4tYrd
         SrR42XuSM0Lhlql/S6uorrR66WusI64XC3mvMxbfmHTCjdJhE8WP+62uZlzGmdjY6C0i
         wlkQ==
X-Received: by 10.221.10.6 with SMTP id oy6mr2969707vcb.65.1359501524486; Tue,
 29 Jan 2013 15:18:44 -0800 (PST)
MIME-Version: 1.0
Received: by 10.220.249.67 with HTTP; Tue, 29 Jan 2013 15:18:24 -0800 (PST)
In-Reply-To: <CAOD+0FKKFjF66z94eH5H5LP89ytC8AsbJhZ4Fk5pwjjXh04Y5Q@mail.gmail.com>
References: <CAOD+0FJSikpVj0Hn9QeXOOhyUbVMtAU8WraoyBDipN09_=mgzw@mail.gmail.com>
 <CAL8PwkYbWrCMJSxJuZLV12SA6nmsvFG8tBDZ4ccCS+TpqP_APQ@mail.gmail.com> <CAOD+0FKKFjF66z94eH5H5LP89ytC8AsbJhZ4Fk5pwjjXh04Y5Q@mail.gmail.com>
From: Michael McCandless <lucene@mikemccandless.com>
Date: Tue, 29 Jan 2013 18:18:24 -0500
Message-ID: <CAL8PwkZnA5-8ycHDO2z3FNugyzNAbPyQaZqRt=esGSGC1-W0Gg@mail.gmail.com>
Subject: Re: Pulsing40PostingsFormat in lucene 4.1
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Gm-Message-State: ALoCoQkqGLbqjY33KiPW253HyTaHb+wOU4uzw65bQGriLq0YOk8YwPNXjO0HjHl26cKlXhTBl9WJ
X-Virus-Checked: Checked by ClamAV on apache.org

Woops, sorry: PulsingPostingsFormat was already moved from core to
codecs as of 4.0 (not in 4.1 like I said before).

And ... yes, you need Pulsing40PostingsFormat on your classpath to
read your 4.0 indices with 4.1.  I think you need to excise the
sources and get them on the classpath?  But this will be tricky:
Lucene40PulsingPF uses various codec APIs (eg BlockTreeTermsReader)
from 4.0 as well, which will conflict with the 4.1 classes by the same
package/name...

Mike McCandless

http://blog.mikemccandless.com

On Tue, Jan 29, 2013 at 6:11 PM, Sean Bridges <sean.bridges@gmail.com> wrote:
> Do I need the Pulsing40PostingsFormat class to read my indexes though?
> Pulsing40PostingsFormat isn't shipped with lucene 4.1.
>
> I have index files with names like _0_Pulsing40_0.frq.  When I try to open
> my index I get,
>
> java.lang.IllegalArgumentException: A SPI class of type
> org.apache.lucene.codecs.PostingsFormat with name 'Pulsing40' does not
> exist. You need to add the corresponding JAR file supporting this SPI to
> your classpath.The current classpath supports the following names:
> [Lucene40, Lucene41, Pulsing41, SimpleText, Memory, BloomFilter, Direct]
>
> Thanks,
>
> Sean
>
>
> On Tue, Jan 29, 2013 at 2:53 PM, Michael McCandless <
> lucene@mikemccandless.com> wrote:
>
>> Pulsing41PostingsFormat was just moved out of core to the "codecs" module.
>>
>> Still, the worst case (had it been deleted) would be to revive the
>> code from the past release and put it in your classpath, so old
>> indices could be read.
>>
>> Mike McCandless
>>
>> http://blog.mikemccandless.com
>>
>> On Tue, Jan 29, 2013 at 5:48 PM, Sean Bridges <sean.bridges@gmail.com>
>> wrote:
>> > Hello,
>> >
>> > We are trying to upgrade from lucene 4.0 to 4.1.  Our indexes were
>> written
>> > using Pulsing40PostingsFormat, which doesn't seem to be supported in 4.1.
>> >  For writing new indexes, we can switch to Pulsing41PostingsFormat, but
>> is
>> > there an easy way to read our old indexes using Lucene 4.1?
>> >
>> > What are the best practices for compatibility when using
>> > PostingFormat/Codecs.  Pulsing40PostingsFormat was marked @experimental,
>> so
>> > perhaps we shouldn't have used it.  But every PostingFormat/Codec shipped
>> > in 4.1 is either @experimental or @deprecated.
>> >
>> > Thanks,
>> >
>> > Sean
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54947-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Jan 29 23:22:17 2013
Return-Path: <java-user-return-54947-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 95EF1E8FA
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 29 Jan 2013 23:22:17 +0000 (UTC)
Received: (qmail 74812 invoked by uid 500); 29 Jan 2013 23:22:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74761 invoked by uid 500); 29 Jan 2013 23:22:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74752 invoked by uid 99); 29 Jan 2013 23:22:15 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Jan 2013 23:22:15 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.220.174] (HELO mail-vc0-f174.google.com) (209.85.220.174)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Jan 2013 23:22:10 +0000
Received: by mail-vc0-f174.google.com with SMTP id n11so658663vch.33
        for <java-user@lucene.apache.org>; Tue, 29 Jan 2013 15:21:49 -0800 (PST)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=x-received:mime-version:in-reply-to:references:from:date:message-id
         :subject:to:content-type:x-gm-message-state;
        bh=lNFmhHAAnF4z5ZUQubAZadmiZLvF5Gncs4og2HAUR60=;
        b=TWqcU3XhD+fwwxGdoM81GK1uFKk0DqdRJXvtN4kaangmiM2Bhs7a/sqAe5O6SmMVhH
         yjaJpCBl8+g42NKVII0ehzWUVe/gWLtC3XuoKiHw7s63PzDFQfQfD4by+n/X7jVFwPEQ
         qhbARQyoT9pdQ43rvC3/gTx+7asKmmLni9N5kLwupPsxIV0blhsmY97FOr1+KTRbPCeL
         vjb/7EQdZ9RzgVPyLdaH3BHRo7w3nH0EMp2EeEHjVN5dqqiDJt7kNInUO/uhOFmtlEoh
         RMB7ioEblvD2Aew0oZpfs9S5CIJEnI9Nn3f1Vcxe1FxYmMOvpo+ejj++nRHd4HJvh74g
         6GTg==
X-Received: by 10.220.150.3 with SMTP id w3mr3054830vcv.37.1359501709151; Tue,
 29 Jan 2013 15:21:49 -0800 (PST)
MIME-Version: 1.0
Received: by 10.220.249.67 with HTTP; Tue, 29 Jan 2013 15:21:29 -0800 (PST)
In-Reply-To: <CAL8PwkZnA5-8ycHDO2z3FNugyzNAbPyQaZqRt=esGSGC1-W0Gg@mail.gmail.com>
References: <CAOD+0FJSikpVj0Hn9QeXOOhyUbVMtAU8WraoyBDipN09_=mgzw@mail.gmail.com>
 <CAL8PwkYbWrCMJSxJuZLV12SA6nmsvFG8tBDZ4ccCS+TpqP_APQ@mail.gmail.com>
 <CAOD+0FKKFjF66z94eH5H5LP89ytC8AsbJhZ4Fk5pwjjXh04Y5Q@mail.gmail.com> <CAL8PwkZnA5-8ycHDO2z3FNugyzNAbPyQaZqRt=esGSGC1-W0Gg@mail.gmail.com>
From: Michael McCandless <lucene@mikemccandless.com>
Date: Tue, 29 Jan 2013 18:21:29 -0500
Message-ID: <CAL8PwkbFPuQ3FOpgnL965ZW+HSxTQTfqjqg5jN=rmV9dwJxh1A@mail.gmail.com>
Subject: Re: Pulsing40PostingsFormat in lucene 4.1
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Gm-Message-State: ALoCoQmSXWOF4+qtw9oHCrkt0/26VZPp6+bDSChH3nA873SMQroyQLYw6Ev9YKVaqy71zyLbn7Cg
X-Virus-Checked: Checked by ClamAV on apache.org

Another option would be, using 4.0, use addIndexes(IndexReader[]) into
a new index, to convert your entire index into the supported (back
compat) codec (Lucene40).

Don't use addIndexes(Directory[]) as this just copies files.

Then you can read that resulting index with 4.1.

Mike McCandless

http://blog.mikemccandless.com

On Tue, Jan 29, 2013 at 6:18 PM, Michael McCandless
<lucene@mikemccandless.com> wrote:
> Woops, sorry: PulsingPostingsFormat was already moved from core to
> codecs as of 4.0 (not in 4.1 like I said before).
>
> And ... yes, you need Pulsing40PostingsFormat on your classpath to
> read your 4.0 indices with 4.1.  I think you need to excise the
> sources and get them on the classpath?  But this will be tricky:
> Lucene40PulsingPF uses various codec APIs (eg BlockTreeTermsReader)
> from 4.0 as well, which will conflict with the 4.1 classes by the same
> package/name...
>
> Mike McCandless
>
> http://blog.mikemccandless.com
>
> On Tue, Jan 29, 2013 at 6:11 PM, Sean Bridges <sean.bridges@gmail.com> wrote:
>> Do I need the Pulsing40PostingsFormat class to read my indexes though?
>> Pulsing40PostingsFormat isn't shipped with lucene 4.1.
>>
>> I have index files with names like _0_Pulsing40_0.frq.  When I try to open
>> my index I get,
>>
>> java.lang.IllegalArgumentException: A SPI class of type
>> org.apache.lucene.codecs.PostingsFormat with name 'Pulsing40' does not
>> exist. You need to add the corresponding JAR file supporting this SPI to
>> your classpath.The current classpath supports the following names:
>> [Lucene40, Lucene41, Pulsing41, SimpleText, Memory, BloomFilter, Direct]
>>
>> Thanks,
>>
>> Sean
>>
>>
>> On Tue, Jan 29, 2013 at 2:53 PM, Michael McCandless <
>> lucene@mikemccandless.com> wrote:
>>
>>> Pulsing41PostingsFormat was just moved out of core to the "codecs" module.
>>>
>>> Still, the worst case (had it been deleted) would be to revive the
>>> code from the past release and put it in your classpath, so old
>>> indices could be read.
>>>
>>> Mike McCandless
>>>
>>> http://blog.mikemccandless.com
>>>
>>> On Tue, Jan 29, 2013 at 5:48 PM, Sean Bridges <sean.bridges@gmail.com>
>>> wrote:
>>> > Hello,
>>> >
>>> > We are trying to upgrade from lucene 4.0 to 4.1.  Our indexes were
>>> written
>>> > using Pulsing40PostingsFormat, which doesn't seem to be supported in 4.1.
>>> >  For writing new indexes, we can switch to Pulsing41PostingsFormat, but
>>> is
>>> > there an easy way to read our old indexes using Lucene 4.1?
>>> >
>>> > What are the best practices for compatibility when using
>>> > PostingFormat/Codecs.  Pulsing40PostingsFormat was marked @experimental,
>>> so
>>> > perhaps we shouldn't have used it.  But every PostingFormat/Codec shipped
>>> > in 4.1 is either @experimental or @deprecated.
>>> >
>>> > Thanks,
>>> >
>>> > Sean
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54948-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jan 30 00:40:02 2013
Return-Path: <java-user-return-54948-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id C0F87E541
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 30 Jan 2013 00:40:02 +0000 (UTC)
Received: (qmail 16098 invoked by uid 500); 30 Jan 2013 00:40:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16057 invoked by uid 500); 30 Jan 2013 00:40:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16049 invoked by uid 99); 30 Jan 2013 00:40:00 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Jan 2013 00:40:00 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of sean.bridges@gmail.com designates 209.85.215.176 as permitted sender)
Received: from [209.85.215.176] (HELO mail-ea0-f176.google.com) (209.85.215.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Jan 2013 00:39:53 +0000
Received: by mail-ea0-f176.google.com with SMTP id a13so460617eaa.21
        for <java-user@lucene.apache.org>; Tue, 29 Jan 2013 16:39:33 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=x-received:mime-version:in-reply-to:references:from:date:message-id
         :subject:to:content-type;
        bh=sfBAKuYZNeYNBTu4+VzRZH6pL3jQw/jxgTUEK2Naf/g=;
        b=JvyrbOs+GvELdWYrKg+J/Now+oZSwxbSs1qRvi2aO0syiFF5lWisi7RDaRdoT7+88j
         bgeERUV8bhKQNsIT5uig9wkRQZ9oMZGviL5Y6rAdkYcPVQdv6KwJkUoAq/xEque1qoFp
         Zau68D7bxXQL2K4THkDkGwbM/e6oZTq9pjyhRWxDzFs2d4oDZ7kxy2IyKi3yyuzaTmOP
         wke1ml6IIWGmGd13HQrjyaO9grGp+vbHwIbS8mp55aoe8x/q56ZGQ0I7C+iZshpnJwdg
         z078qqx22/SqI9Q7HHItqV4xDaGA1aiwK7NHkZmrymFez0q66slkzcFIeBSHMDVGxyRv
         bTog==
X-Received: by 10.14.204.198 with SMTP id h46mr9144347eeo.1.1359506373343;
 Tue, 29 Jan 2013 16:39:33 -0800 (PST)
MIME-Version: 1.0
Received: by 10.14.178.66 with HTTP; Tue, 29 Jan 2013 16:39:03 -0800 (PST)
In-Reply-To: <CAL8PwkbFPuQ3FOpgnL965ZW+HSxTQTfqjqg5jN=rmV9dwJxh1A@mail.gmail.com>
References: <CAOD+0FJSikpVj0Hn9QeXOOhyUbVMtAU8WraoyBDipN09_=mgzw@mail.gmail.com>
 <CAL8PwkYbWrCMJSxJuZLV12SA6nmsvFG8tBDZ4ccCS+TpqP_APQ@mail.gmail.com>
 <CAOD+0FKKFjF66z94eH5H5LP89ytC8AsbJhZ4Fk5pwjjXh04Y5Q@mail.gmail.com>
 <CAL8PwkZnA5-8ycHDO2z3FNugyzNAbPyQaZqRt=esGSGC1-W0Gg@mail.gmail.com> <CAL8PwkbFPuQ3FOpgnL965ZW+HSxTQTfqjqg5jN=rmV9dwJxh1A@mail.gmail.com>
From: Sean Bridges <sean.bridges@gmail.com>
Date: Tue, 29 Jan 2013 16:39:03 -0800
Message-ID: <CAOD+0FL3X+cJQoSJo+vLBKOW_K8Eepw8j9PMpzK=tevURzk2sA@mail.gmail.com>
Subject: Re: Pulsing40PostingsFormat in lucene 4.1
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=047d7b343e3c73fad404d476be97
X-Virus-Checked: Checked by ClamAV on apache.org

--047d7b343e3c73fad404d476be97
Content-Type: text/plain; charset=ISO-8859-1

Thanks, we will try the class path trickery.

How do we avoid similar situations in the future?  Is Pulsing41PostingsFormat
going to be maintained in future versions of Lucene?  What are the
safe PostingFormat/Codecs
to use?  Every PostingFormat/Codec is @deprecated or @experimental.

Sean


On Tue, Jan 29, 2013 at 3:21 PM, Michael McCandless <
lucene@mikemccandless.com> wrote:

> Another option would be, using 4.0, use addIndexes(IndexReader[]) into
> a new index, to convert your entire index into the supported (back
> compat) codec (Lucene40).
>
> Don't use addIndexes(Directory[]) as this just copies files.
>
> Then you can read that resulting index with 4.1.
>
> Mike McCandless
>
> http://blog.mikemccandless.com
>
> On Tue, Jan 29, 2013 at 6:18 PM, Michael McCandless
> <lucene@mikemccandless.com> wrote:
> > Woops, sorry: PulsingPostingsFormat was already moved from core to
> > codecs as of 4.0 (not in 4.1 like I said before).
> >
> > And ... yes, you need Pulsing40PostingsFormat on your classpath to
> > read your 4.0 indices with 4.1.  I think you need to excise the
> > sources and get them on the classpath?  But this will be tricky:
> > Lucene40PulsingPF uses various codec APIs (eg BlockTreeTermsReader)
> > from 4.0 as well, which will conflict with the 4.1 classes by the same
> > package/name...
> >
> > Mike McCandless
> >
> > http://blog.mikemccandless.com
> >
> > On Tue, Jan 29, 2013 at 6:11 PM, Sean Bridges <sean.bridges@gmail.com>
> wrote:
> >> Do I need the Pulsing40PostingsFormat class to read my indexes though?
> >> Pulsing40PostingsFormat isn't shipped with lucene 4.1.
> >>
> >> I have index files with names like _0_Pulsing40_0.frq.  When I try to
> open
> >> my index I get,
> >>
> >> java.lang.IllegalArgumentException: A SPI class of type
> >> org.apache.lucene.codecs.PostingsFormat with name 'Pulsing40' does not
> >> exist. You need to add the corresponding JAR file supporting this SPI to
> >> your classpath.The current classpath supports the following names:
> >> [Lucene40, Lucene41, Pulsing41, SimpleText, Memory, BloomFilter, Direct]
> >>
> >> Thanks,
> >>
> >> Sean
> >>
> >>
> >> On Tue, Jan 29, 2013 at 2:53 PM, Michael McCandless <
> >> lucene@mikemccandless.com> wrote:
> >>
> >>> Pulsing41PostingsFormat was just moved out of core to the "codecs"
> module.
> >>>
> >>> Still, the worst case (had it been deleted) would be to revive the
> >>> code from the past release and put it in your classpath, so old
> >>> indices could be read.
> >>>
> >>> Mike McCandless
> >>>
> >>> http://blog.mikemccandless.com
> >>>
> >>> On Tue, Jan 29, 2013 at 5:48 PM, Sean Bridges <sean.bridges@gmail.com>
> >>> wrote:
> >>> > Hello,
> >>> >
> >>> > We are trying to upgrade from lucene 4.0 to 4.1.  Our indexes were
> >>> written
> >>> > using Pulsing40PostingsFormat, which doesn't seem to be supported in
> 4.1.
> >>> >  For writing new indexes, we can switch to Pulsing41PostingsFormat,
> but
> >>> is
> >>> > there an easy way to read our old indexes using Lucene 4.1?
> >>> >
> >>> > What are the best practices for compatibility when using
> >>> > PostingFormat/Codecs.  Pulsing40PostingsFormat was marked
> @experimental,
> >>> so
> >>> > perhaps we shouldn't have used it.  But every PostingFormat/Codec
> shipped
> >>> > in 4.1 is either @experimental or @deprecated.
> >>> >
> >>> > Thanks,
> >>> >
> >>> > Sean
> >>>
> >>> ---------------------------------------------------------------------
> >>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >>> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>>
> >>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--047d7b343e3c73fad404d476be97--

From java-user-return-54949-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jan 30 06:14:23 2013
Return-Path: <java-user-return-54949-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id B3792E2BF
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 30 Jan 2013 06:14:23 +0000 (UTC)
Received: (qmail 16703 invoked by uid 500); 30 Jan 2013 06:14:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16605 invoked by uid 500); 30 Jan 2013 06:14:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16545 invoked by uid 99); 30 Jan 2013 06:14:16 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Jan 2013 06:14:16 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of serera@gmail.com designates 74.125.82.43 as permitted sender)
Received: from [74.125.82.43] (HELO mail-wg0-f43.google.com) (74.125.82.43)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Jan 2013 06:14:11 +0000
Received: by mail-wg0-f43.google.com with SMTP id e12so914051wge.22
        for <java-user@lucene.apache.org>; Tue, 29 Jan 2013 22:13:50 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:x-received:in-reply-to:references:date:message-id
         :subject:from:to:content-type;
        bh=HgKerB59Fd9xi/t3YJBTCme0eNeBLU753DhuIRh2e9s=;
        b=aPVDmJ0OjpzIJySDfQoQsHcemiw77Ces5EtRxnSlv/5Cx5pAxTr4a5paWjAtdxrT4F
         442wF9VB3XfOSz0L1TT75/6MA6DzFzZs2zcha5/hfdN1zrla+69jV418TYq8ZbyDJTFE
         /9krS5CBENZ6YdpHn4mPF/DDicERhtsP1ZiL5NhRL8/YWrH7KV4tPjA+AiSwOf+8iwSy
         WGwLDW7vmom3b0VNDKX+HqJRn7LkiNRtnQ3LdB7gPoasZgX7uR5rBjJTlJOJLh7/JqXW
         DtHvPD4/XtU3lxurFS+zW8+/wPKjtwRSyyrzgJ8C0T//Aw9GiTSlfbXHxZgcyPOVAWE1
         YHMA==
MIME-Version: 1.0
X-Received: by 10.180.84.131 with SMTP id z3mr6524237wiy.25.1359526430706;
 Tue, 29 Jan 2013 22:13:50 -0800 (PST)
Received: by 10.194.172.39 with HTTP; Tue, 29 Jan 2013 22:13:50 -0800 (PST)
In-Reply-To: <CALfq-2Tj1MER8pj0NmNWRUu2WJmM9kyC4qFr6nN4Rz6mPZXC5A@mail.gmail.com>
References: <1359480586.2115.55.camel@linux.scoobydoo>
	<CALfq-2Tj1MER8pj0NmNWRUu2WJmM9kyC4qFr6nN4Rz6mPZXC5A@mail.gmail.com>
Date: Wed, 30 Jan 2013 08:13:50 +0200
Message-ID: <CALfq-2QLMQvgtgZMNiyA0zS_jebVu1hSn4bEZ39pCOMhjgEOJA@mail.gmail.com>
Subject: Re: FacetRequest include residue
From: Shai Erera <serera@gmail.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>, nbuso@ebi.ac.uk
Content-Type: multipart/alternative; boundary=f46d043bdd64f70b0c04d47b6918
X-Virus-Checked: Checked by ClamAV on apache.org

--f46d043bdd64f70b0c04d47b6918
Content-Type: text/plain; charset=ISO-8859-1

Hi Nicola,

There might be a way to do what you want, with some coding on your part. If
you're interested in counting the top-10 of the "Brand" facet, but also
return the count of "Brand/X", even if it's not in the top-10, then what
you should do is write code similar to this:

FacetArrays facetArrays = new FacetArrays();
int[] counts = facetArrays.getIntArray(); // hold onto the counts array, so
that it's not "released" by the Collector
FacetsCollector fc = new FacetsCollector(..., facetArrays); // tell the
collector to use your array
searcher.search(q, fc);
List<FacetResults> facetResults = fc.getFacetResults();

// now you should get the FacetResult of "Brand" and check if Brand/X is in
its FacetResultNodes (top-10)
// if not, do the following:
int brandXOrdinal = taxoReader.getOrdinal(new CategoryPath("Brand", "X");
int brandXCount = counts[brandXOrdinal];

// now you can build your final result with the count of Brand/X

Hope that helps
Shai


On Tue, Jan 29, 2013 at 7:55 PM, Shai Erera <serera@gmail.com> wrote:

> Hi Nicola,
>
> How does the interface allow the user to select a facet values not from
> the top-10? How does the interface know which other facet values are there?
> Does it query the taxonomy somehow?
>
> One thing you can do is to set numResults to Integer.MAX_VALUE and
> numToLabel to 10. That way your FacetResult will have all the children up
> to the specified depth, but only the top-10 will be labeled (which can
> sometimes be costly). I'm not sure if that's what you're looking for?
>
> And again, this might be something that you can do in the UI -- add the
> value that the user selected to the list of values that are displayed,
> irregardless of what the top-10 are?
>
> Shai
>
>
> On Tue, Jan 29, 2013 at 7:29 PM, Nicola Buso <nbuso@ebi.ac.uk> wrote:
>
>> Hi,
>>
>> I have a FacetRequest with numResults setted to 10, how can I specify
>> additional facets value to add to the FacetResult?
>>
>> I try to explain the use-case:
>> - the user view 10 facet result
>> - the interface permit the user to choose a facet value not from the
>> top-10 results
>> - the user execute the query with the facet value not in the top-10
>> - I'd like to show in the list of facet value also the value selected by
>> the user.
>>
>> The only way I see I can obtain this value is execute a query where I'm
>> not restricting the number of facet values returned and I "cherry pick"
>> the facet with the value I need. Obviously it's costly.
>>
>>
>>
>> Nicola.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>

--f46d043bdd64f70b0c04d47b6918--

From java-user-return-54950-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jan 30 07:08:54 2013
Return-Path: <java-user-return-54950-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 87B00D464
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 30 Jan 2013 07:08:54 +0000 (UTC)
Received: (qmail 47080 invoked by uid 500); 30 Jan 2013 07:08:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46863 invoked by uid 500); 30 Jan 2013 07:08:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46815 invoked by uid 99); 30 Jan 2013 07:08:50 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Jan 2013 07:08:50 +0000
X-ASF-Spam-Status: No, hits=1.7 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of arunk786@gmail.com designates 209.85.210.176 as permitted sender)
Received: from [209.85.210.176] (HELO mail-ia0-f176.google.com) (209.85.210.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Jan 2013 07:08:42 +0000
Received: by mail-ia0-f176.google.com with SMTP id i18so1845964iac.35
        for <java-user@lucene.apache.org>; Tue, 29 Jan 2013 23:08:21 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=x-received:mime-version:in-reply-to:references:from:date:message-id
         :subject:to:content-type;
        bh=Vup001EI8uKL1J1ki83NYtt2xH8n4/+SRtVzpItxLM8=;
        b=SwASrw28nN6+IquWm6OG2A89YJfPd3Ues81g/zGMuubf9X+PGoUzSp8VkwiCodffHf
         zQmwK9/TczTJ1iwqPzMyorAO4SvqnJ5R4PwC1DjyjN570HKqmVHtc33zgb7sqwABLO2R
         1/3Pxfa0WL/bPknb69XdnFkfXIlUk+cBrkXuma6pR5wAg+HmAOtZxGPO7RFfHgxbUEiL
         2p7UPOGlWvFLffJrj1gaCO6T6UpZpA2nBe1z24scm0MPi7vb6fmyE22KRRQrGCbOIHQ5
         q7EY/2BBwTIBiuvlOoyNQGf1NYq08yeRdzvIlvIIiuMq5F2eq/Nqu19OB86zIY3TVN2+
         mDUg==
X-Received: by 10.50.10.130 with SMTP id i2mr2951472igb.63.1359529701077; Tue,
 29 Jan 2013 23:08:21 -0800 (PST)
MIME-Version: 1.0
Received: by 10.42.254.136 with HTTP; Tue, 29 Jan 2013 23:08:00 -0800 (PST)
In-Reply-To: <CAPsWd+NPdvXeqot_hTvad-15VfFZC-whjUivbRSHCGC=Qsy3UA@mail.gmail.com>
References: <CAO7gJeizV5m43D_QaQaho24PjawfC217PeMwqD+KF-01UY26HA@mail.gmail.com>
 <CAEY5pxXtJCFrPgk8SkdK9ivuxZst-4eOvVNM4=0xsgcEgDJGzA@mail.gmail.com>
 <CAO7gJeg3AGsN=+GcKwpPdFyTTvAUku9bgPwQgP_JE6-p+HXyEw@mail.gmail.com>
 <CAEY5pxVUEM5NPgYfH=d7WCapL=ZfYxOjTy2yr1tNbqskBwSudw@mail.gmail.com> <CAPsWd+NPdvXeqot_hTvad-15VfFZC-whjUivbRSHCGC=Qsy3UA@mail.gmail.com>
From: arun k <arunk786@gmail.com>
Date: Wed, 30 Jan 2013 12:38:00 +0530
Message-ID: <CAO7gJehnBhiLvX6kZzBAE4W7-GS3i4kmZxnD1KN8-az9aFj3Rw@mail.gmail.com>
Subject: Re: CompressingStoredFieldsFormat doesn't show improvement
To: java-user <java-user@lucene.apache.org>
Content-Type: multipart/alternative; boundary=14dae934058be4f10004d47c2c85
X-Virus-Checked: Checked by ClamAV on apache.org

--14dae934058be4f10004d47c2c85
Content-Type: text/plain; charset=ISO-8859-1

Adrein,

I have created an index of size 370M of 1 million docs of 40 fields of 40
chars and did the profiling.
I see that the indexing and in particular the addDocument &
ConcurrentMergeScheduler in 4.1 takes double the time compared to 3.0.2.

Looks like CompressionStoredFieldsFormat is of little use in my scenario.

Arun


On Tue, Jan 29, 2013 at 8:35 PM, Adrien Grand <jpountz@gmail.com> wrote:

> Arun,
>
> Lucene uses a very light compression algorithm so I'm a little
> surprised it can make indexing 2x slower. Could you run indexing under
> a profiler to make sure it really is what makes indexing slower?
>
> Thanks!
>
> --
> Adrien
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--14dae934058be4f10004d47c2c85--

From java-user-return-54951-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jan 30 09:48:27 2013
Return-Path: <java-user-return-54951-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 23CC1E116
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 30 Jan 2013 09:48:27 +0000 (UTC)
Received: (qmail 71824 invoked by uid 500); 30 Jan 2013 09:48:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71248 invoked by uid 500); 30 Jan 2013 09:48:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71210 invoked by uid 99); 30 Jan 2013 09:48:23 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Jan 2013 09:48:23 +0000
X-ASF-Spam-Status: No, hits=0.3 required=5.0
	tests=FREEMAIL_REPLY,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ian.lea@gmail.com designates 209.85.212.175 as permitted sender)
Received: from [209.85.212.175] (HELO mail-wi0-f175.google.com) (209.85.212.175)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Jan 2013 09:48:15 +0000
Received: by mail-wi0-f175.google.com with SMTP id hq12so2912621wib.8
        for <java-user@lucene.apache.org>; Wed, 30 Jan 2013 01:47:55 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=x-received:mime-version:in-reply-to:references:from:date:message-id
         :subject:to:content-type;
        bh=KpDnuUIvvdTtDexyl+LYJWrr7qZOxXWxhZlZGRH8ADo=;
        b=S7M57BayuU4mIT0wxTZKeUPHsUPq4U64IWzn0V3MC7anh6QbLIKXqgUJkZqCnQoz5/
         fgChYfnPZveKR8RUhO9HZoOLDIrCX3ZCZYA//xemtltVaRd9IBdI63rbeJlTxR41V49n
         VD7tTiCYdBzGAzAKSQHfD4EnoqRJzXDc3VoYQNK4atKPm3G98s1Z/D/NoDlLuU23+LC8
         XK6V2sz5bhmaO5ihlf8LkqR5lLxuHCrCPtcul3umwMKcnG1fVXqE1BvN7bhLA0u9z7/M
         tKnq+snunVSBSZoaK0OAu+nBz//scgpaDGjPpVoJuJ/mmrnXiNXpBe05owJfW0vTCRvG
         nr9g==
X-Received: by 10.194.235.225 with SMTP id up1mr7636994wjc.11.1359539275176;
 Wed, 30 Jan 2013 01:47:55 -0800 (PST)
MIME-Version: 1.0
Received: by 10.194.57.11 with HTTP; Wed, 30 Jan 2013 01:47:35 -0800 (PST)
In-Reply-To: <CAEsoGCrPLQyhSytUom=PrdA9+ZWz0C=s078C_tWK0N-WgjLYHg@mail.gmail.com>
References: <CAEsoGCrPLQyhSytUom=PrdA9+ZWz0C=s078C_tWK0N-WgjLYHg@mail.gmail.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Wed, 30 Jan 2013 09:47:35 +0000
Message-ID: <CAEY5pxVFTBTx6_1E1nzmsPtKn4Ohi0C6U4OqfANG1+F1UOvsaw@mail.gmail.com>
Subject: Re: Migration to Lucene 4.1
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

Have you read the changes and migration docs that come with 4.1?  You
may also need to look at 3.[123456] javadocs to see deprecations and
alternatives for stuff that was present in 3.0 but gone in 4.1.


--
Ian.

On Tue, Jan 29, 2013 at 7:30 PM, Paul Sitowitz <sitowitz@gmail.com> wrote:
> Hello,
>
> I currently have the following production code which currently works with
> Lucene 3.0:
>
> this.luceneWriter = new IndexWriter( directory, analyzer, true,
> MaxFieldLength.UNLIMITED );
> this.fs.delete( this.finalOutput, true );
> this.luceneWriter.setUseCompoundFile( true );
> this.luceneWriter.setMergeFactor( job.getInt( "indexer.mergeFactor", 1000 )
> );
> this.luceneWriter.setMaxBufferedDocs( job.getInt( "indexer.minMergeDocs",
> 1000 ) );
> this.luceneWriter.setMaxMergeDocs( job.getInt( "indexer.maxMergeDocs",
> Integer.MAX_VALUE ) );
>
> LuceneMergeRecordWriter.this.setStatus( "Adding indexes" );
> LuceneMergeRecordWriter.this.luceneWriter.addIndexesNoOptimize(
> LuceneMergeRecordWriter.this.luceneIndexes
>                                         .toArray( new
> Directory[LuceneMergeRecordWriter.this.luceneIndexes.size()] ) );
>
> LuceneMergeRecordWriter.this.setStatus( "Optimizing index" );
> LuceneMergeRecordWriter.this.luceneWriter.optimize()
>
> I am in the process of upgrading to Lucene 4.1 but have run into some
> unknown API issues. Can someone help to point out what the equivalent 4.1
> code would look like?
>
> Here is some of the partial 4.1 code that I have thus far:
>
>         this.fs.delete( this.finalOutput, true );
>         IndexWriterConfig iwconf = new IndexWriterConfig(Version.LUCENE_41,
> analyzer);
>         iwconf.setOpenMode( IndexWriterConfig.OpenMode.CREATE );
>         iwconf.setMaxBufferedDocs( conf.getInt( "indexer.minMergeDocs",
> 1000 ) );
>         ..................
>         this.luceneWriter = new IndexWriter( directory, iwconf );
>
> Thanks,
>
> Paul
>
> --
> ------------------------------------------
> Paul Sitowitz
> sitowitz@gmail.com
> 703-626-3593

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54952-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jan 30 09:51:03 2013
Return-Path: <java-user-return-54952-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 5C0E2E126
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 30 Jan 2013 09:51:03 +0000 (UTC)
Received: (qmail 80530 invoked by uid 500); 30 Jan 2013 09:51:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80389 invoked by uid 500); 30 Jan 2013 09:51:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80366 invoked by uid 99); 30 Jan 2013 09:51:00 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Jan 2013 09:51:00 +0000
X-ASF-Spam-Status: No, hits=-2.3 required=5.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of nbuso@ebi.ac.uk designates 193.62.194.225 as permitted sender)
Received: from [193.62.194.225] (HELO smtp01.ebi.ac.uk) (193.62.194.225)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Jan 2013 09:50:54 +0000
Received: from [172.22.70.38] (linux.windows.ebi.ac.uk [172.22.70.38])
	by smtp01.ebi.ac.uk (8.13.8/8.13.8) with ESMTP id r0U9oXgE010236;
	Wed, 30 Jan 2013 09:50:33 GMT
Message-ID: <1359539423.2115.60.camel@linux.scoobydoo>
Subject: Re: FacetRequest include residue
From: Nicola Buso <nbuso@ebi.ac.uk>
Reply-To: nbuso@ebi.ac.uk
To: Shai Erera <serera@gmail.com>
Cc: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Wed, 30 Jan 2013 09:50:23 +0000
In-Reply-To: <CALfq-2QLMQvgtgZMNiyA0zS_jebVu1hSn4bEZ39pCOMhjgEOJA@mail.gmail.com>
References: <1359480586.2115.55.camel@linux.scoobydoo>
	 <CALfq-2Tj1MER8pj0NmNWRUu2WJmM9kyC4qFr6nN4Rz6mPZXC5A@mail.gmail.com>
	 <CALfq-2QLMQvgtgZMNiyA0zS_jebVu1hSn4bEZ39pCOMhjgEOJA@mail.gmail.com>
Organization: EBI
Content-Type: text/plain; charset="UTF-8"
X-Mailer: Evolution 3.6.2 (3.6.2-3.fc18) 
Mime-Version: 1.0
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Shai,

your solution sound good to me, an accumulator that can add in the
counting some "exception".


Nicola.

On Wed, 2013-01-30 at 08:13 +0200, Shai Erera wrote:
> Hi Nicola,
> 
> 
> There might be a way to do what you want, with some coding on your
> part. If you're interested in counting the top-10 of the "Brand"
> facet, but also return the count of "Brand/X", even if it's not in the
> top-10, then what you should do is write code similar to this:
> 
> 
> FacetArrays facetArrays = new FacetArrays();
> 
> int[] counts = facetArrays.getIntArray(); // hold onto the counts
> array, so that it's not "released" by the Collector
> 
> FacetsCollector fc = new FacetsCollector(..., facetArrays); // tell
> the collector to use your array
> 
> searcher.search(q, fc);
> 
> List<FacetResults> facetResults = fc.getFacetResults();
> 
> 
> // now you should get the FacetResult of "Brand" and check if Brand/X
> is in its FacetResultNodes (top-10)
> 
> // if not, do the following:
> 
> int brandXOrdinal = taxoReader.getOrdinal(new CategoryPath("Brand",
> "X");
> 
> int brandXCount = counts[brandXOrdinal];
> 
> 
> // now you can build your final result with the count of Brand/X
> 
> 
> Hope that helps
> 
> Shai
> 
> 
> 
> On Tue, Jan 29, 2013 at 7:55 PM, Shai Erera <serera@gmail.com> wrote:
>         Hi Nicola,
>         
>         
>         How does the interface allow the user to select a facet values
>         not from the top-10? How does the interface know which other
>         facet values are there? Does it query the taxonomy somehow?
>         
>         
>         One thing you can do is to set numResults to Integer.MAX_VALUE
>         and numToLabel to 10. That way your FacetResult will have all
>         the children up to the specified depth, but only the top-10
>         will be labeled (which can sometimes be costly). I'm not sure
>         if that's what you're looking for?
>         
>         
>         And again, this might be something that you can do in the UI
>         -- add the value that the user selected to the list of values
>         that are displayed, irregardless of what the top-10 are?
>         
>         
>         Shai
>         
>         
>         
>         On Tue, Jan 29, 2013 at 7:29 PM, Nicola Buso <nbuso@ebi.ac.uk>
>         wrote:
>                 Hi,
>                 
>                 I have a FacetRequest with numResults setted to 10,
>                 how can I specify
>                 additional facets value to add to the FacetResult?
>                 
>                 I try to explain the use-case:
>                 - the user view 10 facet result
>                 - the interface permit the user to choose a facet
>                 value not from the
>                 top-10 results
>                 - the user execute the query with the facet value not
>                 in the top-10
>                 - I'd like to show in the list of facet value also the
>                 value selected by
>                 the user.
>                 
>                 The only way I see I can obtain this value is execute
>                 a query where I'm
>                 not restricting the number of facet values returned
>                 and I "cherry pick"
>                 the facet with the value I need. Obviously it's
>                 costly.
>                 
>                 
>                 
>                 Nicola.
>                 
>                 
>                 ---------------------------------------------------------------------
>                 To unsubscribe, e-mail:
>                 java-user-unsubscribe@lucene.apache.org
>                 For additional commands, e-mail:
>                 java-user-help@lucene.apache.org
>                 
>         
>         
> 
> 



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54953-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jan 30 10:06:49 2013
Return-Path: <java-user-return-54953-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 0F2C7E199
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 30 Jan 2013 10:06:49 +0000 (UTC)
Received: (qmail 30083 invoked by uid 500); 30 Jan 2013 10:06:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29720 invoked by uid 500); 30 Jan 2013 10:06:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29000 invoked by uid 99); 30 Jan 2013 10:06:42 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Jan 2013 10:06:42 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jpountz@gmail.com designates 209.85.214.54 as permitted sender)
Received: from [209.85.214.54] (HELO mail-bk0-f54.google.com) (209.85.214.54)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Jan 2013 10:06:35 +0000
Received: by mail-bk0-f54.google.com with SMTP id w5so722359bku.41
        for <java-user@lucene.apache.org>; Wed, 30 Jan 2013 02:06:14 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=x-received:mime-version:in-reply-to:references:from:date:message-id
         :subject:to:content-type;
        bh=rG24no9IYMZTGBOOhlbQgFK57G3Zwml5d+ZuUfQR04U=;
        b=T2aYobxwqDulHA6XNKEVz+uij2QgOZxLygvOUePOfuZGt6G6wQYGQD397fgI7YHyf0
         FNWNmGnRRomnHzdR6yhzX034avmCtmvD6IQkSk6q/MRjZ5gOtgJ+rBCmqDGW1EneFxeG
         eN/TQuoAmxMUHI+VPwtfJJ/vth0aeTM6JqJOErZwHxeHzWR9ATDaHaO6OhILT0h2G2Ln
         qqeKS4ubRIV2SZODmT0Z5eWKDWAwhb+Y0c04FQcyiFT0D/Y9tkmmPut5Nk2gNN1PONK0
         kYChjujdpuOJLJ9dVSnhhIzstluCQXGdDlNGaFdnQ1OK4fd4BbR28x8Wbb2DaL82cRMq
         N2hQ==
X-Received: by 10.204.8.207 with SMTP id i15mr1082760bki.19.1359540374565;
 Wed, 30 Jan 2013 02:06:14 -0800 (PST)
MIME-Version: 1.0
Received: by 10.204.253.138 with HTTP; Wed, 30 Jan 2013 02:05:54 -0800 (PST)
In-Reply-To: <CAO7gJehnBhiLvX6kZzBAE4W7-GS3i4kmZxnD1KN8-az9aFj3Rw@mail.gmail.com>
References: <CAO7gJeizV5m43D_QaQaho24PjawfC217PeMwqD+KF-01UY26HA@mail.gmail.com>
 <CAEY5pxXtJCFrPgk8SkdK9ivuxZst-4eOvVNM4=0xsgcEgDJGzA@mail.gmail.com>
 <CAO7gJeg3AGsN=+GcKwpPdFyTTvAUku9bgPwQgP_JE6-p+HXyEw@mail.gmail.com>
 <CAEY5pxVUEM5NPgYfH=d7WCapL=ZfYxOjTy2yr1tNbqskBwSudw@mail.gmail.com>
 <CAPsWd+NPdvXeqot_hTvad-15VfFZC-whjUivbRSHCGC=Qsy3UA@mail.gmail.com> <CAO7gJehnBhiLvX6kZzBAE4W7-GS3i4kmZxnD1KN8-az9aFj3Rw@mail.gmail.com>
From: Adrien Grand <jpountz@gmail.com>
Date: Wed, 30 Jan 2013 11:05:54 +0100
Message-ID: <CAPsWd+OSLhNY9WYQ2h8QPr-xT+1k0Oo5dnEjc40a5JRndthL4w@mail.gmail.com>
Subject: Re: CompressingStoredFieldsFormat doesn't show improvement
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
X-Virus-Checked: Checked by ClamAV on apache.org

On Wed, Jan 30, 2013 at 8:08 AM, arun k <arunk786@gmail.com> wrote:
> Adrein,
>
> I have created an index of size 370M of 1 million docs of 40 fields of 40
> chars and did the profiling.
> I see that the indexing and in particular the addDocument &
> ConcurrentMergeScheduler in 4.1 takes double the time compared to 3.0.2.

Can you provide me with the detailed profiles?

> Looks like CompressionStoredFieldsFormat is of little use in my scenario.

You can can disable stored fields compression and use another
StoredFieldsFormat by defining a custom codec
(http://lucene.apache.org/core/4_1_0/core/org/apache/lucene/codecs/package-summary.html#package_description).

-- 
Adrien

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54954-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jan 30 10:33:08 2013
Return-Path: <java-user-return-54954-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 41028EF12
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 30 Jan 2013 10:33:08 +0000 (UTC)
Received: (qmail 13466 invoked by uid 500); 30 Jan 2013 10:33:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13242 invoked by uid 500); 30 Jan 2013 10:33:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13208 invoked by uid 99); 30 Jan 2013 10:33:05 -0000
Received: from minotaur.apache.org (HELO minotaur.apache.org) (140.211.11.9)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Jan 2013 10:33:05 +0000
Received: from localhost (HELO [192.168.1.73]) (127.0.0.1)
  (smtp-auth username gsingers, mechanism plain)
  by minotaur.apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Jan 2013 10:33:04 +0000
From: Grant Ingersoll <gsingers@apache.org>
Content-Type: multipart/alternative; boundary="Apple-Mail=_5CBEEC6C-C7E3-4C03-BC06-144A678D9183"
Subject: [OT] San Fran. Lucene/Solr Hack Night
Date: Wed, 30 Jan 2013 05:33:13 -0500
Message-Id: <7E567571-0752-4872-9CE3-CEA9977A0364@apache.org>
To: java-user@lucene.apache.org,
 SOLR <solr-user@lucene.apache.org>
Mime-Version: 1.0 (Apple Message framework v1283)
X-Mailer: Apple Mail (2.1283)

--Apple-Mail=_5CBEEC6C-C7E3-4C03-BC06-144A678D9183
Content-Transfer-Encoding: quoted-printable
Content-Type: text/plain;
	charset=us-ascii

If you are in the San. Fran. area next Wednesday, Feb. 06, LucidWorks =
and I will be hosting a Lucene/Solr hack night.  To reserve a spot or =
learn more, see http://www.meetup.com/SFBay-Lucene-Solr-Meetup/

Bring you laptop, your code, etc. and we'll hack on Lucene/Solr for a =
few hours. =20

Cheers,
Grant

--------------------------------------------
Grant Ingersoll
http://www.lucidworks.com





--Apple-Mail=_5CBEEC6C-C7E3-4C03-BC06-144A678D9183--

From java-user-return-54955-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jan 30 11:05:21 2013
Return-Path: <java-user-return-54955-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 81E18E0A6
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 30 Jan 2013 11:05:21 +0000 (UTC)
Received: (qmail 54798 invoked by uid 500); 30 Jan 2013 11:05:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54736 invoked by uid 500); 30 Jan 2013 11:05:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53917 invoked by uid 99); 30 Jan 2013 11:05:17 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Jan 2013 11:05:17 +0000
X-ASF-Spam-Status: No, hits=1.7 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of arunk786@gmail.com designates 209.85.223.172 as permitted sender)
Received: from [209.85.223.172] (HELO mail-ie0-f172.google.com) (209.85.223.172)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Jan 2013 11:05:10 +0000
Received: by mail-ie0-f172.google.com with SMTP id c10so1165614ieb.31
        for <java-user@lucene.apache.org>; Wed, 30 Jan 2013 03:04:49 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=x-received:mime-version:in-reply-to:references:from:date:message-id
         :subject:to:content-type;
        bh=DMQouwLab7wZLDe6ryYnyMrrR2PezD0EjoI01A90N1M=;
        b=ayQf/P3onmzdLsARk/GNAa/7FrvW5787XAOFQioMpURTsXLJ4A54c6TLs8n3MWk2WP
         bxs0fgUAqnN1dU5NOJWq0ALQSFImgUb5/+76qcrVQftG7AusFmd64So269mA7S6jhYDb
         rqnqzRfQ4ewZ9e3LqaxbNL7SxbopfOp7gfQVhMImW9ClLBA55AStI6Bcni53a8bac1Vm
         XUpV72luoGDON7UgDxd2FoSAThiIHgGhX7SgK3jaVJSOL57qRegWI+85I+2m1h3T7weu
         GEGd6QOxI2wP+sLtUmbGNA3HaeTmreirKLhGJN0pS67/0hExeM6KUp+8/ZjyYmWLHx4X
         QX/w==
X-Received: by 10.50.95.194 with SMTP id dm2mr3108577igb.63.1359543889744;
 Wed, 30 Jan 2013 03:04:49 -0800 (PST)
MIME-Version: 1.0
Received: by 10.42.254.136 with HTTP; Wed, 30 Jan 2013 03:04:28 -0800 (PST)
In-Reply-To: <CAPsWd+OSLhNY9WYQ2h8QPr-xT+1k0Oo5dnEjc40a5JRndthL4w@mail.gmail.com>
References: <CAO7gJeizV5m43D_QaQaho24PjawfC217PeMwqD+KF-01UY26HA@mail.gmail.com>
 <CAEY5pxXtJCFrPgk8SkdK9ivuxZst-4eOvVNM4=0xsgcEgDJGzA@mail.gmail.com>
 <CAO7gJeg3AGsN=+GcKwpPdFyTTvAUku9bgPwQgP_JE6-p+HXyEw@mail.gmail.com>
 <CAEY5pxVUEM5NPgYfH=d7WCapL=ZfYxOjTy2yr1tNbqskBwSudw@mail.gmail.com>
 <CAPsWd+NPdvXeqot_hTvad-15VfFZC-whjUivbRSHCGC=Qsy3UA@mail.gmail.com>
 <CAO7gJehnBhiLvX6kZzBAE4W7-GS3i4kmZxnD1KN8-az9aFj3Rw@mail.gmail.com> <CAPsWd+OSLhNY9WYQ2h8QPr-xT+1k0Oo5dnEjc40a5JRndthL4w@mail.gmail.com>
From: arun k <arunk786@gmail.com>
Date: Wed, 30 Jan 2013 16:34:28 +0530
Message-ID: <CAO7gJej5L5wAj62KvBGyuVobnh9cQQ9xZwuttHvG=KCtk8Kf4A@mail.gmail.com>
Subject: Re: CompressingStoredFieldsFormat doesn't show improvement
To: java-user <java-user@lucene.apache.org>
Content-Type: multipart/mixed; boundary=e89a8f2348639ad51304d47f7a56
X-Virus-Checked: Checked by ClamAV on apache.org

--e89a8f2348639ad51304d47f7a56
Content-Type: multipart/alternative; boundary=e89a8f2348639ad50e04d47f7a54

--e89a8f2348639ad50e04d47f7a54
Content-Type: text/plain; charset=ISO-8859-1

Adrein,
Please find the attached profilers report.


On Wed, Jan 30, 2013 at 3:35 PM, Adrien Grand <jpountz@gmail.com> wrote:

> On Wed, Jan 30, 2013 at 8:08 AM, arun k <arunk786@gmail.com> wrote:
> > Adrein,
> >
> > I have created an index of size 370M of 1 million docs of 40 fields of 40
> > chars and did the profiling.
> > I see that the indexing and in particular the addDocument &
> > ConcurrentMergeScheduler in 4.1 takes double the time compared to 3.0.2.
>
> Can you provide me with the detailed profiles?
>
> > Looks like CompressionStoredFieldsFormat is of little use in my scenario.
>
> You can can disable stored fields compression and use another
> StoredFieldsFormat by defining a custom codec
> (
> http://lucene.apache.org/core/4_1_0/core/org/apache/lucene/codecs/package-summary.html#package_description
> ).
>
> --
> Adrien
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--e89a8f2348639ad50e04d47f7a54
Content-Type: text/html; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

<div dir=3D"ltr">Adrein,<br>Please find the attached profilers report.<br><=
div class=3D"gmail_extra"><br><br><div class=3D"gmail_quote">On Wed, Jan 30=
, 2013 at 3:35 PM, Adrien Grand <span dir=3D"ltr">&lt;<a href=3D"mailto:jpo=
untz@gmail.com" target=3D"_blank">jpountz@gmail.com</a>&gt;</span> wrote:<b=
r>

<blockquote class=3D"gmail_quote" style=3D"margin:0 0 0 .8ex;border-left:1p=
x #ccc solid;padding-left:1ex"><div class=3D"im">On Wed, Jan 30, 2013 at 8:=
08 AM, arun k &lt;<a href=3D"mailto:arunk786@gmail.com">arunk786@gmail.com<=
/a>&gt; wrote:<br>


&gt; Adrein,<br>
&gt;<br>
&gt; I have created an index of size 370M of 1 million docs of 40 fields of=
 40<br>
&gt; chars and did the profiling.<br>
&gt; I see that the indexing and in particular the addDocument &amp;<br>
&gt; ConcurrentMergeScheduler in 4.1 takes double the time compared to 3.0.=
2.<br>
<br>
</div>Can you provide me with the detailed profiles?<br>
<div class=3D"im"><br>
&gt; Looks like CompressionStoredFieldsFormat is of little use in my scenar=
io.<br>
<br>
</div>You can can disable stored fields compression and use another<br>
StoredFieldsFormat by defining a custom codec<br>
(<a href=3D"http://lucene.apache.org/core/4_1_0/core/org/apache/lucene/code=
cs/package-summary.html#package_description" target=3D"_blank">http://lucen=
e.apache.org/core/4_1_0/core/org/apache/lucene/codecs/package-summary.html#=
package_description</a>).<br>


<div class=3D"HOEnZb"><div class=3D"h5"><br>
--<br>
Adrien<br>
<br>
---------------------------------------------------------------------<br>
To unsubscribe, e-mail: <a href=3D"mailto:java-user-unsubscribe@lucene.apac=
he.org">java-user-unsubscribe@lucene.apache.org</a><br>
For additional commands, e-mail: <a href=3D"mailto:java-user-help@lucene.ap=
ache.org">java-user-help@lucene.apache.org</a><br>
<br>
</div></div></blockquote></div><br></div></div>

--e89a8f2348639ad50e04d47f7a54--

--e89a8f2348639ad51304d47f7a56
Content-Type: text/plain; charset=us-ascii


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
--e89a8f2348639ad51304d47f7a56--

From java-user-return-54956-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jan 30 12:01:29 2013
Return-Path: <java-user-return-54956-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id BD319EF61
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 30 Jan 2013 12:01:29 +0000 (UTC)
Received: (qmail 99283 invoked by uid 500); 30 Jan 2013 12:01:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98478 invoked by uid 500); 30 Jan 2013 12:01:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98443 invoked by uid 99); 30 Jan 2013 12:01:12 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Jan 2013 12:01:11 +0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of uwe@thetaphi.de designates 188.138.97.18 as permitted sender)
Received: from [188.138.97.18] (HELO mail.sd-datasolutions.de) (188.138.97.18)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Jan 2013 12:01:03 +0000
Received: from VEGA (gate1.marum.de [134.102.237.1])
	by mail.sd-datasolutions.de (Postfix) with ESMTPSA id B8B2414AA008
	for <java-user@lucene.apache.org>; Wed, 30 Jan 2013 12:00:42 +0000 (UTC)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <CAO7gJeizV5m43D_QaQaho24PjawfC217PeMwqD+KF-01UY26HA@mail.gmail.com> <CAEY5pxXtJCFrPgk8SkdK9ivuxZst-4eOvVNM4=0xsgcEgDJGzA@mail.gmail.com> <CAO7gJeg3AGsN=+GcKwpPdFyTTvAUku9bgPwQgP_JE6-p+HXyEw@mail.gmail.com> <CAEY5pxVUEM5NPgYfH=d7WCapL=ZfYxOjTy2yr1tNbqskBwSudw@mail.gmail.com> <CAPsWd+NPdvXeqot_hTvad-15VfFZC-whjUivbRSHCGC=Qsy3UA@mail.gmail.com> <CAO7gJehnBhiLvX6kZzBAE4W7-GS3i4kmZxnD1KN8-az9aFj3Rw@mail.gmail.com> <CAPsWd+OSLhNY9WYQ2h8QPr-xT+1k0Oo5dnEjc40a5JRndthL4w@mail.gmail.com> <CAO7gJej5L5wAj62KvBGyuVobnh9cQQ9xZwuttHvG=KCtk8Kf4A@mail.gmail.com>
In-Reply-To: <CAO7gJej5L5wAj62KvBGyuVobnh9cQQ9xZwuttHvG=KCtk8Kf4A@mail.gmail.com>
Subject: RE: CompressingStoredFieldsFormat doesn't show improvement
Date: Wed, 30 Jan 2013 13:00:41 +0100
Message-ID: <005101cdfee1$6d99dff0$48cd9fd0$@thetaphi.de>
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_0052_01CDFEE9.CF606AD0"
X-Mailer: Microsoft Outlook 14.0
Thread-Index: AQJQXQE9lG4BRpAEmA7pyBYvCqfJ9AHDzSnFAl0jKAQCP0TfsgJAES5LAgxPIvwBVvv+ZwEIN6jOlvSqT6A=
Content-Language: de
X-Virus-Checked: Checked by ClamAV on apache.org

------=_NextPart_000_0052_01CDFEE9.CF606AD0
Content-Type: text/plain;
	charset="UTF-8"
Content-Transfer-Encoding: quoted-printable

Hi,

=20

there is nothing attached to your mail; maybe the mailing list software =
removed it. Can you place it somewhere on the web (e.g. =
pastebin,=E2=80=A6)?

=20

Uwe

=20

-----

Uwe Schindler

H.-H.-Meier-Allee 63, D-28213 Bremen

 <http://www.thetaphi.de/> http://www.thetaphi.de

eMail: uwe@thetaphi.de

=20

From: arun k [mailto:arunk786@gmail.com]=20
Sent: Wednesday, January 30, 2013 12:04 PM
To: java-user
Subject: Re: CompressingStoredFieldsFormat doesn't show improvement

=20

Adrein,
Please find the attached profilers report.

=20

On Wed, Jan 30, 2013 at 3:35 PM, Adrien Grand <jpountz@gmail.com> wrote:

On Wed, Jan 30, 2013 at 8:08 AM, arun k <arunk786@gmail.com> wrote:
> Adrein,
>
> I have created an index of size 370M of 1 million docs of 40 fields of =
40
> chars and did the profiling.
> I see that the indexing and in particular the addDocument &
> ConcurrentMergeScheduler in 4.1 takes double the time compared to =
3.0.2.

Can you provide me with the detailed profiles?


> Looks like CompressionStoredFieldsFormat is of little use in my =
scenario.

You can can disable stored fields compression and use another
StoredFieldsFormat by defining a custom codec
(http://lucene.apache.org/core/4_1_0/core/org/apache/lucene/codecs/packag=
e-summary.html#package_description).


--
Adrien

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

=20


------=_NextPart_000_0052_01CDFEE9.CF606AD0--


From java-user-return-54957-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jan 30 13:28:18 2013
Return-Path: <java-user-return-54957-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id BA64DE530
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 30 Jan 2013 13:28:18 +0000 (UTC)
Received: (qmail 68387 invoked by uid 500); 30 Jan 2013 13:28:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67891 invoked by uid 500); 30 Jan 2013 13:28:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 62421 invoked by uid 99); 30 Jan 2013 13:27:07 -0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of belunto@googlemail.com designates 209.85.214.174 as permitted sender)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlemail.com; s=20120113;
        h=mime-version:x-received:date:message-id:subject:from:to
         :content-type;
        bh=z67kTdA0sr0Gum1VNAjs47wwA5aPRyeG/X965ZhaYl4=;
        b=UFR0O+CkS60W8OSTPCDDO6ijjdnGVBXIdCkkPql2CwwtPUNl45SqsFqIVsTWMWAtNc
         2dACiY4/BILOSpFAcybxK5tni3BKBHoyQJ3kvyuG+QoXei6MOpXmjtcc2CHzSOCZpXKc
         VTgMjiQRibKjRFDItPGb/4vwFOEvZaQI+AU61jXUTLSdRM5rHZs0WjFFhDSOhyzZ4ero
         dIB5oCK95KLl2FHGdViBKfnMpQ6SztKnTWcMvMxqr4PWUlDBAjgyNFzi8f6qRK7LfU9C
         GdvulFx9hb8dcctiZTiqolCXw7H2cSg7TlGbK2U4Pw+lASBHkkpKjNXVeIp18wZuOPNR
         VGmw==
MIME-Version: 1.0
X-Received: by 10.182.131.101 with SMTP id ol5mr3554236obb.12.1359552402079;
 Wed, 30 Jan 2013 05:26:42 -0800 (PST)
Date: Wed, 30 Jan 2013 14:26:41 +0100
Message-ID: <CAKY7MkmNm2AzNBXRGJ+7DjqyCQp9ZoYccDR8LypUyLfTWpZXHg@mail.gmail.com>
Subject: IndexWriter deleteDocuments
From: =?UTF-8?Q?Bernd_M=C3=BCller?= <belunto@googlemail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
X-Virus-Checked: Checked by ClamAV on apache.org

Hello,

In my index, I have documents identified by a field with their unique
identifier. Now, I tried to delete documents having such a unique
identifier using deleteDocuments(Term t). If I test the IndexWriter
for deletions with hasDeletions(), it tells me true. Even if I commit
and close the index, open, delete, and close again, it still
hasDeletions() being true.

In previous lucene versions, there was something like expungeDeletes()
to actually delete the documents that I deleted.

How can I delete a document with my IndexWriter in a way that it is
really deleted and not just flagged as deleted?

Regards,
  Bernd

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54958-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jan 30 14:12:35 2013
Return-Path: <java-user-return-54958-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 94692EE0B
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 30 Jan 2013 14:12:35 +0000 (UTC)
Received: (qmail 16115 invoked by uid 500); 30 Jan 2013 14:12:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15697 invoked by uid 500); 30 Jan 2013 14:12:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15666 invoked by uid 99); 30 Jan 2013 14:12:32 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Jan 2013 14:12:32 +0000
X-ASF-Spam-Status: No, hits=2.3 required=5.0
	tests=SPF_SOFTFAIL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: softfail (nike.apache.org: transitioning domain of wuqiu.main@qq.com does not designate 216.139.236.26 as permitted sender)
Received: from [216.139.236.26] (HELO sam.nabble.com) (216.139.236.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Jan 2013 14:12:26 +0000
Received: from ben.nabble.com ([192.168.236.152])
	by sam.nabble.com with esmtp (Exim 4.72)
	(envelope-from <wuqiu.main@qq.com>)
	id 1U0YOQ-0005vd-Lc
	for java-user@lucene.apache.org; Wed, 30 Jan 2013 06:12:02 -0800
Date: Wed, 30 Jan 2013 06:12:02 -0800 (PST)
From: wgggfiy <wuqiu.main@qq.com>
To: java-user@lucene.apache.org
Message-ID: <1359555122659-4037377.post@n3.nabble.com>
In-Reply-To: <CAKY7MkmNm2AzNBXRGJ+7DjqyCQp9ZoYccDR8LypUyLfTWpZXHg@mail.gmail.com>
References: <CAKY7MkmNm2AzNBXRGJ+7DjqyCQp9ZoYccDR8LypUyLfTWpZXHg@mail.gmail.com>
Subject: Re: IndexWriter deleteDocuments
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

it seems that a doc is really deleted until next index merge or something.
I'm not sure.



-----
--------------------------
Email: wuqiu.main@qq.com
--------------------------
--
View this message in context: http://lucene.472066.n3.nabble.com/IndexWriter-deleteDocuments-tp4037365p4037377.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54959-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jan 30 14:28:13 2013
Return-Path: <java-user-return-54959-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 8CEEFE1AD
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 30 Jan 2013 14:28:13 +0000 (UTC)
Received: (qmail 67411 invoked by uid 500); 30 Jan 2013 14:28:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67109 invoked by uid 500); 30 Jan 2013 14:28:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66911 invoked by uid 99); 30 Jan 2013 14:28:02 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Jan 2013 14:28:02 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.128.176] (HELO mail-ve0-f176.google.com) (209.85.128.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Jan 2013 14:27:56 +0000
Received: by mail-ve0-f176.google.com with SMTP id jz10so1102060veb.7
        for <java-user@lucene.apache.org>; Wed, 30 Jan 2013 06:27:35 -0800 (PST)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=x-received:mime-version:in-reply-to:references:from:date:message-id
         :subject:to:content-type:content-transfer-encoding
         :x-gm-message-state;
        bh=4lflka2Dr7YaP87VUioqKznmbXjLhBEJ89jZsUG8NsY=;
        b=ckNuPyaubxLZDN6bN94k/8NyTS6isWeHqXCNciOuIiEzupc2Kxy1jbz5956IovshZD
         R47BvUN6DD1JEyW2cVKVdsQNZz55dgFMiQ/+1JXp+fwr3g+2E9jwAmY5Fi8ym8TYHfeA
         Mb/n8/ceZxlFzCCkP2KJnXKKVF395y7EmZSYiph4A2eWNXZRVBXjkfV3KGU4ihDC4NAb
         j67PemJ2xXUEuQLTXsP0ebbnRG4C4Mt73RTaETkolIrjkiC+HryYQ4GIqY+lvbZZY41M
         yt97lkLfk7ul8qGzVsI43BWIqeidQNxcwTS1JmkHs0Ba516MRpIXpH1bRtkyU9ABF9eL
         o0DQ==
X-Received: by 10.52.95.144 with SMTP id dk16mr4368343vdb.40.1359556055756;
 Wed, 30 Jan 2013 06:27:35 -0800 (PST)
MIME-Version: 1.0
Received: by 10.220.123.197 with HTTP; Wed, 30 Jan 2013 06:27:14 -0800 (PST)
In-Reply-To: <CAKY7MkmNm2AzNBXRGJ+7DjqyCQp9ZoYccDR8LypUyLfTWpZXHg@mail.gmail.com>
References: <CAKY7MkmNm2AzNBXRGJ+7DjqyCQp9ZoYccDR8LypUyLfTWpZXHg@mail.gmail.com>
From: Michael McCandless <lucene@mikemccandless.com>
Date: Wed, 30 Jan 2013 09:27:14 -0500
Message-ID: <CAL8PwkakXb6rPJ_xYBF0icaYrgUASgj5YWnM7+Oz44zcbh_KoA@mail.gmail.com>
Subject: Re: IndexWriter deleteDocuments
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Gm-Message-State: ALoCoQmZgJRuMGIdOuX8+NMK4btPCqEawzR8j+qQl3RjV0BzPckksFns+pc/eIQSSer0CsAwQ+2V
X-Virus-Checked: Checked by ClamAV on apache.org

Documents are still only "marked' as deleted.

expungeDeletes was renamed to forceMergeDeletes, but it's a horribly,
horribly costly operation.

Normal merging will collapse the deletes anyway, and the default merge
policy favors segments with more deletions ... so you shouldn't have
to force merge them away yourself.

Mike McCandless

http://blog.mikemccandless.com

On Wed, Jan 30, 2013 at 8:26 AM, Bernd M=FCller <belunto@googlemail.com> wr=
ote:
> Hello,
>
> In my index, I have documents identified by a field with their unique
> identifier. Now, I tried to delete documents having such a unique
> identifier using deleteDocuments(Term t). If I test the IndexWriter
> for deletions with hasDeletions(), it tells me true. Even if I commit
> and close the index, open, delete, and close again, it still
> hasDeletions() being true.
>
> In previous lucene versions, there was something like expungeDeletes()
> to actually delete the documents that I deleted.
>
> How can I delete a document with my IndexWriter in a way that it is
> really deleted and not just flagged as deleted?
>
> Regards,
>   Bernd
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54960-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jan 30 14:31:33 2013
Return-Path: <java-user-return-54960-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 65944EB9F
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 30 Jan 2013 14:31:33 +0000 (UTC)
Received: (qmail 82865 invoked by uid 500); 30 Jan 2013 14:31:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82751 invoked by uid 500); 30 Jan 2013 14:31:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82731 invoked by uid 99); 30 Jan 2013 14:31:31 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Jan 2013 14:31:31 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of belunto@googlemail.com designates 209.85.214.169 as permitted sender)
Received: from [209.85.214.169] (HELO mail-ob0-f169.google.com) (209.85.214.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Jan 2013 14:31:25 +0000
Received: by mail-ob0-f169.google.com with SMTP id ta14so1693394obb.0
        for <java-user@lucene.apache.org>; Wed, 30 Jan 2013 06:31:05 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlemail.com; s=20120113;
        h=mime-version:x-received:in-reply-to:references:date:message-id
         :subject:from:to:content-type:content-transfer-encoding;
        bh=CRz4a/mg93Aq+n4CCyDNDVZrK1hKbMkxsWsucSWMzdI=;
        b=s0JLLsL5cdQdoGAZ1yMmoOZQd6heAexWpmkHvfRVkndcIMByA04EF/PfRKF4A3Uv0O
         ZpBjMlNib73HSdXp93Vm5vJC6ZgelVHGu63YLIn9ShbLCgkfG5caOPO+/or8pTvZRAB9
         XVLCuLMm4tzTKWU98qHkM9JXGtsbqNb9LQH/87NUR5zC35rLjQZV1TR9Rh+GimdoMQrs
         SLoj8l2khsThGkDOKxxNAjz7oQ3+CLXNzB0pZuKIubKxFc6qQhaeUVqy/ZKX/AGxXUOs
         1doy5KRghIfcvBxlquNvOWk4VedrG5QQwgiS5alkwmfYnr9BmJsAJ532/D91pKPdG2PU
         ts0g==
MIME-Version: 1.0
X-Received: by 10.182.123.78 with SMTP id ly14mr3769008obb.58.1359556265383;
 Wed, 30 Jan 2013 06:31:05 -0800 (PST)
Received: by 10.76.72.68 with HTTP; Wed, 30 Jan 2013 06:31:05 -0800 (PST)
In-Reply-To: <CAKY7MkmNm2AzNBXRGJ+7DjqyCQp9ZoYccDR8LypUyLfTWpZXHg@mail.gmail.com>
References: <CAKY7MkmNm2AzNBXRGJ+7DjqyCQp9ZoYccDR8LypUyLfTWpZXHg@mail.gmail.com>
Date: Wed, 30 Jan 2013 15:31:05 +0100
Message-ID: <CAKY7MkmHqBbu0a+mvp5dYz3MbPGnUKhsUUnEecDXhX73YoPfAA@mail.gmail.com>
Subject: Re: IndexWriter deleteDocuments
From: =?UTF-8?Q?Bernd_M=C3=BCller?= <belunto@googlemail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

sorry, user error... please discard the question ;-)

2013/1/30 Bernd M=C3=BCller <belunto@googlemail.com>:
> Hello,
>
> In my index, I have documents identified by a field with their unique
> identifier. Now, I tried to delete documents having such a unique
> identifier using deleteDocuments(Term t). If I test the IndexWriter
> for deletions with hasDeletions(), it tells me true. Even if I commit
> and close the index, open, delete, and close again, it still
> hasDeletions() being true.
>
> In previous lucene versions, there was something like expungeDeletes()
> to actually delete the documents that I deleted.
>
> How can I delete a document with my IndexWriter in a way that it is
> really deleted and not just flagged as deleted?
>
> Regards,
>   Bernd

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54961-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jan 30 16:12:48 2013
Return-Path: <java-user-return-54961-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 3C422EBFE
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 30 Jan 2013 16:12:48 +0000 (UTC)
Received: (qmail 91006 invoked by uid 500); 30 Jan 2013 16:12:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90875 invoked by uid 500); 30 Jan 2013 16:12:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90864 invoked by uid 99); 30 Jan 2013 16:12:45 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Jan 2013 16:12:45 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [193.196.8.10] (HELO linux3.ids-mannheim.de) (193.196.8.10)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Jan 2013 16:12:38 +0000
Received: from linux2.ids-mannheim.de ([10.0.1.1])
	by linux3.ids-mannheim.de with smtp (Exim 4.72)
	(envelope-from <schnober@ids-mannheim.de>)
	id 1U0aGm-0006oe-HE
	for java-user@lucene.apache.org; Wed, 30 Jan 2013 17:12:18 +0100
Received: (qmail 10913 invoked from network); 30 Jan 2013 16:12:21 -0000
Received: from unknown (HELO ?10.99.1.49?) (10.99.1.49)
  by linux2.ids-mannheim.de with SMTP; 30 Jan 2013 16:12:21 -0000
Message-ID: <51094660.2090309@ids-mannheim.de>
Date: Wed, 30 Jan 2013 17:12:16 +0100
From: Carsten Schnober <schnober@ids-mannheim.de>
Organization: Institut =?UTF-8?B?ZsO8ciBEZXV0c2NoZSBTcHJhY2hl?=
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:17.0) Gecko/20130106 Thunderbird/17.0.2
MIME-Version: 1.0
To: java-user@lucene.apache.org
References: <51069CD3.9060209@ids-mannheim.de> <006b01cdfd72$36f2bff0$a4d83fd0$@thetaphi.de> <5106AA7C.3000104@andrewgilmartin.com> <CADuAvzf4NU2vBLpgxf5P4BSv=8VGvNebTpsfxT2OoVdHCEMPaQ@mail.gmail.com>
In-Reply-To: <CADuAvzf4NU2vBLpgxf5P4BSv=8VGvNebTpsfxT2OoVdHCEMPaQ@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit
X-SA-Do-Not-Run: Yes
X-SA-Exim-Connect-IP: 10.0.1.1
X-SA-Exim-Rcpt-To: java-user@lucene.apache.org
X-SA-Exim-Mail-From: schnober@ids-mannheim.de
X-Spam-Checker-Version: SpamAssassin 3.3.2 (2011-06-06) on
	linux3.ids-mannheim.de
X-Spam-Level: 
Subject: Re: ANTLR and Custom Query Syntax/Parser
X-SA-Exim-Version: 4.2.1 (built Mon, 03 Jul 2006 09:34:15 +0200)
X-SA-Exim-Scanned: Yes (on linux3.ids-mannheim.de)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-1.1 required=3.0 tests=BAYES_00,RDNS_NONE,
	TO_NO_BRKTS_NORDNS autolearn=no version=3.3.2

Am 29.01.2013 00:24, schrieb Trejkaz:
> On Tue, Jan 29, 2013 at 3:42 AM, Andrew Gilmartin
> <andrew@andrewgilmartin.com> wrote:
>> When I first started using Lucene, Lucene's Query classes where not suitable
>> for use with the Visitor pattern and so I created my own query class
>> equivalants and other more specialized ones. Lucene's classes might have
>> changed since then (I do not know)
> 
> On that subject, the infrastructure behind StandardQueryParser is
> along those lines. Query itself is still not very flexible, but
> QueryNode is much more convenient and there are processors for walking
> the tree to do transformations.
> 
> We ended up using ANTLR to do the syntax parsing for our stuff and
> then using most of the standard transformations as-is, decorated in
> some cases (either to customise or to work around bugs.) Of course we
> had to add our own for all the new features, but we got a fair bit of
> reuse out of the new framework.

Hi,
thanks for your hints, everyone! I am still a little bit puzzled about
where to start though.
The general task is to generate SpanQueries from the tree provided by
the ANTLR query syntax parser. The special feature about that query
language (that I have not specified and that I cannot change) is that
there are binary operators such as "/s0" indicating that the payloads of
two tokens have to be identical and implying an AND. The query "A /s0 B"
means "find documents that contain A AND B where A and B have identical
payloads".
My intuitive solution would be to make a filter from a BooleanQuery with
A AND B and apply that filter in two separate SpanTermQuerys for A and
for B respectively. Then, I would perform an intersection on the hits
based on the payloads.
However, I am still puzzled how to approach this coming from a an
Antlr-generated tree. This may be due to a certain lack of routine
dealing with Antlr output, but when the parser returns an object of some
subclass of RuleReturnScope, how would I be able to derive appropriate
Lucene Query subclasses?
Best,
Carsten


-- 
Institut fr Deutsche Sprache | http://www.ids-mannheim.de
Projekt KorAP                 | http://korap.ids-mannheim.de
Tel. +49-(0)621-43740789      | schnober@ids-mannheim.de
Korpusanalyseplattform der nchsten Generation
Next Generation Corpus Analysis Platform

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54962-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jan 30 17:28:06 2013
Return-Path: <java-user-return-54962-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id B5C5BE46A
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 30 Jan 2013 17:28:06 +0000 (UTC)
Received: (qmail 30626 invoked by uid 500); 30 Jan 2013 17:28:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30585 invoked by uid 500); 30 Jan 2013 17:28:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30554 invoked by uid 99); 30 Jan 2013 17:28:04 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Jan 2013 17:28:04 +0000
X-ASF-Spam-Status: No, hits=2.3 required=5.0
	tests=SPF_SOFTFAIL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: softfail (nike.apache.org: transitioning domain of wuqiu.main@qq.com does not designate 216.139.236.26 as permitted sender)
Received: from [216.139.236.26] (HELO sam.nabble.com) (216.139.236.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Jan 2013 17:27:58 +0000
Received: from ben.nabble.com ([192.168.236.152])
	by sam.nabble.com with esmtp (Exim 4.72)
	(envelope-from <wuqiu.main@qq.com>)
	id 1U0bRh-0003T4-P7
	for java-user@lucene.apache.org; Wed, 30 Jan 2013 09:27:37 -0800
Date: Wed, 30 Jan 2013 09:27:37 -0800 (PST)
From: wgggfiy <wuqiu.main@qq.com>
To: java-user@lucene.apache.org
Message-ID: <1359566857757-4037462.post@n3.nabble.com>
Subject: =?UTF-8?Q?How_to_find_related_words_=EF=BC=9F?=
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

In short, 
you put in a term like "Lucene", 
and The ideal output would be "solr", "index", "full-text search", and so
on.
How to make it ? to find the related words. thx
My idea is to use FuzzyQuery, or MoreLikeThis, or calc the score with all
the terms and then sort.
Any idea ?



-----
--------------------------
Email: wuqiu.main@qq.com
--------------------------
--
View this message in context: http://lucene.472066.n3.nabble.com/How-to-find-related-words-tp4037462.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54963-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jan 30 17:39:25 2013
Return-Path: <java-user-return-54963-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 5A79EEB4F
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 30 Jan 2013 17:39:25 +0000 (UTC)
Received: (qmail 69624 invoked by uid 500); 30 Jan 2013 17:39:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69581 invoked by uid 500); 30 Jan 2013 17:39:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69573 invoked by uid 99); 30 Jan 2013 17:39:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Jan 2013 17:39:23 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.210.44] (HELO mail-da0-f44.google.com) (209.85.210.44)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Jan 2013 17:39:17 +0000
Received: by mail-da0-f44.google.com with SMTP id z20so867436dae.31
        for <java-user@lucene.apache.org>; Wed, 30 Jan 2013 09:38:56 -0800 (PST)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=x-received:message-id:date:from:user-agent:mime-version:to:subject
         :references:in-reply-to:content-type:content-transfer-encoding
         :x-gm-message-state;
        bh=oQ2RKeK1RbxT7kR4uWCFsytEtqUIpAG8pGWx/xy9q38=;
        b=N1stQm7zpF5k3zZnJRP7lcTwWPAMCmT1Zr9lqgbJ++vM8Dka2Gt35b7EVYcr12lUGA
         QuX7P+N502HdwtDZOaCxRfCltzVuKy4KsdqDUS/Yyz9wks7fura9EU/Rw6MjpWsD/Wks
         3z3cTqLpeZAxtUJBvoEtb0a+YuKkdnSY6D8LDS0SkP9z+J3wxHl8mgTpSFonBzuQDCf/
         T02oMiGmpAbp8owuP2vgFZH8/aKwpVCfVu/2FYQTg6lp9Iim1oWYPFEnhEBwJPHoII/A
         xz8eerEUPUMuWL3Dn1NrJin8c5vSD+emSlJKD+X3j4FyywUea3+S2hJTmdbIipoFnG23
         A4MQ==
X-Received: by 10.68.200.228 with SMTP id jv4mr14100294pbc.139.1359567536405;
        Wed, 30 Jan 2013 09:38:56 -0800 (PST)
Received: from jajo.local (ip68-226-93-53.ri.ri.cox.net. [68.226.93.53])
        by mx.google.com with ESMTPS id q4sm2649956paz.20.2013.01.30.09.38.54
        (version=TLSv1 cipher=ECDHE-RSA-RC4-SHA bits=128/128);
        Wed, 30 Jan 2013 09:38:55 -0800 (PST)
Message-ID: <51095AAC.70809@andrewgilmartin.com>
Date: Wed, 30 Jan 2013 12:38:52 -0500
From: Andrew Gilmartin <andrew@andrewgilmartin.com>
User-Agent: Postbox 3.0.7 (Macintosh/20130119)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: How to find related words =?UTF-8?B?77yf?=
References: <1359566857757-4037462.post@n3.nabble.com>
In-Reply-To: <1359566857757-4037462.post@n3.nabble.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Gm-Message-State: ALoCoQl9SZptd3ubwAvfrTTYpOXh30k030nFinNNRuVwnv/HvRqG8dfyr01M1p8y4c+CeDPZZw49
X-Virus-Checked: Checked by ClamAV on apache.org

wgggfiy wrote:
> In short,
> you put in a term like "Lucene",
> and The ideal output would be "solr", "index", "full-text search", and so
> on.
> How to make it ? to find the related words. thx
> My idea is to use FuzzyQuery, or MoreLikeThis, or calc the score with all
> the terms and then sort.
> Any idea ?

This is a very broad question. This technique is usually called broadening the search space (and its reverse is narrowing the search space). Or simply, "thesaurus lookup." To broaden, you will need to have a collection of groups of such equivalent terms. I don't have a specific source for obtaining the collection. Once you have the collection, then you will need to transform the query for a single term into a, for example, boolean query for all the terms. And, possibly, giving higher weight to the specific term the user used and lesser weight to its equivalents. For more details, try some Delicious searches for articles, for example,

https://delicious.com/search?p=thesaurus%2Clucene

https://delicious.com/search?p=synonyms%2Clucene

-- Andrew

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54964-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jan 30 18:00:33 2013
Return-Path: <java-user-return-54964-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id B797DEC29
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 30 Jan 2013 18:00:33 +0000 (UTC)
Received: (qmail 50109 invoked by uid 500); 30 Jan 2013 18:00:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50069 invoked by uid 500); 30 Jan 2013 18:00:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50060 invoked by uid 99); 30 Jan 2013 18:00:31 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Jan 2013 18:00:31 +0000
X-ASF-Spam-Status: No, hits=1.3 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_PASS,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of SRS0=EEEfRD=LX=basetechnology.com=jack@yourhostingaccount.com designates 65.254.253.104 as permitted sender)
Received: from [65.254.253.104] (HELO mailout13.yourhostingaccount.com) (65.254.253.104)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Jan 2013 18:00:25 +0000
Received: from mailscan09.yourhostingaccount.com ([10.1.15.9] helo=mailscan09.yourhostingaccount.com)
	by mailout13.yourhostingaccount.com with esmtp (Exim)
	id 1U0bx7-0004vp-GY
	for java-user@lucene.apache.org; Wed, 30 Jan 2013 13:00:05 -0500
Received: from impout01.yourhostingaccount.com ([10.1.55.1] helo=impout01.yourhostingaccount.com)
	by mailscan09.yourhostingaccount.com with esmtp (Exim)
	id 1U0bx6-0001oa-FQ
	for java-user@lucene.apache.org; Wed, 30 Jan 2013 13:00:04 -0500
Received: from authsmtp05.yourhostingaccount.com ([10.1.18.5])
	by impout01.yourhostingaccount.com with NO UCE
	id uJ041k00C06ZpSa01J040E; Wed, 30 Jan 2013 13:00:04 -0500
X-Authority-Analysis: v=2.0 cv=EJGEIilC c=1 sm=1
 a=yH02RjTyxywMAIqhn74x1Q==:17 a=aQzbgH187woA:10 a=_TSjD6-FiyQA:10
 a=3jZET7lWBKwA:10 a=jPJDawAOAc8A:10 a=IkcTkHD0fZMA:10 a=jvYhGVW7AAAA:8
 a=TKQlbPpERlQA:10 a=HDWgMBI4gAMA:10 a=mV9VRH-2AAAA:8 a=dZbOZ2KzAAAA:8
 a=9I5xiGouAAAA:8 a=OmBbNxAREYTifAZ6xqkA:9 a=QEXdDO2ut3YA:10 a=bq13MwdPMYIA:10
 a=XvRwZWoD-6oA:10 a=g6eHoFREEB0A:10 a=mF8-6PrU_rAA:10 a=2fPOlPt4dusA:10
 a=7fluTXEBLbwA:10 a=9O1N9SI/4ZbXZMy1Cl+5fA==:117
X-EN-OrigOutIP: 10.1.18.5
X-EN-IMPSID: uJ041k00C06ZpSa01J040E
Received: from 207-237-113-14.c3-0.nyr-ubr1.nyr.ny.cable.rcn.com ([207.237.113.14] helo=JackKrupansky)
	by authsmtp05.yourhostingaccount.com with esmtpa (Exim)
	id 1U0bx2-0008Fa-07
	for java-user@lucene.apache.org; Wed, 30 Jan 2013 13:00:00 -0500
Message-ID: <4FF51336E6EE44E1BDEC198EAEAB9BB4@JackKrupansky>
From: "Jack Krupansky" <jack@basetechnology.com>
To: <java-user@lucene.apache.org>
References: <1359566857757-4037462.post@n3.nabble.com>
In-Reply-To: <1359566857757-4037462.post@n3.nabble.com>
Subject: =?UTF-8?Q?Re:_How_to_find_related_words_=EF=BC=9F?=
Date: Wed, 30 Jan 2013 12:59:56 -0500
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="UTF-8";
	reply-type=original
Content-Transfer-Encoding: 8bit
X-Priority: 3
X-MSMail-Priority: Normal
Importance: Normal
X-Mailer: Microsoft Windows Live Mail 15.4.3555.308
X-MimeOLE: Produced By Microsoft MimeOLE V15.4.3555.308
X-EN-UserInfo: e0a4b55451ed9f27313ebf02e3d4348d:fc4a93e1349e680c52bdd723c0ab3ef6
X-EN-AuthUser: jack@basetechnology.com
Sender:  "Jack Krupansky" <jack@basetechnology.com>
X-EN-OrigIP: 207.237.113.14
X-EN-OrigHost: 207-237-113-14.c3-0.nyr-ubr1.nyr.ny.cable.rcn.com
X-Virus-Checked: Checked by ClamAV on apache.org

Take a look at MoreLikeThisQuery:
http://lucene.apache.org/core/4_1_0/queries/org/apache/lucene/queries/mlt/MoreLikeThisQuery.html

And MoreLikeThis itself:
http://lucene.apache.org/core/4_1_0/queries/org/apache/lucene/queries/mlt/MoreLikeThis.html

So, the idea is search for documents using your keyword(s) and ask Lucene to 
extract relevant terms from the top document(s).

-- Jack Krupansky

-----Original Message----- 
From: wgggfiy
Sent: Wednesday, January 30, 2013 12:27 PM
To: java-user@lucene.apache.org
Subject: How to find related words 

In short,
you put in a term like "Lucene",
and The ideal output would be "solr", "index", "full-text search", and so
on.
How to make it ? to find the related words. thx
My idea is to use FuzzyQuery, or MoreLikeThis, or calc the score with all
the terms and then sort.
Any idea ?



-----
--------------------------
Email: wuqiu.main@qq.com
--------------------------
--
View this message in context: 
http://lucene.472066.n3.nabble.com/How-to-find-related-words-tp4037462.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54965-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jan 30 18:06:27 2013
Return-Path: <java-user-return-54965-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 62ABFEC7F
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 30 Jan 2013 18:06:27 +0000 (UTC)
Received: (qmail 72595 invoked by uid 500); 30 Jan 2013 18:06:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72559 invoked by uid 500); 30 Jan 2013 18:06:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72551 invoked by uid 99); 30 Jan 2013 18:06:25 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Jan 2013 18:06:25 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.220.178] (HELO mail-vc0-f178.google.com) (209.85.220.178)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Jan 2013 18:06:20 +0000
Received: by mail-vc0-f178.google.com with SMTP id m8so1174838vcd.37
        for <java-user@lucene.apache.org>; Wed, 30 Jan 2013 10:05:58 -0800 (PST)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=x-received:mime-version:in-reply-to:references:from:date:message-id
         :subject:to:content-type:x-gm-message-state;
        bh=7x1QKC+c03ozKjW8b4ug0OjI9qlKa8lvm7t/XchaFyQ=;
        b=N7wwJfk3cIDN4MDOlHWk94N+yrlWqzwS0yxdHjqKt6ME7RvP5E+VTXiSYNpvdHR2j1
         KayPX+83PQYeUa8zNFcGEZw5T13XPCy6k79rBZwrh47IA4kEcSWOfMM1JWMDn9mymBki
         fVvT2c8SB1HCeoN9ptbJAHGBqdj3upOmVIkfxoLmC6+16eTvcNcH/FmVLCQfDuKGvzGv
         v3W01447Csu5B7skouMdjBUZVhXK+voEhROyH+RHUqU0eriEbcQhX4mjVu+2Dtz4Z8hL
         AGC5kJ3K5WMKk6fHDFtSCmOgmpOWs8bRueBO91GaGtMaxkvsA1sbGUbiBdGjLwLe1dpS
         X8Vw==
X-Received: by 10.220.241.141 with SMTP id le13mr5545210vcb.26.1359569158805;
 Wed, 30 Jan 2013 10:05:58 -0800 (PST)
MIME-Version: 1.0
Received: by 10.220.123.197 with HTTP; Wed, 30 Jan 2013 10:05:38 -0800 (PST)
In-Reply-To: <CAFh=WLjwACFHSbOR9M2e4yYCpRVY0b8G12VDDCDzz4TLWHgf3A@mail.gmail.com>
References: <CAFh=WLgJq2FC2LzgZhOf8mKC=1x=7A3krQktCOSKTMSvD2=3jg@mail.gmail.com>
 <7BFFE07077B64238BF94592798403F43@JackKrupansky> <CAFh=WLgF0A4bq7VLOUuz0QxxHefUN_0Er2puG0D3nbSFt-oYLQ@mail.gmail.com>
 <18CE550667164D328619C39B3BA871E1@JackKrupansky> <CAFh=WLjwACFHSbOR9M2e4yYCpRVY0b8G12VDDCDzz4TLWHgf3A@mail.gmail.com>
From: Michael McCandless <lucene@mikemccandless.com>
Date: Wed, 30 Jan 2013 13:05:38 -0500
Message-ID: <CAL8PwkbLWzGBZ0CFmZQO3hm7C-RC3-L+iiCDddckT+7wuLusvw@mail.gmail.com>
Subject: Re: Questions about FuzzyQuery in Lucene 4.x
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Gm-Message-State: ALoCoQk8XIfiR8B4w+zywl0Q8Yur19qzMllzHSUVbnc5cTzFi4dTh0H9oAihL4ZWClWRhpo97ShL
X-Virus-Checked: Checked by ClamAV on apache.org

On Tue, Jan 29, 2013 at 2:43 PM, George Kelvin
<george.kelvin738@gmail.com> wrote:
> Hi Jack,
>
> The problematic query is "scar"+"wads".
>
> There are several (more than 10) documents in the data with the content
> "star wars", so I think that query should be able to find all these
> documents.
>
> I was trying to provide a minimal test case, but I couldn't reduce the size
> of data showing the failure.
>
> The size of the minimal data showing the failure I got so far is around 2
> million.
>
> However, I found a suspicious document with content "scor". If I remove it
> from the 2 million documents data, that query can find all the "star wars"
> documents. If I add it back, then the query can't find any.

Hmm, maybe try increasing the maxExpansions (one of FuzzyQ's ctors take that).

By default it's 50, meaning we enumerate the top 50 terms within edit
distance 1, so it could be "star" is falling out of the top 50?

Mike McCandless

http://blog.mikemccandless.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54966-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jan 30 20:05:00 2013
Return-Path: <java-user-return-54966-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 477F7EBD7
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 30 Jan 2013 20:05:00 +0000 (UTC)
Received: (qmail 29958 invoked by uid 500); 30 Jan 2013 20:04:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29900 invoked by uid 500); 30 Jan 2013 20:04:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29889 invoked by uid 99); 30 Jan 2013 20:04:58 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Jan 2013 20:04:58 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.128.170] (HELO mail-ve0-f170.google.com) (209.85.128.170)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Jan 2013 20:04:51 +0000
Received: by mail-ve0-f170.google.com with SMTP id 14so799684vea.1
        for <java-user@lucene.apache.org>; Wed, 30 Jan 2013 12:04:30 -0800 (PST)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=x-received:mime-version:in-reply-to:references:from:date:message-id
         :subject:to:content-type:x-gm-message-state;
        bh=yCu/BHtIg5erAGR83OVyEme2GLJRTWbubaSWjqot5bM=;
        b=FrMiJKL1+nmfIOXqP8q3RpSgEmchUPP/SeIIZRkBNrHhm6PchD+fg+u+68CKS4Lhyk
         kBwTBrGyPfcSFylvkmOZVhRtz+eESdlvch0EwZclAp54DUl995jCrm7yylaHieRWhAvz
         a6HWp3z85iptfwsIDmsMlNPn39mfXnyT0QkLESSDU2/PBs8CwJ8ST/3MT9+e59qWAmNI
         7uJPNWT5C+e9Rlv0N19ouTRYKuWHOwZO2l7KBAVJn5MDEkO+TZsuNQagq+s1CKywhejI
         uYlVP8U2cRIKsZxUD/cQcEmAIgNFcQirYOEZdao13IwKXtlDYZ7CffKZITwdYOOP6/A+
         IgVA==
X-Received: by 10.220.241.141 with SMTP id le13mr5840587vcb.26.1359576270825;
 Wed, 30 Jan 2013 12:04:30 -0800 (PST)
MIME-Version: 1.0
Received: by 10.220.123.197 with HTTP; Wed, 30 Jan 2013 12:04:10 -0800 (PST)
In-Reply-To: <CAOD+0FL3X+cJQoSJo+vLBKOW_K8Eepw8j9PMpzK=tevURzk2sA@mail.gmail.com>
References: <CAOD+0FJSikpVj0Hn9QeXOOhyUbVMtAU8WraoyBDipN09_=mgzw@mail.gmail.com>
 <CAL8PwkYbWrCMJSxJuZLV12SA6nmsvFG8tBDZ4ccCS+TpqP_APQ@mail.gmail.com>
 <CAOD+0FKKFjF66z94eH5H5LP89ytC8AsbJhZ4Fk5pwjjXh04Y5Q@mail.gmail.com>
 <CAL8PwkZnA5-8ycHDO2z3FNugyzNAbPyQaZqRt=esGSGC1-W0Gg@mail.gmail.com>
 <CAL8PwkbFPuQ3FOpgnL965ZW+HSxTQTfqjqg5jN=rmV9dwJxh1A@mail.gmail.com> <CAOD+0FL3X+cJQoSJo+vLBKOW_K8Eepw8j9PMpzK=tevURzk2sA@mail.gmail.com>
From: Michael McCandless <lucene@mikemccandless.com>
Date: Wed, 30 Jan 2013 15:04:10 -0500
Message-ID: <CAL8Pwka1-0+xAY0kcfLBv7zUVDeJqPgG6vDHJr1jOi6PZLYy8w@mail.gmail.com>
Subject: Re: Pulsing40PostingsFormat in lucene 4.1
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Gm-Message-State: ALoCoQlZXVpv0KOjNxZ1Pp8QCj8by+ED5R8TrhFSw/1g3vbLaHNB5tHVMJ8SDsbZoycxGyQWvsYy
X-Virus-Checked: Checked by ClamAV on apache.org

On Tue, Jan 29, 2013 at 7:39 PM, Sean Bridges <sean.bridges@gmail.com> wrote:

> How do we avoid similar situations in the future?  Is Pulsing41PostingsFormat
> going to be maintained in future versions of Lucene?  What are the
> safe PostingFormat/Codecs
> to use?  Every PostingFormat/Codec is @deprecated or @experimental.

Well ... only the default Codec is guaranteed to have back compat
through the next major release (even though it's marked experimental,
which "just" means the APIs are free to suddenly change).

Any other Codec part may change.

Mike McCandless

http://blog.mikemccandless.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54967-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jan 30 20:58:27 2013
Return-Path: <java-user-return-54967-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id A5892EB03
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 30 Jan 2013 20:58:27 +0000 (UTC)
Received: (qmail 26591 invoked by uid 500); 30 Jan 2013 20:58:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26542 invoked by uid 500); 30 Jan 2013 20:58:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26532 invoked by uid 99); 30 Jan 2013 20:58:24 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Jan 2013 20:58:24 +0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,SPF_NEUTRAL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: 216.139.236.26 is neither permitted nor denied by domain of saisantoshi76@gmail.com)
Received: from [216.139.236.26] (HELO sam.nabble.com) (216.139.236.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Jan 2013 20:58:19 +0000
Received: from ben.nabble.com ([192.168.236.152])
	by sam.nabble.com with esmtp (Exim 4.72)
	(envelope-from <saisantoshi76@gmail.com>)
	id 1U0ejH-0001JR-1j
	for java-user@lucene.apache.org; Wed, 30 Jan 2013 12:57:59 -0800
Date: Wed, 30 Jan 2013 12:57:59 -0800 (PST)
From: saisantoshi <saisantoshi76@gmail.com>
To: java-user@lucene.apache.org
Message-ID: <1359579478923-4037530.post@n3.nabble.com>
In-Reply-To: <CAL8PwkZ2YM3knxZ58n=eXZBkvzpe-ave-jP8KkS05wnqUjyGew@mail.gmail.com>
References: <1359045708674-4035993.post@n3.nabble.com> <FEEEC59A-B6CA-4327-9106-D85394044D18@gmail.com> <1359051731144-4036028.post@n3.nabble.com> <CAL8PwkaMDuhu6DjJhQiCno6VowsthVMO9r2b=ZzkrGo9E6V3Qg@mail.gmail.com> <1359063582844-4036075.post@n3.nabble.com> <CAL8PwkZu6-iUoC+DU5zTZoBFahCDfBc707pE2UXcG7Zct678ag@mail.gmail.com> <1359066502561-4036086.post@n3.nabble.com> <CAL8PwkapFdkd3ORpzfNRc55vnE2UHoU9vrTAK3=w1s__w0mV6w@mail.gmail.com> <1359066940835-4036091.post@n3.nabble.com> <CAL8PwkZ2YM3knxZ58n=eXZBkvzpe-ave-jP8KkS05wnqUjyGew@mail.gmail.com>
Subject: Re: List of files that Lucene 4.0 generates during indexing
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

The following files are originally created files (upon an initial indexing):

  _0.fdt
        _0.fdx
        _0.fnm
        _0.si
        _0_Lucene40_0.frq
        _0_Lucene40_0.prx
        _0_Lucene40_0.tim
        _0_Lucene40_0.tip
        _0_nrm.cfe
        _0_nrm.cfs
        index.v0008
        segments.gen
        segments_1


But when I added a new document, in one case, I got several other files that
got generated apart from the above:

         _0.fdt
          _0.fdx
        _0.fnm
        _0.si
        _0_Lucene40_0.frq
        _0_Lucene40_0.prx
        _0_Lucene40_0.tim
        _0_Lucene40_0.tip
        _0_nrm.cfe
        _0_nrm.cfs
     *   _2.fdx                          // what is the significance of
these _2 prefix files.
        _2.fnm
        _2.si
        _2_Lucene40_0.frq
        _2_Lucene40_0.prx
        _2_Lucene40_0.tim
        _2_Lucene40_0.tip
        _2_nrm.cfe
        _2_nrm.cfs*
         segments_3


Sometimes, it does create the _2 prefix files apart from incrementing the
segement_<N> version. Could anyone please let me know why those files (_2
prefix files are there in the index directory) are generated in the first
place and its importance/significance.

I haven't seen it generated for other updates hence would like to understand
the concept behind.

Thanks,
Sai.





--
View this message in context: http://lucene.472066.n3.nabble.com/List-of-files-that-Lucene-4-0-generates-during-indexing-tp4035993p4037530.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54968-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jan 30 22:52:12 2013
Return-Path: <java-user-return-54968-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 82FDCE996
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 30 Jan 2013 22:52:12 +0000 (UTC)
Received: (qmail 43474 invoked by uid 500); 30 Jan 2013 22:52:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43373 invoked by uid 500); 30 Jan 2013 22:52:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 34697 invoked by uid 99); 30 Jan 2013 22:48:31 -0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,MIME_HTML_MOSTLY,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
From: "Dyer, James" <James.Dyer@ingramcontent.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Wed, 30 Jan 2013 16:47:55 -0600
Subject: Real-time Get and Atomic Updates for SolrJ
Thread-Topic: Real-time Get and Atomic Updates for SolrJ
Thread-Index: Ac3/O9gsnV1489IEQPe04zqqNyUZvA==
Message-ID: <8F0D0142CA7ECC4287A9EC1BD8CB880C1927BEEF64@USLVDCMBVP01.ingramcontent.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
acceptlanguage: en-US
MIME-Version: 1.0
X-MC-Unique: 113013017475900202
Content-Type: multipart/alternative;
	boundary="_000_8F0D0142CA7ECC4287A9EC1BD8CB880C1927BEEF64USLVDCMBVP01i_"
X-Virus-Checked: Checked by ClamAV on apache.org

--_000_8F0D0142CA7ECC4287A9EC1BD8CB880C1927BEEF64USLVDCMBVP01i_
Content-Type: text/plain; charset=WINDOWS-1252
Content-Transfer-Encoding: quoted-printable

Does anyone know if convenient support for Real-time Get and Atomic Updates=
 have been implemented for SolrJ?  Is there a code sample somewhere?

James Dyer
Ingram Content Group
(615) 213-4311

--_000_8F0D0142CA7ECC4287A9EC1BD8CB880C1927BEEF64USLVDCMBVP01i_--


From java-user-return-54969-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jan 31 01:16:44 2013
Return-Path: <java-user-return-54969-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 36DB8DDC8
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 31 Jan 2013 01:16:44 +0000 (UTC)
Received: (qmail 93359 invoked by uid 500); 31 Jan 2013 01:16:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93307 invoked by uid 500); 31 Jan 2013 01:16:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93299 invoked by uid 99); 31 Jan 2013 01:16:41 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Jan 2013 01:16:41 +0000
X-ASF-Spam-Status: No, hits=4.5 required=5.0
	tests=HTML_MESSAGE,SPF_SOFTFAIL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: softfail (athena.apache.org: transitioning domain of wuqiu.main@qq.com does not designate 216.139.236.26 as permitted sender)
Received: from [216.139.236.26] (HELO sam.nabble.com) (216.139.236.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Jan 2013 01:16:37 +0000
Received: from ben.nabble.com ([192.168.236.152])
	by sam.nabble.com with esmtp (Exim 4.72)
	(envelope-from <wuqiu.main@qq.com>)
	id 1U0ilC-00087v-UP
	for java-user@lucene.apache.org; Wed, 30 Jan 2013 17:16:14 -0800
Date: Wed, 30 Jan 2013 17:16:14 -0800 (PST)
From: wgggfiy <wuqiu.main@qq.com>
To: java-user@lucene.apache.org
Message-ID: <1359594974931-4037583.post@n3.nabble.com>
In-Reply-To: <4FF51336E6EE44E1BDEC198EAEAB9BB4@JackKrupansky>
References: <1359566857757-4037462.post@n3.nabble.com> <4FF51336E6EE44E1BDEC198EAEAB9BB4@JackKrupansky>
Subject: =?UTF-8?Q?Re:_How_to_find_related_words_=EF=BC=9F?=
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_31904_21581425.1359594974932"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_31904_21581425.1359594974932
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit

en, it seems nice, but I'm puzzled by you and Andrew Gilmartina above, 
what's the difference between you guys ? 
and I'm reading the reference about how to 
*extract relevant terms from the top document(s). *
anyway, thx 




-----
--------------------------
Email: wuqiu.main@qq.com
--------------------------
--
View this message in context: http://lucene.472066.n3.nabble.com/How-to-find-related-words-tp4037462p4037583.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.
------=_Part_31904_21581425.1359594974932--

From java-user-return-54970-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jan 31 05:47:39 2013
Return-Path: <java-user-return-54970-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id A0815E690
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 31 Jan 2013 05:47:39 +0000 (UTC)
Received: (qmail 36462 invoked by uid 500); 31 Jan 2013 05:47:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36228 invoked by uid 500); 31 Jan 2013 05:47:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36190 invoked by uid 99); 31 Jan 2013 05:47:33 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Jan 2013 05:47:33 +0000
X-ASF-Spam-Status: No, hits=1.7 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of arunk786@gmail.com designates 209.85.210.173 as permitted sender)
Received: from [209.85.210.173] (HELO mail-ia0-f173.google.com) (209.85.210.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Jan 2013 05:47:26 +0000
Received: by mail-ia0-f173.google.com with SMTP id l29so3483084iag.18
        for <java-user@lucene.apache.org>; Wed, 30 Jan 2013 21:47:05 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=x-received:mime-version:in-reply-to:references:from:date:message-id
         :subject:to:content-type;
        bh=7nbOWu7sHzgq4aN+8vgDwMR/0/eXU+Bs9JY9gjp6vVc=;
        b=Q82uqqWdbOdSXR3c6fhk7d8S6uoWwOvDaRuamK0vEalBe8vmJ0DUsYAA4ARXrpqH0z
         SwwReM25c7SvZ5F8zcMOxb54YvQOgnGBrV3SI/YKmsXoVxXFJsxFf2xDx6d+6mr5h6Fl
         7nGTUaERTAC0h6zDnRoGW9jcqDZvD8hDbcCGsKxJyW4sC7yOHNxMVTaGv8CfRaZZicWc
         fToCJIl9UaPs8KXYLwxzkXzMKyQic5ML06yfmLXzwky5SZPFofPvJpCBaUeBvNM+HF1c
         Gw60hRTpnpptnVBxUQkoQKOo3EMljy3PneXbZcp0zGP7w74k/Gc+QRmhzDQzWLuwAJPe
         2B8Q==
X-Received: by 10.50.95.194 with SMTP id dm2mr192180igb.63.1359611225197; Wed,
 30 Jan 2013 21:47:05 -0800 (PST)
MIME-Version: 1.0
Received: by 10.42.254.136 with HTTP; Wed, 30 Jan 2013 21:46:44 -0800 (PST)
In-Reply-To: <005101cdfee1$6d99dff0$48cd9fd0$@thetaphi.de>
References: <CAO7gJeizV5m43D_QaQaho24PjawfC217PeMwqD+KF-01UY26HA@mail.gmail.com>
 <CAEY5pxXtJCFrPgk8SkdK9ivuxZst-4eOvVNM4=0xsgcEgDJGzA@mail.gmail.com>
 <CAO7gJeg3AGsN=+GcKwpPdFyTTvAUku9bgPwQgP_JE6-p+HXyEw@mail.gmail.com>
 <CAEY5pxVUEM5NPgYfH=d7WCapL=ZfYxOjTy2yr1tNbqskBwSudw@mail.gmail.com>
 <CAPsWd+NPdvXeqot_hTvad-15VfFZC-whjUivbRSHCGC=Qsy3UA@mail.gmail.com>
 <CAO7gJehnBhiLvX6kZzBAE4W7-GS3i4kmZxnD1KN8-az9aFj3Rw@mail.gmail.com>
 <CAPsWd+OSLhNY9WYQ2h8QPr-xT+1k0Oo5dnEjc40a5JRndthL4w@mail.gmail.com>
 <CAO7gJej5L5wAj62KvBGyuVobnh9cQQ9xZwuttHvG=KCtk8Kf4A@mail.gmail.com> <005101cdfee1$6d99dff0$48cd9fd0$@thetaphi.de>
From: arun k <arunk786@gmail.com>
Date: Thu, 31 Jan 2013 11:16:44 +0530
Message-ID: <CAO7gJehOZm8Cs7wpPfq-cApdGzkNpy78WWez1dok8K+LzKC6Rw@mail.gmail.com>
Subject: Re: CompressingStoredFieldsFormat doesn't show improvement
To: java-user <java-user@lucene.apache.org>
Content-Type: multipart/alternative; boundary=e89a8f2348631c4e4904d48f28d8
X-Virus-Checked: Checked by ClamAV on apache.org

--e89a8f2348631c4e4904d48f28d8
Content-Type: text/plain; charset=windows-1252
Content-Transfer-Encoding: quoted-printable

Hi,

Please find the snapshots here.
http://picpaste.com/Lucene3.0.2-G00Z5FfX.png
http://picpaste.com/Lucene4.1-LsxpcQk0.png

Arun


On Wed, Jan 30, 2013 at 5:30 PM, Uwe Schindler <uwe@thetaphi.de> wrote:

> Hi,
>
>
>
> there is nothing attached to your mail; maybe the mailing list software
> removed it. Can you place it somewhere on the web (e.g. pastebin,=85)?
>
>
>
> Uwe
>
>
>
> -----
>
> Uwe Schindler
>
> H.-H.-Meier-Allee 63, D-28213 Bremen
>
>  <http://www.thetaphi.de/> http://www.thetaphi.de
>
> eMail: uwe@thetaphi.de
>
>
>
> From: arun k [mailto:arunk786@gmail.com]
> Sent: Wednesday, January 30, 2013 12:04 PM
> To: java-user
> Subject: Re: CompressingStoredFieldsFormat doesn't show improvement
>
>
>
> Adrein,
> Please find the attached profilers report.
>
>
>
> On Wed, Jan 30, 2013 at 3:35 PM, Adrien Grand <jpountz@gmail.com> wrote:
>
> On Wed, Jan 30, 2013 at 8:08 AM, arun k <arunk786@gmail.com> wrote:
> > Adrein,
> >
> > I have created an index of size 370M of 1 million docs of 40 fields of =
40
> > chars and did the profiling.
> > I see that the indexing and in particular the addDocument &
> > ConcurrentMergeScheduler in 4.1 takes double the time compared to 3.0.2=
.
>
> Can you provide me with the detailed profiles?
>
>
> > Looks like CompressionStoredFieldsFormat is of little use in my scenari=
o.
>
> You can can disable stored fields compression and use another
> StoredFieldsFormat by defining a custom codec
> (
> http://lucene.apache.org/core/4_1_0/core/org/apache/lucene/codecs/package=
-summary.html#package_description
> ).
>
>
> --
> Adrien
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>

--e89a8f2348631c4e4904d48f28d8--

From java-user-return-54971-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jan 31 11:34:34 2013
Return-Path: <java-user-return-54971-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 62134E18C
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 31 Jan 2013 11:34:34 +0000 (UTC)
Received: (qmail 54338 invoked by uid 500); 31 Jan 2013 11:34:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53911 invoked by uid 500); 31 Jan 2013 11:34:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53876 invoked by uid 99); 31 Jan 2013 11:34:26 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Jan 2013 11:34:26 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of rolf.veen@gmail.com designates 209.85.160.49 as permitted sender)
Received: from [209.85.160.49] (HELO mail-pb0-f49.google.com) (209.85.160.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Jan 2013 11:34:18 +0000
Received: by mail-pb0-f49.google.com with SMTP id xa12so1574801pbc.8
        for <java-user@lucene.apache.org>; Thu, 31 Jan 2013 03:33:57 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=x-received:mime-version:from:date:message-id:subject:to
         :content-type;
        bh=5SGskphGxh5Z/dacduOqBpb6I3aR7rxaPbsoOhWpz6A=;
        b=wvRKRXuHk7i2IF2/a9MC+RkZHs8g9V+KY+EO+MqQ48MxHdimcxep4zAxS0GiEvgIl/
         MQTzvl8jb5cC6xoB3SMD6V60JvaCq5+SUcgE8cGXGLBpWccd01EgHVTlKVQZPH5DrC7H
         pF5NyhLp7azl0G0wpT8d1vUGAnnuv/LadoNrg0WGQsK88ivGWDO+tbLG/uSYq8jk8JL6
         7mFR7ZZY2D9AiQG+a0Co21Jf4pE+etVmzmUQih6mNEG2aWOWFwl7GLms7mL/HxS/Sleg
         psLwPMi1teQySuTsFRcFXUEb3Ffo+GYBmSI0aQwBuPZkNEndvOXNxNnOYK+oQUFHyjRX
         vHEA==
X-Received: by 10.66.89.199 with SMTP id bq7mr19837559pab.26.1359632037332;
 Thu, 31 Jan 2013 03:33:57 -0800 (PST)
MIME-Version: 1.0
Received: by 10.68.134.225 with HTTP; Thu, 31 Jan 2013 03:33:37 -0800 (PST)
From: Rolf Veen <rolf.veen@gmail.com>
Date: Thu, 31 Jan 2013 12:33:37 +0100
Message-ID: <CAJf3Rj14Kbv97rQy_rJM2iXCfA8UOY=Bq4r7st+PCrBE4B-Hhw@mail.gmail.com>
Subject: How to get field names and types from an IndexSearcher
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
X-Virus-Checked: Checked by ClamAV on apache.org

Hello, all.

I want to get a list of field names and types out of an IndexSearcher
or IndexReader (not necesarily Atomic). By type I mean if it was
stored as StringField, LongField, etc. Is this possible ?

I could get the field names this way, probably not the simplest one
to get a unified field list:

IndexReader reader = searcher.getIndexReader();

for (AtomicReaderContext rc : reader.leaves()) {
    AtomicReader ar = rc.reader();
    FieldInfos fis = ar.getFieldInfos();
    for (FieldInfo fi : fis)
      System.out.println(fi.name);
}


Kind regards,
Rolf.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54972-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jan 31 11:43:50 2013
Return-Path: <java-user-return-54972-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id A2915E1C5
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 31 Jan 2013 11:43:50 +0000 (UTC)
Received: (qmail 76473 invoked by uid 500); 31 Jan 2013 11:43:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76138 invoked by uid 500); 31 Jan 2013 11:43:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76110 invoked by uid 99); 31 Jan 2013 11:43:44 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Jan 2013 11:43:44 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of vigneshklncit@gmail.com designates 209.85.216.180 as permitted sender)
Received: from [209.85.216.180] (HELO mail-qc0-f180.google.com) (209.85.216.180)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Jan 2013 11:43:37 +0000
Received: by mail-qc0-f180.google.com with SMTP id v28so1198023qcm.39
        for <java-user@lucene.apache.org>; Thu, 31 Jan 2013 03:43:16 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:x-received:date:message-id:subject:from:to
         :content-type;
        bh=8b5bwpB6SKH5BWULrnpcqjmsvhc5aLm0wGq/y05YXTo=;
        b=cjnyF1BWtRTKizti0UK18LTHFC/WoGuaEaZcJLJvPBwxP+hIpv8i43KEqOfmp7dMZt
         DW3j///d4481c4ETKsmUr7w5qtJTurqYyyTwDHZ6dZx/T0mdX/pm+57bdof+unYdcz9m
         MzRwFUXHZlsw1gJc6I85rDSyfyZY56HEZbwERwNZQHnweksi+Jcoph4t51A37RENoHxZ
         vnt9x2ZSnyCDkPZvA57HQwOQl6b+guAlAfWPAY3s4lCk+f1fy0pFLF2lpcU1Gfhb6qAi
         ksw4qgjZevsNsAR98MBD/iIdusGtVLfQDeWQIdDQPWmKvoLEaPP7GBjMc6OEk8WoeZG5
         WQEA==
MIME-Version: 1.0
X-Received: by 10.224.110.1 with SMTP id l1mr8576790qap.21.1359632596459; Thu,
 31 Jan 2013 03:43:16 -0800 (PST)
Received: by 10.49.71.143 with HTTP; Thu, 31 Jan 2013 03:43:16 -0800 (PST)
Date: Thu, 31 Jan 2013 17:13:16 +0530
Message-ID: <CAMMjTZz_TS1fT+7tGn9D2M9X0B7Oqk1DrRwNpkr_RsLsU9jCVA@mail.gmail.com>
Subject: How to properly use updatedocument in lucene.
From: VIGNESH S <vigneshklncit@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

Hi All,

I am having a basic doubt..

I am trying to update a lucene document field with a new value..

The below is my code.. It is not giving any errors and also it is not
updating the document with field.

Document d = searcher.doc(docId);

writer1 = new IndexWriter(csDirectory, new
IndexWriterConfig(Version.LUCENE_36,analyzer));

 writer1.updateDocument(new Term(FILE_NAME_FIELD,"new1.docx"),d);

Please help me in this..

Also Suggest me if there is a better way to updateDocument without
using search()..
						

-- 
Thanks and Regards
Vignesh Srinivasan

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54973-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jan 31 12:06:09 2013
Return-Path: <java-user-return-54973-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 703CEE239
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 31 Jan 2013 12:06:09 +0000 (UTC)
Received: (qmail 23722 invoked by uid 500); 31 Jan 2013 12:06:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23154 invoked by uid 500); 31 Jan 2013 12:06:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23122 invoked by uid 99); 31 Jan 2013 12:06:01 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Jan 2013 12:06:01 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.128.182] (HELO mail-ve0-f182.google.com) (209.85.128.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Jan 2013 12:05:56 +0000
Received: by mail-ve0-f182.google.com with SMTP id ox1so1062292veb.41
        for <java-user@lucene.apache.org>; Thu, 31 Jan 2013 04:05:35 -0800 (PST)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=x-received:mime-version:in-reply-to:references:from:date:message-id
         :subject:to:content-type:x-gm-message-state;
        bh=/JRX0ymwyn9JO5kzbww0MCOR2kD/TNU9XszjQMlVRsY=;
        b=TR3cG3x1gAExJW0d9MM3vc0phjWRxbEIkZ1ZER4eGjE/u8FX2dg3ZNyYcfgehZuwAd
         I2qzX1ZRtuywzLQlLCDOeqIGFmsk1mID5zoYxSkivlVXGgiDn/7k2NXTSXMDEDOFaeP9
         vxuwtmYc6MLAMlQzERUZmfP9rWV4FcaKC84PVmgzEZDL4vK0VTVXZ8iIhTFHZPmrCFSR
         f92f4oWLJwWCD1k/bVt0hTIhOiJMeq5b0B0Yjq+aVLLbe8/ExSiQeb+c+IRa3HUoh0gN
         XCgHxgDMfP63yxYVwV1X79ZttfgICtSvHc89eBIo9c/bflKHmQde7vmZoUZOjgdXSYC0
         Rzig==
X-Received: by 10.52.89.106 with SMTP id bn10mr6860249vdb.68.1359633935507;
 Thu, 31 Jan 2013 04:05:35 -0800 (PST)
MIME-Version: 1.0
Received: by 10.220.123.197 with HTTP; Thu, 31 Jan 2013 04:05:15 -0800 (PST)
In-Reply-To: <CAMMjTZz_TS1fT+7tGn9D2M9X0B7Oqk1DrRwNpkr_RsLsU9jCVA@mail.gmail.com>
References: <CAMMjTZz_TS1fT+7tGn9D2M9X0B7Oqk1DrRwNpkr_RsLsU9jCVA@mail.gmail.com>
From: Michael McCandless <lucene@mikemccandless.com>
Date: Thu, 31 Jan 2013 07:05:15 -0500
Message-ID: <CAL8Pwka3bomJqXC6YrKHv5wLKR26217TqQrXbsdUE-YuuBkaFA@mail.gmail.com>
Subject: Re: How to properly use updatedocument in lucene.
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Gm-Message-State: ALoCoQksxXGdMR2WN5qtQmyEexF7B8XwZTLEo3aAShpnYtYPGLExxXeorAOafNs8YBGb5pqMObfM
X-Virus-Checked: Checked by ClamAV on apache.org

It's confusing, but you should never try to re-index a document you
retrieved from a searcher, because certain index-time details (eg,
whether a field was tokenized) are not preserved in the stored
document.

Instead, you should re-build the document yourself, setting the right
details per-Field, and then re-index that.

Separately, that's the right way to call .updateDocument, but you must
ensure FILE_NAME_FIELD was indexed for the first document, with the
value "new1.docx".

Can you include how you indexed the original document?

Mike McCandless

http://blog.mikemccandless.com

On Thu, Jan 31, 2013 at 6:43 AM, VIGNESH S <vigneshklncit@gmail.com> wrote:
> Hi All,
>
> I am having a basic doubt..
>
> I am trying to update a lucene document field with a new value..
>
> The below is my code.. It is not giving any errors and also it is not
> updating the document with field.
>
> Document d = searcher.doc(docId);
>
> writer1 = new IndexWriter(csDirectory, new
> IndexWriterConfig(Version.LUCENE_36,analyzer));
>
>  writer1.updateDocument(new Term(FILE_NAME_FIELD,"new1.docx"),d);
>
> Please help me in this..
>
> Also Suggest me if there is a better way to updateDocument without
> using search()..
>
>
> --
> Thanks and Regards
> Vignesh Srinivasan
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54974-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jan 31 12:08:29 2013
Return-Path: <java-user-return-54974-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 93CBCE24A
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 31 Jan 2013 12:08:29 +0000 (UTC)
Received: (qmail 29186 invoked by uid 500); 31 Jan 2013 12:08:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28997 invoked by uid 500); 31 Jan 2013 12:08:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28980 invoked by uid 99); 31 Jan 2013 12:08:26 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Jan 2013 12:08:26 +0000
X-ASF-Spam-Status: No, hits=-2.3 required=5.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of gilin@il.ibm.com designates 195.75.94.109 as permitted sender)
Received: from [195.75.94.109] (HELO e06smtp13.uk.ibm.com) (195.75.94.109)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Jan 2013 12:08:17 +0000
Received: from /spool/local
	by e06smtp13.uk.ibm.com with IBM ESMTP SMTP Gateway: Authorized Use Only! Violators will be prosecuted
	for <java-user@lucene.apache.org> from <gilin@il.ibm.com>;
	Thu, 31 Jan 2013 12:06:43 -0000
Received: from b06cxnps4074.portsmouth.uk.ibm.com (9.149.109.196)
	by e06smtp13.uk.ibm.com (192.168.101.143) with IBM ESMTP SMTP Gateway: Authorized Use Only! Violators will be prosecuted;
	Thu, 31 Jan 2013 12:06:41 -0000
Received: from d06av01.portsmouth.uk.ibm.com (d06av01.portsmouth.uk.ibm.com [9.149.37.212])
	by b06cxnps4074.portsmouth.uk.ibm.com (8.13.8/8.13.8/NCO v10.0) with ESMTP id r0VC7jBU26411222
	for <java-user@lucene.apache.org>; Thu, 31 Jan 2013 12:07:45 GMT
Received: from d06av01.portsmouth.uk.ibm.com (loopback [127.0.0.1])
	by d06av01.portsmouth.uk.ibm.com (8.14.4/8.13.1/NCO v10.0 AVout) with ESMTP id r0VC7rTv026350
	for <java-user@lucene.apache.org>; Thu, 31 Jan 2013 05:07:53 -0700
Received: from d06ml319.portsmouth.uk.ibm.com (d06ml319.portsmouth.uk.ibm.com [9.149.76.146])
	by d06av01.portsmouth.uk.ibm.com (8.14.4/8.13.1/NCO v10.0 AVin) with ESMTP id r0VC7rZ8026344;
	Thu, 31 Jan 2013 05:07:53 -0700
Subject: Re: MMapDirectory performance - Are searchable field values contiguously
 stored in FS block?
X-KeepSent: 913B52BD:E8CA5B5F-C2257B04:00411E81;
 type=4; name=$KeepSent
To: Michael McCandless <lucene@mikemccandless.com>,
        java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 8.5.3 September 15, 2011
Message-ID: <OF913B52BD.E8CA5B5F-ONC2257B04.00411E81-C2257B04.0042A3D3@il.ibm.com>
From: Gili Nachum <GILIN@il.ibm.com>
Date: Thu, 31 Jan 2013 14:07:53 +0200
X-MIMETrack: Serialize by Router on D06ML319/06/M/IBM(Release 8.5.3 ZX853HP5|January 12, 2012) at
 31/01/2013 14:07:44
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
x-cbid: 13013112-2966-0000-0000-0000069B65AE
X-Virus-Checked: Checked by ClamAV on apache.org


Hi Mike,

So, when loading the results I want to return (say 10 documents), if not
all docs fit in RAM, I would incur up to 10 individual disk seek
operations. Which will kill my performance. Is that correct?

Considering what are my alternatives:
1. Create another separate lean index that would fit in RAM.
2. Keep stored fields to a minimum, store non frequent accessed store
fields outside of Lucene.

In this particular use case, it would have really helped if I could order
Lucene which stored fields should be eagerly read loading a document, and
which should be lazy loaded from else where in the disk. Thereby fitting
into memory those stored fields that are frequently needed.
I guess my use case is too specific?

Gili.


On Wed, Jan 23, 2013 at 8:59 AM, Michael McCandless
<lucene@mikemccandless.com> wrote:

Are the additional rarely used 48 fields used for searching? Or, for
looking up stored fields?


If it's for searching then you should see good locality (efficient use of
the OS's IO cache) from the posting lists: each field's postings are stored
in a single chunk of the files, then the next field's postings, etc. Ie the
storage is "column stride" (if columns are fields and rows are documents).


But for stored fields, or term vectors, which are "row stride", you won't
see efficient use of the OS's IO cache.


Mike McCandless


http://blog.mikemccandless.com


On Wed, Jan 23, 2013 at 7:59 AM, Gili Nachum <GIL...@il.ibm.com> wrote:


Hi,


I have a search workload that focuses on two fields in my 1GB index. I get
very good performance when loaded the index via MmapDirectory. I attribute
this performance to the Operating System File System (FS OS) cache, that
keeps the most recently used FS blocks RAM resident.


I would like to add 50 more fields to the index, increasing it size to
~50GB, A key factor is that these additional fields will be queried very
rarely. Given this increase in index size, should I expect lower
Queries/Sec rate for the original search workload (that doesn't use the new
fields)?


I would assume that if the values of each searchable field are stored in a
different set of FS blocks, then the 50 additional fields would make no
difference for the OS FS cache, as it would continue to behave like before,
keeping in RAM those most used FS blocks. On the other hand, if values from
different fields share the same FS blocks, then the hot 2 fields values
will be to scattered acrossed the FS the OS cache useless. degradating
performance back to I/O bounded.


Which is the case with Lucene 3.6?


Thanks. Gili Nachum.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54975-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jan 31 12:08:36 2013
Return-Path: <java-user-return-54975-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id B0CDCE24B
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 31 Jan 2013 12:08:36 +0000 (UTC)
Received: (qmail 31159 invoked by uid 500); 31 Jan 2013 12:08:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31112 invoked by uid 500); 31 Jan 2013 12:08:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31102 invoked by uid 99); 31 Jan 2013 12:08:34 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Jan 2013 12:08:34 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.128.169] (HELO mail-ve0-f169.google.com) (209.85.128.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Jan 2013 12:08:27 +0000
Received: by mail-ve0-f169.google.com with SMTP id 15so147317vea.28
        for <java-user@lucene.apache.org>; Thu, 31 Jan 2013 04:08:07 -0800 (PST)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=x-received:mime-version:in-reply-to:references:from:date:message-id
         :subject:to:content-type:x-gm-message-state;
        bh=IpaHf5CouD7O6Mx5jJSm1AHUdCjqt6LbFlCWQdWIYYg=;
        b=BQGbilIGBQ338WeepE2yuxeW7M0DreE8bfHXMP91OlvQttU2KSxqqFbsgkelKCHrzW
         jU96OwbrdvurNEKBE/xtawCyH3OFj0rpWZDchlHZIgIR1GcFoTSbrkb9Lf5YFkDfF8UO
         DJ2H7V8USxwXSGzl/t9wgM2+4BnlH7ZAff8G7SMHfzw689Ek+nyNo3+1K7xu3LfrdP1n
         +HQ0SZDPdjHqOCmoaI9VD0TIN8j1ChSB4l5kg9zr3Urkso2vJDr31oJCe24OVVfJeMQe
         2NtHsL4Il5yNRJUWppvO5WIhnhSdD90baGaCX0eaiqomCyhkjg+9B13VV9rGeJZLm2ut
         oo0Q==
X-Received: by 10.58.152.169 with SMTP id uz9mr3519960veb.7.1359634087091;
 Thu, 31 Jan 2013 04:08:07 -0800 (PST)
MIME-Version: 1.0
Received: by 10.220.123.197 with HTTP; Thu, 31 Jan 2013 04:07:47 -0800 (PST)
In-Reply-To: <CAJf3Rj14Kbv97rQy_rJM2iXCfA8UOY=Bq4r7st+PCrBE4B-Hhw@mail.gmail.com>
References: <CAJf3Rj14Kbv97rQy_rJM2iXCfA8UOY=Bq4r7st+PCrBE4B-Hhw@mail.gmail.com>
From: Michael McCandless <lucene@mikemccandless.com>
Date: Thu, 31 Jan 2013 07:07:47 -0500
Message-ID: <CAL8PwkZiw4iGy9rRmwrV38uheOnuY43JjcCv8fQETXpMfKRqRg@mail.gmail.com>
Subject: Re: How to get field names and types from an IndexSearcher
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Gm-Message-State: ALoCoQljEBIjCnMVIVxJRUwg1jieU5NkwcI7sS0bTEojtPNqFnlXkOcl1NEOYQGL8yXowABSdwYh
X-Virus-Checked: Checked by ClamAV on apache.org

Getting the FieldInfos from each AtomicReader is the right approach!

But, FieldInfos won't tell you which XXXField class was used for the
indexing: that information is not fully preserved ...

Mike McCandless

http://blog.mikemccandless.com

On Thu, Jan 31, 2013 at 6:33 AM, Rolf Veen <rolf.veen@gmail.com> wrote:
> Hello, all.
>
> I want to get a list of field names and types out of an IndexSearcher
> or IndexReader (not necesarily Atomic). By type I mean if it was
> stored as StringField, LongField, etc. Is this possible ?
>
> I could get the field names this way, probably not the simplest one
> to get a unified field list:
>
> IndexReader reader = searcher.getIndexReader();
>
> for (AtomicReaderContext rc : reader.leaves()) {
>     AtomicReader ar = rc.reader();
>     FieldInfos fis = ar.getFieldInfos();
>     for (FieldInfo fi : fis)
>       System.out.println(fi.name);
> }
>
>
> Kind regards,
> Rolf.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54976-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jan 31 12:14:25 2013
Return-Path: <java-user-return-54976-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 289F8E42B
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 31 Jan 2013 12:14:25 +0000 (UTC)
Received: (qmail 48763 invoked by uid 500); 31 Jan 2013 12:14:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48685 invoked by uid 500); 31 Jan 2013 12:14:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48654 invoked by uid 99); 31 Jan 2013 12:14:21 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Jan 2013 12:14:21 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.212.41] (HELO mail-vb0-f41.google.com) (209.85.212.41)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Jan 2013 12:14:15 +0000
Received: by mail-vb0-f41.google.com with SMTP id l22so1710205vbn.28
        for <java-user@lucene.apache.org>; Thu, 31 Jan 2013 04:13:54 -0800 (PST)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=x-received:mime-version:in-reply-to:references:from:date:message-id
         :subject:to:cc:content-type:x-gm-message-state;
        bh=AaFnnguuRXZwJc2DLhFg2ZhN+C+R5OhI3d2EdXGpfPA=;
        b=PEc8DexUBrT1+K3CyO4SdFh93GYbZOquaIOX6dF8t9IDi3gzkqLKOZOC5+4TlartUw
         UKM78xxQs9vlSEi5q7dAP004B3rgSZV6Ll1NNQmTpTAhhdlHvQcg0XX4C0XSR+3vef+S
         5qGtZwOPy+NuykwIeMZBrpp0RjxJqFve+5+UedZI/WbM5wDIMeV/yR/oZE92k3/kc/C0
         vMvBYJcIV/beKN4grgA1w3R+b0Jt/hJqAwcK3Rv3oPczr/zekxFqj4TgC4xIrnpub8iA
         gDff7LHkM/ioLYNwVCEYkh9CR0N7p7B4Eyg3h8EmX7bVvB98D7Q1XysCYq9OUEO97UUF
         x5Nw==
X-Received: by 10.220.241.141 with SMTP id le13mr7698102vcb.26.1359634434159;
 Thu, 31 Jan 2013 04:13:54 -0800 (PST)
MIME-Version: 1.0
Received: by 10.220.123.197 with HTTP; Thu, 31 Jan 2013 04:13:34 -0800 (PST)
In-Reply-To: <OF913B52BD.E8CA5B5F-ONC2257B04.00411E81-C2257B04.0042A3D3@il.ibm.com>
References: <OF913B52BD.E8CA5B5F-ONC2257B04.00411E81-C2257B04.0042A3D3@il.ibm.com>
From: Michael McCandless <lucene@mikemccandless.com>
Date: Thu, 31 Jan 2013 07:13:34 -0500
Message-ID: <CAL8PwkYEvSD96xsPDR+N6Z7Z3rVVJhdRy3BuC_t+5LbXsVGWnA@mail.gmail.com>
Subject: Re: MMapDirectory performance - Are searchable field values
 contiguously stored in FS block?
To: Gili Nachum <GILIN@il.ibm.com>
Cc: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Gm-Message-State: ALoCoQnLsoqiNuEa/1VFr4+PJTxQYOmOHZvl6G+XKM9vHUzObvRVoNlf1DZojqISoMe2awdkXm26
X-Virus-Checked: Checked by ClamAV on apache.org

On Thu, Jan 31, 2013 at 7:07 AM, Gili Nachum <GILIN@il.ibm.com> wrote:

> So, when loading the results I want to return (say 10 documents), if not
> all docs fit in RAM, I would incur up to 10 individual disk seek
> operations. Which will kill my performance. Is that correct?

Yes, 10 seeks, and that may or may not kill your performance ...
depends on how fast your disks are (eg SSD seek cost is minor).

Also note that this is not an MMapDirectory problem: any time your
index cannot fit in RAM, no matter which directory impl you use,
you'll be seeking.

> Considering what are my alternatives:
> 1. Create another separate lean index that would fit in RAM.
> 2. Keep stored fields to a minimum, store non frequent accessed store
> fields outside of Lucene.

You could also use DocValues (in 4.0/4.1, but API is likely changing
in 4.2), which store fields "column stride".  This way your rarely
accessed fields would pay the seek cost but your commonly accessed
fiedls, if htey are small enough, could fit into available RAM.

> In this particular use case, it would have really helped if I could order
> Lucene which stored fields should be eagerly read loading a document, and
> which should be lazy loaded from else where in the disk. Thereby fitting
> into memory those stored fields that are frequently needed.
> I guess my use case is too specific?

You could also make a custom StoredFieldsFormat (part of your Codec)
that does exactly this.

Mike McCandless

http://blog.mikemccandless.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54977-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jan 31 12:28:29 2013
Return-Path: <java-user-return-54977-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 0D7EBE98C
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 31 Jan 2013 12:28:29 +0000 (UTC)
Received: (qmail 91715 invoked by uid 500); 31 Jan 2013 12:28:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91490 invoked by uid 500); 31 Jan 2013 12:28:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91464 invoked by uid 99); 31 Jan 2013 12:28:26 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Jan 2013 12:28:26 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 209.85.128.54 as permitted sender)
Received: from [209.85.128.54] (HELO mail-qe0-f54.google.com) (209.85.128.54)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Jan 2013 12:28:20 +0000
Received: by mail-qe0-f54.google.com with SMTP id 1so1229515qeb.13
        for <java-user@lucene.apache.org>; Thu, 31 Jan 2013 04:28:00 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:x-received:in-reply-to:references:date:message-id
         :subject:from:to:content-type;
        bh=Zzhr5saNeY4xZ1rTwJ2A4ilKoLSn4tqWBFIEQ/42NS8=;
        b=pLZN/HRWbewVv7+GojEOGbMHOJBwn7y50rQskrd8VXYdwcwHJ7QnwvhX6irDWJPj0V
         sfwVj2m+ACvy4WiBatYLRHVlLmsSrODVi+DhzVJRBYXWuJ+6Ba+QF3zhgrBBufgbu3Nc
         ssjgVChBZAAOOyg3hDvEGA7SiDKE0lC4Bg89UDt3XpH9ArLUW1X8tDcsguvy3fuBMo8u
         FNZm6zuBZLMlEDLPs/5sc51yXuotxoXK7ArkhFqezxoqeEqYPGwRrSXdbY7blGraZQy8
         D5oQxY36dBu0B92QENnt9iAHHn8BU3MkTXQHl/dcQYBp2jmzaT7ytH9b8QunXyhkVOfR
         YMKg==
MIME-Version: 1.0
X-Received: by 10.49.62.42 with SMTP id v10mr10250179qer.2.1359635279927; Thu,
 31 Jan 2013 04:27:59 -0800 (PST)
Received: by 10.49.12.240 with HTTP; Thu, 31 Jan 2013 04:27:59 -0800 (PST)
In-Reply-To: <8F0D0142CA7ECC4287A9EC1BD8CB880C1927BEEF64@USLVDCMBVP01.ingramcontent.com>
References: <8F0D0142CA7ECC4287A9EC1BD8CB880C1927BEEF64@USLVDCMBVP01.ingramcontent.com>
Date: Thu, 31 Jan 2013 07:27:59 -0500
Message-ID: <CAN4YXvdVSqoCjrB=CnyTAhapOse+g-XE1JKiZ8_-reDg=uiYyg@mail.gmail.com>
Subject: Re: Real-time Get and Atomic Updates for SolrJ
From: Erick Erickson <erickerickson@gmail.com>
To: java-user <java-user@lucene.apache.org>
Content-Type: multipart/alternative; boundary=047d7bacb8f0e2598004d494c1bf
X-Virus-Checked: Checked by ClamAV on apache.org

--047d7bacb8f0e2598004d494c1bf
Content-Type: text/plain; charset=ISO-8859-1

I haven't used it myself, but I did find this for atomic updates:
http://www.mumuio.com/solrj-4-0-0-alpha-atomic-updates/

Don't know if there really is need for specific support in SolrJ for RTG,
isn't that all over on the Solr side and automagic?

Best
Erick


On Wed, Jan 30, 2013 at 5:47 PM, Dyer, James
<James.Dyer@ingramcontent.com>wrote:

> Does anyone know if convenient support for Real-time Get and Atomic
> Updates have been implemented for SolrJ?  Is there a code sample somewhere?
>
> James Dyer
> Ingram Content Group
> (615) 213-4311
>

--047d7bacb8f0e2598004d494c1bf--

From java-user-return-54978-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jan 31 12:31:57 2013
Return-Path: <java-user-return-54978-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 98523E1B5
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 31 Jan 2013 12:31:57 +0000 (UTC)
Received: (qmail 102 invoked by uid 500); 31 Jan 2013 12:31:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99787 invoked by uid 500); 31 Jan 2013 12:31:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99699 invoked by uid 99); 31 Jan 2013 12:31:54 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Jan 2013 12:31:54 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of rolf.veen@gmail.com designates 209.85.220.45 as permitted sender)
Received: from [209.85.220.45] (HELO mail-pa0-f45.google.com) (209.85.220.45)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Jan 2013 12:31:49 +0000
Received: by mail-pa0-f45.google.com with SMTP id bg2so1711456pad.18
        for <java-user@lucene.apache.org>; Thu, 31 Jan 2013 04:31:29 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=x-received:mime-version:in-reply-to:references:from:date:message-id
         :subject:to:content-type;
        bh=uW3rz2jR4MQUxoCAnsNBoJubJP6xMBqculpNXAGImEY=;
        b=kKfzo4pMUY1mt1btVMooPg47+Q0uEl4z3e89Y8FT5ejxgP7lnBnp+o2PkMpfabT18p
         48KO7eV4woF2Fztb8Z9kC7cbcrrU67FchEYe96NMHHqV2cZw7v5jkpHht4+wGRyekZ0r
         uAJTijwjRwxbbP65uxpe+gPZHGHo1qGT4x8UjcAgSAn0bYTIm6aN7aCUd6QLB8iWh1eA
         azgGmrv3XAIH+es3LKFFvZOo/JUqfRICR+AZ/XB3wSKrxm8vn4loPK5A7l/bD3LhJikW
         3S/x3pScauuw9uF1q1sE+bpYPlnwMMaU3Brgey0efURvNO5jAu/VJvo34/8QDhXuuQlf
         igDQ==
X-Received: by 10.68.248.70 with SMTP id yk6mr21553029pbc.160.1359635489272;
 Thu, 31 Jan 2013 04:31:29 -0800 (PST)
MIME-Version: 1.0
Received: by 10.68.134.225 with HTTP; Thu, 31 Jan 2013 04:31:09 -0800 (PST)
In-Reply-To: <CAL8PwkZiw4iGy9rRmwrV38uheOnuY43JjcCv8fQETXpMfKRqRg@mail.gmail.com>
References: <CAJf3Rj14Kbv97rQy_rJM2iXCfA8UOY=Bq4r7st+PCrBE4B-Hhw@mail.gmail.com>
 <CAL8PwkZiw4iGy9rRmwrV38uheOnuY43JjcCv8fQETXpMfKRqRg@mail.gmail.com>
From: Rolf Veen <rolf.veen@gmail.com>
Date: Thu, 31 Jan 2013 13:31:09 +0100
Message-ID: <CAJf3Rj2Am3A1C4BMRHjH41MvH1_A2s13RJsh87-j8DpjBkhnKA@mail.gmail.com>
Subject: Re: How to get field names and types from an IndexSearcher
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
X-Virus-Checked: Checked by ClamAV on apache.org

Thank you, Mike.

I didn't state why I need this. I want to be able to send
a query to some QueryParser that understands "field:1"
regardless if 'field' was added as StringField or LongField,
for example. I do not want to rely on schema information
if I can avoid it, and rather use a smart QueryParser.
What would be the best approach to implement this ?

Kind regards,
Rolf.


On Thu, Jan 31, 2013 at 1:07 PM, Michael McCandless
<lucene@mikemccandless.com> wrote:
> Getting the FieldInfos from each AtomicReader is the right approach!
>
> But, FieldInfos won't tell you which XXXField class was used for the
> indexing: that information is not fully preserved ...
>
> Mike McCandless
>
> http://blog.mikemccandless.com
>
> On Thu, Jan 31, 2013 at 6:33 AM, Rolf Veen <rolf.veen@gmail.com> wrote:
>> Hello, all.
>>
>> I want to get a list of field names and types out of an IndexSearcher
>> or IndexReader (not necesarily Atomic). By type I mean if it was
>> stored as StringField, LongField, etc. Is this possible ?
>>
>> I could get the field names this way, probably not the simplest one
>> to get a unified field list:
>>
>> IndexReader reader = searcher.getIndexReader();
>>
>> for (AtomicReaderContext rc : reader.leaves()) {
>>     AtomicReader ar = rc.reader();
>>     FieldInfos fis = ar.getFieldInfos();
>>     for (FieldInfo fi : fis)
>>       System.out.println(fi.name);
>> }
>>
>>
>> Kind regards,
>> Rolf.
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54979-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jan 31 12:57:11 2013
Return-Path: <java-user-return-54979-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 5F663E24C
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 31 Jan 2013 12:57:11 +0000 (UTC)
Received: (qmail 75946 invoked by uid 500); 31 Jan 2013 12:57:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75877 invoked by uid 500); 31 Jan 2013 12:57:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75616 invoked by uid 99); 31 Jan 2013 12:56:57 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Jan 2013 12:56:57 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of trejkaz@trypticon.org designates 209.85.212.49 as permitted sender)
Received: from [209.85.212.49] (HELO mail-vb0-f49.google.com) (209.85.212.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Jan 2013 12:56:50 +0000
Received: by mail-vb0-f49.google.com with SMTP id s24so1690931vbi.8
        for <java-user@lucene.apache.org>; Thu, 31 Jan 2013 04:56:29 -0800 (PST)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=x-received:mime-version:x-received:in-reply-to:references:date
         :message-id:subject:from:to:content-type:x-gm-message-state;
        bh=EsowrcG+TWE43JGnlNVhcw5GpsqKbURYrliot3H8n4Q=;
        b=fWS7+2Yc8IctANBZ6cTUTUIIYqm6/LlhJy6wDIS9FCuY1tA7HxEI/FuRFGe0CeqVPG
         G14tJHAF3Se1GT1NkIv0zoO/1D9qubN3qzQBnzNueVA6YTXcNh0LIJoPiT+a/+6Db+oO
         ddFp6+4UYxDH+5RIJSHxHho6vd3jTr6o3c3MUOkvgwCOxb9RtiSyeohjH7TtkbyD78Pa
         OECuuPBDYD264ThcaSgZKTHlU0L6/0xYeQqBbuzi2vAOWdM27L70qABQpPjm1oSJssE2
         VcuAyp7TtCXYrdu0aHTfFelFIkQ/Fv2PGdBYAoJgQvD1EWcvYPFLLgyBvHLt5J0GYrjl
         UxWg==
X-Received: by 10.52.95.37 with SMTP id dh5mr7128271vdb.26.1359636989297;
        Thu, 31 Jan 2013 04:56:29 -0800 (PST)
Received: from mail-ve0-f181.google.com (mail-ve0-f181.google.com [209.85.128.181])
        by mx.google.com with ESMTPS id p20sm4570157vdj.6.2013.01.31.04.56.27
        (version=TLSv1 cipher=ECDHE-RSA-RC4-SHA bits=128/128);
        Thu, 31 Jan 2013 04:56:28 -0800 (PST)
Received: by mail-ve0-f181.google.com with SMTP id d10so1923271vea.26
        for <java-user@lucene.apache.org>; Thu, 31 Jan 2013 04:56:27 -0800 (PST)
MIME-Version: 1.0
X-Received: by 10.220.239.71 with SMTP id kv7mr7925173vcb.46.1359636987362;
 Thu, 31 Jan 2013 04:56:27 -0800 (PST)
Received: by 10.220.138.77 with HTTP; Thu, 31 Jan 2013 04:56:27 -0800 (PST)
In-Reply-To: <CAL8Pwka3bomJqXC6YrKHv5wLKR26217TqQrXbsdUE-YuuBkaFA@mail.gmail.com>
References: <CAMMjTZz_TS1fT+7tGn9D2M9X0B7Oqk1DrRwNpkr_RsLsU9jCVA@mail.gmail.com>
	<CAL8Pwka3bomJqXC6YrKHv5wLKR26217TqQrXbsdUE-YuuBkaFA@mail.gmail.com>
Date: Thu, 31 Jan 2013 23:56:27 +1100
Message-ID: <CADuAvzdViyJJEDvnXBhuCVHYC0jRyxkBmrx0PxfUE=OWnAi4qQ@mail.gmail.com>
Subject: Re: How to properly use updatedocument in lucene.
From: Trejkaz <trejkaz@trypticon.org>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
X-Gm-Message-State: ALoCoQkG4lZU7MPbVIK6LTSs+CK8pxgdznWuyO1K9EBaFnJje9uJx1O/SMbFAZ4WjL+/eSTY1WKu
X-Virus-Checked: Checked by ClamAV on apache.org

On Thu, Jan 31, 2013 at 11:05 PM, Michael McCandless
<lucene@mikemccandless.com> wrote:
> It's confusing, but you should never try to re-index a document you
> retrieved from a searcher, because certain index-time details (eg,
> whether a field was tokenized) are not preserved in the stored
> document.
>
> Instead, you should re-build the document yourself, setting the right
> details per-Field, and then re-index that.

Just to check about this - if you use the same PerFieldAnalyzerWrapper
when indexing the new document, doing it this way is safe, right?
(With the exception of fields you originally indexed which weren't
stored at all, of course... which would have to be reconstructed from
some other location.)

TX

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54980-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jan 31 13:00:55 2013
Return-Path: <java-user-return-54980-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 9A2D2E281
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 31 Jan 2013 13:00:55 +0000 (UTC)
Received: (qmail 93169 invoked by uid 500); 31 Jan 2013 13:00:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92291 invoked by uid 500); 31 Jan 2013 13:00:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92024 invoked by uid 99); 31 Jan 2013 13:00:51 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Jan 2013 13:00:51 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of trejkaz@trypticon.org designates 209.85.128.176 as permitted sender)
Received: from [209.85.128.176] (HELO mail-ve0-f176.google.com) (209.85.128.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Jan 2013 13:00:42 +0000
Received: by mail-ve0-f176.google.com with SMTP id jz10so1941687veb.7
        for <java-user@lucene.apache.org>; Thu, 31 Jan 2013 05:00:22 -0800 (PST)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=x-received:mime-version:x-received:date:message-id:subject:from:to
         :content-type:x-gm-message-state;
        bh=a8E4vRceiKMZ5sMvNkbug3UCKiT+mywcBCUsy0CqjL8=;
        b=D0GtiymTbzzYR3JzBRYdrwMzBSs8VwzghBbVrInapNcxp066O0jSs9WWbmlG0onF76
         oDR/vGtY9Lf3Paia28x83J0urSmJ+CNYJfeZvtdRi/r7LvcqqJx0+yXVD9rX4ICMG0WB
         H6u9atx6Lqt6zMp6VFQJ8gvqby7ni25nuRwkkGPYTL3B2DSkrFySmsik8WE/zTHpKnv/
         3ZwQh/TT3qQybgZcNky8xNFbAepaiW4iHcm38Lv3cx2zyu/Tq80f0Z9j66ORpC73TRZS
         wjX6QVFWonTpc6b6fInohEK39acsdbePJX7O/sJQZj6md5ApGzggLASNlu2aFlWMBb+G
         X8QQ==
X-Received: by 10.220.241.141 with SMTP id le13mr7807483vcb.26.1359637221707;
        Thu, 31 Jan 2013 05:00:21 -0800 (PST)
Received: from mail-ve0-f174.google.com (mail-ve0-f174.google.com [209.85.128.174])
        by mx.google.com with ESMTPS id h11sm2886661vdj.12.2013.01.31.05.00.20
        (version=TLSv1 cipher=ECDHE-RSA-RC4-SHA bits=128/128);
        Thu, 31 Jan 2013 05:00:21 -0800 (PST)
Received: by mail-ve0-f174.google.com with SMTP id c13so1938284vea.19
        for <java-user@lucene.apache.org>; Thu, 31 Jan 2013 05:00:20 -0800 (PST)
MIME-Version: 1.0
X-Received: by 10.52.34.176 with SMTP id a16mr7111350vdj.44.1359637220193;
 Thu, 31 Jan 2013 05:00:20 -0800 (PST)
Received: by 10.220.138.77 with HTTP; Thu, 31 Jan 2013 05:00:20 -0800 (PST)
Date: Fri, 1 Feb 2013 00:00:20 +1100
Message-ID: <CADuAvzeqiyUMJOrKeikciYUysnhWbBbWcMEkcb1rFSxPHW9Qew@mail.gmail.com>
Subject: Migrating from using doc IDs to using application IDs from the FieldCache
From: Trejkaz <trejkaz@trypticon.org>
To: Lucene Users Mailing List <java-user@lucene.apache.org>
Content-Type: text/plain; charset=UTF-8
X-Gm-Message-State: ALoCoQl4UIXOO9+AEtt+7KkKA2oA+ZX1w+2QbBj+vvwFSHj20Pb7ZD3oEPKaWSCYz+BeJOSEhqA5
X-Virus-Checked: Checked by ClamAV on apache.org

Hi all.

We have an application which has been around for so long that it's
still using doc IDs to key to an external database.

Obviously this won't work forever (even in Lucene 3.x we had to use a
custom merge policy to keep it working) so we want to introduce
application IDs eventually. We have two potential paths here:

  1. Use our existing GUID field as the new unique ID and migrate to
that (with the huge drawback that indexing GUID columns on the
database is much, much slower than the current int column.)
  2. Introduce a new application ID (either int or long) and somehow
insert that into every document.

The time it would take to pull every document out, add a field for the
ID and index it again is too long to be desirable, so I'm wondering:
is there some way we could add this field to every document without
reindexing? Keeping Lucene 3.x as the limitation, that is... our
2.x-created indexes presumably won't open at all in 4.x without
significant work.

TX

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54981-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jan 31 14:05:13 2013
Return-Path: <java-user-return-54981-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 84269E1A0
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 31 Jan 2013 14:05:13 +0000 (UTC)
Received: (qmail 99066 invoked by uid 500); 31 Jan 2013 14:05:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98980 invoked by uid 500); 31 Jan 2013 14:05:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98953 invoked by uid 99); 31 Jan 2013 14:05:10 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Jan 2013 14:05:10 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.160.54] (HELO mail-pb0-f54.google.com) (209.85.160.54)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Jan 2013 14:05:02 +0000
Received: by mail-pb0-f54.google.com with SMTP id rr4so1645575pbb.41
        for <java-user@lucene.apache.org>; Thu, 31 Jan 2013 06:04:41 -0800 (PST)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=x-received:message-id:date:from:user-agent:mime-version:to:subject
         :references:in-reply-to:content-type:content-transfer-encoding
         :x-gm-message-state;
        bh=XJhlypsW9cBeCW1gFg2R7Kfyms1YTWR01PIy+EvuAGU=;
        b=BQ8IPfuyn/iPVwzpAMEKTKlwZMprWmU7WL0osfa61uqYq1+jJdc9L134rbInKGBprZ
         DKz9UBwQpLHqWffrX0SOtV0bt+e3aEutQzVOSgISa7+YirLbv2A8AjPIjb8bn9Pk2LBu
         eNBVLLTe8JAgAFxPKf/jUv/jCXWhmNjcVvYhANT3dxqT8EuZqK/CFLiJy/OygmWDwJxK
         5jVvnm81P8UecB/CAdKcj1hZ7pUnReB2USu4fSx3qjOkhqugC5IE8/h1uFXbCxmHLuIN
         w0XwV0uIoeA9Pak8DEYxmZOZ4mzPb8/JNBkHdZPxamdEQ70buUEO+1ae4tO/+oYz6FZu
         17Bg==
X-Received: by 10.68.135.67 with SMTP id pq3mr22591514pbb.127.1359641081739;
        Thu, 31 Jan 2013 06:04:41 -0800 (PST)
Received: from jajo.local (ip68-226-93-53.ri.ri.cox.net. [68.226.93.53])
        by mx.google.com with ESMTPS id gj1sm5121728pbc.11.2013.01.31.06.04.39
        (version=TLSv1 cipher=ECDHE-RSA-RC4-SHA bits=128/128);
        Thu, 31 Jan 2013 06:04:41 -0800 (PST)
Message-ID: <510A79F2.8070605@andrewgilmartin.com>
Date: Thu, 31 Jan 2013 09:04:34 -0500
From: Andrew Gilmartin <andrew@andrewgilmartin.com>
User-Agent: Postbox 3.0.7 (Macintosh/20130119)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: How to find related words =?UTF-8?B?77yf?=
References: <1359566857757-4037462.post@n3.nabble.com> <4FF51336E6EE44E1BDEC198EAEAB9BB4@JackKrupansky> <1359594974931-4037583.post@n3.nabble.com>
In-Reply-To: <1359594974931-4037583.post@n3.nabble.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Gm-Message-State: ALoCoQlspiw3waOFxT4WZh3oEt0bfDXYMlYxxR6/q9iNhCxJyH3D0SyhrazcNhueoklyAnRib8Kk
X-Virus-Checked: Checked by ClamAV on apache.org

wgggfiy wrote:
> en, it seems nice, but I'm puzzled by you and Andrew Gilmartina above,
> what's the difference between you guys ?

The different is that similar documents do not give you similar terms. Similar documents can show a correlation of terms -- ie, whereever Lucene is mentioned so is Solr and Hadoop -- but in no way does this mean that the terms are similar. Accumulating similar and/or synonymous terms is a manual process. I am sure there are text mining tools/algorithms that make discoveries, but I do not know about these. (I am a journeyman programmer not a researcher.) If anyone does know about them, please share with this list.

-- Andrew

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54982-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jan 31 14:24:44 2013
Return-Path: <java-user-return-54982-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id BEF5DE5BE
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 31 Jan 2013 14:24:44 +0000 (UTC)
Received: (qmail 81347 invoked by uid 500); 31 Jan 2013 14:24:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81292 invoked by uid 500); 31 Jan 2013 14:24:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81264 invoked by uid 99); 31 Jan 2013 14:24:40 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Jan 2013 14:24:40 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of SRS0=bL+YGb=LY=basetechnology.com=jack@yourhostingaccount.com designates 65.254.253.56 as permitted sender)
Received: from [65.254.253.56] (HELO mailout07.yourhostingaccount.com) (65.254.253.56)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Jan 2013 14:24:32 +0000
Received: from mailscan15.yourhostingaccount.com ([10.1.15.15] helo=mailscan15.yourhostingaccount.com)
	by mailout07.yourhostingaccount.com with esmtp (Exim)
	id 1U0v3j-0007T8-AX
	for java-user@lucene.apache.org; Thu, 31 Jan 2013 09:24:11 -0500
Received: from impout01.yourhostingaccount.com ([10.1.55.1] helo=impout01.yourhostingaccount.com)
	by mailscan15.yourhostingaccount.com with esmtp (Exim)
	id 1U0v3i-0000eN-Cy
	for java-user@lucene.apache.org; Thu, 31 Jan 2013 09:24:10 -0500
Received: from authsmtp16.yourhostingaccount.com ([10.1.18.16])
	by impout01.yourhostingaccount.com with NO UCE
	id ueQA1k0030LoD9W01eQAUk; Thu, 31 Jan 2013 09:24:10 -0500
X-Authority-Analysis: v=2.0 cv=EJGEIilC c=1 sm=1
 a=yH02RjTyxywMAIqhn74x1Q==:17 a=aQzbgH187woA:10 a=_TSjD6-FiyQA:10
 a=3jZET7lWBKwA:10 a=jPJDawAOAc8A:10 a=IkcTkHD0fZMA:10 a=jvYhGVW7AAAA:8
 a=TKQlbPpERlQA:10 a=HDWgMBI4gAMA:10 a=mV9VRH-2AAAA:8 a=IoX8AVrRe-L50e1iI5EA:9
 a=QEXdDO2ut3YA:10 a=ltXMujfcukYoTVgNOHxvog==:117
X-EN-OrigOutIP: 10.1.18.16
X-EN-IMPSID: ueQA1k0030LoD9W01eQAUk
Received: from 207-237-113-14.c3-0.nyr-ubr1.nyr.ny.cable.rcn.com ([207.237.113.14] helo=JackKrupansky)
	by authsmtp16.yourhostingaccount.com with esmtpa (Exim)
	id 1U0v3i-0007Xb-1Q
	for java-user@lucene.apache.org; Thu, 31 Jan 2013 09:24:10 -0500
Message-ID: <6ED96CE6BC2241458F82C8B5C80B390E@JackKrupansky>
From: "Jack Krupansky" <jack@basetechnology.com>
To: <java-user@lucene.apache.org>
References: <1359566857757-4037462.post@n3.nabble.com> <4FF51336E6EE44E1BDEC198EAEAB9BB4@JackKrupansky> <1359594974931-4037583.post@n3.nabble.com> <510A79F2.8070605@andrewgilmartin.com>
In-Reply-To: <510A79F2.8070605@andrewgilmartin.com>
Subject: =?UTF-8?Q?Re:_How_to_find_related_words_=EF=BC=9F?=
Date: Thu, 31 Jan 2013 09:24:07 -0500
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="UTF-8";
	reply-type=response
Content-Transfer-Encoding: 8bit
X-Priority: 3
X-MSMail-Priority: Normal
Importance: Normal
X-Mailer: Microsoft Windows Live Mail 15.4.3555.308
X-MimeOLE: Produced By Microsoft MimeOLE V15.4.3555.308
X-EN-UserInfo: e0a4b55451ed9f27313ebf02e3d4348d:fc4a93e1349e680c52bdd723c0ab3ef6
X-EN-AuthUser: jack@basetechnology.com
Sender:  "Jack Krupansky" <jack@basetechnology.com>
X-EN-OrigIP: 207.237.113.14
X-EN-OrigHost: 207-237-113-14.c3-0.nyr-ubr1.nyr.ny.cable.rcn.com
X-Virus-Checked: Checked by ClamAV on apache.org

Oh, so you wanted "similar" words! You should have said so... your inquiry 
said you were looking for "related" words. So, which is it? More 
specifically, what exactly are you looking for, in terms of the semantics? 
In any case, "find similar" (MoreLikeThis) is about the best you can do out 
of the box.

-- Jack Krupansky

-----Original Message----- 
From: Andrew Gilmartin
Sent: Thursday, January 31, 2013 9:04 AM
To: java-user@lucene.apache.org
Subject: Re: How to find related words 

wgggfiy wrote:
> en, it seems nice, but I'm puzzled by you and Andrew Gilmartina above,
> what's the difference between you guys ?

The different is that similar documents do not give you similar terms. 
Similar documents can show a correlation of terms -- ie, whereever Lucene is 
mentioned so is Solr and Hadoop -- but in no way does this mean that the 
terms are similar. Accumulating similar and/or synonymous terms is a manual 
process. I am sure there are text mining tools/algorithms that make 
discoveries, but I do not know about these. (I am a journeyman programmer 
not a researcher.) If anyone does know about them, please share with this 
list.

-- Andrew

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54983-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jan 31 14:30:59 2013
Return-Path: <java-user-return-54983-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 47BBAEFF4
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 31 Jan 2013 14:30:59 +0000 (UTC)
Received: (qmail 8774 invoked by uid 500); 31 Jan 2013 14:30:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8639 invoked by uid 500); 31 Jan 2013 14:30:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8630 invoked by uid 99); 31 Jan 2013 14:30:56 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Jan 2013 14:30:56 +0000
X-ASF-Spam-Status: No, hits=0.3 required=5.0
	tests=FREEMAIL_REPLY,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of rcmuir@gmail.com designates 209.85.216.45 as permitted sender)
Received: from [209.85.216.45] (HELO mail-qa0-f45.google.com) (209.85.216.45)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Jan 2013 14:30:50 +0000
Received: by mail-qa0-f45.google.com with SMTP id g10so2878166qah.4
        for <java-user@lucene.apache.org>; Thu, 31 Jan 2013 06:30:29 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=x-received:mime-version:in-reply-to:references:from:date:message-id
         :subject:to:content-type:content-transfer-encoding;
        bh=Y6WeWy4b6qYtA1EKtjRnJkLIIgRTjbiJzpIXzbjX1FA=;
        b=Dxhc4P5wIf1lvqRcUEGkHFxXp91NhuKzXNYFeP1WjcbbaeKKTuDpzEX3OqI95QE2jz
         VraWURry6vK+tiWGE1YiAHC4AdxMVyreR4hoRVwm6pfAJk4PQ+7arfCjBtwpbnHJkYMn
         z66Eu9BZBiCqS+kwNKkULljk9TD9gIXdjgh8mTtethSfw27/O9+zwDcI/YUrWYV0VeBu
         CSxLltydgZPV1xppP742cn/qFYZAwUJKU9uFpthZ2torQr+X7cAJZG36QQzlKKKY/LeX
         9XBlAEL4Diy7K7MdpiPAdW2KhIuyxEaiPM+2QBHmSzZTW2h3umUkQY01/94LQ8R5wxuQ
         39nQ==
X-Received: by 10.224.194.74 with SMTP id dx10mr9217269qab.1.1359642629486;
 Thu, 31 Jan 2013 06:30:29 -0800 (PST)
MIME-Version: 1.0
Received: by 10.49.103.198 with HTTP; Thu, 31 Jan 2013 06:30:09 -0800 (PST)
In-Reply-To: <CAO7gJehOZm8Cs7wpPfq-cApdGzkNpy78WWez1dok8K+LzKC6Rw@mail.gmail.com>
References: <CAO7gJeizV5m43D_QaQaho24PjawfC217PeMwqD+KF-01UY26HA@mail.gmail.com>
 <CAEY5pxXtJCFrPgk8SkdK9ivuxZst-4eOvVNM4=0xsgcEgDJGzA@mail.gmail.com>
 <CAO7gJeg3AGsN=+GcKwpPdFyTTvAUku9bgPwQgP_JE6-p+HXyEw@mail.gmail.com>
 <CAEY5pxVUEM5NPgYfH=d7WCapL=ZfYxOjTy2yr1tNbqskBwSudw@mail.gmail.com>
 <CAPsWd+NPdvXeqot_hTvad-15VfFZC-whjUivbRSHCGC=Qsy3UA@mail.gmail.com>
 <CAO7gJehnBhiLvX6kZzBAE4W7-GS3i4kmZxnD1KN8-az9aFj3Rw@mail.gmail.com>
 <CAPsWd+OSLhNY9WYQ2h8QPr-xT+1k0Oo5dnEjc40a5JRndthL4w@mail.gmail.com>
 <CAO7gJej5L5wAj62KvBGyuVobnh9cQQ9xZwuttHvG=KCtk8Kf4A@mail.gmail.com>
 <005101cdfee1$6d99dff0$48cd9fd0$@thetaphi.de> <CAO7gJehOZm8Cs7wpPfq-cApdGzkNpy78WWez1dok8K+LzKC6Rw@mail.gmail.com>
From: Robert Muir <rcmuir@gmail.com>
Date: Thu, 31 Jan 2013 09:30:09 -0500
Message-ID: <CAOdYfZUBvD3tL1RhBHWwqM2r47f9fKfeRVBG4_ed8DBpx-LPmA@mail.gmail.com>
Subject: Re: CompressingStoredFieldsFormat doesn't show improvement
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

The top method here is your random string generation.

are you indexing random data?

On Thu, Jan 31, 2013 at 12:46 AM, arun k <arunk786@gmail.com> wrote:
> Hi,
>
> Please find the snapshots here.
> http://picpaste.com/Lucene3.0.2-G00Z5FfX.png
> http://picpaste.com/Lucene4.1-LsxpcQk0.png
>
> Arun
>
>
> On Wed, Jan 30, 2013 at 5:30 PM, Uwe Schindler <uwe@thetaphi.de> wrote:
>
>> Hi,
>>
>>
>>
>> there is nothing attached to your mail; maybe the mailing list software
>> removed it. Can you place it somewhere on the web (e.g. pastebin,=E2=80=
=A6)?
>>
>>
>>
>> Uwe
>>
>>
>>
>> -----
>>
>> Uwe Schindler
>>
>> H.-H.-Meier-Allee 63, D-28213 Bremen
>>
>>  <http://www.thetaphi.de/> http://www.thetaphi.de
>>
>> eMail: uwe@thetaphi.de
>>
>>
>>
>> From: arun k [mailto:arunk786@gmail.com]
>> Sent: Wednesday, January 30, 2013 12:04 PM
>> To: java-user
>> Subject: Re: CompressingStoredFieldsFormat doesn't show improvement
>>
>>
>>
>> Adrein,
>> Please find the attached profilers report.
>>
>>
>>
>> On Wed, Jan 30, 2013 at 3:35 PM, Adrien Grand <jpountz@gmail.com> wrote:
>>
>> On Wed, Jan 30, 2013 at 8:08 AM, arun k <arunk786@gmail.com> wrote:
>> > Adrein,
>> >
>> > I have created an index of size 370M of 1 million docs of 40 fields of=
 40
>> > chars and did the profiling.
>> > I see that the indexing and in particular the addDocument &
>> > ConcurrentMergeScheduler in 4.1 takes double the time compared to 3.0.=
2.
>>
>> Can you provide me with the detailed profiles?
>>
>>
>> > Looks like CompressionStoredFieldsFormat is of little use in my scenar=
io.
>>
>> You can can disable stored fields compression and use another
>> StoredFieldsFormat by defining a custom codec
>> (
>> http://lucene.apache.org/core/4_1_0/core/org/apache/lucene/codecs/packag=
e-summary.html#package_description
>> ).
>>
>>
>> --
>> Adrien
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54984-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jan 31 16:15:20 2013
Return-Path: <java-user-return-54984-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id B2388E36A
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 31 Jan 2013 16:15:20 +0000 (UTC)
Received: (qmail 93697 invoked by uid 500); 31 Jan 2013 16:15:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93454 invoked by uid 500); 31 Jan 2013 16:15:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93431 invoked by uid 99); 31 Jan 2013 16:15:17 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Jan 2013 16:15:17 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ishalyminov@yandex-team.ru designates 84.201.186.22 as permitted sender)
Received: from [84.201.186.22] (HELO forward4h.mail.yandex.net) (84.201.186.22)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Jan 2013 16:15:09 +0000
Received: from webcorp1h.yandex-team.ru (webcorp1h.yandex-team.ru [84.201.186.78])
	by forward4h.mail.yandex.net (Yandex) with ESMTP id 7B0181B2043F
	for <java-user@lucene.apache.org>; Thu, 31 Jan 2013 20:14:47 +0400 (MSK)
Received: from 127.0.0.1 (localhost.localdomain [127.0.0.1])
	by webcorp1h.yandex-team.ru (Yandex) with ESMTP id 505DF318006;
	Thu, 31 Jan 2013 20:14:47 +0400 (MSK)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yandex-team.ru;
	s=default; t=1359648887;
	bh=hi07whAGwJ1SHMiW8dojXSxfL5UWxNIAeFgNFgNVaR8=;
	h=From:To:Subject:Date;
	b=dI7qJQGVbdawfojqDCvjsbkyCj0Cn5K7OY35DZh92NuN8bW5wqd4jFnIqmHLmf9/A
	 ytOaLSkNL7WzWbeP9tjIj6uBTnPWPRGMD3/x96IT9VMxfuMc0PzOgjYyVpVykvyn/W
	 y5368SOJRoyZ+EzxgcNMNIvg3dhagh9xAfaXrVOE=
Received: from dhcp175-135-red.yandex.net (dhcp175-135-red.yandex.net [95.108.175.135]) by webcorp1h.yandex-team.ru with HTTP;
	Thu, 31 Jan 2013 20:14:46 +0400
From: Igor Shalyminov <ishalyminov@yandex-team.ru>
To: java-user@lucene.apache.org
Subject: Getting the number of all hits for the SpanQuery
MIME-Version: 1.0
Message-Id: <30661359648886@webcorp1h.yandex-team.ru>
X-Mailer: Yamail [ http://yandex.ru ] 5.0
Date: Thu, 31 Jan 2013 20:14:46 +0400
Content-Transfer-Encoding: 7bit
Content-Type: text/plain
X-Virus-Checked: Checked by ClamAV on apache.org

Hello!

I want to perform a SpanQuery and get the precise overall number of all hits throughout the entire index (i.e. if the query words combination appears multiple times in a document, I need that number counted).
I've found a method called SpanQuery.getSpans, but the way of using it in the stable release is somewhat changed (using it with just an IndexReader doesn't seem to be possible).

What is the way to do this now?

-- 
Best Regards,
Igor Shalyminov

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54985-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jan 31 18:40:07 2013
Return-Path: <java-user-return-54985-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 50744E1AF
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 31 Jan 2013 18:40:07 +0000 (UTC)
Received: (qmail 17399 invoked by uid 500); 31 Jan 2013 18:40:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17351 invoked by uid 500); 31 Jan 2013 18:40:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17341 invoked by uid 99); 31 Jan 2013 18:40:04 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Jan 2013 18:40:04 +0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,SPF_NEUTRAL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: 216.139.236.26 is neither permitted nor denied by domain of saisantoshi76@gmail.com)
Received: from [216.139.236.26] (HELO sam.nabble.com) (216.139.236.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Jan 2013 18:39:58 +0000
Received: from ben.nabble.com ([192.168.236.152])
	by sam.nabble.com with esmtp (Exim 4.72)
	(envelope-from <saisantoshi76@gmail.com>)
	id 1U0z2v-0004ny-U3
	for java-user@lucene.apache.org; Thu, 31 Jan 2013 10:39:37 -0800
Date: Thu, 31 Jan 2013 10:39:37 -0800 (PST)
From: saisantoshi <saisantoshi76@gmail.com>
To: java-user@lucene.apache.org
Message-ID: <1359657577920-4037766.post@n3.nabble.com>
Subject: IndexWriterConfig.OpenMode.CREATE vs OpenMode.APPEND (index files)
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

I am using the following below for creating the IndexWriter (for my
indexing):

IndexWriterConfig indexWriterConfig = new
IndexWriterConfig(Version.LUCENE_40,
                new LimitTokenCountAnalyzer(analyzer,
MAX_FIELD_SCAN_LENGTH));
        
if (create) {  // create will be trure for indexing first time and later
will be false for updating the existing index
                indexWriterConfig.setOpenMode(OpenMode.CREATE);
        } else {
            indexWriterConfig.setOpenMode(OpenMode.APPEND);
  }
        TieredMergePolicy mergePolicy = new TieredMergePolicy();
        indexWriterConfig.setMergePolicy(mergePolicy.setNoCFSRatio(1.0d));
         IndexWriter indexWriter = new IndexWriter(directory,
indexWriterConfig);

For creating the first time, index it is creating the following files:

_0.cfe
_0.cfs
_0.csi
segments.gen
segments_1

on subsequent updates, it is creating additional files like the below:

_0.cfe
_0.cfs
_0.csi
_1.cfe
_1.cfs
_1.csi
_0_1.del
_2.cfe
_2.cfs
_2.csi
segments.gen
segments_3

I am assuming that it should override the files initially created for
indexing:

should have just the following below files:

_2.cfe
_2.cfs
_2.csi
segments.gen
segments_3

Can someone please let me know if this is intended behavior or something
wrong with the way I am creating the IndexWriterConfig.

Appreciate if you could shed some light on this as the docs are not very
clear.

Thanks,
Sai.








--
View this message in context: http://lucene.472066.n3.nabble.com/IndexWriterConfig-OpenMode-CREATE-vs-OpenMode-APPEND-index-files-tp4037766.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54986-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jan 31 18:58:36 2013
Return-Path: <java-user-return-54986-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id E11B3E284
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 31 Jan 2013 18:58:35 +0000 (UTC)
Received: (qmail 91057 invoked by uid 500); 31 Jan 2013 18:58:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91002 invoked by uid 500); 31 Jan 2013 18:58:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90994 invoked by uid 99); 31 Jan 2013 18:58:33 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Jan 2013 18:58:33 +0000
X-ASF-Spam-Status: No, hits=1.3 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.128.171] (HELO mail-ve0-f171.google.com) (209.85.128.171)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Jan 2013 18:58:27 +0000
Received: by mail-ve0-f171.google.com with SMTP id b10so2278132vea.16
        for <java-user@lucene.apache.org>; Thu, 31 Jan 2013 10:58:06 -0800 (PST)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=x-received:mime-version:in-reply-to:references:from:date:message-id
         :subject:to:content-type:x-gm-message-state;
        bh=PfTkPKerrI5na/p49xB8xMRAofwyPKwyX5sO0VU4mcg=;
        b=AeCNWYZYYdwosw78z+kWkz6hKrtDd1x+3mbDODbzJT6lBNkUGtI9bUnGNbMJ5XoXeG
         O0BtDZ2yZGnKJVXX8Jsqf6kl5aRLwQ+7aGEC8OVDruf2ZWIaokYWTbek52OwE3N1C1eO
         tEWFAF6+jXQsvEpKXsl66K0PoViUjQl5OPQNdsPTBKqP7pz0gBBeckYbtYY3a7LSHwwm
         rdD44IGL1OO78AZyXkDpS2G6zAVAUR85dm5WwsXzA+6TRL10m+I8cSCdOF7a/6tUN6sg
         xag6LA83izWpqcUWqqVxU6h2v0KIcUWlab19PV8KJ+62xzf5Ch9vg5JwjPB1Rx4n7an3
         +96g==
X-Received: by 10.52.89.106 with SMTP id bn10mr7953497vdb.68.1359658686800;
 Thu, 31 Jan 2013 10:58:06 -0800 (PST)
MIME-Version: 1.0
Received: by 10.220.123.197 with HTTP; Thu, 31 Jan 2013 10:57:46 -0800 (PST)
In-Reply-To: <1359657577920-4037766.post@n3.nabble.com>
References: <1359657577920-4037766.post@n3.nabble.com>
From: Michael McCandless <lucene@mikemccandless.com>
Date: Thu, 31 Jan 2013 13:57:46 -0500
Message-ID: <CAL8PwkaRKWdEc_=B3vvHkaD9tiFrPEbdHPY3cv8Xcq6Ro2wDZw@mail.gmail.com>
Subject: Re: IndexWriterConfig.OpenMode.CREATE vs OpenMode.APPEND (index files)
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Gm-Message-State: ALoCoQmzPBfstThIuAfZC8cwG8l4hFutFAvtnaoHi4jG6JUvFOPYIa9C4xz5YTqfuDisGwbaW+TO
X-Virus-Checked: Checked by ClamAV on apache.org

I don't know what _0.csi is ... was that supposed to be _0.si?

Did you pass create=true or false for the 2nd update?

Mike McCandless

http://blog.mikemccandless.com

On Thu, Jan 31, 2013 at 1:39 PM, saisantoshi <saisantoshi76@gmail.com> wrote:
> I am using the following below for creating the IndexWriter (for my
> indexing):
>
> IndexWriterConfig indexWriterConfig = new
> IndexWriterConfig(Version.LUCENE_40,
>                 new LimitTokenCountAnalyzer(analyzer,
> MAX_FIELD_SCAN_LENGTH));
>
> if (create) {  // create will be trure for indexing first time and later
> will be false for updating the existing index
>                 indexWriterConfig.setOpenMode(OpenMode.CREATE);
>         } else {
>             indexWriterConfig.setOpenMode(OpenMode.APPEND);
>   }
>         TieredMergePolicy mergePolicy = new TieredMergePolicy();
>         indexWriterConfig.setMergePolicy(mergePolicy.setNoCFSRatio(1.0d));
>          IndexWriter indexWriter = new IndexWriter(directory,
> indexWriterConfig);
>
> For creating the first time, index it is creating the following files:
>
> _0.cfe
> _0.cfs
> _0.csi
> segments.gen
> segments_1
>
> on subsequent updates, it is creating additional files like the below:
>
> _0.cfe
> _0.cfs
> _0.csi
> _1.cfe
> _1.cfs
> _1.csi
> _0_1.del
> _2.cfe
> _2.cfs
> _2.csi
> segments.gen
> segments_3
>
> I am assuming that it should override the files initially created for
> indexing:
>
> should have just the following below files:
>
> _2.cfe
> _2.cfs
> _2.csi
> segments.gen
> segments_3
>
> Can someone please let me know if this is intended behavior or something
> wrong with the way I am creating the IndexWriterConfig.
>
> Appreciate if you could shed some light on this as the docs are not very
> clear.
>
> Thanks,
> Sai.
>
>
>
>
>
>
>
>
> --
> View this message in context: http://lucene.472066.n3.nabble.com/IndexWriterConfig-OpenMode-CREATE-vs-OpenMode-APPEND-index-files-tp4037766.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54987-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jan 31 19:53:22 2013
Return-Path: <java-user-return-54987-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 16585E32F
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 31 Jan 2013 19:53:22 +0000 (UTC)
Received: (qmail 17059 invoked by uid 500); 31 Jan 2013 19:53:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16948 invoked by uid 500); 31 Jan 2013 19:53:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16939 invoked by uid 99); 31 Jan 2013 19:53:19 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Jan 2013 19:53:19 +0000
X-ASF-Spam-Status: No, hits=1.7 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of george.kelvin738@gmail.com designates 209.85.212.182 as permitted sender)
Received: from [209.85.212.182] (HELO mail-wi0-f182.google.com) (209.85.212.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Jan 2013 19:53:14 +0000
Received: by mail-wi0-f182.google.com with SMTP id hn14so3216786wib.9
        for <java-user@lucene.apache.org>; Thu, 31 Jan 2013 11:52:53 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:x-received:in-reply-to:references:date:message-id
         :subject:from:to:content-type;
        bh=8PeGbhhvk1WkSkefemZ4x0RKB2iSZ5I8rxzE2LqQCu8=;
        b=nwvFZSNtCileklt9Q3KfSb8Cu2rPVkPqbUYuR/GHcSq27fZZqbqzJHczCBErV30bQz
         ULzl6mX9MvhktRIhq0OyeFdmE9ESWfnzfaHjDQS2efTJiuGpwNvEi1EiGgRHqpQzwGbj
         +BH+Do9qD6dshvvSW/yMTQ/UsGoZ/7rzrQwL8LTqu32wf+r0XOlJGaZg7sNZFbFZO/n7
         jcexSHCeTgGx8lrCpSNDS2/QP2A8J60C0rnCP6+wQGCuSi/2IcyXqB9iUgDN2lr9EZxh
         /Ws78nXjykXqVBxg264cgtJHiSyOPXK8XoND2kG4X5LvDvo7efq0ho/mVjyRWCVYLYww
         VV8g==
MIME-Version: 1.0
X-Received: by 10.194.119.5 with SMTP id kq5mr17592153wjb.48.1359661973250;
 Thu, 31 Jan 2013 11:52:53 -0800 (PST)
Received: by 10.194.26.101 with HTTP; Thu, 31 Jan 2013 11:52:53 -0800 (PST)
In-Reply-To: <CAL8PwkbLWzGBZ0CFmZQO3hm7C-RC3-L+iiCDddckT+7wuLusvw@mail.gmail.com>
References: <CAFh=WLgJq2FC2LzgZhOf8mKC=1x=7A3krQktCOSKTMSvD2=3jg@mail.gmail.com>
	<7BFFE07077B64238BF94592798403F43@JackKrupansky>
	<CAFh=WLgF0A4bq7VLOUuz0QxxHefUN_0Er2puG0D3nbSFt-oYLQ@mail.gmail.com>
	<18CE550667164D328619C39B3BA871E1@JackKrupansky>
	<CAFh=WLjwACFHSbOR9M2e4yYCpRVY0b8G12VDDCDzz4TLWHgf3A@mail.gmail.com>
	<CAL8PwkbLWzGBZ0CFmZQO3hm7C-RC3-L+iiCDddckT+7wuLusvw@mail.gmail.com>
Date: Thu, 31 Jan 2013 11:52:53 -0800
Message-ID: <CAFh=WLg85C0k4U0pJv-RVJRKNUtQFNF-Mn7fZLo6pcx7Xbm4JQ@mail.gmail.com>
Subject: Re: Questions about FuzzyQuery in Lucene 4.x
From: George Kelvin <george.kelvin738@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=089e01227bf8ee21c104d49af8ea
X-Virus-Checked: Checked by ClamAV on apache.org

--089e01227bf8ee21c104d49af8ea
Content-Type: text/plain; charset=ISO-8859-1

Hi Jack, sorry for confusing you. I understand that it would be great if a
minimal data set can be provided to repro the problem. But I was unable to
do that..

Hi Michael,

Thank you! That is the problem! I changed the maxExpansions to 100 and the
results are found.

About my second question, the ranking of wildcard fuzzy search, can you
also give some suggestions? Thanks!

George


On Wed, Jan 30, 2013 at 10:05 AM, Michael McCandless <
lucene@mikemccandless.com> wrote:

> On Tue, Jan 29, 2013 at 2:43 PM, George Kelvin
> <george.kelvin738@gmail.com> wrote:
> > Hi Jack,
> >
> > The problematic query is "scar"+"wads".
> >
> > There are several (more than 10) documents in the data with the content
> > "star wars", so I think that query should be able to find all these
> > documents.
> >
> > I was trying to provide a minimal test case, but I couldn't reduce the
> size
> > of data showing the failure.
> >
> > The size of the minimal data showing the failure I got so far is around 2
> > million.
> >
> > However, I found a suspicious document with content "scor". If I remove
> it
> > from the 2 million documents data, that query can find all the "star
> wars"
> > documents. If I add it back, then the query can't find any.
>
> Hmm, maybe try increasing the maxExpansions (one of FuzzyQ's ctors take
> that).
>
> By default it's 50, meaning we enumerate the top 50 terms within edit
> distance 1, so it could be "star" is falling out of the top 50?
>
> Mike McCandless
>
> http://blog.mikemccandless.com
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--089e01227bf8ee21c104d49af8ea--

From java-user-return-54988-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jan 31 19:55:17 2013
Return-Path: <java-user-return-54988-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 908F3E341
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 31 Jan 2013 19:55:17 +0000 (UTC)
Received: (qmail 26638 invoked by uid 500); 31 Jan 2013 19:55:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26572 invoked by uid 500); 31 Jan 2013 19:55:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26563 invoked by uid 99); 31 Jan 2013 19:55:15 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Jan 2013 19:55:15 +0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,SPF_NEUTRAL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: 216.139.236.26 is neither permitted nor denied by domain of saisantoshi76@gmail.com)
Received: from [216.139.236.26] (HELO sam.nabble.com) (216.139.236.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Jan 2013 19:55:08 +0000
Received: from ben.nabble.com ([192.168.236.152])
	by sam.nabble.com with esmtp (Exim 4.72)
	(envelope-from <saisantoshi76@gmail.com>)
	id 1U10Dg-0001Um-80
	for java-user@lucene.apache.org; Thu, 31 Jan 2013 11:54:48 -0800
Date: Thu, 31 Jan 2013 11:54:48 -0800 (PST)
From: saisantoshi <saisantoshi76@gmail.com>
To: java-user@lucene.apache.org
Message-ID: <1359662088235-4037785.post@n3.nabble.com>
In-Reply-To: <CAL8PwkaRKWdEc_=B3vvHkaD9tiFrPEbdHPY3cv8Xcq6Ro2wDZw@mail.gmail.com>
References: <1359657577920-4037766.post@n3.nabble.com> <CAL8PwkaRKWdEc_=B3vvHkaD9tiFrPEbdHPY3cv8Xcq6Ro2wDZw@mail.gmail.com>
Subject: Re: IndexWriterConfig.OpenMode.CREATE vs OpenMode.APPEND (index
 files)
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

It's _0.si ( typo)

For second update, create = "false".

Thanks,
Sai.



--
View this message in context: http://lucene.472066.n3.nabble.com/IndexWriterConfig-OpenMode-CREATE-vs-OpenMode-APPEND-index-files-tp4037766p4037785.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54989-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jan 31 20:08:23 2013
Return-Path: <java-user-return-54989-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 9C8FEE3C9
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 31 Jan 2013 20:08:23 +0000 (UTC)
Received: (qmail 72347 invoked by uid 500); 31 Jan 2013 20:08:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72280 invoked by uid 500); 31 Jan 2013 20:08:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72271 invoked by uid 99); 31 Jan 2013 20:08:21 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Jan 2013 20:08:21 +0000
X-ASF-Spam-Status: No, hits=1.3 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.220.174] (HELO mail-vc0-f174.google.com) (209.85.220.174)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Jan 2013 20:08:15 +0000
Received: by mail-vc0-f174.google.com with SMTP id n11so1981971vch.19
        for <java-user@lucene.apache.org>; Thu, 31 Jan 2013 12:07:54 -0800 (PST)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=x-received:mime-version:in-reply-to:references:from:date:message-id
         :subject:to:content-type:x-gm-message-state;
        bh=LK7JCC0aHJj+Nb7xoihNV6TqxGi9CiBsmM+F56NBH6M=;
        b=cz/9dgyGNXgKnTbGL4yOW2KpOA9MDK5U26Q0rJuZJkoaDis+8j31uFA+jyCNXeWS+W
         3bPRpYMtVvQmDYeFtgL5GERYSnShMmet0sSDWZ+yHd3f4MbDjfaoxfsLRf2/k1QOMGUB
         3QA2b7AvgLeyRF+zJrepyVurxChvMGUsChTxwkTouSo2Ucg5AJknK0DGwWep1AdiExuf
         Px216Xm1iko9cqUKF5j0xlK+BGNUFsSGbHGej454Zwbr6g1aeeO+zfk3cD1jfxAa8UfI
         N97TkNDb+jo7o972TNaa9XusEBwY3LulBKgeQjSLbJIdcbNL7B+enRj20guAJAQTZnqg
         i4CQ==
X-Received: by 10.220.219.73 with SMTP id ht9mr9116204vcb.47.1359662874477;
 Thu, 31 Jan 2013 12:07:54 -0800 (PST)
MIME-Version: 1.0
Received: by 10.220.123.197 with HTTP; Thu, 31 Jan 2013 12:07:34 -0800 (PST)
In-Reply-To: <1359662088235-4037785.post@n3.nabble.com>
References: <1359657577920-4037766.post@n3.nabble.com> <CAL8PwkaRKWdEc_=B3vvHkaD9tiFrPEbdHPY3cv8Xcq6Ro2wDZw@mail.gmail.com>
 <1359662088235-4037785.post@n3.nabble.com>
From: Michael McCandless <lucene@mikemccandless.com>
Date: Thu, 31 Jan 2013 15:07:34 -0500
Message-ID: <CAL8PwkY1Ef9VR4SDhhk+3Ntu9sTSNA-ROiS9PABaprMfpoU9iw@mail.gmail.com>
Subject: Re: IndexWriterConfig.OpenMode.CREATE vs OpenMode.APPEND (index files)
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Gm-Message-State: ALoCoQk/B5y4OHjP+OrEAvAD9IcXvHZ+g8wnvt7IsvM0gcge5LmMlDqoH+k9Z0t//8IXbjUu+wDs
X-Virus-Checked: Checked by ClamAV on apache.org

Then those files are expected.

Your 2nd open was with APPEND, which means newly indexed documents are
written into a new set of files.

Lucene is segment based, so your first batch of documents are in
segment _0, while your second batch is in _1 and _2.

Mike McCandless

http://blog.mikemccandless.com

On Thu, Jan 31, 2013 at 2:54 PM, saisantoshi <saisantoshi76@gmail.com> wrote:
> It's _0.si ( typo)
>
> For second update, create = "false".
>
> Thanks,
> Sai.
>
>
>
> --
> View this message in context: http://lucene.472066.n3.nabble.com/IndexWriterConfig-OpenMode-CREATE-vs-OpenMode-APPEND-index-files-tp4037766p4037785.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54990-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jan 31 20:24:13 2013
Return-Path: <java-user-return-54990-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 624C5E7B3
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 31 Jan 2013 20:24:13 +0000 (UTC)
Received: (qmail 44414 invoked by uid 500); 31 Jan 2013 20:24:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44342 invoked by uid 500); 31 Jan 2013 20:24:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44333 invoked by uid 99); 31 Jan 2013 20:24:11 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Jan 2013 20:24:11 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.212.53] (HELO mail-vb0-f53.google.com) (209.85.212.53)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Jan 2013 20:24:05 +0000
Received: by mail-vb0-f53.google.com with SMTP id fj18so1991870vbb.40
        for <java-user@lucene.apache.org>; Thu, 31 Jan 2013 12:23:44 -0800 (PST)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=x-received:mime-version:in-reply-to:references:from:date:message-id
         :subject:to:content-type:x-gm-message-state;
        bh=t9zdpm5XYyDqcXOQKxX6uuDf3kvWRlmZNRrsMNj/9LA=;
        b=DmnPrdG3RTt4cEvAibYrNyjqRrV11ZOuKs0BcePwIcOs93ZItjhHaxQR1zwe+n+qXh
         +ovWt6zt40OM22jgSrqILYUeFQYxswfFEBEMdq3CD0EvtH1Sq/NCnz9sY+Qw5JZrtQTZ
         1JA4NLUmlxJnLHreUALGrFaQpY/hFOXLVRImoxqQ5Y3wU4bZPnuciODlWNQXEoX8nR8p
         ox99MoePegcvKOw50i48Yfmfi5kgM80sdLPbS9YqSQ4GG69OhPWI251IlzIC5pm7Xrjj
         e+mNumtWyh2cPRBhfIXanQR7K9XNSp7bFkbQ56vBWawq/sAqE3e4K7jDjt+WLd2OGPCh
         675A==
X-Received: by 10.52.89.106 with SMTP id bn10mr8183268vdb.68.1359663824461;
 Thu, 31 Jan 2013 12:23:44 -0800 (PST)
MIME-Version: 1.0
Received: by 10.220.123.197 with HTTP; Thu, 31 Jan 2013 12:23:24 -0800 (PST)
In-Reply-To: <CAFh=WLg85C0k4U0pJv-RVJRKNUtQFNF-Mn7fZLo6pcx7Xbm4JQ@mail.gmail.com>
References: <CAFh=WLgJq2FC2LzgZhOf8mKC=1x=7A3krQktCOSKTMSvD2=3jg@mail.gmail.com>
 <7BFFE07077B64238BF94592798403F43@JackKrupansky> <CAFh=WLgF0A4bq7VLOUuz0QxxHefUN_0Er2puG0D3nbSFt-oYLQ@mail.gmail.com>
 <18CE550667164D328619C39B3BA871E1@JackKrupansky> <CAFh=WLjwACFHSbOR9M2e4yYCpRVY0b8G12VDDCDzz4TLWHgf3A@mail.gmail.com>
 <CAL8PwkbLWzGBZ0CFmZQO3hm7C-RC3-L+iiCDddckT+7wuLusvw@mail.gmail.com> <CAFh=WLg85C0k4U0pJv-RVJRKNUtQFNF-Mn7fZLo6pcx7Xbm4JQ@mail.gmail.com>
From: Michael McCandless <lucene@mikemccandless.com>
Date: Thu, 31 Jan 2013 15:23:24 -0500
Message-ID: <CAL8PwkY83MvZLkxHe40eFqVtqoteQ54pkv74MqG3_GfPfBffsg@mail.gmail.com>
Subject: Re: Questions about FuzzyQuery in Lucene 4.x
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Gm-Message-State: ALoCoQmx2cTXFmKfB1pbTa1Si34KD2he946WbtMCuM0i8ro2wJbcfPIwuEV7+0u54Oo5GamHEOtf
X-Virus-Checked: Checked by ClamAV on apache.org

On Thu, Jan 31, 2013 at 2:52 PM, George Kelvin
<george.kelvin738@gmail.com> wrote:

> Thank you! That is the problem! I changed the maxExpansions to 100 and the
> results are found.

Phew!

> About my second question, the ranking of wildcard fuzzy search, can you
> also give some suggestions? Thanks!

This is tricky, eg see how FuzzyQuery sets the per-term score in
FuzzyTermsEnum using BoostAttribute.

Rob's answer (on that stackoverflow question) is a nice solution,
since it make a single Automaton matching the right (fuzzy + prefix)
terms ... maybe you could make your own TermsEnum that somehow finds
the "fuzzy" part of the matching term and then computes the edit
distance and sets the BoostAttribute accordingly?

Or alternatively maybe you could enumerate the top N matching terms
and their edit distances, and create your own BooleanQuery with those
terms fed to PrefixQuery, with the boost set?

Really, ideally, our Automaton would be able to carry weights, and the
LevN machine would set weights according to the edit distance.  Then
AutomatonQuery could boost terms according to the matched weight and
Rob's solution would "just work"... or maybe we convert the Automaton
to an FST (which can represent weights on its outputs) and make an
FSTQuery.

But in the meantime I think making your own BQ (which is what FuzzyQ
does anyway under the hood) is the best workaround ...

Mike McCandless

http://blog.mikemccandless.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54991-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jan 31 20:37:10 2013
Return-Path: <java-user-return-54991-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 964F6E47F
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 31 Jan 2013 20:37:10 +0000 (UTC)
Received: (qmail 92186 invoked by uid 500); 31 Jan 2013 20:37:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92133 invoked by uid 500); 31 Jan 2013 20:37:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92125 invoked by uid 99); 31 Jan 2013 20:37:08 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Jan 2013 20:37:08 +0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,SPF_NEUTRAL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: 216.139.236.26 is neither permitted nor denied by domain of saisantoshi76@gmail.com)
Received: from [216.139.236.26] (HELO sam.nabble.com) (216.139.236.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Jan 2013 20:37:03 +0000
Received: from ben.nabble.com ([192.168.236.152])
	by sam.nabble.com with esmtp (Exim 4.72)
	(envelope-from <saisantoshi76@gmail.com>)
	id 1U10sE-0004Zi-Cq
	for java-user@lucene.apache.org; Thu, 31 Jan 2013 12:36:42 -0800
Date: Thu, 31 Jan 2013 12:36:42 -0800 (PST)
From: saisantoshi <saisantoshi76@gmail.com>
To: java-user@lucene.apache.org
Message-ID: <1359664602389-4037796.post@n3.nabble.com>
In-Reply-To: <CAL8PwkY1Ef9VR4SDhhk+3Ntu9sTSNA-ROiS9PABaprMfpoU9iw@mail.gmail.com>
References: <1359657577920-4037766.post@n3.nabble.com> <CAL8PwkaRKWdEc_=B3vvHkaD9tiFrPEbdHPY3cv8Xcq6Ro2wDZw@mail.gmail.com> <1359662088235-4037785.post@n3.nabble.com> <CAL8PwkY1Ef9VR4SDhhk+3Ntu9sTSNA-ROiS9PABaprMfpoU9iw@mail.gmail.com>
Subject: Re: IndexWriterConfig.OpenMode.CREATE vs OpenMode.APPEND (index
 files)
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Is it by design. The older API (2.4) does not have this problem. Lets say if
I have 100 updates or so.. then it will create 100 versions of those files
in the index. This would increase the number of files in the index directory
and might run into some file issues?

It would be good to just have the following instead:

_100.cfe
_100.cfs
_100.csi
segments.gen
segments_1

why are the older files in the index folder? Are they used for anything?
BTW,can I use any other option to just overwrite the existing files in the
index directory such that there are only fewer files in the index directory.

Thanks,
Sai.



--
View this message in context: http://lucene.472066.n3.nabble.com/IndexWriterConfig-OpenMode-CREATE-vs-OpenMode-APPEND-index-files-tp4037766p4037796.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54992-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jan 31 20:47:59 2013
Return-Path: <java-user-return-54992-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id A309CE514
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 31 Jan 2013 20:47:59 +0000 (UTC)
Received: (qmail 40446 invoked by uid 500); 31 Jan 2013 20:47:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40391 invoked by uid 500); 31 Jan 2013 20:47:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40382 invoked by uid 99); 31 Jan 2013 20:47:57 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Jan 2013 20:47:57 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.220.181] (HELO mail-vc0-f181.google.com) (209.85.220.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Jan 2013 20:47:51 +0000
Received: by mail-vc0-f181.google.com with SMTP id d16so1993465vcd.26
        for <java-user@lucene.apache.org>; Thu, 31 Jan 2013 12:47:30 -0800 (PST)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=x-received:mime-version:in-reply-to:references:from:date:message-id
         :subject:to:content-type:x-gm-message-state;
        bh=gd0gA6739PTGLP72crBPrwDxgkiUSI9IIW4pWexXtxY=;
        b=d4Q+rMPAi7qGEbC8AVu/FVh4Xe8fZiJn56isdaRM//vXeEKivFrI7VB2Xxl1+B0Q4O
         pxqmzwpUIuQV6KP0yvwphMn57kU7pEJZCCHXYhK16grNrVzAdaeg74Ti+YlXZdQinndI
         Vz+uWAC2sdoCNVWXUxwmsznkVgI/tyPyawAdrC+I/9V62NvopTwsylVp7UwJxqtapyEX
         1RhNkTmNFeEnQjNLPEpwniIpI8ceqBj+cHu+taEJwkxJllcO2Ry6jBYg5p4kV1hYTogd
         9gCp2pbNv6mnnHuEKCdhFtRjyw8x9EWD3EiF67CabAeoEKw4AFcZXRKFDJwvjibaABZo
         iyuA==
X-Received: by 10.52.95.144 with SMTP id dk16mr8202870vdb.40.1359665250662;
 Thu, 31 Jan 2013 12:47:30 -0800 (PST)
MIME-Version: 1.0
Received: by 10.220.123.197 with HTTP; Thu, 31 Jan 2013 12:47:10 -0800 (PST)
In-Reply-To: <CADuAvzeqiyUMJOrKeikciYUysnhWbBbWcMEkcb1rFSxPHW9Qew@mail.gmail.com>
References: <CADuAvzeqiyUMJOrKeikciYUysnhWbBbWcMEkcb1rFSxPHW9Qew@mail.gmail.com>
From: Michael McCandless <lucene@mikemccandless.com>
Date: Thu, 31 Jan 2013 15:47:10 -0500
Message-ID: <CAL8PwkbDqxq2eePdoMEPQnVC3ScBp7=EHjrH6Jx7n+M2K4p97g@mail.gmail.com>
Subject: Re: Migrating from using doc IDs to using application IDs from the FieldCache
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Gm-Message-State: ALoCoQklEeulUUq5UtbZ9tOvoHF5x5KPpvD8Pc7J7R1PbyLQFhSyZuWRFr73BDMpwfjey4+gz2YI
X-Virus-Checked: Checked by ClamAV on apache.org

Unfortunately, t's not possible/easy to just add one new field to all
existing docs ... there are several issues open to do this, eg see
https://issues.apache.org/jira/browse/LUCENE-4258 and LUCENE-3837 and
LUCENE-4272.

Mike McCandless

http://blog.mikemccandless.com

On Thu, Jan 31, 2013 at 8:00 AM, Trejkaz <trejkaz@trypticon.org> wrote:
> Hi all.
>
> We have an application which has been around for so long that it's
> still using doc IDs to key to an external database.
>
> Obviously this won't work forever (even in Lucene 3.x we had to use a
> custom merge policy to keep it working) so we want to introduce
> application IDs eventually. We have two potential paths here:
>
>   1. Use our existing GUID field as the new unique ID and migrate to
> that (with the huge drawback that indexing GUID columns on the
> database is much, much slower than the current int column.)
>   2. Introduce a new application ID (either int or long) and somehow
> insert that into every document.
>
> The time it would take to pull every document out, add a field for the
> ID and index it again is too long to be desirable, so I'm wondering:
> is there some way we could add this field to every document without
> reindexing? Keeping Lucene 3.x as the limitation, that is... our
> 2.x-created indexes presumably won't open at all in 4.x without
> significant work.
>
> TX
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54993-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jan 31 20:49:23 2013
Return-Path: <java-user-return-54993-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 1A7F4E533
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 31 Jan 2013 20:49:23 +0000 (UTC)
Received: (qmail 46601 invoked by uid 500); 31 Jan 2013 20:49:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46520 invoked by uid 500); 31 Jan 2013 20:49:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46512 invoked by uid 99); 31 Jan 2013 20:49:20 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Jan 2013 20:49:20 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.128.181] (HELO mail-ve0-f181.google.com) (209.85.128.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Jan 2013 20:49:15 +0000
Received: by mail-ve0-f181.google.com with SMTP id d10so2379625vea.40
        for <java-user@lucene.apache.org>; Thu, 31 Jan 2013 12:48:54 -0800 (PST)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=x-received:mime-version:in-reply-to:references:from:date:message-id
         :subject:to:content-type:x-gm-message-state;
        bh=fCqIgDQjqYiETb/CpNeWwFvageK34RhZGKesKPiLYGM=;
        b=cTbbOx1wfuO13Jk8ANcJNnkvnhY8BhVtlWRNxvtMv2WA0VJhAJQbeRjRwoomc50Jo+
         Gui47YK0aQAcE54UYPOlW4Q21ZV3oTl0+bVpP9doTvUvAKpnXsrzDTSIzgbqNLCYKgbM
         PWEs3nnK+R7pgh0Zx+BWQ9B3+eaIstUUED130HhTcSSFutuSQAE4+J0Qy33xdp9M0S07
         LaoEhmNydpBgxiNZrARjXl5rdGdx9o1G2oHbtLzXaoHV6B6hCdHOKOqJWa0BTA8ymo06
         PxPEzitXMjmua9ZYI74bJTAgsoEx1sS6q/PJCYaFOOtE2GylQTASUHYis4nt/h5xfvf/
         u0EA==
X-Received: by 10.52.95.144 with SMTP id dk16mr8205790vdb.40.1359665334695;
 Thu, 31 Jan 2013 12:48:54 -0800 (PST)
MIME-Version: 1.0
Received: by 10.220.123.197 with HTTP; Thu, 31 Jan 2013 12:48:34 -0800 (PST)
In-Reply-To: <CADuAvzdViyJJEDvnXBhuCVHYC0jRyxkBmrx0PxfUE=OWnAi4qQ@mail.gmail.com>
References: <CAMMjTZz_TS1fT+7tGn9D2M9X0B7Oqk1DrRwNpkr_RsLsU9jCVA@mail.gmail.com>
 <CAL8Pwka3bomJqXC6YrKHv5wLKR26217TqQrXbsdUE-YuuBkaFA@mail.gmail.com> <CADuAvzdViyJJEDvnXBhuCVHYC0jRyxkBmrx0PxfUE=OWnAi4qQ@mail.gmail.com>
From: Michael McCandless <lucene@mikemccandless.com>
Date: Thu, 31 Jan 2013 15:48:34 -0500
Message-ID: <CAL8PwkYsyy4a-k1j=tNqApJPQrhnhD=TuYwErn24fGHaPCrmkw@mail.gmail.com>
Subject: Re: How to properly use updatedocument in lucene.
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Gm-Message-State: ALoCoQm/nUFcHp6J+9sM+Ys4o0Hfmthl3CDVFArrVCeXctMVy8xFy5c3TeP1WGCXl8fAIQMfw8lB
X-Virus-Checked: Checked by ClamAV on apache.org

On Thu, Jan 31, 2013 at 7:56 AM, Trejkaz <trejkaz@trypticon.org> wrote:
> On Thu, Jan 31, 2013 at 11:05 PM, Michael McCandless
> <lucene@mikemccandless.com> wrote:
>> It's confusing, but you should never try to re-index a document you
>> retrieved from a searcher, because certain index-time details (eg,
>> whether a field was tokenized) are not preserved in the stored
>> document.
>>
>> Instead, you should re-build the document yourself, setting the right
>> details per-Field, and then re-index that.
>
> Just to check about this - if you use the same PerFieldAnalyzerWrapper
> when indexing the new document, doing it this way is safe, right?
> (With the exception of fields you originally indexed which weren't
> stored at all, of course... which would have to be reconstructed from
> some other location.)

No, it's not safe: the loaded Document will have lost details about
even the stored fields, such as whether they were Tokenized or not,
their boost, whether term vectors were indexed, etc.

In Lucene 5.0 we've changed the loaded document to have a new type
(StoredDocument) to prevent this trap ...

Mike McCandless

http://blog.mikemccandless.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-54994-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jan 31 20:56:19 2013
Return-Path: <java-user-return-54994-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 67C67E5AF
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 31 Jan 2013 20:56:19 +0000 (UTC)
Received: (qmail 76150 invoked by uid 500); 31 Jan 2013 20:56:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76106 invoked by uid 500); 31 Jan 2013 20:56:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76098 invoked by uid 99); 31 Jan 2013 20:56:17 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Jan 2013 20:56:17 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.128.169] (HELO mail-ve0-f169.google.com) (209.85.128.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Jan 2013 20:56:10 +0000
Received: by mail-ve0-f169.google.com with SMTP id 15so628022vea.0
        for <java-user@lucene.apache.org>; Thu, 31 Jan 2013 12:55:49 -0800 (PST)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=x-received:mime-version:in-reply-to:references:from:date:message-id
         :subject:to:content-type:x-gm-message-state;
        bh=dg0/0Ft94xC3sWX8VsIkIk+rYw/zBSVkEysO6QbU8iA=;
        b=n0ZyyhVEEOrvopK1lFkzSB9aSOISj2YfHFvimW2zlNGGfGl+EegETCrW+peLrahCDk
         t+rd0Me+Nsd7wHr1PxJrua4YgolkPpb+2Fu6+qQSn0QNGeuMOPq1zj6sDFnIdqoOjEhB
         Gugl9ZfU7mSWTGg0HsU3+tpJpqCsQHqiKTEYhKMD9ygthTgyiNxDK9JEmJ7AyWHsT6Kf
         YritrW6Cx/xSgWIu0TtQQN1ccN+zSiM8OpFk+uRUS9fRw+kucC+pmaDFt/qf2QyKbAb/
         kKvs9/W1YOlLTK/lb5wN3SHTUQ+B19QLptv+YPtPJk91KLRU1MXXtCHqqaHl6EnEvCNG
         HT2Q==
X-Received: by 10.220.9.3 with SMTP id j3mr8916481vcj.56.1359665749586; Thu,
 31 Jan 2013 12:55:49 -0800 (PST)
MIME-Version: 1.0
Received: by 10.220.123.197 with HTTP; Thu, 31 Jan 2013 12:55:29 -0800 (PST)
In-Reply-To: <CAJf3Rj2Am3A1C4BMRHjH41MvH1_A2s13RJsh87-j8DpjBkhnKA@mail.gmail.com>
References: <CAJf3Rj14Kbv97rQy_rJM2iXCfA8UOY=Bq4r7st+PCrBE4B-Hhw@mail.gmail.com>
 <CAL8PwkZiw4iGy9rRmwrV38uheOnuY43JjcCv8fQETXpMfKRqRg@mail.gmail.com> <CAJf3Rj2Am3A1C4BMRHjH41MvH1_A2s13RJsh87-j8DpjBkhnKA@mail.gmail.com>
From: Michael McCandless <lucene@mikemccandless.com>
Date: Thu, 31 Jan 2013 15:55:29 -0500
Message-ID: <CAL8Pwkat+CDLacvWUi6zB0eNLvFRjDnX5XBTCXs6Mj3Spu3uAg@mail.gmail.com>
Subject: Re: How to get field names and types from an IndexSearcher
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Gm-Message-State: ALoCoQm30kyQxmjXP8KoT/wBhyqXjv5q31JhEUOcF4CQC/Q+HOFjL5Eay6mDc7uaTv6AkJtraV/9
X-Virus-Checked: Checked by ClamAV on apache.org

On Thu, Jan 31, 2013 at 7:31 AM, Rolf Veen <rolf.veen@gmail.com> wrote:
> Thank you, Mike.
>
> I didn't state why I need this. I want to be able to send
> a query to some QueryParser that understands "field:1"
> regardless if 'field' was added as StringField or LongField,
> for example. I do not want to rely on schema information
> if I can avoid it, and rather use a smart QueryParser.
> What would be the best approach to implement this ?

But are you wanting to, eg, make a NumericRangeQuery if you detect the
field was indexed numerically, and otherwise a TermRangeQuery, or
something...?  (Not easy)

Or you just want to recognize valid fields vs invalid ones? (Easy)

Mike McCandless

http://blog.mikemccandless.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


